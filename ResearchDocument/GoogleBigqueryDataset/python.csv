id,title,body,tags,answers,score
18600200,"python multicore queue randomly hangs for no reason, despite queue size being tiny","<p>in python here is my multiprocessing setup. I subclassed the Process method and gave it
a queue and some other fields for pickling/data purposes. </p>

<p>This strategy works about 95% of the time, the other 5% for an unknown reason the queue just hangs and it never finishes (it's common that 3 of the 4 cores finish their jobs and the last one takes forever so I have to just kill the job).</p>

<p>I am aware that queue's have a fixed size in python, or they will hang. My queue only stores one character strings... the id of the processor, so it can't be that.</p>

<p>Here is the exact line where my code halts:</p>

<pre><code>res = self._recv() 
</code></pre>

<p>Does anyone have ideas? The formal code is below.
Thank you.</p>

<pre><code>from multiprocessing import Process, Queue
from multiprocessing import cpu_count as num_cores
import codecs, cPickle

class Processor(Process):

    def __init__(self, queue, elements, process_num):
        super(Processor, self).__init__()
        self.queue = queue
        self.elements = elements
        self.id = process_num

    def job(self):

        ddd = []

        for l in self.elements:

            obj = ... heavy computation ...

            dd = {}
            dd['data'] = obj.data
            dd['meta'] = obj.meta
        ddd.append(dd)

        cPickle.dump(ddd, codecs.open(
            urljoin(TOPDIR, self.id+'.txt'), 'w'))

        return self.id

    def run(self):
        self.queue.put(self.job())



 if __name__=='__main__':

        processes = []

        for i in range(0, num_cores()):

            q = Queue()
            p = Processor(q, divided_work(), process_num=str(i))
            processes.append((p, q))
            p.start()

        for val in processes:

            val[0].join()
            key = val[1].get() 

            storage = urljoin(TOPDIR, key+'.txt')

            ddd = cPickle.load(codecs.open(storage , 'r'))

            .. unpack ddd process data ...
</code></pre>",python|python-2.7|multiprocessing,"<p>From my experience</p>

<pre><code>time.sleep(0.001)
</code></pre>

<p>Is by far not long enough.</p>

<p>I had a similar problem. It seems to happen if you call <code>get()</code> or <code>put()</code> on a queue ""too early"". I guess it somehow fails to initialize quick enough. Not entirely sure, but I'm speculating that it might have something to do with the ways a queue might use the underlying operating system to pass messages. It started happening to me after I started using BeautifulSoup and lxml and it affected totally unrelated code.</p>

<p>My solution is a little big ugly but it's simple and it works:</p>

<pre><code>import time

def run(self):
    error = True
    while error:
        self.queue.put(self.job())
        error = False
    except EOFError:
        print ""EOFError. retrying...""
        time.sleep(1)
</code></pre>

<p>On my machine it usually retries twice during application start-up and afterwards never again. You need to do that inside of sender AND receiver since this error will occur on both sides.</p>",0
18600200,"python multicore queue randomly hangs for no reason, despite queue size being tiny","<p>in python here is my multiprocessing setup. I subclassed the Process method and gave it
a queue and some other fields for pickling/data purposes. </p>

<p>This strategy works about 95% of the time, the other 5% for an unknown reason the queue just hangs and it never finishes (it's common that 3 of the 4 cores finish their jobs and the last one takes forever so I have to just kill the job).</p>

<p>I am aware that queue's have a fixed size in python, or they will hang. My queue only stores one character strings... the id of the processor, so it can't be that.</p>

<p>Here is the exact line where my code halts:</p>

<pre><code>res = self._recv() 
</code></pre>

<p>Does anyone have ideas? The formal code is below.
Thank you.</p>

<pre><code>from multiprocessing import Process, Queue
from multiprocessing import cpu_count as num_cores
import codecs, cPickle

class Processor(Process):

    def __init__(self, queue, elements, process_num):
        super(Processor, self).__init__()
        self.queue = queue
        self.elements = elements
        self.id = process_num

    def job(self):

        ddd = []

        for l in self.elements:

            obj = ... heavy computation ...

            dd = {}
            dd['data'] = obj.data
            dd['meta'] = obj.meta
        ddd.append(dd)

        cPickle.dump(ddd, codecs.open(
            urljoin(TOPDIR, self.id+'.txt'), 'w'))

        return self.id

    def run(self):
        self.queue.put(self.job())



 if __name__=='__main__':

        processes = []

        for i in range(0, num_cores()):

            q = Queue()
            p = Processor(q, divided_work(), process_num=str(i))
            processes.append((p, q))
            p.start()

        for val in processes:

            val[0].join()
            key = val[1].get() 

            storage = urljoin(TOPDIR, key+'.txt')

            ddd = cPickle.load(codecs.open(storage , 'r'))

            .. unpack ddd process data ...
</code></pre>",python|python-2.7|multiprocessing,<p>Do a <code>time.sleep(0.001)</code> at the beginning of your <code>run()</code> method.</p>,1
18214902,Python: Logging module for print statements: Duplicate log entries,"<p>UPDATE: Scroll down to EDIT SECTION (4) for an almost totally working version. Also removed EDIT SECTION (1) because this post is too long otherwise, and that is probably the least helpful section. The link that was originally in EDIT SECTION (1) is below.</p>

<p><a href=""https://stackoverflow.com/questions/616645/how-do-i-duplicate-sys-stdout-to-a-log-file-in-python"">How do I duplicate sys.stdout to a log file in python?</a></p>

<p>Long time searcher here, but first time asking a question.</p>

<p>EXPLANATION:</p>

<p>I need to have prints redirect to the log because I am incorporating C code through system calls that uses print statements for logging messages. There is also piles of old Python code written by my coworkers that gets called upon, which also uses print statements for debugging.</p>

<p>Ultimately, I want this to be able to handle logging.info('message') for my updated code, but also be able to redirect print statements through the built-in logging module for code I either can't change or simply haven't gotten around to updating yet.</p>

<p>Below is some example code I came up with to concisely demonstrate my problems.</p>

<p>QUESTIONS:</p>

<ol>
<li>I use the setup below for my logs, but every time I make a print, I get duplicate entries in my log (and a blank line). Can anyone explain why this happens?</li>
<li>It would be nice to figure out a better setup for the logging, so that the format statement includes the proper module name when I redirect a print command through logging.</li>
<li>My use of this Tee(object) class seems to break things occasionally. See supporting information section below.</li>
</ol>

<p>MY CODE:</p>

<p>Edit: Originally setuplog.Tee.<strong>init</strong> contained <code>if os.path.exists(LOGNAME): os.remove(LOGNAME)</code>. This has been removed and put into base.py.</p>

<p>setuplog.py:</p>

<pre><code>#!/usr/bin/python
import sys
import os
import logging
import logging.config

LOGNAME = 'log.txt'

CONFIG = {
    'version': 1,
    'disable_existing_loggers': True,
    'formatters': {
        'simple': {
            'format': '%(module)s:%(thread)d: %(message)s'
            },
        },
    'handlers': {
        'console': {
            'level': 'NOTSET',
            'class': 'logging.StreamHandler',
            'formatter': 'simple'
            },
        'file': {
            'level': 'NOTSET',
            'class': 'logging.FileHandler',
            'formatter': 'simple',
            'filename': LOGNAME
            },
        },
    'root': {
        'level': 'NOTSET',
        'handlers': ['console', 'file']
        },
    }


class Tee(object):
    def __init__(self):
        logging.config.dictConfig(CONFIG)
        self.logger = logging.getLogger(__name__)
        self.stdout = sys.stdout
        sys.stdout = self
    def __del__(self):
        sys.stdout = self.stdout
    def write(self, data):
        self.logger.info(data)
</code></pre>

<p>base.py:</p>

<pre><code>#!/usr/bin/python
import sys
import os
import logging
# My modules.
import setuplog
#import aux2


LOGNAME = 'log.txt'
if os.path.exists(LOGNAME):
    os.remove(LOGNAME)

not_sure_what_to_call_this = setuplog.Tee()

print '1 base'
logging.info('2 base')
print '3 base'
os.system('./aux1.py')
logging.info('4 base')
#aux2.aux2Function()
#logging.info('5 base')
</code></pre>

<p>aux1.py:</p>

<pre><code>#!/usr/bin/python
import sys
import os
import logging
import setuplog

not_sure_what_to_call_this = setuplog.Tee()

def main():
    print '1 aux1'
    logging.info('2 aux1')
    print '3 aux1'
    logging.info('4 aux1')


if __name__ == '__main__':
    main()
</code></pre>

<p>aux2.py:</p>

<pre><code>#!/usr/bin/python
import sys
import os
import logging
import setuplog

not_sure_what_to_call_this = setuplog.Tee()

def aux2Function():
    print '1 aux2'
    logging.info('2 aux2')
    print '3 aux2'
</code></pre>

<p>I then run from the shell ""./base.py"" and produce the following output (in console and in log.txt):</p>

<pre><code>setuplog:139833296844608: 1 aux1
setuplog:139833296844608:

aux1:139833296844608: 2 aux1
setuplog:139833296844608: 3 aux1
setuplog:139833296844608:

aux1:139833296844608: 4 aux1
</code></pre>

<p>As you can see, entries that generated with print are repeated (QUESTION 1). Also, I need to come up with a better convention for displaying the module name (QUESTION 2).</p>

<p>SUPPORTING INFORMATION FOR QUESTION 3:</p>

<p>From base.py, if I uncomment ""import aux2"", ""aux2.aux2Function()"", and ""logging.info('5 base')"", here is the new output (directly from my console as this is the only place the Python errors go to):</p>

<pre><code>base:140425995155264: 2 base
setuplog:140360687101760: 1 aux1
setuplog:140360687101760:

aux1:140360687101760: 2 aux1
setuplog:140360687101760: 3 aux1
setuplog:140360687101760:

aux1:140360687101760: 4 aux1
base:140425995155264: 4 base
aux2:140425995155264: 2 aux2
base:140425995155264: 5 base
Exception AttributeError: ""'NoneType' object has no attribute 'stdout'"" in &lt;bound method Tee.__del__ of &lt;setuplog.Tee object at 0x7fb772f58f10&gt;&gt; ignored
</code></pre>

<p>EDIT SECTION (2):</p>

<p>I have been playing around, and this sort of works. Here are (again) updated versions of the example code.</p>

<p>The reason why it ""sort of"" works is:</p>

<ol>
<li>I think exceptions should be avoided at all costs, and this makes use of one.</li>
<li>The log output is now somewhat manual. Let me explain. The %(name)s comes out as expected, but I have to set this manually. I would instead prefer some sort of descriptor that automatically picks out the name of the file, or something similar (picking out functions as a bonus?). %(module)s always display ""setuplog"" (correctly) for print statements, even if I want the module reported to be where the print statement came from, not the module where my class to direct print statements into the logging module is.</li>
</ol>

<p>setuplog.py:</p>

<pre><code>#!/usr/bin/python
import sys
import os
import logging
import logging.config

def startLog(name):
    logname = 'log.txt'
    config = {
        'version': 1,
        'disable_existing_loggers': True,
        'formatters': {
            'simple': {
                'format': '%(name)s:%(module)s:%(thread)s: %(message)s'
                },
            },
        'handlers': {
            'console': {
                'level': 'NOTSET',
                'class': 'logging.StreamHandler',
                'formatter': 'simple'
                },
            'file': {
                'level': 'NOTSET',
                'class': 'logging.FileHandler',
                'formatter': 'simple',
                'filename': logname
                },
            },
        'root': {
            'level': 'NOTSET',
            'handlers': ['console', 'file'],
            },
        }
    logging.config.dictConfig(config)
    return logging.getLogger(name)

class Tee():
    def __init__(self, logger):
        self.stdout = sys.stdout
        self.data = ''
        self.logger = logger
        sys.stdout = self
    def __del__(self):
        try:
            sys.stdout = self.stdout
        except AttributeError:
            pass
    def write(self, data):
        self.data += data
        self.data = str(self.data)
        if '\x0a' in self.data or '\x0d' in self.data:
            self.data = self.data.rstrip('\x0a\x0d')
            self.logger.info(self.data)
            self.data = ''
</code></pre>

<p>base.py:</p>

<pre><code>#!/usr/bin/python
import sys
import os
import logging
# My modules.
import setuplog
import aux2

LOGNAME = 'log.txt'
if os.path.exists(LOGNAME):
    os.remove(LOGNAME)
logger = setuplog.startLog('base')
setuplog.Tee(logger)

print '1 base'
logger.info('2 base')
print '3 base'
os.system('./aux1.py')
logger.info('4 base')
aux2.aux2Function()
logger.info('5 base')
</code></pre>

<p>aux1.py:</p>

<pre><code>#!/usr/bin/python
import sys
import os
import logging
import setuplog


def main():
    logger = setuplog.startLog('aux1')
    setuplog.Tee(logger)
    print '1 aux1'
    logger.info('2 aux1')
    print '3 aux1'
    logger.info('4 aux1')


if __name__ == '__main__':
    main()
</code></pre>

<p>aux2.py:</p>

<pre><code>#!/usr/bin/python
import sys
import os
import logging
import setuplog


def aux2Function():
    logger = setuplog.startLog('aux2')
    setuplog.Tee(logger)
    print '1 aux2'
    logger.info('2 aux2')
    print '3 aux2'
</code></pre>

<p>And the output:</p>

<pre><code>base:setuplog:139712687740736: 1 base
base:base:139712687740736: 2 base
base:setuplog:139712687740736: 3 base
aux1:setuplog:140408798721856: 1 aux1
aux1:aux1:140408798721856: 2 aux1
aux1:setuplog:140408798721856: 3 aux1
aux1:aux1:140408798721856: 4 aux1
base:base:139712687740736: 4 base
aux2:setuplog:139712687740736: 1 aux2
aux2:aux2:139712687740736: 2 aux2
aux2:setuplog:139712687740736: 3 aux2
</code></pre>

<p>EDIT SECTION (3):</p>

<p>Thanks to wonderful reply on reddit (<a href=""http://www.reddit.com/r/learnpython/comments/1kaduo/python_logging_module_for_print_statements/cbn2lef"" rel=""nofollow noreferrer"">http://www.reddit.com/r/learnpython/comments/1kaduo/python_logging_module_for_print_statements/cbn2lef</a>), I was able to develop a work around for the AttributeError. Rather than using an exception, I converted the class into a singleton.</p>

<p>Here is code for the updated Tee class:</p>

<pre><code>class Tee(object):
    _instance = None
    def __init__(self, logger):
        self.stdout = sys.stdout
        self.data = ''
        self.logger = logger
        sys.stdout = self
    def __new__(cls, *args, **kwargs):
        if not cls._instance:
            cls._instance = super(Tee, cls).__new__(cls, *args, **kwargs)
        return cls._instance
    def __del__(self):
        sys.stdout = self.stdout
    def write(self, data):
        self.data += data
        self.data = str(self.data)
        if '\x0a' in self.data or '\x0d' in self.data:
            self.data = self.data.rstrip('\x0a\x0d')
            self.logger.info(self.data)
            self.data = ''
</code></pre>

<p>EDIT SECTION (4):</p>

<p>This almost completely works! It works well enough for me to implement it. The only problem now is getting the format of the output to be more helpful. For example, %(filename)s is setuplog.py for all rerouted print statements. It would be much more beneficial if %(filename)s was the file from which the print statement originated. Any ideas?</p>

<p>Also, I had to ditch the dictionary method. The only way I could get this to all work was by setting up the logger through Python code.</p>

<p>Last point, look into aux3.py. If os.system is used rather than subprocess, the order of the logging gets messed up. Does anyone know a work around to still use os.system and get the proper order (so I don't have to change every last os.system to a subprocess.Popen)?</p>

<p>setuplog.py (you can ignore the functions startDictLog and startFileLog because they don't work. However, startCodeLog does!):</p>

<pre><code>#!/usr/bin/python
import sys
import os
import logging
import logging.config

def startLog(name, propagate):
    '''The only point of this function was to enable me to quickly
    and easily switch how I wanted to configure the logging. So far,
    I have only been able to get the last way working
    (startCodeLog).'''
    #return startDictLog(name)
    #return startFileLog(name)
    return startCodeLog(name, propagate)

def startDictLog(name):
    '''Configure logging usinga dictionary.'''
    LOGNAME = 'loop.log'
    DEBUGNAME = 'debug.log'
    config = {
        'version': 1,
        'disable_existing_loggers': True,
        'formatters': {
            'bare': {
                # Added the BARE to distinguish between normal prints
                # and those that get rerouted. In use, I would format it
                # such that only the message is printed.
                'format': 'BARE: %(message)s'
                },
            'simple': {
                'format': '%(module)s-%(name)s: %(message)s'
                },
            'time': {
                'format': '%(asctime)s-%(filename)s-%(module)s-%(name)s: %(message)s',
                'datefmt': '%H:%M:%S'
                },
            },
        'handlers': {
            'console': {
                'level': 'NOTSET',
                'class': 'logging.StreamHandler',
                'formatter': 'bare'
                },
            'normal': {
                'level': 'INFO',
                'class': 'logging.FileHandler',
                'formatter': 'simple',
                'filename': LOGNAME
                },
            'debug': {
                'level': 'NOTSET',
                'class': 'logging.FileHandler',
                'formatter': 'time',
                'filename': DEBUGNAME
                },
            },
        'root': {
            'level': 'NOTSET',
            'handlers': ['console', 'normal', 'debug'],
            },
        }
    logging.config.dictConfig(config)
    return logging.getLogger(name)

def startFileLog(name):
    '''Configure logging using a configuration file.'''
    CONFIGFILE = 'logging.conf'
    logging.config.fileConfig(CONFIGFILE)
    return logging.getLogger(name)

def startCodeLog(name, propagate):
    '''Configure logging using this code.'''
    LOGFILE = 'loop.log'
    DEBUGFILE = 'debug.log'
    _logger = logging.getLogger(name)
    _logger.setLevel(logging.NOTSET)
    if propagate in [False, 'n', 'no', 0]:
        _logger.propagate = False
    _console = logging.StreamHandler()
    _normal = logging.FileHandler(LOGFILE)
    _debug = logging.FileHandler(DEBUGFILE)

    _bare = logging.Formatter('BARE: %(message)s')
    _simple = logging.Formatter('%(module)s-%(name)s: %(message)s')
    _time = logging.Formatter('%(asctime)s-%(module)s-%(name)s: %(message)s',
                                       datefmt = '%H:%M:%S')
    # I added _complex only here, to the working way of setting up the configuration,
    # in hopes that this data may help someone figure out how to get the printout
    # to be more useful. For example, it's not helpful that the filename is
    # setuplog.py for every print statement. It would be more beneficial to somehow
    # get the filename of where the print statement originated.
    _complex = logging.Formatter('%(filename)s-%(funcName)s-%(name)s: %(message)s')

    # Normally this is set to _bare to imitate the output of the old version of the
    # scripts I am updating, but for our purposes, _complex is more convenient.
    _console.setLevel(logging.NOTSET)
    _console.setFormatter(_complex)

    # This imitates the format of the logs from versions before I applied this update.
    _normal.setLevel(logging.INFO)
    _normal.setFormatter(_bare)

    # This is a new log file I created to help me debug other aspects of the scipts
    # I am updating.
    _debug.setLevel(logging.DEBUG)
    _debug.setFormatter(_time)

    _logger.addHandler(_console)
    _logger.addHandler(_normal)
    _logger.addHandler(_debug)
    return _logger

class Tee(object):
    '''Creates a singleton class that tees print statements to the
    handlers above.'''
    _instance = None
    def __init__(self, logger):
        self.stdout = sys.stdout
        self.logger = logger
        sys.stdout = self
        self._buf = ''
        # Part of old method in the write function.
        #self.data = ''
    def __new__(cls, *args, **kwargs):
        '''This is the singleton implementation. This avoids errors with
        multiple instances trying to access the same standard output.'''
        if not cls._instance:
            cls._instance = super(Tee, cls).__new__(cls, *args, **kwargs)
        return cls._instance
    def write(self, data):
        # This method doesn't work with how I had to implement subprocess.
        #self.data = data.rstrip('\r\n')
        #if self.data:
        #    self.logger.info(self.data)

        # Also doesn't seem to work with my subprocess implementation.
        #self.data += data
        #self.data = str(self.data)
        #if '\x0a' in self.data or '\x0d' in self.data:
        #    self.data = self.data.rstrip('\x0a\x0d')
        #    self.logger.info(self.data)
        #    self.data = ''

        # Only way I could get it working with my subprocess implementation.
        self._buf = ''.join([self._buf, data])
        while '\n' in self._buf:
            line, _, tail = self._buf.partition('\n')
            if line.strip():
                self.logger.info(line)
            self._buf = tail
</code></pre>

<p>base.py:</p>

<pre><code>#!/usr/bin/python
import sys
import os
import logging
import subprocess
# My modules below.
import setuplog
import aux2

# It is assumed that this script will be executed via the command line,
# and each time we run it, we want new log files.
LOGNAME = 'loop.log'
DEBUGNAME ='debug.log'
if os.path.exists(LOGNAME):
    os.remove(LOGNAME)
if os.path.exists(DEBUGNAME):
    os.remove(DEBUGNAME)

# It seems more convenient to store the logging configuration elsewhere,
# hence my module setuplog.
logger = setuplog.startLog('', True)
logger = setuplog.startLog('base', False)
# This initializes sys.stdout being redirected through logging. Can anyone
# explain how calling this class achieves this? I am a bit fuzzy on my
# understanding here.
setuplog.Tee(logger)

# Test to see how it works in this module.
print '1 base'
logger.info('2 base')
print '3 base'

# Below shows how to get logging to work with scripts that can
# not be modified. In my case, I have C code that I don't want to modify,
# but I still need to log it's output.

# I will have to go through the old code and change all os.system calls
# to instead utilize subprocess. Too bad because this will take some time
# and be ""busy work"", but at least it works. What can ya do, os.system is
# depreciated anyway. The positive side is that only the root application
# needs to change its system calls to use subprocess. The scipts that it
# calls upon can remain untouched.

aux1_py_path = '""%s""' % os.path.join(os.path.dirname(__file__), 'aux1.py')
#os.system(aux1_py_path) # Example to show how os.system doesn't work.
print 'aux1_py_path:', aux1_py_path
sys_call = subprocess.Popen(aux1_py_path, shell=True, stdout=subprocess.PIPE,
                            stderr=subprocess.PIPE)
sys_stdout, sys_stderr = sys_call.communicate()
print sys_stdout
print sys_stderr

# This is to ensure that the order of the logging events is correct. With an
# old method I used (not with logging, simply redirecting stdout into an
# opened file), the order would often get messed up.
logger.info('4 base')
# This example is to show how to get logging to work with Python scripts I am
# willing to modify, at least partially. See aux2.py. It is simply a print
# statement, followed by a logging statement, followed by another print
# statement. They all output properly with this method.
aux2.aux2Function()
# Again to ensure the order of events is correct.
logger.info('5 base')
</code></pre>

<p>aux1.py:</p>

<pre><code>#!/usr/bin/python
import logging
import subprocess
import os

def main():
    '''We expect the print statements to go through, as they are
    being sent to logging. However, these logging statements
    do nothing as no logger has been instantiated. This is the
    behavior we should expect, as this script mimics a script
    that we would not modify, so it would not have logging calls
    anyway.'''
    print '1 aux1'
    logging.info('2 aux1')
    print '3 aux1'
    logging.info('4 aux1')

    # Here, neither option works unless the root of all these calls
    # was made with subprocess and in the script that called the
    # tee class. If both conditions are met, subprocess works as it
    # should. However, os.system returns the print out from the call
    # out of order.

    aux3_py_path = '""%s""' % os.path.join(os.path.dirname(__file__), 'aux3.py')
    #os.system(aux3_py_path)
    sys_call = subprocess.Popen(aux3_py_path, shell=True,
                                stdout=subprocess.PIPE,
                                stderr=subprocess.PIPE)
    sys_stdout, sys_stderr = sys_call.communicate()
    print sys_stdout
    print sys_stderr

if __name__ == '__main__':
    main()
</code></pre>

<p>aux2.py:</p>

<pre><code>#!/usr/bin/python
import sys
import os
import logging
import setuplog

def aux2Function():
    # The following two lines are not necessary for most functionality.
    # However, if the following two lines are uncommented, then %(name)s
    # in the format descriptor of logging will correctly be 'aux2' rather
    # than base. Both lines are required for this to work.
    logger = setuplog.startLog('aux2', False)
    setuplog.Tee(logger)

    print '1 aux2'
    logging.info('2 aux2')
    print '3 aux2'
</code></pre>

<p>aux3.py:</p>

<pre><code>#!/usr/bin/python
import logging

def main():
    '''See __doc__ for aux1.py. Again, we don't expect the logging.info
    to work, but that's okay because theoretically, this is some script
    we can't modify that simply generates output with print or print
    like functions.'''
    print '1 aux3'
    logging.info('2 aux3')
    print '3 aux3'

if __name__ == '__main__':
    main()
</code></pre>

<p>logging.conf (doesn't work):</p>

<pre><code>[loggers]
keys=root

[handlers]
keys=console,normal,debug

[formatters]
keys=bare,simple,time

[logger_root]
level=NOTSET
handlers=console,normal,debug

[handler_console]
level=NOTSET
class=StreamHandler
formatter=bare
args=(sys.stdout,)

[handler_normal]
level=INFO
class=FileHandler
formatter=simple
args=('loop.log',)

[handler_debug]
level=DEBUG
class=FileHandler
formatter=time
args=('debug.log',)

[formatter_bare]
format=%(message)s

[formatter_simple]
format=%(module)s-%(name)s: %(message)s

[formatter_time]
format=%(asctime)s-%(filename)s-%(module)s-%(name)s: %(message)s
datefmt=%H:%M:%S
</code></pre>",python|logging|module|system-calls|tee,"<p>Here's at least a partial answer to your first question. You're getting those blank lines on each<code>print</code>because<code>print</code>statements in Python 2.x potentially call<code>stdout.write()</code><em>twice</em>, once with the data from evaluating the expression in the statement, and then again if the optional newline hasn't been suppressed by a trailing comma. </p>

<p>Also, if an<code>INFO</code> level message is sent to a logger set at a<code>level</code>of<code>'NOTSET'</code>, the message will also be echoed on <code>sys.stderr</code>by default according to the logger documentation -- which is why you see the console output even when the <code>Tee</code> is in effect. There are no duplicate log entries that I can see.</p>

<p>To prevent the blanks lines, try using this<code>Tee</code>class definition. Note the<code>write()</code>method modifications (updated to be a singleton to match your ""EDIT SECTION (3)""):</p>

<pre><code>class Tee(object):
    _instance = None
    def __init__(self, logger):
        self.stdout = sys.stdout
        self.logger = logger
        sys.stdout = self
    def __new__(cls, *args, **kwargs):
        if not cls._instance:
            cls._instance = super(Tee, cls).__new__(cls, *args, **kwargs)
        return cls._instance
    def __del__(self):
        sys.stdout = self.stdout
    def write(self, data):
        data = data.rstrip('\r\n')
        if data: # anything left?
           self.logger.info(data)
</code></pre>

<p>With this and all your other updates in place it seems to work for me (including with the uncommented <code>aux2</code> stuff. Are there some remaining problems from your point of view? If so, your initially long question has gotten even more so and should be completely cleaned-up leaving just the most recent code and focus on any remaining issue(s).</p>",3
32450435,How to copy a file in python,"<p>I am having a file named as <code>new11</code> and <code>new12</code> and the path is <code>source=\Users\user.CLPSTPDFC46\Desktop\new11</code> and <code>dest=\Users\user.CLPSTPDFC46\Desktop\new12</code></p>

<p>Now I need to copy the content from <code>new11</code> to <code>new12</code>. how can I approach this ?</p>",python|python-3.x,"<p>Have a look at <a href=""https://docs.python.org/2/library/shutil.html#shutil.copy"" rel=""nofollow"">shutil.copy</a> it allows you to copy files.</p>",2
22394552,how to keep the variable value temporary in memory and compare ... in python,"<p>Folks, I'm positive that I broke the logic by wrong indentation but now
I can't fix it.
Could you please help me?<br>
    #
    # analyzeNano.py - analyze XYZ file for 'sanity'
    #
    #</p>

<pre><code>import csv
import sys
import os
import getopt

def main():
    '''
analyzeNano.py -d input-directory

analyzeNano.py analyzes a list of XYZ files inside input-directory. It counts for the number of consequitive DNA samples with identical ID and if it between 96 and 110 it treats it as 'good', otherwise 'bad'.
    input-directory    an input directory where XYZ files are located
    -d    flag for input-directory
At the end it creates 2 files: goodNano.csv and badNano.csv
Note: files that are not in goodNano.csv and badNano.csv have no DNA ID and therefore not listed
'''
    try:
        opts, args = getopt.getopt(sys.argv[1:],'d:')
    except getopt.GetoptError, err:
        print str(err)
        help(main)
        sys.exit(2)

    if len(opts) != 1:
        help(main)
        sys.exit(2)

    if not os.path.isdir( sys.argv[2] ):
        print ""Error, "", sys.argv[2], "" is not a valid directory""
        help(main)
        sys.exit(2)


    prefix = 'dna'
    goodFiles = []
    badFiles = []

    fileList = os.listdir(sys.argv[2])
    for f in fileList:
        absFile = os.path.join(os.path.abspath(sys.argv[2]), f )
        with open(absFile, 'rb') as csvfile:
            # use csv to separate the fields, making it easier to deal with the
            # first value without hard-coding its size
            reader = csv.reader(csvfile, delimiter='\t')
            match = None
            count = 0

            for row in reader:
                # matching rows
                if row[0].lower().startswith(prefix):

                    if match is None:
                        # first line with prefix..
                        match = row[0]

                    if row[0] == match:
                        # found a match, so increment
                        count += 1

                    if row[0] != match:
                        # row prefix has changed
                        if 96 &lt;= count &lt; 110:
                            # counted enough, so start counting the next
                            match = row[0] # match on this now
                            count = 0 # reset the count
                            goodFiles.append(csvfile.name)
                        else:
                            # didn't count enough, so stop working through this file
                            badFiles.append(csvfile.name)
                            break

                # non-matching rows
                else:
                    if match is None:
                        # ignore preceding lines in file
                        continue
                    else:
                        # found non-matching line when expecting a match
                        break
    else:
        if not 96 &lt;= count &lt; 110:
                    #there was at least successful run of lines
            goodFiles.remove(csvfile.name)

    # Create output files
    createFile(goodFiles, 'goodNano')
    createFile(badFiles, 'badNano')

def createFile(files, fName):
    fileName = open( fName + "".csv"", ""w"" )
    for f in files:
        fileName.write( os.path.basename(f) )
        fileName.write(""\n"")


if __name__ == '__main__':
    main()
</code></pre>

<p>Could someone just browse and point me where I broke it?</p>",python|regex,"<p>All variables are held in memory. You want to hold onto the most recent match and compare it, counting while it matches:</p>

<pre><code>import csv

prefix = 'DNA'

with open('file.txt','rb') as csvfile:
    # use csv to separate the fields, making it easier to deal with the
    # first value without hard-coding its size
    reader = csv.reader(csvfile, delimiter='\t')
    match = None
    count = 0
    is_good = False
    for row in reader:
        # matching rows
        if row[0].startswith(prefix):

            if match is None:
                # first line with prefix..
                match = row[0]

            if row[0] == match:
                # found a match, so increment
                count += 1

            if row[0] != match:
                # row prefix has changed
                if 96 &lt;= count &lt; 100:
                    # counted enough, so start counting the next
                    match = row[0] # match on this now
                    count = 0 # reset the count
                else:
                    # didn't count enough, so stop working through this file
                    break

        # non-matching rows
        else:
            if match is None:
                # ignore preceding lines in file
                continue
            else:
                # found non-matching line when expecting a match
                break
    else:
        if 96 &lt;= count &lt; 100:
            # there was at least successful run of lines
            is_good = True

if is_good:
    print 'File was good'
else:
    print 'File was bad'
</code></pre>",0
22394552,how to keep the variable value temporary in memory and compare ... in python,"<p>Folks, I'm positive that I broke the logic by wrong indentation but now
I can't fix it.
Could you please help me?<br>
    #
    # analyzeNano.py - analyze XYZ file for 'sanity'
    #
    #</p>

<pre><code>import csv
import sys
import os
import getopt

def main():
    '''
analyzeNano.py -d input-directory

analyzeNano.py analyzes a list of XYZ files inside input-directory. It counts for the number of consequitive DNA samples with identical ID and if it between 96 and 110 it treats it as 'good', otherwise 'bad'.
    input-directory    an input directory where XYZ files are located
    -d    flag for input-directory
At the end it creates 2 files: goodNano.csv and badNano.csv
Note: files that are not in goodNano.csv and badNano.csv have no DNA ID and therefore not listed
'''
    try:
        opts, args = getopt.getopt(sys.argv[1:],'d:')
    except getopt.GetoptError, err:
        print str(err)
        help(main)
        sys.exit(2)

    if len(opts) != 1:
        help(main)
        sys.exit(2)

    if not os.path.isdir( sys.argv[2] ):
        print ""Error, "", sys.argv[2], "" is not a valid directory""
        help(main)
        sys.exit(2)


    prefix = 'dna'
    goodFiles = []
    badFiles = []

    fileList = os.listdir(sys.argv[2])
    for f in fileList:
        absFile = os.path.join(os.path.abspath(sys.argv[2]), f )
        with open(absFile, 'rb') as csvfile:
            # use csv to separate the fields, making it easier to deal with the
            # first value without hard-coding its size
            reader = csv.reader(csvfile, delimiter='\t')
            match = None
            count = 0

            for row in reader:
                # matching rows
                if row[0].lower().startswith(prefix):

                    if match is None:
                        # first line with prefix..
                        match = row[0]

                    if row[0] == match:
                        # found a match, so increment
                        count += 1

                    if row[0] != match:
                        # row prefix has changed
                        if 96 &lt;= count &lt; 110:
                            # counted enough, so start counting the next
                            match = row[0] # match on this now
                            count = 0 # reset the count
                            goodFiles.append(csvfile.name)
                        else:
                            # didn't count enough, so stop working through this file
                            badFiles.append(csvfile.name)
                            break

                # non-matching rows
                else:
                    if match is None:
                        # ignore preceding lines in file
                        continue
                    else:
                        # found non-matching line when expecting a match
                        break
    else:
        if not 96 &lt;= count &lt; 110:
                    #there was at least successful run of lines
            goodFiles.remove(csvfile.name)

    # Create output files
    createFile(goodFiles, 'goodNano')
    createFile(badFiles, 'badNano')

def createFile(files, fName):
    fileName = open( fName + "".csv"", ""w"" )
    for f in files:
        fileName.write( os.path.basename(f) )
        fileName.write(""\n"")


if __name__ == '__main__':
    main()
</code></pre>

<p>Could someone just browse and point me where I broke it?</p>",python|regex,"<p>Please ignore my last request to review the code. I reviewed it myself and realized that the problem was with formatting.
It looks that now it works as expected and analyze all files in the directory. Thanks again to Metthew. That help was tremendous. I still have some concern about accuracy of calculation because in a few cases it failed while it should not ... but I'll investigate it.
Overall ... thanks a lot to everyone for tremendous help.</p>",0
22394552,how to keep the variable value temporary in memory and compare ... in python,"<p>Folks, I'm positive that I broke the logic by wrong indentation but now
I can't fix it.
Could you please help me?<br>
    #
    # analyzeNano.py - analyze XYZ file for 'sanity'
    #
    #</p>

<pre><code>import csv
import sys
import os
import getopt

def main():
    '''
analyzeNano.py -d input-directory

analyzeNano.py analyzes a list of XYZ files inside input-directory. It counts for the number of consequitive DNA samples with identical ID and if it between 96 and 110 it treats it as 'good', otherwise 'bad'.
    input-directory    an input directory where XYZ files are located
    -d    flag for input-directory
At the end it creates 2 files: goodNano.csv and badNano.csv
Note: files that are not in goodNano.csv and badNano.csv have no DNA ID and therefore not listed
'''
    try:
        opts, args = getopt.getopt(sys.argv[1:],'d:')
    except getopt.GetoptError, err:
        print str(err)
        help(main)
        sys.exit(2)

    if len(opts) != 1:
        help(main)
        sys.exit(2)

    if not os.path.isdir( sys.argv[2] ):
        print ""Error, "", sys.argv[2], "" is not a valid directory""
        help(main)
        sys.exit(2)


    prefix = 'dna'
    goodFiles = []
    badFiles = []

    fileList = os.listdir(sys.argv[2])
    for f in fileList:
        absFile = os.path.join(os.path.abspath(sys.argv[2]), f )
        with open(absFile, 'rb') as csvfile:
            # use csv to separate the fields, making it easier to deal with the
            # first value without hard-coding its size
            reader = csv.reader(csvfile, delimiter='\t')
            match = None
            count = 0

            for row in reader:
                # matching rows
                if row[0].lower().startswith(prefix):

                    if match is None:
                        # first line with prefix..
                        match = row[0]

                    if row[0] == match:
                        # found a match, so increment
                        count += 1

                    if row[0] != match:
                        # row prefix has changed
                        if 96 &lt;= count &lt; 110:
                            # counted enough, so start counting the next
                            match = row[0] # match on this now
                            count = 0 # reset the count
                            goodFiles.append(csvfile.name)
                        else:
                            # didn't count enough, so stop working through this file
                            badFiles.append(csvfile.name)
                            break

                # non-matching rows
                else:
                    if match is None:
                        # ignore preceding lines in file
                        continue
                    else:
                        # found non-matching line when expecting a match
                        break
    else:
        if not 96 &lt;= count &lt; 110:
                    #there was at least successful run of lines
            goodFiles.remove(csvfile.name)

    # Create output files
    createFile(goodFiles, 'goodNano')
    createFile(badFiles, 'badNano')

def createFile(files, fName):
    fileName = open( fName + "".csv"", ""w"" )
    for f in files:
        fileName.write( os.path.basename(f) )
        fileName.write(""\n"")


if __name__ == '__main__':
    main()
</code></pre>

<p>Could someone just browse and point me where I broke it?</p>",python|regex,"<p>From your description, the lines you're interested in match the regular expression:</p>

<pre><code>^DNA[0-9]{10}
</code></pre>

<p>That is, I assume that your <em>xyz</em> is actually ten <em>digits</em>.</p>

<p>The strategy here is to match the 13-character string. If there's no match, and we haven't previously matched, we keep going without further ado. Once we match, we
save the string, and increment a counter. As long as we keep matching the regex and the saved string, we keep incrementing. Once we hit a different regex match, or no match at all, the sequence of identical matches is over. If it's valid, we reset the count to
zero and the last match to empty. If it's invalid, we exit.</p>

<p>I hasten to add that <strong>the following is untested</strong>.</p>

<pre><code># Input file with DNA lines to match:
infile = ""z:/file.txt""

# This is the regex for the lines of interest:
regex = re.compile('^DNA[0-9]{10}')

# This will keep count of the number of matches in sequence:
n_seq = 0

# This is the previous match (if any):
lastmatch = ''

# Subroutine to check given sequence count and bail if bad:
def bail_on_bad_sequence(count, match):
    if 96 &lt;= count &lt; 100:
        return
    sys.stderr.write(""Bad count (%d) for '%s'\n"" % (count,match))
    sys.exit(1)


with open(infile) as file:
    for line in file:
        # Try to match the line to the regex:
        match = re.match(line)

        if match:
            if match.group(0) == lastmatch:
                n_seq += 1
            else:
                bail_on_bad_sequence(lastmatch, n_seq)
                n_seq = 0
                lastmatch = match.group(0)
        else:
            if n_seq != 0:
                bail_on_bad_sequence(lastmatch, n_seq)
                n_seq = 0
                lastmatch = ''
</code></pre>",0
22394552,how to keep the variable value temporary in memory and compare ... in python,"<p>Folks, I'm positive that I broke the logic by wrong indentation but now
I can't fix it.
Could you please help me?<br>
    #
    # analyzeNano.py - analyze XYZ file for 'sanity'
    #
    #</p>

<pre><code>import csv
import sys
import os
import getopt

def main():
    '''
analyzeNano.py -d input-directory

analyzeNano.py analyzes a list of XYZ files inside input-directory. It counts for the number of consequitive DNA samples with identical ID and if it between 96 and 110 it treats it as 'good', otherwise 'bad'.
    input-directory    an input directory where XYZ files are located
    -d    flag for input-directory
At the end it creates 2 files: goodNano.csv and badNano.csv
Note: files that are not in goodNano.csv and badNano.csv have no DNA ID and therefore not listed
'''
    try:
        opts, args = getopt.getopt(sys.argv[1:],'d:')
    except getopt.GetoptError, err:
        print str(err)
        help(main)
        sys.exit(2)

    if len(opts) != 1:
        help(main)
        sys.exit(2)

    if not os.path.isdir( sys.argv[2] ):
        print ""Error, "", sys.argv[2], "" is not a valid directory""
        help(main)
        sys.exit(2)


    prefix = 'dna'
    goodFiles = []
    badFiles = []

    fileList = os.listdir(sys.argv[2])
    for f in fileList:
        absFile = os.path.join(os.path.abspath(sys.argv[2]), f )
        with open(absFile, 'rb') as csvfile:
            # use csv to separate the fields, making it easier to deal with the
            # first value without hard-coding its size
            reader = csv.reader(csvfile, delimiter='\t')
            match = None
            count = 0

            for row in reader:
                # matching rows
                if row[0].lower().startswith(prefix):

                    if match is None:
                        # first line with prefix..
                        match = row[0]

                    if row[0] == match:
                        # found a match, so increment
                        count += 1

                    if row[0] != match:
                        # row prefix has changed
                        if 96 &lt;= count &lt; 110:
                            # counted enough, so start counting the next
                            match = row[0] # match on this now
                            count = 0 # reset the count
                            goodFiles.append(csvfile.name)
                        else:
                            # didn't count enough, so stop working through this file
                            badFiles.append(csvfile.name)
                            break

                # non-matching rows
                else:
                    if match is None:
                        # ignore preceding lines in file
                        continue
                    else:
                        # found non-matching line when expecting a match
                        break
    else:
        if not 96 &lt;= count &lt; 110:
                    #there was at least successful run of lines
            goodFiles.remove(csvfile.name)

    # Create output files
    createFile(goodFiles, 'goodNano')
    createFile(badFiles, 'badNano')

def createFile(files, fName):
    fileName = open( fName + "".csv"", ""w"" )
    for f in files:
        fileName.write( os.path.basename(f) )
        fileName.write(""\n"")


if __name__ == '__main__':
    main()
</code></pre>

<p>Could someone just browse and point me where I broke it?</p>",python|regex,"<p>Here's how I would rework your style:</p>

<pre><code>with open(""z:/file.txt"", ""rU"") as file: # U flag means Universal Newline Mode, 
                                        # if error, try switching back to b
    print(file.name)        
    counter = 0
    for line in file: # iterate over a file object itself line by line
        if line.lower().startswith('dna'): # look for your desired condition
            # process the data
            counter += 1
</code></pre>",0
22407798,How to reset a DataFrame's indexes for all groups in one step?,"<p>I've tried to split my dataframe to groups</p>

<pre><code>df = pd.DataFrame({'A' : ['foo', 'bar', 'foo', 'bar',
                       'foo', 'bar', 'foo', 'foo'],
                   'B' : ['1', '2', '3', '4',
                       '5', '6', '7', '8'],
                   })

grouped = df.groupby('A')
</code></pre>

<p>I get 2 groups</p>

<pre><code>     A  B
0  foo  1
2  foo  3
4  foo  5
6  foo  7
7  foo  8

     A  B
1  bar  2
3  bar  4
5  bar  6
</code></pre>

<p>Now I want to reset indexes for each group separately</p>

<pre><code>print grouped.get_group('foo').reset_index()
print grouped.get_group('bar').reset_index()
</code></pre>

<p>Finally I get the result</p>

<pre><code>     A  B
0  foo  1
1  foo  3
2  foo  5
3  foo  7
4  foo  8

     A  B
0  bar  2
1  bar  4
2  bar  6
</code></pre>

<p>Is there better way how to do this? (For example: automatically call some method for each group)</p>",python|group-by|pandas,"<pre><code>df = pd.DataFrame({'A' : ['foo', 'bar', 'foo', 'bar',
                       'foo', 'bar', 'foo', 'foo'],
                   'B' : ['1', '2', '3', '4',
                       '5', '6', '7', '8'],
                   })
grouped = df.groupby('A',as_index = False)
</code></pre>

<p>we get two groups</p>

<pre><code>grouped_index = grouped.apply(lambda x: x.reset_index(drop = True)).reset_index()
</code></pre>

<p>Result in two new columns level_0 and level_1 getting added and the index is reset</p>

<pre><code>
 level_0level_1 A   B
0   0     0    bar  2
1   0     1    bar  4
2   0     2    bar  6
3   1     0    foo  1
4   1     1    foo  3
5   1     2    foo  5
6   1     3    foo  7
7   1     4    foo  8
</code></pre>

<pre><code>result = grouped_index.drop('level_0',axis = 1).set_index('level_1')
</code></pre>

<p>Creates an index within each group of ""A""</p>

<pre><code>          A     B
level_1     
0        bar    2
1        bar    4
2        bar    6
0        foo    1
1        foo    3
2        foo    5
3        foo    7
4        foo    8
</code></pre>",0
22407798,How to reset a DataFrame's indexes for all groups in one step?,"<p>I've tried to split my dataframe to groups</p>

<pre><code>df = pd.DataFrame({'A' : ['foo', 'bar', 'foo', 'bar',
                       'foo', 'bar', 'foo', 'foo'],
                   'B' : ['1', '2', '3', '4',
                       '5', '6', '7', '8'],
                   })

grouped = df.groupby('A')
</code></pre>

<p>I get 2 groups</p>

<pre><code>     A  B
0  foo  1
2  foo  3
4  foo  5
6  foo  7
7  foo  8

     A  B
1  bar  2
3  bar  4
5  bar  6
</code></pre>

<p>Now I want to reset indexes for each group separately</p>

<pre><code>print grouped.get_group('foo').reset_index()
print grouped.get_group('bar').reset_index()
</code></pre>

<p>Finally I get the result</p>

<pre><code>     A  B
0  foo  1
1  foo  3
2  foo  5
3  foo  7
4  foo  8

     A  B
0  bar  2
1  bar  4
2  bar  6
</code></pre>

<p>Is there better way how to do this? (For example: automatically call some method for each group)</p>",python|group-by|pandas,"<p>Pass in <code>as_index=False</code> to the groupby, then you don't need to <code>reset_index</code> to make the groupby-d columns columns again:</p>

<pre><code>In [11]: grouped = df.groupby('A', as_index=False)

In [12]: grouped.get_group('foo')
Out[12]:
     A  B
0  foo  1
2  foo  3
4  foo  5
6  foo  7
7  foo  8
</code></pre>

<p>Note: As pointed out (and seen in the above example) the index above is <em>not</em> <code>[0, 1, 2, ...]</code>, I claim that this will never matter in practice - if it does you're going to have to just through some strange hoops - it's going to be more verbose, less readable and less efficient...</p>",18
22407798,How to reset a DataFrame's indexes for all groups in one step?,"<p>I've tried to split my dataframe to groups</p>

<pre><code>df = pd.DataFrame({'A' : ['foo', 'bar', 'foo', 'bar',
                       'foo', 'bar', 'foo', 'foo'],
                   'B' : ['1', '2', '3', '4',
                       '5', '6', '7', '8'],
                   })

grouped = df.groupby('A')
</code></pre>

<p>I get 2 groups</p>

<pre><code>     A  B
0  foo  1
2  foo  3
4  foo  5
6  foo  7
7  foo  8

     A  B
1  bar  2
3  bar  4
5  bar  6
</code></pre>

<p>Now I want to reset indexes for each group separately</p>

<pre><code>print grouped.get_group('foo').reset_index()
print grouped.get_group('bar').reset_index()
</code></pre>

<p>Finally I get the result</p>

<pre><code>     A  B
0  foo  1
1  foo  3
2  foo  5
3  foo  7
4  foo  8

     A  B
0  bar  2
1  bar  4
2  bar  6
</code></pre>

<p>Is there better way how to do this? (For example: automatically call some method for each group)</p>",python|group-by|pandas,<p>Isn't this just <code>grouped = grouped.apply(lambda x: x.reset_index())</code> ?</p>,0
22407798,How to reset a DataFrame's indexes for all groups in one step?,"<p>I've tried to split my dataframe to groups</p>

<pre><code>df = pd.DataFrame({'A' : ['foo', 'bar', 'foo', 'bar',
                       'foo', 'bar', 'foo', 'foo'],
                   'B' : ['1', '2', '3', '4',
                       '5', '6', '7', '8'],
                   })

grouped = df.groupby('A')
</code></pre>

<p>I get 2 groups</p>

<pre><code>     A  B
0  foo  1
2  foo  3
4  foo  5
6  foo  7
7  foo  8

     A  B
1  bar  2
3  bar  4
5  bar  6
</code></pre>

<p>Now I want to reset indexes for each group separately</p>

<pre><code>print grouped.get_group('foo').reset_index()
print grouped.get_group('bar').reset_index()
</code></pre>

<p>Finally I get the result</p>

<pre><code>     A  B
0  foo  1
1  foo  3
2  foo  5
3  foo  7
4  foo  8

     A  B
0  bar  2
1  bar  4
2  bar  6
</code></pre>

<p>Is there better way how to do this? (For example: automatically call some method for each group)</p>",python|group-by|pandas,"<p>Something like this would work:</p>

<pre><code>for group, index in grouped.indices.iteritems():
    grouped.indices[group] = range(0, len(index))
</code></pre>

<p>You could probably make it less verbose if you wanted to.</p>",0
22407798,How to reset a DataFrame's indexes for all groups in one step?,"<p>I've tried to split my dataframe to groups</p>

<pre><code>df = pd.DataFrame({'A' : ['foo', 'bar', 'foo', 'bar',
                       'foo', 'bar', 'foo', 'foo'],
                   'B' : ['1', '2', '3', '4',
                       '5', '6', '7', '8'],
                   })

grouped = df.groupby('A')
</code></pre>

<p>I get 2 groups</p>

<pre><code>     A  B
0  foo  1
2  foo  3
4  foo  5
6  foo  7
7  foo  8

     A  B
1  bar  2
3  bar  4
5  bar  6
</code></pre>

<p>Now I want to reset indexes for each group separately</p>

<pre><code>print grouped.get_group('foo').reset_index()
print grouped.get_group('bar').reset_index()
</code></pre>

<p>Finally I get the result</p>

<pre><code>     A  B
0  foo  1
1  foo  3
2  foo  5
3  foo  7
4  foo  8

     A  B
0  bar  2
1  bar  4
2  bar  6
</code></pre>

<p>Is there better way how to do this? (For example: automatically call some method for each group)</p>",python|group-by|pandas,"<pre><code>df=df.groupby('A').apply(lambda x: x.reset_index(drop=True)).drop('A',axis=1).reset_index()
</code></pre>",2
22573193,Swapping first and last names removing commas,"<p>Using python 3.3:</p>

<p>I need some help in writing the body for this function that swaps the positions of the last name and first name.</p>

<p>Essentially, I have to write a body to swap the first name from a string to the last name's positions.</p>

<p>The initial order is first name followed by last name (separated by a comma). Example: 'Albus Percival Wulfric Brian, Dumbledore'</p>

<p>The result I want is: 'Dumbledore Albus Percival Wulfric Brian'</p>

<p>My approach was:
name = 'Albus Percival Wulfric Brian, Dumbledore
name = name[name.find(',')+2:]+"", ""+name[:name.find(',')] </p>

<p>the answer I get is: 'Dumbledore, Albus Percival Wulfric Brian' (This isn't what I want)
There should be no commas in between.</p>

<p>I'm a new user to Python, so please don't go into too complex ways of solving this.
Thanks kindly for any help!</p>",python|swap,"<p>You're adding the comma in yourself:</p>

<pre><code>name = name[name.find(',')+2:] + "", "" + name[:name.find(',')]
</code></pre>

<p>Make it:</p>

<pre><code>name = name[name.find(',')+2:] + name[:name.find(',')]
</code></pre>",0
22573193,Swapping first and last names removing commas,"<p>Using python 3.3:</p>

<p>I need some help in writing the body for this function that swaps the positions of the last name and first name.</p>

<p>Essentially, I have to write a body to swap the first name from a string to the last name's positions.</p>

<p>The initial order is first name followed by last name (separated by a comma). Example: 'Albus Percival Wulfric Brian, Dumbledore'</p>

<p>The result I want is: 'Dumbledore Albus Percival Wulfric Brian'</p>

<p>My approach was:
name = 'Albus Percival Wulfric Brian, Dumbledore
name = name[name.find(',')+2:]+"", ""+name[:name.find(',')] </p>

<p>the answer I get is: 'Dumbledore, Albus Percival Wulfric Brian' (This isn't what I want)
There should be no commas in between.</p>

<p>I'm a new user to Python, so please don't go into too complex ways of solving this.
Thanks kindly for any help!</p>",python|swap,"<ol>
<li>You can split a string on commas into a list of strings using syntax like <code>astring.split(',')</code></li>
<li>You can join a list of strings into a single string on whitespace like <code>' '.join(alist)</code>.</li>
<li>You can reverse a list using list slice notation: <code>alist[::-1]</code></li>
<li>You can strip surrounding white space from a string using <code>astring.strip()</code></li>
</ol>

<p>Thus:</p>

<pre><code>' '.join(aname.split(',')[::-1]).strip()
</code></pre>",3
35595012,Trouble converting to utf-8,"<p>I have the following list of strings:</p>

<blockquote>
  <p>['\xe8\xbf\x99\xe6\x98\xaf\xe4\xb8\x80\xe4\xb8\xaa\xe4\xbb\xa4\xe4\xba\xba\xe6\xb2\xae\xe4\xb8\xa7\xe7\x9a\x84\xe6\x97\xa5\x82','\xe6\x9c\x89\xe4\xb8\xaa\xe5\xb9\xb4\xe5\xb9\xbc\xe7\x9a\x84\xe5\x9f\xe5\x9c\xa8\xe7\x82\x8e\xe7\x82\x8e\xe7\x83\x88\xe6\x97\xa5\xb8\x8b\xe6\x99\x95\xe5\x80\x92\xe4\xba\x86\xe3\x80\x82','\xe8\x90\xbd\xe6\x97\xa5\x8a\x8a\xe5\xa4\xa9\xe7\xa9\xba\xe6\x9f\x93\xe6\x88\x90\xe9\x87\x91\xe8\x89\xb2\xe3\x80\xe6\x97\xa5\x8a\x8a\xe5\xa4\xa9\xe7\xa9\xba\xe6\x9f\x93\xe6\x88\x90\xe9\x87\x91\xe8\x89\xb2\xe3\x80\x82','\xe6\x98\x9f\xe6\x9c\x9f\xe6\x97\xa5\x98\xaf\xe4\xb8\x80\xe5\x91\xa8\xe7\x9a\x84\xe7\xac\xac\xe4\xb8\x80\xe5\xa4\xa9\xe3\x80\xe6\x9c\x9f\xe6\x97\xa5\x98\xaf\xe4\xb8\x80\xe5\x91\xa8\xe7\x9a\x84\xe7\xac\xac\xe4\xb8\x80\xe5\xa4\xa9\xe3\x80\x82','\xe5\x8d\x81\xe6\x9c\x88\xe4\xb8\x80\xe6\x97\xa5\x98\xaf\xe4\xb8\xe7\x9a\x84\xe5\x9b\xbd\xe5\xba\x86\xe8\x8a\x82\xe3\x80\x82','\xe5\x9c\xa8\xe6\x97\xa5\x9c\xac\xef\xbc\x8c\xe6\xa3\x92\xe7\x90\x83\xe6\xaf\x94\xe5\x85\xb6\xe4\xbb\x96\xe4\xbb\xbb\xe4\xbd\x95\xe8\xbf\x90\xe5\x8a\xa8\xe9\x83\xbd\xe5\x8f\x97\xe4\xba\xba\xe6\xac\xa2\xe8\xbf\x8e\xe3\x80\xe6\x97\xa5\x9c\xac\xef\xbc\x8c\xe6\xa3\x92\xe7\x90\x83\xe6\xaf\x94\xe5\x85\xb6\xe4\xbb\x96\xe4\xbb\xbb\xe4\xbd\x95\xe8\xbf\x90\xe5\x8a\xa8\xe9\x83\xbd\xe5\x8f\x97\xe4\xba\xba\xe6\xac\xa2\xe8\xbf\x8e\xe3\x80\x82','\xe8\xbf\x99\xe6\x98\xaf\xe6\xaf\x8f\xe5\xae\x89\xe6\x81\xaf\xe6\x97\xa5\xbc\x8c\xe9\x99\xa4\xe6\x97\xa5\xe5\xb8\xb8\xe7\x9a\x84\xe5\x85\xa8\xe7\x87\x94\xe7\xa5\xe5\xa5\xa0\xe7\xa5\xad\xe5\xa4\x96\xef\xbc\x8c\xe5\xba\x94\xe7\x8c\xae\xe7\x9a\x84\xe5\xae\x89\xe6\x81\xaf\xe6\x97\xa5\xe5\x85\xa8\xe7\x87\x94\xe7\xa5\xad\xe3\x80\x82','\xe6\x9c\x89\xe6\x97\xb6\xe5\x80\x99\xef\xbc\x8c\xe5\x8f\xaa\xe6\x9c\x89\xe9\x83\xa8\xe5\x88\x86\xe6\x97\xa5\xbd\xae\xe8\xa2\xab\xe9\x81\xae\xe6\x8c\xa1\xe4\xbd\x8f\xef\xbc\x8c\xe9\x82\xa3\xe5\xb0\xb1\xe4\xb8\x8d\xe6\x98\xaf\xe6\x97\xa5\xe5\x85\xa8\xe9\xa3\x9f\xef\xbc\x8c\xe8\x80\x8c\xe6\x98\xaf\xe6\x97\xa5\xe5\x81\x8f\xe9\xa3\x9f\xe3\x80\xe6\x97\xb6\xe5\x80\x99\xef\xbc\x8c\xe5\x8f\xaa\xe6\x9c\x89\xe9\x83\xa8\xe5\x88\x86\xe6\x97\xa5\xbd\xae\xe8\xa2\xab\xe9\x81\xae\xe6\x8c\xa1\xe4\xbd\x8f\xef\xbc\x8c\xe9\x82\xa3\xe5\xb0\xb1\xe4\xb8\x8d\xe6\x98\xaf\xe6\x97\xa5\xe5\x85\xa8\xe9\xa3\x9f\xef\xbc\x8c\xe8\x80\x8c\xe6\x98\xaf\xe6\x97\xa5\xe5\x81\x8f\xe9\xa3\x9f\xe3\x80\x82','\xe4\xba\x8b\xe4\xbb\xb6\xe5\x8f\x91\xe7\x94\x9f\xe6\x97\xa5\x8f\xaf\xe6\x8c\x87\xe5\xae\x9a\xe4\xb8\xba\xe5\x91\xa8\xe5\x86\x85\xe6\x9f\x90\xe6\x97\xa5\xe6\x88\x96\xe6\x9c\x88\xe5\x86\x85\xe6\x9f\x90\xe6\x97\xa5\xe3\x80\xe4\xbb\xb6\xe5\x8f\x91\xe7\x94\x9f\xe6\x97\xa5\x8f\xaf\xe6\x8c\x87\xe5\xae\x9a\xe4\xb8\xba\xe5\x91\xa8\xe5\x86\x85\xe6\x9f\x90\xe6\x97\xa5\xe6\x88\x96\xe6\x9c\x88\xe5\x86\x85\xe6\x9f\x90\xe6\x97\xa5\xe3\x80\x82']</p>
</blockquote>

<p>The program keeps giving me this error:</p>

<blockquote>
  <p>UnicodeDecodeError: 'utf8' codec can't decode byte 0xad in position 30: invalid start byte</p>
</blockquote>

<p>I am using this piece of code to go through the list and try to convert, where <code>new_sentences</code> is the list:</p>

<pre><code>for i in range(0,len(new_sentences)):
    stuff = new_sentences[i].strip()
    stuff = unicode(stuff,""utf8"")
</code></pre>

<p>I have gone through the list, but cannot find the byte that can not be converted. I know it's very long, but any help would be appreciated. Thanks.</p>",python|utf-8,"<p>Your strings are not valid UTF-8. Here's a script that will drill down on the problem characters. I don't know if the unicode stuff that does render makes sense, but hopefully you will</p>

<pre><code>string_list = ['\xe8\xbf\x99\xe6\x98\xaf\xe4\xb8\x80\xe4\xb8\xaa\xe4\xbb\xa4\xe4\xba\xba\xe6\xb2\xae\xe4\xb8\xa7\xe7\x9a\x84\xe6\x97\xa5\x82',
'\xe6\x9c\x89\xe4\xb8\xaa\xe5\xb9\xb4\xe5\xb9\xbc\xe7\x9a\x84\xe5\x9f\xe5\x9c\xa8\xe7\x82\x8e\xe7\x82\x8e\xe7\x83\x88\xe6\x97\xa5\xb8\x8b\xe6\x99\x95\xe5\x80\x92\xe4\xba\x86\xe3\x80\x82',
'\xe8\x90\xbd\xe6\x97\xa5\x8a\x8a\xe5\xa4\xa9\xe7\xa9\xba\xe6\x9f\x93\xe6\x88\x90\xe9\x87\x91\xe8\x89\xb2\xe3\x80\xe6\x97\xa5\x8a\x8a\xe5\xa4\xa9\xe7\xa9\xba\xe6\x9f\x93\xe6\x88\x90\xe9\x87\x91\xe8\x89\xb2\xe3\x80\x82',
'\xe6\x98\x9f\xe6\x9c\x9f\xe6\x97\xa5\x98\xaf\xe4\xb8\x80\xe5\x91\xa8\xe7\x9a\x84\xe7\xac\xac\xe4\xb8\x80\xe5\xa4\xa9\xe3\x80\xe6\x9c\x9f\xe6\x97\xa5\x98\xaf\xe4\xb8\x80\xe5\x91\xa8\xe7\x9a\x84\xe7\xac\xac\xe4\xb8\x80\xe5\xa4\xa9\xe3\x80\x82',
'\xe5\x8d\x81\xe6\x9c\x88\xe4\xb8\x80\xe6\x97\xa5\x98\xaf\xe4\xb8\xe7\x9a\x84\xe5\x9b\xbd\xe5\xba\x86\xe8\x8a\x82\xe3\x80\x82',
]

for i, line in enumerate(string_list):
    print '---- line', i
    try:
        u = line.strip().decode('utf-8')
    except UnicodeDecodeError as e:
        print 'decode failed at', e.args[2], 'leaving', repr(line[e.args[2]:])
        u = line.strip().decode('utf-8', 'ignore')
    print u
</code></pre>

<p>This gives you</p>

<pre><code>---- line 0
decode failed at 30 leaving '\x82'
这是一个令人沮丧的日
---- line 1
decode failed at 15 leaving '\xe5\x9f\xe5\x9c\xa8\xe7\x82\x8e\xe7\x82\x8e\xe7\x83\x88\xe6\x97\xa5\xb8\x8b\xe6\x99\x95\xe5\x80\x92\xe4\xba\x86\xe3\x80\x82'
有个年幼的在炎炎烈日晕倒了。
---- line 2
decode failed at 6 leaving '\x8a\x8a\xe5\xa4\xa9\xe7\xa9\xba\xe6\x9f\x93\xe6\x88\x90\xe9\x87\x91\xe8\x89\xb2\xe3\x80\xe6\x97\xa5\x8a\x8a\xe5\xa4\xa9\xe7\xa9\xba\xe6\x9f\x93\xe6\x88\x90\xe9\x87\x91\xe8\x89\xb2\xe3\x80\x82'
落日天空染成金色日天空染成金色。
---- line 3
decode failed at 9 leaving '\x98\xaf\xe4\xb8\x80\xe5\x91\xa8\xe7\x9a\x84\xe7\xac\xac\xe4\xb8\x80\xe5\xa4\xa9\xe3\x80\xe6\x9c\x9f\xe6\x97\xa5\x98\xaf\xe4\xb8\x80\xe5\x91\xa8\xe7\x9a\x84\xe7\xac\xac\xe4\xb8\x80\xe5\xa4\xa9\xe3\x80\x82'
星期日一周的第一天期日一周的第一天。
---- line 4
decode failed at 12 leaving '\x98\xaf\xe4\xb8\xe7\x9a\x84\xe5\x9b\xbd\xe5\xba\x86\xe8\x8a\x82\xe3\x80\x82'
十月一日的国庆节。
</code></pre>",2
35595012,Trouble converting to utf-8,"<p>I have the following list of strings:</p>

<blockquote>
  <p>['\xe8\xbf\x99\xe6\x98\xaf\xe4\xb8\x80\xe4\xb8\xaa\xe4\xbb\xa4\xe4\xba\xba\xe6\xb2\xae\xe4\xb8\xa7\xe7\x9a\x84\xe6\x97\xa5\x82','\xe6\x9c\x89\xe4\xb8\xaa\xe5\xb9\xb4\xe5\xb9\xbc\xe7\x9a\x84\xe5\x9f\xe5\x9c\xa8\xe7\x82\x8e\xe7\x82\x8e\xe7\x83\x88\xe6\x97\xa5\xb8\x8b\xe6\x99\x95\xe5\x80\x92\xe4\xba\x86\xe3\x80\x82','\xe8\x90\xbd\xe6\x97\xa5\x8a\x8a\xe5\xa4\xa9\xe7\xa9\xba\xe6\x9f\x93\xe6\x88\x90\xe9\x87\x91\xe8\x89\xb2\xe3\x80\xe6\x97\xa5\x8a\x8a\xe5\xa4\xa9\xe7\xa9\xba\xe6\x9f\x93\xe6\x88\x90\xe9\x87\x91\xe8\x89\xb2\xe3\x80\x82','\xe6\x98\x9f\xe6\x9c\x9f\xe6\x97\xa5\x98\xaf\xe4\xb8\x80\xe5\x91\xa8\xe7\x9a\x84\xe7\xac\xac\xe4\xb8\x80\xe5\xa4\xa9\xe3\x80\xe6\x9c\x9f\xe6\x97\xa5\x98\xaf\xe4\xb8\x80\xe5\x91\xa8\xe7\x9a\x84\xe7\xac\xac\xe4\xb8\x80\xe5\xa4\xa9\xe3\x80\x82','\xe5\x8d\x81\xe6\x9c\x88\xe4\xb8\x80\xe6\x97\xa5\x98\xaf\xe4\xb8\xe7\x9a\x84\xe5\x9b\xbd\xe5\xba\x86\xe8\x8a\x82\xe3\x80\x82','\xe5\x9c\xa8\xe6\x97\xa5\x9c\xac\xef\xbc\x8c\xe6\xa3\x92\xe7\x90\x83\xe6\xaf\x94\xe5\x85\xb6\xe4\xbb\x96\xe4\xbb\xbb\xe4\xbd\x95\xe8\xbf\x90\xe5\x8a\xa8\xe9\x83\xbd\xe5\x8f\x97\xe4\xba\xba\xe6\xac\xa2\xe8\xbf\x8e\xe3\x80\xe6\x97\xa5\x9c\xac\xef\xbc\x8c\xe6\xa3\x92\xe7\x90\x83\xe6\xaf\x94\xe5\x85\xb6\xe4\xbb\x96\xe4\xbb\xbb\xe4\xbd\x95\xe8\xbf\x90\xe5\x8a\xa8\xe9\x83\xbd\xe5\x8f\x97\xe4\xba\xba\xe6\xac\xa2\xe8\xbf\x8e\xe3\x80\x82','\xe8\xbf\x99\xe6\x98\xaf\xe6\xaf\x8f\xe5\xae\x89\xe6\x81\xaf\xe6\x97\xa5\xbc\x8c\xe9\x99\xa4\xe6\x97\xa5\xe5\xb8\xb8\xe7\x9a\x84\xe5\x85\xa8\xe7\x87\x94\xe7\xa5\xe5\xa5\xa0\xe7\xa5\xad\xe5\xa4\x96\xef\xbc\x8c\xe5\xba\x94\xe7\x8c\xae\xe7\x9a\x84\xe5\xae\x89\xe6\x81\xaf\xe6\x97\xa5\xe5\x85\xa8\xe7\x87\x94\xe7\xa5\xad\xe3\x80\x82','\xe6\x9c\x89\xe6\x97\xb6\xe5\x80\x99\xef\xbc\x8c\xe5\x8f\xaa\xe6\x9c\x89\xe9\x83\xa8\xe5\x88\x86\xe6\x97\xa5\xbd\xae\xe8\xa2\xab\xe9\x81\xae\xe6\x8c\xa1\xe4\xbd\x8f\xef\xbc\x8c\xe9\x82\xa3\xe5\xb0\xb1\xe4\xb8\x8d\xe6\x98\xaf\xe6\x97\xa5\xe5\x85\xa8\xe9\xa3\x9f\xef\xbc\x8c\xe8\x80\x8c\xe6\x98\xaf\xe6\x97\xa5\xe5\x81\x8f\xe9\xa3\x9f\xe3\x80\xe6\x97\xb6\xe5\x80\x99\xef\xbc\x8c\xe5\x8f\xaa\xe6\x9c\x89\xe9\x83\xa8\xe5\x88\x86\xe6\x97\xa5\xbd\xae\xe8\xa2\xab\xe9\x81\xae\xe6\x8c\xa1\xe4\xbd\x8f\xef\xbc\x8c\xe9\x82\xa3\xe5\xb0\xb1\xe4\xb8\x8d\xe6\x98\xaf\xe6\x97\xa5\xe5\x85\xa8\xe9\xa3\x9f\xef\xbc\x8c\xe8\x80\x8c\xe6\x98\xaf\xe6\x97\xa5\xe5\x81\x8f\xe9\xa3\x9f\xe3\x80\x82','\xe4\xba\x8b\xe4\xbb\xb6\xe5\x8f\x91\xe7\x94\x9f\xe6\x97\xa5\x8f\xaf\xe6\x8c\x87\xe5\xae\x9a\xe4\xb8\xba\xe5\x91\xa8\xe5\x86\x85\xe6\x9f\x90\xe6\x97\xa5\xe6\x88\x96\xe6\x9c\x88\xe5\x86\x85\xe6\x9f\x90\xe6\x97\xa5\xe3\x80\xe4\xbb\xb6\xe5\x8f\x91\xe7\x94\x9f\xe6\x97\xa5\x8f\xaf\xe6\x8c\x87\xe5\xae\x9a\xe4\xb8\xba\xe5\x91\xa8\xe5\x86\x85\xe6\x9f\x90\xe6\x97\xa5\xe6\x88\x96\xe6\x9c\x88\xe5\x86\x85\xe6\x9f\x90\xe6\x97\xa5\xe3\x80\x82']</p>
</blockquote>

<p>The program keeps giving me this error:</p>

<blockquote>
  <p>UnicodeDecodeError: 'utf8' codec can't decode byte 0xad in position 30: invalid start byte</p>
</blockquote>

<p>I am using this piece of code to go through the list and try to convert, where <code>new_sentences</code> is the list:</p>

<pre><code>for i in range(0,len(new_sentences)):
    stuff = new_sentences[i].strip()
    stuff = unicode(stuff,""utf8"")
</code></pre>

<p>I have gone through the list, but cannot find the byte that can not be converted. I know it's very long, but any help would be appreciated. Thanks.</p>",python|utf-8,"<p>Your strings contain invalid bytes (<code>\x82</code> for example), which make the UTF-8 untranslatable. You can ignore the invalid bytes by using</p>

<pre><code>stuff = unicode(stuff, ""utf8"", errors=""ignore"")
</code></pre>

<p>but it would make more sense to fix the source of these invalid characters.</p>",6
35595012,Trouble converting to utf-8,"<p>I have the following list of strings:</p>

<blockquote>
  <p>['\xe8\xbf\x99\xe6\x98\xaf\xe4\xb8\x80\xe4\xb8\xaa\xe4\xbb\xa4\xe4\xba\xba\xe6\xb2\xae\xe4\xb8\xa7\xe7\x9a\x84\xe6\x97\xa5\x82','\xe6\x9c\x89\xe4\xb8\xaa\xe5\xb9\xb4\xe5\xb9\xbc\xe7\x9a\x84\xe5\x9f\xe5\x9c\xa8\xe7\x82\x8e\xe7\x82\x8e\xe7\x83\x88\xe6\x97\xa5\xb8\x8b\xe6\x99\x95\xe5\x80\x92\xe4\xba\x86\xe3\x80\x82','\xe8\x90\xbd\xe6\x97\xa5\x8a\x8a\xe5\xa4\xa9\xe7\xa9\xba\xe6\x9f\x93\xe6\x88\x90\xe9\x87\x91\xe8\x89\xb2\xe3\x80\xe6\x97\xa5\x8a\x8a\xe5\xa4\xa9\xe7\xa9\xba\xe6\x9f\x93\xe6\x88\x90\xe9\x87\x91\xe8\x89\xb2\xe3\x80\x82','\xe6\x98\x9f\xe6\x9c\x9f\xe6\x97\xa5\x98\xaf\xe4\xb8\x80\xe5\x91\xa8\xe7\x9a\x84\xe7\xac\xac\xe4\xb8\x80\xe5\xa4\xa9\xe3\x80\xe6\x9c\x9f\xe6\x97\xa5\x98\xaf\xe4\xb8\x80\xe5\x91\xa8\xe7\x9a\x84\xe7\xac\xac\xe4\xb8\x80\xe5\xa4\xa9\xe3\x80\x82','\xe5\x8d\x81\xe6\x9c\x88\xe4\xb8\x80\xe6\x97\xa5\x98\xaf\xe4\xb8\xe7\x9a\x84\xe5\x9b\xbd\xe5\xba\x86\xe8\x8a\x82\xe3\x80\x82','\xe5\x9c\xa8\xe6\x97\xa5\x9c\xac\xef\xbc\x8c\xe6\xa3\x92\xe7\x90\x83\xe6\xaf\x94\xe5\x85\xb6\xe4\xbb\x96\xe4\xbb\xbb\xe4\xbd\x95\xe8\xbf\x90\xe5\x8a\xa8\xe9\x83\xbd\xe5\x8f\x97\xe4\xba\xba\xe6\xac\xa2\xe8\xbf\x8e\xe3\x80\xe6\x97\xa5\x9c\xac\xef\xbc\x8c\xe6\xa3\x92\xe7\x90\x83\xe6\xaf\x94\xe5\x85\xb6\xe4\xbb\x96\xe4\xbb\xbb\xe4\xbd\x95\xe8\xbf\x90\xe5\x8a\xa8\xe9\x83\xbd\xe5\x8f\x97\xe4\xba\xba\xe6\xac\xa2\xe8\xbf\x8e\xe3\x80\x82','\xe8\xbf\x99\xe6\x98\xaf\xe6\xaf\x8f\xe5\xae\x89\xe6\x81\xaf\xe6\x97\xa5\xbc\x8c\xe9\x99\xa4\xe6\x97\xa5\xe5\xb8\xb8\xe7\x9a\x84\xe5\x85\xa8\xe7\x87\x94\xe7\xa5\xe5\xa5\xa0\xe7\xa5\xad\xe5\xa4\x96\xef\xbc\x8c\xe5\xba\x94\xe7\x8c\xae\xe7\x9a\x84\xe5\xae\x89\xe6\x81\xaf\xe6\x97\xa5\xe5\x85\xa8\xe7\x87\x94\xe7\xa5\xad\xe3\x80\x82','\xe6\x9c\x89\xe6\x97\xb6\xe5\x80\x99\xef\xbc\x8c\xe5\x8f\xaa\xe6\x9c\x89\xe9\x83\xa8\xe5\x88\x86\xe6\x97\xa5\xbd\xae\xe8\xa2\xab\xe9\x81\xae\xe6\x8c\xa1\xe4\xbd\x8f\xef\xbc\x8c\xe9\x82\xa3\xe5\xb0\xb1\xe4\xb8\x8d\xe6\x98\xaf\xe6\x97\xa5\xe5\x85\xa8\xe9\xa3\x9f\xef\xbc\x8c\xe8\x80\x8c\xe6\x98\xaf\xe6\x97\xa5\xe5\x81\x8f\xe9\xa3\x9f\xe3\x80\xe6\x97\xb6\xe5\x80\x99\xef\xbc\x8c\xe5\x8f\xaa\xe6\x9c\x89\xe9\x83\xa8\xe5\x88\x86\xe6\x97\xa5\xbd\xae\xe8\xa2\xab\xe9\x81\xae\xe6\x8c\xa1\xe4\xbd\x8f\xef\xbc\x8c\xe9\x82\xa3\xe5\xb0\xb1\xe4\xb8\x8d\xe6\x98\xaf\xe6\x97\xa5\xe5\x85\xa8\xe9\xa3\x9f\xef\xbc\x8c\xe8\x80\x8c\xe6\x98\xaf\xe6\x97\xa5\xe5\x81\x8f\xe9\xa3\x9f\xe3\x80\x82','\xe4\xba\x8b\xe4\xbb\xb6\xe5\x8f\x91\xe7\x94\x9f\xe6\x97\xa5\x8f\xaf\xe6\x8c\x87\xe5\xae\x9a\xe4\xb8\xba\xe5\x91\xa8\xe5\x86\x85\xe6\x9f\x90\xe6\x97\xa5\xe6\x88\x96\xe6\x9c\x88\xe5\x86\x85\xe6\x9f\x90\xe6\x97\xa5\xe3\x80\xe4\xbb\xb6\xe5\x8f\x91\xe7\x94\x9f\xe6\x97\xa5\x8f\xaf\xe6\x8c\x87\xe5\xae\x9a\xe4\xb8\xba\xe5\x91\xa8\xe5\x86\x85\xe6\x9f\x90\xe6\x97\xa5\xe6\x88\x96\xe6\x9c\x88\xe5\x86\x85\xe6\x9f\x90\xe6\x97\xa5\xe3\x80\x82']</p>
</blockquote>

<p>The program keeps giving me this error:</p>

<blockquote>
  <p>UnicodeDecodeError: 'utf8' codec can't decode byte 0xad in position 30: invalid start byte</p>
</blockquote>

<p>I am using this piece of code to go through the list and try to convert, where <code>new_sentences</code> is the list:</p>

<pre><code>for i in range(0,len(new_sentences)):
    stuff = new_sentences[i].strip()
    stuff = unicode(stuff,""utf8"")
</code></pre>

<p>I have gone through the list, but cannot find the byte that can not be converted. I know it's very long, but any help would be appreciated. Thanks.</p>",python|utf-8,"<p>I hit this problem when grab data from api.
using python chardet to detect the language</p>

<pre><code>from chardet import detect
coding = detect(line)
</code></pre>

<p>and the return string is something encode using gbk
try </p>

<pre><code>line.strip().decode('utf-8')
</code></pre>

<p>not work for me </p>

<p>but </p>

<pre><code>line.decode('gbk').encode('utf-8')
</code></pre>

<p>works well.., i guess the problem is we need to know the way the char is encoded then decode it ..</p>",2
57464516,MySQL and Python ProgrammingError: 1064 (42000),"<pre><code>Ignoring exception in command imageshow:
Traceback (most recent call last):
  File ""/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/site-packages/discord/ext/commands/core.py"", line 79, in wrapped
    ret = await coro(*args, **kwargs)
  File ""/Users/user/bot.py"", line 318, in image
    mycursor.execute(get_name)
  File ""/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/site-packages/mysql/connector/cursor.py"", line 551, in execute
    self._handle_result(self._connection.cmd_query(stmt))
  File ""/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/site-packages/mysql/connector/connection.py"", line 490, in cmd_query
    result = self._handle_result(self._send_cmd(ServerCmd.QUERY, query))
  File ""/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/site-packages/mysql/connector/connection.py"", line 395, in _handle_result
    raise errors.get_exception(packet)
mysql.connector.errors.ProgrammingError: 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'name = 'testname'' at line 1

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File ""/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/site-packages/discord/ext/commands/bot.py"", line 863, in invoke
    await ctx.command.invoke(ctx)
  File ""/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/site-packages/discord/ext/commands/core.py"", line 728, in invoke
    await injected(*ctx.args, **ctx.kwargs)
  File ""/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/site-packages/discord/ext/commands/core.py"", line 88, in wrapped
    raise CommandInvokeError(exc) from exc
discord.ext.commands.errors.CommandInvokeError: Command raised an exception: ProgrammingError: 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to 
use near 'name = 'testname'' at line 1
</code></pre>

<p>I got this error when I try to select data from MySQL database (using Discord.py too). Here is SQL:</p>

<pre class=""lang-py prettyprint-override""><code>@bot.command()
async def imageshow(ctx, name2):
    get_image = ""SELECT image FROM name_list WHERE name = '{0}'"".format(name2)
    mycursor.execute(get_image)
    image_url = mycursor.fetchone()

    get_name = ""SELECT display_name FROM name_list WHERE name = '{0}'"".format(name2)
    mycursor.execute(get_name)
    name = mycursor.fetchone()

    for image in image_url:
        final_image = image

    for display_name in name:
        final_name = display_name

    embed = discord.Embed(title=""{0}"".format(final_name), description=""{0}'s Image"".format(final_name), color=0xeee657)

    embed.set_image(url=""{0}"".format(final_image))

    await ctx.send(embed=embed)
</code></pre>

<p>name_list table exist, image column exist, name column exist. Why i get this error? I added full code to better understanding my code. This works in one of my other command, why not here?</p>",python|mysql|discord.py-rewrite,"<p>This is done. I have one conflict before this command, what make this error. FIXED!</p>",0
40376682,Unable to install python on Windows,"<p>I follow this <a href=""http://www.howtogeek.com/197947/how-to-install-python-on-windows/"" rel=""nofollow noreferrer"">tut</a> to install python on Windows 7 (64 bit).
But I get an error: 0x80070643: <em>Failed to Install MSI Package</em>: <a href=""https://i.stack.imgur.com/j4Qdl.jpg"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/j4Qdl.jpg"" alt=""enter image description here""></a>
What's wrong? 
P. S. The 1st and 3d methods of <a href=""http://www.techpayee.com/failed-to-install-msi-package"" rel=""nofollow noreferrer"">this guide</a> have not worked for me. </p>

<h2>Update</h2>

<p>Should I tick up <em>Add Python to PATH</em> box? 
<a href=""https://i.stack.imgur.com/OxDNK.jpg"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/OxDNK.jpg"" alt=""enter image description here""></a></p>

<h2>Update 2</h2>

<p>I've doanloaded the <em>x86-64 embeddable zip file</em>, unzipped it into Python35 and now it works. </p>",python|windows|install,"<p>Close the installation program and follow:</p>

<ol>
<li>On the desktop, press <kbd>Windows key</kbd>+<kbd>R</kbd> to open a Run dialog.</li>
<li>Type <code>msiexec /unreg</code>, and press <kbd>Enter</kbd>.</li>
<li>Follow the first step again.</li>
<li>Type <code>msiexec /regserver</code>, and press <kbd>Enter</kbd>.</li>
</ol>

<p>In this <a href=""https://answers.microsoft.com/en-us/windows/forum/windows_8-performance/unable-to-install-msi-packages-error-there-is-a/52695c2b-87b8-4909-8874-7d66eeb1a8f6?auth=1"" rel=""nofollow noreferrer"">link</a> you can find more information.</p>",3
40376682,Unable to install python on Windows,"<p>I follow this <a href=""http://www.howtogeek.com/197947/how-to-install-python-on-windows/"" rel=""nofollow noreferrer"">tut</a> to install python on Windows 7 (64 bit).
But I get an error: 0x80070643: <em>Failed to Install MSI Package</em>: <a href=""https://i.stack.imgur.com/j4Qdl.jpg"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/j4Qdl.jpg"" alt=""enter image description here""></a>
What's wrong? 
P. S. The 1st and 3d methods of <a href=""http://www.techpayee.com/failed-to-install-msi-package"" rel=""nofollow noreferrer"">this guide</a> have not worked for me. </p>

<h2>Update</h2>

<p>Should I tick up <em>Add Python to PATH</em> box? 
<a href=""https://i.stack.imgur.com/OxDNK.jpg"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/OxDNK.jpg"" alt=""enter image description here""></a></p>

<h2>Update 2</h2>

<p>I've doanloaded the <em>x86-64 embeddable zip file</em>, unzipped it into Python35 and now it works. </p>",python|windows|install,"<p>Choose 'custom install' &amp; checked all options.</p>

<p>If you choose debug option , someone will require you install vs2005 above.</p>

<p>Click 'next', it'll work for you.</p>",0
30467034,"Windows select() only receives, doesn't send","<p>I had my Windows computer connect to my linux python server. </p>

<p>The server works very well for linux users, but I want it to run on Windows as well. I did some research and found out that the <strong><em>select.select()</em></strong> function on Windows works without a <strong><em>stdin</em></strong> pipe, but when I do it it, it doesn't send any data to the server, only receives.  </p>

<p>Code:</p>

<pre><code> __author__ = 'root'
import socket
import datetime
import getpass          # Get username
import sys
import threading
import thread
import select

def client():

   sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
   sock.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, 1)
   address = ""192.168.1.17""
   sock.bind((str(""192.168.1.231""), int(2222)))
   sock.connect((""192.168.1.17"", int(23657)))
   sock.setblocking(0)
   sock.send(getpass.getuser()+""[$ID$]zivofek"")

   socket_list = [sys.stdin, sock]
   partner = raw_input(""Chat partner: "")

   while 1:
       try:
           message = raw_input()
           sock.sendall(message)
           data = sock.recv(1024)
           print data
       except:
           continue

def get_time():
   return datetime.datetime.strftime(datetime.datetime.now(), '%H:%M:%S')

def main():
   client()

if __name__ == ""__main__"":
   main()
</code></pre>

<p>Any idea of how to make both receiving and sending at the same time in Windows?</p>",python|linux|windows|sockets,"<p>Do not set the socket non-blocking unless you really want to multiplex events from different sources (i.e. when not using <code>select()</code>).</p>

<p>Here just normal blocking <code>sendall()</code> will do. Also check return length of the <code>recv()</code> - it returns when <em>some</em> data is available, and receiving zero bytes means the other end closed the connection.</p>

<p>Again, don't <code>bind()</code> or set <code>SO_REUSEADDR</code> on client TCP sockets.</p>",0
30467034,"Windows select() only receives, doesn't send","<p>I had my Windows computer connect to my linux python server. </p>

<p>The server works very well for linux users, but I want it to run on Windows as well. I did some research and found out that the <strong><em>select.select()</em></strong> function on Windows works without a <strong><em>stdin</em></strong> pipe, but when I do it it, it doesn't send any data to the server, only receives.  </p>

<p>Code:</p>

<pre><code> __author__ = 'root'
import socket
import datetime
import getpass          # Get username
import sys
import threading
import thread
import select

def client():

   sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
   sock.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, 1)
   address = ""192.168.1.17""
   sock.bind((str(""192.168.1.231""), int(2222)))
   sock.connect((""192.168.1.17"", int(23657)))
   sock.setblocking(0)
   sock.send(getpass.getuser()+""[$ID$]zivofek"")

   socket_list = [sys.stdin, sock]
   partner = raw_input(""Chat partner: "")

   while 1:
       try:
           message = raw_input()
           sock.sendall(message)
           data = sock.recv(1024)
           print data
       except:
           continue

def get_time():
   return datetime.datetime.strftime(datetime.datetime.now(), '%H:%M:%S')

def main():
   client()

if __name__ == ""__main__"":
   main()
</code></pre>

<p>Any idea of how to make both receiving and sending at the same time in Windows?</p>",python|linux|windows|sockets,"<pre><code>socket_list = [sys.stdin, sock]
</code></pre>

<p>Assuming the purpose of the above socket_list is to pass it in to select() ... this isn't going to work.  The Windows implementation of select() only works with sockets, and sys.stdin is not a socket.</p>

<p>There's no easy fix for this problem(*); that said, one way to paper over the problem is by reading from sys.stdin in a separate thread, and having that thread send() the data to one end of a connected socket pair, and place the other end of the pair into the list you are passing to select().  Alternatively, you could put a timeout into select() so that select() returns every so often to let your even loop <a href=""https://stackoverflow.com/questions/2408560/python-nonblocking-console-input"">check</a> to see if there are any bytes available on stdin (although this mechanism will either be CPU-inefficient or have high latency, depending on the timeout value you pass to select() -- whether or not that is acceptable will depend on your particular usage scenario)</p>

<p>(*) Okay, there is one easy fix: don't bother trying to run the program in Windows... ;)</p>",0
43076195,Counter.most_common(n) how to override arbitrary ordering,"<p>Can I accomplish a rank/sort using Counter.most_common() functionality, thus avoiding this line: <code>d = sorted(d.items(), key=lambda x: (-x[1],x[0]), reverse=False)</code> ??</p>

<p><strong>Challenge:</strong>
You are given a string.The string contains only lowercase English alphabet characters.Your task is to find the top three most common characters in the string.</p>

<p><strong>Output Format:</strong>
Print the three most common characters along with their occurrence count each on a separate line. Sort output in descending order of occurrence count. If the occurrence count is the same, sort the characters in ascending order.</p>

<p>In completing this I used dict, Counter, and sort in order to ensure ""the occurrence count is the same, sort the characters in ascending order"". The in-built Python <code>sorted</code> functionality ensures ordering by count, then alphabetical. <strong>I'm curious if there is a way to override <code>Counter.most_common()</code> default arbitrary sort/order logic as it seems to disregard the lexicographical order of the results when picking the top 3.</strong></p>

<pre><code>import sys
from collections import Counter

string = sys.stdin.readline().strip()
d = dict(Counter(string).most_common(3))
d = sorted(d.items(), key=lambda x: (-x[1],x[0]), reverse=False)

for letter, count in d[:3]:
    print letter, count
</code></pre>",python|python-2.7|counter,"<p>Yes the <a href=""https://docs.python.org/3/library/collections.html?highlight=counter#collections.Counter"" rel=""noreferrer"">doc explicitly says <code>Counter.most_common()</code>'s (tie-breaker) order for when counts are equal is arbitrary</a>.</p>

<ul>
<li>UPDATE: PM2Ring told me Counter inherits dict's ordering. The insertion order thing only happens in 3.6+, and is only guaranteed in 3.7. It's possible the doc is lagging.</li>
<li>In cPython 3.6+ they fall back on original insertion order (see bottom), but don't rely on that implementation because per the spec, it's not defined behavior. Best to do your own sort, as you say, if you want totally deterministic behavior.</li>
<li>I show at bottom how <strong>you can <a href=""https://stackoverflow.com/questions/5626193/what-is-monkey-patching"">monkey-patch</a> <code>Counter.most_common</code> with your own sort function</strong> like you show, but that's frowned on. (Code you write might accidentally rely on it and hence break when it wasn't patched.)</li>
<li>You could subclass <code>Counter</code> to <code>MyCounter</code> so you can override its <code>most_common</code>. Painful and not really portable.</li>
<li>Really the best approach is just to write code and tests that don't rely on the arbitrary tiebreaker order from <code>most_common()</code></li>
<li>I agree that <code>most_common()</code> should not have been hardwired and we should be able to pass a comparison key or sort function into <code>__init__()</code>.</li>
</ul>

<p>Monkey-patching <code>Counter.most_common()</code> :</p>

<pre><code>def patched_most_common(self):
    return sorted(self.items(), key=lambda x: (-x[1],x[0]))

collections.Counter.most_common = patched_most_common

collections.Counter('ccbaab')
Counter({'a': 2, 'b': 2, 'c': 2})
</code></pre>

<p>Demonstrating that in cPython 3.7, the arbitrary order is order of insertion (first insertion of each character):</p>

<pre><code>Counter('abccba').most_common()
[('a', 2), ('b', 2), ('c', 2)]

Counter('ccbaab').most_common()
[('c', 2), ('b', 2), ('a', 2)]
</code></pre>",6
24390258,json module bug in Python 3.4.1?,"<p>I'm trying to use SharePoint 2010's REST API, which was going swimmingly until i ran into this:</p>

<pre><code>Traceback (most recent call last):
  File ""TestJSON.py"", line 21, in &lt;module&gt;
    json.loads(s)
  File ""c:\Python33\lib\json\__init__.py"", line 316, in loads
    return _default_decoder.decode(s)
  File ""c:\Python33\lib\json\decoder.py"", line 351, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
  File ""c:\Python33\lib\json\decoder.py"", line 367, in raw_decode
    obj, end = self.scan_once(s, idx)
ValueError: Expecting ',' delimiter: line 1 column 14 (char 13)
</code></pre>

<p>Test case:</p>

<pre><code>import json
s='''{""etag"": ""W/\""1\""""}'''
json.loads(s)
</code></pre>

<p>Python 3.3.5 gives the same error. Did i find a bug in the JSON library?</p>

<p><strong>Update:</strong></p>

<p>The actual error i'm getting (preceded by affected part) is this:</p>

<pre><code>&gt;&gt;&gt;&gt;&gt;&gt;Err:tration?$filter=Modified%20gt%20datetime\'2014-04-30T00:00:00.000Z\'&amp;$orderby=Mo&lt;&lt;&lt;&lt;&lt;&lt;&lt;
Traceback (most recent call last):
  File ""TestURL.py"", line 41, in &lt;module&gt;
    j = json.loads(body)
  File ""c:\Python33\lib\json\__init__.py"", line 316, in loads
    return _default_decoder.decode(s)
  File ""c:\Python33\lib\json\decoder.py"", line 351, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
  File ""c:\Python33\lib\json\decoder.py"", line 367, in raw_decode
    obj, end = self.scan_once(s, idx)
ValueError: Invalid \escape: line 4005 column 114 (char 314020)
</code></pre>

<p>from</p>

<pre><code>body = response.read().decode(""utf-8"")
print(""&gt;&gt;&gt;&gt;&gt;&gt;Err:{}&lt;&lt;&lt;&lt;&lt;&lt;&lt;"".format(body[314020-40:314020+40]))
</code></pre>",python|json|sharepoint-2010,"<p>The <code>\'</code> sequence is <em>invalid JSON</em>. Single quotes do not need to be escaped, making this an invalid <a href=""http://tools.ietf.org/html/rfc4627#section-2.5"" rel=""nofollow"">string escape</a>.</p>

<p>You could try to repair it after the fact:</p>

<pre><code>import re

data = re.sub(r""(?&lt;!\\)\\'"", ""'"", data)
</code></pre>

<p>before loading it with JSON. This replaces <code>\'</code> with plain <code>'</code>, provided the backslash wasn't already escaped by a preceding <code>\</code>.</p>

<p>Since single quotes can <em>only</em> appear in string values, this should be safe.</p>",1
24390258,json module bug in Python 3.4.1?,"<p>I'm trying to use SharePoint 2010's REST API, which was going swimmingly until i ran into this:</p>

<pre><code>Traceback (most recent call last):
  File ""TestJSON.py"", line 21, in &lt;module&gt;
    json.loads(s)
  File ""c:\Python33\lib\json\__init__.py"", line 316, in loads
    return _default_decoder.decode(s)
  File ""c:\Python33\lib\json\decoder.py"", line 351, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
  File ""c:\Python33\lib\json\decoder.py"", line 367, in raw_decode
    obj, end = self.scan_once(s, idx)
ValueError: Expecting ',' delimiter: line 1 column 14 (char 13)
</code></pre>

<p>Test case:</p>

<pre><code>import json
s='''{""etag"": ""W/\""1\""""}'''
json.loads(s)
</code></pre>

<p>Python 3.3.5 gives the same error. Did i find a bug in the JSON library?</p>

<p><strong>Update:</strong></p>

<p>The actual error i'm getting (preceded by affected part) is this:</p>

<pre><code>&gt;&gt;&gt;&gt;&gt;&gt;Err:tration?$filter=Modified%20gt%20datetime\'2014-04-30T00:00:00.000Z\'&amp;$orderby=Mo&lt;&lt;&lt;&lt;&lt;&lt;&lt;
Traceback (most recent call last):
  File ""TestURL.py"", line 41, in &lt;module&gt;
    j = json.loads(body)
  File ""c:\Python33\lib\json\__init__.py"", line 316, in loads
    return _default_decoder.decode(s)
  File ""c:\Python33\lib\json\decoder.py"", line 351, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
  File ""c:\Python33\lib\json\decoder.py"", line 367, in raw_decode
    obj, end = self.scan_once(s, idx)
ValueError: Invalid \escape: line 4005 column 114 (char 314020)
</code></pre>

<p>from</p>

<pre><code>body = response.read().decode(""utf-8"")
print(""&gt;&gt;&gt;&gt;&gt;&gt;Err:{}&lt;&lt;&lt;&lt;&lt;&lt;&lt;"".format(body[314020-40:314020+40]))
</code></pre>",python|json|sharepoint-2010,"<p>The string literal is not escaped correctly. Make sure the string really represent JSON.</p>

<pre><code>&gt;&gt;&gt; s = r'''{""etag"": ""W/\""1\""""}'''  # NOTE: raw string literal
&gt;&gt;&gt; json.loads(s)
{'etag': 'W/""1""'}
</code></pre>",3
24682947,index a hashtable when using object as key in python,"<p>so I have those two classes ""key"" and ""value"" and the idea is to create a hashtable out of them.</p>

<pre><code>class key:
        num_master = -1
        num_slave = -1
        width = -1
        num_pipeline = -1
        diff_clock_master = -1
        diff_clock_slave = -1

        def __init__(self,m,s,w,p,dm,ds):
                self.num_master = m
                self.num_slave = s
                self.width = w
                self.num_pipeline = p
                self.diff_clock_master = dm
                self.diff_clock_slave = ds

        def __hash__(self):
                return hash((self.num_master,self.num_slave,self.width,self.num_pipeline,self.diff_clock_master,self.diff_clock_slave))

        def __eq__(self,other):
                return (self.num_master,self.num_slave,self.width,self.num_pipeline,self.diff_clock_master,self.diff_clock_slave) == (other.num_master,other.num_slave,other.width,other.num_pipeline,other.diff_clock_master,other.diff_clock_slave)   

class value:
        alms = -1
        brams = -1
        labs = -1
        freq = -1
        power = -1

        def __init__(self,a,b,l,f,p):
                self.alms = a
                self.brams = b
                self.labs = l
                self.freq = f
                self.power = p
</code></pre>

<p>So I populate the hash table as follows:</p>

<pre><code>def parsify(report_name):
    report = open(report_name,'r')
    for line in report:

                #split line
                part_list = line.split()

                newkey = key(part_list[0],part_list[1],part_list[2],part_list[3],part_list[4],part_list[5])
                newvalue = value(part_list[6],part_list[7],part_list[8],part_list[9],part_list[10])
                hash_table[newkey]=newvalue

                return hash_table
</code></pre>

<p>then I try to index into the hash table like this:</p>

<pre><code>#test
hash_table = parsify('report.txt')

qkey = key(1,1,16,0,0,0)
print hash_table[qkey].alms
</code></pre>

<p>but it doesn't work. How can I index into this hash table and how can I make this easier?</p>

<p>and here's a sample report.txt:</p>

<pre><code>1   1   16  0   0   0   102.0   0.0 10.2    300.75  1.36    m1_s1_w16_p0_dcm0_dcs0_traffic_0_-----&gt;_m1_s1_w16_p0_dcm0_dcs0_traffic_0
1   1   16  1   0   0   102.0   0.0 10.2    300.75  1.36    m1_s1_w16_p1_dcm0_dcs0_traffic_0_-----&gt;_m1_s1_w16_p1_dcm0_dcs0_traffic_0
1   1   16  2   0   0   102.0   0.0 10.2    300.75  1.36    m1_s1_w16_p2_dcm0_dcs0_traffic_0_-----&gt;_m1_s1_w16_p2_dcm0_dcs0_traffic_0
1   1   16  3   0   0   166.0   0.0 16.6    303.03  2.02    m1_s1_w16_p3_dcm0_dcs0_traffic_0_-----&gt;_m1_s1_w16_p3_dcm0_dcs0_traffic_0
</code></pre>",python|hash|hashtable,"<p>I suspect the issue you're having is that you building your dictionary with strings in the <code>key</code> instances. Then when you go to look up an item, you're using integers in the <code>key</code> instance. <code>""0""</code> is not equal to <code>0</code> in Python, so your lookup is failing.</p>

<p>Instead of <code>qkey = key(1,1,16,0,0,0)</code>, try using <code>qkey = key(""1"",""1"",""16"",""0"",""0"",""0"")</code> in your test code.</p>

<p>Or alternatively, you might want to convert the strings to integers and floating point values when you create the <code>key</code>s and <code>value</code>s in the first place:</p>

<pre><code>newkey = key(*map(int, part_list[:6]))         # first six values are ints
newvalue = value(*map(float, part_list[6:11])) # next five are floats
</code></pre>",2
24682947,index a hashtable when using object as key in python,"<p>so I have those two classes ""key"" and ""value"" and the idea is to create a hashtable out of them.</p>

<pre><code>class key:
        num_master = -1
        num_slave = -1
        width = -1
        num_pipeline = -1
        diff_clock_master = -1
        diff_clock_slave = -1

        def __init__(self,m,s,w,p,dm,ds):
                self.num_master = m
                self.num_slave = s
                self.width = w
                self.num_pipeline = p
                self.diff_clock_master = dm
                self.diff_clock_slave = ds

        def __hash__(self):
                return hash((self.num_master,self.num_slave,self.width,self.num_pipeline,self.diff_clock_master,self.diff_clock_slave))

        def __eq__(self,other):
                return (self.num_master,self.num_slave,self.width,self.num_pipeline,self.diff_clock_master,self.diff_clock_slave) == (other.num_master,other.num_slave,other.width,other.num_pipeline,other.diff_clock_master,other.diff_clock_slave)   

class value:
        alms = -1
        brams = -1
        labs = -1
        freq = -1
        power = -1

        def __init__(self,a,b,l,f,p):
                self.alms = a
                self.brams = b
                self.labs = l
                self.freq = f
                self.power = p
</code></pre>

<p>So I populate the hash table as follows:</p>

<pre><code>def parsify(report_name):
    report = open(report_name,'r')
    for line in report:

                #split line
                part_list = line.split()

                newkey = key(part_list[0],part_list[1],part_list[2],part_list[3],part_list[4],part_list[5])
                newvalue = value(part_list[6],part_list[7],part_list[8],part_list[9],part_list[10])
                hash_table[newkey]=newvalue

                return hash_table
</code></pre>

<p>then I try to index into the hash table like this:</p>

<pre><code>#test
hash_table = parsify('report.txt')

qkey = key(1,1,16,0,0,0)
print hash_table[qkey].alms
</code></pre>

<p>but it doesn't work. How can I index into this hash table and how can I make this easier?</p>

<p>and here's a sample report.txt:</p>

<pre><code>1   1   16  0   0   0   102.0   0.0 10.2    300.75  1.36    m1_s1_w16_p0_dcm0_dcs0_traffic_0_-----&gt;_m1_s1_w16_p0_dcm0_dcs0_traffic_0
1   1   16  1   0   0   102.0   0.0 10.2    300.75  1.36    m1_s1_w16_p1_dcm0_dcs0_traffic_0_-----&gt;_m1_s1_w16_p1_dcm0_dcs0_traffic_0
1   1   16  2   0   0   102.0   0.0 10.2    300.75  1.36    m1_s1_w16_p2_dcm0_dcs0_traffic_0_-----&gt;_m1_s1_w16_p2_dcm0_dcs0_traffic_0
1   1   16  3   0   0   166.0   0.0 16.6    303.03  2.02    m1_s1_w16_p3_dcm0_dcs0_traffic_0_-----&gt;_m1_s1_w16_p3_dcm0_dcs0_traffic_0
</code></pre>",python|hash|hashtable,"<p>You could make this easier by using tuples for your dictionary keys instead of a custom class.  For example, since you create your key thus:</p>

<pre><code>key(1,1,16,0,0,0)
</code></pre>

<p>you may as well use a simple tuple here </p>

<pre><code>(1,1,16,0,0,0)
</code></pre>

<p>and when reading the data too:</p>

<pre><code>tuple(part_list[:6])
</code></pre>

<p>Tuples make good keys for dictionaries and then you don't need to worry about classes. The values could logically be stored as tuples too. Or do you have a reason for requiring the more complicated structure?</p>",0
24718672,How do I declare an encoding for Python source code?,"<p>How do I declare an encoding for this code?</p>

<p>I know how to declare encoding in other situations but how would I do it with this?</p>

<pre><code>if used_prefix and cmd==""shoot"" and user.name in whitelist:
    name = args.lower()
    if name in killed:
        room.message(user.name+' is already dead.')
    else:
        killed.append(name)
        saveKills()
        room.message('//'+user.name+' shoots '+name+' in the head.')
</code></pre>

<p>The error message says:</p>

<blockquote>
  <p>SyntaxError: Non-ASCII character '\xe3' in file /home/stephen/downloads/inhaley/inhaley.py on line 6, but no encoding declared; see <a href=""http://www.python.org/peps/pep-0263.html"" rel=""nofollow"">http://www.python.org/peps/pep-0263.html</a> for details.</p>
</blockquote>",python|character-encoding,<p>put <code>#coding=utf-8</code> at the top of your script/file</p>,0
24718672,How do I declare an encoding for Python source code?,"<p>How do I declare an encoding for this code?</p>

<p>I know how to declare encoding in other situations but how would I do it with this?</p>

<pre><code>if used_prefix and cmd==""shoot"" and user.name in whitelist:
    name = args.lower()
    if name in killed:
        room.message(user.name+' is already dead.')
    else:
        killed.append(name)
        saveKills()
        room.message('//'+user.name+' shoots '+name+' in the head.')
</code></pre>

<p>The error message says:</p>

<blockquote>
  <p>SyntaxError: Non-ASCII character '\xe3' in file /home/stephen/downloads/inhaley/inhaley.py on line 6, but no encoding declared; see <a href=""http://www.python.org/peps/pep-0263.html"" rel=""nofollow"">http://www.python.org/peps/pep-0263.html</a> for details.</p>
</blockquote>",python|character-encoding,"<p>Add <code>#coding=utf-8</code> at the top of your code, as such:</p>

<pre><code>#coding=utf-8

#imports here
import math

print 'The encoding has been set!'
</code></pre>",0
24718672,How do I declare an encoding for Python source code?,"<p>How do I declare an encoding for this code?</p>

<p>I know how to declare encoding in other situations but how would I do it with this?</p>

<pre><code>if used_prefix and cmd==""shoot"" and user.name in whitelist:
    name = args.lower()
    if name in killed:
        room.message(user.name+' is already dead.')
    else:
        killed.append(name)
        saveKills()
        room.message('//'+user.name+' shoots '+name+' in the head.')
</code></pre>

<p>The error message says:</p>

<blockquote>
  <p>SyntaxError: Non-ASCII character '\xe3' in file /home/stephen/downloads/inhaley/inhaley.py on line 6, but no encoding declared; see <a href=""http://www.python.org/peps/pep-0263.html"" rel=""nofollow"">http://www.python.org/peps/pep-0263.html</a> for details.</p>
</blockquote>",python|character-encoding,"<p>Add</p>

<pre><code>#!/usr/bin/env python
# -*- coding: utf-8 -*-
</code></pre>

<p>On the first 2 lines.</p>",0
56637144,Feature Engineering Salary Data using Categorical Column as a condition,"<p>Need to convert salary amount to annualised salaries considering the Categorical Column :</p>

<ul>
<li>'M' - monthly</li>
<li>'Y' - yearly</li>
<li>'W' - weekly</li>
<li>'B' - bi weekly</li>
</ul>

<pre class=""lang-py prettyprint-override""><code>df = pd.DataFrame({'Name':['A','B','C','D','E'],
                  'sal_amt':[4500,50000,2000,3000,5000],
                  'sal_md':['M','Y','W','B','M']})
df.head()

#defined a function for my problem...

def func(row):
    if row['sal_md'] == 'M':
        return (row['sal_amt']*12)
    elif row['sal_md'] =='Y':
        return row['sal_amt'] 
    elif row['sal_md'] == 'H':
        return (row['sal_amt']*8760)
    elif row['sal_md'] == 'W':
        return (row['sal_amt']*52)
    elif row['sal_md'] == 'B':
        return (row['sal_amt']*26)
    elif row['sal_md'] == 'S':
        return row['sal_amt']
    elif row['sal_md'] == 'A':
        return row['sal_amt']


df['sal_annual'] = df.apply(func,axis=1)
</code></pre>

<p><a href=""https://i.stack.imgur.com/INXva.png"" rel=""nofollow noreferrer"">https://i.stack.imgur.com/INXva.png</a></p>",python|machine-learning|artificial-intelligence|categorical-data|feature-engineering,"<pre><code>In [1]: import pandas as pd

In [2]: df = pd.DataFrame({'Name':['A','B','C','D','E'],
                      'sal_amt':[4500,50000,2000,3000,5000],
                      'sal_md':['M','Y','W','B','M']})

In [3]: multiplier_dict = {'M':12, 'Y':1, 'W':52, 'B':26}

In [4]: df['sal_multiplier'] = df.sal_md.map(multiplier_dict)

In [5]: df['sal_annual'] = df.sal_amt*df.sal_multiplier

In [6]: df.head()
Out[6]:
  Name  sal_amt sal_md  sal_multiplier  sal_annual
0    A     4500      M              12       54000
1    B    50000      Y               1       50000
2    C     2000      W              52      104000
3    D     3000      B              26       78000
4    E     5000      M              12       60000
</code></pre>

<p>Not exactly what you asked about, but exactly solves your problem in an easy and pythonic way.</p>",0
17785553,python class with user defined expressions executed at runtime,"<p>I'd like to build a class that is able to take a few user defined expressions at runtime and to calculations based on them and a few predefined variables that the class owns, e.g. the user will know that the variables a,b,c &amp; d exist:</p>

<p>pseudo code:</p>

<pre><code>&gt;&gt;&gt; foo = myclass()

&gt;&gt;&gt; foo.a = 2
&gt;&gt;&gt; foo.b = 3
&gt;&gt;&gt; foo.expression = 'a + b'
&gt;&gt;&gt; foo.run_expression()
5

&gt;&gt;&gt; foo.expression = 'a * b'
&gt;&gt;&gt; foo.run_expression()
10
</code></pre>

<p>I've explored lambda functions but they seems to need me to explicitly define what the inputs are for the lambda function every time I create a new one which would mean a lot of boiler plate input from the user ever time they wanted to update the lambda as I know that the inputs would always be a predefined set of variables. </p>

<p>does anybody have experience doing anything similar, or have any thoughts on how to structure a program like this?</p>",python|lambda,"<p>To evaluate expressions as Python, use the <a href=""http://docs.python.org/2/library/functions.html#eval"" rel=""nofollow""><code>eval()</code> function</a>, passing in <code>vars(self)</code> as the namespace:</p>

<pre><code>def run_expression(self):
    return eval(self.expression, vars(self))
</code></pre>

<p>Do know this opens you up to attack vectors, where malicious users can execute arbitrary code and change your program to do completely different things.</p>

<p>Demo:</p>

<pre><code>&gt;&gt;&gt; class Foo(object):
...     def run_expression(self):
...         return eval(self.expression, vars(self))
... 
&gt;&gt;&gt; f = Foo()
&gt;&gt;&gt; f.a = 2
&gt;&gt;&gt; f.b = 3
&gt;&gt;&gt; f.expression = 'a + b'
&gt;&gt;&gt; f.run_expression()
5
</code></pre>",2
18150043,"Logging in, navigating, and extracting text on SSL site using Python?","<h2>Precursor: I asked a question similar to this yesterday <a href=""https://stackoverflow.com/questions/18134834/extracting-and-parsing-html-from-a-secure-website-with-python"">here</a>. My reason for not editing that question is that even though the two are similar, this one is far more advanced.</h2>

<p><strong>My Project</strong>: Using Python, I want to logon to a secure website, navigate to several pages within that session and extract text from those pages into a file.</p>

<p><strong>The Details</strong>: Here is all the information I have gathered/code I have written.</p>

<p>Here are the portions of the secured site's logon page that are worth noting:</p>

<pre><code>&lt;form action=""index.asp"" method=""post"" name=""form""&gt;
   &lt;input type=""text"" id=""user"" name=""user""""&gt;
   &lt;input type=""password"" name=""password""&gt;
   &lt;input type=""hidden"" name=""logon"" value=""username""&gt;
   &lt;input type=""submit"" name=""submit"" value=""Log In"" class=""button""&gt;
&lt;/form&gt;
</code></pre>

<p>There is also javascript code on the page checking for cookies, so I know I'll need <code>cookielib.CookieJar()</code>.</p>

<h2>BIG EDIT</h2>

<p>I am importing the following modules: <code>urllib</code>, <code>urllib2</code>, <code>cookielib</code> and <code>nltk</code>.</p>

<p>To produce the following code:</p>

<pre><code>cookiejar = cookielib.CookieJar()

# Notice I set 'debug' to 'true'.
debug = True
handlers = [
                urllib2.HTTPHandler(debuglevel=debug),
                urllib2.HTTPSHandler(debuglevel=debug),
                urllib2.HTTPCookieProcessor(cookiejar),
           ]
opener = urllib2.build_opener(*handlers)
# These headers I copied directly from Chrome's Developer Tools
opener.addheaders = [
    (""Accept"", ""text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8""),
    (""Accept-Encoding"", ""gzip,deflate,sdch""),
    (""Accept-Language"", ""en-US,en;q=0.8""),
    (""Cache-Control"", ""max-age=0""),
    (""Connection"", ""keep-alive""),
    (""Content-Type"", ""application/x-www-form-urlencoded""),
    (""Host"", ""www.myebill.com""),
    (""Origin"", ""https://www.myebill.com""),
    (""Referer"", ""https://www.myebill.com/index.asp?startnam""),
    (""User-Agent"", ""Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/28.0.1500.95 Safari/537.36"")
                    ]
urllib2.install_opener(opener)

# Passing the form data as a URL-encoded string
payload = ""user=&lt;User&gt;&amp;password=&lt;Password&gt;&amp;logon=username&amp;submit=Log+In""

req = urllib2.Request(""https://www.myebill.com/index.asp"", data=payload)
cookiejar.add_cookie_header(req)
page = urllib2.urlopen(req)
pdata = page.read()

print( nltk.clean_html( pdata ) )
</code></pre>

<p><strong>NOTE</strong>: If you would like me to post the debug output, just ask. :)</p>

<p><strong>My Problem</strong>: After running my code, I <em>still</em> get a ""Your session has either timed out or you have not logged on correctly."" message.</p>

<p>Help please? I tried learning mechanize, but it seems the only documentation I can find online is convoluted and confusing. Any suggestions or code would be appreciated.</p>

<p>Also, when I do find the answer, I promise to post my complete code as an edit to anyone who needs this as a reference! (omitting logon information, of course..)</p>",python|asp.net|authentication|extract|mechanize,"<p>I will attempt a shot at this. Firstly, as per the HTML form code snippet posted, the form performs  POST action to a GET URL <code>https://www.myebill.com/index.asp?nam</code>. You may want to confirm once again that this is the URL you indeed want to POST to.</p>

<p>Having said that, urllib2 already supports an HTTPSHandler. There is a related Stack Overflow discussion on how to access web services over using Python <a href=""https://stackoverflow.com/questions/5082128/how-do-i-authenticate-a-urllib2-script-in-order-to-access-https-web-services-fro"">here</a>. While, this is not directly related to the query - the answer to this question contains good pointers about what care should be taken when we are attempting to logon using HTTPS via a program. Most specifically, it is the setting of the <strong>Referer</strong> tag within the header. This is necessary, since secure websites use this mechanism to protect themselves from a CSRF attack.</p>

<p>The below code snipet shows the <strong>most important</strong> settings that you would need to put in place prior to making a request. I got this from the <a href=""http://nullege.com/codes/show/src@s@i@simpledropbox-0.2.2@simpledropbox@__init__.py/105/urllib2.HTTPSHandler/python"" rel=""nofollow noreferrer"">Nullege Python for Simple Dropbox Login</a></p>

<pre><code>handlers = [
                urllib2.HTTPHandler(debuglevel=debug),
                urllib2.HTTPSHandler(debuglevel=debug),
                urllib2.HTTPCookieProcessor(cookiejar),
            ]
opener = urllib2.build_opener(*handlers)
urllib2.install_opener(opener)   #the opener will be used for all urlopen requests from now on.
</code></pre>

<p>Note the use of the HTTPSHandler.</p>

<p>You then fill in the authentication information:</p>

<pre><code>payload = urllib.urlencode({'username' : username, 'j_password' : password})
</code></pre>

<p>and then perform a login:</p>

<pre><code>headers['Referer'] = self.urlbase #note the presence of the ""Referer' header
req = urllib2.Request(url=self.urlbase+'login', data=data, headers=headers)
cookiejar.add_cookie_header(req)
page = urllib2.urlopen(req)
pdata = page.read()
</code></pre>

<p>I hope this gives you an idea on how to go about..</p>",1
18150043,"Logging in, navigating, and extracting text on SSL site using Python?","<h2>Precursor: I asked a question similar to this yesterday <a href=""https://stackoverflow.com/questions/18134834/extracting-and-parsing-html-from-a-secure-website-with-python"">here</a>. My reason for not editing that question is that even though the two are similar, this one is far more advanced.</h2>

<p><strong>My Project</strong>: Using Python, I want to logon to a secure website, navigate to several pages within that session and extract text from those pages into a file.</p>

<p><strong>The Details</strong>: Here is all the information I have gathered/code I have written.</p>

<p>Here are the portions of the secured site's logon page that are worth noting:</p>

<pre><code>&lt;form action=""index.asp"" method=""post"" name=""form""&gt;
   &lt;input type=""text"" id=""user"" name=""user""""&gt;
   &lt;input type=""password"" name=""password""&gt;
   &lt;input type=""hidden"" name=""logon"" value=""username""&gt;
   &lt;input type=""submit"" name=""submit"" value=""Log In"" class=""button""&gt;
&lt;/form&gt;
</code></pre>

<p>There is also javascript code on the page checking for cookies, so I know I'll need <code>cookielib.CookieJar()</code>.</p>

<h2>BIG EDIT</h2>

<p>I am importing the following modules: <code>urllib</code>, <code>urllib2</code>, <code>cookielib</code> and <code>nltk</code>.</p>

<p>To produce the following code:</p>

<pre><code>cookiejar = cookielib.CookieJar()

# Notice I set 'debug' to 'true'.
debug = True
handlers = [
                urllib2.HTTPHandler(debuglevel=debug),
                urllib2.HTTPSHandler(debuglevel=debug),
                urllib2.HTTPCookieProcessor(cookiejar),
           ]
opener = urllib2.build_opener(*handlers)
# These headers I copied directly from Chrome's Developer Tools
opener.addheaders = [
    (""Accept"", ""text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8""),
    (""Accept-Encoding"", ""gzip,deflate,sdch""),
    (""Accept-Language"", ""en-US,en;q=0.8""),
    (""Cache-Control"", ""max-age=0""),
    (""Connection"", ""keep-alive""),
    (""Content-Type"", ""application/x-www-form-urlencoded""),
    (""Host"", ""www.myebill.com""),
    (""Origin"", ""https://www.myebill.com""),
    (""Referer"", ""https://www.myebill.com/index.asp?startnam""),
    (""User-Agent"", ""Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/28.0.1500.95 Safari/537.36"")
                    ]
urllib2.install_opener(opener)

# Passing the form data as a URL-encoded string
payload = ""user=&lt;User&gt;&amp;password=&lt;Password&gt;&amp;logon=username&amp;submit=Log+In""

req = urllib2.Request(""https://www.myebill.com/index.asp"", data=payload)
cookiejar.add_cookie_header(req)
page = urllib2.urlopen(req)
pdata = page.read()

print( nltk.clean_html( pdata ) )
</code></pre>

<p><strong>NOTE</strong>: If you would like me to post the debug output, just ask. :)</p>

<p><strong>My Problem</strong>: After running my code, I <em>still</em> get a ""Your session has either timed out or you have not logged on correctly."" message.</p>

<p>Help please? I tried learning mechanize, but it seems the only documentation I can find online is convoluted and confusing. Any suggestions or code would be appreciated.</p>

<p>Also, when I do find the answer, I promise to post my complete code as an edit to anyone who needs this as a reference! (omitting logon information, of course..)</p>",python|asp.net|authentication|extract|mechanize,"<p>Thanks for all the help guys, but I did finally solve the problem using Python's module <code>Requests</code>.</p>

<p>Here is the code:</p>

<pre><code>import nltk
from requests import session

payload = {
    'user': '&lt;Username&gt;',
    'password': '&lt;Password&gt;',
    'logon': 'username',
    'submit': 'Log In'
}

headers = {
    'Referer': 'https://www.myebill.com/index.asp?startnam',
    'User-Agent': 'Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/28.0.1500.95 Safari/537.36'
    }

with session() as c:
    c.post('https://www.myebill.com/index.asp?startnam', data=payload, headers=headers)
    request = c.get('https://www.myebill.com/index.asp')
    print request.headers
    print( nltk.clean_html( request.text ) )
</code></pre>

<p>For anyone who will use this code, just remember to monitor your login session with program of your choice (e.g. Wireshark, Chrome Developer Tools, Firefox Firebug, etc.) and replace the ""payload"" dictionary with data from your session.</p>

<p>Thanks again for the help! Maybe one day I will look more into the <code>urllib</code> and <code>urllib2</code> method, but if <code>Requests</code> performs the same operation with shorter, simpler code... <strong>Yeah!!!</strong></p>",1
27992110,QThread without implementing run method,"<p>I have an odd problem with QThreads in (pyqt).
I tested QThread with implementing <strong>run</strong> method and running an infinite loop inside it. it does not affect main thread (gui). but when I emit a signal
like below pseudo code any long running loop or i/o affect on main thread and makes gui freeze.</p>

<pre><code>class MyThread(QThread):
    def __init__(self , *args):
        QThread.__init__(self , *args)
        self.connect(self , SIGNAL(""do_some_io(QString)"") , self.doSomething)

    def doSomething(self ,  params):
        #do some large i/o and loops
        parent.emit( SIGNAL(""process_done()"") )


class MyDialog(QDialog):
    def __init__(self , *args):
        QThread.__init__(self , *args)
        self.Thread = MyThread(self)
        self.Thread.start()
        self.connect(self.btn , SIGNAL(""clicked()"") , self.buttonClicked)
        self.connect(self , SIGNAL(""process_done()"") , self.showMsgBox)

    def buttonClicked(self):
        self.Thread.emit( SIGNAL(""do_some_io(QString)"") , ""param"" )

    def showMsgBox(self):
        #show messagebox
</code></pre>",python|multithreading|pyqt|qthread,"<p>This is because when you emit <code>do_some_io</code>, <code>doSomething</code> is executed in the GUI thread.  In your connect calls, you need to set the connection type to QueuedConnection.  That will cause the message to be added as an event to the receiving thread event queue and it will then run the signal in the receiving thread instead of the sending thread.</p>

<p>See: <a href=""http://doc.qt.io/qt-5/qt.html#ConnectionType-enum"" rel=""nofollow"">http://doc.qt.io/qt-5/qt.html#ConnectionType-enum</a></p>",0
28204934,Python 2.7 : Entire code getting written in a file issue,"<p>I've kind of a simple issue. In a program - the program doesn't matter -, only the first lines, i open an empty file (named empty.txt).
Then i define functions, but never use them on main ... so, I do not actually write anything.</p>

<p>This the nearly complete code:</p>

<pre><code>from os import chdir

chdir('C:\\Users\\Julien\\Desktop\\PS BOT')

fic=open('empty.txt','r+')

def addtodic(txt):
    """"""Messages de la forme !add id,message ; txt='id,message' """"""
    fic.write(txt+'\n')
    fic.seek(0)

def checkdic(txt):
    """"""Messages de la forme !lien id ; txt='id' """"""
    for i in fic.readlines().split('\n'):
        ind=i.index(',')
        if i[:ind]==txt:
            fic.seek(0)
            return i[ind+1:]
    fic.seek(0)
    return 'Not found'
</code></pre>

<p>Then I launch it, and using the console, I simply ask ""fic.write( 'tadam' )"", like, to check if the writing works well before moving on.</p>

<pre><code>%run ""C:/Users/Julien/Desktop/PS BOT/dic.py""

fic
Out[8]: &lt;open file 'empty.txt', mode 'r+' at 0x0000000008D9ED20&gt;

fic.write('tadam')

fic.readline()
Out[10]: 'os import chdir\n'

fic.readline()
Out[11]: ""chdir('C:\\\\Users\\\\Julien\\\\Desktop\\\\PS BOT')\n""

fic.readline()
Out[12]: '\n'

fic.readline()
Out[13]: ""fic=open('empty.txt','r+')\n""

fic.readlines()
Out[14]:
['\n',
 'def addtodic(txt):\n',
 '    """"""Messages de la forme !add id,message ; txt=\'id,message\' """"""\n',
 '    fic.seek(0)\n',
 ""    fic.write(txt)+'\\n'\n"",
 '\n',
 'def checkdic(txt):\n',
 '    """"""Messages de la forme !lien id ; txt=\'id\' """"""\n',
 ""    for i in fic.readline().split('\\n'):\n"",
 ""        ind=i.index(',')\n"",
 '        if i[:ind]==txt:\n',
 '            fic.seek(0)\n',
 '            return i[ind+1:]\n',
 '    fic.seek(0)\n',
 ""    return 'Not found'\n"",
 '    \n',
 'def removedic(txt):\n',
 '    """"""Messages de la forme !remove id ; txt=\'id\' """"""\n',
 '    check=True\n',
 '    while check:\n',
 '        i=fic.readline()\n',
 '        if i[:len(txt)]==txt:            \n',
 '            fic.seek(0)\n',
 '            return check\n',
 '#removedic fauxeturn check\r\n',
 ""#removedic faux    tmp_file = open(filename,'w')\n"",
 '            tmp_file.write(data)\n',
 '            tmp_file.close()\n',
 '        return filename\n',
 '\n',
 '    # TODO:  This should be removed when Term is refactored.\n',
 '    def write(self,data):\n',
 '        """"""Write a string to the default output""""""\n',
 '        io.stdout.write(data)\n',
 '\n',
 '    # TODO:  This should be removed when Term is refactored.\n',
 '    def write_err(self,data):\n',
 '        """"""Write a string to the default error output""""""\n',
 '        io.stderr.write(data)\n',
 '\n',
 '    def ask_yes_no(self, prompt, default=None):\n',
 '        if self.quiet:\n',
 '            return True\n',
 '        return ask_yes_no(prompt,default)\n',
 '\n',
 '    def show_usage(self):\n',
 '        """"""Show a usage message""""""\n',
 '        page.page(IPython.core.usage.interactive_usage)\n',
 '\n',
 '    def extract_input_lines(self, range_str, raw=False):\n',
 '        """"""Return as a string a set of input history slices.\n',
 '\n',
 '        Parameters\n',
 '        ----------\n',
 '        range_str : string\n',
 '            The set of slices is given as a string, like ""~5/6-~4/2 4:8 9"",\n',
 '            since this function is for use by magic functions which get their\n',
 '            arguments as strings. The number before the / is the session\n',
 '            number: ~n goes n back from the current session.\n',
 '\n',
 '        Optional Parameters:\n',
 '          - raw(False): by default, the processed input is used.  If this is\n',
 '          true, the raw input history is used instead.\n',
 '\n',
 '        Note that slices can be called with two notations:\n',
 '\n',
 '        N:M -&gt; standard python form, means including items N...(M-1).\n',
 '\n',
 '        N-M -&gt; include items N..M (closed endpoint).""""""\n',
 '        lines = self.history_manager.get_range_by_str(range_str, raw=raw)\n',
 '        return ""\\n"".join(x for _, _, x in lines)\n',
 '\n',
 '    def find_user_code(self, target, raw=True, py_only=False, skip_encoding_cookie=True):\n',
 '        """"""Get a code string from history, file, url, or a string or macro.\n',
 '\n',
 '        This is mainly used by magic functions.\n',
 '\n',
 '        Parameters\n',
 '        ----------\n',
 '\n',
 '        target : str\n',
 '\n',
 '          A string specifying code to retrieve. This will be tried respectively\n',
 '          as: ranges of input history (see %history for syntax), url,\n',
 '          correspnding .py file, filename, or an expression evaluating to a\n',
 '          string or Macro in the user namespace.\n',
 '\n',
 '        raw : bool\n',
 '          If true (default), retrieve raw history. Has no effect on the other\n',
 '          retrieval mechanisms.\n',
 '\n',
 '        py_only : bool (default False)\n',
 '          Only try to fetch python code, do not try alternative methods to decode file\n',
 '          if unicode fails.\n',
 '\n',
 '        Returns\n',
 '        -------\n',
 '        A string of code.\n',
 '\n',
 '        ValueError is raised if nothing is found, and TypeError if it evaluates\n',
 '        to an object of another type. In each case, .args[0] is a printable\n',
 '        message.\n',
 '        """"""\n',
 '        code = self.extract_input_lines(target, raw=raw)  # Grab history\n',
 '        if code:\n',
 '            return code\n',
 '        utarget = unquote_filename(target)\n',
 '        try:\n',
 ""            if utarget.startswith(('http://', 'https://')):\n"",
 '                return openpy.read_py_url(utarget, skip_encoding_cookie=skip_encoding_cookie)\n',
 '        except UnicodeDecodeError:\n',
 '            if not py_only :\n',
 '                from urllib import urlopen  # Deferred import\n',
 '                response = urlopen(target)\n',
 ""                return response.read().decode('latin1')\n"",
 '            raise ValueError((""\'%s\' seem to be un']
</code></pre>

<p>KABOOM ! Has anybody an explanation ? By the way, I use Python 2.7 with Enthought Canopy.</p>",python|file|python-2.7|canopy|writing,"<p>When you open a file with <code>'r+'</code>, it doesn't get truncated, it still retains its old contents. To truncate it to 0 bytes, call <code>fic.truncate(0)</code> right after opening it.</p>

<p>You must seek between read and write operations on the same file object (otherwise the results are undefined because of buffering), e.g. add a <code>fic.seek(0, 0)</code> (or any other seek) after the <code>write</code> call.</p>",0
50117751,Reading MONO 16-bit images using PyCapture2,"<p>I am using the <code>CMLN-13S2M-CS</code> camera from PointGrey. This camera has a MONO 16-bit pixel format.Using the <code>PyCapture2</code> wrapper from PointGrey I am unable to retrieve the image the camera is recording.</p>

<p>I have the following code:</p>

<pre><code>import sys
import numpy
import PyCapture2

## Connect camera
bus = PyCapture2.BusManager()
c = PyCapture2.Camera()
c.connect(bus.getCameraFromIndex(0))

## Configure camera format7 settings
fmt7imgSet = PyCapture2.Format7ImageSettings(0, 0, 0, 1296, 964, PyCapture2.PIXEL_FORMAT.MONO16)
fmt7pktInf, isValid = c.validateFormat7Settings(fmt7imgSet)
c.setFormat7ConfigurationPacket(fmt7pktInf.recommendedBytesPerPacket, fmt7imgSet)

## Start capture and retrieve buffer
c.startCapture()
im = c.retrieveBuffer()

print im.getData().shape
print numpy.max(im.getData())
</code></pre>

<p>The following is returned by the <code>print</code> statements: <code>(2498688,)</code> and <code>240</code>. The shape is exactly <code>2 x (964 x 1296)</code>. How should I reshape this? Also, the maximum value when saturated is <code>255</code>. This is odd as this corresponds to MONO 8 Pixel format. What am I doing wrong?</p>",python|numpy,"<p>Here's a quick demo that shows how to convert a 1D array of <code>uint8</code> to a 2D array of <code>uint16</code>. The key function we need here is <a href=""https://docs.scipy.org/doc/numpy-1.14.0/reference/generated/numpy.ndarray.view.html#numpy.ndarray.view"" rel=""nofollow noreferrer""><code>view</code></a>.</p>

<pre><code>import numpy as np

# Make 24 bytes of fake data
raw = np.arange(24, dtype=np.uint8)

#Convert
out = raw.view(np.uint16).reshape(3, 4)
print(out)
print(out.dtype)
</code></pre>

<p><strong>output</strong></p>

<pre><code>[[ 256  770 1284 1798]
 [2312 2826 3340 3854]
 [4368 4882 5396 5910]]
uint16
</code></pre>

<p>Thanks to Andras Deak for his assistance!</p>

<p>If the resulting image doesn't look correct, you may need to swap the byte ordering of the 16 bit integers. You can read about byte ordering in Numpy <a href=""https://docs.scipy.org/doc/numpy-1.13.0/user/basics.byteswapping.html"" rel=""nofollow noreferrer"">here</a>.</p>

<p>And if <em>that</em> still doesn't look correct, then the data may be organized as two planes, with one plane for the low-order bits of a pixel and the other plane for the high-order bits. That's also easy to deal with, but hopefully it won't come to that. ;)</p>",3
50182966,"Trying to pass 5 values of card to a function, not working","<p>So I am doing a card game and this game when you click deal_hand, it will deal a 5 hand card from my class Card() (just the values and display them). Then I'm suppose to average them out and display it (Divide by 5 and display). I'm not sure how to do this. Here is the Class card:</p>

<pre><code>    import random
class Card:
    def __init__(self):
        self.value = 0
        self.face_value = ''


def deal(self):
    self.set_value(random.randint(1,13))   



def set_value(self, value):
    self.value = value
    self.set_face_value()                                


def set_face_value(self):
     faces = {1: ""Ace"", 2: ""two"", 3: ""Three"",  4: ""Four"", 5: ""Five"", 6: ""Six"", 7: ""Seven"", 8: ""Eight"", 9: ""Nine"", 10: ""Ten"", 11: ""Jack"", 12: ""Queen"", 13: ""King""}
     self.face_value = faces[self.value]

def __str__(self):
    return self.face_value
</code></pre>

<p>main()</p>

<p>I haven't done the other function because I have no idea how to do it but it goes something like this: </p>

<pre><code>    def deal_hand():

        card1 = Card()
        card1.deal()


    for i in range(5):
        card1.deal()
        print(""Your 5 hand card is"")
        print(card1)
</code></pre>

<p>I can't get the program to display a hand of 5 cards. I'm sorry if this is hard to understand, but the program is suppose to display this:</p>

<pre><code>    The 5-card hand is: 
    Jack
    Three
    Queen
    Two
    Seven
</code></pre>

<p>How can I do this?</p>",python|python-3.x,"<p>Your indentation is not correct, give this a try.</p>

<p>Also move <code>print(""Your 5 hand card is"")</code> out of the for loop.</p>

<pre><code>import random

class Card:
    def __init__(self):
        self.value = 0
        self.face_value = ''    

    def deal(self):
        self.set_value(random.randint(1,13))    

    def set_value(self, value):
        self.value = value
        self.set_face_value()    

    def set_face_value(self):
         faces = {1: ""Ace"", 2: ""two"", 3: ""Three"", 4: ""Four"", 
             5: ""Five"", 6: ""Six"", 7: ""Seven"", 8: ""Eight"", 
             9: ""Nine"", 10: ""Ten"", 11: ""Jack"", 12: ""Queen"", 
             13: ""King""}
         self.face_value = faces[self.value]

    def __str__(self):
        return self.face_value


def deal_hand():    
    card1 = Card()
    card1.deal()    

    print(""Your 5 hand card is"")
    for i in range(5):
        card1.deal()
        print(card1)

deal_hand()
</code></pre>

<p>Output:</p>

<pre><code>Your 5 hand card is
Queen
King
Jack
Queen
Four
</code></pre>",0
50182966,"Trying to pass 5 values of card to a function, not working","<p>So I am doing a card game and this game when you click deal_hand, it will deal a 5 hand card from my class Card() (just the values and display them). Then I'm suppose to average them out and display it (Divide by 5 and display). I'm not sure how to do this. Here is the Class card:</p>

<pre><code>    import random
class Card:
    def __init__(self):
        self.value = 0
        self.face_value = ''


def deal(self):
    self.set_value(random.randint(1,13))   



def set_value(self, value):
    self.value = value
    self.set_face_value()                                


def set_face_value(self):
     faces = {1: ""Ace"", 2: ""two"", 3: ""Three"",  4: ""Four"", 5: ""Five"", 6: ""Six"", 7: ""Seven"", 8: ""Eight"", 9: ""Nine"", 10: ""Ten"", 11: ""Jack"", 12: ""Queen"", 13: ""King""}
     self.face_value = faces[self.value]

def __str__(self):
    return self.face_value
</code></pre>

<p>main()</p>

<p>I haven't done the other function because I have no idea how to do it but it goes something like this: </p>

<pre><code>    def deal_hand():

        card1 = Card()
        card1.deal()


    for i in range(5):
        card1.deal()
        print(""Your 5 hand card is"")
        print(card1)
</code></pre>

<p>I can't get the program to display a hand of 5 cards. I'm sorry if this is hard to understand, but the program is suppose to display this:</p>

<pre><code>    The 5-card hand is: 
    Jack
    Three
    Queen
    Two
    Seven
</code></pre>

<p>How can I do this?</p>",python|python-3.x,"<p>Another approach that is much nicer, is to use properties </p>

<pre><code>import random


class Card:
    def __init__(self):
        self.value = 0

    def shuffle(self):
        self.value = random.randint(1, 13)

    @property
    def face_value(self):
        faces = {1: ""Ace"", 2: ""two"", 3: ""Three"", 4: ""Four"",
                 5: ""Five"", 6: ""Six"", 7: ""Seven"", 8: ""Eight"",
                 9: ""Nine"", 10: ""Ten"", 11: ""Jack"", 12: ""Queen"",
                 13: ""King""}
        return faces[self.value]

    def __str__(self):
        return self.face_value


def deal_hand():
    card = Card()
    print(""Your 5 hand card is"")
    for i in range(5):
        card.shuffle()
        print(card)


deal_hand()
</code></pre>

<p>output:</p>

<pre><code>Your 5 hand card is
Seven
Eight
Ace
Seven
Ace
</code></pre>",0
50352386,Find the index value of first empty row in Data frame pandas,"<p>I am reading a sheet using pandas. After reading the sheet, I am getting an empty row between the values.</p>

<p>So, I need to find the index value of that row and delete all the rows below that, then make a new data-frame.</p>

<pre><code>from xlrd import open_workbook

import pandas as pd

from pandas import ExcelWriter

pathbook = open_workbook(""S:\\1. DIRECTORY MASTER\\FINANCIAL RESEARCH\\Data 
Initiative - PROJECTS\\Market Rollout\\""
                     ""Modified Files\\2016\\2016A-3032 - CA.xlsx"")
pathbook_sheet = pathbook.sheet_by_name(""1-Rollout"")

file = ""S:\\1. DIRECTORY MASTER\\FINANCIAL RESEARCH\\Data Initiative - 
PROJECTS\\Market Rollout\\"" \
   ""Modified Files\\2016\\2016A-3032 - CA.xlsx""

for rowidx in range(pathbook_sheet.nrows):
    row = pathbook_sheet.row(rowidx)
    for colidx, cell in enumerate(row):
        if cell.value == ""Canadian Market"":
            print(""Sheet Name:"", pathbook_sheet.name)
            print(""Row Number:"", rowidx)
            CADvalue = int(rowidx)
            CADvalue += 1

print(CADvalue)
reading_book = pd.read_excel(file, sheet_name=""1-Rollout"", 
skiprows=CADvalue, index_col=0).iloc[:12]

write = ExcelWriter(""Final"" + "".xlsx"")
reading_book.to_excel(write, 'Sheet1', index=False)
write.save()
</code></pre>

<p>The example output in the excel file i am getting</p>

<p><code>Sales            2016      2017    2018    2019    2020    2021
 Units Sold        0          0      0       4       14      37
 Unit Sale Price  1285      1285    1285    1285    1285    1285
 Unit Profit      4000      4000    4000    4000    4000    4000<br>
 Rest of the World Market</code></p>

<p>So there is an empty row between the last 3 rows</p>",python|python-3.x|pandas|dataframe,"<p>The solution depends on what empty means. If it is just an empty string, as in <code>''</code>, the code to find the index would be:</p>

<pre><code>empty = ''
idx_first_empty_row = reading_book.index[reading_book.iloc[:, 0] == empty][0]
</code></pre>

<p>This works if the first column is empty. If for example ""empty"" means <code>NaN</code>, then replace the line with:</p>

<pre><code>idx_first_empty_row = reading_book.index[np.isnan(reading_book.iloc[:, 0])]
</code></pre>

<p>This works if the <code>dtype</code> of the rows is any numeric numpy type, like <code>np.float64</code>.</p>

<p>If the <code>dtype</code> is not any numpy numeric type, try the following:</p>

<pre><code>idx_first_empty_row = np.where(reading_book.iloc[:, 0].isnull().values == True)
</code></pre>

<p>You can also, depending on the types of data in your rows, try this:</p>

<pre><code>idx_first_empty_row = reading_book.index[reading_book.iloc[:, 0].isnull().values]
</code></pre>",0
50352386,Find the index value of first empty row in Data frame pandas,"<p>I am reading a sheet using pandas. After reading the sheet, I am getting an empty row between the values.</p>

<p>So, I need to find the index value of that row and delete all the rows below that, then make a new data-frame.</p>

<pre><code>from xlrd import open_workbook

import pandas as pd

from pandas import ExcelWriter

pathbook = open_workbook(""S:\\1. DIRECTORY MASTER\\FINANCIAL RESEARCH\\Data 
Initiative - PROJECTS\\Market Rollout\\""
                     ""Modified Files\\2016\\2016A-3032 - CA.xlsx"")
pathbook_sheet = pathbook.sheet_by_name(""1-Rollout"")

file = ""S:\\1. DIRECTORY MASTER\\FINANCIAL RESEARCH\\Data Initiative - 
PROJECTS\\Market Rollout\\"" \
   ""Modified Files\\2016\\2016A-3032 - CA.xlsx""

for rowidx in range(pathbook_sheet.nrows):
    row = pathbook_sheet.row(rowidx)
    for colidx, cell in enumerate(row):
        if cell.value == ""Canadian Market"":
            print(""Sheet Name:"", pathbook_sheet.name)
            print(""Row Number:"", rowidx)
            CADvalue = int(rowidx)
            CADvalue += 1

print(CADvalue)
reading_book = pd.read_excel(file, sheet_name=""1-Rollout"", 
skiprows=CADvalue, index_col=0).iloc[:12]

write = ExcelWriter(""Final"" + "".xlsx"")
reading_book.to_excel(write, 'Sheet1', index=False)
write.save()
</code></pre>

<p>The example output in the excel file i am getting</p>

<p><code>Sales            2016      2017    2018    2019    2020    2021
 Units Sold        0          0      0       4       14      37
 Unit Sale Price  1285      1285    1285    1285    1285    1285
 Unit Profit      4000      4000    4000    4000    4000    4000<br>
 Rest of the World Market</code></p>

<p>So there is an empty row between the last 3 rows</p>",python|python-3.x|pandas|dataframe,"<pre><code>#First, find NaN entries in first column
blank_row_bool = reading_book.iloc[:,1].isna()
#Next, get index of first NaN entry
blank_row_index =  [i for i, x in enumerate(blank_row_bool) if x][0]
#Finally, restrict dataframe to rows before the first NaN entry
reading_book = reading_book.iloc[:(blank_row_index-1)]
</code></pre>

<p>Or, in a single line:</p>

<pre><code>reading_book = reading_book.iloc[:([i for i, x in 
enumerate(reading_book.iloc[:,1].isna()) if x][0]-1)]
</code></pre>",0
50495848,How to plot a dataframe using date as the x axis,"<p>I have a simple dataframe with two columns, 'date' and 'amount'. I want to plot the amount using date as the x-axis.  The first lines of the data are:</p>

<pre><code>22/05/2018,52068.67
21/05/2018,52159.19
15/05/2018,52744.03
08/05/2018,54666.21
08/05/2018,54677.51
01/05/2018,53890.59
30/04/2018,54812.25
27/04/2018,52258.23
26/04/2018,52351.47
23/04/2018,49777.04
23/04/2018,49952.44
23/04/2018,49992.44
05/04/2018,53238.59
03/04/2018,53631.09
03/04/2018,53839.64
28/03/2018,50836.78
26/03/2018,51206.67
26/03/2018,51372.02
14/03/2018,51110.17
12/03/2018,51411.31
06/03/2018,51169.91
05/03/2018,51374.57
27/02/2018,48728.85
27/02/2018,48730.5
16/02/2018,44988.25
14/02/2018,41948.03
12/02/2018,43776.31
12/02/2018,43800.31
12/02/2018,43840.11
05/02/2018,29358.96
26/01/2018,39491.0
24/01/2018,36470.03
23/01/2018,36562.76
23/01/2018,36616.61
22/01/2018,36582.46
22/01/2018,36665.71
22/01/2018,36743.31
17/01/2018,36965.3
16/01/2018,37044.6
09/01/2018,42083.65
08/01/2018,42183.39
05/01/2018,42285.41
03/01/2018,41537.51
03/01/2018,41579.51
02/01/2018,41945.32
27/12/2017,43003.33
27/12/2017,43217.29
18/12/2017,38208.63
15/12/2017,38315.53
</code></pre>

<p>However, the plot gives me points that don't appear in the data.  For example, in May 2018 there is no value near 30000.</p>

<p><a href=""https://i.stack.imgur.com/zz6Tt.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/zz6Tt.png"" alt=""enter image description here""></a></p>

<p>My code is:</p>

<pre><code>import pandas as pd
import matplotlib.pyplot as plt

df = pd.read_csv(""test.csv"", header=None, names =['date', 'amount'])
df['time'] = pd.to_datetime(df['date'])
df.set_index(['time'],inplace=True)
df['amount'].plot()
plt.show()
</code></pre>

<p>What am I doing wrong?</p>",python|pandas|matplotlib,"<p>You need to covert the dates to date time using correct format and use pandas plot</p>

<pre><code>df['date'] = pd.to_datetime(df['date'], format = '%d/%m/%Y')
df.plot('date', 'amount')
</code></pre>

<p><a href=""https://i.stack.imgur.com/nGItU.png"" rel=""noreferrer""><img src=""https://i.stack.imgur.com/nGItU.png"" alt=""enter image description here""></a></p>",5
58857525,Defining a 2D object and using its area as Boolean,"<p>I have defined two space dimesions ( x and z ) and I was able to manually ""draw"" an object to use it as a boolen for solving an equation. I defined it as it follows:</p>

<pre><code>A = np.zeros((nz,nx))
object = np.ones_like(A)
object[ int(5/dz):int(10/dz) , int(5/dx):int(10/dz) ] = 2
object = object == 2
</code></pre>

<p>By doing that I can define an square 5x10 in z dimesion and 5x10 in x dimesion , and apply the algorythim which understands this as an area , I think. But when it comes to draw complex areas it ends up being hard doing it by little squares and rectangles.</p>

<p>So I want to automatize an area generation by mouse clicking and I want to be able to use this area as a boolean.</p>

<p>I was able to draw a polygon using:</p>

<pre><code>import matplotlib.pyplot as plt
import numpy as np
from matplotlib.patches import Polygon

fig, ax = plt.subplots()

object = np.array(plt.ginput(n=-100,mouse_stop=2))
p = Polygon(object, alpha=0.5)
plt.gca().add_artist(p)


plt.draw()
plt.show()
</code></pre>

<p>But this outputs z and x coordinates of the vertices, and I tried to use it as boleean but I could'nt write it so that python uderstands it as the area defined by those points.</p>

<p>Is this problem easy to solve?</p>",python|boolean|area,"<p>If you just want to calculate the area of a general polygon, you can use for example the <a href=""https://pypi.org/project/Shapely/"" rel=""nofollow noreferrer"">Shapely</a> python package like this:</p>

<pre class=""lang-py prettyprint-override""><code>import numpy as np
import matplotlib.pyplot as plt
from shapely.ops import Polygon
from matplotlib.patches import Polygon as PltPolygon

# Get the coordinate input
canvas_size = np.array([1, 1])
canvas_lim = np.array([[0, canvas_size[0]], [0, canvas_size[1]]])
fig, ax = plt.subplots()
plt.xlim(canvas_lim[0])
plt.ylim(canvas_lim[1])
ax.set_aspect(""equal"")
coordinates = np.array(plt.ginput(n=-100, mouse_stop=2))

# Use shapely.ops.Polygon to calculate the area
poly = Polygon(coordinates)

area = poly.area
print(""The area is {} units^2"".format(area))

# Draw the polygon
p = PltPolygon(coordinates, alpha=0.5)
ax.add_artist(p)
plt.show()
</code></pre>

<p>If you definitely need the mask, here's one way to rasterize it using <code>numpy</code> and <code>matplotlib.path</code>. For details see the comments in the code:</p>

<pre class=""lang-py prettyprint-override""><code>import numpy as np
import matplotlib.path as mpltPath
import matplotlib.pyplot as plt

# Define the limits of our polygon
canvas_desired_size = np.array([110, 100])
# The pixel size with which we calculate (number of points to consider)
# The higher this number, the more we have to calculate, but the
# closer the approximation will be
pixel_size = 0.1

# Cacluate the actual size of the canvas
num_pxiels = np.ceil(canvas_desired_size / pixel_size).astype(int)
canvas_actual_size = num_pxiels * pixel_size

# Let's create a grid where each pixel's value is it's position in our 2d image
x_coords = np.linspace(
    start=0,
    stop=canvas_actual_size[0],
    endpoint=False,
    num=canvas_desired_size[0] / pixel_size,
)
y_coords = np.linspace(
    start=0,
    stop=canvas_actual_size[1],
    endpoint=False,
    num=canvas_desired_size[1] / pixel_size,
)
# Since it makes more sense to check if the middle of the pixel is in the
# polygion, we shift everything with half pixel size
pixel_offset = pixel_size / 2
x_centers = x_coords + pixel_offset
y_centers = y_coords + pixel_offset

xx, yy = np.meshgrid(x_centers, y_centers, indexing=""ij"")

# Flatten our xx and yy matrixes to an N * 2 array, which contains
# every point in our grid
pixel_centers = np.array(
    list(zip(xx.flatten(), yy.flatten())), dtype=np.dtype(""float64"")
)

# Now prompt for the imput shape
canvas_lim = np.array([[0, canvas_actual_size[0]], [0, canvas_actual_size[1]]])
fig, ax = plt.subplots()
plt.xlim(canvas_lim[0])
plt.ylim(canvas_lim[1])
ax.set_aspect(""equal"")
shape_points = np.array(plt.ginput(n=-100, mouse_stop=2))

# Create a Path object
shape = mpltPath.Path(shape_points)
# Use Path.contains_points to calculate if each point is
# within our shape
shape_contains = shape.contains_points(pixel_centers)

# Reshape the result to be a matrix again
mask = np.reshape(shape_contains, num_pxiels)

# Calculate area
print(
    ""The shape area is roughly {} units^2"".format(
        np.sum(shape_contains) * pixel_size ** 2
    )
)

# Show the rasterized shape to confirm it looks correct
plt.imshow(np.transpose(mask), aspect=""equal"", origin=""lower"")
plt.xlim([0, num_pxiels[0]])
plt.ylim([0, num_pxiels[1]])
plt.show()
</code></pre>

<p>Alternatively, a simpler solution would be <a href=""https://stackoverflow.com/questions/9622163/save-plot-to-image-file-instead-of-displaying-it-using-matplotlib"">using your plot as an image</a> and thresholding it to get a boolean mask. There should be plent of examples of how to do this on google.</p>",0
58958907,Producing binary matrix with random lists,"<p>so first of all here is my code I have questions about, I feel like the answer will be simple, but I am just too blind to see it </p>

<pre><code>dic = {}

for i in range(0,9):
    dic['rand_num{0}'.format(i)] = np.sort(random.sample(range(0,8),5))

mat = np.zeros([8,8])


for rand_num in dic.values():
    print(rand_num)
    for i in range(0,5):
        matrixval = rand_num[i]
        #print(matrixval)
        for j in range(0,8):
            mat[matrixval,j] = 1


print(mat)


</code></pre>

<p>I created 8 different lists which will help me determine, where to set a 1 in the matrix. </p>

<p>so eg. if my first list looks like this:</p>

<p>rand_List = [0,3,5,6,7] </p>

<p>the matrix of the first row or column should look like this  </p>

<p>matrix = [1, 0, 0, 1, 0, 1, 1, 1] </p>

<p>My position for the matrix value is set in the second loop: <code>for i in range(0,5): matrixval = rand_num[i]</code> . However, as soon I run my code, my matrix just gives me ones instead of ones and zeros. I feel like I have an iteration problem in my last for loop, and I don't know how to fix it.</p>

<p>If anyone could help me, or just give me a hint, how to actually solve this hopefully small mistake of mine, I would really appreciate it. </p>

<p>Best
Ali </p>",python|loops|matrix,"<p>Hopefully this provides the expected result:</p>

<pre><code>dic = {}

for i in range(0,8):
    dic['rand_num{0}'.format(i)] = np.sort(random.sample(range(0,8),5))

mat = np.zeros([8,8])

for j, rand_num in enumerate(dic.values()):
    print(rand_num)
    for i in range(0,5):
        matrixval = rand_num[i]
        mat[j,matrixval] = 1

print(mat)
</code></pre>

<p>Output:</p>

<pre><code>[1 2 3 5 7]
[0 1 2 5 6]
[0 1 2 3 5]
[1 2 3 4 6]
[0 1 3 4 7]
[1 2 4 5 7]
[0 1 3 4 7]
[1 2 3 4 6]
[[0. 1. 1. 1. 0. 1. 0. 1.]
 [1. 1. 1. 0. 0. 1. 1. 0.]
 [1. 1. 1. 1. 0. 1. 0. 0.]
 [0. 1. 1. 1. 1. 0. 1. 0.]
 [1. 1. 0. 1. 1. 0. 0. 1.]
 [0. 1. 1. 0. 1. 1. 0. 1.]
 [1. 1. 0. 1. 1. 0. 0. 1.]
 [0. 1. 1. 1. 1. 0. 1. 0.]]
</code></pre>",0
58958907,Producing binary matrix with random lists,"<p>so first of all here is my code I have questions about, I feel like the answer will be simple, but I am just too blind to see it </p>

<pre><code>dic = {}

for i in range(0,9):
    dic['rand_num{0}'.format(i)] = np.sort(random.sample(range(0,8),5))

mat = np.zeros([8,8])


for rand_num in dic.values():
    print(rand_num)
    for i in range(0,5):
        matrixval = rand_num[i]
        #print(matrixval)
        for j in range(0,8):
            mat[matrixval,j] = 1


print(mat)


</code></pre>

<p>I created 8 different lists which will help me determine, where to set a 1 in the matrix. </p>

<p>so eg. if my first list looks like this:</p>

<p>rand_List = [0,3,5,6,7] </p>

<p>the matrix of the first row or column should look like this  </p>

<p>matrix = [1, 0, 0, 1, 0, 1, 1, 1] </p>

<p>My position for the matrix value is set in the second loop: <code>for i in range(0,5): matrixval = rand_num[i]</code> . However, as soon I run my code, my matrix just gives me ones instead of ones and zeros. I feel like I have an iteration problem in my last for loop, and I don't know how to fix it.</p>

<p>If anyone could help me, or just give me a hint, how to actually solve this hopefully small mistake of mine, I would really appreciate it. </p>

<p>Best
Ali </p>",python|loops|matrix,"<p>The <code>dic</code> you are using is not needed. Here is a solution without it. </p>

<pre class=""lang-py prettyprint-override""><code>import random

lists = []
for i in range(0, 9):
    lists.append(sorted(random.sample(range(0, 8), 5)))

mat = []
for lst in lists:
    arr = [0] * 8

    for index in lst:
        arr[index] = 1

    mat.append(arr)

print(mat)
</code></pre>

<p>Outputs:</p>

<pre><code>[[0, 1, 1, 0, 0, 1, 1, 1],
 [1, 0, 1, 1, 0, 0, 1, 1],
 [1, 1, 1, 1, 0, 0, 0, 1],
 [0, 1, 1, 1, 0, 1, 1, 0],
 [1, 1, 0, 1, 1, 0, 1, 0],
 [1, 0, 1, 1, 0, 1, 1, 0],
 [0, 1, 1, 1, 1, 1, 0, 0],
 [0, 1, 1, 0, 1, 1, 1, 0],
 [1, 0, 1, 0, 1, 0, 1, 1]]
</code></pre>

<hr>

<p>You can also use <a href=""https://docs.scipy.org/doc/numpy-1.14.1/reference/generated/numpy.random.randint.html#numpy.random.randint"" rel=""nofollow noreferrer""><code>numpy.random.randint</code></a> to generate your binary 2d array.</p>

<pre class=""lang-py prettyprint-override""><code>import numpy as np

arr = np.random.randint(2, size=(8, 8))
print(arr)
</code></pre>

<p>Outputs:</p>

<pre><code>[[1 0 1 0 1 0 1 1]
 [0 0 0 0 1 0 1 1]
 [1 0 1 1 0 0 1 1]
 [1 1 0 1 0 1 1 0]
 [0 0 1 0 0 1 1 1]
 [1 0 0 0 1 1 1 1]
 [1 1 0 1 0 0 1 1]
 [1 0 1 0 0 1 0 0]]
</code></pre>",0
58787889,How to run previously created Django Project,"<p>I am new to Django. I am using Python 3.7 with Django 2.2.6.</p>

<p>My Django development environment is as the below.</p>

<ul>
<li>I am using Microsoft Visual Studio Code on a Windows 8.1 computer</li>
<li>To give the commands I am using 'DOS Command Prompt' &amp; 'Terminal window' in 
VS Code.</li>
<li>Created a virtual environment named myDjango</li>
<li>Created a project in the virtual environment named firstProject</li>
<li>Created an app named firstApp.</li>
</ul>

<p>At the first time I could run the project using >python manage.py runserver</p>

<p>Then I had to restart my computer.</p>

<ul>
<li>I was able to go inside the previously created virtual environment using<br>
workon myDjango command.</li>
</ul>

<p>But my problem is I don't know how to go inside the previously created project 'firstProject' and app 'firstApp' using the 'Command prompt' or using the 'VSCode Terminal window'</p>

<p>Thanks and regards,
Chiranthaka</p>",python|django|python-3.x,"<ul>
<li>Go to the directory where manage.py file of your Django project is present. It is normally the Base directory of your project.</li>
<li>In that directory, Press Shift and Right Click at the same time.</li>
<li>The from the Right Click Menu, Click on ""Open PowerShell window here"".</li>
<li>If you have previously frozen the dependencies, you should download them first through requirement.txt file using command:</li>
</ul>

<pre><code>    pip install -r requirements.txt
</code></pre>

<ul>
<li>Then run start server command in your PowerShell window.</li>
</ul>

<pre><code>    python manage.py runserver
</code></pre>

<ul>
<li>You will see output like this in PowerShell:</li>
</ul>

<pre><code>    Validating models...

    0 errors found
    November 10, 2019 - 17:36:02
    Django version 1.5, using settings 'my_django15_project.settings'
    Development server is running at http://127.0.0.1:8000/
    Quit the server with CONTROL-C.
</code></pre>

<ul>
<li>Open the address e.g in above case it is <a href=""http://127.0.0.1:8000/"" rel=""nofollow noreferrer"">http://127.0.0.1:8000/</a> in your browser, and you will be able to see your project.</li>
</ul>",0
58787889,How to run previously created Django Project,"<p>I am new to Django. I am using Python 3.7 with Django 2.2.6.</p>

<p>My Django development environment is as the below.</p>

<ul>
<li>I am using Microsoft Visual Studio Code on a Windows 8.1 computer</li>
<li>To give the commands I am using 'DOS Command Prompt' &amp; 'Terminal window' in 
VS Code.</li>
<li>Created a virtual environment named myDjango</li>
<li>Created a project in the virtual environment named firstProject</li>
<li>Created an app named firstApp.</li>
</ul>

<p>At the first time I could run the project using >python manage.py runserver</p>

<p>Then I had to restart my computer.</p>

<ul>
<li>I was able to go inside the previously created virtual environment using<br>
workon myDjango command.</li>
</ul>

<p>But my problem is I don't know how to go inside the previously created project 'firstProject' and app 'firstApp' using the 'Command prompt' or using the 'VSCode Terminal window'</p>

<p>Thanks and regards,
Chiranthaka</p>",python|django|python-3.x,"<p>Your concern is that you just have to guide your way into the correct folder using the command <code>cd</code>. As in this example: </p>

<pre><code>1. C:\Users\User: cd MainFolder
2. C:\Users\User\MainFolder: cd firstProject
3. C:\Users\User\MainFolder\firstProject: dir (or ls -la for linux, to list all files etc.)
   16-Apr-19  07:14    &lt;DIR&gt;          .
   16-Apr-19  07:14    &lt;DIR&gt;          ..
   15-Apr-19  21:50    &lt;DIR&gt;          .idea
   15-Apr-19  21:43           195,961 firstApp.py

Just a roughly tree structure below to show how it is visualized:

C:
|
|---Main folder
     |
     |---firstProject (if this is your folder)
           |
           |---firstApp (this is your app)
</code></pre>",0
58878148,Extracting images from camera video at predetermined intervals,"<p>I have the code to get images from the video stream of a laptop camera. I want to reduce the photo saving interval to one photo per minute. The original code looks like this</p>

<pre><code># Importing all necessary libraries 
import cv2 
import os 

# Read the video from specified path 
cam = cv2.VideoCapture(0) 

try: 

    # creating a folder named data 
    if not os.path.exists('data'): 
        os.makedirs('data') 

# if not created then raise error 
except OSError: 
    print ('Error: Creating directory of data') 

# frame 
currentframe = 0

while(True): 

    # reading from frame 
    ret,frame = cam.read() 

    if ret: 
        # if video is still left continue creating images 
        name = './data/frame' + str(currentframe) + '.jpg'
        print ('Creating...' + name) 

        # writing the extracted images 
        cv2.imwrite(name, frame) 

        # increasing counter so that it will 
        # show how many frames are created 
        currentframe += 1
    else: 
        break

# Release all space and windows once done 
cam.release() 
cv2.destroyAllWindows() 
</code></pre>

<p>For this task I try to use the parameter <code>CAP_PROP_POS_MSEC</code></p>

<pre><code>[...]
# Read the video from specified path 
cam = cv2.VideoCapture(0)
cam.set(cv2.CAP_PROP_POS_MSEC,20000)
[...]

while(True): 
[...]    
        # writing the extracted images 
        cv2.imwrite(name, frame)
        cv2.waitKey() 
[...]
</code></pre>

<p>But, the saving speed remains the same and I see the following error</p>

<blockquote>
  <p>videoio error v4l2 property pos_msec is not supported</p>
</blockquote>

<p>I use Ubuntu 18.04, Python 3.7, and OpenCV 4.1.</p>

<p>Where do I have a mistake, and whether I chose the right way to minimize the load on my computer's resources?</p>

<p><strong>UPD</strong></p>

<p>Using the recommendation of J.D. this code is working</p>

<pre><code>import cv2
import os

import time

prev_time = time.time()
delay = 1 # in seconds
# Read the video from specified path
cam = cv2.VideoCapture(0)
currentframe = 0

while (True):
    # reading from frame
    ret, frame = cam.read()
    if ret:
        if time.time() - prev_time &gt; delay:
            # if video is still left continue creating images
            name = './data/frame' + str(currentframe) + '.jpg'
            print('Creating...' + name)
            # writing the extracted images
            cv2.imwrite(name, frame)
            currentframe += 1
            prev_time = time.time()
    else:
        break
</code></pre>",python|opencv,"<p>you should read separately and set the values again for each image, like this:</p>

<pre><code>while(True): 
    cam = cv2.VideoCapture(0) 
    cam.set(cv2.CAP_PROP_POS_MSEC,20000)
    # reading from frame 
    ret,frame = cam.read()
    if ret: 
        # if video is still left continue creating images 
        name = './data/frame' + str(currentframe) + '.jpg'
        print ('Creating...' + name) 
        # writing the extracted images 
        cv2.imwrite(name, frame) 
        cv2.waitKey() 
        # increasing counter so that it will 
        # show how many frames are created 
        currentframe += 1        
    else: 
        break
    cam.release() 
</code></pre>

<p>and check your openCV version for python about the error.</p>",0
58878148,Extracting images from camera video at predetermined intervals,"<p>I have the code to get images from the video stream of a laptop camera. I want to reduce the photo saving interval to one photo per minute. The original code looks like this</p>

<pre><code># Importing all necessary libraries 
import cv2 
import os 

# Read the video from specified path 
cam = cv2.VideoCapture(0) 

try: 

    # creating a folder named data 
    if not os.path.exists('data'): 
        os.makedirs('data') 

# if not created then raise error 
except OSError: 
    print ('Error: Creating directory of data') 

# frame 
currentframe = 0

while(True): 

    # reading from frame 
    ret,frame = cam.read() 

    if ret: 
        # if video is still left continue creating images 
        name = './data/frame' + str(currentframe) + '.jpg'
        print ('Creating...' + name) 

        # writing the extracted images 
        cv2.imwrite(name, frame) 

        # increasing counter so that it will 
        # show how many frames are created 
        currentframe += 1
    else: 
        break

# Release all space and windows once done 
cam.release() 
cv2.destroyAllWindows() 
</code></pre>

<p>For this task I try to use the parameter <code>CAP_PROP_POS_MSEC</code></p>

<pre><code>[...]
# Read the video from specified path 
cam = cv2.VideoCapture(0)
cam.set(cv2.CAP_PROP_POS_MSEC,20000)
[...]

while(True): 
[...]    
        # writing the extracted images 
        cv2.imwrite(name, frame)
        cv2.waitKey() 
[...]
</code></pre>

<p>But, the saving speed remains the same and I see the following error</p>

<blockquote>
  <p>videoio error v4l2 property pos_msec is not supported</p>
</blockquote>

<p>I use Ubuntu 18.04, Python 3.7, and OpenCV 4.1.</p>

<p>Where do I have a mistake, and whether I chose the right way to minimize the load on my computer's resources?</p>

<p><strong>UPD</strong></p>

<p>Using the recommendation of J.D. this code is working</p>

<pre><code>import cv2
import os

import time

prev_time = time.time()
delay = 1 # in seconds
# Read the video from specified path
cam = cv2.VideoCapture(0)
currentframe = 0

while (True):
    # reading from frame
    ret, frame = cam.read()
    if ret:
        if time.time() - prev_time &gt; delay:
            # if video is still left continue creating images
            name = './data/frame' + str(currentframe) + '.jpg'
            print('Creating...' + name)
            # writing the extracted images
            cv2.imwrite(name, frame)
            currentframe += 1
            prev_time = time.time()
    else:
        break
</code></pre>",python|opencv,"<p><strong>EDIT:</strong> this answer is not a good solution - due to the frame buffer, as described in the comments. Because of the relevant information in the comments I will leave the answer.</p>

<p>If you don't plan to expand the code to do other things, you can just use the waitkey:</p>

<p><code>cv2.waitKey(60000)</code> will freeze code execution 60 secs.</p>

<p>If you want to expand the code, you have to create a time based loop:</p>

<pre><code>import time

prev_time = time.time()
count = 0
delay = 1 # in seconds

while True:
    if time.time()-prev_time &gt; delay:
        count += 1
        print(count)
        prev_time = time.time()
</code></pre>",1
28503628,Force rdflib to define a namespace,"<p>I am starting to use the <code>rdflib</code> library for dealing with rdf data in Python. At the moment, I want to create a <code>.n3</code> file of some rdf graph that looks like this:</p>

<pre class=""lang-none prettyprint-override""><code>@prefix ns1: &lt;http://some.namespace/with/name#&gt; .
@prefix ns2: &lt;http://second.namespace/some/name#&gt;
@prefix rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt; .
@prefix rdfs: &lt;http://www.w3.org/2000/01/rdf-schema#&gt; .
@prefix xml: &lt;http://www.w3.org/XML/1998/namespace&gt; .
@prefix xsd: &lt;http://www.w3.org/2001/XMLSchema#&gt; .

&lt;my_example&gt; ns1:annotated_with [ ns1:annotation
        ns2: annotation_value&gt; ] ;
    ns1:name ""myname"" .
</code></pre>

<p>That is, there is one example in this graph which is called <code>my_example</code>, which has a name ""myname"". This example is annotated with an object whose annotation value is <code>annotation value</code>. I wanted to construct this example in Python like so:</p>

<pre><code>import rdflib

gg=rdflib.graph.Graph()
ns1 = rdflib.Namespace('http://some.namespace/with/name#')
ns2 = rdflib.Namespace('http://second.namespace/some/name#')
u = rdflib.term.URIRef('my_example')
gg.add((u, ns1.name, rdflib.Literal('myname')))
blank = rdflib.BNode()
gg.add((u, ns1.annotated_with, blank))
gg.add((blank, ns1.annotation, ns2.annotation_value))

print gg.serialize(format='n3')
</code></pre>

<p>Which should, in my oppinion, produce the correct result, and, in a way, it does. The result of the code above is a <code>n3</code> string that looks like this:</p>

<pre class=""lang-none prettyprint-override""><code>@prefix ns1: &lt;http://some.namespace/with/name#&gt; .
@prefix rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt; .
@prefix rdfs: &lt;http://www.w3.org/2000/01/rdf-schema#&gt; .
@prefix xml: &lt;http://www.w3.org/XML/1998/namespace&gt; .
@prefix xsd: &lt;http://www.w3.org/2001/XMLSchema#&gt; .

&lt;my_example&gt; ns1:annotated_with [ ns1:annotation &lt;http://second.namespace/some/name#annotation_value&gt; ] ;
    ns1:name ""myname"" .
</code></pre>

<p>Which is close, but I don't understand why <code>rdflib</code> did not define, in the beginning of the file, the second namespace I am using. Is there a way to force it to do this?</p>",python|rdf|rdflib,"<p>The method <code>bind</code> is what I was looking for. It was used in the related question and is also useful here.</p>

<p>Adding the lines</p>

<pre><code>gg.bind('myprefix1', ns1)
gg.bind('myprefix2', ns1)
</code></pre>

<p>results in what I needed.</p>",2
33352877,Are the NetworkX minimum_cut algorithms correct with the following case?,"<p>I'm having a hard time trying to validate that the Python NetworkX library's max-flow min-cut algorithms work as expected (Edmonds-Karp, etc...). I don't know if I'm using it wrong or if my expectations on max-flow min-cut are mis-placed. Mostly I'm interested in how capacity (arc weights) affect the min-cut in larger graphs. e.g. influencing where cuts are made through arc weights.</p>

<p>The point of the capacity (arc weights) is a little lost on me. I've tried a cuople of different small graphs where all paths eventually converge on the target node, and in all cases the weight doesn't seem to really matter as the cut nodes/edges are always closest to the target node, where the smallest number of cuts applies. Maybe that's all this therom is trying to solve and I mis-understood its purpose.</p>

<p>Anyways, here's some code. The graph is super small and geared to playing with weights. </p>

<pre><code>import networkx as nx # NetworkX v1.10
...
#   &gt;a-&gt;e
#  /     \
# s-&gt;b-&gt;f-&gt;t
#  \     /
#   &gt;c-&gt;g
G = nx.DiGraph()
G.add_edge(""s"", ""a"", capacity=2)
G.add_edge(""s"", ""b"", capacity=2)
G.add_edge(""s"", ""c"", capacity=2)
G.add_edge(""a"", ""e"", capacity=2)
G.add_edge(""b"", ""f"", capacity=2)
G.add_edge(""c"", ""g"", capacity=4)
G.add_edge(""e"", ""t"", capacity=2)
G.add_edge(""f"", ""t"", capacity=2)
G.add_edge(""g"", ""t"", capacity=4)

cut_nodes = nx.algorithms.connectivity.minimum_node_cut(G, ""s"", ""t"")
print ""Cut nodes: "" + str(cut_nodes)
# Always produces cuts for e, f, g

cut_edges = nx.algorithms.connectivity.minimum_edge_cut(G, ""s"", ""t"")
print ""Cut edges: "" + str(cut_edges)
# Always produces cuts for e-&gt;t, f-&gt;t, g-&gt;t
</code></pre>

<p>This is enough to play with the capacity numbers. What I'm not sure about is if the capacity is supposed to make a difference. I understand that a cut will be made, as long as s can reach t. If I adjust the capacity so path s->a->e->t has a capacity higher or lower between s->a, the same cut edges/nodes are always concluded.</p>

<p>The reason I'm asking openly about this is with NetworkX 0.8.1 I tried using the same support but specified the capacity edge attribute to be ""weight"" instead. The API wouldn't use it, even though the documentation supported the alternative label to base capacity on.</p>

<p>If capacity is supposed to affect what is cut in a graph like above, then this might be a NetworkX issue. I don't know.</p>

<p>Thanks for any enlightenment in advance!</p>

<p><strong>Update</strong></p>

<p>Thanks to Abdallah-Sobehy for pointing out that the minimum_node_cut and minimum_edge_cut methods onyl care about node cardinality. The problem I had I guess is documentation for minimum_edge_st_cut might be in correct when it says ""NetworkX graph Edges of the graph are expected to have an attribute called 'capacity'. If this attribute is not present, the edge is considered to have infinite capacity""</p>

<p>Abdallah-Sobehy's code for determing the edge cuts works great. Another way to do it (referencing a bit of the NetworkX source) could be:</p>

<pre><code>cut_edges = set()
for u, cn in ((n, G[n]) for n in partitions[0]):
    cut_edges.update((u, v) for v in cn if v in partitions[1])
</code></pre>

<p>I also wanted to try and find the nodes to be cut from the cut_edges. My understanding is node cuts are different from edge cuts, because the problems aren't the same. Something like edge weight (capacity) doesn't really matter to a node cut in the same way. (you'd want some node weight and consider cardinality)</p>

<p>Anyways, on this problem I'm looking at simply counting the dependent node in a cut edge (e.g. (node1 -> node2) as the node to cut, with some special handling for cut edges where the source and target are involved. It might work for me, but I'm not sure yet.</p>

<p><strong>Update 2 (final probably)</strong></p>

<p>I thought I would toss in my cut nodes based on cut edges code just for laughs.</p>

<pre><code>cut_nodes = set()
for e in cut_edges:
    cut_nodes.update(e[1])
cut_st_nodes = set()
if s in cut_nodes or t in cut_nodes:
    for e in cut_edges:
        if e == (s, t):
            cut_st_nodes.update(t)
        elif e == (t, s):
            cut_st_nodes.update(t)
        elif t == e[1] or s == e[1]:
            cut_st_nodes.update(e[0])
cut_nodes -= set([s, t])
cut_nodes |= cut_st_nodes
</code></pre>

<p>The reasoning here, which might be wrong, is that all cut edges are directional and that the source node in the edge is dependent on the taret node in the edge, so removing the target node will reflect the edge cut. (e.g. n1 -> n2, n1 is dependent on n2, so remove n2) If this is true, then simply grabbing all target nodes from the cut edges will do, except if the graph source or target is involved. I have added cut_node_st to capture these type of cases where the source or target node is involved as an edge cut out bound target node. (e.g. n1 -> source, or n2 -> target) </p>

<p>I have cut_nodes_st separate from cut_nodes until the end because I only want s and t to appear in the cut_nodes when they're involved in those special cases.</p>

<p>Thoughts?</p>",python|graph|networkx,"<p>You are right in your conclusion that changing the 'capacity' does not affect the outcome of the minimum_edge_cut and minimum_node_cut functions. But I believe that it is not an issue in Networkx as according to the documentation, those functions try to find the minimum cut in terms of cardinality (that is the smallest number of nodes/edges that if removed there will be no path between source and sink nodes). So, changing the capacity does not matter.</p>

<p>But recently I have wanted to do what you are pointing at. And I found the answer to be in the <a href=""https://networkx.github.io/documentation/latest/reference/generated/networkx.algorithms.flow.minimum_cut.html"" rel=""nofollow"">minimum_cut</a> function, where the documentation uses the max-flow min-cut theory and says clearly that capacity (or whatever attribute you choose) is taken into consideration to partition the graph into 2 set of nodes (each including either the s or t) where the <strong>capacity of cutting edges</strong> is minimum. And here playing with capacities values would yield different results.</p>

<p>The function returns <strong>cut_value</strong> that is the total capacity of all cutting edges, as well as <strong>2 sets of nodes</strong> each of them is a partition that contains the ""s"" or the ""t"" from which you can easily compute the edge_cut.</p>

<p>To clarify more, I added this part to your code:</p>

<pre><code>cut_weight, partitions = nx.minimum_cut(G, ""s"", ""t"")
print ""cut edges capacity "" + str(cut_weight)
print ""Set of nodes in the 's' partition: "" + str(partitions[0])
print ""Set of nodes in the 't' partition: "" + str(partitions[1])
edge_cut_list = [] # Computed by listing edges between the 2 partitions
for p1_node in partitions[0]:
    for p2_node in partitions[1]:
        if G.has_edge(p1_node,p2_node):
            edge_cut_list.append((p1_node,p2_node))
print ""Edges of the cut: "" + str(edge_cut_list)
</code></pre>

<blockquote>
  <p>The output yielded a total edge cut capacity of 6 which is less than the cut computed by minimum_edge_cut 8 (because it does not take edges weight into consideration.</p>
</blockquote>

<pre><code>cut edges capacity 6
Set of nodes in the 's' partition: set(['a', 's', 'b', 'e', 'f'])
Set of nodes in the 't' partition: set(['c', 't', 'g'])
Edges of the cut: [('s', 'c'), ('e', 't'), ('f', 't')]
</code></pre>",3
25491872,request.get(url) returns empty content,"<p>I am trying to figure this out, but had no luck:</p>

<pre><code>import requests
r = requests.get('http://example.com/m7ppct4', allow_redirects=True)
</code></pre>

<p><code>r.status_code</code> returns <code>200</code>, and <code>r.content</code> returns <code>''</code>.</p>

<p><code>r.headers</code> returns the following dictionary:</p>

<pre><code>{'content-length': '0', 
 'content-language': 'en-US', 
 'x-powered-by': 'Servlet/3.0', 
 'set-cookie': '__cfduid=d4b3d47d43189ac72be14b1d2a2bed98a1408989649815; expires=Mon, 23-Dec-2019 23:50:00 GMT; path=/; domain=.azdoa.gov; HttpOnly, LWJSESSIONID=0000SESSIONMANAGEMENTAFFINI:18h1v85u3; Path=/; HttpOnly, NSC_batubufkpctWTTTM=ffffffff09f39f1545525d5f4f58455e445a4a42378b;expires=Mon, 25-Aug-2014 18:02:49 GMT;path=/;secure;httponly', 
 'expires': 'Thu, 01 Dec 1994 16:00:00 GMT', 
 'server': 'cloudflare-nginx', 
 'connection': 'keep-alive', 
 'x-ua-compatible': 'IE=EmulateIE9', 
 'cache-control': 'no-cache=""set-cookie, set-cookie2""', 
 'date': 'Mon, 25 Aug 2014 18:00:49 GMT', 
 'cf-ray': '15f9b0ff50cf0d6d-LAX', 
 'content-type': 'application/octet-stream'}
</code></pre>

<p>When I open the page in a browser, I clearly get content.</p>

<p>Any thoughts on how I can proceed debugging this? I would like to get the page content with a <code>requests.get()</code> call.</p>",python|python-requests,"<p>You must send any user agent:</p>

<pre><code>import requests
r = requests.get('http://example.com/m7ppct4',  headers={'User-Agent':'test'})
</code></pre>",8
25491872,request.get(url) returns empty content,"<p>I am trying to figure this out, but had no luck:</p>

<pre><code>import requests
r = requests.get('http://example.com/m7ppct4', allow_redirects=True)
</code></pre>

<p><code>r.status_code</code> returns <code>200</code>, and <code>r.content</code> returns <code>''</code>.</p>

<p><code>r.headers</code> returns the following dictionary:</p>

<pre><code>{'content-length': '0', 
 'content-language': 'en-US', 
 'x-powered-by': 'Servlet/3.0', 
 'set-cookie': '__cfduid=d4b3d47d43189ac72be14b1d2a2bed98a1408989649815; expires=Mon, 23-Dec-2019 23:50:00 GMT; path=/; domain=.azdoa.gov; HttpOnly, LWJSESSIONID=0000SESSIONMANAGEMENTAFFINI:18h1v85u3; Path=/; HttpOnly, NSC_batubufkpctWTTTM=ffffffff09f39f1545525d5f4f58455e445a4a42378b;expires=Mon, 25-Aug-2014 18:02:49 GMT;path=/;secure;httponly', 
 'expires': 'Thu, 01 Dec 1994 16:00:00 GMT', 
 'server': 'cloudflare-nginx', 
 'connection': 'keep-alive', 
 'x-ua-compatible': 'IE=EmulateIE9', 
 'cache-control': 'no-cache=""set-cookie, set-cookie2""', 
 'date': 'Mon, 25 Aug 2014 18:00:49 GMT', 
 'cf-ray': '15f9b0ff50cf0d6d-LAX', 
 'content-type': 'application/octet-stream'}
</code></pre>

<p>When I open the page in a browser, I clearly get content.</p>

<p>Any thoughts on how I can proceed debugging this? I would like to get the page content with a <code>requests.get()</code> call.</p>",python|python-requests,"<p>It looks like the website linked by tinyurl (azstatejobs) filters requests based on user-agents. Spoofing the Chrome user-agent worked for me:</p>

<pre><code>import requests
url = 'http://tinyurl.com/m7ppct4'
user_agent = 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/36.0.1985.143 Safari/537.36'
headers = {'User-Agent': user_agent}
r = requests.get(url, headers=headers)
</code></pre>

<p>(<code>allow_redirect</code> is true by default)</p>

<p>You might want to try different user-agents and see what makes that website not like the python requests user-agent.</p>",9
25491872,request.get(url) returns empty content,"<p>I am trying to figure this out, but had no luck:</p>

<pre><code>import requests
r = requests.get('http://example.com/m7ppct4', allow_redirects=True)
</code></pre>

<p><code>r.status_code</code> returns <code>200</code>, and <code>r.content</code> returns <code>''</code>.</p>

<p><code>r.headers</code> returns the following dictionary:</p>

<pre><code>{'content-length': '0', 
 'content-language': 'en-US', 
 'x-powered-by': 'Servlet/3.0', 
 'set-cookie': '__cfduid=d4b3d47d43189ac72be14b1d2a2bed98a1408989649815; expires=Mon, 23-Dec-2019 23:50:00 GMT; path=/; domain=.azdoa.gov; HttpOnly, LWJSESSIONID=0000SESSIONMANAGEMENTAFFINI:18h1v85u3; Path=/; HttpOnly, NSC_batubufkpctWTTTM=ffffffff09f39f1545525d5f4f58455e445a4a42378b;expires=Mon, 25-Aug-2014 18:02:49 GMT;path=/;secure;httponly', 
 'expires': 'Thu, 01 Dec 1994 16:00:00 GMT', 
 'server': 'cloudflare-nginx', 
 'connection': 'keep-alive', 
 'x-ua-compatible': 'IE=EmulateIE9', 
 'cache-control': 'no-cache=""set-cookie, set-cookie2""', 
 'date': 'Mon, 25 Aug 2014 18:00:49 GMT', 
 'cf-ray': '15f9b0ff50cf0d6d-LAX', 
 'content-type': 'application/octet-stream'}
</code></pre>

<p>When I open the page in a browser, I clearly get content.</p>

<p>Any thoughts on how I can proceed debugging this? I would like to get the page content with a <code>requests.get()</code> call.</p>",python|python-requests,"<pre><code>import requests
import json
import pprint


r = requests.get('URL')
pprint.pprint(json.loads(r.content))
</code></pre>",1
25672738,Python Counter Comparison as Bag-type,"<p>I need a bag/multiset-like data type in Python. I understand collections.Counter is often used for this purpose. But the comparison operators don't seem to work:</p>

<pre><code>In [1]: from collections import Counter

In [2]: bag1 = Counter(a=1, b=2, c=3)

In [3]: bag2 = Counter(a=2, b=2)

In [4]: bag1 &gt; bag2
Out[4]: True
</code></pre>

<p>This seems like a bug to me. I expected the less-than and greater-than operators to perform set-like subset and superset comparisons. But if that were the case then <code>bag1 &gt; bag2</code> would be false because <code>bag2</code> contains an extra <code>'a'</code>. There also don't seem to be subset/superset methods on Counter objects. So I have two questions:</p>

<ol>
<li>What comparison logic is used for Counter objects?</li>
<li>How can I compare Counter objects for subset, superset, proper-subset, and proper-superset?</li>
</ol>",python|comparison|multiset|python-collections,"<p>This unanswered question is of interest:</p>

<blockquote>
  <p>How can I compare Counter objects for subset, superset, proper-subset, and proper-superset?</p>
</blockquote>

<p>By defining the missing “rich comparison methods"". You could also use free functions instead, which will make client code more explicit.</p>

<pre><code>from collections import Counter

class PartiallyOrderedCounter(Counter):

    def __le__(self, other):
        """""" Multiset inclusion """"""
        return all( v &lt;= other[k] for k,v in self.items() )


    def __lt__(self, other):
        """""" Multiset strict inclusion """"""
        return self &lt;= other and self != other


    # TODO : __ge__ and __gt__
    # Beware : they CANNOT be written in terms of __le__ or __lt__


a = PartiallyOrderedCounter('abc')
b = PartiallyOrderedCounter('ab')
c = PartiallyOrderedCounter('abe')

assert a &lt;= a
assert not a &lt; a    
assert b &lt;= a
assert b &lt; a
assert not a &lt; b    
assert not c &lt;= a
assert not a &lt;= c
</code></pre>",0
25672738,Python Counter Comparison as Bag-type,"<p>I need a bag/multiset-like data type in Python. I understand collections.Counter is often used for this purpose. But the comparison operators don't seem to work:</p>

<pre><code>In [1]: from collections import Counter

In [2]: bag1 = Counter(a=1, b=2, c=3)

In [3]: bag2 = Counter(a=2, b=2)

In [4]: bag1 &gt; bag2
Out[4]: True
</code></pre>

<p>This seems like a bug to me. I expected the less-than and greater-than operators to perform set-like subset and superset comparisons. But if that were the case then <code>bag1 &gt; bag2</code> would be false because <code>bag2</code> contains an extra <code>'a'</code>. There also don't seem to be subset/superset methods on Counter objects. So I have two questions:</p>

<ol>
<li>What comparison logic is used for Counter objects?</li>
<li>How can I compare Counter objects for subset, superset, proper-subset, and proper-superset?</li>
</ol>",python|comparison|multiset|python-collections,"<p>On Python 2, the comparison falls back to the <a href=""https://docs.python.org/2/reference/expressions.html#not-in"" rel=""nofollow"">default sort order for dictionaries</a> (<code>Counter</code> is a subclass of <code>dict</code>).</p>

<blockquote>
  <p>Mappings (dictionaries) compare equal if and only if their sorted
  (key, value) lists compare equal. [5] Outcomes other than equality are
  resolved consistently, but are not otherwise defined. [6]</p>
</blockquote>

<p>On Python 3, <a href=""https://docs.python.org/3/reference/expressions.html#not-in"" rel=""nofollow"">the comparison raises a <code>TypeError</code></a>:</p>

<blockquote>
  <p>Mappings (dictionaries) compare equal if and only if they have the
  same (key, value) pairs. Order comparisons ('&lt;', '&lt;=', '>=', '>')
  raise <code>TypeError</code>.</p>
</blockquote>",1
25808652,python autoclicker - random time interval,"<p>I have this autoclicker and it works so far.</p>

<p>Most autoclickers have a set time, click every second, every 2 seconds, etc. </p>

<p>I need this program to generate a random time (preferably between .75 and 1.25 seconds).</p>

<p>Anyone have any ideas as to how I could do this? </p>

<p>So my goal is to create an autoclicker that clicks in random time intervals instead of after a set amount of time. </p>

<p>Below is the code I have so far.</p>

<pre><code>import win32api, win32con
import time

def click(x,y):

    win32api.SetCursorPos((x,y))
    win32api.mouse_event(win32con.MOUSEEVENTF_LEFTDOWN,x,y,0,0)
    win32api.mouse_event(win32con.MOUSEEVENTF_LEFTUP,x,y,0,0)

x = 0

while (x &lt; 5):
    a, b = win32api.GetCursorPos()
    click(a, b)
    x = x + 1
</code></pre>",python|click|pywin32,"<p>In the <code>while</code> loop add the line <code>time.sleep(0.75 + 0.5*random.random())</code>.</p>

<p>And add <code>import random</code> at the top.</p>",1
31900892,Why is 'a' in ('abc') True while 'a' in ['abc'] is False?,"<p>When using the interpreter, the expression <code>'a' in ('abc')</code> returns True, while <code>'a' in ['abc']</code> returns False. Can somebody explain this behaviour?</p>",python,"<p>As others has mentioned, <code>('abc')</code> is not a tuple.  <code>'a'</code> is not a element of <code>['abc']</code>. The only element in that list is <code>'abc'</code></p>

<pre><code>x='abc' in ['abc']

print (x)

True #This will evaluate to true
</code></pre>

<p>This will also evaluate to true:</p>

<pre><code>y = 'a' in ['a','b','c']

print (y)

True
</code></pre>",2
31900892,Why is 'a' in ('abc') True while 'a' in ['abc'] is False?,"<p>When using the interpreter, the expression <code>'a' in ('abc')</code> returns True, while <code>'a' in ['abc']</code> returns False. Can somebody explain this behaviour?</p>",python,"<p>For <code>('abc')</code> you get 'a' in <code>('abc')</code> return true.</p>

<p>But for <code>['abc']</code> as it is a array list you get 'a' in <code>['abc']</code> return false.</p>

<p><strong>Example:</strong></p>

<p><em>Input:</em> <code>('abc') == 'abc'</code></p>

<p><em>Output:</em> <code>True</code></p>

<p>So if we call 'a' in ('abc') it is same as 'a' in 'abc' because ('abc') is not a tuple but 'abc' is a array of character where character 'a' is in index 0 of string 'abc'. </p>

<p>On the other hand ['abc'] is array list where 'abc' is a single string which is at index 0 of array ['abc'].</p>

<p><strong>Tupple Example:</strong> <em><code>x = ('abc', 'def', 'mnop')</code></em></p>

<p><strong>Array Example:</strong> <em><code>x = ['abc', 'def', 'mnop']</code></em></p>

<p>or </p>

<pre><code>x = ('abc'), y = 'abc'
</code></pre>

<p>Here always <code>x == y</code>.</p>

<p>But in case of <code>'a' in ['abc']</code> =></p>

<pre><code>x = ['abc'], y = 'abc'
</code></pre>

<p>Here <code>x != y</code> but <code>x[0] == y</code> </p>",3
31900892,Why is 'a' in ('abc') True while 'a' in ['abc'] is False?,"<p>When using the interpreter, the expression <code>'a' in ('abc')</code> returns True, while <code>'a' in ['abc']</code> returns False. Can somebody explain this behaviour?</p>",python,"<p><code>('abc')</code> is the same as <code>'abc'</code>. <code>'abc'</code> contains the substring <code>'a'</code>, hence <code>'a' in 'abc' == True</code>.</p>

<p>If you want the tuple instead, you need to write <code>('abc', )</code>.</p>

<p><code>['abc']</code> is a list (containing a single element, the string <code>'abc'</code>). <code>'a'</code> is not a member of this list, so <code>'a' in ['abc'] == False</code></p>",135
31900892,Why is 'a' in ('abc') True while 'a' in ['abc'] is False?,"<p>When using the interpreter, the expression <code>'a' in ('abc')</code> returns True, while <code>'a' in ['abc']</code> returns False. Can somebody explain this behaviour?</p>",python,"<p><code>('abc')</code> is equivalent to <code>'abc'</code>.</p>

<p><code>'a' in ('abc')</code> is equivalent to <code>'a' in 'abc'</code>.</p>

<p><code>'a' in ('abc', )</code> returns <code>False</code> as <code>'a' in ['abc']</code>.</p>

<p><code>'a' in ['a', 'b', 'c']</code> returns <code>True</code> as <code>'a' in 'abc'</code>.</p>",0
31900892,Why is 'a' in ('abc') True while 'a' in ['abc'] is False?,"<p>When using the interpreter, the expression <code>'a' in ('abc')</code> returns True, while <code>'a' in ['abc']</code> returns False. Can somebody explain this behaviour?</p>",python,"<p><code>('abc')</code> is not a tuple. I think you confused that with  tuple <code>('abc',)</code>. </p>

<p>Actually, <code>('abc')</code> is same as <code>'abc'</code>, an <code>array of characters</code> where <code>a</code> as character is in it, hence, the first lookup returns <code>True</code>:</p>

<pre><code>&gt;&gt;&gt; 'a' in 'abc'
True
</code></pre>

<p>On the other hand, <code>['abc']</code> is a list of string or a list of list of characters <em>(you can think of it as a 2-d matrix of characters <code>[['a', 'b', 'c']]</code>)</em> where <code>a</code>, as a single character, is not the member of the outer list. In fact, it is the first character of the inner list:</p>

<pre><code>&gt;&gt;&gt; 'a' in ['abc']
False

&gt;&gt;&gt; 'a' in ['abc'][0]
True

&gt;&gt;&gt; 'a' == ['abc'][0][0]
True
</code></pre>",49
31833610,.dat file in python,"<p>I'am doing a project in python using OpenCV. I have to store a large amount of integer data(features of images in the database) in a separate file. I can use .txt file but it stores integer values as strings. 
Is there any way that I can store integer values directly as integers in python like .dat file in MATLAB.?</p>",python|matlab|opencv,"<p>You can use <a href=""https://docs.python.org/3/library/struct.html"" rel=""nofollow"">struct</a> to pack the integers in a bytes format and write them to a dat file.</p>

<p>With integers, this will result in a file that contains 4 bytes per integer, which would save a bit of space (over text format) if you have very large numbers. If you have smaller numbers, a csv format may be better.</p>

<pre><code>import struct

data = [1,2,3,4,5,6,7,8,9]

with open('data.dat', 'wb') as data_file:
    data_file.write(struct.pack('i'*len(data), *data))
</code></pre>

<p>Then to read it back in</p>

<pre><code>with open('data.dat', 'rb') as data_file:
    values = struct.unpack('i'*len(data), data_file.read())
</code></pre>",0
30937589,python sorting deep in objects,"<p>I need some help with sorting in python. 
I got a data object, in this objects are lists and I like to sort the data for a specific list item. Currently I print it out like this:</p>

<pre><code> for item in data:
     for proj in item:
         print proj.get('id')
</code></pre>

<p>So I want this data already sorted by the 'id' item.</p>

<p>This is how the data object looks like, if I print it:</p>

<pre><code>[[{u'archived': False, u'name': u'someone', u'num_files': 0, u'managed_by': {u'username': u'somebody', u'role': u'somerole', u'email_address': u'me@somewhere', u'id': u'307', u'name': u'firstname lastname'}, u'updated_on': u'2015-06-18 17:55:39', u'id': 23}, 
{u'archived': False, u'name': u'someoneelse', u'num_files': 0, u'managed_by': {u'username': u'somebody else', u'role': u'somerole', u'email_address': u'you@somewhere', u'id': u'341', u'name': u'Firstname Lastname'}, u'updated_on': u'2015-06-09 17:38:52', u'id': 48}]]
</code></pre>

<p>Just two lists from the whole, but I like to sort for the last id, in this example 23 and 48</p>",python|sorting,"<p>Try this:</p>

<pre><code>import numpy as np
data_new = np.array(data).flatten()
sorted_list = sorted(data_new, key=lambda x: x['id'])
</code></pre>

<p>First line will create one list of dict. Second will sort them by 'id' key.
After that you could print it like you want:</p>

<pre><code>for i in sorted_list:
    print(i['id'])
</code></pre>

<p><strong>Edit:</strong>
Because your list could contain sublists of different sizes (like <a href=""https://stackoverflow.com/questions/15366053/flatten-a-nested-list-of-variable-sized-sublists-into-a-scipy-array"">here</a>) this will broke ndarray.flatten or numpy.ravel, also because your elements are dictionaries np.fromiter will unworkable too. So you should change second line to this: </p>

<pre><code>data_new = np.hstack(data)
</code></pre>",1
30937589,python sorting deep in objects,"<p>I need some help with sorting in python. 
I got a data object, in this objects are lists and I like to sort the data for a specific list item. Currently I print it out like this:</p>

<pre><code> for item in data:
     for proj in item:
         print proj.get('id')
</code></pre>

<p>So I want this data already sorted by the 'id' item.</p>

<p>This is how the data object looks like, if I print it:</p>

<pre><code>[[{u'archived': False, u'name': u'someone', u'num_files': 0, u'managed_by': {u'username': u'somebody', u'role': u'somerole', u'email_address': u'me@somewhere', u'id': u'307', u'name': u'firstname lastname'}, u'updated_on': u'2015-06-18 17:55:39', u'id': 23}, 
{u'archived': False, u'name': u'someoneelse', u'num_files': 0, u'managed_by': {u'username': u'somebody else', u'role': u'somerole', u'email_address': u'you@somewhere', u'id': u'341', u'name': u'Firstname Lastname'}, u'updated_on': u'2015-06-09 17:38:52', u'id': 48}]]
</code></pre>

<p>Just two lists from the whole, but I like to sort for the last id, in this example 23 and 48</p>",python|sorting,"<p>I did a mistake, I used .append with my list to add more entries, instead I should have used .extend
Now my list is not that deep anymore and it's all way much easier:</p>

<pre><code>sorted_list = sorted(data, key=lambda x: x['id'])
for item in sorted_list:
    print str(item.get('id')) + "" : "" + item.get('name')
</code></pre>

<p>But thanks for the numpy tip, I think that would be helpful if I reall would search deeper in the objects sublist etc. </p>",1
30722591,Python: Array subtract Matrix - TypeError: unsupported operand type(s) for -: 'int' and 'list',"<p>I have code below that help me to use array minus matrix but the system return error at this line <code>union = total - zero</code>. <code>zero</code> is actually the count of intersection. If I put a comment # in front of <code>union=total-zero</code> I can manually get my answer in python window by typing <code>total - zero</code>. <code>total</code> and <code>zero</code> are array in this case.</p>

<pre><code>import numpy as np
import itertools
from numpy import matrix,ones
from itertools import product,chain,combinations,permutations,izip
from collections import Counter

####################################################################

def diffs(a,b):
    # collect sliding window differences
    # length of window determined by the shorter array
    # if a,b are not arrays, need to replace b[...]-a with
    # a list comprehension
    n,m=len(a),len(b)
    if n&gt;m:
        # ensure s is the shorter
        b,a=a,b # switch
        n,m=len(a),len(b)
        # may need to correct for sign switch
    result=[]
    for i in range(0,1+m-n):
        result.append(b[i:i+n]-a)
    return result

###################################################################

def alldiffs(a,b):
    # collect all the differences for elements of a and b
    # a,b could be lists or arrays of arrays, or 2d arrays
    result=[]
    for aa in a:
        for bb in b:
            result.append(diffs(aa,bb))
    return result

###################################################################

def count_total(a,b):
    #count the total number of element for two arrays in different list
    #return [sum(map(len, i)) for i in product(a, b)]
    y= lambda x:len(x)
    result=[]
    for a1 in a:
        for b1 in b:
            result.append(y(a1) + y(b1))
    return result

##################################################################

def count_zero(obj):
    #count the total number of zero for two arrays in different list
    if isinstance(obj,list):
        return list(map(count_zero,obj))
    else:
        return Counter(obj)[0]

# define the 3 arrays
# each is a list of 1d arrays

a=[np.array([2,2,1,2]),np.array([1,3])]
b=[np.array([4,2,1])]
c=[np.array([1,2]),np.array([4,3])]

comb_set = list(itertools.combinations([a,b,c],2))
for i, j in itertools.combinations([a,b,c],2):
    all_diffs = alldiffs(i,j)
    total = count_total(i,j)
    zero = count_zero(all_diffs)
    total = np.array(total)
    total = total[: np.newaxis]  
    zero = np.array(zero)
    union = total-zero
</code></pre>

<p>Can anyone help me?</p>",python|arrays|numpy|matrix,"<blockquote>
  <p>I can manually get my answer in python window by typing total - zero.</p>
</blockquote>

<p>This works, because at that point, you use the <em>last</em> <code>total</code> and <code>zero</code>.</p>

<p>If you print out <code>i</code> and <code>j</code> inside the loop (or examine <code>comb_set</code> carefully), you'll find that <code>j</code> varies from a list with 1 element (an <code>np.ndarray</code>) to a 2-element list and back again to a 1-element list in the last iteration. The 1 element lists don't cause the error, but the 2-element list does. </p>

<p>This is obviously a result from your differently sized input lists <code>a</code>, <code>b</code> and <code>c</code>. You may need to think how to handle <code>a</code>, <code>b</code> and <code>c</code> (and their combinations) differently.</p>",1
58972235,How to write a nested switch case in python?,"<p>Is that even possible?</p>

<p>What I know so far:</p>

<p>Python hasn't switch case but they have something called dictionary mapping.</p>

<pre><code>def fun1():print(""fun1"")
def fun2():print(""fun2"")
def fun3():print(""fun3"")

def WannaBeSwitch(arg):
    switch = {
        0: fun1,
        1: fun2,
        2: fun3
    }
    return switch.get(arg, ""blabla"")

if __name__ == ""__main__"":
    argument = 1
    call_func = WannaBeSwitch(argument)
    call_func()
</code></pre>",python-3.x|switch-statement,"<p>I do not know what exactly you mean by <em>nested switch case</em>, but if I have gotten it right, there is no problem with using dictionary mapping inside the helpers functions. I mean something like this is possible, using your example as demonstration:</p>

<pre><code>def fun1_1():print(""fun1_1"")
def fun1_2():print(""fun1_2"")
def fun1_3():print(""fun1_3"")

def fun1(arg):
    switch = {
        0: fun1_1,
        1: fun1_2,
        2: fun1_3
    }
    return switch.get(arg, ""blabla"")

def fun2_1():print(""fun2_1"")
def fun2_2():print(""fun2_2"")
def fun2_3():print(""fun2_3"")

def fun2(arg):
    switch = {
        0: fun2_1,
        1: fun2_2,
        2: fun2_3
    }
    return switch.get(arg, ""blabla"")

def fun3_1():print(""fun3_1"")
def fun3_2():print(""fun3_2"")
def fun3_3():print(""fun3_3"")

def fun3(arg):
    switch = {
        0: fun3_1,
        1: fun3_2,
        2: fun3_3
    }
    return switch.get(arg, ""blabla"")

def WannaBeSwitch(arg):
    switch = {
        0: fun1,
        1: fun2,
        2: fun3
    }
    return switch.get(arg, ""blabla"")

if __name__ == ""__main__"":
    argument1 = 1
    argument2 = 1
    call_func = WannaBeSwitch(argument1)(argument2)
    call_func()
</code></pre>

<p>Nevertheless, it does not look very readable... Maybe if you write what exactly do you want to do with it and how do you imagine you would use it, I could give you more helpful answer.</p>",-1
58971463,Why list comparision in python does value comparision instead of reference comparision?,"<p>I have created 2 lists, one which list comprehension and other using iteration. The second list started as an empty list, so it must have a different location in memory. So, <code>==</code> should return <code>False</code>, but it returns <code>True</code>. 
Notice that the memory location is different(2nd print call):</p>

<pre><code>my_list = [x*2 for x in range(1, 10, 1)]
new_list = []
for item in range(1, 10, 1):
    new_list.append(item * 2)

print(my_list == new_list) # True 
print(hex(id(my_list)) == hex(id(new_list))) #False
</code></pre>

<p>Please explain why this is?</p>",python|python-3.x|list,"<p>Simply because those are the semantics of Python's list comparisons with the <code>==</code> operator.</p>

<p>If you do want reference comparison, use the <code>is</code> operator – in general, you never do want reference comparison though.</p>",2
58946738,scikit-learn not importing in jupyter notebook,"<p>I installed scikit-learn both using pip and conda commandas. Whenever I check the package, it shows that it is already installed but, whenever I try import it, it shows error.</p>

<pre><code>import pandas as pd
import numpy as np
import matplotlib.pyplot as plt
import seaborn as sns
from sklearn.model_selection import train_test_split
%matplotlib inline
</code></pre>

<p>ERROR:</p>

<pre><code>---------------------------------------------------------------------------
ModuleNotFoundError                       Traceback (most recent call last)
&lt;ipython-input-33-82d3fc6531ea&gt; in &lt;module&gt;
      3 import matplotlib.pyplot as plt
      4 import seaborn as sns
----&gt; 5 from sklearn.model_selection import train_test_split
      6 get_ipython().run_line_magic('matplotlib', 'inline')

ModuleNotFoundError: No module named 'sklearn'
</code></pre>

<p>I have tried reinstalling it multiple times but it shows the same error</p>",python|python-3.x|machine-learning|scikit-learn|linear-regression,"<p>I think you don't have latest version of sklearn because in old version of sklearn 
below code was not working.</p>

<pre><code>from sklearn.model_selection import train_test_split
</code></pre>

<p>Please update your sklearn by following command</p>

<pre><code>conda update scikit-learn
</code></pre>",0
58946738,scikit-learn not importing in jupyter notebook,"<p>I installed scikit-learn both using pip and conda commandas. Whenever I check the package, it shows that it is already installed but, whenever I try import it, it shows error.</p>

<pre><code>import pandas as pd
import numpy as np
import matplotlib.pyplot as plt
import seaborn as sns
from sklearn.model_selection import train_test_split
%matplotlib inline
</code></pre>

<p>ERROR:</p>

<pre><code>---------------------------------------------------------------------------
ModuleNotFoundError                       Traceback (most recent call last)
&lt;ipython-input-33-82d3fc6531ea&gt; in &lt;module&gt;
      3 import matplotlib.pyplot as plt
      4 import seaborn as sns
----&gt; 5 from sklearn.model_selection import train_test_split
      6 get_ipython().run_line_magic('matplotlib', 'inline')

ModuleNotFoundError: No module named 'sklearn'
</code></pre>

<p>I have tried reinstalling it multiple times but it shows the same error</p>",python|python-3.x|machine-learning|scikit-learn|linear-regression,<p>Make sure that if you install the sklearn package in the python version that you are working. For suppose if your system has two versions of python installed in it like both python 2 and python 3 then you have installed sklearn package in python 2 and executing your code in python 3 or vice-versa. </p>,3
59002140,Stock data mining for a company,"<p>new to python and have a problem to solve that I've hit a roadblock.
Looking to calculate the monthly and yearly average price for Google and tell us the best and worst six months and the best and worst six years for Google from 2004 to Oct 2019
The average price is defined as ((v1*c1)+(v2*c2)+(v3*c3)+(v4*c4)...+(vn*cn)) / (v1+v2+v3+v4...+vn) where vi is the volume for day i and ci is the adjusted close price for day i.</p>

<p>I've been able to import the data from the web but now I'm trying to at least get one year into a tuple and then work out from that but can't figure out how to convert the data I have into a tuple.
I try function = tuple but get errors. I know how to make a tuple but not how to make one from the data I have or if I'm missing a step to get the data into one or if I'm going off track with this approach</p>

<p>Here is my code so far if anyone could point me in the right direction it would be appreciated</p>

<pre><code># url = ""http://193.1.33.31:88/pa1/GOOGL.csv""


import csv

import begin
from read_from_file_or_net import get_stuff_from_net as gn

def main(csv_file: 'URL of CSV file'):
# def main(csv_file):

    try:
        print(f""{csv_file}"")
        my_file = gn(csv_file)
        # with open(f"".cache/{my_file}"", ""w"") as output:
        #     output.write(my_file)

        my_file = my_file.split(""\n"")

        for row in my_file:
            row = row.strip().split("","")
            for cell in row:
                if cell.isalpha():
                    print(f""{cell}""+"""", end="""")
                elif ""-"" in cell:
                    print(f""{cell}"", end="""")
                elif ""."" in cell:
                    print(f""{float(cell):&gt;10.2f}"", end="""")
                elif cell.isnumeric():
                    print(f""{int(cell):&gt;15d}"", end="""")
                elif not cell.isspace():
                    print(f""{cell}"", end=""  "")
                #elif cell.istitle():
                   # print(f""{cell}"", end="""")
                #else:
                    #print(""?"", end="""")
            print()

    except Exception as e:
        print(f""{e}"")


if __name__ == ""__main__"":
    main(""http://193.1.33.31:88/pa1/GOOGL.csv"")
</code></pre>",python,"<p>You should use <code>pandas</code> for this. It has many powerful functions which doesn't need <code>for</code>-loop.</p>

<p>You can read <code>csv</code> directly from web page</p>

<pre><code>import pandas as pd

df = pd.read_csv('http://193.1.33.31:88/pa1/GOOGL.csv')

print(df.columns)
print(df.head())
</code></pre>

<p>You can select one year - ie. 2018</p>

<pre><code>year2018 = df[ (df['Date'] &gt;= '2018-01-01') &amp; (df['Date'] &lt; '2019-01-01') ]
</code></pre>

<p>And calculate your value </p>

<pre><code>result = (year2018['Volume'] * year2018['Adj Close']).sum() / year2018['Volume'].sum()

print(result)
</code></pre>

<hr>

<p><strong>EDIT:</strong> Silimar for other years</p>

<pre><code>for year in range(2004, 2019):
    year = str(year)
    data = df[ df['Date'].str.startswith(year) ]
    result = (data['Volume'] * data['Adj Close']).sum() / data['Volume'].sum()

    print(year, result)
</code></pre>

<p>Result:</p>

<pre><code>2004 80.44437157567273
2005 137.4076040074354
2006 203.03824165240846
2007 273.04059204266287
2008 227.86912213843564
2009 206.71221450434697
2010 268.65533171697064
2011 283.70689930771306
2012 322.70466840310667
2013 437.32701278816154
2014 567.9540540371448
2015 623.3613056057101
2016 757.9295821975054
2017 940.267270383813
2018 1115.287148437416
</code></pre>

<hr>

<p><strong>EDIT:</strong> If you keep results on list as tuples <code>(result, year)</code> then you can sort them to get the best and the worst years</p>

<pre><code>import pandas as pd

df = pd.read_csv('http://193.1.33.31:88/pa1/GOOGL.csv')
#df['Date'] = pandas.to_datetime(df['Date'])

#print(df.columns)

year2018 = df[ (df['Date'] &gt;= '2018-01-01') &amp; (df['Date'] &lt; '2019-01-01') ]

result = (year2018['Volume'] * year2018['Adj Close']).sum() / year2018['Volume'].sum()

#print(result)

all_results = []
for year in range(2004, 2019):
    year = str(year)
    data = df[ df['Date'].str.startswith(year) ]
    result = (data['Volume'] * data['Adj Close']).sum() / data['Volume'].sum()

    all_results.append( (result, year) )
    #print(year, result)

print('--- sorted by result ---')

sorted_results = sorted(all_results)

for result, year in sorted_results:
    print(year, result)
</code></pre>

<p>Result:</p>

<pre><code>--- sorted by result ---
2004 80.44437157567273
2005 137.4076040074354
2006 203.03824165240846
2009 206.71221450434697
2008 227.86912213843564
2010 268.65533171697064
2007 273.04059204266287
2011 283.70689930771306
2012 322.70466840310667
2013 437.32701278816154
2014 567.9540540371448
2015 623.3613056057101
2016 757.9295821975054
2017 940.267270383813
2018 1115.287148437416
</code></pre>

<p>Using slice <code>sorted_results[:6]</code> you can get six the worst years, using <code>sorted_results[-6:]</code> you can get six the best years. You can also use <code>reversed()</code> if you want in different order.</p>

<hr>

<p><strong>EDIT:</strong> Almost all the same without <code>pandas</code></p>

<pre><code>import requests
import csv

def main(url):
    r = requests.get(url)

    lines = r.text.split('\n')

    headers = lines[0].split(',')

    data = []

    for line in lines[1:]:
        line = line.strip()
        if line: # skip empty lines
            row = line.strip().split(',')

            # convert string to float/int
            row[1] = float(row[1])
            row[2] = float(row[2])
            row[3] = float(row[3])
            row[4] = float(row[4])
            row[5] = float(row[5])
            row[6] = int(row[6])

            data.append(row)

    return headers, data


if __name__ == ""__main__"":    
    headers, data = main('http://193.1.33.31:88/pa1/GOOGL.csv')

    print(headers)

    print('--- data ---')
    print(data[0])
    print(data[-1])

    # get only year 2018

    year2018 = []
    for row in data:
        if '2018-01-01' &lt;= row[0] &lt; '2019-01-01':
           year2018.append(row)

    print('--- year 2018 ---')
    print(year2018[0])
    print(year2018[-1])

    # your calculation

    a = 0
    b = 0
    for row in year2018:
        a += row[5] * row[6]
        b += row[6]

    result = a/b

    print(result)
</code></pre>",1
59075728,"How to get all the words ""bar"" after the word ""foo"" with regex","<p>I am trying to retrieve all occurrences of the <strong>word</strong> bar after the word <strong>foo</strong>. </p>

<p>Below the content:</p>

<blockquote>
  <p>fuu</p>
  
  <p><em>bar</em> </p>
  
  <p>faa</p>
  
  <p>foo<strong>bar</strong> fuu</p>
  
  <p><strong>bar</strong> fuu<strong>bar</strong></p>
  
  <p><strong>bar</strong></p>
  
  <p><strong>bar</strong> fuu</p>
</blockquote>

<p>I want to retrieve all bars that are bold and disregard the first bar that is in italic format.</p>

<p>I tried to use the follow regular expression:</p>

<pre><code>(?&lt;=foo)bar
</code></pre>

<p>But that only catches the first occurrence.</p>

<p><strong>UPDATE</strong></p>

<p>Thanks for the support guys. 
Below the data more closer to reality:</p>

<pre><code>Some data

name: Person 1

Some data

my_delimiter:

 name: Person 2

 Some data

name: Person 3

Some data

 name: Person 4

 Some data

Some data
</code></pre>

<p>I want to get the name of the persons after <strong>my_delimiter:</strong></p>

<p>I am testing here <a href=""https://regex101.com/r/HrCLva/2"" rel=""nofollow noreferrer"">https://regex101.com/r/HrCLva/2</a></p>",python|regex|regex-lookarounds,"<p>Two things, depending on what exactly you're after:</p>

<ol>
<li><p>If you're after all the occurrences on a single line, then you need to use <code>re.findall</code>:</p>

<pre><code>exp = re.compile(""foo(?:.*?((bar)+)*)"") # See https://regex101.com/r/zzBFFb/1
match = exp.findall(mystring)
</code></pre></li>
<li><p>If you're after all occurrences on multiple lines as above then you need to add some flags to tell it not to treat newlines differently:</p>

<pre><code>exp = re.compile(""foo(?:.*?((bar)+)*)"", re.DOTALL | re.MULTILINE) 
match = exp.findall(mystring)
</code></pre></li>
</ol>",0
59075728,"How to get all the words ""bar"" after the word ""foo"" with regex","<p>I am trying to retrieve all occurrences of the <strong>word</strong> bar after the word <strong>foo</strong>. </p>

<p>Below the content:</p>

<blockquote>
  <p>fuu</p>
  
  <p><em>bar</em> </p>
  
  <p>faa</p>
  
  <p>foo<strong>bar</strong> fuu</p>
  
  <p><strong>bar</strong> fuu<strong>bar</strong></p>
  
  <p><strong>bar</strong></p>
  
  <p><strong>bar</strong> fuu</p>
</blockquote>

<p>I want to retrieve all bars that are bold and disregard the first bar that is in italic format.</p>

<p>I tried to use the follow regular expression:</p>

<pre><code>(?&lt;=foo)bar
</code></pre>

<p>But that only catches the first occurrence.</p>

<p><strong>UPDATE</strong></p>

<p>Thanks for the support guys. 
Below the data more closer to reality:</p>

<pre><code>Some data

name: Person 1

Some data

my_delimiter:

 name: Person 2

 Some data

name: Person 3

Some data

 name: Person 4

 Some data

Some data
</code></pre>

<p>I want to get the name of the persons after <strong>my_delimiter:</strong></p>

<p>I am testing here <a href=""https://regex101.com/r/HrCLva/2"" rel=""nofollow noreferrer"">https://regex101.com/r/HrCLva/2</a></p>",python|regex|regex-lookarounds,"<p>After you updated your answer, you don't need a regex lookbehind, you can use a regex like this to find the first name after your delimiter:</p>

<pre><code>my_delimiter:\s+name:\s*(.*)
</code></pre>

<p><strong><a href=""https://regex101.com/r/HrCLva/4"" rel=""nofollow noreferrer"">Working demo</a></strong></p>

<p>On the other hand, if you want all names after your delimiter, then you can use a regex trick like this and then grab the content from capturing group:</p>

<pre><code>[\s\S]*my_delimiter|name:\s*(.*)$
</code></pre>

<p><strong><a href=""https://regex101.com/r/HrCLva/5"" rel=""nofollow noreferrer"">Working demo 2</a></strong></p>

<p>The capturing group stores the data highlighted in green.</p>

<p><a href=""https://i.stack.imgur.com/CGrbt.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/CGrbt.png"" alt=""enter image description here""></a></p>",0
56271345,Fetching / Extract the row from excel based on matched value,"<p>Filter out the specific value from excel(anly columns), fetch the complete row and save in to another tab</p>

<p>Used Pandas</p>

<p>Input</p>

<pre><code>Item    Units   UnitCost    Total
Pencil  95  1.99    189.05
Binder  50  19.99   999.5
Pencil  36  4.99    179.64
Pen 27  19.99   539.73
Pencil  56  2.99    167.44
Binder  60  4.99    (SRC):299.4 ---&gt; (TGT):299.41
Pencil  75  1.99    149.25
Pencil  90  4.99    449.1
Pencil  (SRC):32 ---&gt; (TGT):654 (SRC):1.99 ---&gt; (TGT):1.85  (SRC):63.68 ---&gt; (TGT):63.7
Binder  60  8.99    539.4
Pencil  90  4.99    449.1
Binder  29  1.99    57.71
Binder  81  19.99   1619.19
Pencil  35  4.99    174.65
Desk    (SRC):2 ---&gt; (TGT):20   125 250
</code></pre>

<p>Expected</p>

<pre><code>Item    Units   UnitCost    Total
Binder  60  4.99    (SRC):299.4 ---&gt; (TGT):299.41
Pencil  (SRC):32 ---&gt; (TGT):654 (SRC):1.99 ---&gt; (TGT):1.85  (SRC):63.68 ---&gt; (TGT):63.7
Desk    (SRC):2 ---&gt; (TGT):20   125 250
</code></pre>

<p>Need to fetch where ever (SRC) in the cell</p>",python|pandas|xlsxwriter|sklearn-pandas,"<p>Use <code>pd.Series.str.contains</code>:</p>

<pre><code>df[df.astype(str).sum(1).str.contains('SRC')]
</code></pre>

<p>Output:</p>

<pre><code>Item                    Units                    UnitCost                          Total
5   Binder                       60                        4.99  (SRC):299.4 ---&gt; (TGT):299.41
8   Pencil  (SRC):32 ---&gt; (TGT):654  (SRC):1.99 ---&gt; (TGT):1.85    (SRC):63.68 ---&gt; (TGT):63.7
14    Desk    (SRC):2 ---&gt; (TGT):20                         125                            250
</code></pre>",0
56280219,"Uploading file with python returns Request failed with status code', 403, 'Expected one of', <HTTPStatus.OK: 200>","<p><code>blob.upload_from_filename(source)</code> gives the error <br></p>

<blockquote>
  <p>raise exceptions.from_http_status(response.status_code, message, >response=response)
  google.api_core.exceptions.Forbidden: 403 POST ><a href=""https://www.googleapis.com/upload/storage/v1/b/bucket1-newsdata-"" rel=""nofollow noreferrer"">https://www.googleapis.com/upload/storage/v1/b/bucket1-newsdata-</a>>bluetechsoft/o?uploadType=multipart: ('Request failed with status >code', 403, 'Expected one of', )</p>
</blockquote>

<p>I am following the example of google cloud written in python <a href=""https://cloud.google.com/storage/docs/uploading-objects#storage-upload-object-code_sample"" rel=""nofollow noreferrer"" title=""Uploading objects | Cloud storage | Google cloud"">here</a>!</p>

<pre><code> from google.cloud import storage

 def upload_blob(bucket, source, des):
    client = storage.Client.from_service_account_json('/path')
    storage_client = storage.Client()
    bucket = storage_client.get_bucket(bucket)
    blob = bucket.blob(des)
    blob.upload_from_filename(source)
</code></pre>

<p>I used gsutil to upload files, which is working fine. <br>
Tried to list the bucket names using the python script which is also working fine. <br>
I have necessary permissions and GOOGLE_APPLICATION_CREDENTIALS set.</p>",python|google-cloud-storage,"<p>This question is more appropriate for a <a href=""https://support.google.com/googlecloud/answer/1041916?hl=en"" rel=""nofollow noreferrer"">support case</a>.</p>

<p>As you are getting a 403, most likely you are missing a permission on IAM, the Google Cloud Platform support team will be able to inspect your resources and configurations.</p>",0
56280219,"Uploading file with python returns Request failed with status code', 403, 'Expected one of', <HTTPStatus.OK: 200>","<p><code>blob.upload_from_filename(source)</code> gives the error <br></p>

<blockquote>
  <p>raise exceptions.from_http_status(response.status_code, message, >response=response)
  google.api_core.exceptions.Forbidden: 403 POST ><a href=""https://www.googleapis.com/upload/storage/v1/b/bucket1-newsdata-"" rel=""nofollow noreferrer"">https://www.googleapis.com/upload/storage/v1/b/bucket1-newsdata-</a>>bluetechsoft/o?uploadType=multipart: ('Request failed with status >code', 403, 'Expected one of', )</p>
</blockquote>

<p>I am following the example of google cloud written in python <a href=""https://cloud.google.com/storage/docs/uploading-objects#storage-upload-object-code_sample"" rel=""nofollow noreferrer"" title=""Uploading objects | Cloud storage | Google cloud"">here</a>!</p>

<pre><code> from google.cloud import storage

 def upload_blob(bucket, source, des):
    client = storage.Client.from_service_account_json('/path')
    storage_client = storage.Client()
    bucket = storage_client.get_bucket(bucket)
    blob = bucket.blob(des)
    blob.upload_from_filename(source)
</code></pre>

<p>I used gsutil to upload files, which is working fine. <br>
Tried to list the bucket names using the python script which is also working fine. <br>
I have necessary permissions and GOOGLE_APPLICATION_CREDENTIALS set.</p>",python|google-cloud-storage,"<p>This whole things wasn't working because I didn't have <strong>permission</strong> <code>storage admin</code> in the service account that I am using in GCP.</p>

<p>Allowing <code>storage admin</code> to my service account solved my problem.</p>",1
56255454,How to fix the issue as driver.send_keys(Keys.ENTER) is not working,"<p>I am able to enter the location, but once I am done with sending the location, then it should automatically click the 1st item from suggestion, but it is not working. Any work around on this?</p>

<p>I have tried almost all the things like inducing some wait time in order to load the suggestion and then press enter but nothing has helped me. I am newbie in selenium and python.</p>

<pre><code>url = 'https://www.stek-usa.com/locator'
driver = webdriver.Chrome(ChromeDriverManager().install())
driver.implicitly_wait(10)
driver.get(url)
loc = driver.find_element_by_id('storelocator-search_address')
loc.send_keys('Arkansas, USA')
loc.click()
loc.send_keys(Keys.RETURN)
</code></pre>

<p>Once enter is pressed, it should show the correct location. But that is not happening. Please help me on this.</p>",python|selenium-webdriver,"<p>Try the following, instead of the last three lines of your code, add this:</p>

<pre><code>loc.send_keys('Arkansas, USA' + Keys.DOWN + Keys.RETURN)
</code></pre>",2
56255454,How to fix the issue as driver.send_keys(Keys.ENTER) is not working,"<p>I am able to enter the location, but once I am done with sending the location, then it should automatically click the 1st item from suggestion, but it is not working. Any work around on this?</p>

<p>I have tried almost all the things like inducing some wait time in order to load the suggestion and then press enter but nothing has helped me. I am newbie in selenium and python.</p>

<pre><code>url = 'https://www.stek-usa.com/locator'
driver = webdriver.Chrome(ChromeDriverManager().install())
driver.implicitly_wait(10)
driver.get(url)
loc = driver.find_element_by_id('storelocator-search_address')
loc.send_keys('Arkansas, USA')
loc.click()
loc.send_keys(Keys.RETURN)
</code></pre>

<p>Once enter is pressed, it should show the correct location. But that is not happening. Please help me on this.</p>",python|selenium-webdriver,"<p>Try this way:
driver.sendKeys(Keys.chord(""your location"", Keys.ENTER));</p>

<p>This step will perform entering your location into text box and will click on first matching option, which will fulfill your criteria</p>",0
56372550,Set index to group of repetitive row values in a csv file using Python,"<p>I am new to python. I want to set index to specific set of row elements which are repetitive for each group.
My dataframe:</p>

<p><a href=""https://i.stack.imgur.com/GmdAV.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/GmdAV.png"" alt=""Index""></a></p>

<pre><code>data_dict ={'0_deg': [2, 11, 21, -17, 5, 40, 22, 7, 20, -6, -6, -6, 24, 21, 20, 61, 21, 5, 2, 17], 
 '10_deg': [12, -21, 11, 1, 4, -2, 33, 53, 18, 10, -3, -1, 23, 18, 23, 8, 11, -25, 21, -14], 
 '20_deg': [23, -10, 3, 20, -41, 13, 10, 5, -9, 7, -4, -21, 14, -26, -31, 9, 1, -15, 3, -6], 
 '30_deg': [12, 9, -5, 4, 9, -46, 1, -8, -27, 3, -9, -14, 15, -6, 14, 7, -11, 5, 19, -4]}
</code></pre>

<pre><code>data_dict = pd.read_csv('Dataset.csv')
data_dict = data_dict.set_index('Indexes')

#row idx of a group in this list
idx =[4,10,37,109,133]
</code></pre>

<p>Here a list is created as <strong>idx</strong> and index values are written maunally. </p>

<p>But for a bigger matrix of 1000+ indexes(random values) per group, this would be a very difficult task. </p>

<p>What I want is that when I read a CSV file, the 1st value in the row should be selected and until the same value occurs in the same index, it should be considered as 1 group, and the indexes for 1st group must get stored in <strong>idx</strong></p>

<p>Eg: In my small version of dataset, from 1st column <code>Indexes</code>, the 1st values i.e. <code>4,10,37,109,133</code> are my indexxes for 1st group. These values repeat in same sequence for next groups. 
Only they shoud not be entered manually in code. A group should be considered unitl next <code>4</code> occurs. So index values 4 to 133 must be considered as 1 group under <strong>idx</strong>. This is because I need <strong>idx</strong> for further part of the code.</p>

<p>My actual dataset has 1000+ index values per group. So <strong>idx</strong> must automatically take all values of a group.</p>

<pre><code># getting some dimensions and sorting the data
row_idx_length = len(idx) 
group_length = len(data_dict['0_deg'])
number_of_groups = len(data_dict.keys())  
idx = idx*number_of_groups   
data_arr = np.zeros((group_length,number_of_groups),dtype=np.int32) 
</code></pre>",python|pandas|list|numpy|group-by,"<p>If i understand your question correctly, you need to actually get the idx given the dataframe with the index setup like that. </p>

<pre><code>data_dict ={'0_deg': [2, 11, 21, -17, 5, 40, 22, 7, 20, -6, -6, -6, 24, 21, 20, 61, 21, 5, 2, 17], 
 '10_deg': [12, -21, 11, 1, 4, -2, 33, 53, 18, 10, -3, -1, 23, 18, 23, 8, 11, -25, 21, -14], 
 '20_deg': [23, -10, 3, 20, -41, 13, 10, 5, -9, 7, -4, -21, 14, -26, -31, 9, 1, -15, 3, -6], 
 '30_deg': [12, 9, -5, 4, 9, -46, 1, -8, -27, 3, -9, -14, 15, -6, 14, 7, -11, 5, 19, -4]}
import pandas as pd
df = pd.DataFrame(data_dict)

idx =[4,10,37,109,133]
df.index = idx * (len(df)//len(idx))

print(df)
#Output:
     0_deg  10_deg  20_deg  30_deg  groups
4        2      12      23      12       1
10      11     -21     -10       9       1
37      21      11       3      -5       1
109    -17       1      20       4       1
133      5       4     -41       9       1
4       40      -2      13     -46       2
10      22      33      10       1       2
37       7      53       5      -8       2
109     20      18      -9     -27       2
133     -6      10       7       3       2
4       -6      -3      -4      -9       3
10      -6      -1     -21     -14       3
37      24      23      14      15       3
109     21      18     -26      -6       3
133     20      23     -31      14       3
4       61       8       9       7       4
10      21      11       1     -11       4
37       5     -25     -15       5       4
109      2      21       3      19       4
133     17     -14      -6      -4       4
</code></pre>

<p>With the setup done, you just need to calculate where the 0th value repeats. You could just calculate it directly, but perhaps it is also more useful to make an additional column for further calculations.</p>

<pre><code>temp = df.index == df.index[0]
groups = temp.cumsum()
idx_out = list(df.index[groups == 1])

print(idx_out) #[4, 10, 37, 109, 133]

#Optional:

df['groups'] = groups #can be very useful for aggregations and groupby calculations
</code></pre>",1
56372550,Set index to group of repetitive row values in a csv file using Python,"<p>I am new to python. I want to set index to specific set of row elements which are repetitive for each group.
My dataframe:</p>

<p><a href=""https://i.stack.imgur.com/GmdAV.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/GmdAV.png"" alt=""Index""></a></p>

<pre><code>data_dict ={'0_deg': [2, 11, 21, -17, 5, 40, 22, 7, 20, -6, -6, -6, 24, 21, 20, 61, 21, 5, 2, 17], 
 '10_deg': [12, -21, 11, 1, 4, -2, 33, 53, 18, 10, -3, -1, 23, 18, 23, 8, 11, -25, 21, -14], 
 '20_deg': [23, -10, 3, 20, -41, 13, 10, 5, -9, 7, -4, -21, 14, -26, -31, 9, 1, -15, 3, -6], 
 '30_deg': [12, 9, -5, 4, 9, -46, 1, -8, -27, 3, -9, -14, 15, -6, 14, 7, -11, 5, 19, -4]}
</code></pre>

<pre><code>data_dict = pd.read_csv('Dataset.csv')
data_dict = data_dict.set_index('Indexes')

#row idx of a group in this list
idx =[4,10,37,109,133]
</code></pre>

<p>Here a list is created as <strong>idx</strong> and index values are written maunally. </p>

<p>But for a bigger matrix of 1000+ indexes(random values) per group, this would be a very difficult task. </p>

<p>What I want is that when I read a CSV file, the 1st value in the row should be selected and until the same value occurs in the same index, it should be considered as 1 group, and the indexes for 1st group must get stored in <strong>idx</strong></p>

<p>Eg: In my small version of dataset, from 1st column <code>Indexes</code>, the 1st values i.e. <code>4,10,37,109,133</code> are my indexxes for 1st group. These values repeat in same sequence for next groups. 
Only they shoud not be entered manually in code. A group should be considered unitl next <code>4</code> occurs. So index values 4 to 133 must be considered as 1 group under <strong>idx</strong>. This is because I need <strong>idx</strong> for further part of the code.</p>

<p>My actual dataset has 1000+ index values per group. So <strong>idx</strong> must automatically take all values of a group.</p>

<pre><code># getting some dimensions and sorting the data
row_idx_length = len(idx) 
group_length = len(data_dict['0_deg'])
number_of_groups = len(data_dict.keys())  
idx = idx*number_of_groups   
data_arr = np.zeros((group_length,number_of_groups),dtype=np.int32) 
</code></pre>",python|pandas|list|numpy|group-by,"<p>I believe you need <a href=""https://docs.scipy.org/doc/numpy/reference/generated/numpy.tile.html"" rel=""nofollow noreferrer""><code>numpy.tile</code></a> with integer division for number of repeating:</p>

<pre><code>df.index = np.tile(idx, len(df.index) // len(idx))
</code></pre>

<p>But if get error (<code>N</code> and <code>M</code> are some integer numbers):</p>

<blockquote>
  <p>ValueError: Length mismatch: Expected axis has N elements, new values have M elements</p>
</blockquote>

<p>It means in last group missing some elements, so add next group by <code>1</code> and filter by length of <code>index of DataFrame</code>:</p>

<pre><code>#added 150 to idx list
idx =[4,10,37,109,133,150]
df.index = np.tile(idx, len(df.index) // len(idx) + 1)[:len(df.index)]
print (df)          
     0_deg  10_deg  20_deg  30_deg
4        2      12      23      12
10      11     -21     -10       9
37      21      11       3      -5
109    -17       1      20       4
133      5       4     -41       9
150     40      -2      13     -46
4       22      33      10       1
10       7      53       5      -8
37      20      18      -9     -27
109     -6      10       7       3
133     -6      -3      -4      -9
150     -6      -1     -21     -14
4       24      23      14      15
10      21      18     -26      -6
37      20      23     -31      14
109     61       8       9       7
133     21      11       1     -11
150      5     -25     -15       5
4        2      21       3      19
10      17     -14      -6      -4
</code></pre>",2
56257687,Concatenating two similar dataframes row-wise,"<p>I have two data-frames with same column names and similar data. How do I append/concatenate (row-wise) the second data-frame with the first?</p>

<p>For Example:</p>

<pre><code>df1=

X1    X2    X3
1     a     x
2     b     y
3     c     z
</code></pre>

<p>and</p>

<pre><code>df2=

X1    X2    X3
3     c     z
4     d     w

</code></pre>

<p>The result should be:</p>

<pre><code>df_result=

X1    X2    X3
1     a     x
2     b     y
3     c     z
3     c     z
4     d     w
</code></pre>

<p>Where, X1, X2 and X3 are the column names.</p>",python|pandas,"<p>You could use append()</p>

<pre><code>df_result = df1.append(df2)
</code></pre>

<p>or if you want a continuing index:</p>

<pre><code>df_result = df1.append(df2, ignore_index=True)
</code></pre>",1
56416043,Keep the first X words in list elements whilst keeping the list one dimension?,"<p>I've a list which elements are comformed by words. In example:</p>

<pre><code>listA = [""Hello, I'm Margaret and I'm 32 years old"", 
""Howdy, I'm Louis and I'm 35 years old"",
""Greetings, I'm Veronica, I come from Canada"",
""Night, I'm Pepe and I'm a mexican singer""] 
</code></pre>

<p>However, I want to use a list comprehension to keep only the first three words of every element in the list, so the result is:</p>

<pre><code>ListA = [""Hello, I'm Margaret"",
""Howdy, I'm Louis"",
""Greetings, I'm Veronica"",
""Night, I'm Pepe""]
</code></pre>

<p>I've tried using the following list comprehension:</p>

<pre><code>ListA = [i.split()[0:2] for i in ListA]
</code></pre>

<p>But this results in a list of lists, which is not desired:</p>

<pre><code>ListA = [[""Hello, I'm Margaret""],
[""Howdy, I'm Louis""],
[""Greetings, I'm Veronica""],
[""Night, I'm Pepe""]]
</code></pre>

<p>Is using split() the correct approach? Thank you for your help!</p>",python|list,"<p>You just forgot to <code>join</code> the splitted list back to a string:</p>

<pre><code>ListA = [' '.join(i.split()[0:2]) for i in ListA]
</code></pre>",2
56416043,Keep the first X words in list elements whilst keeping the list one dimension?,"<p>I've a list which elements are comformed by words. In example:</p>

<pre><code>listA = [""Hello, I'm Margaret and I'm 32 years old"", 
""Howdy, I'm Louis and I'm 35 years old"",
""Greetings, I'm Veronica, I come from Canada"",
""Night, I'm Pepe and I'm a mexican singer""] 
</code></pre>

<p>However, I want to use a list comprehension to keep only the first three words of every element in the list, so the result is:</p>

<pre><code>ListA = [""Hello, I'm Margaret"",
""Howdy, I'm Louis"",
""Greetings, I'm Veronica"",
""Night, I'm Pepe""]
</code></pre>

<p>I've tried using the following list comprehension:</p>

<pre><code>ListA = [i.split()[0:2] for i in ListA]
</code></pre>

<p>But this results in a list of lists, which is not desired:</p>

<pre><code>ListA = [[""Hello, I'm Margaret""],
[""Howdy, I'm Louis""],
[""Greetings, I'm Veronica""],
[""Night, I'm Pepe""]]
</code></pre>

<p>Is using split() the correct approach? Thank you for your help!</p>",python|list,"<p>You are almost there. Just make sure to join the string back:</p>

<pre><code>ListA = [' '.join(e.split()[0:2]) for e in ListA]
</code></pre>

<p>Also you may want <code>[0:3]</code> and not <code>[0:2]</code>, but that's up to you.</p>",3
56297599,Space and Time complexity of matrix_in_spiral_order(matrix),"<p>I'm reading Elements of Programming interviews in Python (Aziz, Lee, Prakash) and don't understand the space and time complexity for one of their algorithms. The question asked to return a matrix in spiral order (example <a href=""http://javabypatel.blogspot.com/2016/11/print-matrix-in-spiral-order.html"" rel=""nofollow noreferrer"">here</a>).</p>

<p>At the end of the algorithm, the authors state that this is O(n^2) time complexity, and O(1) space complexity. It's been a few years since I've formally studied complexity, so I don't understand either of these claims. In the code below we build a brand new array with all the elements in spiral order, which would lead me to believe this is not an in place operation, and would therefore have space complexity of O(nxn).</p>

<p>For the time complexity I am also confused. We only iterate through the 2D array once for each element. Wouldn't it therefore be considered O(n)? How is this different than just flattening this into a 1D array and going through it once?</p>

<pre><code>def matrix_in_spiral_order(square_matrix):
    SHIFT = ((0,1),(1,0),(0,-1),(-1,0))
    direction = x = y = 0
    spiral_ordering = []

    for _ in range(len(square_matrix)**2):
        spiral_ordering.append(square_matrix[x][y])
        square_matrix[x][y] = 0
        next_x,next_y = x + SHIFT[direction][0], y+ SHIFT[direction][1]
        if (next_x not in range(len(square_matrix)) or next_y not in range(
              len(square_matrix)) or square_matrix[next_x][next_y] == 0):
            direction = (direction +1) &amp; 3
            next_x, next_y = x+ SHIFT[direction][0], y + SHIFT[direction][1]
        x,y = next_x, next_y
    return spiral_ordering
</code></pre>

<p>I ended up solving this recursively using a different solution, but still want to understand how they arrived at their analysis of the above algorithm.</p>",python|list|time-complexity|complexity-theory,"<p>It appears that their definition of N is the length of a side of the matrix while your definition of N is the product of the sides of the matrix. This seems like six of one, half a dozen of another, although it's open for debate as to which is less misleading.</p>

<p>As for the space complexity, once again, it sounds like their interpretation is that the returned result doesn't count. This is fair enough, but it does need to be made explicit, and I think your intuition as far as expressing doubts about both of their claims is sound.</p>

<p>As a side note, I agree with @Blorgbeard that the algorithm they've provided is less than exemplary.</p>",1
56548884,Saving matplotlib animation as movie; movie too short,"<p>I have an animation that I made with matplotlib that I'm saving using <code>matplotlib.animation.Animation.save()</code>. This works well, but my movie ends before my animation ends.</p>

<p>I've tried changing frame rate, interval, and movie format from <code>.mp4</code> to <code>.avi</code>. Is there a frame or movie size limit? How could this be fixed?</p>

<p>Here is my code:</p>

<pre><code># Updates animation.
def update_line(num, data, line):
    line.set_data(data[..., :num])
    return line,


fig1 = plt.figure()
l, = plt.plot([], [], '-')
line_ani = animation.FuncAnimation(fig1, update_line, fargs=(np.array(trajectory), l), interval=25, blit=True)

line_ani.save(file_title + '.avi')
plt.show()
</code></pre>

<p>While the movie should be about 15 seconds long, it ends up being 3 seconds long. I also use <code>plt.show()</code>, and the animation is much longer on the matplotlib display window.</p>

<p>In case it matters, I'm running on Ubuntu, with matplotlib 3.03 and python 3.6.</p>",python|matplotlib,"<p>Edit: I was able to fix this by making the parameter <code>frames=len(trajectory[1])</code>.</p>

<p>In short, if you can predict the length of your movie in frames, use <code>repeat=False</code> and <code>frames=number_of_frames</code> as parameters to <code>.save()</code>.</p>

<p>Leaving this answer up for others to fix their bugs.</p>",0
56488125,Generating permutations using generators,"<p>I was writing a program to generate all the permutations of a string:</p>

<pre><code>def print_permutations_wrapper(str):
    strList = str.split()
    print_permutations(strList, 0, len(strList))


def print_permutations(strList: list, start: int, end: int):
    if start &gt;= end - 1:
        print(strList)
        return

    print_permutations(strList, start+1, end)
    for i in range(start+1, end):
        strList[start], strList[i] = strList[i], strList[start]
        print_permutations(strList, start+1, end)
        strList[i], strList[start] = strList[start], strList[i]


def main():
    str = 'a b c'
    print_permutations_wrapper(str)


if __name__ == ""__main__"":
    main()
</code></pre>

<p>Its working correctly, but rather than printing it, I wanted to return it lazily using <code>yield</code>:</p>

<pre><code>def print_permutations_wrapper(str):
    strList = str.split()
    yield from print_permutations(strList, 0, len(strList))


def print_permutations(strList: list, start: int, end: int):
    if start &gt;= end - 1:
        yield strList
        return

    yield from print_permutations(strList, start+1, end)
    for i in range(start+1, end):
        strList[start], strList[i] = strList[i], strList[start]
        yield from print_permutations(strList, start+1, end)
        strList[i], strList[start] = strList[start], strList[i]


def main():
    str = 'a b c'
    x = print_permutations_wrapper(str)
    print(list(x))

if __name__ == ""__main__"":
    main()
</code></pre>

<p>The output that I get is:</p>

<pre><code>[['a', 'b', 'c'], ['a', 'b', 'c'], ['a', 'b', 'c'], ['a', 'b', 'c'], ['a', 'b', 'c'], ['a', 'b', 'c']]
</code></pre>

<p>rather than all the permutations.<br>
How to correct this?  </p>

<p>I am using Python 3.7.</p>",python|iterator|generator|permutation|yield,"<p>Taking your second program, but add a <code>print(strList)</code> will show that the generator function yielded what you expected, but the final output is clearly not what you expected.  This is due to the fact that the program as structured takes a list, but does all the operation to this same copy (assumed to limit memory usage).  You can also verify this by </p>

<pre><code>&gt;&gt;&gt; strList = ['a', 'b', 'c'] 
&gt;&gt;&gt; items = list(print_permutations(strList, 0, 3))
&gt;&gt;&gt; items[0] is items[1]
True
&gt;&gt;&gt; items[0] is strList
True
</code></pre>

<p>Clearly every single item inside the <code>items</code> are of the same original <code>strList</code> that got passed in.  Given the simplicity of the problem, this may be avoided by yielding a shallow copy of the list instead.  Thus the relevant <code>yield</code> part of the function will become</p>

<pre><code>def print_permutations(strList: list, start: int, end: int):
    if start &gt;= end - 1:
        yield list(strList)
        return
</code></pre>

<p>Now running it should produce:</p>

<pre><code>&gt;&gt;&gt; strList = ['a', 'b', 'c'] 
&gt;&gt;&gt; items = list(print_permutations(strList, 0, 3))
&gt;&gt;&gt; items[0] is items[1]
False
</code></pre>

<p>Also, as an aside, permutation is in fact a part of the standard library, available via <a href=""https://docs.python.org/3/library/itertools.html#itertools.permutations"" rel=""nofollow noreferrer""><code>itertools.permutation</code></a>.</p>

<p>Related: <a href=""https://stackoverflow.com/questions/1132941/least-astonishment-and-the-mutable-default-argument"">&quot;Least Astonishment&quot; and the Mutable Default Argument</a></p>",2
4686846,Python process fail after ctypes CreateProcessWithLogonW execution,"<p>I'm trying to execute a python script (through a python process) under another user. I found part of this code on the web and works pretty well; except one thing.</p>

<p>When the process terminate, python fails. </p>

<p>So to be clear, the second python process under the different user execute well with CreateProcessWithLogonW, but the first script fails (I think).</p>

<p>I might be wrong in my thinking, and my code usage might be wrong ...</p>

<p>Any idea what could cause one python process to become unresponsive?</p>

<p>I've tried a lot of things (i.e. like placing sys.exit(0) in both script to make it clear that the task is done ...), but cannot get it.</p>

<p>I'm running on win7 with python 2.6 64bit </p>

<pre><code>import ctypes
import win32api
import win32event
import win32process

NULL  = 0
TRUE  = 1
FALSE = 0

INVALID_HANDLE_VALUE = -1
CREATE_DEFAULT_ERROR_MODE = 0x04000000
DETACHED_PROCESS = 0x00000008

WORD   = ctypes.c_ushort
DWORD  = ctypes.c_uint
LPSTR  = ctypes.c_char_p
LPBYTE = LPSTR
HANDLE = DWORD

 # typedef struct _PROCESS_INFORMATION {
 #     HANDLE hProcess;
 #     HANDLE hThread;
 #     DWORD dwProcessId;
 #     DWORD dwThreadId;
 # } PROCESS_INFORMATION, *PPROCESS_INFORMATION, *LPPROCESS_INFORMATION;
class PROCESS_INFORMATION(ctypes.Structure):
    _pack_   = 1
    _fields_ = [
        ('hProcess',    HANDLE),
        ('hThread',     HANDLE),
        ('dwProcessId', DWORD),
        ('dwThreadId',  DWORD),
    ]

 # typedef struct _STARTUPINFO {
 #     DWORD   cb;
 #     LPSTR   lpReserved;
 #     LPSTR   lpDesktop;
 #     LPSTR   lpTitle;
 #     DWORD   dwX;
 #     DWORD   dwY;
 #     DWORD   dwXSize;
 #     DWORD   dwYSize;
 #     DWORD   dwXCountChars;
 #     DWORD   dwYCountChars;
 #     DWORD   dwFillAttribute;
 #     DWORD   dwFlags;
 #     WORD    wShowWindow;
 #     WORD    cbReserved2;
 #     LPBYTE  lpReserved2;
 #     HANDLE  hStdInput;
 #     HANDLE  hStdOutput;
 #     HANDLE  hStdError;
 # } STARTUPINFO, *LPSTARTUPINFO;
class STARTUPINFO(ctypes.Structure):
    _pack_   = 1
    _fields_ = [
        ('cb',              DWORD),
        ('lpReserved',      DWORD),     # LPSTR
        ('lpDesktop',       LPSTR),
        ('lpTitle',         LPSTR),
        ('dwX',             DWORD),
        ('dwY',             DWORD),
        ('dwXSize',         DWORD),
        ('dwYSize',         DWORD),
        ('dwXCountChars',   DWORD),
        ('dwYCountChars',   DWORD),
        ('dwFillAttribute', DWORD),
        ('dwFlags',         DWORD),
        ('wShowWindow',     WORD),
        ('cbReserved2',     WORD),
        ('lpReserved2',     DWORD),     # LPBYTE
        ('hStdInput',       DWORD),
        ('hStdOutput',      DWORD),
        ('hStdError',       DWORD),
    ]

 # BOOL WINAPI CreateProcessWithLogonW(
 #   __in         LPCWSTR lpUsername,
 #   __in_opt     LPCWSTR lpDomain,
 #   __in         LPCWSTR lpPassword,
 #   __in         DWORD dwLogonFlags,
 #   __in_opt     LPCWSTR lpApplicationName,
 #   __inout_opt  LPWSTR lpCommandLine,
 #   __in         DWORD dwCreationFlags,
 #   __in_opt     LPVOID lpEnvironment,
 #   __in_opt     LPCWSTR lpCurrentDirectory,
 #   __in         LPSTARTUPINFOW lpStartupInfo,
 #   __out        LPPROCESS_INFORMATION lpProcessInfo
 # );
def CreateProcessWithLogonW(lpUsername=None, lpDomain=None, lpPassword=None,
                            dwLogonFlags=0, lpApplicationName=None, lpCommandLine=None,
                            dwCreationFlags=0, lpEnvironment=None, lpCurrentDirectory=None,
                            lpStartupInfo = None):
    if not lpUsername:
        lpUsername = NULL
    else:
        lpUsername = ctypes.c_wchar_p(lpUsername)
    if not lpDomain:
        lpDomain = NULL
    else:
        lpDomain = ctypes.c_wchar_p(lpDomain)
    if not lpPassword:
        lpPassword = NULL
    else:
        lpPassword = ctypes.c_wchar_p(lpPassword)
    if not lpApplicationName:
        lpApplicationName = NULL
    else:
        lpApplicationName = ctypes.c_wchar_p(lpApplicationName)
    if not lpCommandLine:
        lpCommandLine = NULL
    else:
        lpCommandLine = ctypes.create_unicode_buffer(lpCommandLine)
    if not lpEnvironment:
        lpEnvironment = NULL
    else:
        lpEnvironment = ctypes.c_wchar_p(lpEnvironment)
    if not lpCurrentDirectory:
        lpCurrentDirectory = NULL
    else:
       lpCurrentDirectory = ctypes.c_wchar_p(lpCurrentDirectory)

    if not lpStartupInfo:
        lpStartupInfo = STARTUPINFO()
        lpStartupInfo.cb = ctypes.sizeof(STARTUPINFO)
        lpStartupInfo.lpReserved = 0
        lpStartupInfo.lpDesktop = 0
        lpStartupInfo.lpTitle = 0
        lpStartupInfo.dwFlags = 0
        lpStartupInfo.cbReserved2 = 0
        lpStartupInfo.lpReserved2 = 0
        lpStartupInfo.hStdInput = win32api.GetStdHandle(win32api.STD_INPUT_HANDLE)
        lpStartupInfo.hStdOutput = win32api.GetStdHandle(win32api.STD_OUTPUT_HANDLE)
        lpStartupInfo.hStdError = win32api.GetStdHandle(win32api.STD_ERROR_HANDLE)


    lpProcessInformation = PROCESS_INFORMATION()
    lpProcessInformation.hProcess = INVALID_HANDLE_VALUE
    lpProcessInformation.hThread = INVALID_HANDLE_VALUE
    lpProcessInformation.dwProcessId = 0
    lpProcessInformation.dwThreadId = 0

    dwCreationFlags |= win32process.CREATE_NEW_CONSOLE


    success = ctypes.windll.advapi32.CreateProcessWithLogonW(lpUsername,
                                                            lpDomain,
                                                            lpPassword,
                                                            dwLogonFlags,
                                                            lpApplicationName,
                                                            ctypes.byref(lpCommandLine),
                                                            dwCreationFlags,
                                                            lpEnvironment,
                                                            lpCurrentDirectory,
                                                            ctypes.byref(lpStartupInfo),
                                                            ctypes.byref(lpProcessInformation))

    if success == FALSE:
        raise ctypes.WinError()

    win32event.WaitForSingleObject(lpProcessInformation.hProcess, win32event.INFINITE)

    ctypes.windll.kernel32.CloseHandle(lpProcessInformation.hProcess)
    ctypes.windll.kernel32.CloseHandle(lpProcessInformation.hThread)

    return lpProcessInformation

def test():
    p = CreateProcessWithLogonW('user',
                                'domain',
                                'password',
                                0,
                                r'C:\Python26\python.exe',
                                r'C:\Python26\python.exe C:\mySimpleScript.py')

if __name__ == '__main__':
    test()
</code></pre>

<p>Thanks for any enlightment (:</p>",python|windows|ctypes,"<p>Check your arguments for <em>lpApplicationName</em> and <em>lpCommandLine</em>; one way to fix it is to pass NULL for the former and the complete command line for the latter:</p>

<pre><code>p = CreateProcessWithLogonW('user',
                            'domain',
                            'password',
                            0,
                            NULL,
                            r'C:\Python26\python.exe C:\mySimpleScript.py')
</code></pre>

<p>See the docs for <a href=""http://msdn.microsoft.com/en-us/library/ms682431%28v=vs.85%29.aspx"" rel=""nofollow"">CreateProcessWithLogonW</a> for details.</p>",0
4686846,Python process fail after ctypes CreateProcessWithLogonW execution,"<p>I'm trying to execute a python script (through a python process) under another user. I found part of this code on the web and works pretty well; except one thing.</p>

<p>When the process terminate, python fails. </p>

<p>So to be clear, the second python process under the different user execute well with CreateProcessWithLogonW, but the first script fails (I think).</p>

<p>I might be wrong in my thinking, and my code usage might be wrong ...</p>

<p>Any idea what could cause one python process to become unresponsive?</p>

<p>I've tried a lot of things (i.e. like placing sys.exit(0) in both script to make it clear that the task is done ...), but cannot get it.</p>

<p>I'm running on win7 with python 2.6 64bit </p>

<pre><code>import ctypes
import win32api
import win32event
import win32process

NULL  = 0
TRUE  = 1
FALSE = 0

INVALID_HANDLE_VALUE = -1
CREATE_DEFAULT_ERROR_MODE = 0x04000000
DETACHED_PROCESS = 0x00000008

WORD   = ctypes.c_ushort
DWORD  = ctypes.c_uint
LPSTR  = ctypes.c_char_p
LPBYTE = LPSTR
HANDLE = DWORD

 # typedef struct _PROCESS_INFORMATION {
 #     HANDLE hProcess;
 #     HANDLE hThread;
 #     DWORD dwProcessId;
 #     DWORD dwThreadId;
 # } PROCESS_INFORMATION, *PPROCESS_INFORMATION, *LPPROCESS_INFORMATION;
class PROCESS_INFORMATION(ctypes.Structure):
    _pack_   = 1
    _fields_ = [
        ('hProcess',    HANDLE),
        ('hThread',     HANDLE),
        ('dwProcessId', DWORD),
        ('dwThreadId',  DWORD),
    ]

 # typedef struct _STARTUPINFO {
 #     DWORD   cb;
 #     LPSTR   lpReserved;
 #     LPSTR   lpDesktop;
 #     LPSTR   lpTitle;
 #     DWORD   dwX;
 #     DWORD   dwY;
 #     DWORD   dwXSize;
 #     DWORD   dwYSize;
 #     DWORD   dwXCountChars;
 #     DWORD   dwYCountChars;
 #     DWORD   dwFillAttribute;
 #     DWORD   dwFlags;
 #     WORD    wShowWindow;
 #     WORD    cbReserved2;
 #     LPBYTE  lpReserved2;
 #     HANDLE  hStdInput;
 #     HANDLE  hStdOutput;
 #     HANDLE  hStdError;
 # } STARTUPINFO, *LPSTARTUPINFO;
class STARTUPINFO(ctypes.Structure):
    _pack_   = 1
    _fields_ = [
        ('cb',              DWORD),
        ('lpReserved',      DWORD),     # LPSTR
        ('lpDesktop',       LPSTR),
        ('lpTitle',         LPSTR),
        ('dwX',             DWORD),
        ('dwY',             DWORD),
        ('dwXSize',         DWORD),
        ('dwYSize',         DWORD),
        ('dwXCountChars',   DWORD),
        ('dwYCountChars',   DWORD),
        ('dwFillAttribute', DWORD),
        ('dwFlags',         DWORD),
        ('wShowWindow',     WORD),
        ('cbReserved2',     WORD),
        ('lpReserved2',     DWORD),     # LPBYTE
        ('hStdInput',       DWORD),
        ('hStdOutput',      DWORD),
        ('hStdError',       DWORD),
    ]

 # BOOL WINAPI CreateProcessWithLogonW(
 #   __in         LPCWSTR lpUsername,
 #   __in_opt     LPCWSTR lpDomain,
 #   __in         LPCWSTR lpPassword,
 #   __in         DWORD dwLogonFlags,
 #   __in_opt     LPCWSTR lpApplicationName,
 #   __inout_opt  LPWSTR lpCommandLine,
 #   __in         DWORD dwCreationFlags,
 #   __in_opt     LPVOID lpEnvironment,
 #   __in_opt     LPCWSTR lpCurrentDirectory,
 #   __in         LPSTARTUPINFOW lpStartupInfo,
 #   __out        LPPROCESS_INFORMATION lpProcessInfo
 # );
def CreateProcessWithLogonW(lpUsername=None, lpDomain=None, lpPassword=None,
                            dwLogonFlags=0, lpApplicationName=None, lpCommandLine=None,
                            dwCreationFlags=0, lpEnvironment=None, lpCurrentDirectory=None,
                            lpStartupInfo = None):
    if not lpUsername:
        lpUsername = NULL
    else:
        lpUsername = ctypes.c_wchar_p(lpUsername)
    if not lpDomain:
        lpDomain = NULL
    else:
        lpDomain = ctypes.c_wchar_p(lpDomain)
    if not lpPassword:
        lpPassword = NULL
    else:
        lpPassword = ctypes.c_wchar_p(lpPassword)
    if not lpApplicationName:
        lpApplicationName = NULL
    else:
        lpApplicationName = ctypes.c_wchar_p(lpApplicationName)
    if not lpCommandLine:
        lpCommandLine = NULL
    else:
        lpCommandLine = ctypes.create_unicode_buffer(lpCommandLine)
    if not lpEnvironment:
        lpEnvironment = NULL
    else:
        lpEnvironment = ctypes.c_wchar_p(lpEnvironment)
    if not lpCurrentDirectory:
        lpCurrentDirectory = NULL
    else:
       lpCurrentDirectory = ctypes.c_wchar_p(lpCurrentDirectory)

    if not lpStartupInfo:
        lpStartupInfo = STARTUPINFO()
        lpStartupInfo.cb = ctypes.sizeof(STARTUPINFO)
        lpStartupInfo.lpReserved = 0
        lpStartupInfo.lpDesktop = 0
        lpStartupInfo.lpTitle = 0
        lpStartupInfo.dwFlags = 0
        lpStartupInfo.cbReserved2 = 0
        lpStartupInfo.lpReserved2 = 0
        lpStartupInfo.hStdInput = win32api.GetStdHandle(win32api.STD_INPUT_HANDLE)
        lpStartupInfo.hStdOutput = win32api.GetStdHandle(win32api.STD_OUTPUT_HANDLE)
        lpStartupInfo.hStdError = win32api.GetStdHandle(win32api.STD_ERROR_HANDLE)


    lpProcessInformation = PROCESS_INFORMATION()
    lpProcessInformation.hProcess = INVALID_HANDLE_VALUE
    lpProcessInformation.hThread = INVALID_HANDLE_VALUE
    lpProcessInformation.dwProcessId = 0
    lpProcessInformation.dwThreadId = 0

    dwCreationFlags |= win32process.CREATE_NEW_CONSOLE


    success = ctypes.windll.advapi32.CreateProcessWithLogonW(lpUsername,
                                                            lpDomain,
                                                            lpPassword,
                                                            dwLogonFlags,
                                                            lpApplicationName,
                                                            ctypes.byref(lpCommandLine),
                                                            dwCreationFlags,
                                                            lpEnvironment,
                                                            lpCurrentDirectory,
                                                            ctypes.byref(lpStartupInfo),
                                                            ctypes.byref(lpProcessInformation))

    if success == FALSE:
        raise ctypes.WinError()

    win32event.WaitForSingleObject(lpProcessInformation.hProcess, win32event.INFINITE)

    ctypes.windll.kernel32.CloseHandle(lpProcessInformation.hProcess)
    ctypes.windll.kernel32.CloseHandle(lpProcessInformation.hThread)

    return lpProcessInformation

def test():
    p = CreateProcessWithLogonW('user',
                                'domain',
                                'password',
                                0,
                                r'C:\Python26\python.exe',
                                r'C:\Python26\python.exe C:\mySimpleScript.py')

if __name__ == '__main__':
    test()
</code></pre>

<p>Thanks for any enlightment (:</p>",python|windows|ctypes,"<p>HANDLE is a 64 bit integer type on 64 bit systems. Try ""from ctypes.wintypes import HANDLE"" instead of ""HANDLE = DWORD""</p>",0
4216139,Python object in QMimeData,"<p>I'm implementing drag and drop QTreeView based on my custom model. All works fine, my tree displays data, drag and drop is enabled and now the last step lies ahead of me - to drop and trasfer dragged data. To do this I need to implement mimeTypes, mimeData and dropMimeData methods in my model. And now my question: Is there any easy standard way how to pass an arbitrary Python object through QMimeData? I'm doing just an internal move within QTreeView which displays hierarchy of my Python classes Person. And I want to reorder them. No drag and drop outside the application, not even outside of control. I have found only single one tutorial: <a href=""http://www.opensubscriber.com/message/pyqt@riverbankcomputing.com/11937592.html"" rel=""nofollow"">link text</a>. But is it the only way? Cannot it be done without encoding the Python object into ByteArray. I need really simple solution for my only one class Person. Thank you.</p>",python|drag-and-drop|pyqt|qtreeview,"<p>Do not try to implement drag and drop by reparenting the underlying python object.  This won't work if the drag comes from outside your process; nor will it work for a copy operation (your node objects probably cannot exist in multiple places in the tree).</p>

<p>Think of a drag and drop ""move"" as three operations:</p>

<ol>
<li>serialize the data to some byte string</li>
<li>deserialize into a new index (or new indexes)</li>
<li>(optional: if ""move"" rather than ""copy"") remove the old index(es)</li>
</ol>

<p>mineData() and dropMimeData() are the serialize and deserialize operations that you provide.  Python provides some easy ways to implement them -- check the documentation for the pickle module.  If you're lucky, pickle.dumps() and pickle.loads() will work out-of-the-box for you.</p>

<p>Edit: I couldn't figure out how to paste code in comments, so here's the solution my comment refers to. This is safe, in the sense that it will fail by throwing a KeyError instead of causing crashes if you happen to break your rules.</p>

<pre><code># drag: store off the data in a safe place, and serialize a cooky
# that the drop target can use to retrieve the data.
self.__tmp_storage_dct = { self.__tmp_storage_cooky: stuff }
m.setData(self.rowlistptr_mime_type, QByteArray(pickle.dumps(self.__tmp_storage_cooky)))
self.__tmp_storage_cooky += 1

# drop:
if mime.hasFormat(self.rowlistptr_mime_type):
  print ""got tmpstorage""
  cooky = pickle.loads(mime.data(self.rowlistptr_mime_type).data())
  nodes = self.__tmp_storage_dct.pop(cooky)
</code></pre>",2
4216139,Python object in QMimeData,"<p>I'm implementing drag and drop QTreeView based on my custom model. All works fine, my tree displays data, drag and drop is enabled and now the last step lies ahead of me - to drop and trasfer dragged data. To do this I need to implement mimeTypes, mimeData and dropMimeData methods in my model. And now my question: Is there any easy standard way how to pass an arbitrary Python object through QMimeData? I'm doing just an internal move within QTreeView which displays hierarchy of my Python classes Person. And I want to reorder them. No drag and drop outside the application, not even outside of control. I have found only single one tutorial: <a href=""http://www.opensubscriber.com/message/pyqt@riverbankcomputing.com/11937592.html"" rel=""nofollow"">link text</a>. But is it the only way? Cannot it be done without encoding the Python object into ByteArray. I need really simple solution for my only one class Person. Thank you.</p>",python|drag-and-drop|pyqt|qtreeview,"<p>Ok, I think I have a possible solution for you.</p>

<p>Keep in mind that I am a complete neophyte in this area so no warranties that his a) works b) is a decent solution c) won't make a ""real"" programmer toss their lunch.</p>

<p>What I did was convert the entire ancestor tree of a particular item into a text list of row column pairs.  (i.e. list the row and column of the dragged item, the row and column of its parent, the row and column of its parent's parent, etc... till we get to an invalid index - i.e. the root)</p>

<p>This looks something like this (this example shows that the dragged item is four levels deep):</p>

<pre><code>2;0,1;0,5;0,1,0
^   ^   ^   ^
|   |   |   |
|   |   |   great grandparent (and child of the root item)
|   |   |
|   |   grandparent
|   |
|   parent
|
item being dragged
</code></pre>

<p>Later, in the dropMimeData function, I reverse the list (so that it reads from the root back down to the item being dragged) and build the indexes one at a time till I get back to the originally dragged item.</p>

<p>Here are the snippets of code that make that all work.  Again, I can't warrantee that this is a good idea, just that it appears to work and does not require that you serialize your python objects into a ByteArray.</p>

<p>Hope this helps.</p>

<pre><code>#---------------------------------------------------------------------------
def mimeTypes(self):
    """"""
    Only accept the internal custom drop type which is plain text
    """"""
    types = QtCore.QStringList() 
    types.append('text/plain') 
    return types 


#---------------------------------------------------------------------------
def mimeData(self, index): 
    """"""
    Wrap the index up as a list of rows and columns of each 
    parent/grandparent/etc
    """"""
    rc = """"
    theIndex = index[0] #&lt;- for testing purposes we only deal with 1st item
    while theIndex.isValid():
        rc = rc + str(theIndex.row()) + "";"" + str(theIndex.column())
        theIndex = self.parent(theIndex)
        if theIndex.isValid():
            rc = rc + "",""
    mimeData = QtCore.QMimeData()
    mimeData.setText(rc)
    return mimeData


#---------------------------------------------------------------------------
def dropMimeData(self, data, action, row, column, parentIndex):
    """"""
    Extract the whole ancestor list of rows and columns and rebuild the 
    index item that was originally dragged
    """"""
    if action == QtCore.Qt.IgnoreAction: 
        return True 

    if data.hasText():
        ancestorL = str(data.text()).split("","")
        ancestorL.reverse() #&lt;- stored from the child up, we read from ancestor down
        pIndex = QtCore.QModelIndex()
        for ancestor in ancestorL:
            srcRow = int(ancestor.split("";"")[0])
            srcCol = int(ancestor.split("";"")[1])
            itemIndex = self.index(srcRow, srcCol, pIndex)
            pIndex = itemIndex

    print itemIndex.internalPointer().get_name()
    return True
</code></pre>",1
4159006,How can I convert a batch of Mavenized examples into a format that Eclipse understands?,"<p>I'm in the process of looking at taking some examples that are currently in one format (NOT Mavenized - actually in ANT form) and trying to find an automated way to munge them into something that Eclipse can comprehend. Though I have several years of Java and other odd languages, doing this in Java sounds like using a sledgehammer to drive a nail. </p>

<p>I've been looking into scripting languages such as Ruby, Python, Perl, and so on. I have no experience with any of them, but would be happy to learn. </p>

<p>How can I take an example in one format (directory or directory with files) and restructure it into something approximating an Eclipse project? For example, I'd like to take a tree with the following structure</p>

<pre><code>dir my_example
  - build.xml
  - deployment.xml
  - jboss-esb-unfiltered.xml
  - log4j.xml
  - readme.txt
</code></pre>

<p>and convert it to</p>

<pre><code>dir1 my_example_eclipse
  - dir src
    - [empty]
  - dir esbcontent
    - dir META-INF
      - deployment.xml
      - jboss-esb-unfiltered.xml
    - log4j.xml
  - readme.txt
</code></pre>

<p>In addition, I need the ability to create certain hidden files that Eclipse needs. One of these is the .project file like this:</p>

<pre><code>&lt;?xml version=""1.0"" encoding=""UTF-8""?&gt;
&lt;projectDescription&gt;
&lt;name&gt;helloworld&lt;/name&gt;
&lt;comment&gt;&lt;/comment&gt;
&lt;projects&gt;
&lt;/projects&gt;
&lt;buildSpec&gt;
    &lt;buildCommand&gt;
        &lt;name&gt;org.eclipse.jdt.core.javabuilder&lt;/name&gt;
        &lt;arguments&gt;
        &lt;/arguments&gt;
    &lt;/buildCommand&gt;
    &lt;buildCommand&gt;
        &lt;name&gt;org.eclipse.wst.common.project.facet.core.builder&lt;/name&gt;
        &lt;arguments&gt;
        &lt;/arguments&gt;
    &lt;/buildCommand&gt;
    &lt;buildCommand&gt;
        &lt;name&gt;org.eclipse.wst.validation.validationbuilder&lt;/name&gt;
        &lt;arguments&gt;
        &lt;/arguments&gt;
    &lt;/buildCommand&gt;
&lt;/buildSpec&gt;
&lt;natures&gt;
    &lt;nature&gt;org.eclipse.wst.common.project.facet.core.nature&lt;/nature&gt;
    &lt;nature&gt;org.eclipse.jdt.core.javanature&lt;/nature&gt;
    &lt;nature&gt;org.eclipse.wst.common.modulecore.ModuleCoreNature&lt;/nature&gt;
    &lt;nature&gt;org.eclipse.jem.workbench.JavaEMFNature&lt;/nature&gt;
&lt;/natures&gt;
&lt;/projectDescription&gt;
</code></pre>

<p>How would I create a text file with one of these scripting languages?</p>

<p>Thanks in advance.</p>",python|ruby|eclipse|perl|maven,"<p>This should do what you need (in Python):</p>

<pre><code>import os
import shutil

def maven_to_eclipse(maven_dir, eclipse_dir):
    # assumes mode of maven_dir will be the same as eclipse_dir
    new_mode = os.stat(maven_dir).st_mode
    if os.path.exists(eclipse_dir):
        # if new_dir doesn't exist
        # create it with same permissions as old_dir
        os.mkdirs(eclipse_dir, new_mode)

    # create directories under new_dir: src, ebscontent, ebscontent/META-INF
    # use os.path.join to work on multiple os 
    os.mkdir(os.path.join(eclipse_dir, 'src'), new_mode)
    os.mkdir(os.path.join(eclipse_dir, 'ebscontent'), new_mode)
    os.mkdir(os.path.join(eclipse_dir, 'ebscontent', 'META-INF'), new_mode)

    # cp old/deployment.xml new/ebsconent/META-INF/deployment.xml
    shutil.copy2(os.path.join(maven_dir, 'deployment.xml'),
        os.path.join(eclipse_dir, 'ebscontent', 'META-INF', 'deployment.xml'))

    # cp old/jboss-esb-unfiltered.xml new/ebsconent/META-INF/jboss-esb-unfiltered.xml
    shutil.copy2(os.path.join(maven_dir, 'jboss-esb-unfiltered.xml'),
        os.path.join(eclipse_dir, 'ebscontent', 'META-INF', 'jboss-esb-unfiltered.xml'))

    # cp old/log4j.xml new/ebsconent/log4j.xml
    shutil.copy2(os.path.join(maven_dir, 'log4j.xml'),
        os.path.join(eclipse_dir, 'ebscontent', 'log4j.xml'))

    # cp old/readme.txt new/readme.txt
    shutil.copy2(os.path.join(maven_dir, 'readme.txt'),
        os.path.join(eclipse_dir, 'readme.txt'))

if __name__ == '__main__':
    base_path = 'C:\\Path\\To\\Maven Dirs'
    maven_dirs = ('my_example', 'another_example', 'third_example')
    for maven_dir in maven_dirs:
        maven_to_eclipse(os.path.join(base_path, maven_dir), 
            os.path.join(base_bath, maven_dir + '_eclipse'))
</code></pre>

<p>This should work on multiple OSes.  This could have been written shorter, but would be more confusing to a newbie.  No attempt is made to catch exceptions.  For example, os.mkdirs might fail if the new directory already exists.</p>

<p>Change <code>base_path</code> and <code>maven_dirs</code> before running.</p>",0
4159006,How can I convert a batch of Mavenized examples into a format that Eclipse understands?,"<p>I'm in the process of looking at taking some examples that are currently in one format (NOT Mavenized - actually in ANT form) and trying to find an automated way to munge them into something that Eclipse can comprehend. Though I have several years of Java and other odd languages, doing this in Java sounds like using a sledgehammer to drive a nail. </p>

<p>I've been looking into scripting languages such as Ruby, Python, Perl, and so on. I have no experience with any of them, but would be happy to learn. </p>

<p>How can I take an example in one format (directory or directory with files) and restructure it into something approximating an Eclipse project? For example, I'd like to take a tree with the following structure</p>

<pre><code>dir my_example
  - build.xml
  - deployment.xml
  - jboss-esb-unfiltered.xml
  - log4j.xml
  - readme.txt
</code></pre>

<p>and convert it to</p>

<pre><code>dir1 my_example_eclipse
  - dir src
    - [empty]
  - dir esbcontent
    - dir META-INF
      - deployment.xml
      - jboss-esb-unfiltered.xml
    - log4j.xml
  - readme.txt
</code></pre>

<p>In addition, I need the ability to create certain hidden files that Eclipse needs. One of these is the .project file like this:</p>

<pre><code>&lt;?xml version=""1.0"" encoding=""UTF-8""?&gt;
&lt;projectDescription&gt;
&lt;name&gt;helloworld&lt;/name&gt;
&lt;comment&gt;&lt;/comment&gt;
&lt;projects&gt;
&lt;/projects&gt;
&lt;buildSpec&gt;
    &lt;buildCommand&gt;
        &lt;name&gt;org.eclipse.jdt.core.javabuilder&lt;/name&gt;
        &lt;arguments&gt;
        &lt;/arguments&gt;
    &lt;/buildCommand&gt;
    &lt;buildCommand&gt;
        &lt;name&gt;org.eclipse.wst.common.project.facet.core.builder&lt;/name&gt;
        &lt;arguments&gt;
        &lt;/arguments&gt;
    &lt;/buildCommand&gt;
    &lt;buildCommand&gt;
        &lt;name&gt;org.eclipse.wst.validation.validationbuilder&lt;/name&gt;
        &lt;arguments&gt;
        &lt;/arguments&gt;
    &lt;/buildCommand&gt;
&lt;/buildSpec&gt;
&lt;natures&gt;
    &lt;nature&gt;org.eclipse.wst.common.project.facet.core.nature&lt;/nature&gt;
    &lt;nature&gt;org.eclipse.jdt.core.javanature&lt;/nature&gt;
    &lt;nature&gt;org.eclipse.wst.common.modulecore.ModuleCoreNature&lt;/nature&gt;
    &lt;nature&gt;org.eclipse.jem.workbench.JavaEMFNature&lt;/nature&gt;
&lt;/natures&gt;
&lt;/projectDescription&gt;
</code></pre>

<p>How would I create a text file with one of these scripting languages?</p>

<p>Thanks in advance.</p>",python|ruby|eclipse|perl|maven,"<p>Before you do any ""munging"", I'd try getting your maven examples working in eclipse first.  Eclipse has several plugins for working out of maven-based projects.  </p>",2
4159006,How can I convert a batch of Mavenized examples into a format that Eclipse understands?,"<p>I'm in the process of looking at taking some examples that are currently in one format (NOT Mavenized - actually in ANT form) and trying to find an automated way to munge them into something that Eclipse can comprehend. Though I have several years of Java and other odd languages, doing this in Java sounds like using a sledgehammer to drive a nail. </p>

<p>I've been looking into scripting languages such as Ruby, Python, Perl, and so on. I have no experience with any of them, but would be happy to learn. </p>

<p>How can I take an example in one format (directory or directory with files) and restructure it into something approximating an Eclipse project? For example, I'd like to take a tree with the following structure</p>

<pre><code>dir my_example
  - build.xml
  - deployment.xml
  - jboss-esb-unfiltered.xml
  - log4j.xml
  - readme.txt
</code></pre>

<p>and convert it to</p>

<pre><code>dir1 my_example_eclipse
  - dir src
    - [empty]
  - dir esbcontent
    - dir META-INF
      - deployment.xml
      - jboss-esb-unfiltered.xml
    - log4j.xml
  - readme.txt
</code></pre>

<p>In addition, I need the ability to create certain hidden files that Eclipse needs. One of these is the .project file like this:</p>

<pre><code>&lt;?xml version=""1.0"" encoding=""UTF-8""?&gt;
&lt;projectDescription&gt;
&lt;name&gt;helloworld&lt;/name&gt;
&lt;comment&gt;&lt;/comment&gt;
&lt;projects&gt;
&lt;/projects&gt;
&lt;buildSpec&gt;
    &lt;buildCommand&gt;
        &lt;name&gt;org.eclipse.jdt.core.javabuilder&lt;/name&gt;
        &lt;arguments&gt;
        &lt;/arguments&gt;
    &lt;/buildCommand&gt;
    &lt;buildCommand&gt;
        &lt;name&gt;org.eclipse.wst.common.project.facet.core.builder&lt;/name&gt;
        &lt;arguments&gt;
        &lt;/arguments&gt;
    &lt;/buildCommand&gt;
    &lt;buildCommand&gt;
        &lt;name&gt;org.eclipse.wst.validation.validationbuilder&lt;/name&gt;
        &lt;arguments&gt;
        &lt;/arguments&gt;
    &lt;/buildCommand&gt;
&lt;/buildSpec&gt;
&lt;natures&gt;
    &lt;nature&gt;org.eclipse.wst.common.project.facet.core.nature&lt;/nature&gt;
    &lt;nature&gt;org.eclipse.jdt.core.javanature&lt;/nature&gt;
    &lt;nature&gt;org.eclipse.wst.common.modulecore.ModuleCoreNature&lt;/nature&gt;
    &lt;nature&gt;org.eclipse.jem.workbench.JavaEMFNature&lt;/nature&gt;
&lt;/natures&gt;
&lt;/projectDescription&gt;
</code></pre>

<p>How would I create a text file with one of these scripting languages?</p>

<p>Thanks in advance.</p>",python|ruby|eclipse|perl|maven,"<blockquote>
  <p>How can I convert a batch of Mavenized examples into a format that Eclipse understands?</p>
</blockquote>

<p>Eclipse can understand Mavenized projects. You have two options:</p>

<ul>
<li><p>use the <a href=""http://maven.apache.org/plugins/maven-eclipse-plugin/"" rel=""nofollow"">Maven Eclipse Plugin</a> (a Maven plugin) and run <code>mvn eclipse:eclipse</code> on a Mavenized example to generate the <code>.project</code> and <code>.classpath</code> and then import it as <strong>Existing Project</strong> into Eclipse.</p></li>
<li><p>use the <a href=""http://m2eclipse.sonatype.org/"" rel=""nofollow"">m2eclipse</a> plugin (an Eclipse plugin) to directly import an <strong>Existing Maven Project</strong> into your workspace.</p></li>
</ul>

<p>Both approach are exclusive, use one or the the other. Nowadays, people tend to prefer the m2eclipse plugin that provides full Maven integration. </p>",5
4481505,Grabbing non-HTML data from a website using python,"<p>I'm trying to get the current contract prices on this page to a string: <a href=""http://www.cmegroup.com/trading/equity-index/us-index/e-mini-sandp500.html"" rel=""nofollow"">http://www.cmegroup.com/trading/equity-index/us-index/e-mini-sandp500.html</a></p>

<p>I would really like a python 2.6 solution.</p>

<p>It was easy to get the page html using urllib, but it seems like this number is live and not in the html.  I inspected the element in Chrome and it's some td class thing.</p>

<p>But I don't know how to get at this with python.  I tried beautifulsoup (but after several attempts gave up getting a tar.gz to work on my windows x64 system), and then elementtree, but really my programming interest is data analysis. I'm not a website designer and don't really want to become one, so it's all kind of a foreign language.  Is this live price XML?</p>

<p>Any assistance gratefully received. Ideally a simple to install module and some actual code, but all hints and tips very welcome.</p>",python|python-2.6,"<p>Its hard to know what to tell you wothout knowing where the number is coming from. It could be php or asp also, so you are going to have to figure out which language the number is in.</p>",0
4481505,Grabbing non-HTML data from a website using python,"<p>I'm trying to get the current contract prices on this page to a string: <a href=""http://www.cmegroup.com/trading/equity-index/us-index/e-mini-sandp500.html"" rel=""nofollow"">http://www.cmegroup.com/trading/equity-index/us-index/e-mini-sandp500.html</a></p>

<p>I would really like a python 2.6 solution.</p>

<p>It was easy to get the page html using urllib, but it seems like this number is live and not in the html.  I inspected the element in Chrome and it's some td class thing.</p>

<p>But I don't know how to get at this with python.  I tried beautifulsoup (but after several attempts gave up getting a tar.gz to work on my windows x64 system), and then elementtree, but really my programming interest is data analysis. I'm not a website designer and don't really want to become one, so it's all kind of a foreign language.  Is this live price XML?</p>

<p>Any assistance gratefully received. Ideally a simple to install module and some actual code, but all hints and tips very welcome.</p>",python|python-2.6,"<p>If you look at that website with something like <a href=""http://getfirebug.com/"" rel=""nofollow"">firebug</a>, you can see the AJAX calls it's making.  For instance the initial values are being filled in with a AJAX call (at least for me) to:</p>

<p><a href=""http://www.cmegroup.com/CmeWS/md/MDServer/V1/Venue/G/Exchange/XCME/FOI/FUT/Product/ES?currentTime=1292780678142&amp;contractCDs=,ESH1,ESM1,ESU1,ESZ1,ESH2,ESH1,ESM1,ESU1,ESZ1,ESH2"" rel=""nofollow"">http://www.cmegroup.com/CmeWS/md/MDServer/V1/Venue/G/Exchange/XCME/FOI/FUT/Product/ES?currentTime=1292780678142&amp;contractCDs=,ESH1,ESM1,ESU1,ESZ1,ESH2,ESH1,ESM1,ESU1,ESZ1,ESH2</a></p>

<p>This is returning a JSON response, which is then parsed by javascript to fill in the tabel.  It would be pretty simple to do that yourself with urllib and then use simplejson to parse the response. </p>

<p><strong>Also, you should read this <a href=""http://www.cmegroup.com/disclaimer.html"" rel=""nofollow"">disclaimer</a> very carefully.</strong>  What you are trying to do is probably not cool with the owners of the web-site.</p>",1
4481505,Grabbing non-HTML data from a website using python,"<p>I'm trying to get the current contract prices on this page to a string: <a href=""http://www.cmegroup.com/trading/equity-index/us-index/e-mini-sandp500.html"" rel=""nofollow"">http://www.cmegroup.com/trading/equity-index/us-index/e-mini-sandp500.html</a></p>

<p>I would really like a python 2.6 solution.</p>

<p>It was easy to get the page html using urllib, but it seems like this number is live and not in the html.  I inspected the element in Chrome and it's some td class thing.</p>

<p>But I don't know how to get at this with python.  I tried beautifulsoup (but after several attempts gave up getting a tar.gz to work on my windows x64 system), and then elementtree, but really my programming interest is data analysis. I'm not a website designer and don't really want to become one, so it's all kind of a foreign language.  Is this live price XML?</p>

<p>Any assistance gratefully received. Ideally a simple to install module and some actual code, but all hints and tips very welcome.</p>",python|python-2.6,"<p>It looks like the numbers in the table are filled in by Javascript, so just fetching the HTML with urllib or another library won't be enough since they don't run the javascript. You'll need to use a library like PyQt to simulate the browser rendering the page/executing the JS to fill in the numbers, then scrape the output HTML of that.</p>

<p>See this blog post on working with PyQt: <a href=""http://blog.motane.lu/2009/07/07/downloading-a-pages-content-with-python-and-webkit/"" rel=""nofollow"">http://blog.motane.lu/2009/07/07/downloading-a-pages-content-with-python-and-webkit/</a><a href=""http://blog.motane.lu/2009/07/07/downloading-a-pages-content-with-python-and-webkit/"" rel=""nofollow"">link text</a></p>",2
4205854,Python - Way to recursively find and replace string in text files,"<p>I want to recursively search through a directory with subdirectories of text files and replace every occurrence of {$replace} within the files with the contents of a multi line string. How can this be achieved with python?</p>

<p><strong>[EDIT]</strong></p>

<p>So far all I have is the recursive code using os.walk to get a list of files that are required to be changed.</p>

<pre><code>import os
import sys
fileList = []
rootdir = ""C:\\test""
for root, subFolders, files in os.walk(rootdir):
  if subFolders != "".svn"":
    for file in files:
      fileParts = file.split('.')
      if len(fileParts) &gt; 1:
        if fileParts[1] == ""php"":
          fileList.append(os.path.join(root,file))


print fileList
</code></pre>",python,"<p>How about just using:</p>

<pre><code>clean = ''.join([e for e in text if e != 'string'])
</code></pre>",0
4205854,Python - Way to recursively find and replace string in text files,"<p>I want to recursively search through a directory with subdirectories of text files and replace every occurrence of {$replace} within the files with the contents of a multi line string. How can this be achieved with python?</p>

<p><strong>[EDIT]</strong></p>

<p>So far all I have is the recursive code using os.walk to get a list of files that are required to be changed.</p>

<pre><code>import os
import sys
fileList = []
rootdir = ""C:\\test""
for root, subFolders, files in os.walk(rootdir):
  if subFolders != "".svn"":
    for file in files:
      fileParts = file.split('.')
      if len(fileParts) &gt; 1:
        if fileParts[1] == ""php"":
          fileList.append(os.path.join(root,file))


print fileList
</code></pre>",python,"<p>Sulpy's answer is good but incomplete. The user would be likely to want to input the parameters through an entry widget, so we might have something more like this (also incomplete, but left as an exercise):</p>

<pre><code>import os, fnmatch
from Tkinter import *
fields = 'Folder', 'Search', 'Replace', 'FilePattern'

def fetch(entvals):
#    print entvals
#    print ents
    entItems = entvals.items()
    for entItem in entItems:
        field = entItem[0]
        text  = entItem[1].get()
        print('%s: ""%s""' % (field, text))

def findReplace(entvals):
#    print ents
    directory = entvals.get(""Folder"").get()
    find = entvals.get(""Search"").get()
    replace = entvals.get(""Replace"").get()
    filePattern = entvals.get(""FilePattern"").get()
    for path, dirs, files in os.walk(os.path.abspath(directory)):
        for filename in fnmatch.filter(files, filePattern):
#            print filename
            filepath = os.path.join(path, filename)
            print filepath  # Can be commented out --  used for confirmation
            with open(filepath) as f:
                s = f.read()
            s = s.replace(find, replace)
            with open(filepath, ""w"") as f:
                f.write(s)

def makeform(root, fields):
    entvals = {}
    for field in fields:
        row = Frame(root)
        lab = Label(row, width=17, text=field+"": "", anchor='w')
        ent = Entry(row)
        row.pack(side=TOP, fill=X, padx=5, pady=5)
        lab.pack(side=LEFT)
        ent.pack(side=RIGHT, expand=YES, fill=X)
        entvals[field] = ent
#        print ent
    return entvals

if __name__ == '__main__':
    root = Tk()
    root.title(""Recursive S&amp;R"")
    ents = makeform(root, fields)
#    print ents
    root.bind('&lt;Return&gt;', (lambda event, e=ents: fetch(e)))
    b1 = Button(root, text='Show', command=(lambda e=ents: fetch(e)))
    b1.pack(side=LEFT, padx=5, pady=5)
    b2 = Button(root, text='Execute', command=(lambda e=ents: findReplace(e)))
    b2.pack(side=LEFT, padx=5, pady=5)
    b3 = Button(root, text='Quit', command=root.quit)
    b3.pack(side=LEFT, padx=5, pady=5)
    root.mainloop()
</code></pre>",1
4205854,Python - Way to recursively find and replace string in text files,"<p>I want to recursively search through a directory with subdirectories of text files and replace every occurrence of {$replace} within the files with the contents of a multi line string. How can this be achieved with python?</p>

<p><strong>[EDIT]</strong></p>

<p>So far all I have is the recursive code using os.walk to get a list of files that are required to be changed.</p>

<pre><code>import os
import sys
fileList = []
rootdir = ""C:\\test""
for root, subFolders, files in os.walk(rootdir):
  if subFolders != "".svn"":
    for file in files:
      fileParts = file.split('.')
      if len(fileParts) &gt; 1:
        if fileParts[1] == ""php"":
          fileList.append(os.path.join(root,file))


print fileList
</code></pre>",python,"<p>Here's my code (which I think is the same as the above but I'm including it just in case there's something subtly different about it):</p>

<pre><code>import os, fnmatch, sys
def findReplace(directory, find, replace, filePattern):
    for path, dirs, files in os.walk(os.path.abspath(directory)):
        for filename in fnmatch.filter(files, filePattern):         
            filepath = os.path.join(path, filename)
            with open(filepath) as f:
                s = f.read()
            s = s.replace(find, replace)
            with open(filepath, ""w"") as f:
                f.write(s)
</code></pre>

<p>it runs without error. 
BUT, the file, in <code>z:\test</code> is unchanged.
I've put in print statements, like <code>print(""got here"")</code> but they don't print out either.</p>",0
4205854,Python - Way to recursively find and replace string in text files,"<p>I want to recursively search through a directory with subdirectories of text files and replace every occurrence of {$replace} within the files with the contents of a multi line string. How can this be achieved with python?</p>

<p><strong>[EDIT]</strong></p>

<p>So far all I have is the recursive code using os.walk to get a list of files that are required to be changed.</p>

<pre><code>import os
import sys
fileList = []
rootdir = ""C:\\test""
for root, subFolders, files in os.walk(rootdir):
  if subFolders != "".svn"":
    for file in files:
      fileParts = file.split('.')
      if len(fileParts) &gt; 1:
        if fileParts[1] == ""php"":
          fileList.append(os.path.join(root,file))


print fileList
</code></pre>",python,"<p>To avoid recursing into <code>.svn</code> directories, <a href=""https://docs.python.org/3/library/os.html#os.walk"" rel=""nofollow noreferrer""><code>os.walk()</code></a> allows you to change the <code>dirs</code> list inplace. To simplify the text replacement in a file without requiring to read the whole file in memory, you could use <a href=""https://docs.python.org/3/library/fileinput.html"" rel=""nofollow noreferrer""><code>fileinput</code> module</a>. And to filter filenames using a file pattern, you could use <a href=""https://docs.python.org/3/library/fnmatch.html#fnmatch.filter"" rel=""nofollow noreferrer""><code>fnmatch</code> module</a> as <a href=""https://stackoverflow.com/a/15629678/4279"">suggested by @David Sulpy</a>:</p>

<pre><code>#!/usr/bin/env python
from __future__ import print_function
import fnmatch
import os
from fileinput import FileInput

def find_replace(topdir, file_pattern, text, replacement):
    for dirpath, dirs, files in os.walk(topdir, topdown=True):
        dirs[:] = [d for d in dirs if d != '.svn'] # skip .svn dirs
        files = [os.path.join(dirpath, filename)
                 for filename in fnmatch.filter(files, file_pattern)]
        for line in FileInput(files, inplace=True):
            print(line.replace(text, replacement), end='')

find_replace(r""C:\test"", ""*.php"", '{$replace}', ""multiline\nreplacement"")
</code></pre>",6
4205854,Python - Way to recursively find and replace string in text files,"<p>I want to recursively search through a directory with subdirectories of text files and replace every occurrence of {$replace} within the files with the contents of a multi line string. How can this be achieved with python?</p>

<p><strong>[EDIT]</strong></p>

<p>So far all I have is the recursive code using os.walk to get a list of files that are required to be changed.</p>

<pre><code>import os
import sys
fileList = []
rootdir = ""C:\\test""
for root, subFolders, files in os.walk(rootdir):
  if subFolders != "".svn"":
    for file in files:
      fileParts = file.split('.')
      if len(fileParts) &gt; 1:
        if fileParts[1] == ""php"":
          fileList.append(os.path.join(root,file))


print fileList
</code></pre>",python,"<p>os.walk is great. However, it looks like you need to filer file types (which I would suggest if you are going to walk some directory). To do this, you should add <code>import fnmatch</code>.</p>

<pre><code>import os, fnmatch
def findReplace(directory, find, replace, filePattern):
    for path, dirs, files in os.walk(os.path.abspath(directory)):
        for filename in fnmatch.filter(files, filePattern):
            filepath = os.path.join(path, filename)
            with open(filepath) as f:
                s = f.read()
            s = s.replace(find, replace)
            with open(filepath, ""w"") as f:
                f.write(s)
</code></pre>

<p>This allows you to do something like:</p>

<pre><code>findReplace(""some_dir"", ""find this"", ""replace with this"", ""*.txt"")
</code></pre>",51
4205854,Python - Way to recursively find and replace string in text files,"<p>I want to recursively search through a directory with subdirectories of text files and replace every occurrence of {$replace} within the files with the contents of a multi line string. How can this be achieved with python?</p>

<p><strong>[EDIT]</strong></p>

<p>So far all I have is the recursive code using os.walk to get a list of files that are required to be changed.</p>

<pre><code>import os
import sys
fileList = []
rootdir = ""C:\\test""
for root, subFolders, files in os.walk(rootdir):
  if subFolders != "".svn"":
    for file in files:
      fileParts = file.split('.')
      if len(fileParts) &gt; 1:
        if fileParts[1] == ""php"":
          fileList.append(os.path.join(root,file))


print fileList
</code></pre>",python,"<h3>Multiple files string change</h3>

<p>import glob</p>

<p>for allfiles in glob.glob('*.txt'):</p>

<pre><code>for line in open(allfiles,'r'):
    change=line.replace(""old_string"",""new_string"")
    output=open(allfiles,'w')
    output.write(change)    
</code></pre>",-3
4205854,Python - Way to recursively find and replace string in text files,"<p>I want to recursively search through a directory with subdirectories of text files and replace every occurrence of {$replace} within the files with the contents of a multi line string. How can this be achieved with python?</p>

<p><strong>[EDIT]</strong></p>

<p>So far all I have is the recursive code using os.walk to get a list of files that are required to be changed.</p>

<pre><code>import os
import sys
fileList = []
rootdir = ""C:\\test""
for root, subFolders, files in os.walk(rootdir):
  if subFolders != "".svn"":
    for file in files:
      fileParts = file.split('.')
      if len(fileParts) &gt; 1:
        if fileParts[1] == ""php"":
          fileList.append(os.path.join(root,file))


print fileList
</code></pre>",python,"<p>Use:</p>

<pre><code>pip3 install manip
</code></pre>

<p>This lets you use a decorator to create something like:</p>

<pre><code>@manip(at='.php$', recursive=True) # to apply to subfolders
def replace_on_php(text, find, replacement):
    return text.replace(find, replacement)
</code></pre>

<p>Now in your prompt you should be able to call</p>

<pre><code>replace_on_php('explode', 'myCustomExplode', path='./myPhPFiles', modify=True)
</code></pre>

<p>and this should make the function apply itself on the entire folder.</p>",0
4205854,Python - Way to recursively find and replace string in text files,"<p>I want to recursively search through a directory with subdirectories of text files and replace every occurrence of {$replace} within the files with the contents of a multi line string. How can this be achieved with python?</p>

<p><strong>[EDIT]</strong></p>

<p>So far all I have is the recursive code using os.walk to get a list of files that are required to be changed.</p>

<pre><code>import os
import sys
fileList = []
rootdir = ""C:\\test""
for root, subFolders, files in os.walk(rootdir):
  if subFolders != "".svn"":
    for file in files:
      fileParts = file.split('.')
      if len(fileParts) &gt; 1:
        if fileParts[1] == ""php"":
          fileList.append(os.path.join(root,file))


print fileList
</code></pre>",python,"<p>Check out <a href=""http://docs.python.org/library/os.html#os.walk"" rel=""noreferrer"">os.walk</a>:</p>

<pre><code>import os
replacement = """"""some
multi-line string""""""
for dname, dirs, files in os.walk(""some_dir""):
    for fname in files:
        fpath = os.path.join(dname, fname)
        with open(fpath) as f:
            s = f.read()
        s = s.replace(""{$replace}"", replacement)
        with open(fpath, ""w"") as f:
            f.write(s)
</code></pre>

<p>The above solution has flaws, such as the fact that it opens literally every file it finds, or the fact that each file is read entirely into memory (which would be bad if you had a 1GB text file), but it should be a good starting point.</p>

<p>You also may want to look into the <a href=""http://docs.python.org/library/re.html"" rel=""noreferrer"">re module</a> if you want to do a more complex find/replace than looking for a specific string.</p>",27
4205854,Python - Way to recursively find and replace string in text files,"<p>I want to recursively search through a directory with subdirectories of text files and replace every occurrence of {$replace} within the files with the contents of a multi line string. How can this be achieved with python?</p>

<p><strong>[EDIT]</strong></p>

<p>So far all I have is the recursive code using os.walk to get a list of files that are required to be changed.</p>

<pre><code>import os
import sys
fileList = []
rootdir = ""C:\\test""
for root, subFolders, files in os.walk(rootdir):
  if subFolders != "".svn"":
    for file in files:
      fileParts = file.split('.')
      if len(fileParts) &gt; 1:
        if fileParts[1] == ""php"":
          fileList.append(os.path.join(root,file))


print fileList
</code></pre>",python,"<p>For those using <strong>Python 3.5+</strong> you can now use a <a href=""https://docs.python.org/3/library/glob.html"" rel=""noreferrer"">glob</a> recursively with the use of <code>**</code> and the <code>recursive</code> flag.</p>

<p>Here's an example replacing <code>hello</code> with <code>world</code> for all <code>.txt</code> files:</p>

<pre><code>for filepath in glob.iglob('./**/*.txt', recursive=True):
    with open(filepath) as file:
        s = file.read()
    s = s.replace('hello', 'world')
    with open(filepath, ""w"") as file:
        file.write(s)
</code></pre>",9
54191919,"Keras Error - expected block5_pool to have 4 dimensions, but got array with shape (6, 1)?","<p>i am trying to use VGG16 pretrained in Keras, but i keep getting this error:</p>

<blockquote>
  <p>ValueError: Error when checking target: expected block5_pool to have 4 dimensions, but got array with shape (6, 1)</p>
</blockquote>

<p>What is the error mean?</p>

<blockquote>
  <p>Error when checking target: expected block5_pool to have 4 dimensions,
  but got array with shape (6, 1)</p>
</blockquote>

<p>This the my actual code: </p>

<pre><code>from keras import applications
from keras.preprocessing.image import ImageDataGenerator
from keras.models import Sequential
from keras.layers import Conv2D, MaxPooling2D, ZeroPadding2D
from keras.layers import Activation, Dropout, Flatten, Dense
from keras import backend as K


# dimensions of our images.
img_width, img_height = 224, 224

train_data_dir = 'database/train'
validation_data_dir = 'database/validation'
nb_train_samples = 2000
nb_validation_samples = 26
epochs = 50
batch_size = 20

if K.image_data_format() == 'channels_first':
    input_shape = (3, img_width, img_height)
else:
    input_shape = (img_width, img_height, 3)

model = applications.VGG16(weights='imagenet', include_top=False, input_shape=(224, 224, 3))
print('VGG-16 Model loaded.')

top_model = Sequential()
top_model.add(ZeroPadding2D((1,1),input_shape=input_shape))
top_model.add(Conv2D(64, (3, 3), activation='relu'))
top_model.add(ZeroPadding2D((1,1)))
top_model.add(Conv2D(64, (3, 3), activation='relu'))
top_model.add(MaxPooling2D(pool_size=(2,2), strides=(2,2)))

top_model.add(ZeroPadding2D((1,1)))
top_model.add(Conv2D(128, (3, 3), activation='relu'))
top_model.add(ZeroPadding2D((1,1)))
top_model.add(Conv2D(128, (3, 3), activation='relu'))
top_model.add(MaxPooling2D((2,2), strides=(2,2)))

top_model.add(ZeroPadding2D((1,1)))
top_model.add(Conv2D(256, (3, 3), activation='relu'))
top_model.add(ZeroPadding2D((1,1)))
top_model.add(Conv2D(256, (3, 3), activation='relu'))
top_model.add(ZeroPadding2D((1,1)))
top_model.add(Conv2D(256, (3, 3), activation='relu'))
top_model.add(MaxPooling2D((2,2), strides=(2,2)))

top_model.add(ZeroPadding2D((1,1)))
top_model.add(Conv2D(512, (3, 3), activation='relu'))
top_model.add(ZeroPadding2D((1,1)))
top_model.add(Conv2D(512, (3, 3), activation='relu'))
top_model.add(ZeroPadding2D((1,1)))
top_model.add(Conv2D(512, (3, 3), activation='relu'))
top_model.add(MaxPooling2D((2,2), strides=(2,2)))

top_model.add(ZeroPadding2D((1,1)))
top_model.add(Conv2D(512, (3, 3), activation='relu'))
top_model.add(ZeroPadding2D((1,1)))
top_model.add(Conv2D(512, (3, 3), activation='relu'))
top_model.add(ZeroPadding2D((1,1)))
top_model.add(Conv2D(512, (3, 3), activation='relu'))
top_model.add(MaxPooling2D((2,2), strides=(2,2)))
top_model.add(Flatten())

top_model.add(Dense(4096, activation='relu'))
top_model.add(Dropout(0.5))
top_model.add(Dense(12))
top_model.add(Activation('softmax'))

# note that it is necessary to start with a fully-trained
# classifier, including the top classifier,
# in order to successfully do fine-tuning
# top_model.load_weights('./vgg16_face_weights.h5')

# add the model on top of the convolutional base
model.add_update(top_model)

# set the first 25 layers (up to the last conv block)
# to non-trainable (weights will not be updated)
for layer in model.layers[:25]:
    layer.trainable = False

model.compile(loss='sparse_categorical_crossentropy', optimizer='rmsprop', metrics=['accuracy'])

# this is the augmentation configuration we will use for training
train_datagen = ImageDataGenerator(
    rescale=1. / 255,
    shear_range=0.2,
    zoom_range=0.2,
    horizontal_flip=True)

# this is the augmentation configuration we will use for testing:
# only rescaling
test_datagen = ImageDataGenerator(rescale=1. / 255)

train_generator = train_datagen.flow_from_directory(
    train_data_dir,
    target_size=(img_width, img_height),
    batch_size=batch_size,
    class_mode='binary')

validation_generator = test_datagen.flow_from_directory(
    validation_data_dir,
    target_size=(img_width, img_height),
    batch_size=batch_size,
    class_mode='binary')

model.fit_generator(
    train_generator,
    steps_per_epoch=nb_train_samples // batch_size,
    epochs=epochs,
    validation_data=validation_generator,
    validation_steps=nb_validation_samples // batch_size)

model.save_weights('first_try.h5')
</code></pre>

<p>The terminal run:</p>

<pre><code>VGG-16 Model loaded.
Found 46 images belonging to 12 classes.
Found 26 images belonging to 12 classes.
Epoch 1/50
Traceback (most recent call last):
  File ""C:/Users/w024029h/PycharmProjects/keras_pretrained/pretrained.py"", line 113, in &lt;module&gt;
    validation_steps=nb_validation_samples // batch_size)
  File ""C:\Users\w024029h\AppData\Local\Programs\Python\Python36\lib\site-packages\keras\legacy\interfaces.py"", line 91, in wrapper
    return func(*args, **kwargs)
  File ""C:\Users\w024029h\AppData\Local\Programs\Python\Python36\lib\site-packages\keras\engine\training.py"", line 2230, in fit_generator
    class_weight=class_weight)
  File ""C:\Users\w024029h\AppData\Local\Programs\Python\Python36\lib\site-packages\keras\engine\training.py"", line 1877, in train_on_batch
    class_weight=class_weight)
  File ""C:\Users\w024029h\AppData\Local\Programs\Python\Python36\lib\site-packages\keras\engine\training.py"", line 1480, in _standardize_user_data
    exception_prefix='target')
  File ""C:\Users\w024029h\AppData\Local\Programs\Python\Python36\lib\site-packages\keras\engine\training.py"", line 113, in _standardize_input_data
    'with shape ' + str(data_shape))
ValueError: Error when checking target: expected block5_pool to have 4 dimensions, but got array with shape (6, 1)
</code></pre>",python-3.x|keras|vgg-net,"<p>I had this same error before. I resolved it by changing the class_mode on the data generators from 'binary' to None</p>

<p>According to the keras docs, setting the class_mode to 'binary' will return a 1-D array.</p>

<p>By changing the class_mode=None, no labels are returned and the generator will only yield batches of image data. This is what you are expecting with your model and this works well with the fit_generator() method. However, when using class_mode None, the data still needs to reside in a subdirectory of directory for it to work correctly.</p>

<p><a href=""https://keras.io/preprocessing/image/"" rel=""nofollow noreferrer"">This page was useful to me</a></p>

<p>^look at flow_from_directory()</p>

<p>Hope this helps!</p>",2
54238277,How to get object to move in a random pattern in pygame?,"<p>I have been working on an ""Asteroids"" remake. However I can not get the objects to move in a random motion. I'm sure this evolves using vectors, however I do not know how to randomly generate a vector for each individual asteroid. </p>

<p>I am looking for a motion similar to this motion shown in this <a href=""http://www.freeasteroids.org/"" rel=""nofollow noreferrer"">asteroid game</a>, however I have no idea how to even start. This is my code so far: </p>

<pre><code>import pygame as game
import random as r
import math

game.init()
game.display.set_caption(""Asteroids"")
screen = game.display.set_mode([800,600])
time=0
gameon=True
bgcolor = game.color.Color(""#f6cb39"")
black=game.color.Color(""black"")
badguy = game.image.load(""asteroid.png"")
badguy = game.transform.scale(badguy, (50, 50))
badguys=[]
SPAWNENEMY=10
CLOCK=11
game.time.set_timer(SPAWNENEMY,800)
game.time.set_timer(CLOCK,1000)

font=game.font.Font(None,20)
timetext=font.render(""Time: 0"", 0, black)

while gameon:
    screen.fill(bgcolor)
    event=game.event.poll()
    if event.type==SPAWNENEMY:
        bgbox = game.Rect(badguy.get_rect())
        bgbox.x = r.randint(50,800)
        bgbox.y = r.randint(50,600)
        badguys.append(bgbox)

    if event.type==game.QUIT:
        gameon=False;

    for bg in badguys:

        '''
        This is where I tried to put the mocment code,
        but I was unableto get randmom movments,
        only for asteroids to randomly appear or consistently
        move in one direction something like ""bg.x+=2""

        '''

    for bg in badguys:
        screen.blit(badguy,(bg.x,bg.y))

    game.display.flip()
</code></pre>

<p>I apologize if its a little long, I don't know what else I can cut out to create an MCV.</p>",python|python-3.x|vector|random|pygame,"<p>So each asteroid in your game is represented by a <code>Rect</code>, stored in <code>badguys</code>.</p>

<p>With a <code>Rect</code>, you're able to store a postion and a size (since a <code>Rect</code> has the attributes <code>x</code>, <code>y</code>, <code>width</code> and <code>height</code>).</p>

<p>Now, you want to store additional information/state for each asteroid, so only using a <code>Rect</code> is not enough. You need a different data structure that holds more fields.</p>

<p>Since you use python, the fitting data structure is a class that is able to hold the random vector. </p>

<p>But let's think a little bit further. Since you use pygame, pygame already offers a class for represting your game objects, and that class is called <a href=""https://www.pygame.org/docs/ref/sprite.html#pygame.sprite.Sprite"" rel=""nofollow noreferrer""><code>Sprite</code></a>.</p>

<p>So here we go (note the comments in the code):</p>

<pre><code>import pygame
import random

screen = pygame.display.set_mode((300, 300))
clock = pygame.time.Clock()

class Asteroid(pygame.sprite.Sprite):
    def __init__(self, x, y):
        super().__init__()

        # let's create an image of an asteroid by drawing some lines
        self.image = pygame.Surface((50, 50))
        self.image.set_colorkey((11, 12, 13))
        self.image.fill((11, 12, 13))
        pygame.draw.polygon(self.image, pygame.Color('grey'), [(0, 11), (20, 0), (50, 10), (15, 22), (27, 36), (10, 50), (0, 11)], 1)

        # Let's store a copy of that image to we can easily rotate the image
        self.org_image = self.image.copy()

        # The rect is used to store the position of the Sprite
        # this is required by pygame
        self.rect = self.image.get_rect(topleft=(x, y))

        # Let's create a random vector for the asteroid
        self.direction = pygame.Vector2(0, 0) 
        while self.direction.length() == 0:
            self.direction = pygame.Vector2(random.uniform(-1, 2), random.uniform(-1, 2))

        # Also we want a constant, random speed
        self.direction.normalize_ip()
        self.speed = random.uniform(0.1, 0.3)

        # we additionaly store the position in a vector, so the math is easy
        self.pos = pygame.Vector2(self.rect.center)

        # Aaaaaaaaaand a random rotation, because why not
        self.rotation = random.uniform(-0.3, 0.3)
        self.angle = 0

    def update(self, dt):
        # movement is easy, just add the position and direction vector
        self.pos += self.direction * self.speed * dt
        self.angle += self.rotation * dt
        self.image = pygame.transform.rotate(self.org_image, self.angle)

        # update the rect, because that's how pygame knows where to draw the sprite
        self.rect = self.image.get_rect(center=self.pos)

SPAWNENEMY = pygame.USEREVENT + 1
pygame.time.set_timer(SPAWNENEMY, 800)

asteroids = pygame.sprite.Group()
dt = 0
while True:
    for e in pygame.event.get():
        if e.type == pygame.QUIT:
            quit()
        if e.type == SPAWNENEMY:
            asteroids.add(Asteroid(random.randint(50, 200), random.randint(50, 200)))
    screen.fill(pygame.Color('black'))
    asteroids.draw(screen)
    asteroids.update(dt)
    pygame.display.flip()
    dt = clock.tick(60)
</code></pre>",1
54238277,How to get object to move in a random pattern in pygame?,"<p>I have been working on an ""Asteroids"" remake. However I can not get the objects to move in a random motion. I'm sure this evolves using vectors, however I do not know how to randomly generate a vector for each individual asteroid. </p>

<p>I am looking for a motion similar to this motion shown in this <a href=""http://www.freeasteroids.org/"" rel=""nofollow noreferrer"">asteroid game</a>, however I have no idea how to even start. This is my code so far: </p>

<pre><code>import pygame as game
import random as r
import math

game.init()
game.display.set_caption(""Asteroids"")
screen = game.display.set_mode([800,600])
time=0
gameon=True
bgcolor = game.color.Color(""#f6cb39"")
black=game.color.Color(""black"")
badguy = game.image.load(""asteroid.png"")
badguy = game.transform.scale(badguy, (50, 50))
badguys=[]
SPAWNENEMY=10
CLOCK=11
game.time.set_timer(SPAWNENEMY,800)
game.time.set_timer(CLOCK,1000)

font=game.font.Font(None,20)
timetext=font.render(""Time: 0"", 0, black)

while gameon:
    screen.fill(bgcolor)
    event=game.event.poll()
    if event.type==SPAWNENEMY:
        bgbox = game.Rect(badguy.get_rect())
        bgbox.x = r.randint(50,800)
        bgbox.y = r.randint(50,600)
        badguys.append(bgbox)

    if event.type==game.QUIT:
        gameon=False;

    for bg in badguys:

        '''
        This is where I tried to put the mocment code,
        but I was unableto get randmom movments,
        only for asteroids to randomly appear or consistently
        move in one direction something like ""bg.x+=2""

        '''

    for bg in badguys:
        screen.blit(badguy,(bg.x,bg.y))

    game.display.flip()
</code></pre>

<p>I apologize if its a little long, I don't know what else I can cut out to create an MCV.</p>",python|python-3.x|vector|random|pygame,"<p>Here's how to do it using vectors. Each item in the <code>badguy</code> list is now a pair of items, its current position and an associated speed vector. Note that the position itself is also a vector (aka a ""position vector"").</p>

<p>Updating the current position is accomplished by simply adding each badguy's speed vector to its current position. i.e. <code>bg[0] += bg[1]</code>.</p>

<pre><code>import pygame as game
import pygame.math as math
from pygame.time import Clock
import random as r


game.init()
game.display.set_caption(""Asteroids"")
screen = game.display.set_mode([800, 600])

time = 0
gameon = True
bgcolor = game.color.Color(""#f6cb39"")
black = game.color.Color(""black"")
clock = Clock()

badguy = game.image.load(""asteroid.png"")
badguy = game.transform.scale(badguy, (50, 50))
badguys = []
SPAWNENEMY = 10
CLOCK = 11

game.time.set_timer(SPAWNENEMY, 800)
game.time.set_timer(CLOCK, 1000)

font=game.font.Font(None,20)
timetext=font.render(""Time: 0"", 0, black)

while gameon:
    screen.fill(bgcolor)

    event = game.event.poll()
    if event.type == SPAWNENEMY:
        # Select a random initial position vector.
        posn = math.Vector2(r.randint(50, 800), r.randint(50, 600))

        # Create a random speed vector.
        speed = r.randint(1, 10)
        dx = r.random()*speed * r.choice((-1, 1))
        dy = r.random()*speed * r.choice((-1, 1))
        vector = math.Vector2(dx, dy)

        # Each badguy item is a [position, speed vector].
        badguys.append([posn, vector])

    if event.type == game.QUIT:
        gameon = False;

    for bg in badguys:
        # Update positions.
        bg[0] += bg[1]  # Update position using speed vector.

    for bg in badguys:
        screen.blit(badguy, bg[0])

    clock.tick(60)
    game.display.flip()
</code></pre>",2
54111001,multiclass classification bad value error,"<p>I am doing multi-class classification shape of data is (299,6) and the shape of labels is (299,5). Here is the sample of data that i have</p>

<pre><code>[[0.004873972,0.069813839,-0.470500136,2.285885634,0.5335,0.052915143],
[0.001698812,0.041216647,-0.01333925,2.507806584,0.2332,0.123463255],
[0.005954432,0.077164967,4.749752766,26.45721079,0.1663,0.186452725],
[0.001792197,0.042334345,-0.176201652,1.9656153,0.4001,0.087055596],
[0.001966929,0.044350068,0.182059972,1.610369693,0.55,0.29675874]]
</code></pre>

<p>Here is the labels for this data labels for data<code>[[1,0,0,0,0],[0,0,0,1,0],[0,0,0,1,0],[0,0,1,0,0],[0,1,0,0,0]]</code> stored in csv file.</p>

<p>I tried svm and logistic regression but gives me error ValueError: bad input shape (299, 5),the error is in the labels but how i can resolve this. </p>

<pre><code>[sample dataset][1]
  [1]: https://i.stack.imgur.com/Wncqy.png
</code></pre>",python|multiclass-classification,"<p>You can run it as a standard classification task where you convert one-hot ending to labels and train SVM classifier, see sample code:</p>

<pre><code>import numpy as np
from sklearn.svm import SVC

data = np.array([[0.004873972,0.069813839,-0.470500136,2.285885634,0.5335,0.052915143],
                 [0.001698812,0.041216647,-0.01333925,2.507806584,0.2332,0.123463255],
                 [0.005954432,0.077164967,4.749752766,26.45721079,0.1663,0.186452725],
                 [0.001792197,0.042334345,-0.176201652,1.9656153,0.4001,0.087055596],
                 [0.001966929,0.044350068,0.182059972,1.610369693,0.55,0.29675874]])
outputs = np.array([[1,0,0,0,0],[0,0,0,1,0],[0,0,0,1,0],[0,0,1,0,0],[0,1,0,0,0]])
labels = np.argmax(outputs, axis=0)

clf = SVC()
clf.fit(data, labels)
print(clf.score(data, labels))
# 0.6
</code></pre>

<p>For parameters tuning have a look at <a href=""https://towardsdatascience.com/hyperparameter-tuning-the-random-forest-in-python-using-scikit-learn-28d2aa77dd74"" rel=""nofollow noreferrer"">Hyperparameter Tuning the Random Forest in Python</a> and <a href=""https://scikit-learn.org/stable/auto_examples/model_selection/plot_randomized_search.html"" rel=""nofollow noreferrer"">Comparing randomized search and grid search for hyperparameter estimation</a></p>",0
54175538,Issue with crsf in Django,"<p>I m trying to learn django and I'm to implement csrf token for some senstive actions.
But when I intercept the request/response I get csrf_token in every request in cookie field and the webpages where I have actually implemented the csrf_token, in those request I get another csrf token as csrfMiddleware parameter in data.
So I want to know why do I get two csrf_tokens in my request and response.</p>

<pre><code>POST /demo/login/ HTTP/1.1
Host: xx.xx.xx.xx:8000
User-Agent: xxxxxx
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Language: en-US,en;q=0.5
Accept-Encoding: gzip, deflate
Referer: http://xx.xx.xx.xx:8000/demo/login/
Content-Type: application/x-www-form-urlencoded
Content-Length: 125
Connection: close
Cookie: csrftoken=n4bSbWP8p9Uce3b5iAxI0UvDG0qQq7B3OwBXisww754LYztEm0wFf9ARLpVM2v7W
Upgrade-Insecure-Requests: 1

csrfmiddlewaretoken=VIqUszlij0OLyTgYEp7V2TRsNUtBqkISmaQZz52G1WYkipyxIP6Sh8WGSjYx2IeL&amp;username=qwerty6&amp;password=password%40123
</code></pre>",python|django|csrf,"<p>According to the <a href=""https://docs.djangoproject.com/en/2.0/ref/csrf/#how-it-works"" rel=""nofollow noreferrer"">Django documentation</a>:</p>

<p>For the value stored in the cookie:</p>

<blockquote>
  <p>In order to protect against BREACH attacks, the token is not simply the secret; a random salt is prepended to the secret and used to scramble it.</p>
</blockquote>

<p>For the <code>csrfmiddlewaretoken</code>:</p>

<blockquote>
  <p>A hidden form field with the name <code>csrfmiddlewaretoken</code> present in all outgoing POST forms. The value of this field is, again, the value of the secret, with a salt which is both added to it and used to scramble it. The salt is regenerated on every call to <code>get_token()</code> so that the form field value is changed in every such response.</p>
</blockquote>

<p>Therefore the values differ due to being scrambled in a different way.</p>",0
54233820,How to open URL in Selenium via Python using Javascript functions,"<p>First, sorry for the confusing title-question. I am currently migrating a browser automated project from iMacros to Selenium-Python. For my previous iMacros scripts, I have been using a javascript function to open url's since it is a lot faster. Here's a code to test the immense difference in loading speeds:</p>

<pre><code>SET !FOLDER_STOPWATCH C:\Users\Public\Documents
SET !FILESTOPWATCH ""Duration.txt""

STOPWATCH ID=Javascriptey_mode
URL GOTO=javascript:window.open(""http://cityplan2014maps.brisbane.qld.gov.au/CityPlan/"");
STOPWATCH ID=Javascriptey_mode

STOPWATCH ID=Regular_mode
TAB OPEN
TAB T=3
URL GOTO=""http://cityplan2014maps.brisbane.qld.gov.au/CityPlan/""
STOPWATCH ID=Regular_mode
</code></pre>

<p>Unfortunately I have no idea why this happens and I'm under the assumption that being able to open a URL in Selenium using a similar javascript method will hasten page loading. Selenium's <code>driver.get(url)</code>  command does not cut it for me. I tried using Firefox profiles to no avail. So how do I go about it using this? I'm open for a non-javascript-ey solution, too. Also, if anyone could explain to me why the regular iMacros <code>URL GOTO=(url)</code> command loads slowly compared to the Javascript-ey one, it would be much appreciated :)</p>

<p>This might not be of value but here are the versions I'm using with iMacros:</p>

<ul>
<li>Firefox 55.0.3</li>
<li>iMacros Addon version 9.0.3</li>
</ul>

<p>EDIT:
Updated the iMacros code to allow for time duration monitoring. I ran it three times on my end and saw an average difference of 43 seconds between the regular and Javascript-ey mode.</p>",javascript|python|selenium,"<p>You can execute your js code this way:</p>

<pre><code>driver = webdriver.Chrome()
driver.get(""http://google.com"")
driver.execute_script(""window.open('http://cityplan2014maps.brisbane.qld.gov.au/CityPlan/')"")
</code></pre>",1
54356363,Python - Capture string with or without specific character,"<p>I am trying to capture the sentence after a specific word. Each sentences are different in my code and those sentence doesn't necessarily have to have this specific word to split by. If the word doesn't appear, I just need like blank string or list. </p>

<p>Example 1: working</p>

<pre><code>my_string=""Python is a amazing programming language""
print(my_string.split(""amazing"",1)[1])

 programming language
</code></pre>

<p>Example 2: </p>

<pre><code>my_string=""Java is also a programming language.""
print(my_string.split(""amazing"",1)[1]) # amazing word doesn't appear in the sentence. 
Error: IndexError: list index out of range
</code></pre>

<p>Output needed :empty string or list ..etc. </p>

<p>I tried something like this, but it still fails. </p>

<pre><code>my_string.split(""amazing"",1)[1] if my_string.split(""amazing"",1)[1] == None else my_string.split(""amazing"",1)[1]
</code></pre>",python|python-3.x,"<p>You have some options here. You can split and check the result:</p>

<pre><code>tmp = my_string.split(""amazing"", 1)
result = tmp[1] if len(tmp) &gt; 1 else ''
</code></pre>

<p>Or you can check for containment up front:</p>

<pre><code>result = my_string.split(""amazing"", 1)[1] if 'amazing' in my_string else ''
</code></pre>

<p>The first option is more efficient if most of the sentences have matches, the second one if most don't.</p>

<p>Another option similar to the first is</p>

<pre><code>result = my_string.split(""amazing"", 1)[-1]
if result == my_string:
    result = ''
</code></pre>

<p>In all cases, consider doing something equivalent to</p>

<pre><code>result = result.lstrip()
</code></pre>",0
54356363,Python - Capture string with or without specific character,"<p>I am trying to capture the sentence after a specific word. Each sentences are different in my code and those sentence doesn't necessarily have to have this specific word to split by. If the word doesn't appear, I just need like blank string or list. </p>

<p>Example 1: working</p>

<pre><code>my_string=""Python is a amazing programming language""
print(my_string.split(""amazing"",1)[1])

 programming language
</code></pre>

<p>Example 2: </p>

<pre><code>my_string=""Java is also a programming language.""
print(my_string.split(""amazing"",1)[1]) # amazing word doesn't appear in the sentence. 
Error: IndexError: list index out of range
</code></pre>

<p>Output needed :empty string or list ..etc. </p>

<p>I tried something like this, but it still fails. </p>

<pre><code>my_string.split(""amazing"",1)[1] if my_string.split(""amazing"",1)[1] == None else my_string.split(""amazing"",1)[1]
</code></pre>",python|python-3.x,"<p>Instead of calling index 1, call index -1. This calls the last item in the list.</p>

<pre><code>my_string=""Java is also a programming language.""
print(my_string.split(""amazing"",1)[1])
</code></pre>

<p>returns ' programming language.'</p>",-1
54356363,Python - Capture string with or without specific character,"<p>I am trying to capture the sentence after a specific word. Each sentences are different in my code and those sentence doesn't necessarily have to have this specific word to split by. If the word doesn't appear, I just need like blank string or list. </p>

<p>Example 1: working</p>

<pre><code>my_string=""Python is a amazing programming language""
print(my_string.split(""amazing"",1)[1])

 programming language
</code></pre>

<p>Example 2: </p>

<pre><code>my_string=""Java is also a programming language.""
print(my_string.split(""amazing"",1)[1]) # amazing word doesn't appear in the sentence. 
Error: IndexError: list index out of range
</code></pre>

<p>Output needed :empty string or list ..etc. </p>

<p>I tried something like this, but it still fails. </p>

<pre><code>my_string.split(""amazing"",1)[1] if my_string.split(""amazing"",1)[1] == None else my_string.split(""amazing"",1)[1]
</code></pre>",python|python-3.x,"<p>When you use the <code>.split()</code> argument you can specify what part of the list you want to use with either integers or slices. If you want to check a specific word in your string you can do is something like this:</p>

<pre><code>my_str = ""Python is cool""
my_str_list = my_str.split()
if 'cool' in my_str_list:
    print(my_str)`

output:
""Python is cool""
</code></pre>

<p>Otherwise, you can run a for loop in a list of strings to check if it finds the word in multiple strings.</p>",0
54129498,How can I output elements from a list AND the number of times they have occurred in a document?,"<p>I am a two-day old fetus when it comes to Python and programming in general, so  I need some guidance. Basically, I am trying to write a function that will go through a list of documents and count the amount of times a particular keyword and its synonyms appear. </p>

<p>For reference, an ""Entry"" in the code refers to a class of objects with the attributes ""word"" and ""synonyms"". A Thesaurus is a list of Entry objects and a Corpus is a list of Documents, and each Document is a list of strings.</p>

<p>What I have managed to do is this: 
Lines 2-6 concern the creation of a list, All_words, that contains the keyword and the keyword's synonyms. 
Lines 7-12 are the problem. I can only get the function to output the FIRST Search_word in All_words and its number of occurrences.</p>

<pre><code>def search(keyword) : #user inputs keyword
    All_words = [keyword]
    for Entry in Thesaurus: 
        if Entry.word == keyword:
            for Word in Entry.synonyms:
        All_words.append(Word) 
    for Search_word in All_words:
        count = 0
        for Document in Corpus: 
            for Word in Document:
                if Search_word == Word:
                    count = count + 1
        return Search_word, count

input = ""sad""
output = search(input) 
print(output)
</code></pre>

<p>For reference, if the keyword is ""sad"", All_words should be: ['sad', 'upset', 'depressed', 'unhappy']
My current results are this:</p>

<pre><code>('sad', 4)
</code></pre>

<p>I expected the results to look like this:</p>

<pre><code>(('sad', 4), ('upset', 2), ('depressed', 2), ('unhappy', 0)) 
</code></pre>

<p>I feel like I'm missing something simple here.</p>",python,"<p>The issue is that your return statement -- <code>return Search_word, count</code> is inside the <code>for</code> loop. So after it finish searching for the first word, in this case <code>sad</code>, it will immediately <code>return</code> and stop execution.</p>

<p>You'll have to move the <code>return</code> statement to run OUTSIDE the <code>for</code> loop, and change it slightly so that it outputs results from ALL words you're searching for.</p>

<p>Also, just a style thing -- variable names should not start with upper case letters.</p>

<p>As for how to store all different synonyms and their corresponding count, see below:</p>

<pre><code>answer = []
for Search_word in All_words:
    count = 0
    ....
    answer.append([Search_word, count])
return answer
</code></pre>",1
16859924,A possible loop to rename files in order from a directory?,"<p>I have a 100 .fits files in a directory with long names (ex. spec-0355-51788-0484.fits       spec-0493-51957-0157.fits, spec-0367-51997-0430.fits, spec-0771-52370-0017.fits etc...)</p>

<p>I am wondering if there is a loop to rename them all in a sequence of integers so that it looks like 1.fits, 2.fits, 3.fits, 4.fits, .... 100.fits</p>",python|for-loop|rename,"<p>You could try this:</p>

<pre><code>import os
import glob
os.chdir(""E:/"")
i = 1
for old_file in glob.glob(""*.fits""): 
    new = str(i) + "".fits""
    os.renames(old_file, new)
    i=i+1
</code></pre>",1
16878536,Getting tag after tag?,"<p>I'm trying to get the first tag after another tag with beautifulsoup.</p>

<p>Let's suppose i have this:</p>

<pre><code>&lt;span class=""number""&gt;5&lt;/span&gt;
&lt;span class=""b""&gt;xxx&lt;/span&gt;&lt;span class ""number""&gt;10&lt;/span&gt;
</code></pre>

<p>I could get the number on the second .number with a regex and it would be pretty solid. But we all know regex isn't supposed to parse html, so i'm doing this with beautifulsoup. Currently i'm doing this with</p>

<pre><code>soup('span', {'class': 'number'})[1].string
</code></pre>

<p>but, if at another span.number is inserted before the one i want, it will break the code, since the one i need will become [2].</p>

<p>Is there any way to use beautifulsoup to get the first span.number AFTER span.b?</p>",python|beautifulsoup,"<p>You could use <a href=""http://www.crummy.com/software/BeautifulSoup/bs4/doc/#next-sibling-and-previous-sibling"" rel=""nofollow"">next_sibling</a> to get the next tag after <code>&lt;span class=""b""&gt;</code>:</p>

<pre><code>import bs4 as bs


content = '''&lt;span class=""number""&gt;5&lt;/span&gt;
&lt;span class=""b""&gt;xxx&lt;/span&gt;&lt;span class ""number""&gt;10&lt;/span&gt;'''

soup = bs.BeautifulSoup(content)
print(soup('span', {'class': 'b'})[0].next_sibling)
# &lt;span class=""""&gt;10&lt;/span&gt;

print(soup('span', {'class': 'b'})[0].next_sibling.string)
# 10
</code></pre>

<p>If you are using BeautifulSoup version 3, the equivalent attribute is called <a href=""http://www.crummy.com/software/BeautifulSoup/bs3/documentation.html#nextSibling%20and%20previousSibling"" rel=""nofollow"">nextSibling</a>.</p>",3
16798581,unsupported operand type(s) for ** or pow(): 'Entry' and 'int'?,"<p>I've been trying to make a Pythagoras Theorem Calculator using Tkinter on Python 33, but I'm running into a slight problem.</p>

<p>Heres my code -   </p>

<pre><code>from tkinter import *
import math

root = Tk()

L1 = Label(root, text=""A = "")
L1.pack()

E1 = Entry(root, bd =5)
E1.pack()

L2 = Label(root, text=""B = "")
L2.pack()

E2 = Entry(root, bd =5)
E2.pack()

asq = E1**2
bsq = E2**2

csq = asq + bsq
ans = math.sqrt(csq)

def showsum():
    tkMessageBox.showinfo(""Answer ="", ans)

B1 = tkinter.Button(root, text=""Click This To Calculate!"", command = showsum())
B1.pack()

root.mainloop()
</code></pre>

<p>And here is my error message - </p>

<pre><code>Traceback (most recent call last):
  File ""C:/Users/Dale/Desktop/programming/Python/tkinterpythagoras.py"", line 18, in     &lt;module&gt;
    asq = E1**2
TypeError: unsupported operand type(s) for ** or pow(): 'Entry' and 'int'
</code></pre>

<p>Please don't go rough on me. I'm a complete beginner with Tkinter!</p>",python|python-3.x|tkinter,"<p>That error message is pretty clear. You are trying to raise an <code>Entry</code> object to some power, and you can't do that with <code>Entry</code> objects, because they are not numbers but user interface elements. Instead, you want what is <em>in</em> the <code>Entry</code> object, i.e. what the user has entered, and you probably want to convert it to an integer or float. So:</p>

<pre><code>asq = float(E1.get()) ** 2
</code></pre>",2
16798581,unsupported operand type(s) for ** or pow(): 'Entry' and 'int'?,"<p>I've been trying to make a Pythagoras Theorem Calculator using Tkinter on Python 33, but I'm running into a slight problem.</p>

<p>Heres my code -   </p>

<pre><code>from tkinter import *
import math

root = Tk()

L1 = Label(root, text=""A = "")
L1.pack()

E1 = Entry(root, bd =5)
E1.pack()

L2 = Label(root, text=""B = "")
L2.pack()

E2 = Entry(root, bd =5)
E2.pack()

asq = E1**2
bsq = E2**2

csq = asq + bsq
ans = math.sqrt(csq)

def showsum():
    tkMessageBox.showinfo(""Answer ="", ans)

B1 = tkinter.Button(root, text=""Click This To Calculate!"", command = showsum())
B1.pack()

root.mainloop()
</code></pre>

<p>And here is my error message - </p>

<pre><code>Traceback (most recent call last):
  File ""C:/Users/Dale/Desktop/programming/Python/tkinterpythagoras.py"", line 18, in     &lt;module&gt;
    asq = E1**2
TypeError: unsupported operand type(s) for ** or pow(): 'Entry' and 'int'
</code></pre>

<p>Please don't go rough on me. I'm a complete beginner with Tkinter!</p>",python|python-3.x|tkinter,"<p>You have some problems in your program: First of all, <code>E1</code> and <code>E2</code> are Entry widgets, not numbers, so you have to retrieve the value first:</p>

<pre><code>try:
    val = int(E1.get())
except ValueError:
    # The text of E1 is not a valid number
</code></pre>

<p>Secondly, in the command option of the Button you are calling the function <code>showsum()</code> instead of passing the reference:</p>

<pre><code>B1 = Button(root, ..., command=showsum)  # Without ()
</code></pre>

<p>Besides, this function always shows the same result previously calculated, so you should retrieve the value of the widgets in this function and not before. Finally, with <code>from tkinter import *</code> Button is in the global namespace, so you should remove the reference to <code>tkinter</code> before it.</p>

<p>So in the end <code>showsum</code> could be something similar to this:</p>

<pre><code>def showsum():
    try:
        v1, v2 = int(E1.get()), int(E2.get())
        asq = v1**2
        bsq = v2**2
        csq = asq + bsq
        tkMessageBox.showinfo(""Answer ="", math.sqrt(csq))
    except ValueError:
        tkMessageBox.showinfo(""ValueError!"")
</code></pre>",3
16760992,How to download a zip file from a site (python),"<p>There is a site with logs and each log is in zip (for space saving).
How can I download it from the site?</p>

<p>( urllib / urllib2 )(?)</p>",python|file|download|zip,"<p>You have to consider something like:</p>

<pre><code>import urllib2
response = urllib2.urlopen('http://www.website.com/log.zip')
zipcontent= response.read()
</code></pre>

<p>and now you write the file to disk :)</p>

<pre><code>with open(""log.zip"", 'w') as f:
    f.write(zipcontent)
</code></pre>

<p>You can also check:
<a href=""https://stackoverflow.com/questions/2289768/python-and-urllib"">Python and urllib</a></p>

<p><a href=""https://stackoverflow.com/questions/1774434/download-a-zip-file-to-a-local-drive-and-extract-all-files-to-a-destination-fold"">download a zip file to a local drive and extract all files to a destination folder using python 2.5</a></p>",2
16760992,How to download a zip file from a site (python),"<p>There is a site with logs and each log is in zip (for space saving).
How can I download it from the site?</p>

<p>( urllib / urllib2 )(?)</p>",python|file|download|zip,"<p>You can use <a href=""http://docs.python.org/2/library/urllib.html#urllib.urlretrieve"" rel=""noreferrer""><code>urllib.urlretrieve</code></a> this way:</p>

<pre><code>urlretrieve(your_url, your_zip_path)
</code></pre>",10
16898520,What is the best way to store large session data in web applications?,"<p>I am building a website that does not require people to login, but still needs large session data.</p>

<p>Example: a person uploads a 0.5 MB file. I want to able to manipulate this this from now and then. Where should I store it? I would prefer something like a cookie system, but obviously this is too small. Redis seems like an opportunity, but I was hoping for something simpler.</p>

<p>I'm using Python flask.</p>

<p>Thanks in advance.</p>",javascript|python|html5|web-applications|flask,<p>Yuo should try localstorage  .</p>,0
16898520,What is the best way to store large session data in web applications?,"<p>I am building a website that does not require people to login, but still needs large session data.</p>

<p>Example: a person uploads a 0.5 MB file. I want to able to manipulate this this from now and then. Where should I store it? I would prefer something like a cookie system, but obviously this is too small. Redis seems like an opportunity, but I was hoping for something simpler.</p>

<p>I'm using Python flask.</p>

<p>Thanks in advance.</p>",javascript|python|html5|web-applications|flask,"<p>May be you need <a href=""http://ru.wikipedia.org/wiki/Memcached"" rel=""nofollow"">memcached</a>. It's simpler than Redis.</p>",0
16898520,What is the best way to store large session data in web applications?,"<p>I am building a website that does not require people to login, but still needs large session data.</p>

<p>Example: a person uploads a 0.5 MB file. I want to able to manipulate this this from now and then. Where should I store it? I would prefer something like a cookie system, but obviously this is too small. Redis seems like an opportunity, but I was hoping for something simpler.</p>

<p>I'm using Python flask.</p>

<p>Thanks in advance.</p>",javascript|python|html5|web-applications|flask,"<p>You have two choices:</p>

<ul>
<li><p>Have the person upload the file(s) to the server.  In this case you will not want to store the file in the session - instead, you will want to store a reference to the file's location in their session (or persist it somewhere more permanent if they need to be able to come back with a new session and still work with the old file).</p>

<pre><code>@app.route(""/upload"", methods=[""GET"", ""POST""])
def upload_file():
    # Create a folder in your uploads section to store
    # this user's files.
    # Store the file in it (use werkzeug.security.safe_join
    # to ensure the file name is safe).
    # Add the *safe* file name to the session
    # or the datastore (e. g. a database)
    # so you can look it up later
</code></pre></li>
<li><p>Use the new DOM Filesystem API to store the files on the client side so they never come to your server and manipulate the files with JavaScript.</p></li>
</ul>

<p>The pros of the first method are that you can store large files and manipulate them with many different tools (not just Python).  The cons are that you have to store the files and make sure to sanitize the file names (to avoid having the server hacked).</p>

<p>The pros of the second method are that you don't need to store anything on the server (so you don't have to pay for extra storage).  The cons are that you are likely to be limited in the amount of data you can store, and you only have access to libraries that run in a browser (i. e. JS only) <em>or</em> you have to pass all of the data over to your server when you need to do something more complicated.</p>",1
16756853,why I can't leave class blank,"<p>When I delete the ' pass'  command and leave the class blank, it show error :   </p>

<pre><code>File ""class_distance.py"", line 6
    point1=distance()   
         ^
IndentationError: expected an indented block
</code></pre>

<p>The code is expected to calculate distance between two points. 
Here is code:</p>

<pre><code>import math 
class distance(object):
     pass


point1=distance()   
point2=distance()
point1.x=input(""x="")
point2.x=input(""x="")
point1.y=input(""y="")
point2.y=input(""y="")


def main(point1,point2):


    dx = point1.x - point2.x
    dy = point1.y - point2.y
    dist = math.sqrt(dx**2 + dy**2)
    print dist

main(point1,point2)
</code></pre>",python|class,"<p>Classes must have a body. So when you delete pass it searches the next statement as body, but as it is on the same level as your class definition, Python says there's an IndentationError.</p>",0
16756853,why I can't leave class blank,"<p>When I delete the ' pass'  command and leave the class blank, it show error :   </p>

<pre><code>File ""class_distance.py"", line 6
    point1=distance()   
         ^
IndentationError: expected an indented block
</code></pre>

<p>The code is expected to calculate distance between two points. 
Here is code:</p>

<pre><code>import math 
class distance(object):
     pass


point1=distance()   
point2=distance()
point1.x=input(""x="")
point2.x=input(""x="")
point1.y=input(""y="")
point2.y=input(""y="")


def main(point1,point2):


    dx = point1.x - point2.x
    dy = point1.y - point2.y
    dist = math.sqrt(dx**2 + dy**2)
    print dist

main(point1,point2)
</code></pre>",python|class,"<p>A code block in python must contain <em>some</em> code so if you don't want to make it do anything, you have to put in <code>pass</code>. Hence the <code>IndentationError</code></p>",0
16756853,why I can't leave class blank,"<p>When I delete the ' pass'  command and leave the class blank, it show error :   </p>

<pre><code>File ""class_distance.py"", line 6
    point1=distance()   
         ^
IndentationError: expected an indented block
</code></pre>

<p>The code is expected to calculate distance between two points. 
Here is code:</p>

<pre><code>import math 
class distance(object):
     pass


point1=distance()   
point2=distance()
point1.x=input(""x="")
point2.x=input(""x="")
point1.y=input(""y="")
point2.y=input(""y="")


def main(point1,point2):


    dx = point1.x - point2.x
    dy = point1.y - point2.y
    dist = math.sqrt(dx**2 + dy**2)
    print dist

main(point1,point2)
</code></pre>",python|class,"<p>It's because Python is expecting the class body after it sees</p>

<pre><code>class distance(object):
</code></pre>

<p>In particular that colon signals we're going to indent the next line and type the class's body. However if we don't indent and we just continue on programming, Python will become upset and complain that we've skipped the class body.</p>

<p>In order to allow empty blocks, there is a keyword <code>pass</code> which basically acts as a placeholder for where the class or function or whatever would normally go.</p>

<pre><code>class distance(object):
    pass # Let's python know we didn't forget the class body
keep.on.programming()
</code></pre>",2
16756853,why I can't leave class blank,"<p>When I delete the ' pass'  command and leave the class blank, it show error :   </p>

<pre><code>File ""class_distance.py"", line 6
    point1=distance()   
         ^
IndentationError: expected an indented block
</code></pre>

<p>The code is expected to calculate distance between two points. 
Here is code:</p>

<pre><code>import math 
class distance(object):
     pass


point1=distance()   
point2=distance()
point1.x=input(""x="")
point2.x=input(""x="")
point1.y=input(""y="")
point2.y=input(""y="")


def main(point1,point2):


    dx = point1.x - point2.x
    dy = point1.y - point2.y
    dist = math.sqrt(dx**2 + dy**2)
    print dist

main(point1,point2)
</code></pre>",python|class,"<p>When you end a line with the colon, you're declaring a compound statement: Python expects a block of code following that statement. The <code>pass</code> keyword is your way of saying that you don't want to enter the block yet.</p>

<p>Because of the way whitespace is significant in Python, not allowing an empty statement makes the code more readable and easier to parse: after the colon, an indented block is expected and if there's none, it's an error, end of story.</p>

<p><strong>EDIT</strong>: By the way, if you're wondering, you get an <code>IndentationError</code> on the next statement, rather than on the <code>class</code> declaration, because Python thinks that is the body of the class declaration, and expects it to be properly indented.</p>",4
17022737,Writing a string backwards,"<p>This is my simple code.</p>

<pre><code>def reverseString(aStr):
    newStr = ''
    if len(aStr) == 0:
        return newStr
    else:
        newStr = newStr + aStr[len(aStr)-1]
        return reverseString(aStr[:len(aStr)-1])
</code></pre>

<p>For <code>'alina'</code> (if I  insert <code>print newStr</code> before <code>return reverseString...</code>), the output is: <code>newStr='a'</code>, <code>newStr='n'</code>, <code>newStr='i'</code>, <code>newStr='l'</code>, <code>newStr='a'</code>, <code>newStr=''</code>. I don't get it. Why does it behave like this?</p>",python|string|recursion,"<p>The reason your function has not worked is because you forgot to return <code>newStr</code> at the end. And every time you call your function, <code>newStr</code> will just get reset back to <code>''</code>.</p>

<p>There's an easier way to do what you are doing. Use <a href=""http://docs.python.org/2/tutorial/introduction.html#strings"" rel=""nofollow"">slicing</a>:</p>

<pre><code>def reverseString(s):
    return s[::-1]
</code></pre>

<p>Examples:</p>

<pre><code>&gt;&gt;&gt; reverseString('alina')
'anila'

&gt;&gt;&gt; reverseString('racecar')
'racecar' # See what I did there ;)
</code></pre>",3
17022737,Writing a string backwards,"<p>This is my simple code.</p>

<pre><code>def reverseString(aStr):
    newStr = ''
    if len(aStr) == 0:
        return newStr
    else:
        newStr = newStr + aStr[len(aStr)-1]
        return reverseString(aStr[:len(aStr)-1])
</code></pre>

<p>For <code>'alina'</code> (if I  insert <code>print newStr</code> before <code>return reverseString...</code>), the output is: <code>newStr='a'</code>, <code>newStr='n'</code>, <code>newStr='i'</code>, <code>newStr='l'</code>, <code>newStr='a'</code>, <code>newStr=''</code>. I don't get it. Why does it behave like this?</p>",python|string|recursion,"<p>You are returning the result of the recursive call, without keeping the information from previous calls. You have this line:</p>

<pre><code>newStr = newStr + aStr[len(aStr)-1]
</code></pre>

<p>but newStr is then discarded.</p>

<p>Possible solution:</p>

<pre><code>def reverseString(aStr):
    if len(aStr) == 0:
        return ''
    else:
        return aStr[-1] + reverseString(aStr[:-1])
</code></pre>

<p>or simply</p>

<pre><code>def reverseString(s):
    return s[-1]+reverseString(s[:-1]) if s else ''
</code></pre>

<p>Note that both these solutions are elegant, but are ""normal"" recursion, and therefore suboptimal; for a tail-recursive solution (which potentially can be optimized into a loop) see @Ashwini Chaudhary's answer.</p>",-1
17022737,Writing a string backwards,"<p>This is my simple code.</p>

<pre><code>def reverseString(aStr):
    newStr = ''
    if len(aStr) == 0:
        return newStr
    else:
        newStr = newStr + aStr[len(aStr)-1]
        return reverseString(aStr[:len(aStr)-1])
</code></pre>

<p>For <code>'alina'</code> (if I  insert <code>print newStr</code> before <code>return reverseString...</code>), the output is: <code>newStr='a'</code>, <code>newStr='n'</code>, <code>newStr='i'</code>, <code>newStr='l'</code>, <code>newStr='a'</code>, <code>newStr=''</code>. I don't get it. Why does it behave like this?</p>",python|string|recursion,"<p>Just sayin', there's an easier way to do this, which avoids recursion and the problems that it entails :</p>

<pre><code>&gt;&gt;&gt; ''.join(reversed(""abcd""))
'dcba'
</code></pre>",-1
17022737,Writing a string backwards,"<p>This is my simple code.</p>

<pre><code>def reverseString(aStr):
    newStr = ''
    if len(aStr) == 0:
        return newStr
    else:
        newStr = newStr + aStr[len(aStr)-1]
        return reverseString(aStr[:len(aStr)-1])
</code></pre>

<p>For <code>'alina'</code> (if I  insert <code>print newStr</code> before <code>return reverseString...</code>), the output is: <code>newStr='a'</code>, <code>newStr='n'</code>, <code>newStr='i'</code>, <code>newStr='l'</code>, <code>newStr='a'</code>, <code>newStr=''</code>. I don't get it. Why does it behave like this?</p>",python|string|recursion,"<p>Something like this:</p>

<pre><code>def reverseString(aStr, newStr = ''):
    if len(aStr) == 0:
        return newStr
    else:
        newStr = newStr + aStr[-1]  #-1 returns the last element from the string
        return reverseString(aStr[:-1], newStr) #slice the string up to second last char
print reverseString(""foobar"")     
#raboof
</code></pre>

<p>The problem with your code is that <code>newStr</code> is getting re-assigned at each recursive loop to an empty string(<code>''</code>), you must pass the <code>newStr</code> value in every recursive call. </p>

<pre><code>def reverseString(aStr, newStr= ''): #define a default value for newStr

    if len(aStr) == 0:
        return newStr
    else:
        newStr = newStr + aStr[len(aStr)-1]  #better use aStr[-1]
        return reverseString(aStr[:len(aStr)-1], newStr) #pass the new value of newStr

print reverseString(""foobar"")# No value is passed for newStr. So, default is used . 
</code></pre>",0
21668479,"How do I get a function to iterate through a string and replace the first character of a string, second, etc?","<p>I'm attempting to create a Baconian cipher encryption program that reads input for a message, a fake message, and an integer key, and then outputs the fake message shifted through a Caesar cipher encryption program, but with spaces and symbols of the Baconian cipher representing the bold and normal font, or what I'm using as 'A' and 'B'.</p>

<p>Here's what I have so far. It's mostly completed, but I can't get the output to cycle through the characters in the string that is encrypted with the Caesar cipher, instead it just uses the first character. I'm pretty positive it's something idiotic, but I can't seem to get it to work. Any suggestions? :</p>

<pre><code>def main():
    myBaconianMessage = input('Please input Bacon cipher message.')
    myBaconianMessage = myBaconianMessage.split()
    myCaesarMessage = input('Please input fake message to be encrypted.')
    myCaesarKey = int(input('Please input integer key.'))
    clues_A = {'A':'AAAAA'}
    clues_B = {'B':'AAAAB'}
    clues = {'a':'AAAAA', 'b':'AAAAB', 'c':'AAABA', 'd':'AAABB', 'e':'AABAA',
             'f':'AABAB', 'g':'AABBA', 'h':'AABBB', 'i':'ABAAA', 'j':'ABAAA',
             'k':'ABAAB', 'l':'ABABA', 'm':'ABABB', 'n':'ABBAA', 'o':'ABBAB',
             'p':'ABBBA', 'q':'ABBBB', 'r':'BAAAA', 's':'BAAAB', 't':'BAABA',
             'u':'BAABB', 'v':'BAABB', 'w':'BABAA', 'x':'BABAB', 'y':'BABBA',
             'z':'BABBB', 'C':'AAABA', 'D':'AAABB', 'E':'AABAA', 'F':'AABAB',
             'G':'AABBA', 'H':'AABBB', 'I':'ABAAA', 'J':'ABAAA', 'K':'ABAAB',
             'L':'ABABA', 'M':'ABABB', 'N':'ABBAA', 'O':'ABBAB', 'P':'ABBBA',
             'Q':'ABBBB', 'R':'BAAAA', 'S':'BAAAB', 'T':'BAABA', 'U':'BAABB',
             'V':'BAABB', 'W':'BABAA', 'X':'BABAB', 'Y':'BABBA', 'Z':'BABBB'}


    def decrypter():
        translated = myBaconianMessage[:]
        for i, word in enumerate(translated):
            for key in clues_A:
                translated[i] = translated[i].replace(key, clues_A.get(key))
            for key in clues_B:
                translated[i] = translated[i].replace(key, clues_B.get(key))
            for key in clues:
                translated[i] = translated[i].replace(key, clues.get(key))
        encryptedMessage = ''.join(translated)
        return encryptedMessage


    def caesarPortion():
        myCaesarMode = 'encrypt'
        alphabet = 'abcdefghijklmnopqrstuvwxyz'
        caesarMessage = ''
        newCaesarMessage = myCaesarMessage.lower()
        for symbol in newCaesarMessage:
            if symbol in alphabet:
                num = alphabet.find(symbol)
                if myCaesarMode == 'encrypt':
                    num = num + myCaesarKey
                elif myCaesarMode == 'decrypt':
                    num = num - myCaesarKey
                if num &gt;= len(alphabet):
                    num = num - len(alphabet)
                elif num &lt; 0:
                    num = num + len(alphabet)
                caesarMessage = caesarMessage + alphabet[num]
        else:
            caesarMessage = caesarMessage + symbol
        thisCaesarMessage = ''.join(caesarMessage)
        return thisCaesarMessage


    def doubleEncrypted():
        caesar = caesarPortion()
        listCaesar = list(caesar)
        translate = decrypter()
        listTranslate = translate.split()
        for char in range(len(listCaesar) - 1):
            i = 0
            while i &lt;= len(listCaesar):
                i += 1
                set = {'A':listCaesar[i], 'B':' '}
                for symbol in listTranslate:
                    for x, word in enumerate(listTranslate):
                        for key in set:
                            listTranslate[x] = listTranslate[x].replace(key,  ''.join(str(set.get(key))))
    return listTranslate

    if len(myBaconianMessage) &gt;= 1:
        print(''.join(doubleEncrypted()))

if __name__ == '__main__':
    main()
</code></pre>

<p>I know that it's something in doubleEncrypted() that's the problem, probably the while loop or set or range, and I know the code really isn't elegant at all, but I'm a n00b and I'm just trying to figure out how things work. I'd really, really appreciate any advice.</p>",python|encryption|python-3.x|while-loop|iteration,"<p>Yes the problem is inside <code>doubleEncrypted</code> function with the while loop:</p>

<pre><code># this while loop will loop from `i` is incremented before indexing 
while i &lt;= len(listCaesar):
</code></pre>

<p>Here is an example snippet:</p>

<pre><code>&gt;&gt;&gt; listCaesar = 'MyName'
&gt;&gt;&gt; len(listCaesar)
6
&gt;&gt;&gt; range(6 - 1)
[0, 1, 2, 3, 4]
&gt;&gt;&gt; for char in range(6 - 1):
...     i = 0
...     while i &lt;= 6:
...         i += 1
...         print i, listCaesar[i]
...
1 y
2 N
3 a
4 m
5 e
6
Traceback (most recent call last):
  File ""&lt;stdin&gt;"", line 5, in &lt;module&gt;
IndexError: string index out of range
&gt;&gt;&gt;
</code></pre>

<p>In the above example, <code>i</code> is incrementing before indexing, so when it reach 6, the list index is out of range.</p>

<p>So, you can fix that by adding <code>i += 1</code> after listCaesar indexing. Even I feel this is the right way because you are incrementing <code>i</code> after indexing, not before.</p>

<pre><code>&gt;&gt;&gt; for char in range(6 - 1):
...     i = 0
...     while i &lt; 6:       # while i &lt;=5:
...         print i, listCaesar[i]
...         i += 1
...
0 M
1 y
2 N
3 a
4 m
</code></pre>",0
21590395,Subclassed QStyledItemDelegate ignores Stylesheet,"<p>I'm trying to subclass <code>QStyledItemDelegate</code> to remove the focus rectangle in a <code>QComboBox</code>. </p>

<p>Even though I'm calling the base implementation of the paint function and nothing else, the result is very different. It looks as if only the parts of the style-sheet that influence the bounding box of the item are taken into consideration.</p>

<pre><code>class PStyledItemDelegate(QStyledItemDelegate):
    def __init__(self, *args, **kwds):
        super(PStyledItemDelegate, self).__init__(*args, **kwds)

    def paint(self, *args, **kwargs):
        QStyledItemDelegate.paint(*args, **kwargs)
</code></pre>

<p>What do I have to do to get it to paint exactly as a unmodified <code>QStyledItemDelegate</code>?</p>",python|qt|pyqt|pyside,"<p>As suggested I tried replacing PySide with PyQt4 and now it works, so it appears to be a bug. I also update PySide from 1.1.2 to 1.2.1 but the result is the same.</p>

<p>Unfortunately the switch breaks other parts of my code, but if there are no other suggestions I'm going to accept this as answer.</p>

<p><strong>EDIT</strong>
The Bug is tracked <a href=""https://bugreports.qt-project.org/browse/PYSIDE-152"" rel=""nofollow"">here</a></p>",1
21374675,IPython3 for Mac OSX,"<p>I have Ipython installed but it runs on python 2.7.5 , I also have python 3.3 installed. How can I make changes such that Ipython runs on python 3.3 not 2.7.5?</p>",macos|python-2.7|python-3.x|ipython,"<p>You need to install <code>pip</code> for Python 3 - it's as easy as going to the <a href=""http://www.pip-installer.org/en/latest/installing.html"" rel=""noreferrer""><code>pip-installer.org</code> Installation page</a> and following the instructions. Briefly, download <a href=""https://bootstrap.pypa.io/get-pip.py"" rel=""noreferrer""><code>get-pip.py</code></a> and save it someplace, like your <code>Downloads</code> folder. Navigate there in Terminal, and run</p>

<pre><code>sudo python3 get-pip.py
</code></pre>

<p>and you should soon have either a <code>pip3</code> or <code>pip-3.3</code> command (maybe both, I don't remember). You should now be able to run</p>

<pre><code>sudo pip3 install ipython[all]
</code></pre>

<p>and hopefully all the dependencies will be installed as well. If installation chokes, use <code>pip3</code> to install <code>pyzmq</code>, <code>tornado</code>, <code>pyreadline</code>, <code>jinja2</code>, <code>pygments</code>, and maybe a few others. Make sure you <a href=""http://ipython.org/ipython-doc/stable/install/install.html"" rel=""noreferrer"">read the docs</a> before you start, so you have an idea of what you're trying to achieve. IPython is large and quite complex, with many moving parts, so in the absence of a package manager (see below) it can take a bit of time before everything is up and running.</p>

<hr>

<h3>The Package Manager Way</h3>

<p>There are other options, too. You can install <a href=""https://store.continuum.io/cshop/anaconda/"" rel=""noreferrer"">Anaconda</a>, a ""<em>Completely free enterprise-ready Python distribution for large-scale data processing, predictive analytics, and scientific computing</em>"" with over 100 packages, including IPython and its dependencies. By default, the Anaconda installer gives you Python 2.7, but you can use the <code>conda</code> command to <a href=""http://continuum.io/blog/anaconda-python-3"" rel=""noreferrer"">install Python 3</a>.</p>

<p>My personal favorite is to install Python 3 and IPython using <a href=""http://www.macports.org"" rel=""noreferrer"">MacPorts</a>. Yes, it'll install Py3 all over again, but unless you're really starving for disk space (in which case you probably don't want to be installing large packages like IPython) it's no big deal. Using the <code>port</code> command, once the base MacPorts installation has been put in place, you can just run</p>

<pre><code>sudo port install py33-ipython +pyqt4
</code></pre>

<p>and all the other dependencies will be taken care of, (hopefully) flawlessly, without your having to do anything else except wait for a long time while things like PyQt are compiled. You may also need to run <code>sudo port install py33-ipython +notebook</code> if you want the notebook, I don't recall if it's installed otherwise. BTW, you do need X11, Xcode, and the Xcode command-line tools for MacPorts, but they would likely be required if you do the first option as not all packages have binaries available for OS X. The excellent <a href=""http://guide.macports.org/"" rel=""noreferrer"">documentation</a> walks you through everything, from installation to using the <code>port</code> command to maintaining your system. I would highly recommend modifying your <code>~/.profile</code> (or <code>~/.bash_profile</code>, <code>~/.bashrc</code>, or equivalent for your shell) to add the MacPorts install directories (<code>/opt/local/bin</code> and <code>/opt/local/sbin</code>, by default) to the front of your path. Just add <code>export PATH='/opt/local/bin:/opt/local/sbin:$PATH'</code> to the end of the file.</p>

<p>A third alternative option is to use <a href=""http://brew.sh"" rel=""noreferrer"">Homebrew</a>. It's similar to MacPorts, in that the <code>brew</code> command is a type of package manager like <code>port</code> and <code>conda</code>, but in my experience it doesn't have as many packages, and doesn't quite work as seamlessly as <code>port</code>. However, my observations on StackOverflow, <a href=""http://apple.stackexchange.com"">Ask Different</a> and other fora seem to indicate that about 50% of people have great experiences with <code>brew</code> and don't like <code>port</code>, while the other half loves <code>port</code> over <code>brew</code>. YMMV.</p>

<hr>

<p>I hope this helps. Good luck with your installation!</p>",26
21544337,How to create QR bar automatically for my module?,"<p>I am trying to create user module with QR id generation. I have created my module. I want add QR code generation in my module automatically. Tell me, what do I do? </p>

<p>python method(part of the python coding):</p>

<pre><code> def barcode(self, cr, uid, ids, context=None):
   qr = QRCode(version=20, error_correction=ERROR_CORRECT_L)
   qr.add_data(""http://sample:/"")
   qr.make()
   im = qr.make_image()
   im.save(""sample.png"")
</code></pre>

<p>while i am running my application the following error is shown.</p>

<pre><code>File ""/usr/local/lib/python2.7/dist-packages/qrcode/image/pil.py"", line 29, in save
    self._img.save(stream, kind)
  File ""/usr/lib/python2.7/dist-packages/PIL/Image.py"", line 1433, in save
    fp = __builtin__.open(fp, ""wb"")
IOError: [Errno 13] Permission denied: 'sample.png'
</code></pre>

<p>how to clear permission error</p>",python|qr-code,"<p>i am giving file permission to openerp user. It is 
corrected</p>",0
1649412,Problem compiling Python 2.6.4 on AIX 5.3,"<p>I'm trying to build Python 2.6.4 on AIX 5.3. I'm running configure like this:</p>

<pre>
./configure --prefix=/home/chenf/python --disable-ipv6 --disable-shared --with-libs='/usr/lib/libncurses.a' --without-threads --disable-threads --with-ncurses=/utv/sad/ncurses/lib/libncurses.a
</pre>

<p>I seem to be having linking problems with ncurses (see below), which is why I've tried in multiple ways to point out to configure where to find libncurses.a. /usr/lib/libncurses.a is a symbolic link to /utv/sad/ncurses/lib/libncurses.a, which exists and has no permission problems. There is also a link to that file in /usr/local/lib.</p>

<p>My problem is that I get the following errors from make:</p>

<pre>
running build
running build_ext
INFO: Can't locate Tcl/Tk libs and/or headers
building '_curses' extension
./Modules/ld_so_aix gcc -bI:Modules/python.exp build/temp.aix-5.3-2.6/home/chenf/python-src/Python-2.6.4/Modules/_cursesmodule.o -L/usr/local/lib -lncurses -o build/lib.aix-5.3-2.6/_curses.so
ld: 0711-317 ERROR: Undefined symbol: _unctrl
ld: 0711-317 ERROR: Undefined symbol: .setsyx
ld: 0711-317 ERROR: Undefined symbol: ._setqiflush
ld: 0711-317 ERROR: Undefined symbol: .initscr32
ld: 0711-317 ERROR: Undefined symbol: wacs_map
ld: 0711-317 ERROR: Undefined symbol: ._getsyx
ld: 0711-317 ERROR: Undefined symbol: .getattrs
ld: 0711-317 ERROR: Undefined symbol: .w32attrset
ld: 0711-317 ERROR: Undefined symbol: .w32insch
ld: 0711-317 ERROR: Undefined symbol: .p32echochar
ld: 0711-317 ERROR: Undefined symbol: .w32echochar
ld: 0711-317 ERROR: Undefined symbol: .getcury
ld: 0711-317 ERROR: Undefined symbol: .getcurx
ld: 0711-317 ERROR: Undefined symbol: .box32
ld: 0711-317 ERROR: Undefined symbol: .w32attron
ld: 0711-317 ERROR: Undefined symbol: .w32attroff
ld: 0711-317 ERROR: Undefined symbol: .w32addch
ld: 0711-317 ERROR: Undefined symbol: .getpary
ld: 0711-317 ERROR: Undefined symbol: .getparx
ld: 0711-317 ERROR: Undefined symbol: .getmaxy
ld: 0711-317 ERROR: Undefined symbol: .getmaxx
ld: 0711-317 ERROR: Undefined symbol: .getbegy
ld: 0711-317 ERROR: Undefined symbol: .getbegx
ld: 0711-345 Use the -bloadmap or -bnoquiet option to obtain more information.
collect2: ld returned 8 exit status
building 'zlib' extension
./Modules/ld_so_aix gcc -bI:Modules/python.exp build/temp.aix-5.3-2.6/home/chenf/python-src/Python-2.6.4/Modules/zlibmodule.o -L/usr/local/lib -lz -o build/lib.aix-5.3-2.6/zlib.so
ld: 0711-317 ERROR: Undefined symbol: .inflateCopy
ld: 0711-345 Use the -bloadmap or -bnoquiet option to obtain more information.
collect2: ld returned 8 exit status
building 'bz2' extension
gcc -DNDEBUG -O -I. -I/home/chenf/python-src/Python-2.6.4/./Include -I. -IInclude -I./Include -I/usr/local/include -I/home/chenf/python-src/Python-2.6.4/Include -I/home/chenf/python-src/Python-2.6.4 -c /home/chenf/python-src/Python-2.6.4/Modules/bz2module.c -o build/temp.aix-5.3-2.6/home/chenf/python-src/Python-2.6.4/Modules/bz2module.o
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:12:19: bzlib.h: No such file or directory
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:111: error: parse error before ""BZFILE""
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:111: warning: no semicolon at end of struct or union
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:118: error: parse error before '}' token
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:118: warning: data definition has no type or storage class
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:122: error: parse error before ""bz_stream""
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:122: warning: no semicolon at end of struct or union
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:127: error: parse error before '}' token
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:127: warning: data definition has no type or storage class
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:131: error: parse error before ""bz_stream""
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:131: warning: no semicolon at end of struct or union
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:137: error: parse error before '}' token
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:137: warning: data definition has no type or storage class
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: In function `Util_CatchBZ2Error':
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:147: error: `BZ_OK' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:147: error: (Each undeclared identifier is reported only once
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:147: error: for each function it appears in.)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:148: error: `BZ_STREAM_END' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:160: error: `BZ_PARAM_ERROR' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:167: error: `BZ_MEM_ERROR' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:172: error: `BZ_DATA_ERROR' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:173: error: `BZ_DATA_ERROR_MAGIC' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:178: error: `BZ_IO_ERROR' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:183: error: `BZ_UNEXPECTED_EOF' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:190: error: `BZ_SEQUENCE_ERROR' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: At top level:
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:229: error: parse error before '*' token
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: In function `Util_GetLine':
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:239: error: `f' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:243: error: `n' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:265: error: `BZ_OK' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:282: error: `BZ_STREAM_END' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: At top level:
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:325: error: parse error before ""BZFILE""
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: In function `Util_UnivNewlineRead':
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:328: error: `buf' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:334: error: `f' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:335: error: `bzerror' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:335: error: `stream' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:335: error: `n' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:380: error: `BZ_STREAM_END' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: At top level:
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:392: error: parse error before '*' token
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: In function `Util_DropReadAhead':
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:394: error: `f' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: At top level:
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:402: error: parse error before '*' token
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: In function `Util_ReadAhead':
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:407: error: `f' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:418: error: `bufsize' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:427: error: `BZ_STREAM_END' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:430: error: `BZ_OK' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: At top level:
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:443: error: parse error before '*' token
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: In function `Util_ReadAheadGetLineSkip':
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:450: error: `f' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:451: error: `bufsize' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:457: error: `skip' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: At top level:
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:498: error: parse error before '*' token
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: In function `BZ2File_read':
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:505: error: `args' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:509: error: `self' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:549: error: `BZ_STREAM_END' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:553: error: `BZ_OK' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: At top level:
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:585: error: parse error before '*' token
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: In function `BZ2File_readline':
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:590: error: `args' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:594: error: `self' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: At top level:
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:630: error: parse error before '*' token
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: In function `BZ2File_readlines':
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:647: error: `args' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:651: error: `self' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:677: error: `BZ_STREAM_END' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:685: error: `BZ_OK' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: At top level:
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:792: error: parse error before '*' token
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: In function `BZ2File_write':
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:800: error: `args' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:806: error: `self' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:828: error: `BZ_OK' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: At top level:
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:852: error: parse error before '*' token
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: In function `BZ2File_writelines':
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:863: error: `self' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:878: error: `seq' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:953: error: `BZ_OK' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: At top level:
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:990: error: parse error before '*' token
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: In function `BZ2File_seek':
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1004: error: `args' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1016: error: `self' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1046: error: `BZ_STREAM_END' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1048: error: `BZ_OK' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: At top level:
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1143: error: parse error before '*' token
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: In function `BZ2File_tell':
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1147: error: `self' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: At top level:
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1172: error: parse error before '*' token
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: In function `BZ2File_close':
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1175: error: `BZ_OK' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1178: error: `self' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: At top level:
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1204: error: parse error before '*' token
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1225: error: parse error before '*' token
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: In function `BZ2File_get_newlines':
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1227: error: `self' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: At top level:
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1254: error: parse error before '*' token
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: In function `BZ2File_get_closed':
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1256: error: `self' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: At top level:
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1260: error: parse error before '*' token
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: In function `BZ2File_get_mode':
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1262: error: `self' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: At top level:
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1266: error: parse error before '*' token
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: In function `BZ2File_get_name':
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1268: error: `self' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: At top level:
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1291: error: parse error before ')' token
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1291: error: initializer element is not constant
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1291: error: (near initialization for `BZ2File_members[0].offset')
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1292: error: initializer element is not constant
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1292: error: (near initialization for `BZ2File_members[0]')
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1293: error: initializer element is not constant
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1293: error: (near initialization for `BZ2File_members[1]')
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1300: error: parse error before '*' token
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: In function `BZ2File_init':
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1311: error: `self' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1313: error: `args' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1313: error: `kwargs' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1390: error: `BZ_OK' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: At top level:
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1412: error: parse error before '*' token
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: In function `BZ2File_dealloc':
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1419: error: `self' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: At top level:
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1440: error: parse error before '*' token
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: In function `BZ2File_getiter':
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1442: error: `self' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: At top level:
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1454: error: parse error before '*' token
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: In function `BZ2File_iternext':
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1458: error: `self' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: At top level:
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1554: error: parse error before '*' token
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: In function `BZ2Comp_compress':
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1562: error: `bz_stream' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1562: error: `bzs' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1562: error: `self' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1565: error: `args' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1595: error: `BZ_RUN' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1597: error: `BZ_RUN_OK' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: At top level:
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1636: error: parse error before '*' token
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: In function `BZ2Comp_flush':
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1640: error: `bz_stream' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1640: error: `bzs' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1640: error: `self' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1663: error: `BZ_FINISH' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1665: error: `BZ_STREAM_END' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1667: error: `BZ_FINISH_OK' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: At top level:
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1707: error: parse error before '*' token
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: In function `BZ2Comp_init':
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1713: error: `args' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1713: error: `kwargs' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1731: error: `self' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1731: error: `bz_stream' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1733: error: `BZ_OK' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: At top level:
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1752: error: parse error before '*' token
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: In function `BZ2Comp_dealloc':
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1758: error: `self' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: At top level:
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1826: error: parse error before ')' token
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1826: error: initializer element is not constant
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1826: error: (near initialization for `BZ2Decomp_members[0].offset')
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1826: error: initializer element is not constant
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1826: error: (near initialization for `BZ2Decomp_members[0]')
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1827: error: initializer element is not constant
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1827: error: (near initialization for `BZ2Decomp_members[1]')
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1845: error: parse error before '*' token
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: In function `BZ2Decomp_decompress':
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1853: error: `bz_stream' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1853: error: `bzs' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1853: error: `self' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1856: error: `args' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1883: error: `BZ_STREAM_END' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1893: error: `BZ_OK' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: At top level:
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1936: error: parse error before '*' token
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: In function `BZ2Decomp_init':
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1940: error: `args' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1951: error: `self' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1955: error: `bz_stream' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1957: error: `BZ_OK' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: At top level:
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1978: error: parse error before '*' token
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: In function `BZ2Decomp_dealloc':
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1984: error: `self' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: In function `bz2_compress':
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:2065: error: `bz_stream' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:2065: error: parse error before ""_bzs""
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:2066: error: `bzs' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:2066: error: `_bzs' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:2102: error: `BZ_OK' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:2111: error: `BZ_FINISH' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:2113: error: `BZ_STREAM_END' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:2115: error: `BZ_FINISH_OK' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: In function `bz2_decompress':
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:2158: error: `bz_stream' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:2158: error: parse error before ""_bzs""
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:2159: error: `bzs' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:2159: error: `_bzs' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:2186: error: `BZ_OK' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:2197: error: `BZ_STREAM_END' undeclared (first use in this function)
building '_multiprocessing' extension
gcc -DNDEBUG -O -DHAVE_SEM_OPEN=1 -DHAVE_FD_TRANSFER=1 -DHAVE_SEM_TIMEDWAIT=1 -IModules/_multiprocessing -I. -I/home/chenf/python-src/Python-2.6.4/./Include -I. -IInclude -I./Include -I/usr/local/include -I/home/chenf/python-src/Python-2.6.4/Include -I/home/chenf/python-src/Python-2.6.4 -c /home/chenf/python-src/Python-2.6.4/Modules/_multiprocessing/socket_connection.c -o build/temp.aix-5.3-2.6/home/chenf/python-src/Python-2.6.4/Modules/_multiprocessing/socket_connection.o
In file included from /home/chenf/python-src/Python-2.6.4/Modules/_multiprocessing/socket_connection.c:202:
/home/chenf/python-src/Python-2.6.4/Modules/_multiprocessing/connection.h: In function `connection_poll':
/home/chenf/python-src/Python-2.6.4/Modules/_multiprocessing/connection.h:357: error: `_save' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/_multiprocessing/connection.h:357: error: (Each undeclared identifier is reported only once
/home/chenf/python-src/Python-2.6.4/Modules/_multiprocessing/connection.h:357: error: for each function it appears in.)
Traceback (most recent call last):
  File ""./setup.py"", line 1910, in 
    main()
  File ""./setup.py"", line 1905, in main
    'Lib/smtpd.py']
  File ""/home/chenf/python-src/Python-2.6.4/Lib/distutils/core.py"", line 152, in setup
    dist.run_commands()
  File ""/home/chenf/python-src/Python-2.6.4/Lib/distutils/dist.py"", line 975, in run_commands
    self.run_command(cmd)
  File ""/home/chenf/python-src/Python-2.6.4/Lib/distutils/dist.py"", line 995, in run_command
    cmd_obj.run()
  File ""/home/chenf/python-src/Python-2.6.4/Lib/distutils/command/build.py"", line 134, in run
    self.run_command(cmd_name)
  File ""/home/chenf/python-src/Python-2.6.4/Lib/distutils/cmd.py"", line 333, in run_command
    self.distribution.run_command(command)
  File ""/home/chenf/python-src/Python-2.6.4/Lib/distutils/dist.py"", line 995, in run_command
    cmd_obj.run()
  File ""/home/chenf/python-src/Python-2.6.4/Lib/distutils/command/build_ext.py"", line 340, in run
    self.build_extensions()
  File ""./setup.py"", line 201, in build_extensions
    build_ext.build_extensions(self)
  File ""/home/chenf/python-src/Python-2.6.4/Lib/distutils/command/build_ext.py"", line 449, in build_extensions
    self.build_extension(ext)
  File ""./setup.py"", line 234, in build_extension
    if not self.configure_ctypes(ext):
  File ""./setup.py"", line 1715, in configure_ctypes
    ffi_srcdir = os.path.join(fficonfig['ffi_srcdir'], 'src')
KeyError: 'ffi_srcdir'
make: 1254-004 The error code from the last command is 1.


Stop.
</pre>

<p>The thing about not being able to locate Tcl/Tk is not a problem, I don't need those.</p>

<p>However, curses, which is the following problem, IS a problem. I need that. If I interpret things correctly, it can't find libncurses.a. At least, all the listed ""Undefined symbols"" look like ncurses functions to me. But maybe I'm wrong, maybe it does find the libncurses.a file, but can't find the symbols in it? I don't know.</p>",python|compilation|aix|ncurses,"<p>Thanks to Jed Smith's suggestions, I've managed to get this to work. This is what I did accomplish this:</p>

<ul>
<li><p><strong>Step one:</strong> First, I edited ""Makefile.pre.in"". I replaced the line ""CC=   @CC@"" with ""CC=   gcc"". As far as I can tell, this forced the compilation to use gcc instead of whatever other unnamable hideousness AIX tried to use.</p></li>
<li><p><strong>Step two:</strong> Put a soft link for ncurses.h under /usr/include.
I couldn't get configure to find ncurses.h under /opt/utv/sad/include/ncurses/, so I cheated;  I ran the following command as root:</p></li>
</ul>

<pre>
ln -s /utv/sad/ncurses/include/ncurses/ncurses.h /usr/include/ncurses.h
</pre>

<ul>
<li><strong>Step three:</strong>
I compiled and installed GNU binutils and GNU make, configuring them with ""--prefix=/home/chenf"". Then I put /home/chenf/bin first in my path, to make sure the compilation process would use whatever it found there instead of the defaults provides by AIX.</li>
<li><strong>Step four:</strong> I ran configure like this:</li>
</ul>

<pre>
./configure --prefix=/opt/freeware --disable-ipv6 --without-threads --with-ncurses=/opt/sad/ncurses
</pre>

<p>Ipv6 and threads were giving me compilation errors, and I don't need them, so that's why I disabled them. Under the /opt/sad/ncurses directory, lib/libncurses.a is found. That seems to have taken care of the library itself.</p>

<p>After that, all I had to do was ""make"" and ""make install"". Done.</p>

<p>I did get some errors during compilation, and in the end I was told that it had failed to produce some of the modules (like math, and datetime) but that everything else was still OK. For the time being I'll make do without them.</p>",0
1649412,Problem compiling Python 2.6.4 on AIX 5.3,"<p>I'm trying to build Python 2.6.4 on AIX 5.3. I'm running configure like this:</p>

<pre>
./configure --prefix=/home/chenf/python --disable-ipv6 --disable-shared --with-libs='/usr/lib/libncurses.a' --without-threads --disable-threads --with-ncurses=/utv/sad/ncurses/lib/libncurses.a
</pre>

<p>I seem to be having linking problems with ncurses (see below), which is why I've tried in multiple ways to point out to configure where to find libncurses.a. /usr/lib/libncurses.a is a symbolic link to /utv/sad/ncurses/lib/libncurses.a, which exists and has no permission problems. There is also a link to that file in /usr/local/lib.</p>

<p>My problem is that I get the following errors from make:</p>

<pre>
running build
running build_ext
INFO: Can't locate Tcl/Tk libs and/or headers
building '_curses' extension
./Modules/ld_so_aix gcc -bI:Modules/python.exp build/temp.aix-5.3-2.6/home/chenf/python-src/Python-2.6.4/Modules/_cursesmodule.o -L/usr/local/lib -lncurses -o build/lib.aix-5.3-2.6/_curses.so
ld: 0711-317 ERROR: Undefined symbol: _unctrl
ld: 0711-317 ERROR: Undefined symbol: .setsyx
ld: 0711-317 ERROR: Undefined symbol: ._setqiflush
ld: 0711-317 ERROR: Undefined symbol: .initscr32
ld: 0711-317 ERROR: Undefined symbol: wacs_map
ld: 0711-317 ERROR: Undefined symbol: ._getsyx
ld: 0711-317 ERROR: Undefined symbol: .getattrs
ld: 0711-317 ERROR: Undefined symbol: .w32attrset
ld: 0711-317 ERROR: Undefined symbol: .w32insch
ld: 0711-317 ERROR: Undefined symbol: .p32echochar
ld: 0711-317 ERROR: Undefined symbol: .w32echochar
ld: 0711-317 ERROR: Undefined symbol: .getcury
ld: 0711-317 ERROR: Undefined symbol: .getcurx
ld: 0711-317 ERROR: Undefined symbol: .box32
ld: 0711-317 ERROR: Undefined symbol: .w32attron
ld: 0711-317 ERROR: Undefined symbol: .w32attroff
ld: 0711-317 ERROR: Undefined symbol: .w32addch
ld: 0711-317 ERROR: Undefined symbol: .getpary
ld: 0711-317 ERROR: Undefined symbol: .getparx
ld: 0711-317 ERROR: Undefined symbol: .getmaxy
ld: 0711-317 ERROR: Undefined symbol: .getmaxx
ld: 0711-317 ERROR: Undefined symbol: .getbegy
ld: 0711-317 ERROR: Undefined symbol: .getbegx
ld: 0711-345 Use the -bloadmap or -bnoquiet option to obtain more information.
collect2: ld returned 8 exit status
building 'zlib' extension
./Modules/ld_so_aix gcc -bI:Modules/python.exp build/temp.aix-5.3-2.6/home/chenf/python-src/Python-2.6.4/Modules/zlibmodule.o -L/usr/local/lib -lz -o build/lib.aix-5.3-2.6/zlib.so
ld: 0711-317 ERROR: Undefined symbol: .inflateCopy
ld: 0711-345 Use the -bloadmap or -bnoquiet option to obtain more information.
collect2: ld returned 8 exit status
building 'bz2' extension
gcc -DNDEBUG -O -I. -I/home/chenf/python-src/Python-2.6.4/./Include -I. -IInclude -I./Include -I/usr/local/include -I/home/chenf/python-src/Python-2.6.4/Include -I/home/chenf/python-src/Python-2.6.4 -c /home/chenf/python-src/Python-2.6.4/Modules/bz2module.c -o build/temp.aix-5.3-2.6/home/chenf/python-src/Python-2.6.4/Modules/bz2module.o
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:12:19: bzlib.h: No such file or directory
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:111: error: parse error before ""BZFILE""
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:111: warning: no semicolon at end of struct or union
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:118: error: parse error before '}' token
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:118: warning: data definition has no type or storage class
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:122: error: parse error before ""bz_stream""
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:122: warning: no semicolon at end of struct or union
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:127: error: parse error before '}' token
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:127: warning: data definition has no type or storage class
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:131: error: parse error before ""bz_stream""
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:131: warning: no semicolon at end of struct or union
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:137: error: parse error before '}' token
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:137: warning: data definition has no type or storage class
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: In function `Util_CatchBZ2Error':
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:147: error: `BZ_OK' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:147: error: (Each undeclared identifier is reported only once
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:147: error: for each function it appears in.)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:148: error: `BZ_STREAM_END' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:160: error: `BZ_PARAM_ERROR' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:167: error: `BZ_MEM_ERROR' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:172: error: `BZ_DATA_ERROR' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:173: error: `BZ_DATA_ERROR_MAGIC' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:178: error: `BZ_IO_ERROR' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:183: error: `BZ_UNEXPECTED_EOF' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:190: error: `BZ_SEQUENCE_ERROR' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: At top level:
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:229: error: parse error before '*' token
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: In function `Util_GetLine':
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:239: error: `f' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:243: error: `n' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:265: error: `BZ_OK' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:282: error: `BZ_STREAM_END' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: At top level:
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:325: error: parse error before ""BZFILE""
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: In function `Util_UnivNewlineRead':
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:328: error: `buf' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:334: error: `f' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:335: error: `bzerror' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:335: error: `stream' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:335: error: `n' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:380: error: `BZ_STREAM_END' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: At top level:
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:392: error: parse error before '*' token
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: In function `Util_DropReadAhead':
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:394: error: `f' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: At top level:
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:402: error: parse error before '*' token
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: In function `Util_ReadAhead':
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:407: error: `f' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:418: error: `bufsize' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:427: error: `BZ_STREAM_END' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:430: error: `BZ_OK' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: At top level:
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:443: error: parse error before '*' token
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: In function `Util_ReadAheadGetLineSkip':
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:450: error: `f' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:451: error: `bufsize' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:457: error: `skip' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: At top level:
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:498: error: parse error before '*' token
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: In function `BZ2File_read':
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:505: error: `args' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:509: error: `self' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:549: error: `BZ_STREAM_END' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:553: error: `BZ_OK' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: At top level:
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:585: error: parse error before '*' token
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: In function `BZ2File_readline':
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:590: error: `args' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:594: error: `self' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: At top level:
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:630: error: parse error before '*' token
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: In function `BZ2File_readlines':
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:647: error: `args' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:651: error: `self' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:677: error: `BZ_STREAM_END' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:685: error: `BZ_OK' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: At top level:
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:792: error: parse error before '*' token
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: In function `BZ2File_write':
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:800: error: `args' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:806: error: `self' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:828: error: `BZ_OK' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: At top level:
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:852: error: parse error before '*' token
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: In function `BZ2File_writelines':
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:863: error: `self' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:878: error: `seq' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:953: error: `BZ_OK' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: At top level:
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:990: error: parse error before '*' token
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: In function `BZ2File_seek':
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1004: error: `args' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1016: error: `self' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1046: error: `BZ_STREAM_END' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1048: error: `BZ_OK' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: At top level:
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1143: error: parse error before '*' token
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: In function `BZ2File_tell':
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1147: error: `self' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: At top level:
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1172: error: parse error before '*' token
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: In function `BZ2File_close':
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1175: error: `BZ_OK' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1178: error: `self' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: At top level:
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1204: error: parse error before '*' token
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1225: error: parse error before '*' token
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: In function `BZ2File_get_newlines':
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1227: error: `self' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: At top level:
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1254: error: parse error before '*' token
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: In function `BZ2File_get_closed':
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1256: error: `self' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: At top level:
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1260: error: parse error before '*' token
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: In function `BZ2File_get_mode':
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1262: error: `self' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: At top level:
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1266: error: parse error before '*' token
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: In function `BZ2File_get_name':
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1268: error: `self' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: At top level:
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1291: error: parse error before ')' token
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1291: error: initializer element is not constant
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1291: error: (near initialization for `BZ2File_members[0].offset')
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1292: error: initializer element is not constant
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1292: error: (near initialization for `BZ2File_members[0]')
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1293: error: initializer element is not constant
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1293: error: (near initialization for `BZ2File_members[1]')
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1300: error: parse error before '*' token
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: In function `BZ2File_init':
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1311: error: `self' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1313: error: `args' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1313: error: `kwargs' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1390: error: `BZ_OK' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: At top level:
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1412: error: parse error before '*' token
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: In function `BZ2File_dealloc':
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1419: error: `self' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: At top level:
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1440: error: parse error before '*' token
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: In function `BZ2File_getiter':
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1442: error: `self' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: At top level:
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1454: error: parse error before '*' token
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: In function `BZ2File_iternext':
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1458: error: `self' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: At top level:
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1554: error: parse error before '*' token
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: In function `BZ2Comp_compress':
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1562: error: `bz_stream' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1562: error: `bzs' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1562: error: `self' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1565: error: `args' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1595: error: `BZ_RUN' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1597: error: `BZ_RUN_OK' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: At top level:
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1636: error: parse error before '*' token
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: In function `BZ2Comp_flush':
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1640: error: `bz_stream' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1640: error: `bzs' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1640: error: `self' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1663: error: `BZ_FINISH' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1665: error: `BZ_STREAM_END' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1667: error: `BZ_FINISH_OK' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: At top level:
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1707: error: parse error before '*' token
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: In function `BZ2Comp_init':
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1713: error: `args' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1713: error: `kwargs' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1731: error: `self' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1731: error: `bz_stream' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1733: error: `BZ_OK' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: At top level:
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1752: error: parse error before '*' token
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: In function `BZ2Comp_dealloc':
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1758: error: `self' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: At top level:
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1826: error: parse error before ')' token
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1826: error: initializer element is not constant
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1826: error: (near initialization for `BZ2Decomp_members[0].offset')
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1826: error: initializer element is not constant
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1826: error: (near initialization for `BZ2Decomp_members[0]')
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1827: error: initializer element is not constant
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1827: error: (near initialization for `BZ2Decomp_members[1]')
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1845: error: parse error before '*' token
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: In function `BZ2Decomp_decompress':
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1853: error: `bz_stream' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1853: error: `bzs' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1853: error: `self' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1856: error: `args' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1883: error: `BZ_STREAM_END' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1893: error: `BZ_OK' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: At top level:
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1936: error: parse error before '*' token
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: In function `BZ2Decomp_init':
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1940: error: `args' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1951: error: `self' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1955: error: `bz_stream' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1957: error: `BZ_OK' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: At top level:
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1978: error: parse error before '*' token
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: In function `BZ2Decomp_dealloc':
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1984: error: `self' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: In function `bz2_compress':
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:2065: error: `bz_stream' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:2065: error: parse error before ""_bzs""
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:2066: error: `bzs' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:2066: error: `_bzs' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:2102: error: `BZ_OK' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:2111: error: `BZ_FINISH' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:2113: error: `BZ_STREAM_END' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:2115: error: `BZ_FINISH_OK' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: In function `bz2_decompress':
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:2158: error: `bz_stream' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:2158: error: parse error before ""_bzs""
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:2159: error: `bzs' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:2159: error: `_bzs' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:2186: error: `BZ_OK' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:2197: error: `BZ_STREAM_END' undeclared (first use in this function)
building '_multiprocessing' extension
gcc -DNDEBUG -O -DHAVE_SEM_OPEN=1 -DHAVE_FD_TRANSFER=1 -DHAVE_SEM_TIMEDWAIT=1 -IModules/_multiprocessing -I. -I/home/chenf/python-src/Python-2.6.4/./Include -I. -IInclude -I./Include -I/usr/local/include -I/home/chenf/python-src/Python-2.6.4/Include -I/home/chenf/python-src/Python-2.6.4 -c /home/chenf/python-src/Python-2.6.4/Modules/_multiprocessing/socket_connection.c -o build/temp.aix-5.3-2.6/home/chenf/python-src/Python-2.6.4/Modules/_multiprocessing/socket_connection.o
In file included from /home/chenf/python-src/Python-2.6.4/Modules/_multiprocessing/socket_connection.c:202:
/home/chenf/python-src/Python-2.6.4/Modules/_multiprocessing/connection.h: In function `connection_poll':
/home/chenf/python-src/Python-2.6.4/Modules/_multiprocessing/connection.h:357: error: `_save' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/_multiprocessing/connection.h:357: error: (Each undeclared identifier is reported only once
/home/chenf/python-src/Python-2.6.4/Modules/_multiprocessing/connection.h:357: error: for each function it appears in.)
Traceback (most recent call last):
  File ""./setup.py"", line 1910, in 
    main()
  File ""./setup.py"", line 1905, in main
    'Lib/smtpd.py']
  File ""/home/chenf/python-src/Python-2.6.4/Lib/distutils/core.py"", line 152, in setup
    dist.run_commands()
  File ""/home/chenf/python-src/Python-2.6.4/Lib/distutils/dist.py"", line 975, in run_commands
    self.run_command(cmd)
  File ""/home/chenf/python-src/Python-2.6.4/Lib/distutils/dist.py"", line 995, in run_command
    cmd_obj.run()
  File ""/home/chenf/python-src/Python-2.6.4/Lib/distutils/command/build.py"", line 134, in run
    self.run_command(cmd_name)
  File ""/home/chenf/python-src/Python-2.6.4/Lib/distutils/cmd.py"", line 333, in run_command
    self.distribution.run_command(command)
  File ""/home/chenf/python-src/Python-2.6.4/Lib/distutils/dist.py"", line 995, in run_command
    cmd_obj.run()
  File ""/home/chenf/python-src/Python-2.6.4/Lib/distutils/command/build_ext.py"", line 340, in run
    self.build_extensions()
  File ""./setup.py"", line 201, in build_extensions
    build_ext.build_extensions(self)
  File ""/home/chenf/python-src/Python-2.6.4/Lib/distutils/command/build_ext.py"", line 449, in build_extensions
    self.build_extension(ext)
  File ""./setup.py"", line 234, in build_extension
    if not self.configure_ctypes(ext):
  File ""./setup.py"", line 1715, in configure_ctypes
    ffi_srcdir = os.path.join(fficonfig['ffi_srcdir'], 'src')
KeyError: 'ffi_srcdir'
make: 1254-004 The error code from the last command is 1.


Stop.
</pre>

<p>The thing about not being able to locate Tcl/Tk is not a problem, I don't need those.</p>

<p>However, curses, which is the following problem, IS a problem. I need that. If I interpret things correctly, it can't find libncurses.a. At least, all the listed ""Undefined symbols"" look like ncurses functions to me. But maybe I'm wrong, maybe it does find the libncurses.a file, but can't find the symbols in it? I don't know.</p>",python|compilation|aix|ncurses,"<p>This is so old problem(2009 ??)..but I meet the same problem today!!
For other AIX users like me...I will leave my case</p>

<p>OK..first, Check your environmental variable OBJECT_MODE.</p>

<p>In my case, OBJECT_MODE was 64,  but the archive file libcurses.a contains
only 32bit object files!!</p>

<p>After changing the environmental variable OBJECT_MODE to 32, everything worked!!!</p>",1
1649412,Problem compiling Python 2.6.4 on AIX 5.3,"<p>I'm trying to build Python 2.6.4 on AIX 5.3. I'm running configure like this:</p>

<pre>
./configure --prefix=/home/chenf/python --disable-ipv6 --disable-shared --with-libs='/usr/lib/libncurses.a' --without-threads --disable-threads --with-ncurses=/utv/sad/ncurses/lib/libncurses.a
</pre>

<p>I seem to be having linking problems with ncurses (see below), which is why I've tried in multiple ways to point out to configure where to find libncurses.a. /usr/lib/libncurses.a is a symbolic link to /utv/sad/ncurses/lib/libncurses.a, which exists and has no permission problems. There is also a link to that file in /usr/local/lib.</p>

<p>My problem is that I get the following errors from make:</p>

<pre>
running build
running build_ext
INFO: Can't locate Tcl/Tk libs and/or headers
building '_curses' extension
./Modules/ld_so_aix gcc -bI:Modules/python.exp build/temp.aix-5.3-2.6/home/chenf/python-src/Python-2.6.4/Modules/_cursesmodule.o -L/usr/local/lib -lncurses -o build/lib.aix-5.3-2.6/_curses.so
ld: 0711-317 ERROR: Undefined symbol: _unctrl
ld: 0711-317 ERROR: Undefined symbol: .setsyx
ld: 0711-317 ERROR: Undefined symbol: ._setqiflush
ld: 0711-317 ERROR: Undefined symbol: .initscr32
ld: 0711-317 ERROR: Undefined symbol: wacs_map
ld: 0711-317 ERROR: Undefined symbol: ._getsyx
ld: 0711-317 ERROR: Undefined symbol: .getattrs
ld: 0711-317 ERROR: Undefined symbol: .w32attrset
ld: 0711-317 ERROR: Undefined symbol: .w32insch
ld: 0711-317 ERROR: Undefined symbol: .p32echochar
ld: 0711-317 ERROR: Undefined symbol: .w32echochar
ld: 0711-317 ERROR: Undefined symbol: .getcury
ld: 0711-317 ERROR: Undefined symbol: .getcurx
ld: 0711-317 ERROR: Undefined symbol: .box32
ld: 0711-317 ERROR: Undefined symbol: .w32attron
ld: 0711-317 ERROR: Undefined symbol: .w32attroff
ld: 0711-317 ERROR: Undefined symbol: .w32addch
ld: 0711-317 ERROR: Undefined symbol: .getpary
ld: 0711-317 ERROR: Undefined symbol: .getparx
ld: 0711-317 ERROR: Undefined symbol: .getmaxy
ld: 0711-317 ERROR: Undefined symbol: .getmaxx
ld: 0711-317 ERROR: Undefined symbol: .getbegy
ld: 0711-317 ERROR: Undefined symbol: .getbegx
ld: 0711-345 Use the -bloadmap or -bnoquiet option to obtain more information.
collect2: ld returned 8 exit status
building 'zlib' extension
./Modules/ld_so_aix gcc -bI:Modules/python.exp build/temp.aix-5.3-2.6/home/chenf/python-src/Python-2.6.4/Modules/zlibmodule.o -L/usr/local/lib -lz -o build/lib.aix-5.3-2.6/zlib.so
ld: 0711-317 ERROR: Undefined symbol: .inflateCopy
ld: 0711-345 Use the -bloadmap or -bnoquiet option to obtain more information.
collect2: ld returned 8 exit status
building 'bz2' extension
gcc -DNDEBUG -O -I. -I/home/chenf/python-src/Python-2.6.4/./Include -I. -IInclude -I./Include -I/usr/local/include -I/home/chenf/python-src/Python-2.6.4/Include -I/home/chenf/python-src/Python-2.6.4 -c /home/chenf/python-src/Python-2.6.4/Modules/bz2module.c -o build/temp.aix-5.3-2.6/home/chenf/python-src/Python-2.6.4/Modules/bz2module.o
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:12:19: bzlib.h: No such file or directory
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:111: error: parse error before ""BZFILE""
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:111: warning: no semicolon at end of struct or union
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:118: error: parse error before '}' token
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:118: warning: data definition has no type or storage class
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:122: error: parse error before ""bz_stream""
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:122: warning: no semicolon at end of struct or union
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:127: error: parse error before '}' token
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:127: warning: data definition has no type or storage class
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:131: error: parse error before ""bz_stream""
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:131: warning: no semicolon at end of struct or union
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:137: error: parse error before '}' token
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:137: warning: data definition has no type or storage class
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: In function `Util_CatchBZ2Error':
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:147: error: `BZ_OK' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:147: error: (Each undeclared identifier is reported only once
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:147: error: for each function it appears in.)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:148: error: `BZ_STREAM_END' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:160: error: `BZ_PARAM_ERROR' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:167: error: `BZ_MEM_ERROR' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:172: error: `BZ_DATA_ERROR' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:173: error: `BZ_DATA_ERROR_MAGIC' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:178: error: `BZ_IO_ERROR' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:183: error: `BZ_UNEXPECTED_EOF' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:190: error: `BZ_SEQUENCE_ERROR' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: At top level:
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:229: error: parse error before '*' token
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: In function `Util_GetLine':
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:239: error: `f' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:243: error: `n' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:265: error: `BZ_OK' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:282: error: `BZ_STREAM_END' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: At top level:
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:325: error: parse error before ""BZFILE""
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: In function `Util_UnivNewlineRead':
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:328: error: `buf' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:334: error: `f' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:335: error: `bzerror' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:335: error: `stream' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:335: error: `n' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:380: error: `BZ_STREAM_END' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: At top level:
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:392: error: parse error before '*' token
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: In function `Util_DropReadAhead':
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:394: error: `f' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: At top level:
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:402: error: parse error before '*' token
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: In function `Util_ReadAhead':
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:407: error: `f' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:418: error: `bufsize' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:427: error: `BZ_STREAM_END' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:430: error: `BZ_OK' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: At top level:
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:443: error: parse error before '*' token
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: In function `Util_ReadAheadGetLineSkip':
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:450: error: `f' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:451: error: `bufsize' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:457: error: `skip' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: At top level:
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:498: error: parse error before '*' token
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: In function `BZ2File_read':
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:505: error: `args' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:509: error: `self' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:549: error: `BZ_STREAM_END' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:553: error: `BZ_OK' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: At top level:
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:585: error: parse error before '*' token
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: In function `BZ2File_readline':
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:590: error: `args' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:594: error: `self' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: At top level:
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:630: error: parse error before '*' token
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: In function `BZ2File_readlines':
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:647: error: `args' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:651: error: `self' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:677: error: `BZ_STREAM_END' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:685: error: `BZ_OK' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: At top level:
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:792: error: parse error before '*' token
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: In function `BZ2File_write':
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:800: error: `args' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:806: error: `self' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:828: error: `BZ_OK' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: At top level:
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:852: error: parse error before '*' token
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: In function `BZ2File_writelines':
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:863: error: `self' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:878: error: `seq' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:953: error: `BZ_OK' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: At top level:
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:990: error: parse error before '*' token
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: In function `BZ2File_seek':
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1004: error: `args' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1016: error: `self' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1046: error: `BZ_STREAM_END' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1048: error: `BZ_OK' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: At top level:
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1143: error: parse error before '*' token
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: In function `BZ2File_tell':
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1147: error: `self' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: At top level:
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1172: error: parse error before '*' token
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: In function `BZ2File_close':
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1175: error: `BZ_OK' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1178: error: `self' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: At top level:
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1204: error: parse error before '*' token
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1225: error: parse error before '*' token
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: In function `BZ2File_get_newlines':
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1227: error: `self' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: At top level:
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1254: error: parse error before '*' token
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: In function `BZ2File_get_closed':
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1256: error: `self' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: At top level:
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1260: error: parse error before '*' token
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: In function `BZ2File_get_mode':
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1262: error: `self' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: At top level:
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1266: error: parse error before '*' token
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: In function `BZ2File_get_name':
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1268: error: `self' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: At top level:
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1291: error: parse error before ')' token
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1291: error: initializer element is not constant
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1291: error: (near initialization for `BZ2File_members[0].offset')
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1292: error: initializer element is not constant
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1292: error: (near initialization for `BZ2File_members[0]')
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1293: error: initializer element is not constant
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1293: error: (near initialization for `BZ2File_members[1]')
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1300: error: parse error before '*' token
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: In function `BZ2File_init':
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1311: error: `self' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1313: error: `args' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1313: error: `kwargs' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1390: error: `BZ_OK' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: At top level:
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1412: error: parse error before '*' token
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: In function `BZ2File_dealloc':
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1419: error: `self' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: At top level:
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1440: error: parse error before '*' token
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: In function `BZ2File_getiter':
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1442: error: `self' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: At top level:
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1454: error: parse error before '*' token
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: In function `BZ2File_iternext':
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1458: error: `self' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: At top level:
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1554: error: parse error before '*' token
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: In function `BZ2Comp_compress':
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1562: error: `bz_stream' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1562: error: `bzs' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1562: error: `self' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1565: error: `args' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1595: error: `BZ_RUN' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1597: error: `BZ_RUN_OK' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: At top level:
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1636: error: parse error before '*' token
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: In function `BZ2Comp_flush':
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1640: error: `bz_stream' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1640: error: `bzs' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1640: error: `self' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1663: error: `BZ_FINISH' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1665: error: `BZ_STREAM_END' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1667: error: `BZ_FINISH_OK' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: At top level:
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1707: error: parse error before '*' token
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: In function `BZ2Comp_init':
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1713: error: `args' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1713: error: `kwargs' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1731: error: `self' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1731: error: `bz_stream' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1733: error: `BZ_OK' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: At top level:
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1752: error: parse error before '*' token
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: In function `BZ2Comp_dealloc':
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1758: error: `self' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: At top level:
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1826: error: parse error before ')' token
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1826: error: initializer element is not constant
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1826: error: (near initialization for `BZ2Decomp_members[0].offset')
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1826: error: initializer element is not constant
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1826: error: (near initialization for `BZ2Decomp_members[0]')
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1827: error: initializer element is not constant
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1827: error: (near initialization for `BZ2Decomp_members[1]')
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1845: error: parse error before '*' token
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: In function `BZ2Decomp_decompress':
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1853: error: `bz_stream' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1853: error: `bzs' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1853: error: `self' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1856: error: `args' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1883: error: `BZ_STREAM_END' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1893: error: `BZ_OK' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: At top level:
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1936: error: parse error before '*' token
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: In function `BZ2Decomp_init':
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1940: error: `args' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1951: error: `self' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1955: error: `bz_stream' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1957: error: `BZ_OK' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: At top level:
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1978: error: parse error before '*' token
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: In function `BZ2Decomp_dealloc':
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:1984: error: `self' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: In function `bz2_compress':
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:2065: error: `bz_stream' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:2065: error: parse error before ""_bzs""
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:2066: error: `bzs' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:2066: error: `_bzs' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:2102: error: `BZ_OK' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:2111: error: `BZ_FINISH' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:2113: error: `BZ_STREAM_END' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:2115: error: `BZ_FINISH_OK' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c: In function `bz2_decompress':
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:2158: error: `bz_stream' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:2158: error: parse error before ""_bzs""
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:2159: error: `bzs' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:2159: error: `_bzs' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:2186: error: `BZ_OK' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/bz2module.c:2197: error: `BZ_STREAM_END' undeclared (first use in this function)
building '_multiprocessing' extension
gcc -DNDEBUG -O -DHAVE_SEM_OPEN=1 -DHAVE_FD_TRANSFER=1 -DHAVE_SEM_TIMEDWAIT=1 -IModules/_multiprocessing -I. -I/home/chenf/python-src/Python-2.6.4/./Include -I. -IInclude -I./Include -I/usr/local/include -I/home/chenf/python-src/Python-2.6.4/Include -I/home/chenf/python-src/Python-2.6.4 -c /home/chenf/python-src/Python-2.6.4/Modules/_multiprocessing/socket_connection.c -o build/temp.aix-5.3-2.6/home/chenf/python-src/Python-2.6.4/Modules/_multiprocessing/socket_connection.o
In file included from /home/chenf/python-src/Python-2.6.4/Modules/_multiprocessing/socket_connection.c:202:
/home/chenf/python-src/Python-2.6.4/Modules/_multiprocessing/connection.h: In function `connection_poll':
/home/chenf/python-src/Python-2.6.4/Modules/_multiprocessing/connection.h:357: error: `_save' undeclared (first use in this function)
/home/chenf/python-src/Python-2.6.4/Modules/_multiprocessing/connection.h:357: error: (Each undeclared identifier is reported only once
/home/chenf/python-src/Python-2.6.4/Modules/_multiprocessing/connection.h:357: error: for each function it appears in.)
Traceback (most recent call last):
  File ""./setup.py"", line 1910, in 
    main()
  File ""./setup.py"", line 1905, in main
    'Lib/smtpd.py']
  File ""/home/chenf/python-src/Python-2.6.4/Lib/distutils/core.py"", line 152, in setup
    dist.run_commands()
  File ""/home/chenf/python-src/Python-2.6.4/Lib/distutils/dist.py"", line 975, in run_commands
    self.run_command(cmd)
  File ""/home/chenf/python-src/Python-2.6.4/Lib/distutils/dist.py"", line 995, in run_command
    cmd_obj.run()
  File ""/home/chenf/python-src/Python-2.6.4/Lib/distutils/command/build.py"", line 134, in run
    self.run_command(cmd_name)
  File ""/home/chenf/python-src/Python-2.6.4/Lib/distutils/cmd.py"", line 333, in run_command
    self.distribution.run_command(command)
  File ""/home/chenf/python-src/Python-2.6.4/Lib/distutils/dist.py"", line 995, in run_command
    cmd_obj.run()
  File ""/home/chenf/python-src/Python-2.6.4/Lib/distutils/command/build_ext.py"", line 340, in run
    self.build_extensions()
  File ""./setup.py"", line 201, in build_extensions
    build_ext.build_extensions(self)
  File ""/home/chenf/python-src/Python-2.6.4/Lib/distutils/command/build_ext.py"", line 449, in build_extensions
    self.build_extension(ext)
  File ""./setup.py"", line 234, in build_extension
    if not self.configure_ctypes(ext):
  File ""./setup.py"", line 1715, in configure_ctypes
    ffi_srcdir = os.path.join(fficonfig['ffi_srcdir'], 'src')
KeyError: 'ffi_srcdir'
make: 1254-004 The error code from the last command is 1.


Stop.
</pre>

<p>The thing about not being able to locate Tcl/Tk is not a problem, I don't need those.</p>

<p>However, curses, which is the following problem, IS a problem. I need that. If I interpret things correctly, it can't find libncurses.a. At least, all the listed ""Undefined symbols"" look like ncurses functions to me. But maybe I'm wrong, maybe it does find the libncurses.a file, but can't find the symbols in it? I don't know.</p>",python|compilation|aix|ncurses,"<p>It looks like bzip2 isn't able to find itself, either -- sometimes you see weird Python build errors when you wander too far from GCC.  My first gut recommendation would be to compile with GCC, GNU binutils, and GNU make, and see if the problem persists.</p>

<p>Also, when you're talking to <code>configure</code>, it'll figure out the name of the library from your configure option.  Therefore, this:</p>

<pre><code>--with-ncurses=/utv/sad/ncurses/lib/libncurses.a
</code></pre>

<p>Should be:</p>

<pre><code>--with-ncurses=/utv/sad/ncurses/lib
</code></pre>

<p>But that also implies that the headers can be found there. Can they?</p>

<p>There may also be an option to your platform's compiler to add a directory for libs -- since, in this case, Python is trying to use <code>-lncurses</code> before it compiles the extension (making the linker search for libncurses.a in the library search path).</p>",1
2172525,Why is my simple python gtk+cairo program running so slowly/stutteringly?,"<p>My program draws circles moving on the window.  I think I must be missing some basic gtk/cairo concept because it seems to be running too slowly/stutteringly for what I am doing. Any ideas? Thanks for any help!</p>

<pre><code>#!/usr/bin/python

import gtk
import gtk.gdk as gdk
import math
import random
import gobject

# The number of circles and the window size.
num = 128
size = 512

# Initialize circle coordinates and velocities.
x = []
y = []
xv = []
yv = []
for i in range(num):
    x.append(random.randint(0, size))
    y.append(random.randint(0, size))
    xv.append(random.randint(-4, 4))
    yv.append(random.randint(-4, 4))


# Draw the circles and update their positions.
def expose(*args):
    cr = darea.window.cairo_create()
    cr.set_line_width(4)
    for i in range(num):
        cr.set_source_rgb(1, 0, 0)
        cr.arc(x[i], y[i], 8, 0, 2 * math.pi)
        cr.stroke_preserve()
        cr.set_source_rgb(1, 1, 1)
        cr.fill()
        x[i] += xv[i]
        y[i] += yv[i]
        if x[i] &gt; size or x[i] &lt; 0:
            xv[i] = -xv[i]
        if y[i] &gt; size or y[i] &lt; 0:
            yv[i] = -yv[i]


# Self-evident?
def timeout():
    darea.queue_draw()
    return True


# Initialize the window.
window = gtk.Window()
window.resize(size, size)
window.connect(""destroy"", gtk.main_quit)
darea = gtk.DrawingArea()
darea.connect(""expose-event"", expose)
window.add(darea)
window.show_all()


# Self-evident?
gobject.idle_add(timeout)
gtk.main()
</code></pre>",python|animation|gtk|pygtk|cairo,"<p>I have got the same problem in program was written on C#. Before you leaves <code>Expose</code> event, try to write <code>cr.dispose()</code>.</p>",0
2172525,Why is my simple python gtk+cairo program running so slowly/stutteringly?,"<p>My program draws circles moving on the window.  I think I must be missing some basic gtk/cairo concept because it seems to be running too slowly/stutteringly for what I am doing. Any ideas? Thanks for any help!</p>

<pre><code>#!/usr/bin/python

import gtk
import gtk.gdk as gdk
import math
import random
import gobject

# The number of circles and the window size.
num = 128
size = 512

# Initialize circle coordinates and velocities.
x = []
y = []
xv = []
yv = []
for i in range(num):
    x.append(random.randint(0, size))
    y.append(random.randint(0, size))
    xv.append(random.randint(-4, 4))
    yv.append(random.randint(-4, 4))


# Draw the circles and update their positions.
def expose(*args):
    cr = darea.window.cairo_create()
    cr.set_line_width(4)
    for i in range(num):
        cr.set_source_rgb(1, 0, 0)
        cr.arc(x[i], y[i], 8, 0, 2 * math.pi)
        cr.stroke_preserve()
        cr.set_source_rgb(1, 1, 1)
        cr.fill()
        x[i] += xv[i]
        y[i] += yv[i]
        if x[i] &gt; size or x[i] &lt; 0:
            xv[i] = -xv[i]
        if y[i] &gt; size or y[i] &lt; 0:
            yv[i] = -yv[i]


# Self-evident?
def timeout():
    darea.queue_draw()
    return True


# Initialize the window.
window = gtk.Window()
window.resize(size, size)
window.connect(""destroy"", gtk.main_quit)
darea = gtk.DrawingArea()
darea.connect(""expose-event"", expose)
window.add(darea)
window.show_all()


# Self-evident?
gobject.idle_add(timeout)
gtk.main()
</code></pre>",python|animation|gtk|pygtk|cairo,"<p>I don't see anything fundamentally wrong with your code. To narrow the problem down I tried a different approach that may be minimally faster, but the difference is almost negligible:</p>

<pre><code>class Area(gtk.DrawingArea):
    def do_expose_event(self, event):
        cr = self.window.cairo_create()

        # Restrict Cairo to the exposed area; avoid extra work
        cr.rectangle(event.area.x,
                     event.area.y,
                     event.area.width,
                     event.area.height)
        cr.clip()

        cr.set_line_width(4)
        for i in range(num):
            cr.set_source_rgb(1, 0, 0)
            cr.arc(x[i], y[i], 8, 0, 2 * math.pi)
            cr.stroke_preserve()
            cr.set_source_rgb(1, 1, 1)
            cr.fill()
            x[i] += xv[i]
            y[i] += yv[i]
            if x[i] &gt; size or x[i] &lt; 0:
                xv[i] = -xv[i]
            if y[i] &gt; size or y[i] &lt; 0:
                yv[i] = -yv[i]
        self.queue_draw()

gobject.type_register(Area)

# Initialize the window.
window = gtk.Window()
window.resize(size, size)
window.connect(""destroy"", gtk.main_quit)
darea = Area()
window.add(darea)
window.show_all()
</code></pre>

<p>Also, overriding DrawingArea.draw() with a stub makes no major difference.</p>

<p>I'd probably try the Cairo mailing list, or look at Clutter or pygame for drawing a large number of items on the screen.</p>",2
2172525,Why is my simple python gtk+cairo program running so slowly/stutteringly?,"<p>My program draws circles moving on the window.  I think I must be missing some basic gtk/cairo concept because it seems to be running too slowly/stutteringly for what I am doing. Any ideas? Thanks for any help!</p>

<pre><code>#!/usr/bin/python

import gtk
import gtk.gdk as gdk
import math
import random
import gobject

# The number of circles and the window size.
num = 128
size = 512

# Initialize circle coordinates and velocities.
x = []
y = []
xv = []
yv = []
for i in range(num):
    x.append(random.randint(0, size))
    y.append(random.randint(0, size))
    xv.append(random.randint(-4, 4))
    yv.append(random.randint(-4, 4))


# Draw the circles and update their positions.
def expose(*args):
    cr = darea.window.cairo_create()
    cr.set_line_width(4)
    for i in range(num):
        cr.set_source_rgb(1, 0, 0)
        cr.arc(x[i], y[i], 8, 0, 2 * math.pi)
        cr.stroke_preserve()
        cr.set_source_rgb(1, 1, 1)
        cr.fill()
        x[i] += xv[i]
        y[i] += yv[i]
        if x[i] &gt; size or x[i] &lt; 0:
            xv[i] = -xv[i]
        if y[i] &gt; size or y[i] &lt; 0:
            yv[i] = -yv[i]


# Self-evident?
def timeout():
    darea.queue_draw()
    return True


# Initialize the window.
window = gtk.Window()
window.resize(size, size)
window.connect(""destroy"", gtk.main_quit)
darea = gtk.DrawingArea()
darea.connect(""expose-event"", expose)
window.add(darea)
window.show_all()


# Self-evident?
gobject.idle_add(timeout)
gtk.main()
</code></pre>",python|animation|gtk|pygtk|cairo,"<p>One of the problems is that you are drawing the same basic object again and again. I'm not sure about GTK+ buffering behavior, but also keep in mind that basic function calls incur a cost in Python. I've added a frame counter to your program, and I with your code, I got around 30fps max.</p>

<p>There are several things you can do, for instance compose larger paths before actually calling any fill or stroke method (i.e. will all arcs in a single call). Another solution, which is vastly faster is to compose your ball in an off-screen buffer and then just paint it to the screen repeatedly:</p>

<pre><code>def create_basic_image():
    img = cairo.ImageSurface(cairo.FORMAT_ARGB32, 24, 24)
    c = cairo.Context(img)
    c.set_line_width(4)
    c.arc(12, 12, 8, 0, 2 * math.pi)
    c.set_source_rgb(1, 0, 0)
    c.stroke_preserve()
    c.set_source_rgb(1, 1, 1)
    c.fill()
    return img

def expose(sender, event, img):
    cr = darea.window.cairo_create()
    for i in range(num):
        cr.set_source_surface(img, x[i], y[i])        
        cr.paint()
        ... # your update code here

...
darea.connect(""expose-event"", expose, create_basic_image())
</code></pre>

<p>This gives about 273 fps on my machine. Because of this, you should think about using <a href=""http://www.pygtk.org/pygtk2reference/gobject-functions.html#function-gobject--timeout-add"" rel=""noreferrer""><code>gobject.timeout_add</code></a> rather than <code>idle_add</code>.</p>",11
1624245,virtualenv confusion,"<p>So I open a terminal, cd to my desktop, and run:</p>

<p><code>virtualenv test_env</code></p>

<p>I then create the following file in my normal environment:</p>

<p><code>/home/jesse/.local/lib/python2.6/site-packages/foo_package/__init__.py</code></p>

<p>This file contains one line:</p>

<p><code>print ""importing from normal env""</code></p>

<p>In the test_env I create:</p>

<p><code>/home/jesse/Desktop/test_env/lib/python2.6/site-packages/foo_package/__init__.py</code></p>

<p>Containing:</p>

<p><code>print ""importing from test env""</code></p>

<p>Now I open a terminal and run:</p>

<p><code>$ /home/jesse/Desktop/test_env/bin/python</code></p>

<p>And then do:</p>

<p><code>&gt;&gt;&gt; import foo_package</code></p>

<p>Which outputs:</p>

<p><code>importing from normal env</code></p>

<p>Why doesn't it import the file from test_env?  I thought that was the whole point of virtualenv.  Am I missing something here?</p>

<p><strong>Edit:</strong>  Jon H informed me that I need to activate the environment.  But this doesn't seem to fix the problem...</p>

<pre><code>jesse@jesse-laptop:~/Desktop/test_env$ source bin/activate
(test_env)jesse@jesse-laptop:~/Desktop/test_env$ bin/python
Python 2.6.2 (release26-maint, Apr 19 2009, 01:56:41) 
[GCC 4.3.3] on linux2
Type ""help"", ""copyright"", ""credits"" or ""license"" for more information.
&gt;&gt;&gt; import foo_package
importing from normal env
&gt;&gt;&gt; 
</code></pre>

<p>Using  Ubuntu 9.04 / Python 2.6.2 / virtualenv 1.33  in case that's relevant.</p>

<p><strong>Edit 2:</strong>   Haes asked me what sys.path was in my virtualenv...</p>

<pre><code>jesse@jesse-laptop:~/Desktop/test_env$ source bin/activate
(test_env)jesse@jesse-laptop:~/Desktop/test_env$ bin/python
Python 2.6.2 (release26-maint, Apr 19 2009, 01:56:41) 
[GCC 4.3.3] on linux2
Type ""help"", ""copyright"", ""credits"" or ""license"" for more information.
&gt;&gt;&gt; import sys
&gt;&gt;&gt; sys.path
</code></pre>

<p>Output:
['', '/home/jesse/Desktop/test_env/lib/python2.6/site-packages/setuptools-0.6c9-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/enum-0.4.3-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/clonedigger-1.0.9_beta-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/ETS-3.2.0-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/TraitsGUI-3.0.4-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/TraitsBackendWX-3.1.0-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/TraitsBackendQt-3.1.0-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/yolk-0.4.1-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/pylint-0.18.0-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/logilab_astng-0.19.0-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/logilab_common-0.39.0-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/pudb-0.92.7-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/Pygments-1.0-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/ETSProjectTools-0.5.1-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/pydee-0.4.24-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/visionegg-1.2.1-py2.6-linux-i686.egg', '/usr/local/lib/python2.6/dist-packages/PyOpenGL-3.0.0c1-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/Whoosh-0.2.6-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/pyinotify-0.8.6-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/svgbatch-0.1.9-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/pyglet-1.1.3-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/lepton-1.0b2-py2.6-linux-i686.egg', '/usr/local/lib/python2.6/dist-packages/rope-0.9.2-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/simplejson-2.0.9-py2.6-linux-i686.egg', '/usr/local/lib/python2.6/dist-packages/pymunk-0.8.4-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/cssutils-0.9.6-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/Shapely-1.0.14-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/sympy-0.6.5-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/virtualenvwrapper-1.20-py2.6.egg', '/home/jesse/Desktop/test_env/lib/python2.6', '/home/jesse/Desktop/test_env/lib/python2.6/plat-linux2', '/home/jesse/Desktop/test_env/lib/python2.6/lib-tk', '/home/jesse/Desktop/test_env/lib/python2.6/lib-old', '/home/jesse/Desktop/test_env/lib/python2.6/lib-dynload', '/usr/lib/python2.6', '/usr/lib/python2.6/plat-linux2', '/usr/lib/python2.6/lib-tk', '/home/jesse/.local/lib/python2.6/site-packages', '/home/jesse/Desktop/test_env/lib/python2.6/site-packages', '/usr/local/lib/python2.6/dist-packages', '/usr/lib/python2.6/dist-packages', '/usr/lib/python2.6/dist-packages/Numeric', '/usr/lib/python2.6/dist-packages/PIL', '/usr/lib/python2.6/dist-packages/gst-0.10', '/var/lib/python-support/python2.6', '/usr/lib/python2.6/dist-packages/gtk-2.0', '/var/lib/python-support/python2.6/gtk-2.0', '/usr/lib/python2.6/dist-packages/wx-2.8-gtk2-unicode']</p>

<p><strong>Edit 3:</strong>  I found this:  <a href=""https://bugs.launchpad.net/ubuntu/+source/python-virtualenv/+bug/339904"" rel=""nofollow noreferrer"">https://bugs.launchpad.net/ubuntu/+source/python-virtualenv/+bug/339904</a>  Apparently there are some issues with virtualenv + python 2.6 + ubuntu 9.04.  Not sure if that's related to my issue...  I tried uninstalling the python-virtualenv package via Synaptic and then installing version 1.3.4 of virtualenv via easy_install, but still have the same problem...</p>

<pre><code>jesse@jesse-laptop:~/Desktop/test_env$ source bin/activate
(test_env)jesse@jesse-laptop:~/Desktop/test_env$ bin/python
Python 2.6.2 (release26-maint, Apr 19 2009, 01:56:41) 
[GCC 4.3.3] on linux2
Type ""help"", ""copyright"", ""credits"" or ""license"" for more information.
&gt;&gt;&gt; import foo_package
importing from normal env
&gt;&gt;&gt; import sys
&gt;&gt;&gt; print sys.path
['', '/home/jesse/Desktop/test_env/lib/python2.6/site-packages/setuptools-0.6c9-py2.6.egg', '/home/jesse/Desktop/test_env/lib/python2.6', '/home/jesse/Desktop/test_env/lib/python2.6/plat-linux2', '/home/jesse/Desktop/test_env/lib/python2.6/lib-tk', '/home/jesse/Desktop/test_env/lib/python2.6/lib-old', '/home/jesse/Desktop/test_env/lib/python2.6/lib-dynload', '/usr/lib/python2.6', '/usr/lib/python2.6/plat-linux2', '/usr/lib/python2.6/lib-tk', '/home/jesse/.local/lib/python2.6/site-packages', '/home/jesse/Desktop/test_env/lib/python2.6/site-packages', '/usr/local/lib/python2.6/dist-packages/enum-0.4.3-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/clonedigger-1.0.9_beta-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/ETS-3.2.0-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/TraitsGUI-3.0.4-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/TraitsBackendWX-3.1.0-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/TraitsBackendQt-3.1.0-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/yolk-0.4.1-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/pylint-0.18.0-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/logilab_astng-0.19.0-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/logilab_common-0.39.0-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/pudb-0.92.7-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/Pygments-1.0-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/ETSProjectTools-0.5.1-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/pydee-0.4.24-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/visionegg-1.2.1-py2.6-linux-i686.egg', '/usr/local/lib/python2.6/dist-packages/PyOpenGL-3.0.0c1-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/Whoosh-0.2.6-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/pyinotify-0.8.6-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/svgbatch-0.1.9-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/pyglet-1.1.3-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/lepton-1.0b2-py2.6-linux-i686.egg', '/usr/local/lib/python2.6/dist-packages/rope-0.9.2-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/simplejson-2.0.9-py2.6-linux-i686.egg', '/usr/local/lib/python2.6/dist-packages/pymunk-0.8.4-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/cssutils-0.9.6-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/Shapely-1.0.14-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/sympy-0.6.5-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/virtualenvwrapper-1.20-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/virtualenv-1.3.4-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/enum-0.4.3-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/ETS-3.2.0-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/yolk-0.4.1-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/Whoosh-0.2.6-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/pyinotify-0.8.6-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/pyglet-1.1.3-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/simplejson-2.0.9-py2.6-linux-i686.egg', '/usr/local/lib/python2.6/site-packages', '/usr/local/lib/python2.6/site-packages/gtk-2.0', '/usr/local/lib/python2.6/dist-packages', '/usr/lib/python2.6/dist-packages', '/usr/lib/python2.6/dist-packages/Numeric', '/usr/lib/python2.6/dist-packages/PIL', '/usr/lib/python2.6/dist-packages/gst-0.10', '/var/lib/python-support/python2.6', '/usr/lib/python2.6/dist-packages/gtk-2.0', '/var/lib/python-support/python2.6/gtk-2.0', '/usr/lib/python2.6/dist-packages/wx-2.8-gtk2-unicode']
</code></pre>

<p>This looks like a step forward, because <code>test_env</code> stuff is appearing in the path, but it's still not working.  I think my current problem is that '/home/jesse/.local/lib/python2.6/site-packages' occurs in the path before '/home/jesse/Desktop/test_env/lib/python2.6/site-packages'</p>

<p><strong>Edit 4:</strong>  Roger suggested creating the env with the --no-site-packages option.  I tried that.  Same problem.</p>

<pre><code>jesse@jesse-laptop:~/Desktop/test_env$ source bin/activate
(test_env)jesse@jesse-laptop:~/Desktop/test_env$ bin/python
Python 2.6.2 (release26-maint, Apr 19 2009, 01:56:41) 
[GCC 4.3.3] on linux2
Type ""help"", ""copyright"", ""credits"" or ""license"" for more information.
&gt;&gt;&gt; import foo_package
importing from normal env
&gt;&gt;&gt; import sys
&gt;&gt;&gt; sys.path
['', '/home/jesse/Desktop/test_env/lib/python2.6/site-packages/setuptools-0.6c9-py2.6.egg', '/home/jesse/Desktop/test_env/lib/python2.6', '/home/jesse/Desktop/test_env/lib/python2.6/plat-linux2', '/home/jesse/Desktop/test_env/lib/python2.6/lib-tk', '/home/jesse/Desktop/test_env/lib/python2.6/lib-old', '/home/jesse/Desktop/test_env/lib/python2.6/lib-dynload', '/usr/lib/python2.6', '/usr/lib/python2.6/plat-linux2', '/usr/lib/python2.6/lib-tk', '/home/jesse/.local/lib/python2.6/site-packages', '/home/jesse/Desktop/test_env/lib/python2.6/site-packages']
&gt;&gt;&gt; 
</code></pre>

<p>Again, it looks like the problem is the site-packages in my "".local"" appears earlier in the path than the site-packages in ""test_env"".</p>",python|virtualenv,"<p>You're running into a bug in virtualenv. It has not yet been updated to handle .local directories properly. I've filed <a href=""http://bitbucket.org/ianb/virtualenv/issue/8/user-local-directory-not-isolated-from"" rel=""nofollow noreferrer"">an issue for this at the bug tracker</a>.</p>

<p><strong>UPDATE</strong>: this bug <a href=""http://bitbucket.org/ianb/virtualenv/changeset/fad3888d523d/"" rel=""nofollow noreferrer"">is now fixed</a> in virtualenv 1.4.2 and later.</p>",6
1624245,virtualenv confusion,"<p>So I open a terminal, cd to my desktop, and run:</p>

<p><code>virtualenv test_env</code></p>

<p>I then create the following file in my normal environment:</p>

<p><code>/home/jesse/.local/lib/python2.6/site-packages/foo_package/__init__.py</code></p>

<p>This file contains one line:</p>

<p><code>print ""importing from normal env""</code></p>

<p>In the test_env I create:</p>

<p><code>/home/jesse/Desktop/test_env/lib/python2.6/site-packages/foo_package/__init__.py</code></p>

<p>Containing:</p>

<p><code>print ""importing from test env""</code></p>

<p>Now I open a terminal and run:</p>

<p><code>$ /home/jesse/Desktop/test_env/bin/python</code></p>

<p>And then do:</p>

<p><code>&gt;&gt;&gt; import foo_package</code></p>

<p>Which outputs:</p>

<p><code>importing from normal env</code></p>

<p>Why doesn't it import the file from test_env?  I thought that was the whole point of virtualenv.  Am I missing something here?</p>

<p><strong>Edit:</strong>  Jon H informed me that I need to activate the environment.  But this doesn't seem to fix the problem...</p>

<pre><code>jesse@jesse-laptop:~/Desktop/test_env$ source bin/activate
(test_env)jesse@jesse-laptop:~/Desktop/test_env$ bin/python
Python 2.6.2 (release26-maint, Apr 19 2009, 01:56:41) 
[GCC 4.3.3] on linux2
Type ""help"", ""copyright"", ""credits"" or ""license"" for more information.
&gt;&gt;&gt; import foo_package
importing from normal env
&gt;&gt;&gt; 
</code></pre>

<p>Using  Ubuntu 9.04 / Python 2.6.2 / virtualenv 1.33  in case that's relevant.</p>

<p><strong>Edit 2:</strong>   Haes asked me what sys.path was in my virtualenv...</p>

<pre><code>jesse@jesse-laptop:~/Desktop/test_env$ source bin/activate
(test_env)jesse@jesse-laptop:~/Desktop/test_env$ bin/python
Python 2.6.2 (release26-maint, Apr 19 2009, 01:56:41) 
[GCC 4.3.3] on linux2
Type ""help"", ""copyright"", ""credits"" or ""license"" for more information.
&gt;&gt;&gt; import sys
&gt;&gt;&gt; sys.path
</code></pre>

<p>Output:
['', '/home/jesse/Desktop/test_env/lib/python2.6/site-packages/setuptools-0.6c9-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/enum-0.4.3-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/clonedigger-1.0.9_beta-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/ETS-3.2.0-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/TraitsGUI-3.0.4-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/TraitsBackendWX-3.1.0-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/TraitsBackendQt-3.1.0-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/yolk-0.4.1-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/pylint-0.18.0-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/logilab_astng-0.19.0-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/logilab_common-0.39.0-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/pudb-0.92.7-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/Pygments-1.0-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/ETSProjectTools-0.5.1-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/pydee-0.4.24-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/visionegg-1.2.1-py2.6-linux-i686.egg', '/usr/local/lib/python2.6/dist-packages/PyOpenGL-3.0.0c1-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/Whoosh-0.2.6-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/pyinotify-0.8.6-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/svgbatch-0.1.9-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/pyglet-1.1.3-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/lepton-1.0b2-py2.6-linux-i686.egg', '/usr/local/lib/python2.6/dist-packages/rope-0.9.2-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/simplejson-2.0.9-py2.6-linux-i686.egg', '/usr/local/lib/python2.6/dist-packages/pymunk-0.8.4-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/cssutils-0.9.6-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/Shapely-1.0.14-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/sympy-0.6.5-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/virtualenvwrapper-1.20-py2.6.egg', '/home/jesse/Desktop/test_env/lib/python2.6', '/home/jesse/Desktop/test_env/lib/python2.6/plat-linux2', '/home/jesse/Desktop/test_env/lib/python2.6/lib-tk', '/home/jesse/Desktop/test_env/lib/python2.6/lib-old', '/home/jesse/Desktop/test_env/lib/python2.6/lib-dynload', '/usr/lib/python2.6', '/usr/lib/python2.6/plat-linux2', '/usr/lib/python2.6/lib-tk', '/home/jesse/.local/lib/python2.6/site-packages', '/home/jesse/Desktop/test_env/lib/python2.6/site-packages', '/usr/local/lib/python2.6/dist-packages', '/usr/lib/python2.6/dist-packages', '/usr/lib/python2.6/dist-packages/Numeric', '/usr/lib/python2.6/dist-packages/PIL', '/usr/lib/python2.6/dist-packages/gst-0.10', '/var/lib/python-support/python2.6', '/usr/lib/python2.6/dist-packages/gtk-2.0', '/var/lib/python-support/python2.6/gtk-2.0', '/usr/lib/python2.6/dist-packages/wx-2.8-gtk2-unicode']</p>

<p><strong>Edit 3:</strong>  I found this:  <a href=""https://bugs.launchpad.net/ubuntu/+source/python-virtualenv/+bug/339904"" rel=""nofollow noreferrer"">https://bugs.launchpad.net/ubuntu/+source/python-virtualenv/+bug/339904</a>  Apparently there are some issues with virtualenv + python 2.6 + ubuntu 9.04.  Not sure if that's related to my issue...  I tried uninstalling the python-virtualenv package via Synaptic and then installing version 1.3.4 of virtualenv via easy_install, but still have the same problem...</p>

<pre><code>jesse@jesse-laptop:~/Desktop/test_env$ source bin/activate
(test_env)jesse@jesse-laptop:~/Desktop/test_env$ bin/python
Python 2.6.2 (release26-maint, Apr 19 2009, 01:56:41) 
[GCC 4.3.3] on linux2
Type ""help"", ""copyright"", ""credits"" or ""license"" for more information.
&gt;&gt;&gt; import foo_package
importing from normal env
&gt;&gt;&gt; import sys
&gt;&gt;&gt; print sys.path
['', '/home/jesse/Desktop/test_env/lib/python2.6/site-packages/setuptools-0.6c9-py2.6.egg', '/home/jesse/Desktop/test_env/lib/python2.6', '/home/jesse/Desktop/test_env/lib/python2.6/plat-linux2', '/home/jesse/Desktop/test_env/lib/python2.6/lib-tk', '/home/jesse/Desktop/test_env/lib/python2.6/lib-old', '/home/jesse/Desktop/test_env/lib/python2.6/lib-dynload', '/usr/lib/python2.6', '/usr/lib/python2.6/plat-linux2', '/usr/lib/python2.6/lib-tk', '/home/jesse/.local/lib/python2.6/site-packages', '/home/jesse/Desktop/test_env/lib/python2.6/site-packages', '/usr/local/lib/python2.6/dist-packages/enum-0.4.3-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/clonedigger-1.0.9_beta-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/ETS-3.2.0-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/TraitsGUI-3.0.4-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/TraitsBackendWX-3.1.0-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/TraitsBackendQt-3.1.0-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/yolk-0.4.1-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/pylint-0.18.0-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/logilab_astng-0.19.0-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/logilab_common-0.39.0-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/pudb-0.92.7-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/Pygments-1.0-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/ETSProjectTools-0.5.1-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/pydee-0.4.24-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/visionegg-1.2.1-py2.6-linux-i686.egg', '/usr/local/lib/python2.6/dist-packages/PyOpenGL-3.0.0c1-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/Whoosh-0.2.6-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/pyinotify-0.8.6-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/svgbatch-0.1.9-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/pyglet-1.1.3-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/lepton-1.0b2-py2.6-linux-i686.egg', '/usr/local/lib/python2.6/dist-packages/rope-0.9.2-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/simplejson-2.0.9-py2.6-linux-i686.egg', '/usr/local/lib/python2.6/dist-packages/pymunk-0.8.4-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/cssutils-0.9.6-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/Shapely-1.0.14-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/sympy-0.6.5-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/virtualenvwrapper-1.20-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/virtualenv-1.3.4-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/enum-0.4.3-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/ETS-3.2.0-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/yolk-0.4.1-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/Whoosh-0.2.6-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/pyinotify-0.8.6-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/pyglet-1.1.3-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/simplejson-2.0.9-py2.6-linux-i686.egg', '/usr/local/lib/python2.6/site-packages', '/usr/local/lib/python2.6/site-packages/gtk-2.0', '/usr/local/lib/python2.6/dist-packages', '/usr/lib/python2.6/dist-packages', '/usr/lib/python2.6/dist-packages/Numeric', '/usr/lib/python2.6/dist-packages/PIL', '/usr/lib/python2.6/dist-packages/gst-0.10', '/var/lib/python-support/python2.6', '/usr/lib/python2.6/dist-packages/gtk-2.0', '/var/lib/python-support/python2.6/gtk-2.0', '/usr/lib/python2.6/dist-packages/wx-2.8-gtk2-unicode']
</code></pre>

<p>This looks like a step forward, because <code>test_env</code> stuff is appearing in the path, but it's still not working.  I think my current problem is that '/home/jesse/.local/lib/python2.6/site-packages' occurs in the path before '/home/jesse/Desktop/test_env/lib/python2.6/site-packages'</p>

<p><strong>Edit 4:</strong>  Roger suggested creating the env with the --no-site-packages option.  I tried that.  Same problem.</p>

<pre><code>jesse@jesse-laptop:~/Desktop/test_env$ source bin/activate
(test_env)jesse@jesse-laptop:~/Desktop/test_env$ bin/python
Python 2.6.2 (release26-maint, Apr 19 2009, 01:56:41) 
[GCC 4.3.3] on linux2
Type ""help"", ""copyright"", ""credits"" or ""license"" for more information.
&gt;&gt;&gt; import foo_package
importing from normal env
&gt;&gt;&gt; import sys
&gt;&gt;&gt; sys.path
['', '/home/jesse/Desktop/test_env/lib/python2.6/site-packages/setuptools-0.6c9-py2.6.egg', '/home/jesse/Desktop/test_env/lib/python2.6', '/home/jesse/Desktop/test_env/lib/python2.6/plat-linux2', '/home/jesse/Desktop/test_env/lib/python2.6/lib-tk', '/home/jesse/Desktop/test_env/lib/python2.6/lib-old', '/home/jesse/Desktop/test_env/lib/python2.6/lib-dynload', '/usr/lib/python2.6', '/usr/lib/python2.6/plat-linux2', '/usr/lib/python2.6/lib-tk', '/home/jesse/.local/lib/python2.6/site-packages', '/home/jesse/Desktop/test_env/lib/python2.6/site-packages']
&gt;&gt;&gt; 
</code></pre>

<p>Again, it looks like the problem is the site-packages in my "".local"" appears earlier in the path than the site-packages in ""test_env"".</p>",python|virtualenv,"<p>Edit: Post above me is correct, you forgot to activate. Using virtualenvwrapper I've never really done that step so my bad :)</p>

<p>Looking at that, it looks like you're doing everything right but I would like to make a suggestion incase you've never heard of it: <a href=""http://www.doughellmann.com/projects/virtualenvwrapper/"" rel=""nofollow noreferrer"">virtualenvwrapper</a> makes working with virtualenv so much quicker and easier. Might be fun to try it out and see if you still get the same issue, maybe you'll find what you were missing.</p>",0
1624245,virtualenv confusion,"<p>So I open a terminal, cd to my desktop, and run:</p>

<p><code>virtualenv test_env</code></p>

<p>I then create the following file in my normal environment:</p>

<p><code>/home/jesse/.local/lib/python2.6/site-packages/foo_package/__init__.py</code></p>

<p>This file contains one line:</p>

<p><code>print ""importing from normal env""</code></p>

<p>In the test_env I create:</p>

<p><code>/home/jesse/Desktop/test_env/lib/python2.6/site-packages/foo_package/__init__.py</code></p>

<p>Containing:</p>

<p><code>print ""importing from test env""</code></p>

<p>Now I open a terminal and run:</p>

<p><code>$ /home/jesse/Desktop/test_env/bin/python</code></p>

<p>And then do:</p>

<p><code>&gt;&gt;&gt; import foo_package</code></p>

<p>Which outputs:</p>

<p><code>importing from normal env</code></p>

<p>Why doesn't it import the file from test_env?  I thought that was the whole point of virtualenv.  Am I missing something here?</p>

<p><strong>Edit:</strong>  Jon H informed me that I need to activate the environment.  But this doesn't seem to fix the problem...</p>

<pre><code>jesse@jesse-laptop:~/Desktop/test_env$ source bin/activate
(test_env)jesse@jesse-laptop:~/Desktop/test_env$ bin/python
Python 2.6.2 (release26-maint, Apr 19 2009, 01:56:41) 
[GCC 4.3.3] on linux2
Type ""help"", ""copyright"", ""credits"" or ""license"" for more information.
&gt;&gt;&gt; import foo_package
importing from normal env
&gt;&gt;&gt; 
</code></pre>

<p>Using  Ubuntu 9.04 / Python 2.6.2 / virtualenv 1.33  in case that's relevant.</p>

<p><strong>Edit 2:</strong>   Haes asked me what sys.path was in my virtualenv...</p>

<pre><code>jesse@jesse-laptop:~/Desktop/test_env$ source bin/activate
(test_env)jesse@jesse-laptop:~/Desktop/test_env$ bin/python
Python 2.6.2 (release26-maint, Apr 19 2009, 01:56:41) 
[GCC 4.3.3] on linux2
Type ""help"", ""copyright"", ""credits"" or ""license"" for more information.
&gt;&gt;&gt; import sys
&gt;&gt;&gt; sys.path
</code></pre>

<p>Output:
['', '/home/jesse/Desktop/test_env/lib/python2.6/site-packages/setuptools-0.6c9-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/enum-0.4.3-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/clonedigger-1.0.9_beta-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/ETS-3.2.0-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/TraitsGUI-3.0.4-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/TraitsBackendWX-3.1.0-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/TraitsBackendQt-3.1.0-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/yolk-0.4.1-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/pylint-0.18.0-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/logilab_astng-0.19.0-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/logilab_common-0.39.0-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/pudb-0.92.7-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/Pygments-1.0-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/ETSProjectTools-0.5.1-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/pydee-0.4.24-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/visionegg-1.2.1-py2.6-linux-i686.egg', '/usr/local/lib/python2.6/dist-packages/PyOpenGL-3.0.0c1-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/Whoosh-0.2.6-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/pyinotify-0.8.6-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/svgbatch-0.1.9-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/pyglet-1.1.3-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/lepton-1.0b2-py2.6-linux-i686.egg', '/usr/local/lib/python2.6/dist-packages/rope-0.9.2-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/simplejson-2.0.9-py2.6-linux-i686.egg', '/usr/local/lib/python2.6/dist-packages/pymunk-0.8.4-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/cssutils-0.9.6-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/Shapely-1.0.14-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/sympy-0.6.5-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/virtualenvwrapper-1.20-py2.6.egg', '/home/jesse/Desktop/test_env/lib/python2.6', '/home/jesse/Desktop/test_env/lib/python2.6/plat-linux2', '/home/jesse/Desktop/test_env/lib/python2.6/lib-tk', '/home/jesse/Desktop/test_env/lib/python2.6/lib-old', '/home/jesse/Desktop/test_env/lib/python2.6/lib-dynload', '/usr/lib/python2.6', '/usr/lib/python2.6/plat-linux2', '/usr/lib/python2.6/lib-tk', '/home/jesse/.local/lib/python2.6/site-packages', '/home/jesse/Desktop/test_env/lib/python2.6/site-packages', '/usr/local/lib/python2.6/dist-packages', '/usr/lib/python2.6/dist-packages', '/usr/lib/python2.6/dist-packages/Numeric', '/usr/lib/python2.6/dist-packages/PIL', '/usr/lib/python2.6/dist-packages/gst-0.10', '/var/lib/python-support/python2.6', '/usr/lib/python2.6/dist-packages/gtk-2.0', '/var/lib/python-support/python2.6/gtk-2.0', '/usr/lib/python2.6/dist-packages/wx-2.8-gtk2-unicode']</p>

<p><strong>Edit 3:</strong>  I found this:  <a href=""https://bugs.launchpad.net/ubuntu/+source/python-virtualenv/+bug/339904"" rel=""nofollow noreferrer"">https://bugs.launchpad.net/ubuntu/+source/python-virtualenv/+bug/339904</a>  Apparently there are some issues with virtualenv + python 2.6 + ubuntu 9.04.  Not sure if that's related to my issue...  I tried uninstalling the python-virtualenv package via Synaptic and then installing version 1.3.4 of virtualenv via easy_install, but still have the same problem...</p>

<pre><code>jesse@jesse-laptop:~/Desktop/test_env$ source bin/activate
(test_env)jesse@jesse-laptop:~/Desktop/test_env$ bin/python
Python 2.6.2 (release26-maint, Apr 19 2009, 01:56:41) 
[GCC 4.3.3] on linux2
Type ""help"", ""copyright"", ""credits"" or ""license"" for more information.
&gt;&gt;&gt; import foo_package
importing from normal env
&gt;&gt;&gt; import sys
&gt;&gt;&gt; print sys.path
['', '/home/jesse/Desktop/test_env/lib/python2.6/site-packages/setuptools-0.6c9-py2.6.egg', '/home/jesse/Desktop/test_env/lib/python2.6', '/home/jesse/Desktop/test_env/lib/python2.6/plat-linux2', '/home/jesse/Desktop/test_env/lib/python2.6/lib-tk', '/home/jesse/Desktop/test_env/lib/python2.6/lib-old', '/home/jesse/Desktop/test_env/lib/python2.6/lib-dynload', '/usr/lib/python2.6', '/usr/lib/python2.6/plat-linux2', '/usr/lib/python2.6/lib-tk', '/home/jesse/.local/lib/python2.6/site-packages', '/home/jesse/Desktop/test_env/lib/python2.6/site-packages', '/usr/local/lib/python2.6/dist-packages/enum-0.4.3-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/clonedigger-1.0.9_beta-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/ETS-3.2.0-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/TraitsGUI-3.0.4-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/TraitsBackendWX-3.1.0-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/TraitsBackendQt-3.1.0-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/yolk-0.4.1-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/pylint-0.18.0-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/logilab_astng-0.19.0-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/logilab_common-0.39.0-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/pudb-0.92.7-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/Pygments-1.0-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/ETSProjectTools-0.5.1-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/pydee-0.4.24-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/visionegg-1.2.1-py2.6-linux-i686.egg', '/usr/local/lib/python2.6/dist-packages/PyOpenGL-3.0.0c1-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/Whoosh-0.2.6-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/pyinotify-0.8.6-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/svgbatch-0.1.9-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/pyglet-1.1.3-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/lepton-1.0b2-py2.6-linux-i686.egg', '/usr/local/lib/python2.6/dist-packages/rope-0.9.2-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/simplejson-2.0.9-py2.6-linux-i686.egg', '/usr/local/lib/python2.6/dist-packages/pymunk-0.8.4-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/cssutils-0.9.6-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/Shapely-1.0.14-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/sympy-0.6.5-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/virtualenvwrapper-1.20-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/virtualenv-1.3.4-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/enum-0.4.3-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/ETS-3.2.0-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/yolk-0.4.1-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/Whoosh-0.2.6-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/pyinotify-0.8.6-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/pyglet-1.1.3-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/simplejson-2.0.9-py2.6-linux-i686.egg', '/usr/local/lib/python2.6/site-packages', '/usr/local/lib/python2.6/site-packages/gtk-2.0', '/usr/local/lib/python2.6/dist-packages', '/usr/lib/python2.6/dist-packages', '/usr/lib/python2.6/dist-packages/Numeric', '/usr/lib/python2.6/dist-packages/PIL', '/usr/lib/python2.6/dist-packages/gst-0.10', '/var/lib/python-support/python2.6', '/usr/lib/python2.6/dist-packages/gtk-2.0', '/var/lib/python-support/python2.6/gtk-2.0', '/usr/lib/python2.6/dist-packages/wx-2.8-gtk2-unicode']
</code></pre>

<p>This looks like a step forward, because <code>test_env</code> stuff is appearing in the path, but it's still not working.  I think my current problem is that '/home/jesse/.local/lib/python2.6/site-packages' occurs in the path before '/home/jesse/Desktop/test_env/lib/python2.6/site-packages'</p>

<p><strong>Edit 4:</strong>  Roger suggested creating the env with the --no-site-packages option.  I tried that.  Same problem.</p>

<pre><code>jesse@jesse-laptop:~/Desktop/test_env$ source bin/activate
(test_env)jesse@jesse-laptop:~/Desktop/test_env$ bin/python
Python 2.6.2 (release26-maint, Apr 19 2009, 01:56:41) 
[GCC 4.3.3] on linux2
Type ""help"", ""copyright"", ""credits"" or ""license"" for more information.
&gt;&gt;&gt; import foo_package
importing from normal env
&gt;&gt;&gt; import sys
&gt;&gt;&gt; sys.path
['', '/home/jesse/Desktop/test_env/lib/python2.6/site-packages/setuptools-0.6c9-py2.6.egg', '/home/jesse/Desktop/test_env/lib/python2.6', '/home/jesse/Desktop/test_env/lib/python2.6/plat-linux2', '/home/jesse/Desktop/test_env/lib/python2.6/lib-tk', '/home/jesse/Desktop/test_env/lib/python2.6/lib-old', '/home/jesse/Desktop/test_env/lib/python2.6/lib-dynload', '/usr/lib/python2.6', '/usr/lib/python2.6/plat-linux2', '/usr/lib/python2.6/lib-tk', '/home/jesse/.local/lib/python2.6/site-packages', '/home/jesse/Desktop/test_env/lib/python2.6/site-packages']
&gt;&gt;&gt; 
</code></pre>

<p>Again, it looks like the problem is the site-packages in my "".local"" appears earlier in the path than the site-packages in ""test_env"".</p>",python|virtualenv,"<p>From the steps you mentioned, it seems you haven't activated the virtual env. Do:</p>

<pre><code>source bin/activate
</code></pre>

<p>.. within the virtualenv you created. You should see something like:</p>

<pre><code>(test_env)computername:foldername$
</code></pre>

<p>Running python from here should get your virtualenv version.</p>

<p>Without this step it will still use your default Python installation.</p>",2
1624245,virtualenv confusion,"<p>So I open a terminal, cd to my desktop, and run:</p>

<p><code>virtualenv test_env</code></p>

<p>I then create the following file in my normal environment:</p>

<p><code>/home/jesse/.local/lib/python2.6/site-packages/foo_package/__init__.py</code></p>

<p>This file contains one line:</p>

<p><code>print ""importing from normal env""</code></p>

<p>In the test_env I create:</p>

<p><code>/home/jesse/Desktop/test_env/lib/python2.6/site-packages/foo_package/__init__.py</code></p>

<p>Containing:</p>

<p><code>print ""importing from test env""</code></p>

<p>Now I open a terminal and run:</p>

<p><code>$ /home/jesse/Desktop/test_env/bin/python</code></p>

<p>And then do:</p>

<p><code>&gt;&gt;&gt; import foo_package</code></p>

<p>Which outputs:</p>

<p><code>importing from normal env</code></p>

<p>Why doesn't it import the file from test_env?  I thought that was the whole point of virtualenv.  Am I missing something here?</p>

<p><strong>Edit:</strong>  Jon H informed me that I need to activate the environment.  But this doesn't seem to fix the problem...</p>

<pre><code>jesse@jesse-laptop:~/Desktop/test_env$ source bin/activate
(test_env)jesse@jesse-laptop:~/Desktop/test_env$ bin/python
Python 2.6.2 (release26-maint, Apr 19 2009, 01:56:41) 
[GCC 4.3.3] on linux2
Type ""help"", ""copyright"", ""credits"" or ""license"" for more information.
&gt;&gt;&gt; import foo_package
importing from normal env
&gt;&gt;&gt; 
</code></pre>

<p>Using  Ubuntu 9.04 / Python 2.6.2 / virtualenv 1.33  in case that's relevant.</p>

<p><strong>Edit 2:</strong>   Haes asked me what sys.path was in my virtualenv...</p>

<pre><code>jesse@jesse-laptop:~/Desktop/test_env$ source bin/activate
(test_env)jesse@jesse-laptop:~/Desktop/test_env$ bin/python
Python 2.6.2 (release26-maint, Apr 19 2009, 01:56:41) 
[GCC 4.3.3] on linux2
Type ""help"", ""copyright"", ""credits"" or ""license"" for more information.
&gt;&gt;&gt; import sys
&gt;&gt;&gt; sys.path
</code></pre>

<p>Output:
['', '/home/jesse/Desktop/test_env/lib/python2.6/site-packages/setuptools-0.6c9-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/enum-0.4.3-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/clonedigger-1.0.9_beta-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/ETS-3.2.0-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/TraitsGUI-3.0.4-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/TraitsBackendWX-3.1.0-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/TraitsBackendQt-3.1.0-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/yolk-0.4.1-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/pylint-0.18.0-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/logilab_astng-0.19.0-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/logilab_common-0.39.0-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/pudb-0.92.7-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/Pygments-1.0-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/ETSProjectTools-0.5.1-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/pydee-0.4.24-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/visionegg-1.2.1-py2.6-linux-i686.egg', '/usr/local/lib/python2.6/dist-packages/PyOpenGL-3.0.0c1-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/Whoosh-0.2.6-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/pyinotify-0.8.6-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/svgbatch-0.1.9-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/pyglet-1.1.3-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/lepton-1.0b2-py2.6-linux-i686.egg', '/usr/local/lib/python2.6/dist-packages/rope-0.9.2-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/simplejson-2.0.9-py2.6-linux-i686.egg', '/usr/local/lib/python2.6/dist-packages/pymunk-0.8.4-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/cssutils-0.9.6-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/Shapely-1.0.14-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/sympy-0.6.5-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/virtualenvwrapper-1.20-py2.6.egg', '/home/jesse/Desktop/test_env/lib/python2.6', '/home/jesse/Desktop/test_env/lib/python2.6/plat-linux2', '/home/jesse/Desktop/test_env/lib/python2.6/lib-tk', '/home/jesse/Desktop/test_env/lib/python2.6/lib-old', '/home/jesse/Desktop/test_env/lib/python2.6/lib-dynload', '/usr/lib/python2.6', '/usr/lib/python2.6/plat-linux2', '/usr/lib/python2.6/lib-tk', '/home/jesse/.local/lib/python2.6/site-packages', '/home/jesse/Desktop/test_env/lib/python2.6/site-packages', '/usr/local/lib/python2.6/dist-packages', '/usr/lib/python2.6/dist-packages', '/usr/lib/python2.6/dist-packages/Numeric', '/usr/lib/python2.6/dist-packages/PIL', '/usr/lib/python2.6/dist-packages/gst-0.10', '/var/lib/python-support/python2.6', '/usr/lib/python2.6/dist-packages/gtk-2.0', '/var/lib/python-support/python2.6/gtk-2.0', '/usr/lib/python2.6/dist-packages/wx-2.8-gtk2-unicode']</p>

<p><strong>Edit 3:</strong>  I found this:  <a href=""https://bugs.launchpad.net/ubuntu/+source/python-virtualenv/+bug/339904"" rel=""nofollow noreferrer"">https://bugs.launchpad.net/ubuntu/+source/python-virtualenv/+bug/339904</a>  Apparently there are some issues with virtualenv + python 2.6 + ubuntu 9.04.  Not sure if that's related to my issue...  I tried uninstalling the python-virtualenv package via Synaptic and then installing version 1.3.4 of virtualenv via easy_install, but still have the same problem...</p>

<pre><code>jesse@jesse-laptop:~/Desktop/test_env$ source bin/activate
(test_env)jesse@jesse-laptop:~/Desktop/test_env$ bin/python
Python 2.6.2 (release26-maint, Apr 19 2009, 01:56:41) 
[GCC 4.3.3] on linux2
Type ""help"", ""copyright"", ""credits"" or ""license"" for more information.
&gt;&gt;&gt; import foo_package
importing from normal env
&gt;&gt;&gt; import sys
&gt;&gt;&gt; print sys.path
['', '/home/jesse/Desktop/test_env/lib/python2.6/site-packages/setuptools-0.6c9-py2.6.egg', '/home/jesse/Desktop/test_env/lib/python2.6', '/home/jesse/Desktop/test_env/lib/python2.6/plat-linux2', '/home/jesse/Desktop/test_env/lib/python2.6/lib-tk', '/home/jesse/Desktop/test_env/lib/python2.6/lib-old', '/home/jesse/Desktop/test_env/lib/python2.6/lib-dynload', '/usr/lib/python2.6', '/usr/lib/python2.6/plat-linux2', '/usr/lib/python2.6/lib-tk', '/home/jesse/.local/lib/python2.6/site-packages', '/home/jesse/Desktop/test_env/lib/python2.6/site-packages', '/usr/local/lib/python2.6/dist-packages/enum-0.4.3-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/clonedigger-1.0.9_beta-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/ETS-3.2.0-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/TraitsGUI-3.0.4-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/TraitsBackendWX-3.1.0-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/TraitsBackendQt-3.1.0-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/yolk-0.4.1-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/pylint-0.18.0-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/logilab_astng-0.19.0-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/logilab_common-0.39.0-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/pudb-0.92.7-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/Pygments-1.0-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/ETSProjectTools-0.5.1-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/pydee-0.4.24-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/visionegg-1.2.1-py2.6-linux-i686.egg', '/usr/local/lib/python2.6/dist-packages/PyOpenGL-3.0.0c1-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/Whoosh-0.2.6-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/pyinotify-0.8.6-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/svgbatch-0.1.9-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/pyglet-1.1.3-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/lepton-1.0b2-py2.6-linux-i686.egg', '/usr/local/lib/python2.6/dist-packages/rope-0.9.2-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/simplejson-2.0.9-py2.6-linux-i686.egg', '/usr/local/lib/python2.6/dist-packages/pymunk-0.8.4-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/cssutils-0.9.6-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/Shapely-1.0.14-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/sympy-0.6.5-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/virtualenvwrapper-1.20-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/virtualenv-1.3.4-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/enum-0.4.3-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/ETS-3.2.0-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/yolk-0.4.1-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/Whoosh-0.2.6-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/pyinotify-0.8.6-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/pyglet-1.1.3-py2.6.egg', '/usr/local/lib/python2.6/dist-packages/simplejson-2.0.9-py2.6-linux-i686.egg', '/usr/local/lib/python2.6/site-packages', '/usr/local/lib/python2.6/site-packages/gtk-2.0', '/usr/local/lib/python2.6/dist-packages', '/usr/lib/python2.6/dist-packages', '/usr/lib/python2.6/dist-packages/Numeric', '/usr/lib/python2.6/dist-packages/PIL', '/usr/lib/python2.6/dist-packages/gst-0.10', '/var/lib/python-support/python2.6', '/usr/lib/python2.6/dist-packages/gtk-2.0', '/var/lib/python-support/python2.6/gtk-2.0', '/usr/lib/python2.6/dist-packages/wx-2.8-gtk2-unicode']
</code></pre>

<p>This looks like a step forward, because <code>test_env</code> stuff is appearing in the path, but it's still not working.  I think my current problem is that '/home/jesse/.local/lib/python2.6/site-packages' occurs in the path before '/home/jesse/Desktop/test_env/lib/python2.6/site-packages'</p>

<p><strong>Edit 4:</strong>  Roger suggested creating the env with the --no-site-packages option.  I tried that.  Same problem.</p>

<pre><code>jesse@jesse-laptop:~/Desktop/test_env$ source bin/activate
(test_env)jesse@jesse-laptop:~/Desktop/test_env$ bin/python
Python 2.6.2 (release26-maint, Apr 19 2009, 01:56:41) 
[GCC 4.3.3] on linux2
Type ""help"", ""copyright"", ""credits"" or ""license"" for more information.
&gt;&gt;&gt; import foo_package
importing from normal env
&gt;&gt;&gt; import sys
&gt;&gt;&gt; sys.path
['', '/home/jesse/Desktop/test_env/lib/python2.6/site-packages/setuptools-0.6c9-py2.6.egg', '/home/jesse/Desktop/test_env/lib/python2.6', '/home/jesse/Desktop/test_env/lib/python2.6/plat-linux2', '/home/jesse/Desktop/test_env/lib/python2.6/lib-tk', '/home/jesse/Desktop/test_env/lib/python2.6/lib-old', '/home/jesse/Desktop/test_env/lib/python2.6/lib-dynload', '/usr/lib/python2.6', '/usr/lib/python2.6/plat-linux2', '/usr/lib/python2.6/lib-tk', '/home/jesse/.local/lib/python2.6/site-packages', '/home/jesse/Desktop/test_env/lib/python2.6/site-packages']
&gt;&gt;&gt; 
</code></pre>

<p>Again, it looks like the problem is the site-packages in my "".local"" appears earlier in the path than the site-packages in ""test_env"".</p>",python|virtualenv,<p>And you need to create the virtual environment with the option --no-site-packages</p>,0
1836987,Automate interaction with a webpage in python,"<p>I want to automate interaction with a webpage. I've been using pycurl up til now but eventually the webpage will use javascript so I'm looking for alternatives . A typical interaction is ""open the page, search for some text, click on a link (which opens a form), fill out the form and submit"".</p>

<p>We're deploying on Google App engine, if that makes a difference. </p>

<p>Clarification: we're deploying the webpage on appengine. But the interaction is run on a separate machine. So selenium seems like it's the best choice. </p>",python|google-app-engine|pycurl,"<p>Twill and mechanize don't do Javascript, and Qt and Selenium can't run on App Engine ((1)), which only supports pure Python code.  I do not know of any pure-Python Javascript interpreter, which is what you'd need to deploy a JS-supporting scraper on App Engine:-(.</p>

<p>Maybe there's something in Java, which would at least allow you to deploy on (the Java version of) App Engine?  App Engine app versions in Java and Python can use the same datastore, so you could keep some part of your app in Python... just not the part that needs to understand Javascript.  Unfortunately I don't know enough about the Java / AE environment to suggest any specific package to try.</p>

<p>((1)): to clarify, since there seems to be a misunderstanding that has gotten so far as to get me downvoted: if you run Selenium or other scrapers on a different computer, you can of course target a site deployed in App Engine (it doesn't matter how the website you're targeting is deployed, what programming language[s] it uses, etc, etc, as long as it's a website you can access [[real website: flash, &amp;c, may likely be different]]).  How I read the question is, the OP is looking for ways to have the <strong>scraping</strong> run as part of an App Engine app -- <strong>that</strong> is the problematic part, <em>not</em> where you (or somebody else;-) runs the site being scraped!</p>",6
1836987,Automate interaction with a webpage in python,"<p>I want to automate interaction with a webpage. I've been using pycurl up til now but eventually the webpage will use javascript so I'm looking for alternatives . A typical interaction is ""open the page, search for some text, click on a link (which opens a form), fill out the form and submit"".</p>

<p>We're deploying on Google App engine, if that makes a difference. </p>

<p>Clarification: we're deploying the webpage on appengine. But the interaction is run on a separate machine. So selenium seems like it's the best choice. </p>",python|google-app-engine|pycurl,"<p>What about Selenium? (<a href=""http://seleniumhq.org"" rel=""nofollow noreferrer"">http://seleniumhq.org</a>)</p>",4
1836987,Automate interaction with a webpage in python,"<p>I want to automate interaction with a webpage. I've been using pycurl up til now but eventually the webpage will use javascript so I'm looking for alternatives . A typical interaction is ""open the page, search for some text, click on a link (which opens a form), fill out the form and submit"".</p>

<p>We're deploying on Google App engine, if that makes a difference. </p>

<p>Clarification: we're deploying the webpage on appengine. But the interaction is run on a separate machine. So selenium seems like it's the best choice. </p>",python|google-app-engine|pycurl,"<p><a href=""http://twill.idyll.org/"" rel=""nofollow noreferrer"">twill</a> is very lightweight but works well.</p>",0
1836987,Automate interaction with a webpage in python,"<p>I want to automate interaction with a webpage. I've been using pycurl up til now but eventually the webpage will use javascript so I'm looking for alternatives . A typical interaction is ""open the page, search for some text, click on a link (which opens a form), fill out the form and submit"".</p>

<p>We're deploying on Google App engine, if that makes a difference. </p>

<p>Clarification: we're deploying the webpage on appengine. But the interaction is run on a separate machine. So selenium seems like it's the best choice. </p>",python|google-app-engine|pycurl,"<p>Did you try using QtWebKit with PyQt, you can load a specific url and read the content from Python.  You could then search for urls and use Webkit again to access it.  I think all those can be done with some basic Django(assuming you are using Django on GAE) view testing which will test the response code.  Here's a sample QtWebKit PyQt code to get your started if you want to do it the GUI way:</p>

<pre><code>import sys
import time

from PyQt4.QtCore import *
from PyQt4.QtGui import *
from PyQt4.QtWebKit import *

app = QApplication(sys.argv)

web = QWebView()

settings = web.settings()
settings.setAttribute(QWebSettings.PluginsEnabled, True)
settings.setAttribute(QWebSettings.JavaEnabled, True)
settings.setAttribute(QWebSettings.JavascriptCanOpenWindows, True)
settings.setAttribute(QWebSettings.JavascriptCanAccessClipboard, True)
settings.setAttribute(QWebSettings.DeveloperExtrasEnabled, True)
settings.setAttribute(QWebSettings.ZoomTextOnly, True)



settings.setOfflineStoragePath('.')
settings.setIconDatabasePath (""."")

url = 'http://stackoverflow.com'

web.load(QUrl(url))

web.show()

sys.exit(app.exec_())
</code></pre>",1
1836987,Automate interaction with a webpage in python,"<p>I want to automate interaction with a webpage. I've been using pycurl up til now but eventually the webpage will use javascript so I'm looking for alternatives . A typical interaction is ""open the page, search for some text, click on a link (which opens a form), fill out the form and submit"".</p>

<p>We're deploying on Google App engine, if that makes a difference. </p>

<p>Clarification: we're deploying the webpage on appengine. But the interaction is run on a separate machine. So selenium seems like it's the best choice. </p>",python|google-app-engine|pycurl,"<p>Check out <a href=""http://wwwsearch.sourceforge.net/mechanize/"" rel=""nofollow noreferrer"">mechanize</a>.  It should be able to handle your ""typical interaction"" pretty easily.  Another option might be <a href=""http://seleniumhq.org/"" rel=""nofollow noreferrer"">Selenium</a>, but I've never used it personally.</p>",0
56369488,Delete square brackets in the CSV fie,"<p>I plot the results from python to CSV file. Unfortunately, the data plotted on the CSV file is difficult to edit. In fact each cell of Excel contains a data wrapped by square brackets. How would it be possible to delete the square brackets in the CSV file? </p>

<p>Here below you can find the code. </p>

<pre><code>a=[[1.5458, 1.2585, 3.5687]]
S=([""S""], np.round(a,3), {' [MPa]'})
with open('Output.csv', 'w', newline='') as dest:
    thewriter = csv.writer(dest, delimiter=',')
    thewriter.writerows(a)
</code></pre>

<p>The output the I would like to get in the CSV file is the following one:</p>

<pre><code>1.5458 1.2585 3.5687
</code></pre>

<p>Each number appears in a single cell of Excel.</p>",python|csv,"<p>Excel can be a bit picky when opening flat text files such as CSV.  Sometimes it will automatically place items into separate columns other times it won't.  It seems the last setting used on ""Text to columns"" feature ""sticks"" until you close Excel.</p>

<p>Close all your open Excel windows then reopen the file.</p>

<p>Also just open the file in notepad to check that it looks ok.  Don't allow the complexity of everything Excel does to complicate things.  Sorry this is an answer and not a comment, I am new to this site and don't have enough points to comment yet :-( </p>",1
48969324,Kivy ScreenManager does not switch screens,"<p>i am a newbie to both python and kivy.
I have been trying to develop a simple Pong game with Python. Everything was going well until i tried to put together a Menu.
I used ScreenManager to try to navigate through the two screens. But when i press the button, nothing happens.
Every answer or idea is well appreciated!</p>

<p>Here is my .py code:</p>

<pre><code>from kivy.app import App
from kivy.uix.widget import Widget
from kivy.properties import NumericProperty, 
ReferenceListProperty,ObjectProperty
from kivy.vector import Vector
from kivy.clock import Clock
import pygame 
from kivy.uix.button import Button
from kivy.uix.screenmanager import ScreenManager, Screen
from kivy.uix.gridlayout import GridLayout
from kivy.lang import Builder


class Menu(GridLayout,Screen):

def __init__(self, **kwargs):
    super(Menu, self).__init__(**kwargs)
pass

class PongSpadi(Widget):
stig = NumericProperty(0)

def skoppa_bolti(self, bolti):
    if self.collide_widget(bolti):
        vx, vy = bolti.velocity
        offset = (bolti.center_y - self.center_y) / (self.height / 2)
        skoppadur = Vector(-1 * vx, vy)
        vel = skoppadur
        bolti.velocity = vel.x, vel.y + offset

class PongBolti(Widget):
velocity_x = NumericProperty(0)
velocity_y = NumericProperty(100)
velocity = ReferenceListProperty(velocity_x, velocity_y)


def move(self):
    self.pos = Vector(*self.velocity) + self.pos 


class PongGame(Screen, Widget):
bolti = ObjectProperty(None)
spilari1 = ObjectProperty(None)
spilari2 = ObjectProperty(None)
h1 = NumericProperty(310)
h2 = NumericProperty(310)


def serve_bolti(self, vel=(12, 6)):

    self.bolti.center = self.center #Staðsetur boltann í miðjuna
    self.bolti.velocity = vel

def update(self, dt): 
    self.bolti.move()

    self.spilari1.skoppa_bolti(self.bolti) #skoppar bolta af spöðum
    self.spilari2.skoppa_bolti(self.bolti)

    if (self.bolti.y &lt; 0) or (self.bolti.top &gt; self.height):
            self.bolti.velocity_y *= -1 #Lætur boltan skoppa ef hann snertir vegginn uppi/niðri


    if self.bolti.x &lt;self.x: 
        self.spilari2.stig += 1 #skráir stig ef bolti fer í hliðarnar
        self.serve_bolti(vel= (12,6)) #byrjar nýtt uppkast    
    if self.bolti.x &gt; self.width:
        self.spilari1.stig += 1
        self.serve_bolti(vel = (-12,6))

    keys = pygame.key.get_pressed()  #Takka stjórnun fyrir leikmann 1
    if self.h1 &lt; 567: #Bannar spaða 1 að fara of hátt
        if self.h1 &gt; 25: #Bannar spaða 1 að fara of látt
            if keys[pygame.K_z]: #býr til takka fyrir spaða 1
                self.h1 -= 10
            elif keys[pygame.K_a]:
                self.h1 += 10
        if self.h1 &gt;= 567: #ýtir honum til baka ef farið er of hátt
            self.h1 -= 10
        if self.h1 &lt;= 25: #ýtir honum til baka ef farið er of látt
            self.h1 += 10

    keys = pygame.key.get_pressed() #takka stjórnun fyrir leikmann 2
    if self.h2 &lt; 567:   
        if self.h2 &gt; 25:
            if keys[pygame.K_m]:
                self.h2 -= 10
            elif keys[pygame.K_k]:
                self.h2 += 10
        if self.h2 &gt;= 567: #ýtir honum til baka ef farið er of hátt
            self.h2 -= 10
        if self.h2 &lt;= 25: #ýtir honum til baka ef farið er of látt
            self.h2 += 10
    pass

sm = ScreenManager()
sm.add_widget(Menu(name='menu'))
sm.add_widget(PongGame(name='ponggame'))       

class PongApp(App): #ræsir forritið
title = ""Menu""
def build(self):    #kallar á eiginleika leiksins
    sm = Menu()
    return sm

    sm = PongGame()
    sm.serve_bolti()   #kallar á uppkast boltans
    Clock.schedule_interval(sm.update, 1.0 / 60) #Lætur leikinn uppfærast 60 sinnum á sekúndu.
    return sm



if __name__ == '__main__':
PongApp().run()
</code></pre>

<p>And here is my .kv code:</p>

<pre><code>#: kivy 1.9.1

ScreenManager:
    Menu:
    PongGame:

&lt;Menu&gt;
    name: 'menu'

Button:
    on_press: app.root.current = 'ponggame'
    on_press: print(""virkar"")
    text: ""Manneskja á móti manneskju""
    font_size: 20
    center_x: root.width / 2
    top: root.top / 1.5
    size: 275, 50

Label: #nafn á leik
    font_size: 100
    center_x: root.width / 2
    top: root.top - 50
    text: 'Pong og Gervigreind'

Label:
    font_size: 20
    center_x: root.width / 2
    top: root.top -120
    text: 'Lokaverkefni eftir Hróbjart Höskuldsson vor 2018'





&lt;PongBolti&gt;:
size: 20, 20
canvas: 
    Rectangle:
        pos: self.pos
        size: self.size

&lt;PongSpadi&gt;:
size: 23, 100
canvas:
    Rectangle:
        pos:self.pos
        size:self.size      



&lt;PongGame&gt;:  
name: 'ponggame'

bolti: pong_bolti
spilari1: spilari_vinstri
spilari2: spilari_haegri

canvas:
    Rectangle:
        pos: self.center_x - 5, 0
        size: 3, self.height

Label:  # staða leikmanns 1
    font_size: 70  
    center_x: root.width / 4
    top: root.top - 50
    text: str(root.spilari1.stig)

Label:  # staða leikmanns 2
    font_size: 70  
    center_x: root.width * 3 / 4
    top: root.top - 50
    text: str(root.spilari2.stig)

PongBolti:
    id: pong_bolti
    center: self.parent.center

PongSpadi:
    id: spilari_vinstri
    x: root.x + 30
    center_y: root.h1

PongSpadi:
    id: spilari_haegri
    x: root.width-self.width - 30
    center_y: root.h2

Button:
    on_release: app.root.current = 'menu'
    on_press: print(""virkar"")
    text: ""Manneskja á móti manneskju""
    font_size: 20
    center_x: root.width / 2
    top: root.top / 1.5
    size: 275, 50    
</code></pre>",python|kivy,"<p>This is not a complete answer, but some ideas to get you moving:</p>

<ol>
<li><p>Your <code>build()</code> method should return a <code>ScreenManager</code>. I think it should look something like this:</p>

<pre><code>def build(self):    #kallar á eiginleika leiksins
    sm = ScreenManager()
    sm.add_widget(Menu())
    sm.add_widget(PongGame())
    return sm
</code></pre></li>
<li><p>Your <code>PongGame</code> does not need to extend <code>Widget</code> (<code>Screen</code> is a Widget)</p></li>
<li><p>Your <code>Menu</code> class does not need to extend both <code>Screen</code> and <code>GridLayout</code>. Just use a <code>GridLayout</code> in your <code>Menu</code> like this:</p>

<pre><code>&lt;Menu&gt;
    name: 'menu'
    GridLayout:
        rows: 3
        Button:
            on_press: app.root.current = 'ponggame'
            on_press: print(""virkar"")
            text: ""Manneskja á móti manneskju""
            font_size: 20
            center_x: root.width / 2
            top: root.top / 1.5
            size: 275, 50

        Label: #nafn á leik
            font_size: 100
            center_x: root.width / 2
            top: root.top - 50
            text: 'Pong og Gervigreind'

        Label:
            font_size: 20
            center_x: root.width / 2
            top: root.top -120
            text: 'Lokaverkefni eftir Hróbjart Höskuldsson vor 2018'
</code></pre></li>
<li><p>You have code in your <code>build()</code> method that looks like it might be starting the game. I think that might be better in the <code>on_enter()</code> method of <code>PongGame</code>.</p></li>
</ol>",1
48966032,Error getting users from group django,"<p>Now I'm working on a system for filing applications for repairing equipment in one organization. Each application can be owned by a certain person from the group (Which is set in the admin panel) of technical support.
The model of the application is partially written, but I can not figure out the purpose of the application for this application.</p>

<p>models.py </p>

<pre><code>class Owner(models.Model):
OWNER_CHOICES = []
    for user in User.objects.filter(name = 'Техническая поддержка'):
        if user.has_perm('helpdesk.can_close'):
            OWNER_CHOICES.append(user)

    name = models.CharField(max_length=50, choices=OWNER_CHOICES)

    def __str__(self):
        return self.name

 class Application(models.Model):

     STATUS_CHOICES = (
        ('in_the_work', 'В работе'),
        ('new', 'Новая'),
        ('completed', 'Завершена')
    )

    authors = models.ForeignKey('auth.User')
    title = models.CharField(max_length=50)
    text = models.TextField()
    room = models.CharField(max_length = 4)
    published_date = models.DateField(blank=True, null=True, default = datetime.datetime.now)
    status = models.CharField(max_length=15, choices=STATUS_CHOICES, default='new')
    owner = models.ManyToManyField(Owner)

class Meta:
    permissions = (
        (""can_add_change"", ""Добавлять и изменять""),
        (""can_close"", ""Закрывать""),
        (""can_assign"", ""Назначать""),
    )

    def publish(self):
        self.publish_date = datetime.datetime.now()
        self.save()

    def __str__(self):
        return self.title
</code></pre>

<p>What am I doing wrong? Maybe you have some advice?</p>

<p>If I do so,</p>

<pre><code>class Owner(models.Model):
OWNER_CHOICES = []
for user in Group.objects.filter(name = 'Техническая поддержка'):
    #if user.has_perm('helpdesk.can_close'):
        OWNER_CHOICES.append(user)

name = models.CharField(max_length=50, choices=OWNER_CHOICES)

def __str__(self):
    return self.name
</code></pre>

<p>Then there is a migration error</p>

<pre><code>SystemCheckError: System check identified some issues:

ERRORS:
&lt;class 'helpdesk.admin.ApplicationAdmin'&gt;: (admin.E002) The value of 
'raw_id_fields[0]' refers to 'user', which is not an attribute of 
'helpdesk.Application'.
&lt;class 'helpdesk.admin.ApplicationAdmin'&gt;: (admin.E108) The value of 
'list_display[0]' refers to 'user', which is not a callable, an attribute of 
'ApplicationAdmin', or an attribute or method on 'helpdesk.Application'.
&lt;class 'helpdesk.admin.ApplicationAdmin'&gt;: (admin.E116) The value of 
'list_filter[2]' refers to 'user', which does not refer to a Field.
helpdesk.Owner.name: (fields.E005) 'choices' must be an iterable containing 
(actual value, human readable name) tuples.
</code></pre>",python|django,"<p>It seems that the Owner class' only purpose is to represent a relation between Application and User. You can instead have a direct m2m, and use <a href=""https://docs.djangoproject.com/en/2.0/ref/models/fields/#django.db.models.ForeignKey.limit_choices_to"" rel=""nofollow noreferrer""><code>limit_choices_to</code></a> to filter only users with the correct permissions (and name, but that seems like a bad idea to hard code)</p>

<pre><code>limit_app_owner = (
    models.Q(user_permissions__codename='helpdesk.can_close') &amp; 
    models.Q(name='Техническая поддержка')
)

class Application(models.Model):
    ...
    owner = models.ManyToManyField(
        User, 
        limit_choices_to=limit_app_owner,
    )
</code></pre>

<p>You can also use a function, if you want to do some complicated filtering during runtime. Here's an example:</p>

<pre><code>def limit_app_owner():
    ids = []
    for user in User.objects.all():
        if user.has_perms('helpdesk.can_close'):
            ids.append(user.id)
    return models.Q(id__in=ids)
</code></pre>",0
48950695,"Regarding the string format in python, what does '[%s]' mean?","<p>I saw a line of code: </p>

<pre><code>re.compile('[%s]' % re.escape(string.punctuation))
</code></pre>

<p>But I have no idea about the function of <code>[%s]</code></p>

<p>Could anyone help me please?</p>

<p>Thank You!</p>",python|string|python-3.x,"<p>It is a string formatting syntax (which it borrows from C).</p>

<p>Example:</p>

<pre><code>name = input(""What is your name? "")
print(""Hello %s, nice to meet you!"" % name)
</code></pre>

<p>And this is what the program will look like:</p>

<pre><code>What is your name? Johnny
Hello Johnny, nice to meet you!
</code></pre>

<p>You can also do this with string concentation...</p>

<pre><code>name = input(""What is your name? "")
print(""Hello + name + "", nice to meet you!"")
</code></pre>

<p>...However, the formatting is usually easier.
You can also use this with <em>multiple</em> strings.</p>

<pre><code>name = input(""What is your name? "")
age = input(""How old are you? "")
gender = (""Are you a male or a female? "")
print(""Is this correct?"")
print(""Your name is %s, you are %s years old, and you are %s."" % name, age, gender)
</code></pre>

<p>Output:</p>

<pre><code>What is your name? Johnny
How old are you? 37
Are you a male or a female? male
Is this correct?
Your name is Johnny, you are 37 years old, and you are male.
</code></pre>

<p>Now, please, before asking <strong>any more</strong> questions, <strong>see if they exist!</strong></p>",0
49040728,How can I use regular expressions,"<pre><code>pattern = r""(Mon|Tues|Wednes|Thurs|Fri)day, (February|March) [0-9]{2}, [0-9]{4}\s*Day [0-9]{1}""

line = """"""
Wednesday, February 28, 2018 
Day 4 3:00 Dismissal 
All Day 

Thursday, March 01, 2018 
Day 5 1:30PM Dismissal 
All Day 

Friday, March 02, 2018 
Day 6 3:00 Dismissal 
All Day 

Monday, March 05, 2018 
Day 1 1:30 Dismissal 
All Day 

Tuesday, March 06, 2018 
Day 2 3:00 Dismissal 
All Day 
Tuesday, March 06, 2018""""""

result = re.findall(pattern, line)
print(result)
</code></pre>

<p>Won't work.</p>",python|regex,"<p>If you want to catch keys only, group it right:</p>

<pre><code>pattern = r""((?:Mon|Tues|Wednes|Thurs|Fri)day), (February|March) ([0-9]{2}), ([0-9]{4})\s*Day ([0-9]{1})""
</code></pre>

<p>Will get:</p>

<pre><code>[('Wednesday', 'February', '28', '2018', '4'), ('Thursday', 'March', '01', '2018', '5'), ('Friday', 'March', '02', '2018', '6'), ('Monday', 'March', '05', '2018', '1'), ('Tuesday', 'March', '06', '2018', '2')] 
</code></pre>

<p>If you want to catch whole match string, don't group it, (like @ekhumoro said use <code>?:</code> before a group):</p>

<pre><code>pattern = r""(?:Mon|Tues|Wednes|Thurs|Fri)day, (?:February|March) [0-9]{2}, [0-9]{4}\s*Day [0-9]{1}""
</code></pre>

<p>Will get a list of <code>str</code>:</p>

<pre><code>['Wednesday, February 28, 2018 \nDay 4', 'Thursday, March 01, 2018 \nDay 5', 'Friday, March 02, 2018 \nDay 6', 'Monday, March 05, 2018 \nDay 1', 'Tuesday, March 06, 2018 \nDay 2']
</code></pre>",1
48738519,Getting error using gender.py,"<p>am trying to tell gender by first name.
I been using this code from: 
[<a href=""https://github.com/block8437/gender.py/blob/master/gender.py][1]"" rel=""nofollow noreferrer"">https://github.com/block8437/gender.py/blob/master/gender.py][1]</a></p>

<pre><code>import requests, json

def getGenders(names):
url = """"
cnt = 0
if not isinstance(names,list):
    names = [names,]    
for name in names:
    if url == """":
        url = ""name[0]="" + name
    else:
        cnt += 1
        url = url + ""&amp;name["" + str(cnt) + ""]="" + name


req = requests.get(""https://api.genderize.io?"" + url)
results = json.loads(req.text)

retrn = []
for result in results:
    if result[""gender""] is not None:
        retrn.append((result[""gender""], result[""probability""], result[""count""]))
    else:
        retrn.append((u'None',u'0.0',0.0))
return retrn
</code></pre>

<p>Everything was working for 2 days, I have not change anything in the code. I been passing different names in it on and off for 2 days. Suddenly I got this error:</p>

<blockquote>
  <p>string indices must be integers</p>
</blockquote>

<p>on this line:</p>

<pre><code>if result[""gender""] is not None:
</code></pre>

<p>First, I want to know why this would suddenly happen? Second, How can I fix it?</p>",python,"<p>Iterating through a dictionary iterates through the keys in a dictionary.</p>

<pre><code>results = {""name"":""peter"",""gender"":""male"",""probability"":""0.99"",""count"":796}
[result for result in results] # ['count', 'gender', 'name', 'probability']
</code></pre>

<p>Iterating through a list iterates through the items of a list. </p>

<pre><code>results = [{""name"":""peter"",""gender"":""male"",""probability"":""0.99"",""count"":796}]
[result for result in results] # [{'count': 796, 'gender': 'male', 'name': 'peter', 'probability': '0.99'}]
</code></pre>

<p>According to the API description at <a href=""https://genderize.io/"" rel=""nofollow noreferrer"">https://genderize.io/</a>, there are two response formats: a json object for a single name lookup (which <code>json.loads</code> would return as a dictionary), and a list of objects for multiple lookups (which <code>json.loads</code> would return as a list of dictionaries). See the response for </p>

<p><a href=""https://api.genderize.io/?name=peter"" rel=""nofollow noreferrer"">https://api.genderize.io/?name=peter</a></p>

<p>compared to </p>

<p><a href=""https://api.genderize.io/?name[0]=peter"" rel=""nofollow noreferrer"">https://api.genderize.io/?name[0]=peter</a></p>

<p>It seems like your error is the result of getting a response in the first format when you are expecting the second. Why might this have changed? Thats a question for the API you are using. It looks to me like your request should always be in the multi-name request format but I can't speak for how they are <em>actually</em> responding.</p>

<p>As for fixing this, you could check the type and wrap naked dictionaries in a list:</p>

<pre><code>retrn = []
if not isinstance(results,  list):
    results =[results]

for result in results:
    if result[""gender""] is not None:
        retrn.append((result[""gender""], result[""probability""], result[""count""]))
    else:
        retrn.append((u'None',u'0.0',0.0))
</code></pre>",0
48794010,SyntaxError: unindent does not match any outer indentation level,"<pre><code>&gt;&gt;&gt; x = 5
&gt;&gt;&gt; y = 3
&gt;&gt;&gt; if x == y:
        print(""Yes"")
    else:

SyntaxError: unindent does not match any outer indentation level
&gt;&gt;&gt; 
</code></pre>

<p>I keep having this problem. I am new into Python but I want to learn it seriously and I am struggling with this error. I made research about indentation and tried to review my few lines of code but with  no succes. I cannot understand why it keeps appearing as I tried not to mix tabs and spaces. Thanks in advance for help! (I am currently running Python 3.6.4)</p>",python|indentation|python-3.6,"<p>Try the below code without the <code>else</code> block and see if it still gives you the same error.</p>

<pre><code>x = 5
y = 3
if x == y:
    print(""Yes"")
</code></pre>",0
48794010,SyntaxError: unindent does not match any outer indentation level,"<pre><code>&gt;&gt;&gt; x = 5
&gt;&gt;&gt; y = 3
&gt;&gt;&gt; if x == y:
        print(""Yes"")
    else:

SyntaxError: unindent does not match any outer indentation level
&gt;&gt;&gt; 
</code></pre>

<p>I keep having this problem. I am new into Python but I want to learn it seriously and I am struggling with this error. I made research about indentation and tried to review my few lines of code but with  no succes. I cannot understand why it keeps appearing as I tried not to mix tabs and spaces. Thanks in advance for help! (I am currently running Python 3.6.4)</p>",python|indentation|python-3.6,"<p>add or print some thing in else block. It will resolve your issue.</p>

<pre><code>x = 5
y = 3
if x == y:
   print(""Yes"")
else:
   print(""No"")
</code></pre>",0
48794010,SyntaxError: unindent does not match any outer indentation level,"<pre><code>&gt;&gt;&gt; x = 5
&gt;&gt;&gt; y = 3
&gt;&gt;&gt; if x == y:
        print(""Yes"")
    else:

SyntaxError: unindent does not match any outer indentation level
&gt;&gt;&gt; 
</code></pre>

<p>I keep having this problem. I am new into Python but I want to learn it seriously and I am struggling with this error. I made research about indentation and tried to review my few lines of code but with  no succes. I cannot understand why it keeps appearing as I tried not to mix tabs and spaces. Thanks in advance for help! (I am currently running Python 3.6.4)</p>",python|indentation|python-3.6,<p>Ok i am also using a Python SoloLearn app and tried to write the same code in the Code Playground and it works just fine. I also did use my fathers laptop and looks ok there too... (He is using 3.3... or similar). So I can only say that maybe its some kind of weird bug occuring on my laptop or on 3.6.4. Anyway thank you all for answers and fast reply. I just wanted to be sure its not my bad and now I'm pretty sure its not :))</p>,0
48758703,Python os.remove fails to remove,"<p>I want to remove files as follows:</p>

<pre><code>path = ""username/hw/01/""
file_list = [""main.cc"", ""makefile""]
files = os.listdir(path)
del_files = list(set(files) - set(file_list))
for del_file in del_files:
  try:
    os.remove(path + del_file)
  except FileNotFoundError as e:
    print(""\t"" + e.strerror)
  except OSError as e:
    print(""\t"" + e.strerror)
</code></pre>

<p>Which is not working. If I try running</p>

<pre><code>....
try:
  os.remove(path + del_file)
  os.remove(path + del_file)
except ...
</code></pre>

<p>the exception fires. However, if checked after with ls or nautilus, for example, the files are still there.</p>

<p>What works is</p>

<pre><code>files = os.listdir(path)
del_files = list(set(files) - set(file_list))
while (del_files):
  for del_file in del_files:
    try:
      os.remove(path + del_file)
      time.sleep(0.5)
      print(""\t\tRemoving "" + path + del_file)
    except FileNotFoundError as e:
      print(""\t"" + e.strerror)
    except OSError as e:
      print(""\t"" + e.strerror)
  files = os.listdir(path)
  del_files = list(set(files) - set(file_list))
</code></pre>

<p>This is incredibly ugly. When print statements are included, it will run more than once to get all of the requested files. What am I missing?</p>

<p>If it matters,</p>

<pre><code>$ python3 --version
Python 3.4.3
</code></pre>",python|python-3.x|python-os,"<p>You might need to use <code>os.remove(os.path.join(path, del_file))</code> instead of <code>os.remove(path + del_file)</code> if path doesn't end with a path separator. Docs: <a href=""https://docs.python.org/3/library/os.path.html#os.path.join"" rel=""nofollow noreferrer"" title=""Docs"">os.path.join()</a></p>",1
49103270,How to make Flask use Python 3 by default,"<p>I am trying to deploy a Flask project on Ubuntu 16 server (Apache2). In this project, I am using Python3 libraries. So I want to set Flask to use Python 3 on the server. But I am really having a terrible time. Here is what I am doing:</p>

<pre><code>sudo apt-get install apache2
sudo apt-get update
sudo apt-get install libapache2-mod-wsgi-py3 # I think that is how you install wsgi for python3
sudo apt-get install python-flask
sudo apt-get upgrade
</code></pre>

<p>my project conf: <code>/etc/apache2/sites-available/project.conf</code></p>

<pre><code>&lt;VirtualHost *:80&gt;
    ServerName 52.25.54.241 #my IP
    ServerAdmin admin@mywebsite.com 
    WSGIScriptAlias / /var/www/FlaskApps/FlaskApps.wsgi
    &lt;Directory /var/www/FlaskApps/project/&gt;
        Order allow,deny
        Allow from all
    &lt;/Directory&gt;
    &lt;Directory /var/www/FlaskApps/project/static/&gt;
        Order allow,deny
        Allow from all
    &lt;/Directory&gt;
    ErrorLog ${APACHE_LOG_DIR}/error.log
    LogLevel warn
    CustomLog ${APACHE_LOG_DIR}/access.log combined
&lt;/VirtualHost&gt;
</code></pre>

<p>and finally: <code>/var/www/FlaskApps/FlaskApps.wsgi</code></p>

<pre><code>#! /usr/bin/python
import sys
import logging
logging.basicConfig(stream=sys.stderr)
sys.path.insert(0,""/var/www/FlaskApps/project/"")

# home points to the home.py file
from home import app as application
application.secret_key = ""somesecretsessionkey""
</code></pre>

<p><strong>NOTE:</strong>
When I install wsgi like this:</p>

<pre><code>sudo apt-get install libapache2-mod-wsgi
</code></pre>

<p>it works, but it uses python2. and When I install wsgi 3. It does not work and it says no module called flask. So how can I set flask to use python3 by default?</p>

<p>I read this question: <a href=""https://stackoverflow.com/questions/30642894/getting-flask-to-use-python3-apache-mod-wsgi"">Getting Flask to use Python3 (Apache/mod_wsgi)
</a>
but it didn't help me. It is not clear for me because they are using virtualenv. </p>",python|python-3.x|flask|mod-wsgi,"<p>I would recommend you use a fresh virtual env for each project, so if you want to create a virtual environment with python3.7 as your default (it's better to leave python3 defaulting to python3.5 on ubuntu16.04 at least as other programs rely on it), </p>

<pre><code>virtualenv -p python3.7 name_of_your_venv 
</code></pre>

<p>after that you can choose between activating your venv before installing your python dependencies ( source ./name_of_your_venv/bin/activate), or you can do it without activating it: </p>

<pre><code>./name_of_your_venv/bin/pip install -r requirements.txt
</code></pre>

<p>you also have to change the first line of your .py files from</p>

<pre><code>#! /usr/bin/python 
</code></pre>

<p>to</p>

<pre><code>#! /path/to/name_of_your_venv/bin/python 
</code></pre>

<p>This will allow you to not have different python packages mixed up potentially causing headaches </p>",0
49103270,How to make Flask use Python 3 by default,"<p>I am trying to deploy a Flask project on Ubuntu 16 server (Apache2). In this project, I am using Python3 libraries. So I want to set Flask to use Python 3 on the server. But I am really having a terrible time. Here is what I am doing:</p>

<pre><code>sudo apt-get install apache2
sudo apt-get update
sudo apt-get install libapache2-mod-wsgi-py3 # I think that is how you install wsgi for python3
sudo apt-get install python-flask
sudo apt-get upgrade
</code></pre>

<p>my project conf: <code>/etc/apache2/sites-available/project.conf</code></p>

<pre><code>&lt;VirtualHost *:80&gt;
    ServerName 52.25.54.241 #my IP
    ServerAdmin admin@mywebsite.com 
    WSGIScriptAlias / /var/www/FlaskApps/FlaskApps.wsgi
    &lt;Directory /var/www/FlaskApps/project/&gt;
        Order allow,deny
        Allow from all
    &lt;/Directory&gt;
    &lt;Directory /var/www/FlaskApps/project/static/&gt;
        Order allow,deny
        Allow from all
    &lt;/Directory&gt;
    ErrorLog ${APACHE_LOG_DIR}/error.log
    LogLevel warn
    CustomLog ${APACHE_LOG_DIR}/access.log combined
&lt;/VirtualHost&gt;
</code></pre>

<p>and finally: <code>/var/www/FlaskApps/FlaskApps.wsgi</code></p>

<pre><code>#! /usr/bin/python
import sys
import logging
logging.basicConfig(stream=sys.stderr)
sys.path.insert(0,""/var/www/FlaskApps/project/"")

# home points to the home.py file
from home import app as application
application.secret_key = ""somesecretsessionkey""
</code></pre>

<p><strong>NOTE:</strong>
When I install wsgi like this:</p>

<pre><code>sudo apt-get install libapache2-mod-wsgi
</code></pre>

<p>it works, but it uses python2. and When I install wsgi 3. It does not work and it says no module called flask. So how can I set flask to use python3 by default?</p>

<p>I read this question: <a href=""https://stackoverflow.com/questions/30642894/getting-flask-to-use-python3-apache-mod-wsgi"">Getting Flask to use Python3 (Apache/mod_wsgi)
</a>
but it didn't help me. It is not clear for me because they are using virtualenv. </p>",python|python-3.x|flask|mod-wsgi,"<p>Setting Python 3 as default is what you're looking for I believe.</p>

<p>Running <code>which python</code> shows that 2.7 is the default run <code>ln -sf /usr/bin/python3 /usr/bin/python</code> to make Python 3 the default. That's the step I always take when setting up Flask on a fresh install of Ubuntu. </p>",8
49122407,Efficiently slicing a string in Python3,"<p>Since python does <a href=""https://stackoverflow.com/questions/5722006/does-python-do-slice-by-reference-on-strings"">slice-by-copy</a>, slicing strings can be very costly. </p>

<p>I have a recursive algorithm that is operating on strings. Specifically, if a function is passed a string <code>a</code>, the function calls itself on <code>a[1:]</code> of the passed string. The hangup is that the strings are so long, the slice-by-copy mechanism is becoming a very costly way to remove the first character.</p>

<p>Is there a way to get around this, or do I need to rewrite the algorithm entirely?</p>",python|string|slice,"<p>The only way to get around this in general is to make your algorithm uses <code>bytes</code>-like types, either Py2 <code>str</code> or Py3 <code>bytes</code>; views of Py2 <code>unicode</code>/Py3 <code>str</code> are not supported. I provided details on how to do this on <a href=""https://stackoverflow.com/a/35181399/364696"">my answer</a> to <a href=""https://stackoverflow.com/q/35180377/364696"">a related question</a>, but the short version is, if you can assume <code>bytes</code>-like arguments (or convert to them), wrapping the argument in a <code>memoryview</code> and slicing is a reasonable solution. Once converted to a <code>memoryview</code>, slicing produces new <code>memoryview</code>s with <code>O(1)</code> cost (in both time and memory), rather than the <code>O(n)</code> time/memory cost of text slicing.</p>",3
13764052,"Python variable ""declaration"" in function body","<pre><code>class Example(wx.Frame):

    def __init__(self, *args, **kwargs):
        super(Example, self).__init__(*args, **kwargs) 

        self.InitUI()

    def InitUI(self):    

        menubar = wx.MenuBar()
        fileMenu = wx.Menu()
        viewMenu = wx.Menu()

        self.shst = viewMenu.Append(wx.ID_ANY, 'Show statubar', 
            'Show Statusbar', kind=wx.ITEM_CHECK)
...
</code></pre>

<p>I've recently started  learning python and wxPython. The above code snipppet is from <a href=""http://www.zetcode.com/wxpython/menustoolbars/"" rel=""nofollow"">http://www.zetcode.com/wxpython/menustoolbars/</a> .
I'm trying to get my head around the <em>self.shst</em> variable. Why is it necessary to prefix it with the self keyword ?</p>

<p>From what I read, the self keyword is used in that context in the __init__ method, to ""declare"" instance variables, but the author has no <em>shst</em> declaration in __init__</p>

<p><strong>Edit</strong>
In light of your answers I did the following test:</p>

<pre><code>class Test(object):
    def __init__(self):
        self.x = 20
    def func(self):
        self.y = 10
    def getVal(self):
        return self.y


def main():
    t = Test()
    print t.getVal()
    print dir(t)

if __name__ == '__main__':
    main()
</code></pre>

<p>I am unable to access self.y in the getVal() function, and I don't see y in the output from dir(t). Shouldn't self.y be accessible to every function in the Test class ?</p>",python|class|variables|instance,"<p>There's no necessity to define instance variables in <code>__init__</code>. They can be defined anywhere. Python is a dynamic langauge, and it is possible to add attributes to an object at any point.</p>",1
13764052,"Python variable ""declaration"" in function body","<pre><code>class Example(wx.Frame):

    def __init__(self, *args, **kwargs):
        super(Example, self).__init__(*args, **kwargs) 

        self.InitUI()

    def InitUI(self):    

        menubar = wx.MenuBar()
        fileMenu = wx.Menu()
        viewMenu = wx.Menu()

        self.shst = viewMenu.Append(wx.ID_ANY, 'Show statubar', 
            'Show Statusbar', kind=wx.ITEM_CHECK)
...
</code></pre>

<p>I've recently started  learning python and wxPython. The above code snipppet is from <a href=""http://www.zetcode.com/wxpython/menustoolbars/"" rel=""nofollow"">http://www.zetcode.com/wxpython/menustoolbars/</a> .
I'm trying to get my head around the <em>self.shst</em> variable. Why is it necessary to prefix it with the self keyword ?</p>

<p>From what I read, the self keyword is used in that context in the __init__ method, to ""declare"" instance variables, but the author has no <em>shst</em> declaration in __init__</p>

<p><strong>Edit</strong>
In light of your answers I did the following test:</p>

<pre><code>class Test(object):
    def __init__(self):
        self.x = 20
    def func(self):
        self.y = 10
    def getVal(self):
        return self.y


def main():
    t = Test()
    print t.getVal()
    print dir(t)

if __name__ == '__main__':
    main()
</code></pre>

<p>I am unable to access self.y in the getVal() function, and I don't see y in the output from dir(t). Shouldn't self.y be accessible to every function in the Test class ?</p>",python|class|variables|instance,"<p>If you did not prefix <code>shst</code> with <code>self.</code>, then it would just be a local variable that goes out of scope and is garbage-collected after the method exits.  There is no need to declare python class/object members prior to assignment.</p>",1
13217489,Python manage classes in separate files,"<p>I have a project which uses the MVC pattern. </p>

<p>In folder ""models"" I have quite many classes, each class is now has its own file. But I feel like it's not convenient, because every time I need to use a class I have to import it separately. E.g. I have many of the followings in my app source:</p>

<pre><code>from models.classX import classX
from models.classY import classY
</code></pre>

<p>If I want to import everything at once, something like <code>from models import *</code> I found that I can put all sorts of <code>import</code> in <code>models/__init__.py</code>. But is it the pythonic way to do it ? What is the convention ? </p>",python|class|design-patterns|import,"<p>Most pythonic way is one that you're already using. You can alleviate importing by grouping your classes in modules. For example, in Django usually all application models are in a single file.</p>

<p>From python <a href=""http://docs.python.org/2/tutorial/modules.html#importing-from-a-package"" rel=""nofollow"">docs</a>:</p>

<blockquote>
  <p>Although certain modules are designed to export only names that follow certain patterns when you use <code>import *</code>, it is still considered bad practise in production code.</p>
</blockquote>",0
13217489,Python manage classes in separate files,"<p>I have a project which uses the MVC pattern. </p>

<p>In folder ""models"" I have quite many classes, each class is now has its own file. But I feel like it's not convenient, because every time I need to use a class I have to import it separately. E.g. I have many of the followings in my app source:</p>

<pre><code>from models.classX import classX
from models.classY import classY
</code></pre>

<p>If I want to import everything at once, something like <code>from models import *</code> I found that I can put all sorts of <code>import</code> in <code>models/__init__.py</code>. But is it the pythonic way to do it ? What is the convention ? </p>",python|class|design-patterns|import,"<p>Firstly, you should rename your classes and modules so that they don't match, and follow PEP8:</p>

<pre><code>models/
    classx.py
        class ClassX
    classy.py
        class ClassY
</code></pre>

<p>Then, I'd got with this in <code>models/__init__.py</code>:</p>

<pre><code>from models.classx import ClassX
from models.classy import ClassY
</code></pre>

<p>Meaning in your main code, you can do any one of:</p>

<pre><code>from models import *
x = ClassX()
</code></pre>



<pre><code>from models import ClassX
x = ClassX()
</code></pre>



<pre><code>import models
x = models.ClassX()
</code></pre>",0
13217489,Python manage classes in separate files,"<p>I have a project which uses the MVC pattern. </p>

<p>In folder ""models"" I have quite many classes, each class is now has its own file. But I feel like it's not convenient, because every time I need to use a class I have to import it separately. E.g. I have many of the followings in my app source:</p>

<pre><code>from models.classX import classX
from models.classY import classY
</code></pre>

<p>If I want to import everything at once, something like <code>from models import *</code> I found that I can put all sorts of <code>import</code> in <code>models/__init__.py</code>. But is it the pythonic way to do it ? What is the convention ? </p>",python|class|design-patterns|import,"<p>Python is not java; please avoid the one-file-per-class pattern. If you can't change it, you can import all of them from a submodule of your <code>models</code> package:</p>

<pre><code># all.py: convenient import of all the needed classes
from models.classX import classX
from models.classY import classY
...
</code></pre>

<p>Then in your code you can write:</p>

<pre><code>import my.package.models.all as models  # or from my.package.models.all import *
</code></pre>

<p>and proceed to use <code>models.classX</code>, <code>models.classY</code>, etc.</p>",6
13740975,raise error vs. return False python3,"<p>Hi I have started coding in python lately and I am wondering how to handle errors.
I did the tutorial diveintopython and there he uses raise error to give feedback whats going wrong.
Here my case:
I have a function which checks if a string, representing a number, is 7 or 8 digits long and some other things</p>

<pre><code>def checkNumber( someNumber ):
  ''' checks if Number is valid '''
  someNumber = str(someNumber);
  if not 6 &lt; len(someNumber) &lt; 9:
     raise ValueError('number must be either 7 or 8')
  if not re.search('^[0-9]{7,8}$', someNumber):
     raise ValueError('only digits from 0...9')
  sum = 0
  if len(pzn) == 7: someNumber = '0' + someNumber
  for n, a in list(enumerate(someNumber[:-1], start=1)):
     sum += int(a)*n
  if someNumber[-1]==str(sum%11):
     return someNumber
  else:   
     raise ValueError('not a vaild code')
</code></pre>

<p>I am using this function standalone, but I will also call it from an other function, which scans barcodes and calls this function to validate the code. So if the scan number is correct it should go on and if not it should continue scanning.
Is it better to do it like i did and put a try/except block in the scanner function or should I return a False</p>

<p>Thanks a lot</p>",python|return|raise|try-except,"<p>It's better to raise an exception, that's what exceptions are for.</p>

<p>Also, returning <code>False</code> would require your code to handle testing the difference between <code>0</code> and <code>False</code>. Suddenly you need to test the return value of your function.</p>

<p>Your function does seem to suffer from a split personality. On the one hand you named it <code>checkNumber</code>, and your documentation claims it is checking if the number is valid. On the other hand it is <em>transforming</em>, altering that number, converting it to a string, and even prepending a <code>0</code> to it if the <code>pzn</code> global has a length of 7.</p>

<p>If all your function does is testing if the number is valid, then returning a boolean makes sense. Using exceptions can then give you more information on the nature of the validation failure perhaps, but a boolean could be enough if you do not need that information.</p>

<p>But if you also need to transform your number to a different type and format, you need to rename your function, and make then a validation error is really an exception to the normal behaviour. The expectation is then that the function returns a transformed value, and invalid input should raise an exception to indicate that it could not return a normal value because of some error in the input.</p>",7
13740975,raise error vs. return False python3,"<p>Hi I have started coding in python lately and I am wondering how to handle errors.
I did the tutorial diveintopython and there he uses raise error to give feedback whats going wrong.
Here my case:
I have a function which checks if a string, representing a number, is 7 or 8 digits long and some other things</p>

<pre><code>def checkNumber( someNumber ):
  ''' checks if Number is valid '''
  someNumber = str(someNumber);
  if not 6 &lt; len(someNumber) &lt; 9:
     raise ValueError('number must be either 7 or 8')
  if not re.search('^[0-9]{7,8}$', someNumber):
     raise ValueError('only digits from 0...9')
  sum = 0
  if len(pzn) == 7: someNumber = '0' + someNumber
  for n, a in list(enumerate(someNumber[:-1], start=1)):
     sum += int(a)*n
  if someNumber[-1]==str(sum%11):
     return someNumber
  else:   
     raise ValueError('not a vaild code')
</code></pre>

<p>I am using this function standalone, but I will also call it from an other function, which scans barcodes and calls this function to validate the code. So if the scan number is correct it should go on and if not it should continue scanning.
Is it better to do it like i did and put a try/except block in the scanner function or should I return a False</p>

<p>Thanks a lot</p>",python|return|raise|try-except,"<p>Purists will say that in Python <em>""it is Easier to ask forgiveness than permission""</em>, which means, you should always use exceptions whenever possible.</p>

<p>I also prefer to use exceptions, <strong>when it makes sense</strong>. For a method which intuitively should return <code>True</code> or <code>False</code> (for example something like <code>is_valid_number()</code>), I simply find more obvious/readable to just return the boolean value and not raise any exception.</p>

<p>Now for a method like <code>convert_number()</code>, you want use exceptions otherwise the handling of return codes will probably turn your code into a mess.</p>

<p>From your code, I find you should not do <code>return someNumber</code> at the end; you could simply return <code>True</code> or <code>False</code>.</p>

<p>If you are interested in why the check failed, then using exceptions is the way to go because you can cleanly return an ""error message"" to the caller. In this case you also do not need to return anything, the fact that you call it and it doesn't raise any exceptions already means the number is valid.</p>

<p>Finally, if your intention is to convert the number into something else, well, then your method should be called <code>convert_number()</code>, return the number if everything is ok, and raise an exception in case of error.</p>",2
13631884,NDB querying a GenericProperty in repeated Expando StructuredProperty,"<p>Hey guys im trying to figure out how to structure my query for the following case</p>

<p>First i have a model defined</p>

<pre><code>class Variant(ndb.Expando):
    test = ndb.StringProperty()


class Item(ndb.Model):
    test2 = ndb.StringProperty()
    variants = ndb.StructuredProperty(Variant, repeated=True)

variant = Variant(test=""test"", dynamic=""a"")
item = Item(test2=""test"", variants=[variant, ])
item.put()
</code></pre>

<p>and then for the query stuff.. So far i've tried</p>

<pre><code>dynamic = ""dynamic""
Item.query(ndb.GenericProperty(""variants.%s"" % dynamic) == ""a"")
Item.query(Item._properties[""variants.%s"" % dynamic] == ""a"")
Item.query(getattr(Item.variants, dynamic) == ""a"")
Item.query(getattr(Item, ""variants.%s"" % dynamic) == ""a"")
Item.query(ndb.query.FilterNode(""variants.%s"" % dynamic, ""="", ""a""))

generic_prop = ndb.GenericProperty()
generic_prop._name = ""variants.%s"" % dynamic
Item.query(generic_prop == ""a"")
</code></pre>

<p>and none of these works.. This should be perfectly possible since the property name in the datastore is</p>

<pre><code>variants.dynamic = [""a"", ]
</code></pre>

<p>Thank you for your help</p>",google-app-engine|python-2.7|app-engine-ndb,"<p><strong>Hackish Solution</strong>:</p>

<p>A temporary solution: Using a <code>ComputedProperty</code> to query by - in our case:</p>

<p>(adding the following to the model definition)</p>

<pre><code>computed_prop = ndb.ComputedProperty(lambda self: self.repeating_prop[0].sub_prop if self.repeating_prop else None)
</code></pre>",0
13631884,NDB querying a GenericProperty in repeated Expando StructuredProperty,"<p>Hey guys im trying to figure out how to structure my query for the following case</p>

<p>First i have a model defined</p>

<pre><code>class Variant(ndb.Expando):
    test = ndb.StringProperty()


class Item(ndb.Model):
    test2 = ndb.StringProperty()
    variants = ndb.StructuredProperty(Variant, repeated=True)

variant = Variant(test=""test"", dynamic=""a"")
item = Item(test2=""test"", variants=[variant, ])
item.put()
</code></pre>

<p>and then for the query stuff.. So far i've tried</p>

<pre><code>dynamic = ""dynamic""
Item.query(ndb.GenericProperty(""variants.%s"" % dynamic) == ""a"")
Item.query(Item._properties[""variants.%s"" % dynamic] == ""a"")
Item.query(getattr(Item.variants, dynamic) == ""a"")
Item.query(getattr(Item, ""variants.%s"" % dynamic) == ""a"")
Item.query(ndb.query.FilterNode(""variants.%s"" % dynamic, ""="", ""a""))

generic_prop = ndb.GenericProperty()
generic_prop._name = ""variants.%s"" % dynamic
Item.query(generic_prop == ""a"")
</code></pre>

<p>and none of these works.. This should be perfectly possible since the property name in the datastore is</p>

<pre><code>variants.dynamic = [""a"", ]
</code></pre>

<p>Thank you for your help</p>",google-app-engine|python-2.7|app-engine-ndb,"<p>You can do this with a bit of magic.</p>

<p><strong>SHORT ANSWER</strong>:</p>

<pre><code>variants_dynamic_property = ndb.GenericProperty()
variants_dynamic_property._name = 'variants.dynamic'
q = Item.query(variants_dynamic_property == 'a')
</code></pre>

<p><strong>LONG ANSWER</strong>:</p>

<p>Since you are querying for a <code>GenericProperty</code>, you'll need to create one as the <a href=""https://developers.google.com/appengine/docs/python/ndb/queries#properties_by_string"" rel=""nofollow"">docs</a> state, e.g.:</p>

<pre><code>FlexEmployee.query(ndb.GenericProperty('location') == 'SF')
</code></pre>

<p>Similarly, when querying for a <code>StucturedProperty</code>, the <a href=""https://developers.google.com/appengine/docs/python/ndb/queries#filtering_structured_properties"" rel=""nofollow"">docs</a> state you can use a property of the property, e.g.:</p>

<pre><code>Contact.query(Contact.address.city == 'Amsterdam')
</code></pre>

<p>So combining these, you would need</p>

<pre><code>Item.query(ndb.GenericProperty('variants.dynamic') == 'a')
</code></pre>

<p>but trying to construct the property via <code>ndb.GenericProperty('variants.dynamic')</code> results in the following exception:</p>

<pre><code>  File ""/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/ext/ndb/utils.py"", line 136, in positional_wrapper
    return wrapped(*args, **kwds)
  File ""/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/ext/ndb/model.py"", line 2366, in __init__
    super(GenericProperty, self).__init__(name=name, **kwds)
  File ""/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/ext/ndb/utils.py"", line 136, in positional_wrapper
    return wrapped(*args, **kwds)
  File ""/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/ext/ndb/model.py"", line 765, in __init__
    raise ValueError('Name %r cannot contain period characters' % (name,))
ValueError: Name 'variants.dynamic' cannot contain period characters
</code></pre>

<p>But you can get around this by using the constructor with no property name and then setting the name after the fact:</p>

<pre><code>variants_dynamic_property = ndb.GenericProperty()
variants_dynamic_property._name = 'variants.dynamic'
</code></pre>",1
13631884,NDB querying a GenericProperty in repeated Expando StructuredProperty,"<p>Hey guys im trying to figure out how to structure my query for the following case</p>

<p>First i have a model defined</p>

<pre><code>class Variant(ndb.Expando):
    test = ndb.StringProperty()


class Item(ndb.Model):
    test2 = ndb.StringProperty()
    variants = ndb.StructuredProperty(Variant, repeated=True)

variant = Variant(test=""test"", dynamic=""a"")
item = Item(test2=""test"", variants=[variant, ])
item.put()
</code></pre>

<p>and then for the query stuff.. So far i've tried</p>

<pre><code>dynamic = ""dynamic""
Item.query(ndb.GenericProperty(""variants.%s"" % dynamic) == ""a"")
Item.query(Item._properties[""variants.%s"" % dynamic] == ""a"")
Item.query(getattr(Item.variants, dynamic) == ""a"")
Item.query(getattr(Item, ""variants.%s"" % dynamic) == ""a"")
Item.query(ndb.query.FilterNode(""variants.%s"" % dynamic, ""="", ""a""))

generic_prop = ndb.GenericProperty()
generic_prop._name = ""variants.%s"" % dynamic
Item.query(generic_prop == ""a"")
</code></pre>

<p>and none of these works.. This should be perfectly possible since the property name in the datastore is</p>

<pre><code>variants.dynamic = [""a"", ]
</code></pre>

<p>Thank you for your help</p>",google-app-engine|python-2.7|app-engine-ndb,"<p>It's easy using GQL:</p>

<pre><code>Item.gql(""WHERE variants.dynamic = 'a'"").fetch()
</code></pre>

<p>Also this works:</p>

<pre><code>s = StringProperty()
s._name = 'variants.dynamic')
Item.query(s == 'a').fetch()
</code></pre>

<p>Please do file a feature request; however it's going to be a balancing act. What syntax would you like to use?</p>

<p><strong>UPDATE:</strong></p>

<p>The same thing works with GenericProperty(), or any other Property subclass.</p>

<p>The reason that GenericProperty('variants.dynamic') is forbidden is to prevent people from doing hacks like this:</p>

<pre><code>class MyHack(ndb.Model):
  foo = StringProperty('bar.baz')
</code></pre>

<p>which will confuse the serialization and deserialization code.</p>

<p>Maybe we can add a flag to Property that skips this check but then disallows using the property in a model definition (it would only allow it in a query).</p>

<p>Or maybe we can make this work (I think this would be hard though):</p>

<pre><code>Item.query(Item.variants.dynamic == 'a').fetch()
</code></pre>

<p>(only if variants is an Expando).</p>",4
14452947,Showing a specific message using Django message framework,"<p>I am trying to only show one message, if it exists. I tried this but it isn't working:</p>

<p>In view:</p>

<pre><code>   messages.success(request, ""some message"", extra_tags=""account_activated"")
</code></pre>

<p>In template:</p>

<pre><code>    {% if messages %}
        {% for message in messages %}
            {% ifequal message.tag ""account_activated"" %}
                &lt;p&gt;{{ message }}&lt;/p&gt;
            {% endifequal %}
        {% endfor %}
    {% endif %}
</code></pre>

<p>If I remove <code>{% ifequal message.tag ""account_activated"" %}</code> it works.</p>

<p>Please help.</p>",python|django,"<p>First, it's <code>message.tags</code> and not <code>message.tag</code>. Second, <code>message.tags</code> will contain all of the tags for the message separated by spaces, and not just the <code>extra_tags</code>.</p>

<p>For your example, <code>message.tags</code> should equal <code>'account_activated success'</code>.</p>

<p>See the source code <a href=""https://github.com/django/django/blob/master/django/contrib/messages/storage/base.py#L42"" rel=""nofollow"" title=""django.contrib.messages.storage.base source code"">here</a>.</p>",0
14372485,raw_input() in Python,"<p>A question from my reading of <strong>Learn Python The Hard Way</strong>:</p>

<pre><code>y = raw_input(""Name? "")
</code></pre>

<p>puts the result into variable y.</p>

<p>Then on line 9 in the following code, <strong>raw_input(""?"")</strong>, where does the result go?</p>

<pre><code>from sys import argv

script, filename = argv

print ""We're going to erase %r."" % filename
print ""If you don't want that, hit CTRL-C (^C).""
print ""If you do want that, hit RETURN.""

raw_input(""?"")

print ""Opening the file...""
target = open(filename, 'w')

...
</code></pre>",python|python-2.7,"<p>In your case <code>raw_input(""?"")</code> represent something like <code>Press any key to continue</code></p>

<p>In non-interactive mode _ has no special meaning.</p>

<p>The python interpreter understands ""_"" as a reference to the last value it
computed, the input is stored in a special variable <code>_</code></p>

<pre><code>In [83]: raw_input(""Enter : "")
Enter : Hi There
Out[83]: 'Hi There'

In [84]: _
Out[84]: 'Hi There'
</code></pre>",1
14372485,raw_input() in Python,"<p>A question from my reading of <strong>Learn Python The Hard Way</strong>:</p>

<pre><code>y = raw_input(""Name? "")
</code></pre>

<p>puts the result into variable y.</p>

<p>Then on line 9 in the following code, <strong>raw_input(""?"")</strong>, where does the result go?</p>

<pre><code>from sys import argv

script, filename = argv

print ""We're going to erase %r."" % filename
print ""If you don't want that, hit CTRL-C (^C).""
print ""If you do want that, hit RETURN.""

raw_input(""?"")

print ""Opening the file...""
target = open(filename, 'w')

...
</code></pre>",python|python-2.7,"<p>The input is not stored. Here <code>raw_input</code> is used for the purpose of confirmation, so the value of the input is irrelevant; the program is only concerned with waiting until either <kbd>Enter</kbd> or <kbd>Ctrl</kbd><kbd>c</kbd> is pressed.</p>",1
14372485,raw_input() in Python,"<p>A question from my reading of <strong>Learn Python The Hard Way</strong>:</p>

<pre><code>y = raw_input(""Name? "")
</code></pre>

<p>puts the result into variable y.</p>

<p>Then on line 9 in the following code, <strong>raw_input(""?"")</strong>, where does the result go?</p>

<pre><code>from sys import argv

script, filename = argv

print ""We're going to erase %r."" % filename
print ""If you don't want that, hit CTRL-C (^C).""
print ""If you do want that, hit RETURN.""

raw_input(""?"")

print ""Opening the file...""
target = open(filename, 'w')

...
</code></pre>",python|python-2.7,"<p>To put it simply, it doesn't get stored - control-C (<code>^C</code>) gets the interpreter to stop doing what it's doing, and exits. If you type anything else at the question mark (and of course press <code>Enter</code>), the program will run. The <code>raw_input</code> is there only to wait for user input.</p>",3
14359906,Horizontal scrolling won't activate for ttk Treeview widget,"<p>I'm using the ttk Treeview widget to implement a folder/path selection dialog.  It's all working as expected except that my horizontal scrollbar won't activate.  No matter how wide the folder path goes horizontally, and no matter how narrow the window, the horizontal slider never appears.  Vertical scrolling is working perfectly though.</p>

<p>I'm figuring it's either some kind of limitation when you only use one column in the treeview, or just a newbie mistake with configuring and connecting the widgets.  I'd bet on the latter.</p>

<p>Example with dialog widened to show full folder depth:</p>

<p><img src=""https://i.stack.imgur.com/PlrT1.jpg"" alt=""full width""></p>

<p>Dialog narrowed to the point where horizontal scrolling should activate (but doesn't):</p>

<p><img src=""https://i.stack.imgur.com/nnpxL.jpg"" alt=""narrowed width""></p>

<p>Here's my GUI layout code:</p>

<pre><code>winDirSel = tk.Toplevel()
winDirSel.title('Select Test Directory...')
tvwDirSel = ttk.Treeview(winDirSel,
                         height=10,padding=3,
                         show='tree')
lblTestDir = tk.Label(winDirSel, relief=tk.SUNKEN,
                      justify=tk.LEFT, anchor=tk.W,
                      textvariable=ctrlTestDir,width=80)
scbHDirSel = ttk.Scrollbar(winDirSel,
                           orient=tk.HORIZONTAL,
                           command=tvwDirSel.xview)
scbVDirSel = ttk.Scrollbar(winDirSel,
                           orient=tk.VERTICAL,
                           command=tvwDirSel.yview)
tvwDirSel.configure(xscrollcommand=scbHDirSel.set,
                    yscrollcommand=scbVDirSel.set)
lblTestDir.grid(row=0,column=0,sticky=tk.EW)
tvwDirSel.grid(row=1,column=0,sticky=tk.NSEW)
scbVDirSel.grid(row=1,column=1,sticky=tk.NS)
scbHDirSel.grid(row=2,column=0,sticky=tk.EW)
winDirSel.rowconfigure(1,weight=1)
winDirSel.columnconfigure(0,weight=1)
</code></pre>",python-2.7|treeview|tkinter|scrollbar|ttk,"<p>OK, after some playing with <code>minwidth</code> and <code>stretch</code>, I think I have a better handle on it.  The horizontal scrolling is triggered by the <strong>column-edge</strong> going out of the window's bounds, not the content of the column.  So you can use these parameters to force the column to be wider and thus force the scrolling.</p>

<p>The problem though is that you then lose the automatic adjustment of the column width to suit the width of the tree itself.  You either have to force it very wide to accommodate any (assumed) likely folder depth, or you live with folder names getting truncated at the right boundary of the column.</p>

<p>So bottom line:  it's just a limitation of the widget itself.  (At least with respect to its behavior on my platform, MS Windows.)</p>",10
14359906,Horizontal scrolling won't activate for ttk Treeview widget,"<p>I'm using the ttk Treeview widget to implement a folder/path selection dialog.  It's all working as expected except that my horizontal scrollbar won't activate.  No matter how wide the folder path goes horizontally, and no matter how narrow the window, the horizontal slider never appears.  Vertical scrolling is working perfectly though.</p>

<p>I'm figuring it's either some kind of limitation when you only use one column in the treeview, or just a newbie mistake with configuring and connecting the widgets.  I'd bet on the latter.</p>

<p>Example with dialog widened to show full folder depth:</p>

<p><img src=""https://i.stack.imgur.com/PlrT1.jpg"" alt=""full width""></p>

<p>Dialog narrowed to the point where horizontal scrolling should activate (but doesn't):</p>

<p><img src=""https://i.stack.imgur.com/nnpxL.jpg"" alt=""narrowed width""></p>

<p>Here's my GUI layout code:</p>

<pre><code>winDirSel = tk.Toplevel()
winDirSel.title('Select Test Directory...')
tvwDirSel = ttk.Treeview(winDirSel,
                         height=10,padding=3,
                         show='tree')
lblTestDir = tk.Label(winDirSel, relief=tk.SUNKEN,
                      justify=tk.LEFT, anchor=tk.W,
                      textvariable=ctrlTestDir,width=80)
scbHDirSel = ttk.Scrollbar(winDirSel,
                           orient=tk.HORIZONTAL,
                           command=tvwDirSel.xview)
scbVDirSel = ttk.Scrollbar(winDirSel,
                           orient=tk.VERTICAL,
                           command=tvwDirSel.yview)
tvwDirSel.configure(xscrollcommand=scbHDirSel.set,
                    yscrollcommand=scbVDirSel.set)
lblTestDir.grid(row=0,column=0,sticky=tk.EW)
tvwDirSel.grid(row=1,column=0,sticky=tk.NSEW)
scbVDirSel.grid(row=1,column=1,sticky=tk.NS)
scbHDirSel.grid(row=2,column=0,sticky=tk.EW)
winDirSel.rowconfigure(1,weight=1)
winDirSel.columnconfigure(0,weight=1)
</code></pre>",python-2.7|treeview|tkinter|scrollbar|ttk,"<p>Here's what I finally came up with to display a <code>TreeView</code> of files which are lazy-loaded (thanks to <a href=""https://stackoverflow.com/a/16748186/253127"">this answer</a>) which is inside a <code>PanedWindow</code> (SplitterWindow in wxPython terms) along with a <code>Notebook</code>. The scrollbars are auto-displayed/hidden as needed, thanks to <a href=""http://svn.python.org/projects/stackless/trunk/Demo/tkinter/ttk/dirbrowser.py"" rel=""nofollow noreferrer"">this example</a>.</p>

<pre><code>import os
import Tkinter as tk
import ttk as ttk
from ScrolledText import ScrolledText

class App(object):
    def __init__(self, master, path):
        splitter = tk.PanedWindow(master, orient=tk.HORIZONTAL)
        # left-side
        frame_left = tk.Frame(splitter)
        self.tree = ttk.Treeview(frame_left, show='tree')
        ysb = ttk.Scrollbar(frame_left, orient='vertical', command=self.tree.yview)
        xsb = ttk.Scrollbar(frame_left, orient='horizontal', command=self.tree.xview)
        # right-side
        frame_right = tk.Frame(splitter)
        nb = ttk.Notebook(frame_right)
        page1 = ttk.Frame(nb)
        page2 = ttk.Frame(nb)
        text = ScrolledText(page2)

        # overall layout
        splitter.add(frame_left)
        splitter.add(frame_right)
        splitter.pack(fill=tk.BOTH, expand=1)
        # left-side widget layout
        self.tree.grid(row=0, column=0, sticky='NSEW')
        ysb.grid(row=0, column=1, sticky='ns')
        xsb.grid(row=1, column=0, sticky='ew')
        # left-side frame's grid config
        frame_left.columnconfigure(0, weight=1)
        frame_left.rowconfigure(0, weight=1)
        # right-side widget layout
        text.pack(expand=1, fill=""both"")
        nb.add(page1, text='One')
        nb.add(page2, text='Two')
        nb.pack(expand=1, fill=""both"")

        # setup
        self.tree.configure(yscrollcommand=lambda f, l:self.autoscroll(ysb,f,l), xscrollcommand=lambda f, l:self.autoscroll(xsb,f,l))
        # use this line instead of the previous, if you want the scroll bars to always be present, but grey-out when uneeded instead of disappearing
        #self.tree.configure(yscrollcommand=ysb.set, xscrollcommand=xsb.set)
        self.tree.heading('#0', text='Project tree', anchor='w')
        self.tree.column(""#0"",minwidth=1080, stretch=True)
        # add default tree node
        abspath = os.path.abspath(path)
        self.nodes = dict()
        self.insert_node('', abspath, abspath)
        self.tree.bind('&lt;&lt;TreeviewOpen&gt;&gt;', self.open_node)

    def autoscroll(self, sbar, first, last):
        """"""Hide and show scrollbar as needed.""""""
        first, last = float(first), float(last)
        if first &lt;= 0 and last &gt;= 1:
            sbar.grid_remove()
        else:
            sbar.grid()
        sbar.set(first, last)

    def insert_node(self, parent, text, abspath):
        node = self.tree.insert(parent, 'end', text=text, open=False)
        if os.path.isdir(abspath):
            self.nodes[node] = abspath
            self.tree.insert(node, 'end')

    def open_node(self, event):
        node = self.tree.focus()
        abspath = self.nodes.pop(node, None)
        if abspath:
            self.tree.delete(self.tree.get_children(node))
            for p in os.listdir(abspath):
                self.insert_node(node, p, os.path.join(abspath, p))


if __name__ == '__main__':
    root = tk.Tk()
    root.geometry(""800x600"")
    app = App(root, path='.')
    root.mainloop()
</code></pre>",3
14359906,Horizontal scrolling won't activate for ttk Treeview widget,"<p>I'm using the ttk Treeview widget to implement a folder/path selection dialog.  It's all working as expected except that my horizontal scrollbar won't activate.  No matter how wide the folder path goes horizontally, and no matter how narrow the window, the horizontal slider never appears.  Vertical scrolling is working perfectly though.</p>

<p>I'm figuring it's either some kind of limitation when you only use one column in the treeview, or just a newbie mistake with configuring and connecting the widgets.  I'd bet on the latter.</p>

<p>Example with dialog widened to show full folder depth:</p>

<p><img src=""https://i.stack.imgur.com/PlrT1.jpg"" alt=""full width""></p>

<p>Dialog narrowed to the point where horizontal scrolling should activate (but doesn't):</p>

<p><img src=""https://i.stack.imgur.com/nnpxL.jpg"" alt=""narrowed width""></p>

<p>Here's my GUI layout code:</p>

<pre><code>winDirSel = tk.Toplevel()
winDirSel.title('Select Test Directory...')
tvwDirSel = ttk.Treeview(winDirSel,
                         height=10,padding=3,
                         show='tree')
lblTestDir = tk.Label(winDirSel, relief=tk.SUNKEN,
                      justify=tk.LEFT, anchor=tk.W,
                      textvariable=ctrlTestDir,width=80)
scbHDirSel = ttk.Scrollbar(winDirSel,
                           orient=tk.HORIZONTAL,
                           command=tvwDirSel.xview)
scbVDirSel = ttk.Scrollbar(winDirSel,
                           orient=tk.VERTICAL,
                           command=tvwDirSel.yview)
tvwDirSel.configure(xscrollcommand=scbHDirSel.set,
                    yscrollcommand=scbVDirSel.set)
lblTestDir.grid(row=0,column=0,sticky=tk.EW)
tvwDirSel.grid(row=1,column=0,sticky=tk.NSEW)
scbVDirSel.grid(row=1,column=1,sticky=tk.NS)
scbHDirSel.grid(row=2,column=0,sticky=tk.EW)
winDirSel.rowconfigure(1,weight=1)
winDirSel.columnconfigure(0,weight=1)
</code></pre>",python-2.7|treeview|tkinter|scrollbar|ttk,"<pre><code>import tkinter as tk
import tkinter.ttk as ttk
import tkinter.font as tk_font

class TreeListBox:

    def __init__(self, master, root, dict_group):
        self.master = master
        self.root = root
        self.dict_group = dict_group
        self.level = 0
        self.setup_widget_tree()
        self.build_tree(self.root, '')

    def setup_widget_tree(self):
        container_tree = tk.Frame(self.master, width=250, height=300)
        container_tree.propagate(False)
        container_tree.pack(side=""left"", fill='y')
        self.tree = ttk.Treeview(container_tree, show=""tree"", selectmode='browse')
        fr_y = tk.Frame(container_tree)
        fr_y.pack(side='right', fill='y')
        tk.Label(fr_y, borderwidth=1, relief='raised', font=""Arial 8"").pack(side='bottom', fill='x')
        sb_y = tk.Scrollbar(fr_y, orient=""vertical"", command=self.tree.yview)
        sb_y.pack(expand='yes', fill='y')
        fr_x = tk.Frame(container_tree)
        fr_x.pack(side='bottom', fill='x')
        sb_x = tk.Scrollbar(fr_x, orient=""horizontal"", command=self.tree.xview)
        sb_x.pack(expand='yes', fill='x')
        self.tree.configure(yscrollcommand=sb_y.set, xscrollcommand=sb_x.set)
        self.tree.pack(fill='both', expand='yes')

    def build_tree(self, parent, id_stroki):
        self.level += 1
        id = self.tree.insert(id_stroki, 'end', text=parent)
        # -----------------
        col_w = tk_font.Font().measure(parent)
        if col_w &gt; 1000:
            col_w -= 400
        elif col_w &gt; 500:
            col_w -= 200
        elif col_w &gt; 300:
            col_w -= 100
        col_w = col_w + 25 * self.level
        if col_w &gt; self.tree.column('#0', 'width'):
            self.tree.column('#0', width=col_w)
        # -----------------
        for element in sorted(self.dict_group[parent]):
            self.build_tree(element, id)
        self.level -= 1

if __name__ == '__main__':
    dict_group = {'Nomenclature': ['ABC1', 'ABC2'],
                  'ABC1': ['ABC3', 'ABC4'],
                  'ABC2': ['ABC5'],
                  'ABC3': ['ABC______________________________________6'],
                  'ABC4': ['ABC--------------------------------------8'],
                  'ABC5': ['ABC######################################9'],
                  'ABC______________________________________6': [],
                  'ABC--------------------------------------8': [],
                  'ABC######################################9': []
                  }
    root = tk.Tk()
    myTest = TreeListBox(root, 'Nomenclature', dict_group)
    root.mainloop()
</code></pre>",2
33929317,"""Expected string or buffer"" error using Beautiful Soup","<p>I'm trying a code that will pull numbers from a URL using Beautiful Soup, then sum these numbers, but I keep getting an error that looks like this:</p>

<blockquote>
  <p>Expected string or buffer</p>
</blockquote>

<p>I think it's related to the regular expressions, but I can't pinpoint the problem.</p>

<pre><code>import re
import urllib

from BeautifulSoup import *
htm1 = urllib.urlopen('https://pr4e.dr-chuck.com/tsugi/mod/python-data/data/comments_42.html').read()
soup = BeautifulSoup(htm1)
tags = soup('span')

for tag in tags:
    y = re.findall ('([0-9]+)',tag.txt)

print sum(y)
</code></pre>",python|regex|beautifulsoup,"<p>I recommend <code>bs4</code> instead of <code>BeautifulSoup</code> (which is the old version). You also need to change this line:</p>

<pre><code>y = re.findall ('([0-9]+)',tag)
</code></pre>

<p>to something like this:</p>

<pre><code>y = re.findall ('([0-9]+)',tag.text)
</code></pre>

<p>See if this gets you further:</p>

<pre><code>sum = 0  #initialize the sum
for tag in tags:
    y = re.findall ('([0-9]+)',tag.text)  #get the text from the tag                                                                                                                                    
    print(y[0])  #y is a list, print the first element of the list                                                                                                                                      
    sum += int(y[0])  #convert it to an integer and add it to the sum                                                                                                                                   

print('the sum is: {}'.format(sum))
</code></pre>",1
34133309,python regex for extracting data without,"<p>Following is my input file </p>

<p>input.txt</p>

<pre><code>min=1310ns median=1344ns max=1399ns first=2280ns
min=1293ns median=1331ns max=18400ns first=2284ns
min=1277ns median=1302ns max=1346ns first=2363ns
</code></pre>

<p>my python code </p>

<pre><code>import re

input_file = open(""input.txt"", ""r"")
output_file = open(""output.data"", ""w"")

for line in input_file:
    match_defines = re.match(r'\s*min=([0-9]+)', line) # works fine
    match_defines = re.match(r'\s*min=([0-9]+) median=([0-9]+) max=([0-9]+) first=([0-9]+)', line) # this doesn't work. 

    if match_defines:
        newline1= ""\n %s\t%s\t%s\t%s\n"" % (match_defines.group(1), match_defines.group(2), match_defines.group(3), match_defines.group(4))
    output_file.write(newline1)

    else:
        output_file.write(line)
</code></pre>

<p>My expected result is </p>

<pre><code>1310   1344   1399   2280
1293   1331   18400  2284
1277   1302   1346   2363
</code></pre>

<p>How do i modify my regex to get this. </p>

<p>Thanks for your answers. </p>",python|regex,"<p>You forgot to add <code>ns</code> in the regex:</p>

<pre><code>\s*min=([0-9]+)ns median=([0-9]+)ns max=([0-9]+)ns first=([0-9]+)
               ^^                ^^             ^^
</code></pre>

<p>See <a href=""https://regex101.com/r/tT8nH8/1"" rel=""nofollow"">regex demo</a></p>

<p>I suggest using named capture groups to make it easier to access the captures and perhaps use <code>\s+</code> instead of literal spaces:</p>

<pre><code>\s*min=(?P&lt;min&gt;[0-9]+)ns\s+median=(?P&lt;median&gt;[0-9]+)ns\s+max=(?P&lt;max&gt;[0-9]+)ns\s+first=(?P&lt;first&gt;[0-9]+)
</code></pre>

<p>See <a href=""https://regex101.com/r/tT8nH8/3"" rel=""nofollow"">another demo</a></p>",1
34097228,Making np.loadtxt work with multiple possible delimiters,"<p>I have a program that reads in data files and the user selects which column they want to use. I want it to be more universal with input files; sometimes, columns can look like this:</p>

<pre><code>10:34:24.58  8.284  6.121
</code></pre>

<p>And sometimes they can look like this:</p>

<pre><code>10 34 24.58  8.284  6.121
</code></pre>

<p>I want the program to recognize this as 5 columns in BOTH cases, instead of 5 columns for the first and 3 for the second. Basically, I want it to recognize <code>white space</code> as a delimiter and <code>:</code> as a delimiter as well.</p>

<p>Is there a simple way to do this? I know numpy takes a delimiter command, but as far as I'm aware it can only use one.</p>",python|numpy,"<p>Thanks to the answer above, but I believe I've found a workaround that allows for a simple two-line solution, without modifying the rest of my program.</p>

<p>The initial loadtxt line looked like this:</p>

<pre><code>import numpy as np
...
data = np.loadtxt(filename,skiprows=header,dtype=str)
</code></pre>

<p>By utilizing StringIO, we can simply read the file and replace every instance of <code>':'</code> with <code>"" ""</code>, without having to modify any of the other code.</p>

<pre><code>import numpy as np
import StringIO
...
s = open(filename).read().replace(':',' ')
data = np.loadtxt(StringIO.StringIO(s),skiprows=header,dtype=str)
</code></pre>

<p>I hope this helps someone else!</p>",4
34097228,Making np.loadtxt work with multiple possible delimiters,"<p>I have a program that reads in data files and the user selects which column they want to use. I want it to be more universal with input files; sometimes, columns can look like this:</p>

<pre><code>10:34:24.58  8.284  6.121
</code></pre>

<p>And sometimes they can look like this:</p>

<pre><code>10 34 24.58  8.284  6.121
</code></pre>

<p>I want the program to recognize this as 5 columns in BOTH cases, instead of 5 columns for the first and 3 for the second. Basically, I want it to recognize <code>white space</code> as a delimiter and <code>:</code> as a delimiter as well.</p>

<p>Is there a simple way to do this? I know numpy takes a delimiter command, but as far as I'm aware it can only use one.</p>",python|numpy,"<p><code>np.loadtxt</code> (and <code>genfromtxt</code>) accept any iterable as input as long as it feeds it one line at a time.  So the lines of your file can be passed through a function or generator that massages it in various ways.  Here's a simple example</p>

<p>Define a pair of lines that simulates your file:</p>

<pre><code>In [7]: txt=""""""10:34:24.58  8.284  6.121
   ...: 10 34 24.58  8.284  6.121
   ...: """"""

In [8]: txt=txt.splitlines()

In [9]: txt
Out[9]: ['10:34:24.58  8.284  6.121', '10 34 24.58  8.284  6.121']
</code></pre>

<p>If it weren't for the <code>:</code> I could pass this directly to <code>loadtxt</code>.</p>

<p>But let's pass the lines through a generator that replaces the ':' with a space.  It could be a function (with yield).  Here I'm using one of those new-fangled generator comprehension expressions:</p>

<pre><code>In [10]: np.loadtxt((x.replace(b':',b' ') for x in txt))
Out[10]: 
array([[ 10.   ,  34.   ,  24.58 ,   8.284,   6.121],
       [ 10.   ,  34.   ,  24.58 ,   8.284,   6.121]])
</code></pre>

<p>with a file, this should work (iterating on an open file returns lines):</p>

<pre><code>with open(filename) as f:
    A=np.loadtxt((x.replace(b':',b' ') for x in f))
</code></pre>

<p>regex would be useful for more elaborate replacements.</p>",5
34130648,Error in adding item to a QLayout,"<p>I'm trying to add an item in a QLayout (in PyQT5) as follows:</p>

<pre><code>def add_parts_BC(self):
        """"""This adds a tab with part B and C""""""

        BCVerticalLayout = QVBoxLayout()
        partB = PartB()
        partC = PartC()

        BCVerticalLayout.addWidget(PartB, QtCore.Qt.AlignTop)
        BCVerticalLayout.addWidget(PartC)

        # add the layout to the tabbed widget layout
        self.tabbedWidget.addTab(BCVerticalLayout, ""Part B and C"")
</code></pre>

<p>I then get the following error message:</p>

<pre><code>BCVerticalLayout.addWidget(PartB, QtCore.Qt.AlignTop)
TypeError: QBoxLayout.addWidget(QWidget, int stretch=0, Qt.Alignment alignment=0): argument 1 has unexpected type 'PyQt5.QtCore.pyqtWrapperType'
</code></pre>

<p>I do not know where things are done wrong. Any idea?</p>

<p>By the way, PartA and PartB looks like this:</p>

<pre><code>class PartA(QWidget):
    def __init__(self):
        super().__init__()

    # more code here


class PartB(QWidget):
    def __init__(self):
        super().__init__()

    # more code here
</code></pre>",python|pyqt5,"<p>I believe it's a TYPO error:</p>

<pre><code>partB = PartB() #name of object with lower case p
partC = PartC()

BCVerticalLayout.addWidget(PartB, QtCore.Qt.AlignTop) #name of object with upper case p
</code></pre>

<p>so it should be:</p>

<pre><code>partB = PartB() 
partC = PartC()

BCVerticalLayout.addWidget(partB, QtCore.Qt.AlignTop)  
</code></pre>",1
33989381,Polymer renders a blank page in WAMP or using Python,"<p>I'm new to Polymer and I'm using WAMP to host my Polymer 1.0 project in my local host. I've seen other questions in this topic but none of the answers helped me as I'm still getting blank page with no errors (or warnings) in Chrome browser. The only thing I get is something which looks like a grey bar at the top of the page.</p>

<p>I'm following <a href=""https://www.youtube.com/watch?v=dMtnllatakc&amp;index=3&amp;list=PLPaj_o9gjMYll0sSb47TrzQCjIo5iqQZm"" rel=""nofollow"">this tutorial in Youtube</a>.</p>

<p>I've actually tried that using Python on localhost:8000 and I get the same thing, so I suspect something is wrong with my code.</p>

<p><strong>Note 1:</strong> if I only have a <code>&lt;paper-input&gt;</code> element with its declaration, it works fine.</p>

<p><strong>Note 2:</strong> the code actually worked in the beginning, but as I started to do some experiments(!!!) and then the page started to render blank with no errors! strange!</p>

<p>This is my code:</p>

<pre><code>&lt;!doctype html&gt;
&lt;html&gt;
&lt;head&gt;
&lt;meta charset=""utf-8""&gt;
&lt;title&gt;Untitled Document&lt;/title&gt;

    &lt;script src=""/bower_components/webcomponentsjs/webcomponents.js""&gt;&lt;/script&gt;
    &lt;link rel=""import"" href=""/bower_components/polymer/polymer.html""&gt;
    &lt;link rel=""import"" href=""/bower_components/paper-header-panel/paper-header-panel.html""&gt;
    &lt;link rel=""import"" href=""/bower_components/paper-material/paper-material.html""&gt;
    &lt;link rel=""import"" href=""/bower_components/paper-toolbar/paper-toolbar.html""&gt;
&lt;/head&gt;

&lt;body class=""vertical layout"" style=""background-color: #dddddd;""&gt;
    &lt;paper-header-panel&gt;
        &lt;paper-material style=""background-color: #ffffff;""&gt;
            &lt;paper-toolbar&gt;
                &lt;div&gt;Example My Polymer&lt;/div&gt;
            &lt;/paper-toolbar&gt;

            &lt;h3&gt;This is my content 1&lt;/h3&gt;

            &lt;p&gt;Hello&lt;/p&gt;
        &lt;/paper-material&gt;
    &lt;/paper-header-panel&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>",python|wamp|wampserver|polymer-1.0|web-component,"<p>This is a common issue when using <a href=""https://github.com/PolymerElements/paper-header-panel"" rel=""nofollow"">paper-header-panel</a></p>

<blockquote>
  <p>Important: The paper-header-panel will not display if its parent does not have a height.</p>
</blockquote>

<p>Make your body (the paper-head-panel's parent) take up the full page height:</p>

<pre><code>&lt;body class=""fullbleed""&gt;
</code></pre>",0
34114427,"Django upgrading to 1.9 error ""AppRegistryNotReady: Apps aren't loaded yet.""","<p>When upgraded to django 1.9 from 1.8 I got this error. I checked answers for similar questions, but I didn't think this is an issue with any 3rd party packages or apps.</p>

<pre><code>Traceback (most recent call last):
File ""manage.py"", line 10, in &lt;module&gt; execute_from_command_line(sys.argv)
File ""/home/kishore/.virtualenvs/andone/local/lib/python2.7/site-packages/django/core/management/__init__.py"", line 350, in execute_from_command_line
utility.execute()
File ""/home/kishore/.virtualenvs/andone/local/lib/python2.7/site-packages/django/core/management/__init__.py"", line 342, in execute
self.fetch_command(subcommand).run_from_argv(self.argv)
File ""/home/kishore/.virtualenvs/andone/local/lib/python2.7/site-packages/django/core/management/__init__.py"", line 176, in fetch_command
commands = get_commands()
File ""/home/kishore/.virtualenvs/andone/local/lib/python2.7/site-packages/django/utils/lru_cache.py"", line 100, in wrapper
result = user_function(*args, **kwds)
File ""/home/kishore/.virtualenvs/andone/local/lib/python2.7/site-packages/django/core/management/__init__.py"", line 71, in get_commands
for app_config in reversed(list(apps.get_app_configs())):
File ""/home/kishore/.virtualenvs/andone/local/lib/python2.7/site-packages/django/apps/registry.py"", line 137, in get_app_configs
self.check_apps_ready()
File ""/home/kishore/.virtualenvs/andone/local/lib/python2.7/site-packages/django/apps/registry.py"", line 124, in check_apps_ready
raise AppRegistryNotReady(""Apps aren't loaded yet."")
django.core.exceptions.AppRegistryNotReady: Apps aren't loaded yet.
</code></pre>

<p>I'd modified the Installed apps for 'django.contrib.auth'.</p>",python|django,"<p>For me commenting out</p>

<pre><code>'grappelli.dashboard',
'grappelli',
</code></pre>

<p>in INSTALLED_APPS worked</p>",2
34114427,"Django upgrading to 1.9 error ""AppRegistryNotReady: Apps aren't loaded yet.""","<p>When upgraded to django 1.9 from 1.8 I got this error. I checked answers for similar questions, but I didn't think this is an issue with any 3rd party packages or apps.</p>

<pre><code>Traceback (most recent call last):
File ""manage.py"", line 10, in &lt;module&gt; execute_from_command_line(sys.argv)
File ""/home/kishore/.virtualenvs/andone/local/lib/python2.7/site-packages/django/core/management/__init__.py"", line 350, in execute_from_command_line
utility.execute()
File ""/home/kishore/.virtualenvs/andone/local/lib/python2.7/site-packages/django/core/management/__init__.py"", line 342, in execute
self.fetch_command(subcommand).run_from_argv(self.argv)
File ""/home/kishore/.virtualenvs/andone/local/lib/python2.7/site-packages/django/core/management/__init__.py"", line 176, in fetch_command
commands = get_commands()
File ""/home/kishore/.virtualenvs/andone/local/lib/python2.7/site-packages/django/utils/lru_cache.py"", line 100, in wrapper
result = user_function(*args, **kwds)
File ""/home/kishore/.virtualenvs/andone/local/lib/python2.7/site-packages/django/core/management/__init__.py"", line 71, in get_commands
for app_config in reversed(list(apps.get_app_configs())):
File ""/home/kishore/.virtualenvs/andone/local/lib/python2.7/site-packages/django/apps/registry.py"", line 137, in get_app_configs
self.check_apps_ready()
File ""/home/kishore/.virtualenvs/andone/local/lib/python2.7/site-packages/django/apps/registry.py"", line 124, in check_apps_ready
raise AppRegistryNotReady(""Apps aren't loaded yet."")
django.core.exceptions.AppRegistryNotReady: Apps aren't loaded yet.
</code></pre>

<p>I'd modified the Installed apps for 'django.contrib.auth'.</p>",python|django,"<p>Late to the party, but grappelli was the reason for my error as well. I looked up the compatible version on pypi and that fixed it for me.</p>",-1
34114427,"Django upgrading to 1.9 error ""AppRegistryNotReady: Apps aren't loaded yet.""","<p>When upgraded to django 1.9 from 1.8 I got this error. I checked answers for similar questions, but I didn't think this is an issue with any 3rd party packages or apps.</p>

<pre><code>Traceback (most recent call last):
File ""manage.py"", line 10, in &lt;module&gt; execute_from_command_line(sys.argv)
File ""/home/kishore/.virtualenvs/andone/local/lib/python2.7/site-packages/django/core/management/__init__.py"", line 350, in execute_from_command_line
utility.execute()
File ""/home/kishore/.virtualenvs/andone/local/lib/python2.7/site-packages/django/core/management/__init__.py"", line 342, in execute
self.fetch_command(subcommand).run_from_argv(self.argv)
File ""/home/kishore/.virtualenvs/andone/local/lib/python2.7/site-packages/django/core/management/__init__.py"", line 176, in fetch_command
commands = get_commands()
File ""/home/kishore/.virtualenvs/andone/local/lib/python2.7/site-packages/django/utils/lru_cache.py"", line 100, in wrapper
result = user_function(*args, **kwds)
File ""/home/kishore/.virtualenvs/andone/local/lib/python2.7/site-packages/django/core/management/__init__.py"", line 71, in get_commands
for app_config in reversed(list(apps.get_app_configs())):
File ""/home/kishore/.virtualenvs/andone/local/lib/python2.7/site-packages/django/apps/registry.py"", line 137, in get_app_configs
self.check_apps_ready()
File ""/home/kishore/.virtualenvs/andone/local/lib/python2.7/site-packages/django/apps/registry.py"", line 124, in check_apps_ready
raise AppRegistryNotReady(""Apps aren't loaded yet."")
django.core.exceptions.AppRegistryNotReady: Apps aren't loaded yet.
</code></pre>

<p>I'd modified the Installed apps for 'django.contrib.auth'.</p>",python|django,"<p>Try removing the entire <code>settings.LOGGING</code> dictConfig and restart the server. If that works, rewrite the setting according to the v1.9 documentation.</p>

<p><a href=""https://docs.djangoproject.com/en/1.9/topics/logging/#examples"" rel=""noreferrer"">https://docs.djangoproject.com/en/1.9/topics/logging/#examples</a></p>",5
34114427,"Django upgrading to 1.9 error ""AppRegistryNotReady: Apps aren't loaded yet.""","<p>When upgraded to django 1.9 from 1.8 I got this error. I checked answers for similar questions, but I didn't think this is an issue with any 3rd party packages or apps.</p>

<pre><code>Traceback (most recent call last):
File ""manage.py"", line 10, in &lt;module&gt; execute_from_command_line(sys.argv)
File ""/home/kishore/.virtualenvs/andone/local/lib/python2.7/site-packages/django/core/management/__init__.py"", line 350, in execute_from_command_line
utility.execute()
File ""/home/kishore/.virtualenvs/andone/local/lib/python2.7/site-packages/django/core/management/__init__.py"", line 342, in execute
self.fetch_command(subcommand).run_from_argv(self.argv)
File ""/home/kishore/.virtualenvs/andone/local/lib/python2.7/site-packages/django/core/management/__init__.py"", line 176, in fetch_command
commands = get_commands()
File ""/home/kishore/.virtualenvs/andone/local/lib/python2.7/site-packages/django/utils/lru_cache.py"", line 100, in wrapper
result = user_function(*args, **kwds)
File ""/home/kishore/.virtualenvs/andone/local/lib/python2.7/site-packages/django/core/management/__init__.py"", line 71, in get_commands
for app_config in reversed(list(apps.get_app_configs())):
File ""/home/kishore/.virtualenvs/andone/local/lib/python2.7/site-packages/django/apps/registry.py"", line 137, in get_app_configs
self.check_apps_ready()
File ""/home/kishore/.virtualenvs/andone/local/lib/python2.7/site-packages/django/apps/registry.py"", line 124, in check_apps_ready
raise AppRegistryNotReady(""Apps aren't loaded yet."")
django.core.exceptions.AppRegistryNotReady: Apps aren't loaded yet.
</code></pre>

<p>I'd modified the Installed apps for 'django.contrib.auth'.</p>",python|django,"<p>My problem was that I tried to import a Django model before calling <code>django.setup()</code></p>

<p>This worked for me:</p>

<pre><code>import django
django.setup()

from myapp.models import MyModel
</code></pre>

<p>The above script is in the project root folder.</p>",8
34114427,"Django upgrading to 1.9 error ""AppRegistryNotReady: Apps aren't loaded yet.""","<p>When upgraded to django 1.9 from 1.8 I got this error. I checked answers for similar questions, but I didn't think this is an issue with any 3rd party packages or apps.</p>

<pre><code>Traceback (most recent call last):
File ""manage.py"", line 10, in &lt;module&gt; execute_from_command_line(sys.argv)
File ""/home/kishore/.virtualenvs/andone/local/lib/python2.7/site-packages/django/core/management/__init__.py"", line 350, in execute_from_command_line
utility.execute()
File ""/home/kishore/.virtualenvs/andone/local/lib/python2.7/site-packages/django/core/management/__init__.py"", line 342, in execute
self.fetch_command(subcommand).run_from_argv(self.argv)
File ""/home/kishore/.virtualenvs/andone/local/lib/python2.7/site-packages/django/core/management/__init__.py"", line 176, in fetch_command
commands = get_commands()
File ""/home/kishore/.virtualenvs/andone/local/lib/python2.7/site-packages/django/utils/lru_cache.py"", line 100, in wrapper
result = user_function(*args, **kwds)
File ""/home/kishore/.virtualenvs/andone/local/lib/python2.7/site-packages/django/core/management/__init__.py"", line 71, in get_commands
for app_config in reversed(list(apps.get_app_configs())):
File ""/home/kishore/.virtualenvs/andone/local/lib/python2.7/site-packages/django/apps/registry.py"", line 137, in get_app_configs
self.check_apps_ready()
File ""/home/kishore/.virtualenvs/andone/local/lib/python2.7/site-packages/django/apps/registry.py"", line 124, in check_apps_ready
raise AppRegistryNotReady(""Apps aren't loaded yet."")
django.core.exceptions.AppRegistryNotReady: Apps aren't loaded yet.
</code></pre>

<p>I'd modified the Installed apps for 'django.contrib.auth'.</p>",python|django,"<p>I get that error when i try to run:</p>

<pre><code>python manage.py makemigrations
</code></pre>

<p>i tried so many things and realized that i added some references to ""settings.py"" - ""INSTALLED_APPS""</p>

<p>Just be sure what you write there is correct. My mistake was "".model."" instead of "".app.""</p>

<p>Corrected that mistake and it's working now.</p>",0
34114427,"Django upgrading to 1.9 error ""AppRegistryNotReady: Apps aren't loaded yet.""","<p>When upgraded to django 1.9 from 1.8 I got this error. I checked answers for similar questions, but I didn't think this is an issue with any 3rd party packages or apps.</p>

<pre><code>Traceback (most recent call last):
File ""manage.py"", line 10, in &lt;module&gt; execute_from_command_line(sys.argv)
File ""/home/kishore/.virtualenvs/andone/local/lib/python2.7/site-packages/django/core/management/__init__.py"", line 350, in execute_from_command_line
utility.execute()
File ""/home/kishore/.virtualenvs/andone/local/lib/python2.7/site-packages/django/core/management/__init__.py"", line 342, in execute
self.fetch_command(subcommand).run_from_argv(self.argv)
File ""/home/kishore/.virtualenvs/andone/local/lib/python2.7/site-packages/django/core/management/__init__.py"", line 176, in fetch_command
commands = get_commands()
File ""/home/kishore/.virtualenvs/andone/local/lib/python2.7/site-packages/django/utils/lru_cache.py"", line 100, in wrapper
result = user_function(*args, **kwds)
File ""/home/kishore/.virtualenvs/andone/local/lib/python2.7/site-packages/django/core/management/__init__.py"", line 71, in get_commands
for app_config in reversed(list(apps.get_app_configs())):
File ""/home/kishore/.virtualenvs/andone/local/lib/python2.7/site-packages/django/apps/registry.py"", line 137, in get_app_configs
self.check_apps_ready()
File ""/home/kishore/.virtualenvs/andone/local/lib/python2.7/site-packages/django/apps/registry.py"", line 124, in check_apps_ready
raise AppRegistryNotReady(""Apps aren't loaded yet."")
django.core.exceptions.AppRegistryNotReady: Apps aren't loaded yet.
</code></pre>

<p>I'd modified the Installed apps for 'django.contrib.auth'.</p>",python|django,"<p>In my case, the error occurred when I made <code>python manage.py makemigrations</code> on <code>Django 2.0.6</code>. </p>

<p>The solution was to run <code>python manage.py runserver</code> and see the actual error (which was just a missing environment variable).</p>",10
34114427,"Django upgrading to 1.9 error ""AppRegistryNotReady: Apps aren't loaded yet.""","<p>When upgraded to django 1.9 from 1.8 I got this error. I checked answers for similar questions, but I didn't think this is an issue with any 3rd party packages or apps.</p>

<pre><code>Traceback (most recent call last):
File ""manage.py"", line 10, in &lt;module&gt; execute_from_command_line(sys.argv)
File ""/home/kishore/.virtualenvs/andone/local/lib/python2.7/site-packages/django/core/management/__init__.py"", line 350, in execute_from_command_line
utility.execute()
File ""/home/kishore/.virtualenvs/andone/local/lib/python2.7/site-packages/django/core/management/__init__.py"", line 342, in execute
self.fetch_command(subcommand).run_from_argv(self.argv)
File ""/home/kishore/.virtualenvs/andone/local/lib/python2.7/site-packages/django/core/management/__init__.py"", line 176, in fetch_command
commands = get_commands()
File ""/home/kishore/.virtualenvs/andone/local/lib/python2.7/site-packages/django/utils/lru_cache.py"", line 100, in wrapper
result = user_function(*args, **kwds)
File ""/home/kishore/.virtualenvs/andone/local/lib/python2.7/site-packages/django/core/management/__init__.py"", line 71, in get_commands
for app_config in reversed(list(apps.get_app_configs())):
File ""/home/kishore/.virtualenvs/andone/local/lib/python2.7/site-packages/django/apps/registry.py"", line 137, in get_app_configs
self.check_apps_ready()
File ""/home/kishore/.virtualenvs/andone/local/lib/python2.7/site-packages/django/apps/registry.py"", line 124, in check_apps_ready
raise AppRegistryNotReady(""Apps aren't loaded yet."")
django.core.exceptions.AppRegistryNotReady: Apps aren't loaded yet.
</code></pre>

<p>I'd modified the Installed apps for 'django.contrib.auth'.</p>",python|django,"<p>In the ""admin"" module of your app package, do register all the databases created in ""models"" module of the package.</p>

<p>Suppose you have a database class defined in ""models"" module as:</p>

<pre><code>class myDb1(models.Model):
    someField= models.Charfiled(max_length=100)
</code></pre>

<p>so you must register this in the admin module as:</p>

<pre><code>from .models import myDb1
admin.site.register(myDb1)
</code></pre>

<p>I hope this resolve the error.</p>",-2
34114427,"Django upgrading to 1.9 error ""AppRegistryNotReady: Apps aren't loaded yet.""","<p>When upgraded to django 1.9 from 1.8 I got this error. I checked answers for similar questions, but I didn't think this is an issue with any 3rd party packages or apps.</p>

<pre><code>Traceback (most recent call last):
File ""manage.py"", line 10, in &lt;module&gt; execute_from_command_line(sys.argv)
File ""/home/kishore/.virtualenvs/andone/local/lib/python2.7/site-packages/django/core/management/__init__.py"", line 350, in execute_from_command_line
utility.execute()
File ""/home/kishore/.virtualenvs/andone/local/lib/python2.7/site-packages/django/core/management/__init__.py"", line 342, in execute
self.fetch_command(subcommand).run_from_argv(self.argv)
File ""/home/kishore/.virtualenvs/andone/local/lib/python2.7/site-packages/django/core/management/__init__.py"", line 176, in fetch_command
commands = get_commands()
File ""/home/kishore/.virtualenvs/andone/local/lib/python2.7/site-packages/django/utils/lru_cache.py"", line 100, in wrapper
result = user_function(*args, **kwds)
File ""/home/kishore/.virtualenvs/andone/local/lib/python2.7/site-packages/django/core/management/__init__.py"", line 71, in get_commands
for app_config in reversed(list(apps.get_app_configs())):
File ""/home/kishore/.virtualenvs/andone/local/lib/python2.7/site-packages/django/apps/registry.py"", line 137, in get_app_configs
self.check_apps_ready()
File ""/home/kishore/.virtualenvs/andone/local/lib/python2.7/site-packages/django/apps/registry.py"", line 124, in check_apps_ready
raise AppRegistryNotReady(""Apps aren't loaded yet."")
django.core.exceptions.AppRegistryNotReady: Apps aren't loaded yet.
</code></pre>

<p>I'd modified the Installed apps for 'django.contrib.auth'.</p>",python|django,"<p>I tried tons of things, but only downgrading Django to 1.8.18 fixed this issue for me:</p>

<pre><code>pip install django==1.8.18
</code></pre>

<p>It is one of the installed apps that is failing, but I could not find which one.</p>",0
34114427,"Django upgrading to 1.9 error ""AppRegistryNotReady: Apps aren't loaded yet.""","<p>When upgraded to django 1.9 from 1.8 I got this error. I checked answers for similar questions, but I didn't think this is an issue with any 3rd party packages or apps.</p>

<pre><code>Traceback (most recent call last):
File ""manage.py"", line 10, in &lt;module&gt; execute_from_command_line(sys.argv)
File ""/home/kishore/.virtualenvs/andone/local/lib/python2.7/site-packages/django/core/management/__init__.py"", line 350, in execute_from_command_line
utility.execute()
File ""/home/kishore/.virtualenvs/andone/local/lib/python2.7/site-packages/django/core/management/__init__.py"", line 342, in execute
self.fetch_command(subcommand).run_from_argv(self.argv)
File ""/home/kishore/.virtualenvs/andone/local/lib/python2.7/site-packages/django/core/management/__init__.py"", line 176, in fetch_command
commands = get_commands()
File ""/home/kishore/.virtualenvs/andone/local/lib/python2.7/site-packages/django/utils/lru_cache.py"", line 100, in wrapper
result = user_function(*args, **kwds)
File ""/home/kishore/.virtualenvs/andone/local/lib/python2.7/site-packages/django/core/management/__init__.py"", line 71, in get_commands
for app_config in reversed(list(apps.get_app_configs())):
File ""/home/kishore/.virtualenvs/andone/local/lib/python2.7/site-packages/django/apps/registry.py"", line 137, in get_app_configs
self.check_apps_ready()
File ""/home/kishore/.virtualenvs/andone/local/lib/python2.7/site-packages/django/apps/registry.py"", line 124, in check_apps_ready
raise AppRegistryNotReady(""Apps aren't loaded yet."")
django.core.exceptions.AppRegistryNotReady: Apps aren't loaded yet.
</code></pre>

<p>I'd modified the Installed apps for 'django.contrib.auth'.</p>",python|django,"<p>I put the <code>User</code> import into the <code>settings</code> file for managing the rest call token like this </p>

<pre><code># settings.py
from django.contrib.auth.models import User
def jwt_get_username_from_payload_handler(payload):
   ....

JWT_AUTH = {
    'JWT_PAYLOAD_GET_USERNAME_HANDLER': jwt_get_username_from_payload_handler,
    'JWT_PUBLIC_KEY': PUBLIC_KEY,
    'JWT_ALGORITHM': 'RS256',
    'JWT_AUDIENCE': API_IDENTIFIER,
    'JWT_ISSUER': JWT_ISSUER,
    'JWT_AUTH_HEADER_PREFIX': 'Bearer',
}
REST_FRAMEWORK = {
    'DEFAULT_PERMISSION_CLASSES': (
        'rest_framework.permissions.IsAuthenticated',
    ),
    'DEFAULT_AUTHENTICATION_CLASSES': (
       'rest_framework_jwt.authentication.JSONWebTokenAuthentication',
    ),
}
</code></pre>

<p>Because at that moment, Django libs are not ready yet. Therefore, I put the <code>import</code> inside the function and it started to work. The function needs to be called after the server is started </p>",0
34114427,"Django upgrading to 1.9 error ""AppRegistryNotReady: Apps aren't loaded yet.""","<p>When upgraded to django 1.9 from 1.8 I got this error. I checked answers for similar questions, but I didn't think this is an issue with any 3rd party packages or apps.</p>

<pre><code>Traceback (most recent call last):
File ""manage.py"", line 10, in &lt;module&gt; execute_from_command_line(sys.argv)
File ""/home/kishore/.virtualenvs/andone/local/lib/python2.7/site-packages/django/core/management/__init__.py"", line 350, in execute_from_command_line
utility.execute()
File ""/home/kishore/.virtualenvs/andone/local/lib/python2.7/site-packages/django/core/management/__init__.py"", line 342, in execute
self.fetch_command(subcommand).run_from_argv(self.argv)
File ""/home/kishore/.virtualenvs/andone/local/lib/python2.7/site-packages/django/core/management/__init__.py"", line 176, in fetch_command
commands = get_commands()
File ""/home/kishore/.virtualenvs/andone/local/lib/python2.7/site-packages/django/utils/lru_cache.py"", line 100, in wrapper
result = user_function(*args, **kwds)
File ""/home/kishore/.virtualenvs/andone/local/lib/python2.7/site-packages/django/core/management/__init__.py"", line 71, in get_commands
for app_config in reversed(list(apps.get_app_configs())):
File ""/home/kishore/.virtualenvs/andone/local/lib/python2.7/site-packages/django/apps/registry.py"", line 137, in get_app_configs
self.check_apps_ready()
File ""/home/kishore/.virtualenvs/andone/local/lib/python2.7/site-packages/django/apps/registry.py"", line 124, in check_apps_ready
raise AppRegistryNotReady(""Apps aren't loaded yet."")
django.core.exceptions.AppRegistryNotReady: Apps aren't loaded yet.
</code></pre>

<p>I'd modified the Installed apps for 'django.contrib.auth'.</p>",python|django,"<p>As others have said this can be caused when you've not installed an app that is listed in <code>INSTALLED_APPS</code>.</p>

<p>In my case, <code>manage.py</code> was attempting to log the exception, which led to an attempt to render it which failed due to the app not being initialized yet. By 
commenting out the <code>except</code> clause in <code>manage.py</code> the exception was displayed without special rendering, avoiding the confusing error.</p>

<pre><code># Temporarily commenting out the log statement.
#try:
    execute_from_command_line(sys.argv)
#except Exception as e:
#    log.error('Admin Command Error: %s', ' '.join(sys.argv), exc_info=sys.exc_info())
#    raise e
</code></pre>",0
34114427,"Django upgrading to 1.9 error ""AppRegistryNotReady: Apps aren't loaded yet.""","<p>When upgraded to django 1.9 from 1.8 I got this error. I checked answers for similar questions, but I didn't think this is an issue with any 3rd party packages or apps.</p>

<pre><code>Traceback (most recent call last):
File ""manage.py"", line 10, in &lt;module&gt; execute_from_command_line(sys.argv)
File ""/home/kishore/.virtualenvs/andone/local/lib/python2.7/site-packages/django/core/management/__init__.py"", line 350, in execute_from_command_line
utility.execute()
File ""/home/kishore/.virtualenvs/andone/local/lib/python2.7/site-packages/django/core/management/__init__.py"", line 342, in execute
self.fetch_command(subcommand).run_from_argv(self.argv)
File ""/home/kishore/.virtualenvs/andone/local/lib/python2.7/site-packages/django/core/management/__init__.py"", line 176, in fetch_command
commands = get_commands()
File ""/home/kishore/.virtualenvs/andone/local/lib/python2.7/site-packages/django/utils/lru_cache.py"", line 100, in wrapper
result = user_function(*args, **kwds)
File ""/home/kishore/.virtualenvs/andone/local/lib/python2.7/site-packages/django/core/management/__init__.py"", line 71, in get_commands
for app_config in reversed(list(apps.get_app_configs())):
File ""/home/kishore/.virtualenvs/andone/local/lib/python2.7/site-packages/django/apps/registry.py"", line 137, in get_app_configs
self.check_apps_ready()
File ""/home/kishore/.virtualenvs/andone/local/lib/python2.7/site-packages/django/apps/registry.py"", line 124, in check_apps_ready
raise AppRegistryNotReady(""Apps aren't loaded yet."")
django.core.exceptions.AppRegistryNotReady: Apps aren't loaded yet.
</code></pre>

<p>I'd modified the Installed apps for 'django.contrib.auth'.</p>",python|django,"<p>This issue is also observed for inconsistent settings.py for incorrectly writing INSTALLED_APPS, verify if you correctly included apps and separated with "","" .</p>",1
34114427,"Django upgrading to 1.9 error ""AppRegistryNotReady: Apps aren't loaded yet.""","<p>When upgraded to django 1.9 from 1.8 I got this error. I checked answers for similar questions, but I didn't think this is an issue with any 3rd party packages or apps.</p>

<pre><code>Traceback (most recent call last):
File ""manage.py"", line 10, in &lt;module&gt; execute_from_command_line(sys.argv)
File ""/home/kishore/.virtualenvs/andone/local/lib/python2.7/site-packages/django/core/management/__init__.py"", line 350, in execute_from_command_line
utility.execute()
File ""/home/kishore/.virtualenvs/andone/local/lib/python2.7/site-packages/django/core/management/__init__.py"", line 342, in execute
self.fetch_command(subcommand).run_from_argv(self.argv)
File ""/home/kishore/.virtualenvs/andone/local/lib/python2.7/site-packages/django/core/management/__init__.py"", line 176, in fetch_command
commands = get_commands()
File ""/home/kishore/.virtualenvs/andone/local/lib/python2.7/site-packages/django/utils/lru_cache.py"", line 100, in wrapper
result = user_function(*args, **kwds)
File ""/home/kishore/.virtualenvs/andone/local/lib/python2.7/site-packages/django/core/management/__init__.py"", line 71, in get_commands
for app_config in reversed(list(apps.get_app_configs())):
File ""/home/kishore/.virtualenvs/andone/local/lib/python2.7/site-packages/django/apps/registry.py"", line 137, in get_app_configs
self.check_apps_ready()
File ""/home/kishore/.virtualenvs/andone/local/lib/python2.7/site-packages/django/apps/registry.py"", line 124, in check_apps_ready
raise AppRegistryNotReady(""Apps aren't loaded yet."")
django.core.exceptions.AppRegistryNotReady: Apps aren't loaded yet.
</code></pre>

<p>I'd modified the Installed apps for 'django.contrib.auth'.</p>",python|django,"<p>django.setup() in the top will not work while you are running a script explicitly.
My problem solved when I added this in the bottom of the settings file</p>

<pre><code>BASE_DIR = os.path.dirname(os.path.dirname(os.path.abspath(__file__)))
import sys
if BASE_DIR not in sys.path:
    sys.path.append(BASE_DIR)
os.environ['DJANGO_SETTINGS_MODULE'] =  ""igp_lrpe.settings""
os.environ.setdefault(""DJANGO_SETTINGS_MODULE"", ""igp_lrpe.settings"")
import django
django.setup()
</code></pre>",2
