id,title,body,tags,answers,score
46660924,MySQL SET rank over First Column and Second Column,"<p>I'm trying to make a query setting rank column by First and Second column. Like Rank over Partition which doesn't exist MySQL</p>

<p>For example,</p>

<p>From</p>

<pre><code>+----+-------+--------+------+
| id | First | Second | Rank |
+----+-------+--------+------+
|  1 | a     |     10 |      |
|  2 | a     |      9 |      |
|  3 | b     |     10 |      |
|  4 | b     |      7 |      |
|  5 | a     |      1 |      |
|  6 | b     |      1 |      |
+----+-------+--------+------+
</code></pre>

<p>To</p>

<pre><code>+----+-------+--------+------+
| id | First | Second | Rank |
+----+-------+--------+------+
|  1 | a     |     10 |    3 |
|  2 | a     |      9 |    2 |
|  3 | b     |     10 |    3 |
|  4 | b     |      7 |    2 |
|  5 | a     |      1 |    1 |
|  6 | b     |      1 |    1 |
+----+-------+--------+------+
</code></pre>

<p>The Rank doesn't continue. It starts from 1 again when it reaches the last value of 'a' of 'First' column.</p>

<p>And it's gotta be SET not SELECT.
I wouldn't mind using SELECT but my point is I'm not trying to retrieve data from Database but setting values.</p>

<p>Cheers in advance mates.</p>",mysql|set|rank|partition,"<p>One method is a correlated subquery.  For <code>rank()</code> you can do:</p>

<pre><code>select t.*,
       (select count(*) + 1
        from t t2
        where t2.first = t.first and t2.second &lt; t.second
       ) as rank
from t;
</code></pre>

<p>Ranks are tricky to handle with variables (<code>dense_rank()</code> and <code>row_number()</code> are simpler).</p>

<p>EDIT:</p>

<p>This is easy to turn into an <code>update</code>:</p>

<pre><code>update t join
       (select t.*,
               (select count(*) + 1
                from t t2
                where t2.first = t.first and t2.second &lt; t.second
               ) as new_rank
        from t
       ) tt
       on t.id = tt.id
    set t.rank = tt.new_rank;
</code></pre>",0
46660924,MySQL SET rank over First Column and Second Column,"<p>I'm trying to make a query setting rank column by First and Second column. Like Rank over Partition which doesn't exist MySQL</p>

<p>For example,</p>

<p>From</p>

<pre><code>+----+-------+--------+------+
| id | First | Second | Rank |
+----+-------+--------+------+
|  1 | a     |     10 |      |
|  2 | a     |      9 |      |
|  3 | b     |     10 |      |
|  4 | b     |      7 |      |
|  5 | a     |      1 |      |
|  6 | b     |      1 |      |
+----+-------+--------+------+
</code></pre>

<p>To</p>

<pre><code>+----+-------+--------+------+
| id | First | Second | Rank |
+----+-------+--------+------+
|  1 | a     |     10 |    3 |
|  2 | a     |      9 |    2 |
|  3 | b     |     10 |    3 |
|  4 | b     |      7 |    2 |
|  5 | a     |      1 |    1 |
|  6 | b     |      1 |    1 |
+----+-------+--------+------+
</code></pre>

<p>The Rank doesn't continue. It starts from 1 again when it reaches the last value of 'a' of 'First' column.</p>

<p>And it's gotta be SET not SELECT.
I wouldn't mind using SELECT but my point is I'm not trying to retrieve data from Database but setting values.</p>

<p>Cheers in advance mates.</p>",mysql|set|rank|partition,"<pre><code>DROP TABLE IF EXISTS my_table;

CREATE TABLE my_table
(id INT NOT NULL AUTO_INCREMENT PRIMARY KEY
,first CHAR(1) NOT NULL
,second INT NOT NULL
);

INSERT INTO my_table VALUES
(1,'a',10),
(2,'a',9),
(3,'b',10),
(4,'b',7),
(5,'a',1),
(6,'b',1);

SELECT id
     , first
     , second
     , rank 
  FROM 
     ( SELECT x.* 
            , CASE WHEN @prev = first THEN @i:=@i+1 ELSE @i:=1 END rank
            , @prev:=first 
         FROM my_table x
            , (SELECT @prev:=null,@i:=0) vars 
        ORDER 
           BY first
            , second
            , id
     ) a
 ORDER 
    BY id;
+----+-------+--------+------+
| id | first | second | rank |
+----+-------+--------+------+
|  1 | a     |     10 |    3 |
|  2 | a     |      9 |    2 |
|  3 | b     |     10 |    3 |
|  4 | b     |      7 |    2 |
|  5 | a     |      1 |    1 |
|  6 | b     |      1 |    1 |
+----+-------+--------+------+
6 rows in set (0.00 sec)
</code></pre>",0
46660924,MySQL SET rank over First Column and Second Column,"<p>I'm trying to make a query setting rank column by First and Second column. Like Rank over Partition which doesn't exist MySQL</p>

<p>For example,</p>

<p>From</p>

<pre><code>+----+-------+--------+------+
| id | First | Second | Rank |
+----+-------+--------+------+
|  1 | a     |     10 |      |
|  2 | a     |      9 |      |
|  3 | b     |     10 |      |
|  4 | b     |      7 |      |
|  5 | a     |      1 |      |
|  6 | b     |      1 |      |
+----+-------+--------+------+
</code></pre>

<p>To</p>

<pre><code>+----+-------+--------+------+
| id | First | Second | Rank |
+----+-------+--------+------+
|  1 | a     |     10 |    3 |
|  2 | a     |      9 |    2 |
|  3 | b     |     10 |    3 |
|  4 | b     |      7 |    2 |
|  5 | a     |      1 |    1 |
|  6 | b     |      1 |    1 |
+----+-------+--------+------+
</code></pre>

<p>The Rank doesn't continue. It starts from 1 again when it reaches the last value of 'a' of 'First' column.</p>

<p>And it's gotta be SET not SELECT.
I wouldn't mind using SELECT but my point is I'm not trying to retrieve data from Database but setting values.</p>

<p>Cheers in advance mates.</p>",mysql|set|rank|partition,"<p>Came up with a solution which I was looking for.
I'm not sure if these queries are completely safe but so far no harms.</p>

<pre><code>SET @rank = 0, @First = ''
UPDATE 'Table' SET 
rank = IF(@First = First, @rank:= @rank +1, @rank := 1 AND @First := First)
ORDER BY First ASC, Second;
</code></pre>",0
46511252,MySQL-Update-Function Inserts New Row,"<p>I am working on a page updating database-entries. Should work, but it doesn't. Instead of updating data it creates a new entry. </p>

<p><strong>Explanation</strong>: usually the code should let me update the existing entry. That's why I use WHERE c.id='$ceid'. But even though I am updating the entry with ID 15 I then have a new entry with the ID 16.</p>

<pre><code>UPDATE customer AS c SET c.company='$company', 
                                        c.contractnumber='$contractnumber',
                                        c.delivery='$delivery',
                                        c.quit='$quit',
                                        c.unsubscription='$quitdate',
                                        c.alert='$alert' 
                    WHERE c.id='$ceid'
</code></pre>

<p>So the MySQL-query is right so far as it seems. </p>

<p>So the problem must be somewhere else, before or after the query. Most likely it happens before the query as I used to outcomment the if(!emtpy...)-part. But what is it?</p>

<pre><code>    &lt;html&gt;
&lt;head&gt;
&lt;meta charset=""UTF-8""&gt;
&lt;link rel=""stylesheet"" href=""https://www.w3schools.com/w3css/4/w3.css""&gt;
&lt;script type=""text/javascript"" charset=""utf-8"" src=""http://code.jquery.com/jquery-latest.min.js""&gt;&lt;/script&gt;
&lt;/head&gt;
&lt;?
    $link = mysqli_connect(""server"", ""user"", ""pw"", ""db"");
?&gt;
&lt;body&gt;

&lt;h1&gt;Kundenansicht&lt;/h1&gt;
&lt;p&gt;Kundennummer &lt;?php echo $_GET[""id""]; ?&gt;&lt;/p&gt;
&lt;p&gt;&lt;?php echo $_GET[""name""]; echo "" ""; echo $_GET[""surname""]; ?&gt;&lt;/p&gt;
&lt;p&gt;Vertrag &lt;?php echo $_GET[""cid""]; ?&gt;&lt;/p&gt;
&lt;?

$uid = $_GET[""id""];
echo $uid;
echo ""&lt;br&gt;"";
$name = $_GET[""name""];
$surname = $_GET[""surname""];
$cid = $_GET[""cid""];
echo ""CID: "";
echo $cid;
echo ""&lt;br&gt;"";
        if ($link-&gt;connect_error) {
             die(""Connection failed: "" . $link-&gt;connect_error);
        } 
        mysqli_set_charset($link,""utf8"");

        $sql = ""SELECT * FROM customer WHERE id ='"".$cid.""' AND custnumber = '"".$uid.""'"";
        $result = mysqli_query($link,$sql) or die (mysqli_error());
        $row = mysqli_fetch_assoc($result);






?&gt;


      &lt;div id=""AddContract"" class=""w3-container""&gt;
        &lt;form action=""customerview.php?id=&lt;? echo $uid ?&gt;&amp;name=&lt;? echo $name ?&gt;&amp;surname=&lt;? echo $surname ?&gt;""  method=""post""&gt;
            &lt;label&gt;ID&lt;/label&gt; &lt;!-- e.g. PluSStrom--&gt;
            &lt;input class=""w3-input w3-border"" type=""number"" name=""id"" id=""id"" value=""&lt;? echo $row[""id""]; ?&gt;""&gt;
            &lt;label&gt;Anbieter&lt;/label&gt; &lt;!-- e.g. PluSStrom--&gt;
            &lt;input class=""w3-input w3-border"" type=""text"" name=""company"" id=""company"" value=""&lt;? echo $row[""company""]; ?&gt;""&gt;
            &lt;label&gt;Vertragsnummer&lt;/label&gt; &lt;!-- Vertragsnummer--&gt;
            &lt;input class=""w3-input w3-border"" type=""number"" name=""contractnumber"" id=""contractnumber"" value=""&lt;? echo $row[""contractnumber""]; ?&gt;""&gt;   
            &lt;label&gt;Lieferdatum&lt;/label&gt; &lt;!-- Kündigungsfrist in Wochen--&gt;
            &lt;input class=""w3-input w3-border"" type=""date"" name=""deliverydate"" id=""deliverydate"" value=""&lt;? echo $row[""delivery""]; ?&gt;""&gt;                   
            &lt;label&gt;Kündigungsfrist (Wochen)&lt;/label&gt; &lt;!-- Kündigungsfrist in Wochen--&gt;
            &lt;input class=""w3-input w3-border"" type=""number"" name=""quit"" id=""quit"" value=""&lt;? echo $row[""quit""]; ?&gt;""&gt;     
            &lt;label&gt;Kündigungsdatum&lt;/label&gt;
            &lt;input class=""w3-input w3-border"" type=""date"" name=""qdate"" id=""qdate"" value=""&lt;? echo $row[""unsubscription""]; ?&gt;""&gt;
            &lt;input type=""submit"" class='w3-btn w3-black' name=""submit"" value=""Eintragen""&gt;
        &lt;/form&gt;
&lt;?


// Check connection
if($link === false){
    die(""ERROR: Could not connect. "" . mysqli_connect_error());
}

// Escape user inputs for security
$ceid = mysqli_real_escape_string($link, $_POST['id']);
$company = mysqli_real_escape_string($link, $_POST['company']);
$contractnumber = mysqli_real_escape_string($link, $_POST['contractnumber']);
$customernumber = $uid;
$quit = mysqli_real_escape_string($link, $_POST['quit']);
$quitdate = mysqli_real_escape_string($link, $_POST['qdate']);
$delivery = mysqli_real_escape_string($link, $_POST['deliverydate']);
$qd = $quit * 7;

$alert = mysqli_real_escape_string($link, date('Y-m-d', strtotime($quitdate. "" - $qd days"")));

if(isset($_POST['submit']))
{

    if(!empty($customernumber) || !empty($contractnumber) ){
        $sql_upd = ""UPDATE customer AS c SET c.company='$company', 
                                        c.contractnumber='$contractnumber',
                                        c.delivery='$delivery',
                                        c.quit='$quit',
                                        c.unsubscription='$quitdate',
                                        c.alert='$alert' 
                    WHERE c.id='$ceid'"";



            if (mysqli_query($link, $sql_upd)) {
                echo ""Record updated successfully"";
            } else {
                echo ""Error updating record: "" . mysqli_error($link);
            }



    } else {
        echo ""ERROR: Nicht gespeichert. Kundennummer oder Vertragsnummer fehlen!"";
    }



}
// close connection
mysqli_close($link);
?&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>

<p>Btw: I know working with get is not very safe. And the code isn't a beauty as I want to polish later, but struck with the problem above.</p>",php|mysql,"<p>Have solved the problem. First, Ravi was right. Update can't create new entries. And insert did. Because I wanted to move to another page after submitting the form I abused action. Instead of using the update-code on the current page it went to the page referred to in action and added the data through the insert-code on this page. </p>",0
20224168,MYSQL IN statement returning wrong data,"<p>I'm trying to use the MYSQL statement IN to select only the data I need from my table. For example: I have a field that save categories by ID separated by comma (7,1,10,25,20). If I use this code:</p>

<pre><code>SELECT * FROM cancelamento WHERE ( motivos_int_id IN ( 7 ) )
</code></pre>

<p>I get only the rows that start with the number 7. If the data from that row is 8,7,14, for example, it doesn't return any data. Even if I change the code to:</p>

<pre><code>SELECT * FROM cancelamento WHERE ( motivos_int_id IN ( 7,8 ) )
</code></pre>

<p>Am I doing something wrong? I need to fetch all the data that has the number 7, for example, regardless of the order of the number 7.</p>",mysql|sql,"<p>you can use <code>FIND_IN_SET</code></p>

<pre><code>    SELECT * FROM cancelamento WHERE find_in_set(7 , motivos_int_id)
</code></pre>

<p>a little <a href=""http://sqlfiddle.com/#!2/33941/1"" rel=""nofollow"">example here</a></p>",1
20224168,MYSQL IN statement returning wrong data,"<p>I'm trying to use the MYSQL statement IN to select only the data I need from my table. For example: I have a field that save categories by ID separated by comma (7,1,10,25,20). If I use this code:</p>

<pre><code>SELECT * FROM cancelamento WHERE ( motivos_int_id IN ( 7 ) )
</code></pre>

<p>I get only the rows that start with the number 7. If the data from that row is 8,7,14, for example, it doesn't return any data. Even if I change the code to:</p>

<pre><code>SELECT * FROM cancelamento WHERE ( motivos_int_id IN ( 7,8 ) )
</code></pre>

<p>Am I doing something wrong? I need to fetch all the data that has the number 7, for example, regardless of the order of the number 7.</p>",mysql|sql,"<p>First print your motivos_int_id  separate , 
check your id'structure it could be like this one (12,3,4,)
in last there is comma appended , so if this scenerio happend use rtrim() function in php 
and trim your right side comma  and your query is correct . </p>

<blockquote>
  <p>select * from tbl_name where id IN(1,2,3)</p>
</blockquote>",0
48978877,MySQL Query is taking a very long time,"<p>I have a query that takes a list of stations around a given location, and from another table searches for an ID for a row that has the same coordinates as the stations queried, and concatenates all 'Line' columns that have the same ID as the one queried from the second table.</p>

<p>The query looks like this</p>

<pre><code>SELECT Instance,
Namespace, 
Stations.Name, 
Stations.Lat, 
Stations.Lon, 
Temp, 
Humid, 
(SELECT ID FROM transportData.stations WHERE stations.Lat = Stations.Lat AND stations.Lon = Stations.Lon) AS 'StationID',
( 6371 * acos( cos( radians(44.436292) ) * cos( radians( Stations.Lat ) ) * cos( radians( Stations.Lon ) - radians(26.102452) ) + sin( radians(44.436292) ) * sin(radians(Stations.Lat)) ) ) AS distance,
(SELECT GROUP_CONCAT(Line SEPARATOR ';') FROM transportData.timeTables WHERE timeTables.Station = StationID GROUP BY timeTables.Station) AS 'Lines'
FROM `Stations`
WHERE `Namespace` LIKE ""%8"" 
HAVING distance &lt; 0.1
ORDER BY distance
</code></pre>

<p>however, this query, that would return only one station (within a radius of 100 m of the provided coordinates) took 58 seconds to execute.</p>

<p>Any advice on how to optimize this?</p>

<p>EDIT:
The Stations table:</p>

<pre><code>+-----------+---------------+------+-----+---------+-------+
| Field     | Type          | Null | Key | Default | Extra |
+-----------+---------------+------+-----+---------+-------+
| Instance  | varchar(6)    | NO   | PRI | NULL    |       |
| Namespace | varchar(10)   | NO   |     | NULL    |       |
| Name      | varchar(255)  | NO   |     | NULL    |       |
| Lat       | decimal(9,6)  | NO   |     | NULL    |       |
| Lon       | decimal(9,6)  | NO   |     | NULL    |       |
| Temp      | float         | YES  |     | NULL    |       |
| Humid     | float         | YES  |     | NULL    |       |
| Bio       | varchar(3000) | YES  |     | NULL    |       |
| Photo     | varchar(1000) | YES  |     | NULL    |       |
| Phone     | varchar(255)  | YES  |     | NULL    |       |
| Website   | varchar(255)  | YES  |     | NULL    |       |
| OpenHours | varchar(1024) | YES  |     | NULL    |       |
+-----------+---------------+------+-----+---------+-------+
</code></pre>

<p>The transportData.stations table:</p>

<pre><code>+-------+-------------+------+-----+---------+-------+
| Field | Type        | Null | Key | Default | Extra |
+-------+-------------+------+-----+---------+-------+
| ID    | int(11)     | NO   | PRI | NULL    |       |
| Name  | varchar(50) | NO   |     | NULL    |       |
| Lat   | varchar(15) | NO   |     | NULL    |       |
| Lon   | varchar(15) | NO   |     | NULL    |       |
| Type  | varchar(20) | NO   |     | NULL    |       |
+-------+-------------+------+-----+---------+-------+
</code></pre>

<p>The timeTables table:</p>

<pre><code>+----------+---------------+------+-----+---------+----------------+
| Field    | Type          | Null | Key | Default | Extra          |
+----------+---------------+------+-----+---------+----------------+
| ID       | int(11)       | NO   | PRI | NULL    | auto_increment |
| Line     | varchar(10)   | NO   |     | NULL    |                |
| Station  | int(11)       | NO   |     | NULL    |                |
| Weekdays | varchar(3500) | NO   |     | NULL    |                |
| Weekends | varchar(3500) | NO   |     | NULL    |                |
+----------+---------------+------+-----+---------+----------------+
</code></pre>

<p>EDIT: I tried using some MariaDB spatial functions, and found this to work ST_Distance(point(44.436292,26.102452), point(Lat, Lon)), but it gives me weird readings that are not similar with the ones from the formula I previously had. This is probably because ST_Distance returns the distance on a plane, which is useless, because it does not take into consideration the curvature of earth.</p>",mysql|sql|database|optimization,"<p>With what you give, this is the best answer I can provide:</p>

<p>/!\ I can't test it, so I hope it work as you want.</p>

<p>I put an index to speed up a bit the WHERE, and assume you'll search for <code>&lt; 0.1km</code>.</p>

<pre><code>CREATE INDEX small_miracle 
    ON `Stations`(`Namespace`, `Lat`, `Lon`);

SELECT 
    Instance,
    Namespace, 
    Stations.Name, 
    Stations.Lat, 
    Stations.Lon, 
    Temp, 
    Humid, 
    TDS.ID AS 'StationID',
    ( 
        6371 
        * acos( 
              cos( radians(44.436292) ) 
            * cos( radians( Stations.Lat ) ) 
            * cos( 
                radians( Stations.Lon ) 
                - radians(26.102452) 
                ) 
            + sin( radians(44.436292) ) 
            * sin(radians(Stations.Lat))
            ) 
        ) AS distance,
    timeTables.Lines AS 'Lines'
FROM `Stations`
INNER JOIN transportData.stations TDS
    ON (
        TDS.Lat = Stations.Lat
        AND TDS.Lon = Stations.Lon
        )
LEFT JOIN (
    SELECT 
        timeTables.Station,
        GROUP_CONCAT(Line SEPARATOR ';') Lines
    FROM transportData.timeTables 
    GROUP BY timeTables.Station
) timeTables
    ON timeTables.Station = TDS.ID 
WHERE 
    `Namespace` LIKE ""%8"" 
    AND 26.102452 +0.1 &gt; Stations.Lat
    AND 26.102452 -0.1 &lt; Stations.Lat
    AND 44.436292 +0.1 &gt; Stations.Lon
    AND 44.436292 -0.1 &lt; Stations.Lon
    AND distance &lt; 0.1
ORDER BY distance;
</code></pre>",0
1694692,Case In-sensitive query in php,"<p>I try to make a registration form. When user post the fields, i check USER_NAME. If exist then no inster the row to MYSQL.</p>

<p>After post:</p>

<pre><code>$check = ""SELECT name FROM test WHERE name='"".$_POST['user_name'].""';  
 $result = mysql_query($check) or die (mysql_error()); 
 $numrows = mysql_num_rows($resutl);
 if ($numrow != 0){ 
     echo ""exist""; exit;           
 }else{ 
     insert.....
 }      
</code></pre>

<p>In the database i have a row with user_name=Test</p>

<p>If the posted value is Test, then ok, but if i post ""test"" or ""TeSt"" or something else, then the row iserted.</p>

<p>How can make it case insensitive? I think i should use str to lowercase to the posted value, but in the query..how can i do that?</p>

<p>Thank you</p>",php|mysql,"<p>The case sensitivity also depends on the data type of the column.  You can probably fix the problem without the extra overhead of the string conversions (i.e. <code>UPPER()</code> and <code>strtoupper()</code>) by changing the column type to VARCHAR.</p>

<p><a href=""http://dev.mysql.com/doc/refman/5.0/en/case-sensitivity.html"" rel=""nofollow noreferrer"">From the MySQL Manual</a>:</p>

<blockquote>
  <p>For nonbinary strings (CHAR, VARCHAR, TEXT), string searches use the collation of the comparison operands. For binary strings (BINARY, VARBINARY, BLOB), comparisons use the numeric values of the bytes in the operands; this means that for alphabetic characters, comparisons will be case sensitive.</p>
  
  <p>A comparison between a nonbinary string and binary string is treated as a comparison of binary strings.</p>
  
  <p>Simple comparison operations (>=, >, =, &lt;, &lt;=, sorting, and grouping) are based on each character's “sort value.” Characters with the same sort value are treated as the same character. For example, if “e” and “é” have the same sort value in a given collation, they compare as equal.</p>
</blockquote>",1
1694692,Case In-sensitive query in php,"<p>I try to make a registration form. When user post the fields, i check USER_NAME. If exist then no inster the row to MYSQL.</p>

<p>After post:</p>

<pre><code>$check = ""SELECT name FROM test WHERE name='"".$_POST['user_name'].""';  
 $result = mysql_query($check) or die (mysql_error()); 
 $numrows = mysql_num_rows($resutl);
 if ($numrow != 0){ 
     echo ""exist""; exit;           
 }else{ 
     insert.....
 }      
</code></pre>

<p>In the database i have a row with user_name=Test</p>

<p>If the posted value is Test, then ok, but if i post ""test"" or ""TeSt"" or something else, then the row iserted.</p>

<p>How can make it case insensitive? I think i should use str to lowercase to the posted value, but in the query..how can i do that?</p>

<p>Thank you</p>",php|mysql,"<p>If the collation of your field is a case-insensitive one (such as <code>utf8_general_ci</code> or <code>latin1</code>), you can use the <code>LIKE</code> operator to do a case-insensitive match.</p>

<pre><code>""SELECT * FROM test WHERE name LIKE '$username';""
</code></pre>",2
1694692,Case In-sensitive query in php,"<p>I try to make a registration form. When user post the fields, i check USER_NAME. If exist then no inster the row to MYSQL.</p>

<p>After post:</p>

<pre><code>$check = ""SELECT name FROM test WHERE name='"".$_POST['user_name'].""';  
 $result = mysql_query($check) or die (mysql_error()); 
 $numrows = mysql_num_rows($resutl);
 if ($numrow != 0){ 
     echo ""exist""; exit;           
 }else{ 
     insert.....
 }      
</code></pre>

<p>In the database i have a row with user_name=Test</p>

<p>If the posted value is Test, then ok, but if i post ""test"" or ""TeSt"" or something else, then the row iserted.</p>

<p>How can make it case insensitive? I think i should use str to lowercase to the posted value, but in the query..how can i do that?</p>

<p>Thank you</p>",php|mysql,"<p>try <code>SELECT name FROM test WHERE UPPER(name)='"".strtoupper($_POST['user_name']).""'</code></p>

<p>be aware that you should correctly escape posted username (see php <a href=""http://www.php.net/manual/en/function.mysql-real-escape-string.php"" rel=""nofollow noreferrer"">mysql_real_escape_string</a> function)</p>",2
1891827,"PHP, MySQL - would results-array shuffle be quicker than ""select... order by rand()""?","<p>I've been reading a lot about the disadvantages of using ""order by rand"" so I don't need update on that.
I was thinking, since I only need a limited amount of rows retrieved from the db to be randomized, maybe I should do:</p>

<pre><code>$r = $db-&gt;query(""select * from table limit 500"");
for($i;$i&lt;500;$i++)
$arr[$i]=mysqli_fetch_assoc($r);
shuffle($arr);
</code></pre>

<p><em>(i know this only randomizes the 500 first rows, be it).</em></p>

<p>would that be faster than</p>

<pre><code>$r = $db-&gt;(""select * from table order by rand() limit 500"");
</code></pre>

<p>let me just mention, say the db tables were packed with more than...10,000 rows.</p>

<p><em>why don't you do it yourself?!?</em> - well, i have, but i'm looking for your experienced opinion.</p>

<p>thanks!</p>",php|sql|mysql|random|mysqli,"<p>I'm pretty sure the shuffle takes longer in your case, but you may wanna see this link for examples on fast random sets from the database. It requires a bit of extra SQL, but if speed is important to you, then do this.</p>

<p><a href=""http://devzone.zend.com/article/4571-Fetching-multiple-random-rows-from-a-database"" rel=""nofollow noreferrer"">http://devzone.zend.com/article/4571-Fetching-multiple-random-rows-from-a-database</a></p>",0
1891827,"PHP, MySQL - would results-array shuffle be quicker than ""select... order by rand()""?","<p>I've been reading a lot about the disadvantages of using ""order by rand"" so I don't need update on that.
I was thinking, since I only need a limited amount of rows retrieved from the db to be randomized, maybe I should do:</p>

<pre><code>$r = $db-&gt;query(""select * from table limit 500"");
for($i;$i&lt;500;$i++)
$arr[$i]=mysqli_fetch_assoc($r);
shuffle($arr);
</code></pre>

<p><em>(i know this only randomizes the 500 first rows, be it).</em></p>

<p>would that be faster than</p>

<pre><code>$r = $db-&gt;(""select * from table order by rand() limit 500"");
</code></pre>

<p>let me just mention, say the db tables were packed with more than...10,000 rows.</p>

<p><em>why don't you do it yourself?!?</em> - well, i have, but i'm looking for your experienced opinion.</p>

<p>thanks!</p>",php|sql|mysql|random|mysqli,"<p>500 or 10K, the sample size is too small to be able to draw tangible conclusions.  At 100K, you're still looking at the <a href=""http://www.dasprids.de/media/images/misc/benchmark-random-row-full.png"" rel=""nofollow noreferrer"">1/2 second region on this graph</a>.  If you're still concerned with performance, look at the <a href=""https://stackoverflow.com/questions/1823306/alerternative-to-mysql-order-by-rand"">two options for a randomized number I provided in this answer</a>.</p>

<p>We don't have your data or setup, so it's left to you to actually test the situation.  There are numerous pages for how to calculate elapsed time in PHP - create two pages, one using shuffle and the other using the RAND() query.  Run at least 10 of each, &amp; take a look.</p>",1
1891827,"PHP, MySQL - would results-array shuffle be quicker than ""select... order by rand()""?","<p>I've been reading a lot about the disadvantages of using ""order by rand"" so I don't need update on that.
I was thinking, since I only need a limited amount of rows retrieved from the db to be randomized, maybe I should do:</p>

<pre><code>$r = $db-&gt;query(""select * from table limit 500"");
for($i;$i&lt;500;$i++)
$arr[$i]=mysqli_fetch_assoc($r);
shuffle($arr);
</code></pre>

<p><em>(i know this only randomizes the 500 first rows, be it).</em></p>

<p>would that be faster than</p>

<pre><code>$r = $db-&gt;(""select * from table order by rand() limit 500"");
</code></pre>

<p>let me just mention, say the db tables were packed with more than...10,000 rows.</p>

<p><em>why don't you do it yourself?!?</em> - well, i have, but i'm looking for your experienced opinion.</p>

<p>thanks!</p>",php|sql|mysql|random|mysqli,"<p>I am looking at this from experience with MySQL. </p>

<p>Let's talk about the first piece of code:</p>

<pre><code>$r = $db-&gt;query(""select * from table"");
for($i=0;$i&lt;500;$i++){
  $arr[$i] = mysqli_fetch_assoc($r);
}
shuffle($arr);
</code></pre>

<p>Clearly it would be more efficient to LIMIT the number of rows in the SQL statement instead of doing it on PHP.</p>

<p>Thus:</p>

<pre><code>$r = $db-&gt;query(""SELECT * FROM table LIMIT 500"");
while($arr[] = mysqli_fetch_assoc($r)){}
shuffle($arr);
</code></pre>

<p>SQL operation would be faster than doing it in PHP, especially when you have such large amount of rows. One good way to find out is to do benchmarking and find out which of the two would be faster. My bet is that the SQL would be faster than shuffling in PHP.</p>

<p>So my vote goes for:</p>

<pre><code>$r = $db-&gt;query(""SELECT * FROM table ORDER BY RAND() LIMIT 500"");
while($arr[] = mysqli_fetch_assoc($r)){}
</code></pre>",1
1632403,What is the difference (when being applied to my code) between INT(10) and INT(12)?,"<p>If I use INT(12) vs INT(10) or INT(8) what will this actually do in terms of me using in code?</p>

<p>(This is a spin off of a <a href=""https://stackoverflow.com/questions/1632312/is-bigint8-the-largest-integer-mysql-can-store"">previous question</a>) I read through the manuals and I think I understand what they're saying, but I don't actually know how it would apply to my php/mysql coding. </p>

<p>Can someone provide an example of where this would actually matter?</p>",php|sql|mysql,"<p>You shouldn't have to change anything as it has no impact on the data returned. The information can be used by applications that want to use it.</p>

<p>See <a href=""http://dev.mysql.com/doc/refman/5.0/en/numeric-types.html"" rel=""nofollow noreferrer"">http://dev.mysql.com/doc/refman/5.0/en/numeric-types.html</a></p>

<blockquote>
  <p>Another extension is supported by MySQL for optionally specifying the <strong>display width</strong> of integer data types in parentheses following the base keyword for the type (for example, INT(4)). This optional display width may be used by applications to display integer values having a width less than the width specified for the column by left-padding them with spaces. (That is, this width is present in the metadata returned with result sets. <strong>Whether it is used or not is up to the application.</strong>)</p>
  
  <p>The display width <strong>does not constrain the range of values</strong> that can be stored in the column, nor the number of digits that are displayed for values having a width exceeding that specified for the column. For example, a column specified as SMALLINT(3) has the usual SMALLINT range of -32768 to 32767, and values outside the range allowed by three characters are displayed using more than three characters. </p>
</blockquote>

<p>(Emphasis mine)</p>",4
1632403,What is the difference (when being applied to my code) between INT(10) and INT(12)?,"<p>If I use INT(12) vs INT(10) or INT(8) what will this actually do in terms of me using in code?</p>

<p>(This is a spin off of a <a href=""https://stackoverflow.com/questions/1632312/is-bigint8-the-largest-integer-mysql-can-store"">previous question</a>) I read through the manuals and I think I understand what they're saying, but I don't actually know how it would apply to my php/mysql coding. </p>

<p>Can someone provide an example of where this would actually matter?</p>",php|sql|mysql,"<p>The argument to integer types in MySQL has no effect on the storage of data or the range of values supported by each data type.</p>

<p>The argument only applies to display width, which may be used by applications as Jonathan Fingland mentions.  It also comes up when used in combination with the <code>ZEROFILL</code> option:</p>

<pre><code>CREATE TABLE foo (
  i INT(3) ZEROFILL, 
  j INT(6) ZEROFILL, 
  k INT(11) ZEROFILL
);
INSERT INTO foo (i, j, k) VALUES (123, 456, 789);
SELECT * FROM foo;

+------+--------+-------------+
| i    | j      | k           |
+------+--------+-------------+
|  123 | 000456 | 00000000789 |
+------+--------+-------------+
</code></pre>

<p>See how <code>ZEROFILL</code> makes sure the data is zero-padded to at least the number of digits equal to the integer type argument.</p>

<p>Without <code>ZEROFILL</code>, the data is space-padded, but since spaces are often trimmed anyway, it's harder to see that difference.</p>

<p>What affect does it have on your PHP code?  None.  If you need to output columnar data, or space-pad or zero-pad values, it's more flexible to use <a href=""http://php.net/sprintf"" rel=""noreferrer""><code>sprintf()</code></a>,</p>",17
1632403,What is the difference (when being applied to my code) between INT(10) and INT(12)?,"<p>If I use INT(12) vs INT(10) or INT(8) what will this actually do in terms of me using in code?</p>

<p>(This is a spin off of a <a href=""https://stackoverflow.com/questions/1632312/is-bigint8-the-largest-integer-mysql-can-store"">previous question</a>) I read through the manuals and I think I understand what they're saying, but I don't actually know how it would apply to my php/mysql coding. </p>

<p>Can someone provide an example of where this would actually matter?</p>",php|sql|mysql,"<p>Short answer: there's no difference.</p>

<p>The display width is passed back in the ""meta data"".  It's up to the application to make use of it.  Normally it's just ignored.  I don't think you can get it using the mysql functions, but you might be able to with mysqli using <a href=""http://www.php.net/manual/en/mysqli-result.fetch-field-direct.php"" rel=""noreferrer"">mysqli_fetch_field_direct</a>.</p>",7
2001540,fast site logging,"<p>i'm need to log some visits on my site to mysql and then parse them, such visits rate is about 50 per second. inserting each request is veryslow and bad, what can you advise me?</p>",mysql|logging,"<p>Have you considered having a table for the visits per day/hour/minute with your unit of time as a key and then just running inserts into that table with an <a href=""http://dev.mysql.com/doc/refman/5.0/en/insert-on-duplicate.html"" rel=""nofollow noreferrer"">on duplicate key</a> clause.</p>",0
2001540,fast site logging,"<p>i'm need to log some visits on my site to mysql and then parse them, such visits rate is about 50 per second. inserting each request is veryslow and bad, what can you advise me?</p>",mysql|logging,"<p>G'day,</p>

<p>Unless you really need statistics in real time, I'd seriously suggest logging the requests to disk and then trawling them later. Using Apache's rotatelogs utility let's you obtain logs for analysis on a daily basis at midnight or on an hourly basis at the top of the hour if you really need a quicker turnaround.</p>

<p>cheers,</p>",1
2001540,fast site logging,"<p>i'm need to log some visits on my site to mysql and then parse them, such visits rate is about 50 per second. inserting each request is veryslow and bad, what can you advise me?</p>",mysql|logging,"<p>You can use INSERT DELAYED which is ideal for logging, as it queues the statement and returns control to the script immediately. I also agree with @Jordan for the ARCHIVE engine.</p>",1
2001540,fast site logging,"<p>i'm need to log some visits on my site to mysql and then parse them, such visits rate is about 50 per second. inserting each request is veryslow and bad, what can you advise me?</p>",mysql|logging,<p>Have you tried queueing them on the server and then inserting multiple requests at a time?</p>,2
35335237,How to add SQL formatting functionality on textarea?,<p>I wants to implement a functionality that format SQL within textarea. So the textarea should allows user to indent and highlight certain text ( SQL ) based on their interest and i would like to display the formatted query within alert box using jquery. Thanks in advance.</p>,jquery|mysql|formatting|textarea,"<p>You can improve or use following jquery code to format text in textarea and then display it using alert box.</p>

<p>For it create appropriate buttons as follows:</p>

<pre><code>  var textInput = document.getElementById('textInput');
   var printButton = document.getElementById('printButton');
   var printBoldItalicButton = document.getElementById('printBoldItalicButton');
   var printFirstWordBoldButton = document.getElementById('printFirstWordBoldButton');
   var printDifferentStyleLinesButton = document.getElementById('printDifferentStyleLinesButton');
   var printOneOrTwoLinesBoldButton = document.getElementById('printOneOrTwoLinesBoldButton');

 printButton.onclick = function()
        {
            try
            {


                 //var text = textInput.value.split(' ');
                var text = textInput.value;

                var textMarkup = '';
                var fontSize = 64;
                for (var i = 0; i &lt; text.length; ++i)
                {
                    textMarkup += '&lt;font family=""Arial"" size=""' + fontSize + '""&gt;' + escapeXml(text[i]) + '&lt;/font&gt;';

                    fontSize = Math.max(2, fontSize / 8 * 7);
                }

                textMarkupInput.value = textMarkup;
     alert(textMarkupInput.value);
            }
            catch(e)
            {
                alert(e.message || e);
            }
        }

        printBoldItalicButton.onclick = function()
        {
            try
            {



                var text = textInput.value.split(' ');

                var textMarkup = '';
                for (var i = 0; i &lt; text.length; ++i)
                {
                    if (i % 2)
                        textMarkup += '&lt;b&gt;' + escapeXml(text[i]) + ' &lt;/b&gt;';
                    else
                        textMarkup += '&lt;i&gt;' + escapeXml(text[i]) + ' &lt;/i&gt;';
                }

                textMarkupInput.value = textMarkup;
    alert(textMarkupInput.value);
            }
            catch(e)
            {
                alert(e.message || e);
            }
        }

        printFirstWordBoldButton.onclick = function()
        {
            try
            {

                var lines = textInput.value.split('\n');
                var textMarkup = '';

                for (var i = 0; i &lt; lines.length; ++i)
                {
                    var text = lines[i].split(' ');
                    if (text.length &gt;= 1)
                    {
                        textMarkup += '&lt;b&gt;' + escapeXml(text[0]) + ' &lt;/b&gt;';
                        textMarkup += text.slice(1).join(' ');
                    }
                    textMarkup += '&lt;br/&gt;';
                }


                textMarkupInput.value = textMarkup;
          alert(textMarkupInput.value);
            }
            catch(e)
            {
                alert(e.message || e);
            }
        }

        printDifferentStyleLinesButton.onclick = function()
        {
            try
            {

                var lines = textInput.value.split('\n');
                var textMarkup = '&lt;font family=""Times New Roman""&gt;';

                var styles = ['', 'b', 'i', 'u', 's'];

                for (var i = 0; i &lt; lines.length; ++i)
                {
                    var text = lines[i];
                    if (i &gt;= styles.length || i == 0)
                        textMarkup += escapeXml(text);
                    else
                        textMarkup += '&lt;' + styles[i] + '&gt;' + escapeXml(text);

                    if (i == Math.min(styles.length, lines.length) - 1)
                    {
                        // 'close' all styles
                        for (var j = Math.min(styles.length, lines.length) - 1; j &gt; 0; --j)
                            textMarkup += '&lt;/' + styles[j] + '&gt;';
                    }

                    if (i &lt; lines.length - 1)
                        textMarkup += '&lt;br/&gt;';
                }
                textMarkup += '&lt;/font&gt;';


                textMarkupInput.value =textMarkup;alert(textMarkupInput.value);
            }
            catch(e)
            {
                alert(e.message || e);
            }
        }

        printOneOrTwoLinesBoldButton.onclick = function()
        {
            try
            {

                var lines = textInput.value.split('\n');

                var textMarkup = '';
                var boldLinesCount = lines.length &lt;= 3 ? 1 : 2;

                if (lines.length &gt; 0)
                {
                    textMarkup = '&lt;b&gt;';
                    textMarkup += escapeXml(lines.slice(0, boldLinesCount).join('\n'));
                    textMarkup += '&lt;/b&gt;&lt;br/&gt;';
                    textMarkup += escapeXml(lines.slice(boldLinesCount).join('\n'));
                }

                textMarkupInput.value = textMarkup;
     alert(textMarkupInput.value);
            }
            catch(e)
            {
                alert(e.message || e);
            }
        }
</code></pre>",0
25647685,Interleave rows of MySQL table,"<p>I have a table containing data and a class, something like</p>

<pre><code>----------------
| DATA | Class |
----------------
|  1   |   A   |
|  2   |   A   |
|  5   |   B   |
|  10  |   A   |
|  2   |   A   |
|  45  |   B   |
|  90  |   B   |
----------------
</code></pre>

<p>I would like to interleave the two classes to obtain something like this:</p>

<pre><code>----------------
| DATA | Class |
----------------
|  1   |   A   |
|  5   |   B   |
|  2   |   A   |
|  45  |   B   |
|  2   |   A   |
|  90  |   B   |
|  10  |   A   |
----------------
</code></pre>

<p>I thought about generating on the fly an additional column that will add a sequential incrementing index to each separate class and sort on that one, but need a good direction/pointer to do that.</p>

<p>Something like:</p>

<pre><code>-----------------------
| DATA | Class | indx |
-----------------------
|  1   |   A   |  1   |
|  5   |   B   |  1   |
|  2   |   A   |  2   |
|  45  |   B   |  2   |
|  2   |   A   |  3   |
|  90  |   B   |  3   |
|  10  |   A   |  4   |
-----------------------
</code></pre>

<p>Is it even possible using only MySQL?</p>",mysql|sql,"<p>Here is the SQL I can suggest:</p>

<pre><code>SET @rank:=0;
update aabb set `index` = @rank:=@rank+2 where `class` = 'A';
SET @rank:=1;
update aabb set `index` = @rank:=@rank+2 where `class` = 'B';
select * from aabb order by `index`;
</code></pre>",0
25647685,Interleave rows of MySQL table,"<p>I have a table containing data and a class, something like</p>

<pre><code>----------------
| DATA | Class |
----------------
|  1   |   A   |
|  2   |   A   |
|  5   |   B   |
|  10  |   A   |
|  2   |   A   |
|  45  |   B   |
|  90  |   B   |
----------------
</code></pre>

<p>I would like to interleave the two classes to obtain something like this:</p>

<pre><code>----------------
| DATA | Class |
----------------
|  1   |   A   |
|  5   |   B   |
|  2   |   A   |
|  45  |   B   |
|  2   |   A   |
|  90  |   B   |
|  10  |   A   |
----------------
</code></pre>

<p>I thought about generating on the fly an additional column that will add a sequential incrementing index to each separate class and sort on that one, but need a good direction/pointer to do that.</p>

<p>Something like:</p>

<pre><code>-----------------------
| DATA | Class | indx |
-----------------------
|  1   |   A   |  1   |
|  5   |   B   |  1   |
|  2   |   A   |  2   |
|  45  |   B   |  2   |
|  2   |   A   |  3   |
|  90  |   B   |  3   |
|  10  |   A   |  4   |
-----------------------
</code></pre>

<p>Is it even possible using only MySQL?</p>",mysql|sql,"<p>Enumerate each class independently, and then order by the enumeration:</p>

<pre><code>select data, class, idx
from (select a.*,
             (@seqnum := if(@class = class, @seqnum + 1,
                            if(@class := class, 1, 1)
                           )
             ) as idx
      from atable a cross join
           (select @class := NULL, @seqnum := 0) vars
      order by class, data
     ) a
order by idx, class;
</code></pre>

<p>EDIT:</p>

<p>This query enumerates each class independently, so the row with the smallest data gets a value of 1 and so on.  It is using MySQL variables for this purpose.  In other databases, you would use <code>row_number()</code>.  Once you have the enumeration, the final step is just to sort by that field.</p>",4
25408488,really return id column when we make insert row?,"<pre><code>Table test
id - int, primary key, auto_incriment
name - varchar(100)

INSERT INTO test
  (ID, Name)
VALUES
  ('$ID', '$Name');
</code></pre>

<p>Tell me please really return <code>ID</code> in one query when we make insert ?</p>",mysql|sql,"<p>Since ID is auto incrementing, don't specify it in your query, you can simply do </p>

<pre><code>INSERT INTO test
(Name)
VALUES
('$Name');
</code></pre>

<p>(Note if this is coming from PHP, be sure to watch out for SQL injection problems!)</p>

<p>If you specify an ID it will override MySQL's normal operations (which can be useful on occasion but not likely in this case).</p>

<p>You can refer back to the last inserted ID using <code>LAST_INSERT_ID()</code>. (note the column has to be inserted first, you can't call this and then insert with that value)</p>",0
25408488,really return id column when we make insert row?,"<pre><code>Table test
id - int, primary key, auto_incriment
name - varchar(100)

INSERT INTO test
  (ID, Name)
VALUES
  ('$ID', '$Name');
</code></pre>

<p>Tell me please really return <code>ID</code> in one query when we make insert ?</p>",mysql|sql,"<p><em>as say @MichaelBerkowski you cannt return <code>ID</code> in one query.</em></p>

<p><em>For return <code>ID</code> make next:</em></p>

<pre><code>INSERT INTO test
  (ID, Name)
VALUES
  ('$ID', '$Name');

SELECT LAST_INSERT_ID();
</code></pre>

<p><em>inforamtion about <code>LAST_INSERT_ID();</code> you are can read <strong><a href=""http://dev.mysql.com/doc/refman/5.0/en/information-functions.html#function_last-insert-id"" rel=""nofollow"">here</a></em></strong></p>",0
17071881,Loop MySQL result,"<p>I have not used PHP and MySQL for some time, so I have unfortunately lost some knowledge and I need some help with my code.</p>

<p>Below I have some code to get 9 different values from the DB, but It doesn't work for me. And I can't tell right know what wrong because the PHP error message is set to off.</p>

<p>Am I way to wrong or what is wrong here?</p>

<pre><code>for (i = 0; i &lt; 10; i ++) {
$query2 = ""SELECT * from arkitekturobjekt WHERE id = '{$buildingIdArray[i]}'"";
$result2 = $mysqli-&gt;query($query2);
$row = mysqli_fetch_object($result2);
// Do some stuff here
}
</code></pre>

<p>EDIT: Thanks for the help so far, but it still doesn't work! There is some wrong with the <code>$buildingIdArray[]</code> I have this code to set values to the array:</p>

<pre><code>$buildingIdArray  = array();
$numbers = range (1, 40);
shuffle($numbers);
$buildingIdArray=array_slice ($numbers,1,9)
</code></pre>

<p>It works if I do like this:</p>

<pre><code>$buildingIdArray  = array(1,2,3,4,5,6,7,8,9);
</code></pre>

<p>What could be wrong?</p>",php|mysql,"<p>You should not run a query inside a for loop.</p>

<p>Use the loop to build the query and then run just one.</p>

<pre><code>// prepare the where conditions
$where2 = Array();
for($i = 0; $i &lt; 10; $i ++) {
  $where2[] = ""`id` = '"" . $buildingIdArray[$i] . ""'"";
}

// put the query and the conditions together
$query2 = ""SELECT * FROM `arkitekturobjekt` WHERE "" . implode(' OR ', $where2) . "";"";

// run the query and loop results
$result2 = $mysqli-&gt;query($query2);
while($row = mysqli_fetch_object($result2)) {
  // do stuff with the results here
}
</code></pre>",1
17071881,Loop MySQL result,"<p>I have not used PHP and MySQL for some time, so I have unfortunately lost some knowledge and I need some help with my code.</p>

<p>Below I have some code to get 9 different values from the DB, but It doesn't work for me. And I can't tell right know what wrong because the PHP error message is set to off.</p>

<p>Am I way to wrong or what is wrong here?</p>

<pre><code>for (i = 0; i &lt; 10; i ++) {
$query2 = ""SELECT * from arkitekturobjekt WHERE id = '{$buildingIdArray[i]}'"";
$result2 = $mysqli-&gt;query($query2);
$row = mysqli_fetch_object($result2);
// Do some stuff here
}
</code></pre>

<p>EDIT: Thanks for the help so far, but it still doesn't work! There is some wrong with the <code>$buildingIdArray[]</code> I have this code to set values to the array:</p>

<pre><code>$buildingIdArray  = array();
$numbers = range (1, 40);
shuffle($numbers);
$buildingIdArray=array_slice ($numbers,1,9)
</code></pre>

<p>It works if I do like this:</p>

<pre><code>$buildingIdArray  = array(1,2,3,4,5,6,7,8,9);
</code></pre>

<p>What could be wrong?</p>",php|mysql,"<p><code>$i</code> not <code>i</code>:</p>

<pre><code>for ($i = 0; $i &lt; 10; $i ++) 
</code></pre>",4
17071881,Loop MySQL result,"<p>I have not used PHP and MySQL for some time, so I have unfortunately lost some knowledge and I need some help with my code.</p>

<p>Below I have some code to get 9 different values from the DB, but It doesn't work for me. And I can't tell right know what wrong because the PHP error message is set to off.</p>

<p>Am I way to wrong or what is wrong here?</p>

<pre><code>for (i = 0; i &lt; 10; i ++) {
$query2 = ""SELECT * from arkitekturobjekt WHERE id = '{$buildingIdArray[i]}'"";
$result2 = $mysqli-&gt;query($query2);
$row = mysqli_fetch_object($result2);
// Do some stuff here
}
</code></pre>

<p>EDIT: Thanks for the help so far, but it still doesn't work! There is some wrong with the <code>$buildingIdArray[]</code> I have this code to set values to the array:</p>

<pre><code>$buildingIdArray  = array();
$numbers = range (1, 40);
shuffle($numbers);
$buildingIdArray=array_slice ($numbers,1,9)
</code></pre>

<p>It works if I do like this:</p>

<pre><code>$buildingIdArray  = array(1,2,3,4,5,6,7,8,9);
</code></pre>

<p>What could be wrong?</p>",php|mysql,"<p>This is what I mean by my comment: ""you sure you want to query in the loop and not just compose a list of id's, query once, then loop through the results? example: WHERE id IN (1, 2, 4, 6, 10)""</p>

<pre><code>// get the first 10 items from building array
$id_arr = array_slice($buildingIdArray, 0, 10); 

$query2 = ""SELECT * from arkitekturobjekt WHERE id IN ("". implode(',', $id_arr) ."")"";
$result2 = $mysqli-&gt;query($query2);

while($row = mysqli_fetch_object($result2))
{
  //Do some stuff here
}
</code></pre>

<p>Keep in mind, you are still responsible for sanitization here. I don't know what populates your building id array, so if it is from $_GET, $_POST, $_REQUEST, or anything else that could be user generated you could be open to mysql injections</p>",4
16568491,mysql week() function is returning one less number of actual week number,"<p>I am using week() function from mysql to determine week number from date. Problem what I am facing is that it always return one less number from actual week number. suppose today is 2013-05-15 as it is 20th week of this year but in result it is 19. Following is the query I am using.</p>

<pre><code> SELECT *,WEEK(date_visit) AS week_no FROM property_view_details;
</code></pre>",mysql,"<p>Straight from the <a href=""https://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_week"" rel=""noreferrer"">docs</a>:</p>

<pre><code>mysql&gt; SELECT WEEK('2008-02-20',1);
    -&gt; 8
</code></pre>

<p>You can change the behaviour of <code>WEEK</code> by setting the 2nd argument to either <code>0</code> or <code>1</code> for 0-indexed or 1-indexed results respectively.</p>",12
16568491,mysql week() function is returning one less number of actual week number,"<p>I am using week() function from mysql to determine week number from date. Problem what I am facing is that it always return one less number from actual week number. suppose today is 2013-05-15 as it is 20th week of this year but in result it is 19. Following is the query I am using.</p>

<pre><code> SELECT *,WEEK(date_visit) AS week_no FROM property_view_details;
</code></pre>",mysql,"<p>The <a href=""https://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_week"" rel=""nofollow"">manual</a> should shed some light on this.</p>

<p><code>default_week_format</code> is probably set to the default of <code>0</code>, which means that the week counts from zero.  Try changing it to <code>1</code>, or just adapt the query to account for the change.</p>",1
16568491,mysql week() function is returning one less number of actual week number,"<p>I am using week() function from mysql to determine week number from date. Problem what I am facing is that it always return one less number from actual week number. suppose today is 2013-05-15 as it is 20th week of this year but in result it is 19. Following is the query I am using.</p>

<pre><code> SELECT *,WEEK(date_visit) AS week_no FROM property_view_details;
</code></pre>",mysql,"<p>Researching the operation of the function with just a simple google turned up this: <a href=""http://www.w3resource.com/mysql/date-and-time-functions/mysql-week-function.php"" rel=""nofollow"">http://www.w3resource.com/mysql/date-and-time-functions/mysql-week-function.php</a></p>

<p>In short, you can assign a mode of operation to the function. That is, which day the week starts at, and whether it should start at 0 or 1.</p>

<p>For example, <code>SELECT WEEK(date_visit, 2)</code> will count with weeks starting on Sunday, and counting beginning from 1.</p>

<p>Best of luck.</p>",1
16568491,mysql week() function is returning one less number of actual week number,"<p>I am using week() function from mysql to determine week number from date. Problem what I am facing is that it always return one less number from actual week number. suppose today is 2013-05-15 as it is 20th week of this year but in result it is 19. Following is the query I am using.</p>

<pre><code> SELECT *,WEEK(date_visit) AS week_no FROM property_view_details;
</code></pre>",mysql,"<p>Set second <code>week</code> parameter to right value.</p>

<p>Quoting docs:
<a href=""https://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_week"" rel=""noreferrer"">https://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_week</a></p>

<pre><code>M   F.day   Range   Week 1 is the first week …
0   Sunday  0-53    with a Sunday in this year
1   Monday  0-53    with more than 3 days this year
2   Sunday  1-53    with a Sunday in this year
3   Monday  1-53    with more than 3 days this year
4   Sunday  0-53    with more than 3 days this year
5   Monday  0-53    with a Monday in this year
6   Sunday  1-53    with more than 3 days this year
7   Monday  1-53    with a Monday in this year

M = Mode
F.day = First day of week
</code></pre>

<p>Sample:</p>

<pre><code>mysql&gt; SELECT WEEK('2008-02-20',0);
        -&gt; 7
mysql&gt; SELECT WEEK('2008-02-20',1);
        -&gt; 8
</code></pre>",7
17061156,MySQL - Group by range,"<p>I need to count the records within value ranges.</p>

<p>For example: for the set <code>1, 7, 9, 23, 33, 35, 1017</code></p>

<p><code>select count(myvalue) group by round(myvalue / 10)</code> gives something like:</p>

<pre><code>0-10  -&gt; 3
10-20 -&gt; 0
20-30 -&gt; 1
30-40 -&gt; 2
1010-1020 -&gt; 1
</code></pre>

<p>This works fine. However, I need to set an upper limit, so that MySQL returns <code>40+ --&gt; 1</code> ?
How can this be achieved ?</p>",mysql|count|group-by,"<pre><code>SELECT case 
   when myvalue &gt;= 0 and myvalue&lt; 10 then '0-9'
   when myvalue &gt;= 10 and myvalue&lt; 20 then '10-19'
   when myvalue &gt;= 20 and myvalue&lt; 20 then '20-29'
   when myvalue &gt;= 30 and myvalue&lt; 40 then '30-39'
   else '40+' 
   end as range
 from t 
group by range
</code></pre>",2
17061156,MySQL - Group by range,"<p>I need to count the records within value ranges.</p>

<p>For example: for the set <code>1, 7, 9, 23, 33, 35, 1017</code></p>

<p><code>select count(myvalue) group by round(myvalue / 10)</code> gives something like:</p>

<pre><code>0-10  -&gt; 3
10-20 -&gt; 0
20-30 -&gt; 1
30-40 -&gt; 2
1010-1020 -&gt; 1
</code></pre>

<p>This works fine. However, I need to set an upper limit, so that MySQL returns <code>40+ --&gt; 1</code> ?
How can this be achieved ?</p>",mysql|count|group-by,"<p>I would suggest this solution that borrows from both pilsetnieks and Jayram's solutions:</p>

<pre><code>SELECT
    COUNT(*) AS cnt,
    IF (myvalue &gt;= 40; -1; ROUND(myvalue / 10) AS range
FROM t
GROUP BY range
</code></pre>",2
17061156,MySQL - Group by range,"<p>I need to count the records within value ranges.</p>

<p>For example: for the set <code>1, 7, 9, 23, 33, 35, 1017</code></p>

<p><code>select count(myvalue) group by round(myvalue / 10)</code> gives something like:</p>

<pre><code>0-10  -&gt; 3
10-20 -&gt; 0
20-30 -&gt; 1
30-40 -&gt; 2
1010-1020 -&gt; 1
</code></pre>

<p>This works fine. However, I need to set an upper limit, so that MySQL returns <code>40+ --&gt; 1</code> ?
How can this be achieved ?</p>",mysql|count|group-by,"<pre><code>select t.myvalue as [range], count(*) as [occurences]
from (
  select myvalue,
   case when myvalue &gt;= 0 and myvalue&lt; 10 then '0-9'
   when myvalue &gt;= 10 and myvalue&lt; 20 then '10-19'
   when myvalue &gt;= 20 and myvalue&lt; 20 then '20-29'
   when myvalue &gt;= 30 and myvalue&lt; 40 then '30-39'
   else '40+' end as range
 from t) t
group by t.myvalue
</code></pre>",3
17061156,MySQL - Group by range,"<p>I need to count the records within value ranges.</p>

<p>For example: for the set <code>1, 7, 9, 23, 33, 35, 1017</code></p>

<p><code>select count(myvalue) group by round(myvalue / 10)</code> gives something like:</p>

<pre><code>0-10  -&gt; 3
10-20 -&gt; 0
20-30 -&gt; 1
30-40 -&gt; 2
1010-1020 -&gt; 1
</code></pre>

<p>This works fine. However, I need to set an upper limit, so that MySQL returns <code>40+ --&gt; 1</code> ?
How can this be achieved ?</p>",mysql|count|group-by,"<p>You can either sum the values on the client side or use two queries, possibly with <code>union</code>, to fetch the data, e.g.:</p>

<pre><code>select round(myvalue / 10), count(myvalue) from table where myvalue &lt; 40 group by round(myvalue / 10)
union
select '40+', count(myvalue) from table where myvalue &gt;= 40
</code></pre>

<p>It is absolutely possible to write it in a single query with subqueries or convoluted conditions but it just wouldn't be as simple and maintainable.</p>",12
54266038,Change Date format of $_REQUEST into another : Mer. 23 Janvier 2019 to 2019-01-23,"<p>I have a bootstrap datepicker into one of my form where I'm displaying the date into this format : </p>

<pre><code>D. d MM yyyy (displayed : Mer. 23 Janvier 2019)
</code></pre>

<p>Since I can't save the date into my table in this format, I get the sent value with $_REQUEST before I'm saving it into my table column and want to change its format.</p>

<p>I tried :</p>

<pre><code>$deliverydate = $_REQUEST['delivery_date'];
$deliverydate_conv = $deliverydate-&gt;format('Y-m-d');

or

$deliverydate_conv = $deliverydate-&gt;format('Y-mm-dd');
</code></pre>

<p>but when I </p>

<pre><code>dd($deliverydate);
</code></pre>

<p>the value then I get an error :</p>

<pre><code>Call to a member function format() on string
</code></pre>

<p>I tried also :</p>

<pre><code>        $deliverydate = $_REQUEST['delivery_date'];
        $deliverydate_conv = date(""m-d-Y"", strtotime($deliverydate));
</code></pre>

<p>A date is returned but :</p>

<pre><code>01-01-1970
</code></pre>

<p>My code is :<br>
    public function hook_before_add(&amp;$postdata) {</p>

<pre><code># START POPULATE the deliverydate FIELD

# QUERY
# SQL : GET the deliverydate FIELD

$deliverydate = $_REQUEST['delivery_date'];
$deliverydate_conv = date(""m-d-Y"", strtotime($deliverydate));
dd($deliverydate);

# UPDATE THE deliverydate FIELD WITH THE RETURNED VALUE

DB::table('orders')
-&gt;where('orderID', '=', $id)
-&gt;update(array('deliverydate' =&gt; $deliverydate_conv));

# END POPULATE the deliverydate FIELD

}
</code></pre>

<p>I would like to convert my code into :</p>

<pre><code>2019-01-23
</code></pre>

<p>in order to be able to save it into my date table column.</p>",php|mysql,"<p>As you're trying to parse a localized date string, you're going to need to use a class from the Intl PHP extension, make sure it's installed.</p>

<p>You can use the <code>IntlDateFormatter</code> class to define a formatter that can understand French dates. Then you tell it the date format you're using and lastly parse the date. It will produce a Unix timestamp that you can use with <code>date()</code>.</p>

<pre><code>$formatter = new IntlDateFormatter(""fr_FR"", IntlDateFormatter::NONE, IntlDateFormatter::NONE);
$formatter-&gt;setPattern('eee dd MMMM y');

$time = $formatter-&gt;parse(""Mer. 23 Janvier 2019"");

$date = date('Y-m-d', $time);
</code></pre>

<p>You can change the pattern to another that suits your needs using these flags: <a href=""http://userguide.icu-project.org/formatparse/datetime"" rel=""nofollow noreferrer"">http://userguide.icu-project.org/formatparse/datetime</a></p>

<p><code>date()</code> uses these as its format <a href=""http://php.net/manual/en/function.date.php"" rel=""nofollow noreferrer"">http://php.net/manual/en/function.date.php</a></p>

<p>And you can test the code above in this site: <a href=""http://www.writephponline.com"" rel=""nofollow noreferrer"">http://www.writephponline.com</a></p>

<p>Applied to your case, you'd need to parse <code>$deliverydate</code> and use its return as the second argument to <code>date()</code>.</p>",1
31041507,Getting error while executing mysql command in python,"<p>I am writing a python3 script to automate installation of radius and daloradius.
in the middle, am getting some error. my code is :</p>

<pre><code>import subprocess
import os
import sys

# Updating Resources
os.system(""sudo apt-get update -y"")


#subprocess.call([""apt-get"", ""install"", ""freeradius""])

#Installing Radius &amp; Dependencies
print(""\n Installing Free Radius ... \n"")
os.system(""sudo apt-get install freeradius freeradius-mysql -y"")
print(""\nInstalling  LAMP  ... \n"")
os.system(""sudo apt-get install mysql-server mysql-client apache2 php5 libapache2-mod-php5 php5-mysql php5-common php5-gd php-pear php-db php-mail -y"")
#os.system(""sudo apt-get install python-dev libmysqlclient-dev python3-pip"")
#os.system(""sudo pip3 install mysqlclient"")

#Creating A Database for radius server
os.system(""mysql -h localhost -uroot -p123 -e 'CREATE DATABASE foo';"")
os.system(""mysql -h localhost -uroot -p123 -e 'CREATE USER 'radius2'@'localhost' IDENTIFIED BY 'radpass'';"")
os.system(""mysql -h localhost -uroot -p123 -e 'GRANT ALL PRIVILEGES ON `radius` . * TO 'radius2'@'localhost'';"")
</code></pre>

<p>I am getting an error at</p>

<pre><code>os.system(""mysql -h localhost -uroot -p123 -e 'CREATE USER 'radius2'@'localhost' IDENTIFIED BY 'radpass'';"")
</code></pre>

<p>The error is :</p>

<pre><code> You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'radpass' at line 1
</code></pre>",python|mysql|radius,"<p>There are two many single quotemarks in the SQL statement, use back slash to escape them:</p>

<pre><code>os.system(""mysql -hlocalhost -uroot -p123 -e 'CREATE USER \'radius2\'@\'localhost\' IDENTIFIED BY \'radpass\';'"")
</code></pre>

<p>You can use just one statement to create user and grant privilege to it:</p>

<pre><code>GRANT ALL PRIVILEGES ON radius.* TO 'radius2'@'localhost' IDENTIFIED BY 'radpass';
</code></pre>",1
30896080,Why does MysqlCommand.ExecuteScalar return System.NullReferenceException,"<p>I am using MySQL in a VB 2013 project. I am trying to get the number of records in a table running </p>

<pre><code>Dim SQLstr As String = ""SELECT COUNT(*) FROM lieferantenartikel WHERE LiefID=1 AND LfAIDLief=1""
Dim CheckExist As New MySqlCommand(SQLstr, New MySqlConnection(strConn))
Try
    Dim recEx As Integer = CheckExist.ExecuteScalar()
Catch ex As Exception
    MessageBox.Show(ex.Message)
End Try
</code></pre>

<p>By definition COUNT(*) is supposed to return a scalar number, i.e. 0 if no records exist or otherwise any other positive number. </p>

<p>But I am getting a System.NullReferenceException. What am I doing wrong?</p>",mysql|vb.net,"<p>In fact the problem has gon when I used an open connection instead of the connection object ! Thank you, plutonix. I have obviously overseen in the documentation that the connection has to be open. </p>

<p>So the corrent code is now:</p>

<pre><code>Dim SQLstr As String = ""SELECT COUNT(*) FROM lieferantenartikel WHERE LiefID=1 AND LfAIDLief=1""
Dim cConn as New MySqlConnection(strConn)
cConn.Open()
Dim CheckExist As New MySqlCommand(SQLstr, cConn)
Try
    Dim recEx As Integer = CheckExist.ExecuteScalar()
Catch ex As Exception
    MessageBox.Show(ex.Message)
End Try
</code></pre>

<p>Thank you very much for your quick help!e</p>",0
30896080,Why does MysqlCommand.ExecuteScalar return System.NullReferenceException,"<p>I am using MySQL in a VB 2013 project. I am trying to get the number of records in a table running </p>

<pre><code>Dim SQLstr As String = ""SELECT COUNT(*) FROM lieferantenartikel WHERE LiefID=1 AND LfAIDLief=1""
Dim CheckExist As New MySqlCommand(SQLstr, New MySqlConnection(strConn))
Try
    Dim recEx As Integer = CheckExist.ExecuteScalar()
Catch ex As Exception
    MessageBox.Show(ex.Message)
End Try
</code></pre>

<p>By definition COUNT(*) is supposed to return a scalar number, i.e. 0 if no records exist or otherwise any other positive number. </p>

<p>But I am getting a System.NullReferenceException. What am I doing wrong?</p>",mysql|vb.net,"<p>I had similar issues. This happened when a table had no entries. You can Do a workaround with ""ISNULL"". But maybe there is a better way. </p>",0
4455035,Cross table update in MySQL,"<p>I'm writing a trigger that will do a cross table update, but I can't get the desired result. I'm working with one param, and that is messageId. Using that messageId, I need to go into the messages table and find the userId @messageId, then update his/her score: <strong>(@messageId is coming from an insert into a third table, so really it's NEW.messageId)</strong></p>

<pre><code>      UPDATE users
      SET users.score = users.score + 1
      WHERE users.id = messages.userId
</code></pre>

<p>I need to select messages.userId @messageId from messages, but the trigger will not let me do a select statement, so I'm a bit stuck!</p>

<p>I tried this, which does not seem to work either:</p>

<pre><code>      UPDATE users, messages
      INNER JOIN messages ON messages.id = NEW.messageId
      SET users.score = users.score + 1
      WHERE users.id = messages.userId
</code></pre>

<p>PS: I'm not really looking to select anything, I just want to update the users table by referencing it though the messages table, which is in turn being referenced by NEW.messageId</p>",mysql|triggers|sql-update,"<p>I do not know of there being a way to insert a select statement into a trigger. However, you can use the following syntax if you are looking to monitor for changes in a user's score:</p>

<pre><code>CREATE TRIGGER score_update
    BEFORE UPDATE ON score_table
    REFERENCING NEW ROW AS n, OLD ROW AS o
    FOR EACH ROW
    IF n.score &lt;&gt; o.score
    THEN
    END IF;
;
</code></pre>",1
4455035,Cross table update in MySQL,"<p>I'm writing a trigger that will do a cross table update, but I can't get the desired result. I'm working with one param, and that is messageId. Using that messageId, I need to go into the messages table and find the userId @messageId, then update his/her score: <strong>(@messageId is coming from an insert into a third table, so really it's NEW.messageId)</strong></p>

<pre><code>      UPDATE users
      SET users.score = users.score + 1
      WHERE users.id = messages.userId
</code></pre>

<p>I need to select messages.userId @messageId from messages, but the trigger will not let me do a select statement, so I'm a bit stuck!</p>

<p>I tried this, which does not seem to work either:</p>

<pre><code>      UPDATE users, messages
      INNER JOIN messages ON messages.id = NEW.messageId
      SET users.score = users.score + 1
      WHERE users.id = messages.userId
</code></pre>

<p>PS: I'm not really looking to select anything, I just want to update the users table by referencing it though the messages table, which is in turn being referenced by NEW.messageId</p>",mysql|triggers|sql-update,"<p>Triggers are not supposed to be used for selects, they are there to perform update, inserts or deletes after some action like an update or insert/delete has taken place.</p>

<p>Refer to: </p>

<p><a href=""http://dev.mysql.com/doc/refman/5.0/en/triggers.html"" rel=""nofollow"">http://dev.mysql.com/doc/refman/5.0/en/triggers.html</a></p>

<p>for a primer on MySql triggers.</p>",2
4455035,Cross table update in MySQL,"<p>I'm writing a trigger that will do a cross table update, but I can't get the desired result. I'm working with one param, and that is messageId. Using that messageId, I need to go into the messages table and find the userId @messageId, then update his/her score: <strong>(@messageId is coming from an insert into a third table, so really it's NEW.messageId)</strong></p>

<pre><code>      UPDATE users
      SET users.score = users.score + 1
      WHERE users.id = messages.userId
</code></pre>

<p>I need to select messages.userId @messageId from messages, but the trigger will not let me do a select statement, so I'm a bit stuck!</p>

<p>I tried this, which does not seem to work either:</p>

<pre><code>      UPDATE users, messages
      INNER JOIN messages ON messages.id = NEW.messageId
      SET users.score = users.score + 1
      WHERE users.id = messages.userId
</code></pre>

<p>PS: I'm not really looking to select anything, I just want to update the users table by referencing it though the messages table, which is in turn being referenced by NEW.messageId</p>",mysql|triggers|sql-update,"<p>In order for a multi-table update to occur, there needs to be a join EVEN if the joined table is not updated.  A simple comma acts as shorthand or you can use any JOIN syntax.  In your case, simply add messages.</p>

<pre><code>      UPDATE users, messages
      SET users.score = users.score + 1
      WHERE users.id = messages.userId
</code></pre>",1
4648724,Facebook style messaging system schema design,"<p>I'm looking to implement a facebook style messaging system (thread messages) into a site of mine.</p>

<p>Do you think this schema markup looks okay?</p>

<p><img src=""https://i.stack.imgur.com/zNWeJ.jpg"" alt=""alt text""></p>

<p>Doctrine schema.yml:</p>

<pre><code>UserMessage:
  tableName: user_message
  actAs: [Timestampable]
  columns:
    id: { type: integer(10), primary: true, autoincrement: true }
    sender_id : { type: integer(10), notnull: true }
    sender_read: { type: boolean, default: 1 }
    subject: { type: string(255), notnull: true }
    message: { type: string(1000), notnull: true }
    hash: { type: string(32), notnull: true }
  relations:
    UserMessageRecipient as Recipient:
      type: many
      local: id
      foreign: message_id
    UserMessageReply as Reply:
      type: many
      local: id
      foreign: message_id
UserMessageReply:
  tableName: user_message_reply
  columns:
    id: { type: integer(10), primary: true, autoincrement: true }
    user_message_id as message_id: { type: integer(10), notnull: true }
    message: { type: string(1000), notnull: true }
    sender_id: { type: integer(10), notnull: true }
  relations:
    UserMessage as Message:
      local: message_id
      foreign: id
      type: one
UserMessageRecipient:
  tableName: user_message_recipient
  actAs: [Timestampable]
  columns:
    id: { type: integer(10), primary: true, autoincrement: true }
    user_message_id as message_id: { type: integer(10), notnull: true }
    recipient_id: { type: integer(10), notnull: true }
    recipient_read: { type: boolean, default: 0 }
</code></pre>

<p>When I a new reply is made,i'll make sure the boolean for ""recipient_read"" for each recipient is set to false and of course i'll make sure sender_read is set to false too. </p>

<p>I'm using a hash for the URL: <a href=""http://example.com/user/messages/aadeb18f8bdaea49882ec4d2a8a3c062"" rel=""nofollow noreferrer"">http://example.com/user/messages/aadeb18f8bdaea49882ec4d2a8a3c062</a></p>

<p>(As the id will be starting from 1, i don't wish to have <a href=""http://example.com/user/messages/1"" rel=""nofollow noreferrer"">http://example.com/user/messages/1</a>. Yeah, I could start incrementing from a bigger number, but i'd prefer to start at 1.)</p>

<p>Is this a good way to go about it? Your thoughts and suggestions would be hugely appreciated.</p>

<p>Thanks guys!</p>",mysql|database-design|symfony1|doctrine,"<p>i also tried to create a message system using database, the most common flaw is forgot that every user have different state of read-unread message. i hardly showing in database scheme, but in short you must consider to create flag like isread for every user for every user_message and user_message_reply, so every user just see the unread message.</p>",0
4648724,Facebook style messaging system schema design,"<p>I'm looking to implement a facebook style messaging system (thread messages) into a site of mine.</p>

<p>Do you think this schema markup looks okay?</p>

<p><img src=""https://i.stack.imgur.com/zNWeJ.jpg"" alt=""alt text""></p>

<p>Doctrine schema.yml:</p>

<pre><code>UserMessage:
  tableName: user_message
  actAs: [Timestampable]
  columns:
    id: { type: integer(10), primary: true, autoincrement: true }
    sender_id : { type: integer(10), notnull: true }
    sender_read: { type: boolean, default: 1 }
    subject: { type: string(255), notnull: true }
    message: { type: string(1000), notnull: true }
    hash: { type: string(32), notnull: true }
  relations:
    UserMessageRecipient as Recipient:
      type: many
      local: id
      foreign: message_id
    UserMessageReply as Reply:
      type: many
      local: id
      foreign: message_id
UserMessageReply:
  tableName: user_message_reply
  columns:
    id: { type: integer(10), primary: true, autoincrement: true }
    user_message_id as message_id: { type: integer(10), notnull: true }
    message: { type: string(1000), notnull: true }
    sender_id: { type: integer(10), notnull: true }
  relations:
    UserMessage as Message:
      local: message_id
      foreign: id
      type: one
UserMessageRecipient:
  tableName: user_message_recipient
  actAs: [Timestampable]
  columns:
    id: { type: integer(10), primary: true, autoincrement: true }
    user_message_id as message_id: { type: integer(10), notnull: true }
    recipient_id: { type: integer(10), notnull: true }
    recipient_read: { type: boolean, default: 0 }
</code></pre>

<p>When I a new reply is made,i'll make sure the boolean for ""recipient_read"" for each recipient is set to false and of course i'll make sure sender_read is set to false too. </p>

<p>I'm using a hash for the URL: <a href=""http://example.com/user/messages/aadeb18f8bdaea49882ec4d2a8a3c062"" rel=""nofollow noreferrer"">http://example.com/user/messages/aadeb18f8bdaea49882ec4d2a8a3c062</a></p>

<p>(As the id will be starting from 1, i don't wish to have <a href=""http://example.com/user/messages/1"" rel=""nofollow noreferrer"">http://example.com/user/messages/1</a>. Yeah, I could start incrementing from a bigger number, but i'd prefer to start at 1.)</p>

<p>Is this a good way to go about it? Your thoughts and suggestions would be hugely appreciated.</p>

<p>Thanks guys!</p>",mysql|database-design|symfony1|doctrine,"<p>What about this model?</p>

<pre><code>MESSAGES              USER_MESSAGES
========              =============
id                    id
content               message_id
reply_message_id      recipent_id
                      read
                      trash
                      hide
</code></pre>",1
4648724,Facebook style messaging system schema design,"<p>I'm looking to implement a facebook style messaging system (thread messages) into a site of mine.</p>

<p>Do you think this schema markup looks okay?</p>

<p><img src=""https://i.stack.imgur.com/zNWeJ.jpg"" alt=""alt text""></p>

<p>Doctrine schema.yml:</p>

<pre><code>UserMessage:
  tableName: user_message
  actAs: [Timestampable]
  columns:
    id: { type: integer(10), primary: true, autoincrement: true }
    sender_id : { type: integer(10), notnull: true }
    sender_read: { type: boolean, default: 1 }
    subject: { type: string(255), notnull: true }
    message: { type: string(1000), notnull: true }
    hash: { type: string(32), notnull: true }
  relations:
    UserMessageRecipient as Recipient:
      type: many
      local: id
      foreign: message_id
    UserMessageReply as Reply:
      type: many
      local: id
      foreign: message_id
UserMessageReply:
  tableName: user_message_reply
  columns:
    id: { type: integer(10), primary: true, autoincrement: true }
    user_message_id as message_id: { type: integer(10), notnull: true }
    message: { type: string(1000), notnull: true }
    sender_id: { type: integer(10), notnull: true }
  relations:
    UserMessage as Message:
      local: message_id
      foreign: id
      type: one
UserMessageRecipient:
  tableName: user_message_recipient
  actAs: [Timestampable]
  columns:
    id: { type: integer(10), primary: true, autoincrement: true }
    user_message_id as message_id: { type: integer(10), notnull: true }
    recipient_id: { type: integer(10), notnull: true }
    recipient_read: { type: boolean, default: 0 }
</code></pre>

<p>When I a new reply is made,i'll make sure the boolean for ""recipient_read"" for each recipient is set to false and of course i'll make sure sender_read is set to false too. </p>

<p>I'm using a hash for the URL: <a href=""http://example.com/user/messages/aadeb18f8bdaea49882ec4d2a8a3c062"" rel=""nofollow noreferrer"">http://example.com/user/messages/aadeb18f8bdaea49882ec4d2a8a3c062</a></p>

<p>(As the id will be starting from 1, i don't wish to have <a href=""http://example.com/user/messages/1"" rel=""nofollow noreferrer"">http://example.com/user/messages/1</a>. Yeah, I could start incrementing from a bigger number, but i'd prefer to start at 1.)</p>

<p>Is this a good way to go about it? Your thoughts and suggestions would be hugely appreciated.</p>

<p>Thanks guys!</p>",mysql|database-design|symfony1|doctrine,"<p>What's the difference between user_message.created_at and user_message_recipient.created_at?</p>

<p>Same question for updated_at. (Later: I guess user_message_recipient.updated_at might be the time the recipient read the message. If that's the case, I'd prefer a more meaningful name.)</p>

<p>Did you consider digging into some source code for open source projects that are intended to be Facebook replacements?</p>

<blockquote>
  <p>When I a new reply is made,i'll make sure the boolean for ""recipient_read"" for each recipient is set to false and of course i'll make sure sender_read is set to false too.</p>
</blockquote>

<p>I hope that means the dbms will verify those Booleans are set correctly.</p>",0
4512842,django-admin.py sqlflush error during tests,"<p>I have a set of tests in my Django application that used to pass, but at some point of the software evolution I started to get this kind of message when I run the tests:</p>

<p>Error: Database test_totomanager_demo couldn't be flushed. Possible reasons:<br>
&nbsp;&nbsp;* The database isn't running or isn't configured correctly.<br>
&nbsp;&nbsp;* At least one of the expected database tables doesn't exist.<br>
&nbsp;&nbsp;* The SQL was invalid.<br>
Hint: Look at the output of 'django-admin.py sqlflush'. That's the SQL this command wasn't able to run.<br>
The full error: (1105, ""MyISAM table 'video_videoinstallation' is in use (most likely by a MERGE table). Try FLUSH TABLES."")</p>

<p>The database is MySQL.</p>

<p>The exact test in which this error starts to occur is unpredictable. It's not the first time it happens, but after one or two tries it used to pass, this time I can't make the tests reach the end.</p>

<p>Any hint on how to avoid this?</p>",mysql|django|myisam,"<p>I was just having this problem myself and realized it's because I had not yet created a migration for a model change.</p>

<p>Try:</p>

<pre><code>./manage.py schemamigration &lt;your_app_name&gt; --auto
</code></pre>

<p>I have south migrations installed in this virtualenv, so that's probably a requirement if you don't want to write the migration yourself.</p>",0
4512842,django-admin.py sqlflush error during tests,"<p>I have a set of tests in my Django application that used to pass, but at some point of the software evolution I started to get this kind of message when I run the tests:</p>

<p>Error: Database test_totomanager_demo couldn't be flushed. Possible reasons:<br>
&nbsp;&nbsp;* The database isn't running or isn't configured correctly.<br>
&nbsp;&nbsp;* At least one of the expected database tables doesn't exist.<br>
&nbsp;&nbsp;* The SQL was invalid.<br>
Hint: Look at the output of 'django-admin.py sqlflush'. That's the SQL this command wasn't able to run.<br>
The full error: (1105, ""MyISAM table 'video_videoinstallation' is in use (most likely by a MERGE table). Try FLUSH TABLES."")</p>

<p>The database is MySQL.</p>

<p>The exact test in which this error starts to occur is unpredictable. It's not the first time it happens, but after one or two tries it used to pass, this time I can't make the tests reach the end.</p>

<p>Any hint on how to avoid this?</p>",mysql|django|myisam,"<p>It is probably because your table type is MyISAM which locks the whole table, if you don't need ""FULL TEXT SEARCH"" in this table then you should make it an innodb table.</p>

<p>I don't know how django tests run, but one possible solution is to run one test at a time instead of running them all at once to avoid testing while table is locked.</p>",1
4512842,django-admin.py sqlflush error during tests,"<p>I have a set of tests in my Django application that used to pass, but at some point of the software evolution I started to get this kind of message when I run the tests:</p>

<p>Error: Database test_totomanager_demo couldn't be flushed. Possible reasons:<br>
&nbsp;&nbsp;* The database isn't running or isn't configured correctly.<br>
&nbsp;&nbsp;* At least one of the expected database tables doesn't exist.<br>
&nbsp;&nbsp;* The SQL was invalid.<br>
Hint: Look at the output of 'django-admin.py sqlflush'. That's the SQL this command wasn't able to run.<br>
The full error: (1105, ""MyISAM table 'video_videoinstallation' is in use (most likely by a MERGE table). Try FLUSH TABLES."")</p>

<p>The database is MySQL.</p>

<p>The exact test in which this error starts to occur is unpredictable. It's not the first time it happens, but after one or two tries it used to pass, this time I can't make the tests reach the end.</p>

<p>Any hint on how to avoid this?</p>",mysql|django|myisam,"<p>Use python's TestCase class instead of Django's.</p>

<pre><code>Replace

from django.test import TestCase
class TestChrono(TestCase):

with

import unittest
class TestChrono(unittest.TestCase):
</code></pre>

<p><strong>This is workaround solution but definately it will not affect your test case if you are not using fixtures. Django Testcase try to play with transaction management and so you are getting this error.</strong></p>",0
4548637,MySQL Insert Into datetime = NOW() is not working?,"<p>I have the following code (php, mysql, pdo):</p>

<pre><code>$stmt = $db-&gt;prepare(""INSERT INTO agent_temp SET party=?, date = NOW()"");
$stmt-&gt;execute(array($party));
</code></pre>

<p>when run, the party is insert correctly but the date is not inserting as it should (the system date and time at action). I have verified numerous times the field type for date is datetime.</p>

<p>Any ideas?</p>

<h1>EDIT</h1>

<p>To give actual data and the results returned:</p>

<p>assume the following:</p>

<p>$party = 'John';</p>

<p>the results return:</p>

<pre><code>party      |      date    
-------------------------------------
John       |    0000-00-00 00:00:00
</code></pre>

<p>update:</p>

<p>When i run the following code directly within a mysql query browser, the insert works just as it should:</p>

<p>insert into agent_temp set party = 'John', date = NOW();</p>

<p>returning:</p>

<pre><code>party      |      date    
-------------------------------------
John       |    2010-12-28 13:15:23
</code></pre>

<h2>ANSWERED</h2>

<p>Well, who is ready to kill me? I have no idea what caught it up but unfortunately the issue seemingly was due to an earlier version of the php script from my machine being cached and still running bad data. I refreshed, closed, and emptied my browser and now the script works. My apologies for making everybody's brains melt just a little.</p>",php|mysql|pdo,"<p>I'm not sure which system you are using, but I would think your prepare statement will be adding quotation around the <code>NOW()</code> part - causing the statement to try and insert <em>NOW()</em> instead of running the mysql function <code>NOW()</code> - thus because the field can't store the characters <em>NOW()</em> you get the 000-00.....</p>

<p>Out of interest, try changing the field type from <code>DATETIME</code> to <code>TEXT</code> and see what you get when you run the command.</p>",1
4548637,MySQL Insert Into datetime = NOW() is not working?,"<p>I have the following code (php, mysql, pdo):</p>

<pre><code>$stmt = $db-&gt;prepare(""INSERT INTO agent_temp SET party=?, date = NOW()"");
$stmt-&gt;execute(array($party));
</code></pre>

<p>when run, the party is insert correctly but the date is not inserting as it should (the system date and time at action). I have verified numerous times the field type for date is datetime.</p>

<p>Any ideas?</p>

<h1>EDIT</h1>

<p>To give actual data and the results returned:</p>

<p>assume the following:</p>

<p>$party = 'John';</p>

<p>the results return:</p>

<pre><code>party      |      date    
-------------------------------------
John       |    0000-00-00 00:00:00
</code></pre>

<p>update:</p>

<p>When i run the following code directly within a mysql query browser, the insert works just as it should:</p>

<p>insert into agent_temp set party = 'John', date = NOW();</p>

<p>returning:</p>

<pre><code>party      |      date    
-------------------------------------
John       |    2010-12-28 13:15:23
</code></pre>

<h2>ANSWERED</h2>

<p>Well, who is ready to kill me? I have no idea what caught it up but unfortunately the issue seemingly was due to an earlier version of the php script from my machine being cached and still running bad data. I refreshed, closed, and emptied my browser and now the script works. My apologies for making everybody's brains melt just a little.</p>",php|mysql|pdo,"<p>This is a pure <code>INSERT</code> statement, it does not update any rows.</p>",1
4548637,MySQL Insert Into datetime = NOW() is not working?,"<p>I have the following code (php, mysql, pdo):</p>

<pre><code>$stmt = $db-&gt;prepare(""INSERT INTO agent_temp SET party=?, date = NOW()"");
$stmt-&gt;execute(array($party));
</code></pre>

<p>when run, the party is insert correctly but the date is not inserting as it should (the system date and time at action). I have verified numerous times the field type for date is datetime.</p>

<p>Any ideas?</p>

<h1>EDIT</h1>

<p>To give actual data and the results returned:</p>

<p>assume the following:</p>

<p>$party = 'John';</p>

<p>the results return:</p>

<pre><code>party      |      date    
-------------------------------------
John       |    0000-00-00 00:00:00
</code></pre>

<p>update:</p>

<p>When i run the following code directly within a mysql query browser, the insert works just as it should:</p>

<p>insert into agent_temp set party = 'John', date = NOW();</p>

<p>returning:</p>

<pre><code>party      |      date    
-------------------------------------
John       |    2010-12-28 13:15:23
</code></pre>

<h2>ANSWERED</h2>

<p>Well, who is ready to kill me? I have no idea what caught it up but unfortunately the issue seemingly was due to an earlier version of the php script from my machine being cached and still running bad data. I refreshed, closed, and emptied my browser and now the script works. My apologies for making everybody's brains melt just a little.</p>",php|mysql|pdo,"<p>Untested but perhaps the problem is that 'date' is a reserved word, you could try renaming your column and see if it works.</p>

<p>The other approach is to add a timestamp-field with an 'ON UPDATE CURRENT_TIMESTAMP'. </p>",1
4548637,MySQL Insert Into datetime = NOW() is not working?,"<p>I have the following code (php, mysql, pdo):</p>

<pre><code>$stmt = $db-&gt;prepare(""INSERT INTO agent_temp SET party=?, date = NOW()"");
$stmt-&gt;execute(array($party));
</code></pre>

<p>when run, the party is insert correctly but the date is not inserting as it should (the system date and time at action). I have verified numerous times the field type for date is datetime.</p>

<p>Any ideas?</p>

<h1>EDIT</h1>

<p>To give actual data and the results returned:</p>

<p>assume the following:</p>

<p>$party = 'John';</p>

<p>the results return:</p>

<pre><code>party      |      date    
-------------------------------------
John       |    0000-00-00 00:00:00
</code></pre>

<p>update:</p>

<p>When i run the following code directly within a mysql query browser, the insert works just as it should:</p>

<p>insert into agent_temp set party = 'John', date = NOW();</p>

<p>returning:</p>

<pre><code>party      |      date    
-------------------------------------
John       |    2010-12-28 13:15:23
</code></pre>

<h2>ANSWERED</h2>

<p>Well, who is ready to kill me? I have no idea what caught it up but unfortunately the issue seemingly was due to an earlier version of the php script from my machine being cached and still running bad data. I refreshed, closed, and emptied my browser and now the script works. My apologies for making everybody's brains melt just a little.</p>",php|mysql|pdo,"<p>How about:</p>

<pre><code>$stmt = $db-&gt;prepare(""INSERT INTO agent_temp SET party=?, date = ?"");
$stmt-&gt;execute(array($_POST['party'], date(""Y-m-d H:i:s"")));
</code></pre>",9
4157379,how to use zend paginate without loading all the results of a database,"<p>So the way I see zend paginate work is that you do:</p>

<pre><code>$paginator = Zend_Paginator::factory($results);
$paginator-&gt;setItemCountPerPage($itemCount);
$paginator-&gt;setPageRange($pageRange);
</code></pre>

<p>Where $results is the result of loading a bunch of items from a database in the form of </p>

<pre><code>""SELECT * FROM table WHERE etc""
</code></pre>

<p>Then zend paginate will count the number of results and generate the page ranges automatically...</p>

<p>But if you do this then you're going to have to fetch all results of a database which I see as a waste since only one page is displayed at a time and therefore you only need to fetch the items for that page...</p>

<p>how do you make zend paginate to be able to calculate the correct page ranges and numbers without resorting to fetching all the results of an entire table? </p>",php|mysql|zend-framework|zend-paginator,"<p>You must use zend paginator differently.  Please look at the <a href=""http://framework.zend.com/manual/en/zend.paginator.usage.html"" rel=""nofollow"">documentation</a> for the function.  Go down to the section 'The DbSelect and DbTableSelect adapter', it provides an example on how to select the count of records, instead of fetching all the records.</p>",0
4157379,how to use zend paginate without loading all the results of a database,"<p>So the way I see zend paginate work is that you do:</p>

<pre><code>$paginator = Zend_Paginator::factory($results);
$paginator-&gt;setItemCountPerPage($itemCount);
$paginator-&gt;setPageRange($pageRange);
</code></pre>

<p>Where $results is the result of loading a bunch of items from a database in the form of </p>

<pre><code>""SELECT * FROM table WHERE etc""
</code></pre>

<p>Then zend paginate will count the number of results and generate the page ranges automatically...</p>

<p>But if you do this then you're going to have to fetch all results of a database which I see as a waste since only one page is displayed at a time and therefore you only need to fetch the items for that page...</p>

<p>how do you make zend paginate to be able to calculate the correct page ranges and numbers without resorting to fetching all the results of an entire table? </p>",php|mysql|zend-framework|zend-paginator,"<p>It depends on what adapter that you use. If you use <code>Zend_Paginator_Adapter_Array</code>, zend paginator will calculate page range and so on by array length. But if you use <code>Zend_Paginator_Adapter_DbSelect</code>, zend paginator will automatically create query <code>select count(*) ...... as zend_paginator_row_count</code> based on your query to calculate rows count and it will not load all of your database results.</p>",0
4157379,how to use zend paginate without loading all the results of a database,"<p>So the way I see zend paginate work is that you do:</p>

<pre><code>$paginator = Zend_Paginator::factory($results);
$paginator-&gt;setItemCountPerPage($itemCount);
$paginator-&gt;setPageRange($pageRange);
</code></pre>

<p>Where $results is the result of loading a bunch of items from a database in the form of </p>

<pre><code>""SELECT * FROM table WHERE etc""
</code></pre>

<p>Then zend paginate will count the number of results and generate the page ranges automatically...</p>

<p>But if you do this then you're going to have to fetch all results of a database which I see as a waste since only one page is displayed at a time and therefore you only need to fetch the items for that page...</p>

<p>how do you make zend paginate to be able to calculate the correct page ranges and numbers without resorting to fetching all the results of an entire table? </p>",php|mysql|zend-framework|zend-paginator,"<p>Using the factory method you can send an instance of Zend_Db_Select or Zend_Db_Table_Select. If you're class extends Zend_Db_Table_Abstract you can simply build a select query from it  and then send this. If not you can create an instance and send it, see the example from the docs:</p>

<pre><code>    $adapter = new Zend_Paginator_Adapter_DbSelect($db-&gt;select()-&gt;from('posts'));
    $adapter-&gt;setRowCount(
        $db-&gt;select()
           -&gt;from(
                'item_counts',
                array(
                   Zend_Paginator_Adapter_DbSelect::ROW_COUNT_COLUMN =&gt; 'post_count'
                )
             )
    );

$paginator = new Zend_Paginator($adapter)
</code></pre>

<p><a href=""http://framework.zend.com/manual/en/zend.paginator.usage.html#zend.paginator.usage.dbselect"" rel=""nofollow"">http://framework.zend.com/manual/en/zend.paginator.usage.html#zend.paginator.usage.dbselect</a></p>",4
4157379,how to use zend paginate without loading all the results of a database,"<p>So the way I see zend paginate work is that you do:</p>

<pre><code>$paginator = Zend_Paginator::factory($results);
$paginator-&gt;setItemCountPerPage($itemCount);
$paginator-&gt;setPageRange($pageRange);
</code></pre>

<p>Where $results is the result of loading a bunch of items from a database in the form of </p>

<pre><code>""SELECT * FROM table WHERE etc""
</code></pre>

<p>Then zend paginate will count the number of results and generate the page ranges automatically...</p>

<p>But if you do this then you're going to have to fetch all results of a database which I see as a waste since only one page is displayed at a time and therefore you only need to fetch the items for that page...</p>

<p>how do you make zend paginate to be able to calculate the correct page ranges and numbers without resorting to fetching all the results of an entire table? </p>",php|mysql|zend-framework|zend-paginator,"<p>You can't do this with <code>Zend_Paginator</code> you must do this yourself but this is very simple, change the query to this form: <code>SELECT * FROM table WHERE etc LIMIT 0, 30</code> then for example in this case you will get first 30 rows, if you will be get next then use <code>SELECT * FROM table WHERE etc LIMIT 30, 60</code></p>

<p>In other way remember, function who will you get framework is always not optimal and working with simplest to implement complexity because for fastest solutions you must use some tighter in use code (i mean you can't use this code in many cases not like in worst complexity code), solutions is more dedicated to the problem, like this, you dedicating to <code>mysql</code>, <code>Paginator</code> don't work on database layer then he working only based on input where input is all rows, this code can't do this faster.</p>",0
4157379,how to use zend paginate without loading all the results of a database,"<p>So the way I see zend paginate work is that you do:</p>

<pre><code>$paginator = Zend_Paginator::factory($results);
$paginator-&gt;setItemCountPerPage($itemCount);
$paginator-&gt;setPageRange($pageRange);
</code></pre>

<p>Where $results is the result of loading a bunch of items from a database in the form of </p>

<pre><code>""SELECT * FROM table WHERE etc""
</code></pre>

<p>Then zend paginate will count the number of results and generate the page ranges automatically...</p>

<p>But if you do this then you're going to have to fetch all results of a database which I see as a waste since only one page is displayed at a time and therefore you only need to fetch the items for that page...</p>

<p>how do you make zend paginate to be able to calculate the correct page ranges and numbers without resorting to fetching all the results of an entire table? </p>",php|mysql|zend-framework|zend-paginator,"<p>Zend_Db_Select and Zend_Db_Table_Select are great ways of resolving your issue, an issue I also had to deal with only six months ago.</p>

<p>Let's assume I have a table of Books in my database and I defined a search function to allow me to do full-text searches throughout the table's fields:</p>

<p>Default_Model_DbTable_Books.php:</p>

<pre><code>public class Default_Model_DbTable_Books extends Zend_Db_Table_Abstract {

    // Other variables and methods here...

    public function search($query) {
        // Initialize Zend_Db_Table_Select object
        $select = $this-&gt;select(true);

        if (isset($query) &amp;&amp; is_string($query)) {
            // Logic for search (don't actually do this, it's horrible for performance)
            $db = $this-&gt;getAdapter();
            $where = $db-&gt;quoteInto('isbn LIKE ? OR name LIKE ? OR author LIKE ?', $query);
            $search-&gt;where($where)
                   -&gt;order('date_published DESC')
                   -&gt;group('author');
        }

        return $select;
    }
}
</code></pre>

<p>Default_Model_Mapper_Book.php:</p>

<pre><code>public class Default_Model_Mapper_Book {

    // Defined functions as per Zend Quickstart Mapper classes...

    public function search($query) {
        // Returns Zend_Db_Table_Select object
        return $this-&gt;getDbTable()-&gt;search($query);
    }
}
</code></pre>

<p>Default_BooksController.php:</p>

<pre><code>public function listAction() {
    $mapper = new Default_Model_Mapper_Book();
    $select = $mapper-&gt;search($this-&gt;_getParam(""query""));
    $paginator = Zend_Paginator::factory($select);
}
</code></pre>",0
32003669,Changing decimal places of a Double value MySQL,<p>I have a database table called <strong>druginfo</strong>. It contains prices in <strong>WSprice</strong> column. Type of <strong>WSprice</strong> column is Double. This means It can contain like 23.5698 values. But I want to show all the values in the column <strong>WSprice</strong>   2 decimal places rounded like 23.57. How to apply that to all values in the column? Help me to do this.</p>,mysql,"<p>I think we need to use <code>CAST()</code> instead of <code>ROUND()</code>.</p>

<p>The reason behind is <code>ROUND()</code> return decimal values when decimal value exists in the database.</p>

<p><strong>Example</strong>: </p>

<pre><code>SELECT ROUND(columnName, 2)
FROM tableName
</code></pre>

<p>if columnName = <code>10.5</code> Output will be like <code>10.50</code></p>

<p>But if columnName = <code>10</code> Output will be like <code>10</code></p>

<p>And <code>CAST()</code> will return decimal value. But we need <code>DECIMAL</code> with <code>CAST</code></p>

<pre><code>SELECT CAST(columnName AS DECIMAL(10,2))
FROM tableName
</code></pre>

<p>The output will be like <code>10.00</code></p>",0
32003669,Changing decimal places of a Double value MySQL,<p>I have a database table called <strong>druginfo</strong>. It contains prices in <strong>WSprice</strong> column. Type of <strong>WSprice</strong> column is Double. This means It can contain like 23.5698 values. But I want to show all the values in the column <strong>WSprice</strong>   2 decimal places rounded like 23.57. How to apply that to all values in the column? Help me to do this.</p>,mysql,"<p>If you only want to <em>display</em> your <code>DOUBLE</code> column to 2 decimal places, you can use the <code>ROUND</code> function:</p>

<pre><code>SELECT ROUND(column_name, 2)
FROM your_table
</code></pre>

<p>This will display a value of <code>23.5698</code> as  <code>23.57</code> in the result set.</p>

<p>If you want to <em>change</em> the format of the entire column you can use this:</p>

<pre><code>ALTER TABLE your_table MODIFY column_name DECIMAL(9, 2)
</code></pre>",5
34290996,Constraints regarding NEW and OLD in MySQL triggers,"<p>In the book ""MySQL Administrator's Bible"", the authors dicuss some constraints regarding the combination of events, timing and the key-words NEW and OLD in triggers. What they say is the following:</p>

<p>-BEFORE INSERT: NEW is supported with BEFORE INSERT. BEFORE does not support OLD.</p>

<p>-AFTER INSERT: AFTER does not support NEW. It does not make sense to use OLD with AFTER INSERT.</p>

<p>-BEFORE UPDATE: NEW is supported with BEFORE UPDATE. BEFORE does not support OLD.</p>

<p>-AFTER UPDATE: AFTER does not support NEW. AFTER UPDATE supports OLD.</p>

<p>-BEFORE DELETE: It does not make sense to use NEW with BEFORE DELETE. BEFORE does not support OLD.</p>

<p>-AFTER DELETE: AFTER does not support NEW. OLD is supported with AFTER DELETE.</p>

<p>That is, according to the book, for example, I cannot use NEW when I'm using AFTER. However, in the following trigger this is exactly what I'm doing. If some new employee is inserted, I store this employee in a backup table called employee_history.</p>

<pre class=""lang-sql prettyprint-override""><code>CREATE TRIGGER insert_emplyee_history
AFTER INSERT ON EMPLOYEE
FOR EACH ROW
 INSERT INTO EMPLOYEE_HISTORY VALUES (NEW.NOME,NEW.SSN,NEW.SALARIO,NEW.DNO);
</code></pre>

<p>This trigger works as expected in MySQL 5.7.</p>

<p>Is the book wrong?
Maybe these constraints have changed in the last versions (5.7).</p>

<p>I would like to know what are the constraints regarding the combinations of events, times and OLD and NEW.</p>",mysql|database|stored-procedures|triggers,"<p>A couple of items mentioned in the documentation:</p>

<p><a href=""http://dev.mysql.com/doc/refman/5.7/en/trigger-syntax.html"" rel=""nofollow"">19.3.1 Trigger Syntax and Examples</a></p>

<ul>
<li><blockquote>
  <p>In an INSERT trigger, only NEW.col_name can be used; there is no old
  row.</p>
</blockquote></li>
<li><blockquote>
  <p>(Such a SET statement has no effect in an AFTER trigger because the
  row change will have already occurred.)</p>
</blockquote></li>
</ul>

<p>It is perfectly valid to use <code>NEW</code> in <code>AFTER</code>, but is not valid <code>SET NEW... := ...;</code></p>

<pre class=""lang-sql prettyprint-override""><code>DELIMITER //

CREATE TRIGGER `insert_emplyee_history` AFTER INSERT ON `EMPLOYEE`
FOR EACH ROW
BEGIN
  INSERT INTO `EMPLOYEE_HISTORY`
  VALUES
  (NEW.`NOME`, NEW.`SSN`, NEW.`SALARIO`, NEW.`DNO`);
  -- SET NEW.`NOME` := 'NOME' -- NOT VALID IN AFTER
END//

DELIMITER ;
</code></pre>

<p><kbd><a href=""http://sqlfiddle.com/#!9/c5457/1"" rel=""nofollow"">SQL Fiddle demo</a></kbd></p>",2
34095349,Group Messaging Fetch Associative Array from mysql,"<p>My Group messaging system uses an array to control numbers and names</p>

<pre><code>$people = array(
    ""+14031234567"" =&gt; ""Test Black Berry"",
    ""+14038999999"" =&gt; ""Test Android"",
    ""+14036519999"" =&gt; ""Test iPhone"",
);
</code></pre>

<p>I have attempted to use php to get this information from a mysql db</p>

<pre><code>&lt;?php
include(""config.php"");
$connect = new mysqli(""$dbhost"",""$dbuser"",""$dbpass"",""$dbname"")
or die (mysqli_error());

$people=$connect-&gt;query(""SELECT phone, name FROM contacts"");
        while($row=$people-&gt;fetch_array(MYSQLI_ASSOC)){
        echo 
        $row ['phone']."" =&gt; "".$row['name']."",""; 
        }
?&gt;
</code></pre>

<p>which gives me the result</p>

<pre><code>   +14037777777 =&gt; Test Black Berry,
   +14038888888 =&gt; Test Android,
   +14039999999 =&gt; Test iPhone,
</code></pre>

<p>Close but not quite all the way.  What am I missing.  Thanks in advance for the help</p>",php|mysqli,"<pre><code>This the final code that works in my Message App 

&lt;?php
include(""../../lib/config.php"");
$conn=mysqli_connect(""$dbhost"",""$dbuser"",""$dbpass"",""$dbname"")
or die (mysqli_error());
$query = ""SELECT phone, name FROM grouplist"";
$result = mysqli_query($conn, $query);
$people = array();
while ($row = mysqli_fetch_assoc($result)) {
    $people[$row['phone']] = $row['name'];
}   
?&gt;
</code></pre>",0
33943259,Linq to EF not returning all data,"<p>I have following query against EF whereby mysql was used:</p>

<pre><code>var query = from r in context.myContext
            where r.clmn1.CompareTo(""2015-11-19 00:00:00"") &gt; 0)
            orderby r.someColumn
            select r;
return query;
</code></pre>

<p>The number of returned rows is as expected. however some values of the property <code>r.clmn2</code> repeat itself in the result of the query. For example I could not find <code>clmn2 == 220011</code> because it was ""overwritten"" by the value 220033 (The value <code>220033</code> is correct and expected but should not ""overwrite"" other values). Strangely enough, when I add this condition to the query I get it in the result (of course then only and only this value) which means that the first condition is also valid for <code>clmn2</code>:</p>

<pre><code>var query = from r in context.myContext
            where r.clmn1.CompareTo(""2015-11-19 00:00:00"") &gt; 0) &amp;&amp; r.clmn2.Equals(""220011"")
            orderby r.someColumn
            select r;
return query;
</code></pre>

<p>The same query (the first one) works at DB-level and returns all values (will not be overwritten) </p>

<pre><code>SELECT * FROM myContext.myTable
WHERE r.clmn1 &gt; (""2015-11-19 00:00:00"")
ORDER BY r.someColumn
</code></pre>

<p>It should be a problem of EF. I hope someone could help me!</p>

<p>Thanks in Advance. </p>",mysql|entity-framework|linq,"<p>I have prefixed the column/property clmn2 with [key] atribute in the generated entity class so that it is now a part of the multiple key, i.e., with other columns/properties. It works and i get all values from DB. Maybe cus this property comes from a DB-view, Visual Studio could not recognize it as a primary key as done by other properties.</p>",0
34045640,setText in AsyncTask android,"<p>I need to update a textView with data from remote db MYSQL, but I have a problem when I try to update the textview in AsyncTask.I tryed everything but it always give me a void textview.
This is my code:</p>

<pre><code>public class Credits extends Activity implements OnClickListener{

private Button home;
private String user;
public TextView totSpesa;
private ProgressDialog pDialog;


JSONParser jsonParser = new JSONParser();

private static final String URL = ""http://**********/services.php"";


private static final String TAG_SUCCESS = ""success"";
private static final String TAG_MESSAGE = ""message"";
private static final String TAG_ERROR_MESSAGE = ""error_msg"";
@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_credits);
    user=PreferenceManager.getDefaultSharedPreferences(getApplicationContext()).getString(""id"", """"); 
    totSpesa= (TextView)findViewById(R.id.tot_spesa);

    home = (Button)findViewById(R.id.home_btn);

    home.setOnClickListener(this);

}

@Override
public void onClick(View v) {
    // TODO Auto-generated method stub
    switch (v.getId()) {
    case R.id.home_btn:
        Intent i = new Intent(Credits.this, MainActivity.class);
        startActivity(i);
        break;

    default:
        break;
    }
}

class AttemptCredits extends AsyncTask&lt;String, String, String&gt; {

     /**
     * Before starting background thread Show Progress Dialog
     * */
    boolean failure = false;

    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        pDialog = new ProgressDialog(Credits.this);
        pDialog.setIndeterminate(false);
        pDialog.setCancelable(true);
        pDialog.show();

    }

    @Override
    protected String doInBackground(String... args) {
        // TODO Auto-generated method stub


        //Intent in = getIntent();
        //user = in.getStringExtra(""id"");
        String tot_spesa="""";
        try {

            List&lt;NameValuePair&gt; params = new ArrayList&lt;NameValuePair&gt;();
            params.add(new BasicNameValuePair(""tag"", ""get_credits""));
            params.add(new BasicNameValuePair(""username"", user));

            Log.d(""request!"", ""starting"");

            JSONObject json = jsonParser.makeHttpRequest(
                    URL, ""POST"", params);

                tot_spesa=json.getString(""tot_spesa"");    


        } catch (JSONException e) {
            e.printStackTrace();
        }
        return tot_spesa;



    }
    /**
     * After completing background task Dismiss the progress dialog
     * **/
    @Override
    protected void onPostExecute(String tot_spesa) {

        totSpesa.setText(tot_spesa);   

    }

}


}
</code></pre>",android|mysql|android-asynctask,"<p>Maybe I'm missing something but I don't think you're actually launching your <code>AsyncTask</code>.</p>

<p>Try to do : </p>

<pre><code>new AttemptCredits().execute(user);
</code></pre>

<p>In <code>onCreate</code>,
and get your user in <code>doInBackground</code> with </p>

<pre><code>user = args[1];
</code></pre>",4
43976488,SQL query sailors,"<pre><code>Sailor (SID, Sname, Age)  
Boat (BID, Bname, Color)  
Reserve (SID, BID, Day) ------
</code></pre>

<p>With this schema how would it be possible to</p>

<p>Find all sailors names who have reserved only green boats</p>

<p>I can only managed to get all sailors who have reserved green boats </p>

<p>Any help would be appreciated</p>",mysql|sql,"<p>In this query, I have selected all those sailors who have reserved boats other than 'green'. They might have taken green also but their SID will get captured in the 'in' query. Outer query (Outside in) will exclude and give Sailors who have reserved only green boats through 'not in' statement in 'where' clause.</p>

<p>You could use left join also to do the same instead of a 'not in' clause but i prefer 'not in' over 'left join' as this will be much more efficient than 'left join' specially in case of large tables</p>

<p>Try this:-</p>

<pre><code>Select a.SID,a.Sname,a.Age
from
Sailor a
inner join
Reserve b
on a.SID=b.SID
inner join
Boat c
on b.BID=c.BID
where c.Color='green'
and a.SID not in
(
Select a.SID
from
Sailor a
inner join
Reserve b
on a.SID=b.SID
inner join
Boat c
on b.BID=c.BID
where c.Color &lt;&gt; 'green'
) ;
</code></pre>

<p>Hope this helps!!!</p>",1
43976488,SQL query sailors,"<pre><code>Sailor (SID, Sname, Age)  
Boat (BID, Bname, Color)  
Reserve (SID, BID, Day) ------
</code></pre>

<p>With this schema how would it be possible to</p>

<p>Find all sailors names who have reserved only green boats</p>

<p>I can only managed to get all sailors who have reserved green boats </p>

<p>Any help would be appreciated</p>",mysql|sql,"<p>One another way:</p>

<pre><code>select Sailor.* from Boat 
inner join 
(
     select Reserve.sid, Reserve.bid from Reserve
     inner join (select SID from Reserve group by SID having count(distinct BID) = 1) t
     on Reserve.SID = t.SID
) tt
on Boat.bid = tt.bid
inner join Sailor
on Sailor.sid = tt.sid
where
Boat.color = 'green'
</code></pre>

<p>Well, ""tt"" subquery contains only those rows (SID and BID) from <code>Reserve</code> table, where SID's have only one unique BID. So, if SID have reserved 2 or more different BID's, these rows are ignored.</p>

<p>Then we  join this to <code>Boat</code> table and using filter <code>where Boat.color = 'green'</code> we only get those rows,  which Boat's color is green.</p>

<p>If in <code>Reserve</code> table, one SID have unique BID's, then you can remove <code>distinct</code> keyword from query</p>",1
44068762,javax.ejb.EJBException: javax.persistence.PersistenceException: org.hibernate.exception.DataException: could not execute statement,"<p>i'm getting this error:</p>

<pre><code>Caused by: com.mysql.jdbc.MysqlDataTruncation: Data truncation: Incorrect integer value: 'ANTIQUES Value 1' for column 'category' at row 1
</code></pre>

<p>after selecting a value from selectOneMenu and trying to save the entity into database; the selectOneMenu is populated with SelectItemGroup:</p>

<pre><code>private List&lt;SelectItem&gt; options = new ArrayList&lt;SelectItem&gt;();

    public CategoryBean()
    {
        SelectItemGroup group1 = new SelectItemGroup(""ANTIQUES"");
        group1.setSelectItems(new SelectItem[] {
            new SelectItem(""ANTIQUES Value 1"", ""European Antiques""),
            new SelectItem(""ANTIQUES Value 1"", ""Asian Antiques""),
            new SelectItem(""ANTIQUES Value 2"", ""Furniture""),
            new SelectItem(""ANTIQUES Value 3"", ""Books and Manuscripts""),
            new SelectItem(""ANTIQUES Value 3"", ""Architecture"")
        });
        options.add(group1);

        SelectItemGroup group2 = new SelectItemGroup(""ART"");
        group2.setSelectItems(new SelectItem[] {
            new SelectItem(""ART Value 1"", ""PAINTINGS""),
            new SelectItem(""ART Value 4"", ""HANDMADE ART""),
            new SelectItem(""ART Value 5"", ""PHOTOS"")
        });
        options.add(group2);
</code></pre>

<p>..</p>

<p>and the selected value is stored as a String in the entity table</p>

<p>Any idea? 
Thanks in advance!</p>",mysql|jpa,"<p>Take a look at the <code>@Entity</code> bean and at table definition (especially at the column <code>category</code>).
According to your log, seems like <code>category</code> is defined like <code>String</code> in entity bean, but <code>integer</code> in table.
So, either define table column like <code>varchar</code> or define field <code>category</code> in bean like <code>int</code> and correct class for menu items.</p>",0
14489710,Selecting MySQL datetime columns which are 0000-00-00 00:00:00,"<p>I'm looking for a simple way to select datetime columns which are 000-00-00 00:00:00 (basically the default unset value).</p>

<p>The following query seems to be working:</p>

<pre><code>SELECT * FROM myTable WHERE datetimeCol &lt; 1
</code></pre>

<p>But will this reliably work all the time and across different mysql versions?</p>",mysql|database|datetime,"<p>Try this:</p>

<p><code>SELECT * FROM myTable WHERE UNIX_TIMESTAMP(datetimeCol) = 0</code></p>",2
14489710,Selecting MySQL datetime columns which are 0000-00-00 00:00:00,"<p>I'm looking for a simple way to select datetime columns which are 000-00-00 00:00:00 (basically the default unset value).</p>

<p>The following query seems to be working:</p>

<pre><code>SELECT * FROM myTable WHERE datetimeCol &lt; 1
</code></pre>

<p>But will this reliably work all the time and across different mysql versions?</p>",mysql|database|datetime,"<p>Try this:</p>

<pre><code>SELECT * FROM myTable WHERE datetimeCol = '0000-00-00 00:00:00'
</code></pre>

<p>Might seem obvious in hindsight ;)</p>",4
14489710,Selecting MySQL datetime columns which are 0000-00-00 00:00:00,"<p>I'm looking for a simple way to select datetime columns which are 000-00-00 00:00:00 (basically the default unset value).</p>

<p>The following query seems to be working:</p>

<pre><code>SELECT * FROM myTable WHERE datetimeCol &lt; 1
</code></pre>

<p>But will this reliably work all the time and across different mysql versions?</p>",mysql|database|datetime,"<p>What about comparing to <code>0</code> value:</p>

<pre><code>datetimeCol = 0
</code></pre>",3
14489710,Selecting MySQL datetime columns which are 0000-00-00 00:00:00,"<p>I'm looking for a simple way to select datetime columns which are 000-00-00 00:00:00 (basically the default unset value).</p>

<p>The following query seems to be working:</p>

<pre><code>SELECT * FROM myTable WHERE datetimeCol &lt; 1
</code></pre>

<p>But will this reliably work all the time and across different mysql versions?</p>",mysql|database|datetime,"<p>I would check for ""zero"" dates like this:</p>

<pre><code>SELECT * FROM myTable WHERE datetimeCol = CONVERT(0,DATETIME)
</code></pre>

<p>I would prefer the equality predicate over an inequality predicate; it seems to convey my intentions more clearly. And if there are more predicates in the statement, and if the datetimeCol is a leading column in an index, it may help the optimizer make use of a multi-column index.</p>",7
14554517,PHP Commands Out of Sync error,"<p>I am using two prepared statements in PHP/MySQLi to retrieve data from a mysql database.  However, when I run the statements, I get the ""Commands out of sync, you can't run the command now"" error.</p>

<p>Here is my code:</p>

<pre><code>    $stmt = $mysqli-&gt;prepare(""SELECT id, username, password, firstname, lastname, salt FROM members WHERE email = ? LIMIT 1"";
    $stmt-&gt;bind_param('s', $loweredEmail);
    $stmt-&gt;execute();
    $stmt-&gt;store_result();
    $stmt-&gt;bind_result($user_id, $username, $db_password, $firstname, $lastname, $salt);
    $stmt-&gt;fetch();

    $stmt-&gt;free_result();
    $stmt-&gt;close();

    while($mysqli-&gt;more_results()){
        $mysqli-&gt;next_result();
    }

    $stmt1 = $mysqli-&gt;prepare(""SELECT privileges FROM delegations WHERE id = ? LIMIT 1"");
    //This is where the error is generated
    $stmt1-&gt;bind_param('s', $user_id);
    $stmt1-&gt;execute();
    $stmt1-&gt;store_result();
    $stmt1-&gt;bind_result($privileges);
    $stmt1-&gt;fetch();
</code></pre>

<p>What I've tried:</p>

<ul>
<li>Moving the prepared statements to two separate objects.</li>
<li><p>Using the code:</p>

<pre><code>while($mysqli-&gt;more_results()){
    $mysqli-&gt;next_result();
}
//To make sure that no stray result data is left in buffer between the first
//and second statements
</code></pre></li>
<li>Using free_result() and mysqli_stmt->close()</li>
</ul>

<p>PS: The 'Out of Sync' error comes from the second statement's '$stmt1->error'</p>",php|mysql|mysqli,"<p>""Commands out of sync; you can't run this command now""</p>

<p>Details about this error can be found in the mysql docs. Reading those details makes it clear that the result sets of a prepared statement execution need to be fetched completely before executing another prepared statement on the same connection.</p>

<p>Fixing the issue can be accomplished by using the store result call. Here is an example of what I initially was trying to do:</p>

<pre><code>&lt;?php

  $db_connection = new mysqli('127.0.0.1', 'user', '', 'test');

  $post_stmt = $db_connection-&gt;prepare(""select id, title from post where id = 1000"");
  $comment_stmt = $db_connection-&gt;prepare(""select user_id from comment where post_id = ?"");

  if ($post_stmt-&gt;execute())
  {
    $post_stmt-&gt;bind_result($post_id, $post_title);

    if ($post_stmt-&gt;fetch())
    {
      $comments = array();

      $comment_stmt-&gt;bind_param('i', $post_id);
      if ($comment_stmt-&gt;execute())
      {
        $comment_stmt-&gt;bind_result($user_id);
        while ($comment_stmt-&gt;fetch())
        {
          array_push($comments, array('user_id' =&gt; $user_id));
        }
      }
      else
      {
        printf(""Comment statement error: %s\n"", $comment_stmt-&gt;error);
      }
    }
  }
  else
  {
    printf(""Post statement error: %s\n"", $post_stmt-&gt;error);
  }

  $post_stmt-&gt;close();
  $comment_stmt-&gt;close();

  $db_connection-&gt;close();

  printf(""ID: %d -&gt; %s\n"", $post_id, $post_title);
  print_r($comments);
?&gt;
</code></pre>

<p>The above will result in the following error:</p>

<p>Comment statement error: Commands out of sync; you can't run this command now</p>

<p>PHP Notice:  Undefined variable: post_title in error.php on line 41
ID: 9033 -&gt;
Array
(
)</p>

<p>Here is what needs to be done to make it work correctly:</p>

<pre><code>&lt;?php

  $db_connection = new mysqli('127.0.0.1', 'user', '', 'test');

  $post_stmt = $db_connection-&gt;prepare(""select id, title from post where id = 1000"");
  $comment_stmt = $db_connection-&gt;prepare(""select user_id from comment where post_id = ?"");

  if ($post_stmt-&gt;execute())
  {
    $post_stmt-&gt;store_result();
    $post_stmt-&gt;bind_result($post_id, $post_title);

    if ($post_stmt-&gt;fetch())
    {
      $comments = array();

      $comment_stmt-&gt;bind_param('i', $post_id);
      if ($comment_stmt-&gt;execute())
      {
        $comment_stmt-&gt;bind_result($user_id);
        while ($comment_stmt-&gt;fetch())
        {
          array_push($comments, array('user_id' =&gt; $user_id));
        }
      }
      else
      {
        printf(""Comment statement error: %s\n"", $comment_stmt-&gt;error);
      }
    }

    $post_stmt-&gt;free_result();
  }
  else
  {
    printf(""Post statement error: %s\n"", $post_stmt-&gt;error);
  }

  $post_stmt-&gt;close();
  $comment_stmt-&gt;close();

  $db_connection-&gt;close();

  printf(""ID: %d -&gt; %s\n"", $post_id, $post_title);
  print_r($comments);
?&gt;
</code></pre>

<p>A couple things to note about the above example:</p>

<pre><code>The bind and fetch on the statement still works correctly.
Make sure the results are freed when the processing is done.
</code></pre>",6
14554517,PHP Commands Out of Sync error,"<p>I am using two prepared statements in PHP/MySQLi to retrieve data from a mysql database.  However, when I run the statements, I get the ""Commands out of sync, you can't run the command now"" error.</p>

<p>Here is my code:</p>

<pre><code>    $stmt = $mysqli-&gt;prepare(""SELECT id, username, password, firstname, lastname, salt FROM members WHERE email = ? LIMIT 1"";
    $stmt-&gt;bind_param('s', $loweredEmail);
    $stmt-&gt;execute();
    $stmt-&gt;store_result();
    $stmt-&gt;bind_result($user_id, $username, $db_password, $firstname, $lastname, $salt);
    $stmt-&gt;fetch();

    $stmt-&gt;free_result();
    $stmt-&gt;close();

    while($mysqli-&gt;more_results()){
        $mysqli-&gt;next_result();
    }

    $stmt1 = $mysqli-&gt;prepare(""SELECT privileges FROM delegations WHERE id = ? LIMIT 1"");
    //This is where the error is generated
    $stmt1-&gt;bind_param('s', $user_id);
    $stmt1-&gt;execute();
    $stmt1-&gt;store_result();
    $stmt1-&gt;bind_result($privileges);
    $stmt1-&gt;fetch();
</code></pre>

<p>What I've tried:</p>

<ul>
<li>Moving the prepared statements to two separate objects.</li>
<li><p>Using the code:</p>

<pre><code>while($mysqli-&gt;more_results()){
    $mysqli-&gt;next_result();
}
//To make sure that no stray result data is left in buffer between the first
//and second statements
</code></pre></li>
<li>Using free_result() and mysqli_stmt->close()</li>
</ul>

<p>PS: The 'Out of Sync' error comes from the second statement's '$stmt1->error'</p>",php|mysql|mysqli,"<p>In mysqli::query If you use MYSQLI_USE_RESULT all subsequent calls will return error Commands out of sync unless you call mysqli_free_result()</p>

<p>When calling multiple stored procedures, you can run into the following error: ""Commands out of sync; you can't run this command now"".
This can happen even when using the close() function on the result object between calls.
To fix the problem, remember to call the next_result() function on the mysqli object after each stored procedure call. See example below:</p>

<pre><code>&lt;?php
// New Connection
$db = new mysqli('localhost','user','pass','database');

// Check for errors
if(mysqli_connect_errno()){
 echo mysqli_connect_error();
}

// 1st Query
$result = $db-&gt;query(""call getUsers()"");
if($result){
     // Cycle through results
    while ($row = $result-&gt;fetch_object()){
        $user_arr[] = $row;
    }
    // Free result set
    $result-&gt;close();
    $db-&gt;next_result();
}

// 2nd Query
$result = $db-&gt;query(""call getGroups()"");
if($result){
     // Cycle through results
    while ($row = $result-&gt;fetch_object()){
        $group_arr[] = $row;
    }
     // Free result set
     $result-&gt;close();
     $db-&gt;next_result();
}
else echo($db-&gt;error);

// Close connection
$db-&gt;close();
?&gt;
</code></pre>

<p>I hope this will help</p>",16
14554517,PHP Commands Out of Sync error,"<p>I am using two prepared statements in PHP/MySQLi to retrieve data from a mysql database.  However, when I run the statements, I get the ""Commands out of sync, you can't run the command now"" error.</p>

<p>Here is my code:</p>

<pre><code>    $stmt = $mysqli-&gt;prepare(""SELECT id, username, password, firstname, lastname, salt FROM members WHERE email = ? LIMIT 1"";
    $stmt-&gt;bind_param('s', $loweredEmail);
    $stmt-&gt;execute();
    $stmt-&gt;store_result();
    $stmt-&gt;bind_result($user_id, $username, $db_password, $firstname, $lastname, $salt);
    $stmt-&gt;fetch();

    $stmt-&gt;free_result();
    $stmt-&gt;close();

    while($mysqli-&gt;more_results()){
        $mysqli-&gt;next_result();
    }

    $stmt1 = $mysqli-&gt;prepare(""SELECT privileges FROM delegations WHERE id = ? LIMIT 1"");
    //This is where the error is generated
    $stmt1-&gt;bind_param('s', $user_id);
    $stmt1-&gt;execute();
    $stmt1-&gt;store_result();
    $stmt1-&gt;bind_result($privileges);
    $stmt1-&gt;fetch();
</code></pre>

<p>What I've tried:</p>

<ul>
<li>Moving the prepared statements to two separate objects.</li>
<li><p>Using the code:</p>

<pre><code>while($mysqli-&gt;more_results()){
    $mysqli-&gt;next_result();
}
//To make sure that no stray result data is left in buffer between the first
//and second statements
</code></pre></li>
<li>Using free_result() and mysqli_stmt->close()</li>
</ul>

<p>PS: The 'Out of Sync' error comes from the second statement's '$stmt1->error'</p>",php|mysql|mysqli,"<p>For those of you who do the right thing and use stored procedures with prepared statements.</p>

<p>For some reason mysqli cannot free the resources when using an output variable as a parameter in the stored proc. To fix this simply return a recordset within the body of the procedure instead of storing the value in an output variable/parameter. </p>

<p>For example, instead of having SET outputVar = LAST_INSERT_ID(); you can have SELECT LAST_INSERT_ID(); Then in PHP I get the returned value like this:</p>

<pre><code>$query= ""CALL mysp_Insert_SomeData(?,?)""; 
$stmt = $mysqli-&gt;prepare($query); 
$stmt-&gt;bind_param(""is"", $input_param_1, $input_param_2); 
$stmt-&gt;execute() or trigger_error($mysqli-&gt;error); // trigger_error here is just for troubleshooting, remove when productionizing the code
$stmt-&gt;store_result();
$stmt-&gt;bind_result($output_value);
$stmt-&gt;fetch();
$stmt-&gt;free_result();
$stmt-&gt;close();
$mysqli-&gt;next_result();
echo $output_value;
</code></pre>

<p>Now you are ready to execute a second stored procedure without having the  ""Commands out of sync, you can't run the command now"" error. If you were returning more than one value in the record set you can loop through and fetch all of them like this:</p>

<pre><code>while ($stmt-&gt;fetch()) {
    echo $output_value;
}
</code></pre>

<p>If you are returning more than one record set from the stored proc (you have multiple selects), then make sure to go through all of those record sets by using $stmt->next_result();</p>",3
13342596,Select parents based on all children statisfying condition,"<p>This is such a simple problem but for some reason I cannot get my head round it today.</p>

<p>I have two entities:- <code>title</code> and <code>product</code> each respectively named <code>tbl_title</code> and <code>tbl_product</code>. Each <code>title</code> can have many <code>products</code>.</p>

<p>The product table has a field called <code>unwanted</code> which can be either <code>null</code>, <code>0</code> or <code>1</code>.</p>

<p>I wish to select all <code>title</code>s based on where all <code>product</code>s (ALL) have <code>unwanted</code> set to <code>1</code>. So in other words I wish to select the parent based upon all children filling a certain condition. So if a <code>title</code> has one <code>product</code> that is <code>unwanted</code> but another that is not I do not wish for this <code>title</code> to enter the result set.</p>

<p>When I try this the most I get out of my head is:</p>

<pre><code>SELECT * FROM `tbl_title` 
    left join tbl_product on tbl_product.title_id = tbl_title.id 
    where tbl_product.unwanted = 1 
    group by tbl_title.id
</code></pre>

<p>Which obviously does not work.</p>

<p>So how do I code such a query?</p>",mysql,"<p>Try using a subquery like this:</p>

<pre><code>SELECT * FROM `tbl_title` AS t
WHERE EXISTS (SELECT 1 FROM products WHERE title_id = t.id AND unwanted = 1)
AND NOT EXISTS (SELECT 1 FROM products WHERE title_id = t.id AND (unwanted = 0 OR unwanted IS NULL))
</code></pre>",1
13342596,Select parents based on all children statisfying condition,"<p>This is such a simple problem but for some reason I cannot get my head round it today.</p>

<p>I have two entities:- <code>title</code> and <code>product</code> each respectively named <code>tbl_title</code> and <code>tbl_product</code>. Each <code>title</code> can have many <code>products</code>.</p>

<p>The product table has a field called <code>unwanted</code> which can be either <code>null</code>, <code>0</code> or <code>1</code>.</p>

<p>I wish to select all <code>title</code>s based on where all <code>product</code>s (ALL) have <code>unwanted</code> set to <code>1</code>. So in other words I wish to select the parent based upon all children filling a certain condition. So if a <code>title</code> has one <code>product</code> that is <code>unwanted</code> but another that is not I do not wish for this <code>title</code> to enter the result set.</p>

<p>When I try this the most I get out of my head is:</p>

<pre><code>SELECT * FROM `tbl_title` 
    left join tbl_product on tbl_product.title_id = tbl_title.id 
    where tbl_product.unwanted = 1 
    group by tbl_title.id
</code></pre>

<p>Which obviously does not work.</p>

<p>So how do I code such a query?</p>",mysql,"<pre><code>SELECT t.id 
FROM `tbl_title` t
left join tbl_product p on p.title_id = t.id 
group by t.id
having sum(p.unwanted = 0 or p.unwanted is null) = 0
</code></pre>",2
13342596,Select parents based on all children statisfying condition,"<p>This is such a simple problem but for some reason I cannot get my head round it today.</p>

<p>I have two entities:- <code>title</code> and <code>product</code> each respectively named <code>tbl_title</code> and <code>tbl_product</code>. Each <code>title</code> can have many <code>products</code>.</p>

<p>The product table has a field called <code>unwanted</code> which can be either <code>null</code>, <code>0</code> or <code>1</code>.</p>

<p>I wish to select all <code>title</code>s based on where all <code>product</code>s (ALL) have <code>unwanted</code> set to <code>1</code>. So in other words I wish to select the parent based upon all children filling a certain condition. So if a <code>title</code> has one <code>product</code> that is <code>unwanted</code> but another that is not I do not wish for this <code>title</code> to enter the result set.</p>

<p>When I try this the most I get out of my head is:</p>

<pre><code>SELECT * FROM `tbl_title` 
    left join tbl_product on tbl_product.title_id = tbl_title.id 
    where tbl_product.unwanted = 1 
    group by tbl_title.id
</code></pre>

<p>Which obviously does not work.</p>

<p>So how do I code such a query?</p>",mysql,"<p>Just for the fields in <code>title</code> table</p>

<pre><code>SELECT   * 
FROM     `tbl_title` AS t
JOIN     tbl_product AS v ON t.id = v.title_id
WHERE    NOT EXISTS(
                    SELECT * 
                    FROM   tbl_product 
                    WHERE  (t.id = title_id) 
                       AND (unwanted = 0 OR unwanted IS NULL)
GROUP BY t.id
</code></pre>",0
13342596,Select parents based on all children statisfying condition,"<p>This is such a simple problem but for some reason I cannot get my head round it today.</p>

<p>I have two entities:- <code>title</code> and <code>product</code> each respectively named <code>tbl_title</code> and <code>tbl_product</code>. Each <code>title</code> can have many <code>products</code>.</p>

<p>The product table has a field called <code>unwanted</code> which can be either <code>null</code>, <code>0</code> or <code>1</code>.</p>

<p>I wish to select all <code>title</code>s based on where all <code>product</code>s (ALL) have <code>unwanted</code> set to <code>1</code>. So in other words I wish to select the parent based upon all children filling a certain condition. So if a <code>title</code> has one <code>product</code> that is <code>unwanted</code> but another that is not I do not wish for this <code>title</code> to enter the result set.</p>

<p>When I try this the most I get out of my head is:</p>

<pre><code>SELECT * FROM `tbl_title` 
    left join tbl_product on tbl_product.title_id = tbl_title.id 
    where tbl_product.unwanted = 1 
    group by tbl_title.id
</code></pre>

<p>Which obviously does not work.</p>

<p>So how do I code such a query?</p>",mysql,"<pre><code>select * from tbl_title
where id not in (select title_id from tbl_product where unwanted = 0)
</code></pre>

<p>In English, this query eliminates all titles that have a wanted product.</p>

<p><br/>
From a style point of view, it would be better to call your column <code>wanted</code>, because <code>unwanted = 0</code> is a double-negative of <code>wanted = 1</code>. It's always easier to get your head around positives.</p>",2
13546782,Getting row number from database when using where and order by statements,"<p>Ok I have tried several ways to do this but none of them work, so I have no code to show. But I will explain this the best I can.</p>

<p>I have a contest script, and I am wanting to add a line that will show the user which place they are in under the list of current winners. So I want the table to look like this.</p>

<pre><code>-----------------------------------------
| Place |    User   | Prize | Completed |
|   1   | Someuser1 | $5.00 |     5     |
|   2   | Someuser2 | $2.50 |     3     |
|   3   | Someuser3 | $1.25 |     2     |
|   20  |    You    |  ---  |     1     |
-----------------------------------------
</code></pre>

<p>I have everything for the so called someusers, but I want to be able to count where the current user that is viewing the page can see where they stand in the contest. What kind of query could I run to get the place in which the current user is. </p>

<p>I hope that makes sense with no code.</p>

<p>Table structure</p>

<pre><code>    Column   |  Type | Null |  Default
--------------------------------------
    id       |int(11)|  No  |   
    username |text   |  No  |   
    completed|int(11)|  No  |   
</code></pre>",php|mysql,"<p>Okay, from what I understand, there are two ways I can think of doing it.</p>

<ol>
<li><p>Have 2 queries. First query to get the top 3, then one to get the user place</p>

<pre><code># First query to get top three

if (  user not in top three) {
     $db-&gt;prepare('SELECT whatever FROM table WHERE user = ?')-&gt;execute(array($user));
}
</code></pre></li>
<li><p>Retrieve all the results, display the top three and display the one with the current user.</p></li>
</ol>

<p>EDIT: Bill's answer seems better :)</p>",0
13546782,Getting row number from database when using where and order by statements,"<p>Ok I have tried several ways to do this but none of them work, so I have no code to show. But I will explain this the best I can.</p>

<p>I have a contest script, and I am wanting to add a line that will show the user which place they are in under the list of current winners. So I want the table to look like this.</p>

<pre><code>-----------------------------------------
| Place |    User   | Prize | Completed |
|   1   | Someuser1 | $5.00 |     5     |
|   2   | Someuser2 | $2.50 |     3     |
|   3   | Someuser3 | $1.25 |     2     |
|   20  |    You    |  ---  |     1     |
-----------------------------------------
</code></pre>

<p>I have everything for the so called someusers, but I want to be able to count where the current user that is viewing the page can see where they stand in the contest. What kind of query could I run to get the place in which the current user is. </p>

<p>I hope that makes sense with no code.</p>

<p>Table structure</p>

<pre><code>    Column   |  Type | Null |  Default
--------------------------------------
    id       |int(11)|  No  |   
    username |text   |  No  |   
    completed|int(11)|  No  |   
</code></pre>",php|mysql,"<p>There are a couple of ways to do this.  One is to count how many rows have a higher rank than the given row:</p>

<pre><code>SELECT COUNT(*) AS Place, t.*
FROM TheTable t
LEFT OUTER JOIN TheTable t2 ON t.Prize &lt; t2.Prize
GROUP BY t.id
HAVING Place &lt;= 3 OR user = 'You';
</code></pre>

<p>Another is to use a session variable to track the ranking:</p>

<pre><code>SELECT * FROM (
  SELECT (@row := COALESCE(@row, 0)+1) AS Place, t.*
  FROM TheTable t
  ORDER BY Prize DESC) r
WHERE Place &lt;= 3 OR user = 'You';
</code></pre>",2
21431448,java.lang.illegalargumentexception:cannot set a null TableModel,"<p>I have made a jframe where i have to provide the medicine name and manufacturer name,,then click the search button..
and it will fetch the data from the mysql database and show in the jtable.
the jframe looks like this:
<img src=""https://i.stack.imgur.com/otdgA.png"" alt=""enter image description here""></p>

<p>but when i am giving only medicine name and clicking search button.its not fetching the data ,its just fetching the column names from the database..:
<img src=""https://i.stack.imgur.com/QREYx.png"" alt=""enter image description here""></p>

<p>and when i am giving both the values its giving  :java.lang.illegalargumentexception:cannot set a null TableModel:
<img src=""https://i.stack.imgur.com/ZpKtB.png"" alt=""enter image description here""></p>

<p>My srch_btnActionPerformed method is:</p>

<pre><code>private void srch_btnActionPerformed(java.awt.event.ActionEvent evt)         {                                         
// TODO add your handling code here:
/*if((jTextField1.getText())!=null || (jTextField2.getText())!=null)
{*/
String sql=""select * from medicine where med_name=? or manufacturer_name=?"";
try{
pst=conn.prepareStatement(sql);
pst.setString(1, jTextField1.getText());
pst.setString(2,jTextField2.getText());
rs=pst.executeQuery();


if(rs.next()){
jTable1.setModel(DbUtils.resultSetToTableModel(rs));

}
else 
{
JOptionPane.showMessageDialog(null, ""No entry with such names in DataBase!"");
jTextField1.setText(null);
jTextField2.setText(null);
}

}
catch(Exception e)
{
JOptionPane.showMessageDialog(null,e);

}

/* */
}            
</code></pre>

<p>Please help..</p>",java|mysql|swing|exception|jtable,<p>Simply you can fix it.... in your database dont set null values for date add dates then this will be ok if there is any other that you didnt specifically mentioned length of the type those attributes also cannot be the null </p>,0
21431448,java.lang.illegalargumentexception:cannot set a null TableModel,"<p>I have made a jframe where i have to provide the medicine name and manufacturer name,,then click the search button..
and it will fetch the data from the mysql database and show in the jtable.
the jframe looks like this:
<img src=""https://i.stack.imgur.com/otdgA.png"" alt=""enter image description here""></p>

<p>but when i am giving only medicine name and clicking search button.its not fetching the data ,its just fetching the column names from the database..:
<img src=""https://i.stack.imgur.com/QREYx.png"" alt=""enter image description here""></p>

<p>and when i am giving both the values its giving  :java.lang.illegalargumentexception:cannot set a null TableModel:
<img src=""https://i.stack.imgur.com/ZpKtB.png"" alt=""enter image description here""></p>

<p>My srch_btnActionPerformed method is:</p>

<pre><code>private void srch_btnActionPerformed(java.awt.event.ActionEvent evt)         {                                         
// TODO add your handling code here:
/*if((jTextField1.getText())!=null || (jTextField2.getText())!=null)
{*/
String sql=""select * from medicine where med_name=? or manufacturer_name=?"";
try{
pst=conn.prepareStatement(sql);
pst.setString(1, jTextField1.getText());
pst.setString(2,jTextField2.getText());
rs=pst.executeQuery();


if(rs.next()){
jTable1.setModel(DbUtils.resultSetToTableModel(rs));

}
else 
{
JOptionPane.showMessageDialog(null, ""No entry with such names in DataBase!"");
jTextField1.setText(null);
jTextField2.setText(null);
}

}
catch(Exception e)
{
JOptionPane.showMessageDialog(null,e);

}

/* */
}            
</code></pre>

<p>Please help..</p>",java|mysql|swing|exception|jtable,"<p>Try something like this:</p>

<p>//Global Declaration</p>

<pre><code>private Vector&lt;Vector&lt;String&gt;&gt; data; //used for data from database
private Vector&lt;String&gt; header; //used to store data header
</code></pre>

<p>//Display only header on form load</p>

<pre><code>//create header for the table
header = new Vector&lt;String&gt;();
header.add(""Column1""); 
header.add(""Column2"");
...
model=new DefaultTableModel(data,header);
table = new JTable(model);
</code></pre>

<p>//in actionPerformed()</p>

<pre><code>public void actionPerformed(ActionEvent ae){
    if(ae.getSource()==search){
data=get();

        for(int i=0;i&lt;count;i++){
        Object[] d={data.get(i).get(0),data.get(i).get(1),data.get(i).get(2)};
        model.addRow(d);
}
}
    }
</code></pre>

<p>This will help you to get data from database</p>

<pre><code>get(){
Vector&lt;Vector&lt;String&gt;&gt; doublevector = new Vector&lt;Vector&lt;String&gt;&gt;();

Connection conn = dbConnection();//Your Database connection code
PreparedStatement pre1 = conn.prepareStatement(""select * from Table"");

ResultSet rs1 = pre1.executeQuery();
while(rs1.next())
{
Vector&lt;String&gt; singlevector = new Vector&lt;String&gt;();
singlevector.add(rs1.getString(1)); 
singlevector.add(rs1.getString(2)); 
....
doublevector.add(singlevector);
}

return doublevector;
}
</code></pre>",2
21431448,java.lang.illegalargumentexception:cannot set a null TableModel,"<p>I have made a jframe where i have to provide the medicine name and manufacturer name,,then click the search button..
and it will fetch the data from the mysql database and show in the jtable.
the jframe looks like this:
<img src=""https://i.stack.imgur.com/otdgA.png"" alt=""enter image description here""></p>

<p>but when i am giving only medicine name and clicking search button.its not fetching the data ,its just fetching the column names from the database..:
<img src=""https://i.stack.imgur.com/QREYx.png"" alt=""enter image description here""></p>

<p>and when i am giving both the values its giving  :java.lang.illegalargumentexception:cannot set a null TableModel:
<img src=""https://i.stack.imgur.com/ZpKtB.png"" alt=""enter image description here""></p>

<p>My srch_btnActionPerformed method is:</p>

<pre><code>private void srch_btnActionPerformed(java.awt.event.ActionEvent evt)         {                                         
// TODO add your handling code here:
/*if((jTextField1.getText())!=null || (jTextField2.getText())!=null)
{*/
String sql=""select * from medicine where med_name=? or manufacturer_name=?"";
try{
pst=conn.prepareStatement(sql);
pst.setString(1, jTextField1.getText());
pst.setString(2,jTextField2.getText());
rs=pst.executeQuery();


if(rs.next()){
jTable1.setModel(DbUtils.resultSetToTableModel(rs));

}
else 
{
JOptionPane.showMessageDialog(null, ""No entry with such names in DataBase!"");
jTextField1.setText(null);
jTextField2.setText(null);
}

}
catch(Exception e)
{
JOptionPane.showMessageDialog(null,e);

}

/* */
}            
</code></pre>

<p>Please help..</p>",java|mysql|swing|exception|jtable,"<p>To pass null in your sql query,
You can replace</p>

<pre><code>pst.setString(1, jTextField1.getText());
pst.setString(2,jTextField2.getText());
</code></pre>

<p>by following code:</p>

<pre><code>if ( jTextField1.getText() == null)
    pst.setNull(1, Types.VARCHAR);
else
    pst.setString(1, jTextField1.getText());

if ( jTextField2.getText() == null)
    pst.setNull(2, Types.VARCHAR);
else
    pst.setString(2, jTextField2.getText());
</code></pre>",0
21544719,cron tab to execute rails commands,"<p>i am running a cron tab for every 5 minutes,it contains an .sh files which need to be executed ,where that .sh file consists of ruby code....one thing i can't understand that when i am executing the .sh file directly in terminal its get execute,but the same thing in crontab fails..my entry in crontab follows :</p>

<pre><code>1) mysqldump -uroot -p'myPassword' redmine144 &gt; redmine144_$(date +%Y_%m_%d_%H_%M).sql;

2) cd /home/ror/Projects/redmine144/;
source /usr/local/rvm/environments/ruby-1.9.3-p194@redmine144
bundle exec rake ""hb:project_progress""
</code></pre>

<p>First one to take backup and it is working fine.
Second one to run some ruby rake task(not working form cron tab)</p>",mysql|ruby|ubuntu,"<p>Making RVM work with cron is really tricky. I'll share a snippet from my own crontab that is proven to work (with system-wide RVM) - just make sure your app path has a <code>.rvmrc</code> specifying the ruby version and gemset.</p>

<pre><code>MAILTO=mymail@gmail.com
SHELL=/bin/bash
? ? ? ? ? source /etc/profile.d/rvm.sh; cd /app/home/path &amp;&amp; bundle exec rake whatever_you_need RAILS_ENV=production
</code></pre>

<p><code>SHELL</code> is important.</p>

<p>The <code>MAILTO</code> is there to aid debugging and could be removed later.</p>

<p>Don't forget to substitute your schedule for the question marks.</p>",0
21544719,cron tab to execute rails commands,"<p>i am running a cron tab for every 5 minutes,it contains an .sh files which need to be executed ,where that .sh file consists of ruby code....one thing i can't understand that when i am executing the .sh file directly in terminal its get execute,but the same thing in crontab fails..my entry in crontab follows :</p>

<pre><code>1) mysqldump -uroot -p'myPassword' redmine144 &gt; redmine144_$(date +%Y_%m_%d_%H_%M).sql;

2) cd /home/ror/Projects/redmine144/;
source /usr/local/rvm/environments/ruby-1.9.3-p194@redmine144
bundle exec rake ""hb:project_progress""
</code></pre>

<p>First one to take backup and it is working fine.
Second one to run some ruby rake task(not working form cron tab)</p>",mysql|ruby|ubuntu,"<p>usually crontab output in not directed to stdout so you check your out put in /var/log/cron file which contains the cron logs. you can add the output and redirect the error, for more see <a href=""http://www.thegeekstuff.com/2012/07/crontab-log/"" rel=""nofollow"">http://www.thegeekstuff.com/2012/07/crontab-log/</a> and check what error pops upp and you'll be able to figure it out...</p>",2
21822498,why Python doesn't convert \n to newline when queried from Sqlite?,"<p>I want to query from Sqlite and contains \n and I expect python converts it to newline but it doesn't. and I also changed \n to \n in the database but still can't be converted. </p>

<pre><code>cursor.execute('''SELECT test FROM table_name ''')
for row in cursor:
        self.ui.textEdit.append(row[0])
        # or 
        print row[0]
</code></pre>

<p>I also tried <code>unicode(row[0])</code> and not working. I am surprised there is no an easy solution for this in the web. </p>",python|mysql|sqlite|pyqt,"<p>Neither SQLite nor Python convert characters in strings (except for <code>\</code> escapes in a Python string written in the source code).
Newlines work correctly if you handle them correctly:</p>

<pre><code>&gt;&gt;&gt; import sqlite3
&gt;&gt;&gt; db = sqlite3.connect(':memory:')
&gt;&gt;&gt; c = db.cursor()
&gt;&gt;&gt; c.execute('create table t(x)')
&gt;&gt;&gt; c.execute(""insert into t values ('x\ny')"")
&gt;&gt;&gt; c.execute(""insert into t values ('x\\ny')"")
&gt;&gt;&gt; c.execute(""select * from t"")
&gt;&gt;&gt; for row in c:
...   print row[0]
...
x
y
x\ny
</code></pre>",1
21544291,Compare dates in mysql,"<p>I have date in MYSQL table in the following format 
""2014-01-04"" &amp; the field name is ""date"".
I want all the database entries (Table name : wp_seasons) for last 3 days by comparing this ""date"" field &amp; current date. 
Can anyone suggest what will be the MYSQL query?</p>",php|mysql|database,"<p>If date in your table is string then either u have to convert this string into DateTime of MySql</p>

<p>or</p>

<p>you have to create the three Php Date time object and compare as the @Maulik suggested..</p>

<pre><code>&lt;?php
$today = date('Y-m-d');
$p1_date = date('Y-m-d', strtotime($today .' -1 day'));
$p2_date = date('Y-m-d', strtotime($today .' -2 day'));

 $query=""SELECT * FROM Tablename Where date="".$today."" or date="".$p1_date."" or date="".$p2_date ;
  mysql_query($query);

?&gt;
</code></pre>",0
21544291,Compare dates in mysql,"<p>I have date in MYSQL table in the following format 
""2014-01-04"" &amp; the field name is ""date"".
I want all the database entries (Table name : wp_seasons) for last 3 days by comparing this ""date"" field &amp; current date. 
Can anyone suggest what will be the MYSQL query?</p>",php|mysql|database,"<p>SELECT * FROM <code>wp_seasons</code> WHERE DATE(date) = DATE_SUB(DATE(NOW()),INTERVAL 3 DAY)</p>",0
21544291,Compare dates in mysql,"<p>I have date in MYSQL table in the following format 
""2014-01-04"" &amp; the field name is ""date"".
I want all the database entries (Table name : wp_seasons) for last 3 days by comparing this ""date"" field &amp; current date. 
Can anyone suggest what will be the MYSQL query?</p>",php|mysql|database,"<pre><code>&lt;?php
 $query=""SELECT * FROM Tablename Where date &lt; ""strtotime(date('d_m_y'));
  mysql_query($query);
?&gt;
</code></pre>",0
21544291,Compare dates in mysql,"<p>I have date in MYSQL table in the following format 
""2014-01-04"" &amp; the field name is ""date"".
I want all the database entries (Table name : wp_seasons) for last 3 days by comparing this ""date"" field &amp; current date. 
Can anyone suggest what will be the MYSQL query?</p>",php|mysql|database,"<p>You have to use mysql <a href=""http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_datediff"" rel=""nofollow"">DateDiff</a> function   </p>

<pre><code>SELECT * FROM Tablename  WHERE DATEDIFF(now(),date) &lt;=3
</code></pre>",0
21433880,Truncate database automatically without event scheduler?,"<p>My host (<a href=""http://blueangelhost.com"" rel=""nofollow"">blueangelhost.com</a>) claims that I can't use the event scheduler because it takes up too many resources. I have access to cron jobs in cPanel, but I've tried and they don't seem to work.</p>

<p>So, my question: Is there any kind of efficient PHP code that will automatically truncate a MySQL table in a database?</p>",php|mysql,"<p>Well, if it needs to be automatic, or at a specific time, not really. But you could have your website trigger the script when someone gets on it, here's the approach you could use:</p>

<p>On a script that is run on every page (header, menu,footer, layout):</p>

<pre><code>Check in DB or file, the date of the last truncate;
If the date is yesterday, run the truncate;
Change DB or file and put current date;
</code></pre>

<p>This way, it will execute once a day. But never at the same time, and not if no one walks on your website for a whole day.</p>",0
54380695,Display 50 rows per page from mysql in table but allow to search whole table,"<p>I have an mysql table which table which display over 10,000 data in page. </p>

<p>I am using an ajax search where on typing the name, it automatically display result.</p>

<p>I want to Limit the no. of rows displayed in page since 10,000 rows does take lot of space and also don't look very professional. 
For this I used</p>

<pre><code>LIMIT  10
</code></pre>

<p>and It displays only 10 rows in page but problem is then I'm restricted to search within this 10 rows. If I type any other name in search box which don't below to any rows of this Ten, Then it don't find anything.</p>

<p>So is there anyway to hide the rest of rows and only show 100 per page and also allow to search for whole table.</p>

<p>Here is my code to display result.</p>

<p><div class=""snippet"" data-lang=""js"" data-hide=""false"" data-console=""true"" data-babel=""false"">
<div class=""snippet-code"">
<pre class=""snippet-code-html lang-html prettyprint-override""><code>&lt;input type=""text"" style=""height:35px; color:#222;"" name=""filter"" value="""" id=""filter"" placeholder=""Search Students..."" autocomplete=""off"" /&gt;
&lt;br&gt;&lt;br&gt;
&lt;table class=""hoverTable"" id=""resultTable"" data-responsive=""table"" style=""text-align: left;""&gt;
 &lt;thead&gt;
  &lt;tr&gt;
  
   &lt;th width=""20%""&gt; Full Name &lt;/th&gt;
   &lt;th width=""15%""&gt; District&lt;/th&gt;
   &lt;th width=""5%""&gt; Gender &lt;/th&gt;
   &lt;th width=""5%""&gt; Year &lt;/th&gt;
   &lt;th width=""25%""&gt; Email&lt;/th&gt;
   &lt;th width=""5%""&gt; Phone&lt;/th&gt;

  &lt;/tr&gt;
 &lt;/thead&gt;
 &lt;tbody&gt;
  
   &lt;?php
   
    include('../connect.php');
    $result = $db-&gt;prepare(""SELECT * FROM student ORDER BY id DESC"");
    $result-&gt;execute();
    for($i=0; $row = $result-&gt;fetch(); $i++){
    
   ?&gt;
  

   &lt;td&gt;  &lt;a  href=""viewstudentuser.php?id=&lt;?php echo $row['id']; ?&gt;""&gt; &lt;?php echo $row['name']; ?&gt; &lt;?php echo $row['last_name']; ?&gt; &lt;/a&gt; &lt;/td&gt;
   &lt;td&gt;&lt;?php echo $row['district']; ?&gt;&lt;/td&gt;
   &lt;td&gt;&lt;?php echo $row['gender']; ?&gt;&lt;/td&gt;
   &lt;td&gt;&lt;?php echo $row['yoa']; ?&gt;&lt;/td&gt;
   &lt;td&gt;&lt;?php echo $row['email']; ?&gt;&lt;/td&gt;
   &lt;td&gt;&lt;?php echo $row['phone']; ?&gt;&lt;/td&gt;
  
   &lt;/tr&gt;
   &lt;?php
    }
   ?&gt;
  
  
  
 &lt;/tbody&gt;</code></pre>
</div>
</div>
</p>

<p>Any help is appreciated.</p>",javascript|php|mysql|sql|mysqli,"<p>You need to use <code>LIMIT</code> in conjunction with <code>OFFSET</code>.</p>

<p>Example for <code>per_page = 50</code> and <code>page = 3</code> </p>

<pre><code>SELECT * FROM student 
WHERE some_column LIKE '%search%'
LIMIT (3 - 1)*50, 50
ORDER BY id DESC
</code></pre>

<p>You can view some examples here <a href=""https://www.geeksforgeeks.org/php-mysql-limit-clause"" rel=""nofollow noreferrer"">https://www.geeksforgeeks.org/php-mysql-limit-clause</a> </p>",0
54541227,Simulate rank in mysql (without rank) with two conditions,"<p>Coming from this answer: <a href=""https://stackoverflow.com/questions/26613999/rank-based-on-two-columns/26614886#comment95862818_26614886"">Rank based on two columns</a></p>

<p>I've the following example:</p>

<pre><code>CREATE TABLE tmpPoradi 
    (`player` int, `wins` int, `diff` int)
;

INSERT INTO tmpPoradi 
    (`player`, `wins`, `diff`)
VALUES
    (1, 10, 12),
    (2, 8, 2),
    (3, 10, 10),
    (4, 8, 1),
    (5, 8, 7),
    (6, 10, 14),
    (8, 10, 10),
   (7, 12, 3)
;
</code></pre>

<p>and the desired result must be:</p>

<pre><code>+--------+------+------+------+
| player | wins | diff | rank |
+--------+------+------+------+
|      7 |   12 |    3 |    1 |
|      6 |   10 |   14 |    2 |
|      1 |   10 |   12 |    3 |
|      3 |   10 |   10 |    4 |
|      8 |   10 |   10 |    4 |
|      5 |    8 |    7 |    5 |
|      2 |    8 |    2 |    6 |
|      4 |    8 |    1 |    7 |
+--------+------+------+------+
</code></pre>

<p>The thing is that the original answer returns the row count:</p>

<pre><code> SELECT player, wins, diff,rank from
 (
 SELECT player, wins, diff, @winrank := @winrank + 1 AS rank
 from tmpPoradi,(SELECT @winrank := 0) r 
 ORDER BY wins DESC,diff DESC
 )  rt
ORDER BY rank 
</code></pre>

<p>returns:</p>

<pre><code>+---------+-------+-------+-------+
|  player |  wins |  diff |  rank |
+---------+-------+-------+-------+
|       7 |    12 |     3 |     1 |
|       6 |    10 |    14 |     2 |
|       1 |    10 |    12 |     3 |
|       3 |    10 |    10 |     4 |
|       8 |    10 |    10 |     5 |
|       5 |     8 |     7 |     6 |
|       2 |     8 |     2 |     7 |
|       4 |     8 |     1 |     8 |
+---------+-------+-------+-------+
</code></pre>

<p>and my attemp with conditions returns the following result: (dont know why)</p>

<pre><code>  SELECT player, wins, diff,rank from
 (
 SELECT player, wins, diff, @winrank := IF(wins = diff,@winrank,@winrank + 1) AS rank
 from tmpPoradi,(SELECT @winrank := 0) r 
 ORDER BY wins DESC,diff DESC
 )  rt
ORDER BY rank 


+---------+-------+-------+-------+
|  player |  wins |  diff |  rank |
+---------+-------+-------+-------+
|       7 |    12 |     3 |     1 |
|       6 |    10 |    14 |     2 |
|       3 |    10 |    10 |     3 |
|       8 |    10 |    10 |     3 |
|       1 |    10 |    12 |     3 |
|       5 |     8 |     7 |     4 |
|       2 |     8 |     2 |     5 |
|       4 |     8 |     1 |     6 |
+---------+-------+-------+-------+
</code></pre>

<p>so the question is:</p>

<p><strong>What I'm doing wrong and how can achieve rank by wins and then if wins are tied, subrank by diff, and then if diff are tied, rank are the same?</strong></p>",mysql|ranking|dense-rank,"<p><strong><a href=""https://rextester.com/ICBR75166"" rel=""nofollow noreferrer"">SQL DEMO</a></strong></p>

<pre><code>  SELECT player, wins, diff, dense_rank, rank, dense_val, prev_wins, prev_diff
  FROM
     (
         SELECT player, 
                wins,                 
                diff, 
                @dense_rank := IF(wins = @prev_wins and diff = @prev_diff, @dense_rank, @dense_rank + @dense_val ) AS dense_rank,                
                @dense_val  := IF(wins = @prev_wins and diff = @prev_diff, @dense_val + 1 , 1) as dense_val,
                @rank := @rank + 1 as rank,
                @prev_wins := wins as prev_wins,
                @prev_diff := diff as prev_diff

         FROM tmpPoradi,(SELECT @dense_rank := 0, @dense_val := 1, @rank := 0, @prev_wins := 0, @prev_diff := 0) r 
         ORDER BY wins DESC,diff DESC
     )  rt
  ORDER BY rank 
</code></pre>

<p><strong>OUTPUT</strong></p>

<p><a href=""https://i.stack.imgur.com/ywrS6.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/ywrS6.png"" alt=""enter image description here""></a></p>",1
54553574,Can't input variables into MYSQL DB from PHP,"<p>I'm trying to put some <code>PHP</code> variables into a <code>MYSQL</code> database. </p>

<p>Any idea where my code is going wrong?</p>

<pre><code>    $servername = ""127.0.0.1"";
    $username = ""root"";
    $password = """";
    $DBname = ""questionnaire"";
    $conn = new mysqli($servername, $username, $password,$DBname);
    if ($conn-&gt;connect_error) {
        die(""Connection failed: "" . $conn-&gt;connect_error);
    } 
    $favisit = mysqli_real_escape_string($conn,$favisit);
    $favanimal = mysqli_real_escape_string($conn,$favanimal);
    $age = mysqli_real_escape_string($conn,$age);
    $area = mysqli_real_escape_string($conn,$area);

    $sql = ""USE questionnaire; INSERT INTO info (favVisit, favAnimals, age,area)
    VALUES ('$favisit','$favanimal','$age' ,'$area')"";
    if ($conn-&gt;query($sql) === TRUE) {
        echo ""Inputted"";
    } else {
        echo ""failed"";
    }
</code></pre>",php|mysqli,<p>The query did not need a USE questionnaire as i had already connected to it</p>,1
54553574,Can't input variables into MYSQL DB from PHP,"<p>I'm trying to put some <code>PHP</code> variables into a <code>MYSQL</code> database. </p>

<p>Any idea where my code is going wrong?</p>

<pre><code>    $servername = ""127.0.0.1"";
    $username = ""root"";
    $password = """";
    $DBname = ""questionnaire"";
    $conn = new mysqli($servername, $username, $password,$DBname);
    if ($conn-&gt;connect_error) {
        die(""Connection failed: "" . $conn-&gt;connect_error);
    } 
    $favisit = mysqli_real_escape_string($conn,$favisit);
    $favanimal = mysqli_real_escape_string($conn,$favanimal);
    $age = mysqli_real_escape_string($conn,$age);
    $area = mysqli_real_escape_string($conn,$area);

    $sql = ""USE questionnaire; INSERT INTO info (favVisit, favAnimals, age,area)
    VALUES ('$favisit','$favanimal','$age' ,'$area')"";
    if ($conn-&gt;query($sql) === TRUE) {
        echo ""Inputted"";
    } else {
        echo ""failed"";
    }
</code></pre>",php|mysqli,"<p>As you are creating a string in $sql, so you have to close string quotes for accessing php variable.
e.g $string=""your data '"".$phpvar.""';
Try this :</p>

<pre><code>$servername = ""127.0.0.1"";
    $username = ""root"";
    $password = """";
    $DBname = ""questionnaire"";
    $conn = new mysqli($servername, $username, $password,$DBname);
    if ($conn-&gt;connect_error) {
        die(""Connection failed: "" . $conn-&gt;connect_error);
    } 
    $favisit = mysqli_real_escape_string($conn,$favisit);
    $favanimal = mysqli_real_escape_string($conn,$favanimal);
    $age = mysqli_real_escape_string($conn,$age);
    $area = mysqli_real_escape_string($conn,$area);

    $sql = ""INSERT INTO info (favVisit, favAnimals, age,area)
    VALUES ('"".$favisit.""','"".$favanimal.""','"".$age.""' ,'"".$area.""')"";
    if ($conn-&gt;query($sql) === TRUE) {
        echo ""Inputted"";
    } else {
        echo ""failed"";
    }
</code></pre>",-1
55586214,How to display data from the database using models and custom helpers?,"<p>I am currently creating a new application feature where in I want to dynamically change the values of page headers, page header titles, and breadcrumbs that are fetched from database and not manually code them individually. The thing is, if I update the menu_name column in the database, all page headers, page header titles and breadcrumbs will be automatically be updated based on it's values.</p>

<p>This is the model I created to fetch the values of the columns in the menu_master table</p>

<pre><code>class Page_Header_model extends CI_Model {

public function __construct()
{
    parent::__construct();
}

function get_page_menu_names($menu_id, $menu_name)
{
    $this-&gt;db-&gt;where('menu_id', $menu_id);
    $this-&gt;db-&gt;where('menu_name', $menu_name);

    $query = $this-&gt;db-&gt;get('menu_master);

    return $query-&gt;result();
}
</code></pre>

<p>Here is the page_header_helper that I want to call the model in order for the values to be displayed automatically</p>

<pre><code>function __construct()
{
   parent::__construct();
   $CI =&amp; get_instance();
   $CI-&gt;load-&gt;model('Page_Header_model');
   $CI-&gt;Page_Header_model-&gt;get_page_menu_names();
}

function get_page_header_data($page_type)
{
      $project_title = 'Testing';

      $page_header_array['inventory'] = array(

        ""breadcrumbs"" =&gt;  array(
            array('title'=&gt;'Home','url'=&gt;base_url()),
            array('title'=&gt;'Inventory Lists','is_active'=&gt;TRUE),
        ),
        ""page_title""  =&gt;  'Inventory Lists',
        ""page_header_title"" =&gt;  'Inventory Lists : '.$project_title

    );

    $page_header_data = $page_header_array[$page_type];

    return $page_header_data;
    }
</code></pre>",php|mysql|codeigniter,"<p>I just figured out a way on how to do this. The key is to get the id of the menu name from the database and return it as a row and in the custom helper, just call the id of the menu name from the database. Here is how I did it:</p>

<p>Here is my model:</p>

<pre><code>        function get_page_menu_names($menu_id)
       {
           $this-&gt;db-&gt;select('menu_name');

           $this-&gt;db-&gt;from('menu_master');

           $this-&gt;db-&gt;where('menu_id', $menu_id);

           $query = $this-&gt;db-&gt;get();

           $menu_name_row = $query-&gt;row();

           if(isset($menu_name_row))
           {
             return $menu_name_row-&gt;menu_name;
           }            
       }
</code></pre>

<p>And here is how I called it from the helper that I wrote out:</p>

<pre><code>$page_header_array['inventory_master_listing'] = array(

            ""breadcrumbs"" =&gt;  array(
                array('title'=&gt;'Home','url'=&gt;base_url()),
                array('title'=&gt; $this-&gt;my_model_name-&gt;get_page_menu_names(1),'is_active'=&gt;TRUE),
            ),
            ""page_title""  =&gt;  $this-&gt;my_model_name-&gt;get_page_menu_names(1),
            ""page_header_title"" =&gt;  $this-&gt;my_model_name-&gt;get_page_menu_names(1).' : '.$project_title

        );
</code></pre>",0
55636362,How can I use MySQL ROW_NUMBER Function in a query,"<p>I am trying to learn about the MySQL ROW_NUMBER() function and how to use it to generate a sequential number for each row in a result set.</p>

<p>What I tried so far:</p>

<pre><code>SELECT e.*, 
ROW_NUMBER() 
OVER(PARTITION BY e.examid ORDER BY e.examid) AS id 
from exam e
</code></pre>

<p>When I run this query, a series of errors were displayed:</p>

<blockquote>
  <p>3 errors were found during analysis.</p>

<pre><code>An alias was previously found. (near ""id"" at position 68)
An alias was expected. (near "" "" at position 67)
Unexpected token. (near ""id"" at position 68)
</code></pre>
  
  <p>#1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(PARTITION BY examid ORDER BY examid) as id from exam LIMIT 0, 25' at line 1</p>
</blockquote>

<p>How can I go about it?</p>",mysql|window-functions|row-number,<p>Change the I'd to something else because the select * statement will return an id and it will conflict with that I'd (AS id)</p>,0
55636362,How can I use MySQL ROW_NUMBER Function in a query,"<p>I am trying to learn about the MySQL ROW_NUMBER() function and how to use it to generate a sequential number for each row in a result set.</p>

<p>What I tried so far:</p>

<pre><code>SELECT e.*, 
ROW_NUMBER() 
OVER(PARTITION BY e.examid ORDER BY e.examid) AS id 
from exam e
</code></pre>

<p>When I run this query, a series of errors were displayed:</p>

<blockquote>
  <p>3 errors were found during analysis.</p>

<pre><code>An alias was previously found. (near ""id"" at position 68)
An alias was expected. (near "" "" at position 67)
Unexpected token. (near ""id"" at position 68)
</code></pre>
  
  <p>#1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(PARTITION BY examid ORDER BY examid) as id from exam LIMIT 0, 25' at line 1</p>
</blockquote>

<p>How can I go about it?</p>",mysql|window-functions|row-number,"<p>I had the same problem. This syntax works in my case:</p>

<pre><code>SELECT
    (ROW_NUMBER() OVER (ORDER BY id)) row_number, Field1, Field2
FROM
    myTable
ORDER BY
    id
</code></pre>

<p>Additional remark: <code>select version()</code> returns <code>10.3.20-MariaDB-log</code>.</p>",0
14333230,How to add the value of an id of one table into another on select?,"<p>I have 2 tables Table 1 and Table 2 .    </p>

<p>What I expect is the below format.<br>
<em>Required format</em>    </p>

<pre class=""lang-none prettyprint-override""><code>Table 1    
   ID   Title   S_ID    
   1    Option1   2    
   2    Option2   2    
   3    Option3   1  

Table 2       
   S_ID  SNAME    
   1     Name1    
   2     Name2    
   3     Name3    
</code></pre>

<p>But I am getting a <code>null</code> value for <code>S_ID</code> of Table1.</p>

<pre class=""lang-none prettyprint-override""><code>Table 1    
   ID   Title   S_ID    
   1    Option1   NULL    
   2    Option2   NULL    
   3    Option3   NULL

Table 2    
   S_ID  SNAME    
   1     Name1    
   2     Name2    
   3     Name3    
</code></pre>

<p>Here is my code:    </p>

<p>HTML :       </p>

<pre><code>&lt;select name=sid&gt;
&lt;option value=""select""&gt;&lt;/option&gt;
&lt;option value=""N1""&gt;Name1&lt;/option&gt;
&lt;option value=""N2""&gt;Name2&lt;/option&gt;
&lt;option value=""N3""&gt;Name3&lt;/option&gt;
&lt;/select&gt;    
</code></pre>

<p>Insert.php    </p>

<pre><code>$title=$_POST['title'];
$sid=$_POST['S_ID'];    
$insertquery=""INSERT INTO review (title) VALUES('$title')"";    
</code></pre>

<p>What I need is when I select any name from drop down, the <code>id</code> of that from Table 2 should get stored in Table 1 as shown in the above required format, and retrieve the titles that comes under respective names on click of particular name.     </p>

<p>Do help by writing required code. Thank You.</p>",php|mysql,"<p>IMHO your <code>INSERT</code> statement should look like this:</p>

<pre><code>$insertquery = ""INSERT INTO review (title, S_ID) VALUES('$title', '$sid')"";
</code></pre>

<p>And you definitely need to consider sanitizing input and using prepared statements.</p>

<p><strong>Update:</strong></p>

<p>You can populate your <code>select</code> with options from Table 2 (and assuming that you use <code>mysqli</code>) you can do something like this:</p>

<pre class=""lang-php prettyprint-override""><code>&lt;?php

$db = new mysqli(""host"", ""user"", ""password"", ""db"");

$qry = ""SELECT * FROM Table2"";
$result = $db-&gt;query($qry);
echo ""&lt;select name=\""S_ID\""&gt;"";
echo ""&lt;option value=\""select\"" selected=\""selected\""&gt;Select a name&lt;/option&gt;"";
while ($row = $result-&gt;fetch_array(MYSQL_ASSOC)) {
    echo ""&lt;option value=\"""" . $row['S_ID'] . ""\""&gt;"" . $row['SNAME'] . ""&lt;/option&gt;"";
}
echo '&lt;/select&gt;';
$result-&gt;close();
$db-&gt;close();

?&gt;
</code></pre>

<p>For sake of brevity and simplicity there are no checks.</p>",0
37722234,SQL QUERY : SUM() + Group BY + Condition,"<p>Below is table , I need output which provide me all columns with group by date1 which has sum of salary ( > 6000) for particular date.</p>

<pre><code>source table ( INput table ) :
id   name     date1        salary 
1 JOHNSON   1990-12-17    1800 
2 HARDING   1990-12-17    5200 
3 TAFT      1990-12-17    2500 
4 HOOVER    1990-04-02    2700 
5 LINCOLN   1990-04-02    2250 
6 GARFIELD  1990-04-02    5400 
7 POLK      1997-09-22    2500 
8 GRANT     1997-09-22    320 
</code></pre>

<p>Desired output table (below) :   ( last 2 entry 7,8 is not present)</p>

<pre><code>id   name     date1        salary   sum(salary)
1 JOHNSON   1990-12-17    1800        9500
2 HARDING   1990-12-17    5200        9500
3 TAFT      1990-12-17    2500        9500
                     ----------
4 HOOVER    1990-04-02    2700        10350
5 LINCOLN   1990-04-02    2250        10350
6 GARFIELD  1990-04-02    5400        10350
                     -----------
</code></pre>

<p>(Last two values should not come because for that date sum of salary is &lt; 6000)</p>",mysql|sql|sql-server,"<pre><code>select * from
(
select id, name, 
sum(salary) over (partition by date1) sum_sal
from table_name
) where sum_sal &gt;= 6000;
</code></pre>",0
37722234,SQL QUERY : SUM() + Group BY + Condition,"<p>Below is table , I need output which provide me all columns with group by date1 which has sum of salary ( > 6000) for particular date.</p>

<pre><code>source table ( INput table ) :
id   name     date1        salary 
1 JOHNSON   1990-12-17    1800 
2 HARDING   1990-12-17    5200 
3 TAFT      1990-12-17    2500 
4 HOOVER    1990-04-02    2700 
5 LINCOLN   1990-04-02    2250 
6 GARFIELD  1990-04-02    5400 
7 POLK      1997-09-22    2500 
8 GRANT     1997-09-22    320 
</code></pre>

<p>Desired output table (below) :   ( last 2 entry 7,8 is not present)</p>

<pre><code>id   name     date1        salary   sum(salary)
1 JOHNSON   1990-12-17    1800        9500
2 HARDING   1990-12-17    5200        9500
3 TAFT      1990-12-17    2500        9500
                     ----------
4 HOOVER    1990-04-02    2700        10350
5 LINCOLN   1990-04-02    2250        10350
6 GARFIELD  1990-04-02    5400        10350
                     -----------
</code></pre>

<p>(Last two values should not come because for that date sum of salary is &lt; 6000)</p>",mysql|sql|sql-server,"<p><strong>Oracle Setup</strong>:</p>

<pre><code>CREATE TABLE table_name (id, name, date1, salary ) AS
SELECT 1, 'JOHNSON',  DATE '1990-12-17', 1800 FROM DUAL UNION ALL
SELECT 2, 'HARDING',  DATE '1990-12-17', 5200 FROM DUAL UNION ALL
SELECT 3, 'TAFT',     DATE '1990-12-17', 2500 FROM DUAL UNION ALL
SELECT 4, 'HOOVER',   DATE '1990-04-02', 2700 FROM DUAL UNION ALL
SELECT 5, 'LINCOLN',  DATE '1990-04-02', 2250 FROM DUAL UNION ALL
SELECT 6, 'GARFIELD', DATE '1990-04-02', 5400 FROM DUAL UNION ALL 
SELECT 7, 'POLK',     DATE '1997-09-22', 2500 FROM DUAL UNION ALL 
SELECT 8, 'GRANT',    DATE '1997-09-22',  320 FROM DUAL;
</code></pre>

<p><strong>Query</strong>:</p>

<pre><code>SELECT *
FROM   (
  SELECT t.*,
         SUM( salary ) OVER ( PARTITION BY date1 ) AS sum_salary
  FROM   table_name t
)
WHERE   sum_salary &gt;= 6000;
</code></pre>

<p><strong>Output</strong>:</p>

<pre><code>        ID NAME     DATE1                   SALARY SUM_SALARY
---------- -------- ------------------- ---------- ----------
         4 HOOVER   1990-04-02 00:00:00       2700      10350 
         6 GARFIELD 1990-04-02 00:00:00       5400      10350 
         5 LINCOLN  1990-04-02 00:00:00       2250      10350 
         3 TAFT     1990-12-17 00:00:00       2500       9500 
         2 HARDING  1990-12-17 00:00:00       5200       9500 
         1 JOHNSON  1990-12-17 00:00:00       1800       9500 
</code></pre>",1
37722234,SQL QUERY : SUM() + Group BY + Condition,"<p>Below is table , I need output which provide me all columns with group by date1 which has sum of salary ( > 6000) for particular date.</p>

<pre><code>source table ( INput table ) :
id   name     date1        salary 
1 JOHNSON   1990-12-17    1800 
2 HARDING   1990-12-17    5200 
3 TAFT      1990-12-17    2500 
4 HOOVER    1990-04-02    2700 
5 LINCOLN   1990-04-02    2250 
6 GARFIELD  1990-04-02    5400 
7 POLK      1997-09-22    2500 
8 GRANT     1997-09-22    320 
</code></pre>

<p>Desired output table (below) :   ( last 2 entry 7,8 is not present)</p>

<pre><code>id   name     date1        salary   sum(salary)
1 JOHNSON   1990-12-17    1800        9500
2 HARDING   1990-12-17    5200        9500
3 TAFT      1990-12-17    2500        9500
                     ----------
4 HOOVER    1990-04-02    2700        10350
5 LINCOLN   1990-04-02    2250        10350
6 GARFIELD  1990-04-02    5400        10350
                     -----------
</code></pre>

<p>(Last two values should not come because for that date sum of salary is &lt; 6000)</p>",mysql|sql|sql-server,"<p>Below query will work on both sql server 2008 and Mysql :-</p>

<pre><code>select * from (
select a.id,a.name,a.date1,a.salary,
(select sum(salary) from table_name b where b.date1=a.date1) Sum_Salary
from
table_name a
) c 
where Sum_Salary &gt;=6000
order by id
</code></pre>

<p><strong>Output</strong> :-</p>

<pre><code>id  name        date1       salary   Sum_Salary
1   JOHNSON   1990-12-17    1800.00  9500.00
2   HARDING   1990-12-17    5200.00  9500.00
3   TAFT      1990-12-17    2500.00  9500.00
4   HOOVER    1990-04-02    2700.00  10350.00
5   LINCOLN   1990-04-02    2250.00  10350.00
6   GARFIELD  1990-04-02    5400.00  10350.00
</code></pre>",0
37893418,How to insert selected multiple checkbox values into different rows to mysql database in android and php,"<p>Here i am accessing contacts from the phone and displaying in custom listview.
Now i have to insert the selected checkbox values to different rows to mysql database.Here i can able to insert single checkbox value to the database..if i selected more than one value, the data will be stored in the single row..What modifications i have to make to insert the single data to each row..?i am using php file to store data to the database.</p>

<p><strong>DisplayContact.java</strong></p>

<pre><code>public class DisplayContact extends Activity implements OnItemClickListener{

    //ArrayList to store name and phone number
    List&lt;String&gt; name1 = new ArrayList&lt;String&gt;();
    List&lt;String&gt; phno1 = new ArrayList&lt;String&gt;();
    MyAdapter ma ;
    Button select;

    private String vault;

    public static final String kvault = ""vault_no"";
    public static final String kname = ""name"";
    public static final String kphone = ""phone"";

    public static final String SHARED_PREF_NAME = ""myloginapp"";


    public static final String CONTACTNAME_SHARED_PREF = ""name"";
    public static final String PHONE_SHARED_PREF = ""phone"";

    //We will use this to store the boolean in sharedpreference to track user is loggedin or not
    public static final String LOGGEDIN_SHARED_PREF = ""loggedin"";

    public static final String UPLOAD_URL = ""http://oursite.com/contacts.php"";

    Cursor phones;

    private static final int MY_PERMISSIONS_REQUEST_READ_CONTACTS = 1;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        getActionBar().setDisplayShowTitleEnabled(false);
        setContentView(R.layout.display);

        SharedPreferences sharedPreferences = getSharedPreferences(ProfileLogin.SHARED_PREF_NAME, MODE_PRIVATE);

        vault = sharedPreferences.getString(ProfileLogin.EMAIL_SHARED_PREF,""Not Available"");

        getAllContacts(this.getContentResolver());
        ListView lv= (ListView) findViewById(R.id.lv);
        ma = new MyAdapter();
        lv.setAdapter(ma);
        lv.setOnItemClickListener(this);
        lv.setItemsCanFocus(false);
        lv.setTextFilterEnabled(true);
        // adding
        select = (Button) findViewById(R.id.button1);
        select.setOnClickListener(new View.OnClickListener()
        {

            @Override
            public void onClick(View v) {
                StringBuilder checkedcontacts= new StringBuilder();
                StringBuilder name2 = new StringBuilder();
                StringBuilder phone2 = new StringBuilder();
                for(int i = 0; i &lt; name1.size(); i++)

                {
                    if(ma.mCheckStates.get(i)==true)
                    {
                        checkedcontacts.append(name1.get(i).toString());
                        checkedcontacts.append(phno1.get(i).toString());
                        checkedcontacts.append(""\n"");

                         name2.append(name1.get(i).toString());
                         phone2.append(phno1.get(i).toString());
                    }
                    else
                    {

                    }
                }
                SharedPreferences sharedPreferences = DisplayContact.this.getSharedPreferences(SHARED_PREF_NAME, Context.MODE_PRIVATE);

                //Creating editor to store values to shared preferences
                SharedPreferences.Editor editor = sharedPreferences.edit();

                //Adding values to editor
                editor.putBoolean(LOGGEDIN_SHARED_PREF, true);
                editor.putString(CONTACTNAME_SHARED_PREF, name2.toString());
                editor.putString(PHONE_SHARED_PREF, phone2.toString());

                //Saving values to editor
                editor.commit();

                Toast.makeText(DisplayContact.this, name2.toString() + "" , "" + phone2.toString() + "" Added to Database"", Toast.LENGTH_LONG).show();
                uploadImage();
            }
        });

    }

    public void uploadImage(){

        SharedPreferences sharedPreferences = getSharedPreferences(DisplayContact.SHARED_PREF_NAME, MODE_PRIVATE);

        final String name = sharedPreferences.getString(DisplayContact.CONTACTNAME_SHARED_PREF, ""Not Available"");
        final String phone = sharedPreferences.getString(DisplayContact.PHONE_SHARED_PREF, ""Not Available"");

        final String vault_no = vault;

        class UploadImage extends AsyncTask&lt;Void,Void,String&gt; {
            ProgressDialog loading;
            @Override
            protected void onPreExecute() {
                super.onPreExecute();
                loading = ProgressDialog.show(DisplayContact.this,""Please wait..."",""uploading"",false,false);
            }

            @Override
            protected void onPostExecute(String s) {
                super.onPostExecute(s);
                loading.dismiss();
                if(s.equalsIgnoreCase(""Successfully Saved"")){
                    //Intent intent = new Intent(CollegeDetails.this,Work.class);
                    Toast.makeText(DisplayContact.this, s, Toast.LENGTH_SHORT).show();
                    // startActivity(intent);
                }else{
                    Toast.makeText(DisplayContact.this,s,Toast.LENGTH_SHORT).show();

                }
            }

            @Override
            protected String doInBackground(Void... params) {
                RequestHandler rh = new RequestHandler();
                //RegisterUserClass rh = new RegisterUserClass();
                HashMap&lt;String,String&gt; param = new HashMap&lt;String,String&gt;();

                param.put(kvault,vault_no);
                param.put(kname,name);
                param.put(kphone,phone);

                String result = rh.sendPostRequest(UPLOAD_URL, param);
                return result;
            }
        }
        UploadImage u = new UploadImage();
        u.execute();
    }

    @Override
    public void onItemClick(AdapterView&lt;?&gt; arg0, View arg1, int arg2, long arg3) {
        // TODO Auto-generated method stub
        ma.toggle(arg2);
    }

    public  void getAllContacts(ContentResolver cr) {

        int result = ContextCompat.checkSelfPermission(DisplayContact.this, Manifest.permission.READ_CONTACTS);
        if (result == PackageManager.PERMISSION_GRANTED){

            phones = cr.query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI, null,null,null, null);
            contactsdisplay();

        } else {

            requestForLocationPermission();
        }
    }

    private void requestForLocationPermission()
    {

        if (ActivityCompat.shouldShowRequestPermissionRationale(DisplayContact.this, Manifest.permission.READ_CONTACTS))
        {
        }
        else {

            ActivityCompat.requestPermissions(DisplayContact.this, new String[]{Manifest.permission.READ_CONTACTS}, MY_PERMISSIONS_REQUEST_READ_CONTACTS);
        }
    }

    @Override
    public void onRequestPermissionsResult(int requestCode, String permissions[], int[] grantResults)
    {
        switch (requestCode) {
            case MY_PERMISSIONS_REQUEST_READ_CONTACTS:
                if (grantResults.length &gt; 0 &amp;&amp; grantResults[0] == PackageManager.PERMISSION_GRANTED)
                {
                    getAllContacts(DisplayContact.this.getContentResolver());
                    contactsdisplay();
                }
                break;
        }
    }

    public  void contactsdisplay() {


        while (phones.moveToNext())
        {
            String name=phones.getString(phones.getColumnIndex(ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME));
            String phoneNumber = phones.getString(phones.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER));
            System.out.println(""..................""+name+ """" +phoneNumber);
            name1.add(name);
            phno1.add(phoneNumber);
        }

        phones.close();
    }

    class MyAdapter extends BaseAdapter implements CompoundButton.OnCheckedChangeListener
    {  private SparseBooleanArray mCheckStates;
        LayoutInflater mInflater;
        TextView tv1,tv;
        CheckBox cb;
        MyAdapter()
        {
            mCheckStates = new SparseBooleanArray(name1.size());
            mInflater = (LayoutInflater)DisplayContact.this.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        }
        @Override
        public int getCount() {
            // TODO Auto-generated method stub
            return name1.size();
        }

        @Override
        public Object getItem(int position) {
            // TODO Auto-generated method stub
            return position;
        }

        @Override
        public long getItemId(int position) {
            // TODO Auto-generated method stub

            return 0;
        }

        @Override
        public View getView(final int position, View convertView, ViewGroup parent) {
            // TODO Auto-generated method stub
            View vi=convertView;
            if(convertView==null)
                vi = mInflater.inflate(R.layout.row, null);
            tv= (TextView) vi.findViewById(R.id.contact_name);
            tv1= (TextView) vi.findViewById(R.id.phone_number);
            cb = (CheckBox) vi.findViewById(R.id.checkBox_id);
            tv.setText(""Name :""+ name1.get(position));
            tv1.setText(""Phone No :""+ phno1.get(position));
            cb.setTag(position);
            cb.setChecked(mCheckStates.get(position, false));
            cb.setOnCheckedChangeListener(this);

            return vi;
        }
        public boolean isChecked(int position) {
            return mCheckStates.get(position, false);
        }

        public void setChecked(int position, boolean isChecked) {
            mCheckStates.put(position, isChecked);
        }

        public void toggle(int position) {
            setChecked(position, !isChecked(position));
        }
        @Override
        public void onCheckedChanged(CompoundButton buttonView,
                                     boolean isChecked) {
            // TODO Auto-generated method stub

            mCheckStates.put((Integer) buttonView.getTag(), isChecked);
        }
    }
}
</code></pre>

<p><strong>contacts.php</strong></p>

<pre><code>&lt;?php
    session_start();
    define('HOST','hostname');
    define('USER','username');
    define('PASS','password');
    define('DB','dbname');

    $response = array();

$con = mysqli_connect(HOST,USER,PASS,DB) or die('Unable to Connect');

if(!mysqli_connect_errno()){

    $error_flag = false;

$contacts = json_decode($_POST['contacts'], true);
foreach($contacts as $contact){
  //echo $contact['name'];


            // create a new user profile
        $sql = ""INSERT INTO contacts (vault_no , name, phone, update_at,created_at)
        VALUES ('"".$contact['vault_no'].""', '"".$contact['name'].""',  '"".$contact['phone'].""', NOW(), NOW())"";
            if(mysqli_query($con,$sql)){

                echo ""Successfully Saved"";

            }else{
                $response[""error""] = true;
                $response[""error_msg""] = ""INSERT operation failed"";
                echo json_encode($response);
            }
}

}else{
    $response[""error""] = true;
    $response[""error_msg""] = ""Database connection failed"";
    echo json_encode($response);
}
</code></pre>

<p>?></p>",php|android|listview|checkbox|mysqlimport,"<p>You need to start using JSON to hold your data:</p>

<p>Build it:</p>

<pre><code>JSONArray contacts = new JSONArray();
for(int i = 0; i &lt; name1.size(); i++)
{
    JSONObject contact = new JSONObject();
    contact.put(kname, name1.get(i).toString());
    contact.put(kphone, phno1.get(i).toString());
    contact.put(kvault,vault_no);
    contacts.put(contact);
}
</code></pre>

<p>Then pass it to your hashmap as a parameter:</p>

<pre><code>HashMap&lt;String,String&gt; param = new HashMap&lt;String,String&gt;();
param.put(kcontacts,contacts.toString());
return rh.sendPostRequest(UPLOAD_URL, param);
</code></pre>

<p>Finally in PHP decode that:</p>

<pre><code>$contacts = json_decode($_POST['contacts'], true);
foreach($contacts as $contact){
    echo $contact['name'];
}
</code></pre>",1
37893418,How to insert selected multiple checkbox values into different rows to mysql database in android and php,"<p>Here i am accessing contacts from the phone and displaying in custom listview.
Now i have to insert the selected checkbox values to different rows to mysql database.Here i can able to insert single checkbox value to the database..if i selected more than one value, the data will be stored in the single row..What modifications i have to make to insert the single data to each row..?i am using php file to store data to the database.</p>

<p><strong>DisplayContact.java</strong></p>

<pre><code>public class DisplayContact extends Activity implements OnItemClickListener{

    //ArrayList to store name and phone number
    List&lt;String&gt; name1 = new ArrayList&lt;String&gt;();
    List&lt;String&gt; phno1 = new ArrayList&lt;String&gt;();
    MyAdapter ma ;
    Button select;

    private String vault;

    public static final String kvault = ""vault_no"";
    public static final String kname = ""name"";
    public static final String kphone = ""phone"";

    public static final String SHARED_PREF_NAME = ""myloginapp"";


    public static final String CONTACTNAME_SHARED_PREF = ""name"";
    public static final String PHONE_SHARED_PREF = ""phone"";

    //We will use this to store the boolean in sharedpreference to track user is loggedin or not
    public static final String LOGGEDIN_SHARED_PREF = ""loggedin"";

    public static final String UPLOAD_URL = ""http://oursite.com/contacts.php"";

    Cursor phones;

    private static final int MY_PERMISSIONS_REQUEST_READ_CONTACTS = 1;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        getActionBar().setDisplayShowTitleEnabled(false);
        setContentView(R.layout.display);

        SharedPreferences sharedPreferences = getSharedPreferences(ProfileLogin.SHARED_PREF_NAME, MODE_PRIVATE);

        vault = sharedPreferences.getString(ProfileLogin.EMAIL_SHARED_PREF,""Not Available"");

        getAllContacts(this.getContentResolver());
        ListView lv= (ListView) findViewById(R.id.lv);
        ma = new MyAdapter();
        lv.setAdapter(ma);
        lv.setOnItemClickListener(this);
        lv.setItemsCanFocus(false);
        lv.setTextFilterEnabled(true);
        // adding
        select = (Button) findViewById(R.id.button1);
        select.setOnClickListener(new View.OnClickListener()
        {

            @Override
            public void onClick(View v) {
                StringBuilder checkedcontacts= new StringBuilder();
                StringBuilder name2 = new StringBuilder();
                StringBuilder phone2 = new StringBuilder();
                for(int i = 0; i &lt; name1.size(); i++)

                {
                    if(ma.mCheckStates.get(i)==true)
                    {
                        checkedcontacts.append(name1.get(i).toString());
                        checkedcontacts.append(phno1.get(i).toString());
                        checkedcontacts.append(""\n"");

                         name2.append(name1.get(i).toString());
                         phone2.append(phno1.get(i).toString());
                    }
                    else
                    {

                    }
                }
                SharedPreferences sharedPreferences = DisplayContact.this.getSharedPreferences(SHARED_PREF_NAME, Context.MODE_PRIVATE);

                //Creating editor to store values to shared preferences
                SharedPreferences.Editor editor = sharedPreferences.edit();

                //Adding values to editor
                editor.putBoolean(LOGGEDIN_SHARED_PREF, true);
                editor.putString(CONTACTNAME_SHARED_PREF, name2.toString());
                editor.putString(PHONE_SHARED_PREF, phone2.toString());

                //Saving values to editor
                editor.commit();

                Toast.makeText(DisplayContact.this, name2.toString() + "" , "" + phone2.toString() + "" Added to Database"", Toast.LENGTH_LONG).show();
                uploadImage();
            }
        });

    }

    public void uploadImage(){

        SharedPreferences sharedPreferences = getSharedPreferences(DisplayContact.SHARED_PREF_NAME, MODE_PRIVATE);

        final String name = sharedPreferences.getString(DisplayContact.CONTACTNAME_SHARED_PREF, ""Not Available"");
        final String phone = sharedPreferences.getString(DisplayContact.PHONE_SHARED_PREF, ""Not Available"");

        final String vault_no = vault;

        class UploadImage extends AsyncTask&lt;Void,Void,String&gt; {
            ProgressDialog loading;
            @Override
            protected void onPreExecute() {
                super.onPreExecute();
                loading = ProgressDialog.show(DisplayContact.this,""Please wait..."",""uploading"",false,false);
            }

            @Override
            protected void onPostExecute(String s) {
                super.onPostExecute(s);
                loading.dismiss();
                if(s.equalsIgnoreCase(""Successfully Saved"")){
                    //Intent intent = new Intent(CollegeDetails.this,Work.class);
                    Toast.makeText(DisplayContact.this, s, Toast.LENGTH_SHORT).show();
                    // startActivity(intent);
                }else{
                    Toast.makeText(DisplayContact.this,s,Toast.LENGTH_SHORT).show();

                }
            }

            @Override
            protected String doInBackground(Void... params) {
                RequestHandler rh = new RequestHandler();
                //RegisterUserClass rh = new RegisterUserClass();
                HashMap&lt;String,String&gt; param = new HashMap&lt;String,String&gt;();

                param.put(kvault,vault_no);
                param.put(kname,name);
                param.put(kphone,phone);

                String result = rh.sendPostRequest(UPLOAD_URL, param);
                return result;
            }
        }
        UploadImage u = new UploadImage();
        u.execute();
    }

    @Override
    public void onItemClick(AdapterView&lt;?&gt; arg0, View arg1, int arg2, long arg3) {
        // TODO Auto-generated method stub
        ma.toggle(arg2);
    }

    public  void getAllContacts(ContentResolver cr) {

        int result = ContextCompat.checkSelfPermission(DisplayContact.this, Manifest.permission.READ_CONTACTS);
        if (result == PackageManager.PERMISSION_GRANTED){

            phones = cr.query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI, null,null,null, null);
            contactsdisplay();

        } else {

            requestForLocationPermission();
        }
    }

    private void requestForLocationPermission()
    {

        if (ActivityCompat.shouldShowRequestPermissionRationale(DisplayContact.this, Manifest.permission.READ_CONTACTS))
        {
        }
        else {

            ActivityCompat.requestPermissions(DisplayContact.this, new String[]{Manifest.permission.READ_CONTACTS}, MY_PERMISSIONS_REQUEST_READ_CONTACTS);
        }
    }

    @Override
    public void onRequestPermissionsResult(int requestCode, String permissions[], int[] grantResults)
    {
        switch (requestCode) {
            case MY_PERMISSIONS_REQUEST_READ_CONTACTS:
                if (grantResults.length &gt; 0 &amp;&amp; grantResults[0] == PackageManager.PERMISSION_GRANTED)
                {
                    getAllContacts(DisplayContact.this.getContentResolver());
                    contactsdisplay();
                }
                break;
        }
    }

    public  void contactsdisplay() {


        while (phones.moveToNext())
        {
            String name=phones.getString(phones.getColumnIndex(ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME));
            String phoneNumber = phones.getString(phones.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER));
            System.out.println(""..................""+name+ """" +phoneNumber);
            name1.add(name);
            phno1.add(phoneNumber);
        }

        phones.close();
    }

    class MyAdapter extends BaseAdapter implements CompoundButton.OnCheckedChangeListener
    {  private SparseBooleanArray mCheckStates;
        LayoutInflater mInflater;
        TextView tv1,tv;
        CheckBox cb;
        MyAdapter()
        {
            mCheckStates = new SparseBooleanArray(name1.size());
            mInflater = (LayoutInflater)DisplayContact.this.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        }
        @Override
        public int getCount() {
            // TODO Auto-generated method stub
            return name1.size();
        }

        @Override
        public Object getItem(int position) {
            // TODO Auto-generated method stub
            return position;
        }

        @Override
        public long getItemId(int position) {
            // TODO Auto-generated method stub

            return 0;
        }

        @Override
        public View getView(final int position, View convertView, ViewGroup parent) {
            // TODO Auto-generated method stub
            View vi=convertView;
            if(convertView==null)
                vi = mInflater.inflate(R.layout.row, null);
            tv= (TextView) vi.findViewById(R.id.contact_name);
            tv1= (TextView) vi.findViewById(R.id.phone_number);
            cb = (CheckBox) vi.findViewById(R.id.checkBox_id);
            tv.setText(""Name :""+ name1.get(position));
            tv1.setText(""Phone No :""+ phno1.get(position));
            cb.setTag(position);
            cb.setChecked(mCheckStates.get(position, false));
            cb.setOnCheckedChangeListener(this);

            return vi;
        }
        public boolean isChecked(int position) {
            return mCheckStates.get(position, false);
        }

        public void setChecked(int position, boolean isChecked) {
            mCheckStates.put(position, isChecked);
        }

        public void toggle(int position) {
            setChecked(position, !isChecked(position));
        }
        @Override
        public void onCheckedChanged(CompoundButton buttonView,
                                     boolean isChecked) {
            // TODO Auto-generated method stub

            mCheckStates.put((Integer) buttonView.getTag(), isChecked);
        }
    }
}
</code></pre>

<p><strong>contacts.php</strong></p>

<pre><code>&lt;?php
    session_start();
    define('HOST','hostname');
    define('USER','username');
    define('PASS','password');
    define('DB','dbname');

    $response = array();

$con = mysqli_connect(HOST,USER,PASS,DB) or die('Unable to Connect');

if(!mysqli_connect_errno()){

    $error_flag = false;

$contacts = json_decode($_POST['contacts'], true);
foreach($contacts as $contact){
  //echo $contact['name'];


            // create a new user profile
        $sql = ""INSERT INTO contacts (vault_no , name, phone, update_at,created_at)
        VALUES ('"".$contact['vault_no'].""', '"".$contact['name'].""',  '"".$contact['phone'].""', NOW(), NOW())"";
            if(mysqli_query($con,$sql)){

                echo ""Successfully Saved"";

            }else{
                $response[""error""] = true;
                $response[""error_msg""] = ""INSERT operation failed"";
                echo json_encode($response);
            }
}

}else{
    $response[""error""] = true;
    $response[""error_msg""] = ""Database connection failed"";
    echo json_encode($response);
}
</code></pre>

<p>?></p>",php|android|listview|checkbox|mysqlimport,"<p>use Foreah post of check box values.</p>

<pre><code>       $vault_no1= $this-&gt;input-&gt;post(""vault_no"");
       foreach($vault_no1 as $key=&gt;$val){
            $arra[] = $val;
        }


        $name= $this-&gt;input-&gt;post(""name"");
       foreach($name as $key=&gt;$val){
            $arre[] = $val;
        }


        $phone= $this-&gt;input-&gt;post(""phone"");
       foreach($phone as $key=&gt;$val){
            $arrv[] = $val;
        }

        $length = count($arra);
        for ($i = 0; $i &lt; $length; $i++) {
          echo ""vault_no"".$arra[$i]."" Name:"".$arre[$i]."" phone:"".$arrv[$i];   //Sample print for you
          //Use your Insert query here with aboe arrays value
        }
</code></pre>",0
37532729,MySQL Advanced SUM function,"<h2>Good day!</h2>

<p>I am sorry If this question was already asked, but I am kind of in hurry, so I am not sure.</p>

<h2>I have 2 tables:</h2>

<p><em>Table.Cars</em> and <em>Table.Price</em></p>

<p>In table Cars:</p>

<pre><code>ID Auto_Increment Primary key NOT NULL
Name VARCHAR(30)
</code></pre>

<p>In table Price:</p>

<pre><code>CarsID Primary key NOT NULL
Units Int
Price_per_unit decimal(10,2)
Total decimal(10,2)
</code></pre>

<p>So, what I need to do is, Create column (TOTAL* (Name does not need to be necessary this one)), in table Price, Set it to do Mathematical function.</p>

<p>Basicly, I want Column.Total to show Units * price_per_unit which would be:</p>

<pre><code>ALTER TABLE Price
ADD TOTAL Decimal(10,2)

UPDATE Price SET Total = SUM(Units * Price_per_unit);
</code></pre>

<p>Which will look like this:</p>

<pre><code>---------------------------------------------------
| ID | Units | Price_per_unit |   Total   | TOTAL |
---------------------------------------------------
| 1  | 12    | 30000,00       | 360000,00 | NULL  |
| 2  | 5     | 12000,00       | 60000,00  | NULL  |
</code></pre>

<p>And here comes my problem. I want to make TOTAL, to look like this:</p>

<pre><code>---------------------------------------------------------
| ID | Units | Price_per_unit |   Total   | TOTAL       |
---------------------------------------------------------
| 1  | 12    | 30000,00       | 360000,00 | 420000      |
| 2  | 5     | 12000,00       | 60000,00  |             |
|_______________________________________________________|
</code></pre>

<p>So, next time, I put new record in table Price, I need TOTAL, to auto SUM my table by taking data from Units * Price_pre_unit.</p>

<p>So my question is, how do I make this query?</p>",mysql,"<p>If you want Mysql database to do it automatically, it seems you are looking for a trigger. You should tun this code one time and the trigger will handle it for ever:</p>

<pre><code>CREATE TRIGGER trigger_name
AFTER INSERT
   ON price FOR EACH ROW
BEGIN
   UPDATE Price SET Total = SUM(Units * Price_per_unit) where id=(select id from price order by id limit 1); 
END;
</code></pre>",1
37839789,Returning Sql Results based on Ranking,"<p>How do I return  a list the top three athletes for a given Country and Sport Using the 6 tables below based on the number of medals the athletes win in that Sport ?</p>

<pre><code>ATHLETES

+------------+-----------------+---------------+-------------------------+
| idATHLETES | ATHLETENAME     | TEAMS_idTEAMS | TEAMS_COUNTRY_idCOUNTRY |
+------------+-----------------+---------------+-------------------------+
| JG         | JUSTIN GATLIN   | USA-TF-MEN    | USA                     |
| MS         | MARIA SHARAPOVA | RUS-WTA       | RUS                     |
| SW         | SERENA WILLIAMS | USA-WTA       | USA                     |
| UB         | USAIN BOLT      | JAM-TF-MEN    | JAM                     |
| VW         | VENUS WILLIAMS  | USA-WTA       | USA                     |
+------------+-----------------+---------------+-------------------------+

EVENTS

+------------+---------------+---------------------+------------------------+----------------------------------+--------------------------+
| idEVENTS   | EVENTNAME     | ATHLETES_idATHLETES | ATHLETES_TEAMS_idTEAMS | ATHLETES_TEAMS_COUNTRY_idCOUNTRY | VARIOUS_SPORTS_SPORTS_ID |
+------------+---------------+---------------------+------------------------+----------------------------------+--------------------------+
| ATH        | ATHLETICS     | JG                  | USA-TF-MEN             | USA                              | TRACK-AND-FIELD          |
| ATH        | ATHLETICS     | UB                  | JAM-TF-MEN             | JAM                              | TRACK-AND-FIELD          |
| TEN        | TENNIS        | MS                  | RUS-WTA                | RUS                              | WOMENS_TENNIS            |
| TEN        | TENNIS        | VW                  | USA-WTA                | USA                              | WOMENS_TENNIS            |
| TEN-DOUBLE | TENNIS DOUBLE | SW                  | USA-WTA                | USA                              | WOMENS_TENNIS            |
| TEN-DOUBLE | TENNIS DOUBLE | VW                  | USA-WTA                | USA                              | WOMENS_TENNIS            |
+------------+---------------+---------------------+------------------------+----------------------------------+--------------------------+

RESULTS

+-----------+-------------+--------+-----------------+----------------------------+-------------------------------+----------------------------------------
+-----------+-------------+--------+-----------------+----------------------------+-------------------------------+-----------------------------------------+---------------------------------+
| idRESULTS | STATUS      | MEDALS | EVENTS_idEVENTS | EVENTS_ATHLETES_idATHLETES | EVENTS_ATHLETES_TEAMS_idTEAMS | EVENTS_ATHLETES_TEAMS_COUNTRY_idCOUNTRY | EVENTS_VARIOUS_SPORTS_SPORTS_ID |
+-----------+-------------+--------+-----------------+----------------------------+-------------------------------+-----------------------------------------+---------------------------------+
| results1  | DID-NOT-WIN | SILVER | TEN             | MS                         | RUS-WTA                       | RUS                                     | WOMENS_TENNIS                   |
| results1  | WON         | GOLD   | TEN             | VW                         | USA-WTA                       | USA                                     | WOMENS_TENNIS                   |
| results2  | DID-NOT-WIN | BRONZE | ATH             | JG                         | USA-TF-MEN                    | USA                                     | TRACK-AND-FIELD                 |
| results2  | WON         | GOLD   | ATH             | UB                         | JAM-TF-MEN                    | JAM                                     | TRACK-AND-FIELD                 |
| results3  | WON         | GOLD   | TEN-DOUBLE      | SW                         | USA-WTA                       | USA                                     | WOMENS_TENNIS                   |
| results3  | WON         | GOLD   | TEN-DOUBLE      | VW                         | USA-WTA                       | USA                                     | WOMENS_TENNIS                   |
+-----------+-------------+--------+-----------------+----------------------------+-------------------------------+-----------------------------------------+---------------------------------+

VARIOUS_SPORTS

+-----------------+----------------------+
| SPORTS_ID       | SPORTS_NAME          |
+-----------------+----------------------+
| TRACK-AND-FIELD | MENS TRACK AND FIELD |
| WOMENS_TENNIS   | WOMENS TENNIS        |
+-----------------+----------------------+

THE_COUNTRY

+-----------+-------------+
| idCOUNTRY | COUNTRYNAME |
+-----------+-------------+
| JAM       | JAMAICA     |
| RUS       | RUSSIA      |
| USA       | USA         |
+-----------+-------------+

THE_TEAMS

+------------+----------------------------------+-------------------+
| idTEAMS    | TEAMNAME                         | COUNTRY_idCOUNTRY |
+------------+----------------------------------+-------------------+
| JAM-TF-MEN | jamaican track and field men     | JAM               |
| RUS-WTA    | russian women tennis association | RUS               |
| USA-TF-MEN | usa track and field men          | USA               |
| USA-WTA    | usa womens tennis association    | USA               |
+------------+----------------------------------+-------------------+
</code></pre>

<p>I have this code so far but this does not return the required output ?</p>

<pre><code>SELECT idATHLETES, ATHLETENAME, TEAMS_COUNTRY_idCOUNTRY, COUNTRYNAME FROM
athletes
JOIN EVENTS ON idATHLETES = idEVENTS
JOIN teams ON TEAMS_idTEAMS =idTEAMS
JOIN country ON COUNTRY_idCOUNTRY = idCOUNTRY
JOIN RESULTS ON ATHLETES_idATHLETES = EVENTS_ATHLETES_idATHLETES

WHERE EVENTS_VARIOUS_SPORTS_SPORTS_ID = 'WOMENS_TENNIS' AND EVENTS_ATHLETES_TEAMS_COUNTRY_idCOUNTRY ='USA' ;
</code></pre>",mysql|sql,"<p>Consider grouping by athlete and counting the medals.</p>

<pre><code>SELECT idATHLETES, ATHLETENAME, TEAMNAME, COUNTRYNAME
      , MEDALS = SUM(CASE WHEN MEDALS IS NULL THEN 0 ELSE 1 END)
      , SCORE = SUM(CASE MEDALS WHEN 'Gold' THEN 3
                WHEN 'Silver' THEN 2
                WHEN 'Bronze' THEN 1
                ELSE 0 END)
      , GOLD = SUM(CASE MEDALS WHEN 'Gold' THEN 1 ELSE 0 END)
      , SILVER = SUM(CASE MEDALS WHEN 'Silver' THEN 1 ELSE 0 END)
      , BRONZE = SUM(CASE MEDALS WHEN 'Bronze' THEN 1 ELSE 0 END)
FROM ATHLETES
JOIN TEAMS ON TEAMS_idTEAMS = idTEAMS
JOIN COUNTRY ON COUNTRY_idCOUNTRY = idCOUNTRY
JOIN RESULTS ON ATHLETES_idATHLETES = EVENTS_ATHLETES_idATHLETES
WHERE EVENTS_VARIOUS_SPORTS_SPORTS_ID = 'WOMENS_TENNIS'
AND EVENTS_ATHLETES_TEAMS_COUNTRY_idCOUNTRY ='USA'
GROUP BY idATHLETES, ATHLETENAME, TEAMNAME, COUNTRYNAME
ORDER BY SUM(CASE WHEN MEDALS IS NULL THEN 0 ELSE 1 END) DESC
LIMIT 3
</code></pre>

<p>If you need to assign different point to each medal you could do so by changing the <code>ORDER BY</code>clause to:</p>

<pre><code>ORDER BY SUM(CASE MEDALS WHEN 'Gold' THEN 3
                WHEN 'Silver' THEN 2
                WHEN 'Bronze' THEN 1
                ELSE 0 END)
</code></pre>

<p>Alternatively you could create a table to hold the values.</p>",1
16027082,"In a login system with 3 levels, what better way to create the tables in the database and login system?","<p>In a login system with 3 levels, what better way to create the tables in the database and login system?</p>

<p>The three levels are: 'Client', 'Additional' and 'Administrator'.</p>

<p>The 'Client' will access ALL your account details and you can register 'Additional'.
The 'Additional' will have access to only a few details.
The 'Administrator' can register new 'Clients'.</p>

<p>1) Is it safe to have only one login url and let the system check the level of the user to then direct to the correct page?</p>

<p>site. com/login
If Additional OR Client will direct to -> site. com/client
If Administrator will direct to site. com/admin</p>

<p>2) Or the best way is to have a log file for the client and Additional site. com/client/login AND other to the Administrator site. com/admin/login</p>

<p>3) I thought I'd create a table that contains only ID, Login, Password, and LEVEL of ALL users: Clients, Additional and Administrators, and making the query this table to see if the user exists, and what resources are available, then seek data in other tables, depending on the LEVEL, is this a safe practice?</p>

<p>4) I also thought of doing the scan in 3 tables using INNER JOIN to see if the user has permission to access the system. And let ca level data in tables completely separate. It is an efficient alternative?</p>

<p>Other ideas? Alternatives?</p>",php|mysql|login|logic,"<ol>
<li><p>A single login URL is sufficient if that's how you want it.  You should link the user's authorization level to their authentication (their login name, email, etc.).  Once they are authenticated (logged in) you can get their authorization from the DB and store that information in the session.  The user can't touch this.</p></li>
<li><p>I don't see any benefit to this, but you could do it if you want.  You still have to check authorization level on each page to determine if the logged-in user is able to see that page.</p></li>
<li><p>This is not unsafe in any particular way, but it seems to have the relational integrity you probably want.</p></li>
<li><p>This is not much different, but having a separate table for each access level doesn't make sense.  Unless access capabilities are mutually exclusive, you need at most two tables (one for users and one for levels).  If they are mutually exclusive, you would need a third table for user-level mappings, but that doesn't seem to be the case for you.</p></li>
</ol>",1
16027082,"In a login system with 3 levels, what better way to create the tables in the database and login system?","<p>In a login system with 3 levels, what better way to create the tables in the database and login system?</p>

<p>The three levels are: 'Client', 'Additional' and 'Administrator'.</p>

<p>The 'Client' will access ALL your account details and you can register 'Additional'.
The 'Additional' will have access to only a few details.
The 'Administrator' can register new 'Clients'.</p>

<p>1) Is it safe to have only one login url and let the system check the level of the user to then direct to the correct page?</p>

<p>site. com/login
If Additional OR Client will direct to -> site. com/client
If Administrator will direct to site. com/admin</p>

<p>2) Or the best way is to have a log file for the client and Additional site. com/client/login AND other to the Administrator site. com/admin/login</p>

<p>3) I thought I'd create a table that contains only ID, Login, Password, and LEVEL of ALL users: Clients, Additional and Administrators, and making the query this table to see if the user exists, and what resources are available, then seek data in other tables, depending on the LEVEL, is this a safe practice?</p>

<p>4) I also thought of doing the scan in 3 tables using INNER JOIN to see if the user has permission to access the system. And let ca level data in tables completely separate. It is an efficient alternative?</p>

<p>Other ideas? Alternatives?</p>",php|mysql|login|logic,"<p>This is a pretty open ended question.  You definitely want #1 and not #2.  You don't want to maintain 2 login methods.  Just have 1 login page and decide where the user should go after they log in.</p>

<p>When it comes to #3 or #4, I think you will go farther with #3.  Make your table like this:</p>

<pre><code>ID, login, password, client_permission_level, admin_permission_level
</code></pre>

<p>client_permission_level 1 = ""additional""
client_permission_level 2 = ""client""
admin_permission_level 0 = ""not admin""
admin_permission_level 1 = ""administrator""</p>

<p>You can make a more complicated system, but it sounds like this will get you started.  And, you will have the ability to define more levels like ""super administrator = 2"" or ""super client = 3""</p>",1
16035248,A few questions about MySQL transactions,"<p>I am new on MySQL and would like to learn more about it. I am reading through myseql doc, which at the moment is difficult to understand.</p>

<hr>

<p>Can you please explain, are these true or false?</p>

<p><strong>1</strong> - In MySQL there is no way to undo update or delete queries that have already taken place. For example there have been 1900 queries within past 24 hours. None can be undone.</p>

<p><strong>2</strong> - It is ONLY possible to rollback the current transaction in MySQL.</p>

<p><strong>3</strong> - Savepoints are destroyed after the transaction is over. In other words it is not possible to create save points for 10 am today.</p>

<p><strong>4</strong> - Savepoints and rollback are only effective within the current transaction and after the commit has been done they die.</p>

<p><strong>Question:</strong></p>

<p><strong>1</strong> - What is the point of rollback or transaction if it is ONLY possible to rollback the current transaction?</p>

<p>If the transaction is wrong why run it?</p>

<hr>

<p>EDIT:</p>

<p>I created a savepoint like this:</p>

<pre><code>start transaction;
savepoint behnam;
commit;
</code></pre>

<p>Then ran a few update and delete queries. Then tried to rollback to that savepoint:</p>

<pre><code>rollback to savepoint behnam
</code></pre>

<p>and I get:</p>

<pre><code>#1305 - SAVEPOINT behnam does not exist
</code></pre>",mysql|transactions,"<ol>
<li><p>If you are storing timestamp when the data is inserted then you can fire a query to delete past 24 hours. But you cant undo them.</p></li>
<li><p>Yes in some cases its possible. kindly refer <a href=""http://dev.mysql.com/doc/refman/5.0/en/commit.html"" rel=""nofollow"">rollback and commit</a></p></li>
<li><p>I think savepoints are only deleted when they are overwritten so if u do a transaction with same savepoint as previous one, it will overwrite the last savepoint and so you cant go back</p></li>
<li><p>Yes all save points are deleted after the current transaction is committed. refer this 
<a href=""http://dev.mysql.com/doc/refman/5.5/en/savepoint.html"" rel=""nofollow"" title=""savepoints"">savepoints</a></p></li>
</ol>",0
16139413,Best way to INSERT from CSV file into two 1 to many related MySQL tables,"<p>I'm using PHP &amp; MySQL</p>

<p>I have 2 tables with the following layouts:  (there are other fields not relevant to this issue)</p>

<p><code>QUESTIONS
Q_ID, int, auto incrementing, primary key
Question, varchar(255)</code></p>

<p><code>ANSWERS
A_ID, int, auto incrementing, primary key
Q_ID, int
Key, varchar(255)
D1, varchar(255)
D2, varchar(255)
D3, varchar(255)
D4, varchar(255)</code></p>

<p>I have a CSV file with the following layout:</p>

<p><code>NULL, Question, Key, D1, D2, D3, D4  --  The NULL is for the Q_ID autoincrement field.</code></p>

<p>I want to insert data from a CSV file into 2 related tables, <code>Questions</code> and <code>Answers</code>, joined with a one to many relationship.  Note that: 
     NULL &amp; Question go into the Questions table (1 row)
     Key, D1, D2, D3, &amp; D4 go into the Answers table, but as separate records, each with a    Q_ID that links back to their matching question.</p>

<p>I have a file which reads the CSV and creates an <code>$array</code> which is working properly.</p>

<p>If I loop through the <code>$array</code> to create a single <code>INSERT</code> statement  with a compound <code>VALUES</code> clause so I insert all the questions in one query, i.e., </p>

<pre><code>INSERT INTO Questions 
    (Q_ID, Client_ID, Question, Key, D1, D2, D3, D4)
VALUES 
    ('$arr[0][1]', '$client_ID', '$arr[0][2]', '$arr[0][3]', '$arr[0][4]', '$arr[0][5]', '$arr[0][6]'' )
    ('$arr[1][1]', '$client_ID', '$arr[1][2]', '$arr[1][3]', '$arr[1][4]', '$arr[1][5]', '$arr[1][6]'' )
    ('$arr[2][1]', '$client_ID', '$arr[2][2]', '$arr[2][3]', '$arr[2][4]', '$arr[2][5]', '$arr[2][6]'' )
    ('$arr[n][1]', '$client_ID', '$arr[n][2]', '$arr[n][3]', '$arr[n][4]', '$arr[n][5]', '$arr[n][6]'' );
</code></pre>

<p>In a multi-user environment, can I count on the autoincrement <code>Q_ID</code> field being consecutive for these records, even if there are many of them?  Will doing this as a transaction take care of it?  If I can be sure of consecutive <code>Q_ID</code>s, I can be much more efficient by doing far fewer queries.  Or is it counter productive to worry about performance of this type?</p>

<p>I'll then be able to compute the 1st <code>Q_ID</code> number by subtracting the number of rows inserted from the <code>last_insert_id</code> gathered after the insert executes.  I'll use it, incrementing it for each new row, in creating the <code>INSERT</code>s into the Answers table.</p>

<p>I can't test this in my single user development environment.  There, of course, the <code>Q_ID</code>s are always consecutive.</p>

<p>If I can't count on the Q_IDs being consecutive, it seems I'll have to do one insert into ""Questions"", get <code>last_insert_id</code>, and then do a multi-<code>VALUES</code> clause <code>INSERT</code> into Answers for each row in the CSV.</p>

<p>Though I don't show it here, I'll use mysql_real_escape_string to clean this user submitted data in either of these 2 approaches.</p>

<p>Or is there a better way?</p>

<p>arheops suggests below that I create a temp table to avoid using many queries.  I understand that reasoning, but do not understand his explanation for how to <code>INSERT</code> the multiple records in Answers for each record <code>INSERTed</code> into Questions.</p>",php|mysql|sql-insert,"<p>Best way is create temporary table same as csv file, after that create insert/select statment to fill your tables.</p>

<p>Note, serial(autoincrement) value is not always one-by-one. In conccurent environment can be +2 or +3 difference.</p>

<p>Usually i do like this:</p>

<p>1) import all in one table</p>

<p>2) do
  insert into table1(field1,field2,...fieldn) select field1,field2,... fieldn from temp_table;</p>

<p>3) after that do join of table1 and temp_table to got IDs and create select for insert into table2.</p>

<p>Note, for speedup join need create index on join column(question text?)</p>",0
16313847,What is the difference between these two queries can anybody explain,"<p>i thought I achieve same result with the below two queries but I got a different result when I tried, can anybody please explain what is the difference, other than join and subquery.
here t1id is primary column and t2id is referenced column from tbl_1</p>

<pre><code>select * from tbl_1 where t1id in (select t2id from tbl_2);

select t1.* from tbl_1 t1, tbl_2 t2 where t1.t1id = t2.t2id;
</code></pre>

<p>EDIT: When I tried I got 93 records for first query and 74 for second query, I changed slightly the first query like :</p>

<pre><code>select * from tbl_1 where t1id in (select distinct t2id from tbl_2);
</code></pre>

<p>then I got 40 rows. can anybody explain whats happening.</p>

<p>Thanks in advance</p>",mysql|sql,"<p>They are both trying to do the same thing: get all rows from tbl_1 whose id value can be found in the t2id column if tbl_2, although the second one will return the same row from tbl_1 multiple times if the id is found multiple times in tbl_2 (not particularly useful).</p>

<p>But both queries are inferior to this one, which also does the sane thing, just mucho re efficiently:</p>

<pre><code>select distinct t1.*
from tbl_1 t1
join tbl_2 t2 on t1.t1id = t2.t2id;
</code></pre>",1
16313847,What is the difference between these two queries can anybody explain,"<p>i thought I achieve same result with the below two queries but I got a different result when I tried, can anybody please explain what is the difference, other than join and subquery.
here t1id is primary column and t2id is referenced column from tbl_1</p>

<pre><code>select * from tbl_1 where t1id in (select t2id from tbl_2);

select t1.* from tbl_1 t1, tbl_2 t2 where t1.t1id = t2.t2id;
</code></pre>

<p>EDIT: When I tried I got 93 records for first query and 74 for second query, I changed slightly the first query like :</p>

<pre><code>select * from tbl_1 where t1id in (select distinct t2id from tbl_2);
</code></pre>

<p>then I got 40 rows. can anybody explain whats happening.</p>

<p>Thanks in advance</p>",mysql|sql,"<p>The first query selects all rows from the first table that have an <code>id</code> in the second table.</p>

<p>The second query selects all rows from the first table, and for each of those rows, all rows in the second table.  It then filters out rows where the <code>id</code> does not match.</p>

<p>If <code>id</code> is not unique in the second table, the second query can return more rows than the first.</p>",4
16313847,What is the difference between these two queries can anybody explain,"<p>i thought I achieve same result with the below two queries but I got a different result when I tried, can anybody please explain what is the difference, other than join and subquery.
here t1id is primary column and t2id is referenced column from tbl_1</p>

<pre><code>select * from tbl_1 where t1id in (select t2id from tbl_2);

select t1.* from tbl_1 t1, tbl_2 t2 where t1.t1id = t2.t2id;
</code></pre>

<p>EDIT: When I tried I got 93 records for first query and 74 for second query, I changed slightly the first query like :</p>

<pre><code>select * from tbl_1 where t1id in (select distinct t2id from tbl_2);
</code></pre>

<p>then I got 40 rows. can anybody explain whats happening.</p>

<p>Thanks in advance</p>",mysql|sql,"<p>The reason for mismatch between 'in' and 'join' query is:-</p>

<p>tbl1
id   name
1    abc</p>

<p>tbl2
id    name
1     abc
1     abc</p>

<p>now, select * from tbl1 where id in (select id from tbl2)
although there exists 2 values of id from table 2 i.e. 1, but only one row is fetched from tbl1.
you can try executing the above query as
select * from tbl1 where id in (1,1) --> It will give 1 row only
This is because ""In returns true if a specified value matches any value in a subquery or a list""</p>

<p>2nd, the innerjoin query will result in 2 rows as id from tbl1 gets matched with 2 rows from tbl2 table.</p>",1
16412075,Range query from month and year,"<p>I have a table like this:</p>

<pre><code>ID  month    year   content
1     4      2013    xxxxx
2     5      2013    yyyyy
3     6      2013    zzzzz
4     8      2014    fffff
</code></pre>

<p>I want to query it based on a year and month range.</p>

<p>I have query like this:</p>

<pre><code>SELECT * FROM UPP 
WHERE ( month = '4' AND year = '2013' )
  AND ( month = '6' AND year = '2013' ) 
</code></pre>

<p>That query runs but returns no result.  Can anyone help me for fix this query?</p>

<p>NB: The month and year columns are integers.</p>",mysql|sql,"<p>There will never be any rows where both month=4 and month=6 which is what your query is asking for. Adding brackets like that will not alter the AND behaviour as you seem to want them to so you are asking for <code>WHERE year=2013 AND month=4 AND month=6</code>.</p>

<p>There are a number of ways you could ask for what you seem to be wanting, for instance:</p>

<pre><code>WHERE (year=2013 AND month=4) OR (year=2013 AND month=6)
</code></pre>

<p>or</p>

<pre><code>WHERE year=2013 AND (month=4 OR month=6)
</code></pre>

<p>or</p>

<pre><code>WHERE year=2013 AND month IN (4,6)
</code></pre>

<p>If you want the full range (the full quarter, months 4, 5, and 6 not just months 4 and 6 then swasheck's suggestion is probably the clearest way to go, though this will fall down if the date range straddles a boundary between years. If you need to do fully flexible ranged queries (""the six months to February 2013"" and so forth) then you might want to rethink the table structure to more easily/efficiently support that.</p>",0
16412075,Range query from month and year,"<p>I have a table like this:</p>

<pre><code>ID  month    year   content
1     4      2013    xxxxx
2     5      2013    yyyyy
3     6      2013    zzzzz
4     8      2014    fffff
</code></pre>

<p>I want to query it based on a year and month range.</p>

<p>I have query like this:</p>

<pre><code>SELECT * FROM UPP 
WHERE ( month = '4' AND year = '2013' )
  AND ( month = '6' AND year = '2013' ) 
</code></pre>

<p>That query runs but returns no result.  Can anyone help me for fix this query?</p>

<p>NB: The month and year columns are integers.</p>",mysql|sql,"<p>Why not use the correct data type?</p>

<p>Failing that:</p>

<pre><code>SELECT * FROM UPP WHERE (year=2013) AND (month BETWEEN 4 AND 6);
</code></pre>

<p>Would be the easiest path to this particular answer. </p>

<p>EDIT</p>

<p><a href=""http://sqlfiddle.com/#!2/4b161/1"" rel=""nofollow"">SQL Fiddle</a> for reference.</p>",3
16070439,mySQL Passes RESULT but INSERT not happening,"<p>I have a form that submits to itself.  On submit, a query is generated and run and if ($result) then I make $success = 1 to use in a jQuery function that submits an email and then closes the form.  The jQuery function is dependent on the $success value echoed being '1' to trigger.  Recently I had someone submit the form, the email was generated, but the insert query did not appear to enter anything into the database.</p>

<p>The PHP code:</p>

<pre><code>require_once ('inc/dbconnect.php');
include ('inc/dataFormat.php');

if (isset($_POST['submit']) &amp;&amp; $_POST['submit'] == 'Submit') {

    $qins = sprintf('INSERT INTO becmtrack (siteName, siteNum, location, cluster, enodeName, upgDate, tech, techNum, becm, becmFail, ecm1, ecm2, ecm3, dateAlu, aluContact, aluContNum, trackNum, comment) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)',  [VALUES ARE HERE]);
    $rins = mysqli_query($dB, $qins) or die('Error in query =&gt; ' . $qins . '&lt;br /&gt;' . mysqli_error($dB));

    $success = ($rins) ? 1 : 0;

}
</code></pre>

<p>The jQuery code (inside a document ready function):</p>

<pre><code>if (""&lt;? echo $success; ?&gt;"" == 1) {
   var mailBody = 'Site Name: &lt;? echo $_POST['siteName2'];?&gt;';
   mailBody += '%0ASite Number: &lt;? echo $_POST['siteNum'];?&gt;';
   mailBody += '%0ALocation Code: &lt;? echo $_POST['location'];?&gt;';
   mailBody += '%0AeCEMs Removed: &lt;? echo $_POST['ecm1'] . ', ' . $_POST['ecm2'] . ', ' . $_POST['ecm3'];?&gt;';
&lt;? if ($_POST['dateAlu'] != '') { ?&gt;
   mailBody += '%0ADate Cards Returned to Company: &lt;? echo $_POST['dateAlu'];?&gt;';
   mailBody += '%0AALU Contact: &lt;? echo $_POST['aluContact'];?&gt;';
   mailBody += '%0AContact Number: &lt;? echo $_POST['aluContNum'];?&gt;';
   mailBody += '%0AShipping Tracking Number (if applicable): &lt;? echo $_POST['trackNum'];?&gt;';
&lt;? } ?&gt;
$('#reloadTrig',window.opener.document).trigger('click');
window.open('mailto:email.address@somecompany.com?subject=eNodeB%20bCEM%20Upgrade%20Completed&amp;body='+mailBody);
if ('&lt;? echo $_POST['addmore'];?&gt;' != 'addmore') {
window.close();
    }
}
</code></pre>

<p>Is there someway for this code to generate a valid result without the data being inserted into the database?</p>",php|jquery|mysql|insert,"<p>Try calling <strong>mysqli_commit</strong>  just after insert.</p>

<p><strong>P.S.</strong> You shouldn't use sprintf to pass parameters, that won't escape them.
You should use <strong>mysqli_prepare</strong> for that, or just call <strong>mysqli_real_escape_string</strong> arount every parameter.</p>

<p>You can make function:</p>

<pre><code>function escapeArray($arr)
{
  $ret = array();
  foreach ($arr as $value)
     $ret []=mysqli_real_escape_string($value);
  return $ret;
}
</code></pre>",0
16070439,mySQL Passes RESULT but INSERT not happening,"<p>I have a form that submits to itself.  On submit, a query is generated and run and if ($result) then I make $success = 1 to use in a jQuery function that submits an email and then closes the form.  The jQuery function is dependent on the $success value echoed being '1' to trigger.  Recently I had someone submit the form, the email was generated, but the insert query did not appear to enter anything into the database.</p>

<p>The PHP code:</p>

<pre><code>require_once ('inc/dbconnect.php');
include ('inc/dataFormat.php');

if (isset($_POST['submit']) &amp;&amp; $_POST['submit'] == 'Submit') {

    $qins = sprintf('INSERT INTO becmtrack (siteName, siteNum, location, cluster, enodeName, upgDate, tech, techNum, becm, becmFail, ecm1, ecm2, ecm3, dateAlu, aluContact, aluContNum, trackNum, comment) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)',  [VALUES ARE HERE]);
    $rins = mysqli_query($dB, $qins) or die('Error in query =&gt; ' . $qins . '&lt;br /&gt;' . mysqli_error($dB));

    $success = ($rins) ? 1 : 0;

}
</code></pre>

<p>The jQuery code (inside a document ready function):</p>

<pre><code>if (""&lt;? echo $success; ?&gt;"" == 1) {
   var mailBody = 'Site Name: &lt;? echo $_POST['siteName2'];?&gt;';
   mailBody += '%0ASite Number: &lt;? echo $_POST['siteNum'];?&gt;';
   mailBody += '%0ALocation Code: &lt;? echo $_POST['location'];?&gt;';
   mailBody += '%0AeCEMs Removed: &lt;? echo $_POST['ecm1'] . ', ' . $_POST['ecm2'] . ', ' . $_POST['ecm3'];?&gt;';
&lt;? if ($_POST['dateAlu'] != '') { ?&gt;
   mailBody += '%0ADate Cards Returned to Company: &lt;? echo $_POST['dateAlu'];?&gt;';
   mailBody += '%0AALU Contact: &lt;? echo $_POST['aluContact'];?&gt;';
   mailBody += '%0AContact Number: &lt;? echo $_POST['aluContNum'];?&gt;';
   mailBody += '%0AShipping Tracking Number (if applicable): &lt;? echo $_POST['trackNum'];?&gt;';
&lt;? } ?&gt;
$('#reloadTrig',window.opener.document).trigger('click');
window.open('mailto:email.address@somecompany.com?subject=eNodeB%20bCEM%20Upgrade%20Completed&amp;body='+mailBody);
if ('&lt;? echo $_POST['addmore'];?&gt;' != 'addmore') {
window.close();
    }
}
</code></pre>

<p>Is there someway for this code to generate a valid result without the data being inserted into the database?</p>",php|jquery|mysql|insert,"<p>Your query after a successful connection to database is in most of the cases true, according to this documentation:</p>

<p><a href=""http://www.php.net/manual/en/mysqli.query.php"" rel=""nofollow"">http://www.php.net/manual/en/mysqli.query.php</a></p>

<p><code>Returns FALSE on failure. For successful SELECT, SHOW, DESCRIBE or EXPLAIN queries mysqli_query() will return a mysqli_result object. For other successful queries mysqli_query() will return TRUE.</code></p>

<hr>

<p>You need to check out if there's really an inserted row.</p>

<p>According to the documentation here (and a given example)</p>

<p><a href=""http://php.net/manual/en/mysqli.commit.php"" rel=""nofollow"">http://php.net/manual/en/mysqli.commit.php</a></p>

<p>You can check either by mysqli_commit (which in the example fails for duplicated entry, not for syntax error):</p>

<p><code>$all_query_ok ? $mysqli-&gt;commit() : $mysqli-&gt;rollback();</code></p>

<p>or via mysqli_affected_rows (which will only be true, if the insert statement really inserts a row)</p>

<pre><code>$result_query = @mysqli_query($query, $connect);
            if (($result_query == false) &amp;&amp;
               (mysqli_affected_rows($connect) == 0)) 
</code></pre>",0
16111742,Display different results on different page/profiles,"<p>I dont know if I lost the information in my brain, or if I never had it, but I have created a tweet so a user can follow other users.</p>

<p>The problem now is that every user display the same information. 
I Was trying to add WHERE <code>$_SESSION['uid']</code> to my query but that doesn't help do the trick.</p>

<p>Still shows the same info. 
Any tips ?</p>

<pre><code>&lt;?php 
    foreach(fetch_follotweets() as $tweet){ 
        echo $tweet['firstname']; 
        echo $tweet['lastname'];
        echo $tweet['username'];
        echo $tweet['date'];
        echo $tweet['profile_img'];
        $tweet['message'];
    }

    function fetch_follotweets(){
        global $db;
        $query = $db-&gt;query(""   SELECT
                                  user.email,
                                  user.username,
                                  tweets.message,
                                  tweets.date,
                                  userdetails.profile_img,
                                  userdetails.firstname,
                                  userdetails.lastname,
                                  following.id,
                                  following.user_id,
                                  following.follow_id
                                FROM user
                                  JOIN userdetails
                                    ON user.id = userdetails.user_id
                                  JOIN tweets
                                    ON userdetails.user_id = tweets.user_id
                                  JOIN following
                                    ON following.follow_id
                                WHERE following.follow_id = tweets.user_id AND
                                user.id='{$_SESSION['uid']}
                                ORDER BY tweets.date DESC"");
            $tweet = array();
        while(($row = $query-&gt;fetch(PDO::FETCH_ASSOC)) !==FALSE) { 
            $tweet[] = $row;
        }
        return $tweet;
    }
    ?&gt;
</code></pre>",mysql|sql|pdo,"<p>Without the <code>WHERE</code> clause, the <code>SQL</code> would get the details of all the users</p>

<p>Also, I think that the <code>JOIN</code> on <code>tweets</code> &amp; <code>following</code> should be a <code>LEFT JOIN</code> ( to get the <code>records</code> even if none of them is present )</p>

<pre><code>SELECT
  user.email,
  user.username,
  tweets.message,
  tweets.date,
  userdetails.profile_img,
  userdetails.firstname,
  userdetails.lastname,
  t.ids_of_users_followed
FROM 
  user
  JOIN userdetails
    ON user.id = userdetails.user_id
  LEFT JOIN (
      SELECT
        GROUP_CONCAT( following.follow_id ) AS ids_of_users_followed
        following.user_id
      FROM
        following
      GROUP BY
        following.user_id
    ) as t ON ( t.user_id = user.id )
  JOIN tweets
    ON ( userdetails.user_id = tweets.user_id OR FIND_IN_SET( tweets.user_id, t.ids_of_users_followed ) )
WHERE 
  user.id = :?    =&gt; Make sure to add the logged in user_id here
ORDER BY 
  tweets.date DESC
</code></pre>",1
16408406,mysql_result error within function,"<p>Im using a few functions in order to log users into the website. I first made a login() which looks like this:</p>

<pre><code>function login($username, $password){
$id = user_id_from_username($username);

$username = sanitize($username);
$password = md5($password);

return (mysql_result(mysql_query(""SELECT COUNT(`id`) FROM `users` WHERE `username` = '$username' AND `password` = '$password'""), 0) == 1) ? $id : false;
}
</code></pre>

<p>As you can see on line two of the function it calls another function user_id_from_username. That looks like this:</p>

<pre><code>function user_id_from_username($username) {
$username = sanitize($username);
return mysql_result(mysql_query(""SELECT `id` FROM `users` WHERE `username` == '$username'""), 0, `id`);
}
</code></pre>

<p>Now When I use the login function I get an warning stating the following:</p>

<p>Warning: mysql_result(): supplied argument is not a valid MySQL result resource in .../users.php on line 62</p>

<p>It is referring to the mysql_result in the return statement of user_id_from_username. It causes the login to not work correctly.</p>

<p>I am unable to solve this warning. Do you guys see anything wrong with it?</p>

<p>Thanks a lot!</p>",php|html|mysql,"<p>It might be in the query:</p>

<pre><code>WHERE `username` == '$username'""
</code></pre>

<p>Try changing it to (remove the extra =)):</p>

<pre><code>return mysql_result(mysql_query(""SELECT `id` FROM `users` WHERE `username` = '$username'""), 0, ""id"");
</code></pre>

<p>EDIT: Also, if this is a new project, use PDO instead of mysql_ functions, please and add in some error handling.</p>",2
16502688,mysql ambiguous column titles,"<p>Okay so i have a search code that looks into two tables. I know that the ambiguity comes from the fact that there is a column ""title"" in both tables (tables named disc track).</p>

<p>now my fix was this.</p>

<pre><code>$query=""SELECT * FROM  disc, track WHERE Artist LIKE '%$trimmed%' OR disc.Title LIKE 

'%$trimmed%' OR Year LIKE '%$trimmed%' OR Genre LIKE '%$trimmed%' LIMIT 0, 30"";
</code></pre>

<p>.</p>

<pre><code> Notice: Undefined index: disc.Title in C:\xampp\htdocs\search.php on line 61
</code></pre>

<p>I have been searching everywhere, and anywhere I go it says that that code is correct. but whenever I run through a search it says disc.Title doesn't exist (when i only search one of the tables it can find Title)</p>

<p>any ideas?</p>",php|mysql|database|search,"<p>run <code>$query=""SELECT * FROM disc, track WHERE Artist LIKE '%$trimmed%'""</code> does it work?</p>

<p>it is the <code>OR disc.Title</code> in  that is throwing you off.</p>

<p>you need to complete the <code>disk.Title</code> expression. <code>OR disc.Title LIKE '%$trimmed%'</code></p>

<p>also as far as running SQL goes, you should explicitly write your joins.</p>

<pre><code>SELECT * 
FROM disc
INNER JOIN track
    ON disk.id = track.disk_id
WHERE (
    [disk or track?].Artist LIKE '%$trimmed%' 
    OR disc.Title LIKE '%$trimmed%'
)
</code></pre>",2
16502688,mysql ambiguous column titles,"<p>Okay so i have a search code that looks into two tables. I know that the ambiguity comes from the fact that there is a column ""title"" in both tables (tables named disc track).</p>

<p>now my fix was this.</p>

<pre><code>$query=""SELECT * FROM  disc, track WHERE Artist LIKE '%$trimmed%' OR disc.Title LIKE 

'%$trimmed%' OR Year LIKE '%$trimmed%' OR Genre LIKE '%$trimmed%' LIMIT 0, 30"";
</code></pre>

<p>.</p>

<pre><code> Notice: Undefined index: disc.Title in C:\xampp\htdocs\search.php on line 61
</code></pre>

<p>I have been searching everywhere, and anywhere I go it says that that code is correct. but whenever I run through a search it says disc.Title doesn't exist (when i only search one of the tables it can find Title)</p>

<p>any ideas?</p>",php|mysql|database|search,"<pre><code>SELECT d.*, t.* FROM  disc d, track t WHERE t.Artist LIKE '%$trimmed%' OR d.Title LIKE '%$trimmed%' OR Year LIKE '%$trimmed%' OR t.Genre LIKE '%$trimmed%' LIMIT 0, 30
</code></pre>

<p>You should use the table information / prefix for all join and select items.</p>",0
44859401,character vector to string (with quotes and comma) using R,"<p>Hi when I do <code>paste(c(""A"",""B"",""C""),collapse='"",""')</code>,
the output is <code>""A\"",\""B\"",\""C""</code>.</p>

<p>How can I get <code>""A"",""B"",""C""</code> as one string?</p>",mysql|r,"<p>Even though R will output <code>""A\"",\""B\"",\""C""</code>,
keep in mind that the actual value is really <code>A"",""B"",""C</code>.
You can verify this by printing the value:</p>

<pre><code>&gt; cat(paste(c(""A"",""B"",""C""),collapse='"",""'))
A"",""B"",""C
</code></pre>

<p>Now, if you want the value to be <code>""A"",""B"",""C""</code> instead of <code>A"",""B"",""C</code>,
then you need to <code>paste</code> one more time, to prepend a <code>""</code> and append a <code>""</code>:</p>

<pre><code>&gt; cat(paste('""', paste(c(""A"",""B"",""C""),collapse='"",""'), '""', sep=''))
""A"",""B"",""C""
</code></pre>",3
44719579,Integrity constraint violation while adding into database,"<p>I have the following error when I am adding data to mysql using PHP and Ajax form:</p>

<blockquote>
  <p>SQLSTATE[23000]: Integrity constraint violation: 1452 Cannot add or
  update a child row: a foreign key constraint fails
  (<code>ncd</code>.<code>patient_med_history</code>, CONSTRAINT
  <code>fk_patient_medication_patient1</code> FOREIGN KEY (<code>patient_id</code>) REFERENCES
  <code>patient</code> (<code>patient_id</code>) ON DELETE CASCADE ON UPDATE CASCADE)</p>
</blockquote>

<p>Here are both of the table:</p>

<pre><code>CREATE TABLE IF NOT EXISTS `ncd`.`patient` (
  `patient_id` VARCHAR(45) NOT NULL,
  `patient_name_en` VARCHAR(55) CHARACTER SET 'utf8mb4' COLLATE
  `patient_status` VARCHAR(15) NULL,
  PRIMARY KEY (`patient_id`),
  INDEX `fk_patient_clinic1_idx` (`clinic_id` ASC),
  CONSTRAINT `fk_patient_clinic1`
    FOREIGN KEY (`clinic_id`)
    REFERENCES `ncd`.`clinic` (`clinic_id`)
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB;
</code></pre>

<p>And here the other table where the foreign key reside:</p>

<pre><code>CREATE TABLE IF NOT EXISTS `ncd`.`patient_med_history` (
  `patient_medication_id` INT NOT NULL AUTO_INCREMENT,
  `patient_medication` VARCHAR(55) NULL,
  `disease` VARCHAR(80) NULL,
  `patient_id` VARCHAR(45) NOT NULL,
  `clinic_id` VARCHAR(45) NULL,
  PRIMARY KEY (`patient_medication_id`),
  INDEX `fk_patient_medication_patient1_idx` (`patient_id` ASC),
  CONSTRAINT `fk_patient_medication_patient1`
    FOREIGN KEY (`patient_id`)
    REFERENCES `ncd`.`patient` (`patient_id`)
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB;
</code></pre>

<p><strong>PS</strong></p>

<p><strong>Some how 3 rows are added and after that, I've got this error and no row is added anymore</strong></p>",mysql|sql,"<p>When an error of <strong>Integrity Constraint</strong> happen , means you have a table with a field who has a <strong>FK</strong> to another table , so you are trying to add a value in this field that doesn't exist in the other table.</p>

<p>When you delete instead , you cannot delete from child who has FK if you don't delete first from the parent.</p>",1
44769703,Spring jpa many to many lazy delete,"<p>I'm using Spring jpa and mysql, I'm having problems with deleting entities, how to do it in the best way?</p>

<p>My Entity user :</p>

<pre><code>@ManyToMany(cascade = CascadeType.REMOVE)
@JoinTable(name = ""users_tasks"",
        joinColumns = {@JoinColumn(name = ""user_id"")},
        inverseJoinColumns = {@JoinColumn(name = ""task_id"")})
private List&lt;Task&gt; tasks;
</code></pre>

<p>My Entity task :</p>

<pre><code>@ManyToMany(fetch=FetchType.LAZY, mappedBy = ""tasks"")
private List&lt;User&gt; users = new ArrayList&lt;&gt;();
</code></pre>

<p>delete user in userServiceImpl (I'm not sure if this is correct but it works):</p>

<pre><code>user.setTasks(Collections.emptyList());
userRepository.save(user);
userRepository.delete(user);
</code></pre>

<p>delete task in taskServiceImpl (it does not work):</p>

<pre><code>task.setUsers(Collections.emptyList());
taskRepository.save(task);
taskRepository.delete(task);
</code></pre>

<p>exception:</p>

<pre><code>java.sql.SQLIntegrityConstraintViolationException: Cannot delete or update a parent row: a foreign key constraint fails (`testdb`.`users_tasks`, CONSTRAINT `FK7todmyl52eiddpi6hc2nfgvbs` FOREIGN KEY (`task_id`) REFERENCES `tasks` (`task_id`))
</code></pre>

<p>my jpa config:</p>

<pre><code>@Bean
public DataSource dataSource() {
BasicDataSource dataSource = new BasicDataSource();    
dataSource.setDriverClassName(
env.getRequiredProperty(""database.driver"");
dataSource.setUrl(env.getRequiredProperty(""database.url""));
dataSource.setUsername(env.getRequiredProperty(""database.password""));
dataSource.setPassword(env.getRequiredProperty(""database.username""));
return dataSource;
}

@Bean
public LocalContainerEntityManagerFactoryBean entityManagerFactory() {
    JpaVendorAdapter vendorAdapter = new HibernateJpaVendorAdapter();
    LocalContainerEntityManagerFactoryBean factory = new LocalContainerEntityManagerFactoryBean();
    factory.setDataSource(dataSource());
    factory.setPackagesToScan(""com.taskmanager"");
    factory.setJpaVendorAdapter(vendorAdapter);
    factory.setJpaProperties(additionalProperties());
    return factory;
}

@Bean
public JpaTransactionManager transactionManager() {
    JpaTransactionManager transactionManager = new JpaTransactionManager();
    transactionManager.setEntityManagerFactory(entityManagerFactory().getObject());
    return transactionManager;
}

@Bean
public DataSourceInitializer dataSourceInitializer(DataSource dataSource) {
    DataSourceInitializer initializer = new DataSourceInitializer();
    initializer.setDataSource(dataSource);
    initializer.setDatabasePopulator(databasePopulator());
    return initializer;
}

private Properties additionalProperties() {
    Properties properties = new Properties();
    properties.put(""hibernate.dialect"", env.getRequiredProperty(""hibernate.dialect""));
    properties.put(""hibernate.show_sql"", env.getRequiredProperty(""hibernate.show_sql""));
    properties.put(""hibernate.hbm2ddl.auto"", env.getRequiredProperty(""hibernate.hbm2ddl.auto""));
    properties.put(""hibernate.enable_lazy_load_no_trans"",
            env.getRequiredProperty(""hibernate.enable_lazy_load_no_trans""));
    return properties;
}

private DatabasePopulator databasePopulator() {
    ResourceDatabasePopulator populator = new ResourceDatabasePopulator();
    populator.addScript(dataScript);
    return populator;
}
</code></pre>

<p>Help me find the best workaround for removal, are my settings correctly spelled? Thank you</p>",java|mysql|spring|hibernate|jpa,"<p>In your example, the table <code>User</code> is the owner of the relationship, that's why when updating a user's tasks Hibernate deletes the list of tasks.</p>

<p>One work around to this is to make both entities as the owners of the relationship by setting a join table on the task entity : </p>

<pre><code>@ManyToMany(fetch=FetchType.LAZY)
@JoinTable(name = ""users_tasks"",
    joinColumns = {@JoinColumn(name = ""task_id"")},
    inverseJoinColumns = {@JoinColumn(name = ""user_id"")})
private List&lt;User&gt; users = new ArrayList&lt;&gt;();
</code></pre>

<p>Please notice that the inverse cloumns are reversed ,the mapped by is removed and the table name is the same.</p>

<p>Another workaround ,which is worth to mention, is  to manage the cascade directly on your Database by altering the <code>users_tasks</code> fks using <code>ON DELETE CASCADE</code></p>",1
19164413,"SQL Server to MySQL function using apostrophes, inverted commas and commas in values","<p>I have problem that i cant solve. The select that im doing returns 8500+ values many of them contain apostrophe, inverted commas, comas ("")(')(,). <br>
I'm using sql to mysql connection. <br></p>

<p>So its not one value that i need to deal with. I know how to deal with one value useing ‘Eat at Joe’’s -- It’’s Good Food!’ or ‘Eat at Joe\’s -- It\’s Good Food!’;. <br> Can someone help me please</p>

<pre><code>DECLARE @dogno varchar(5)
DECLARE @ime VARCHAR(200)
DECLARE @adresa VARCHAR(200)

DECLARE nam CURSOR FOR
    select Klienti.naziv as ime, Ulici.naziv+' '+Klienti.ulica_br as adresa , tKlienti_Dogovori.dogovor_br as dogno 
    from Klienti_Dogovori
    INNER JOIN Klienti on Klienti.id=Klienti_Dogovori.klient_id
    INNER JOIN Ulici on Ulici.id=Klienti.ulica_id
    where Klienti_Dogovori.usluga_id=2 and Klienti_Dogovori.aktiven=1
open nam
    fetch next from nam into @ime, @adresa, @dogno
    while @@FETCH_STATUS = 0 BEGIN
    DECLARE @sync varchar(max)
            set @sync = '''update users set name=''' +cast(@ime as VARCHAR(200))+ ''', address=''' +cast (@adresa as varchar(200))+ ''' where dognumber=''' + cast (@dogno as varchar(5))
        Execute(@sync) at mysqlserver
    fetch next from nam into @ime, @adresa, @dogno
    END
close nam
deallocate nam
</code></pre>

<p>This function works fine until it comes to a value that has apostrophe, inverted commas or comas ("")(')(,).</p>",mysql|sql-server|sql-server-2008|tsql,"<p>Since i found out how to do it ill answer my question. 
Its all in the select</p>

<pre><code>select replace(replace(replace(replace(replace(replace(REPLACE(Klienti.naziv,'''',''),'""',''),',',''),'“',''),'„',''),'’',''),'‘','') as ime, replace(replace(replace(replace(replace(replace(replace(Ulici.naziv+' '+Klienti.ulica_br,'''',''),'""',''),',',''),'“',''),'„',''),'’',''),'‘','') as adresa,  Klienti_Dogovori.dogovor_br as dogno
    from Klienti_Dogovori
    INNER JOIN Klienti on Klienti.id=Klienti_Dogovori.klient_id
    INNER JOIN Ulici on Ulici.id=Klienti.ulica_id
    where Klienti_Dogovori.usluga_id=2 and Klienti_Dogovori.aktiven=1
</code></pre>",0
19164413,"SQL Server to MySQL function using apostrophes, inverted commas and commas in values","<p>I have problem that i cant solve. The select that im doing returns 8500+ values many of them contain apostrophe, inverted commas, comas ("")(')(,). <br>
I'm using sql to mysql connection. <br></p>

<p>So its not one value that i need to deal with. I know how to deal with one value useing ‘Eat at Joe’’s -- It’’s Good Food!’ or ‘Eat at Joe\’s -- It\’s Good Food!’;. <br> Can someone help me please</p>

<pre><code>DECLARE @dogno varchar(5)
DECLARE @ime VARCHAR(200)
DECLARE @adresa VARCHAR(200)

DECLARE nam CURSOR FOR
    select Klienti.naziv as ime, Ulici.naziv+' '+Klienti.ulica_br as adresa , tKlienti_Dogovori.dogovor_br as dogno 
    from Klienti_Dogovori
    INNER JOIN Klienti on Klienti.id=Klienti_Dogovori.klient_id
    INNER JOIN Ulici on Ulici.id=Klienti.ulica_id
    where Klienti_Dogovori.usluga_id=2 and Klienti_Dogovori.aktiven=1
open nam
    fetch next from nam into @ime, @adresa, @dogno
    while @@FETCH_STATUS = 0 BEGIN
    DECLARE @sync varchar(max)
            set @sync = '''update users set name=''' +cast(@ime as VARCHAR(200))+ ''', address=''' +cast (@adresa as varchar(200))+ ''' where dognumber=''' + cast (@dogno as varchar(5))
        Execute(@sync) at mysqlserver
    fetch next from nam into @ime, @adresa, @dogno
    END
close nam
deallocate nam
</code></pre>

<p>This function works fine until it comes to a value that has apostrophe, inverted commas or comas ("")(')(,).</p>",mysql|sql-server|sql-server-2008|tsql,"<p>Ugh.  You'd be much better executing a stored procedure or UPDATE statement against your linked server than doing this abominable thing!</p>

<p>You should also look at doing a set based update rather than the cursor which is unnecessary and slow.</p>",0
19012797,mysql_fetch_assoc overwrite array,"<p>I have the following codewhich basically seems to be overwriting the same array each time so the output (json) only gives me the last row returned?</p>

<p>Thanks</p>

<pre><code>$structure = mysql_query(""SELECT FIELDNAME, DISPLAYNAME from `_PREFS_MAINGRID_`"");
$rowsField = array();
while($struct = mysql_fetch_assoc($structure)) {
    $rowsField[""columname""] = $struct;
}


$plode = implode(""` as `"", $rowsField[""columname""]);

print json_encode($rowsField);
</code></pre>",php|mysql|json,"<p>You aren't pushing the elements into the array in your loop.</p>

<p>Try this:</p>

<pre><code>$rowsField[""columname""][] = $struct;
</code></pre>

<p>See the <a href=""http://php.net/array_push"" rel=""nofollow"">documentation</a> for more information.</p>",4
19131974,Mysql; CASE; multiple WHEN ? THEN ?. How to create data for ? with foreach,"<p>Have input rows with following values (as example, show only 2 rows, but there may much more rows; of course values may be different)</p>

<pre><code>       entry_id | transaction_partner_name | registration_number
values
          10             name 1                   number 1
          11             name 2                   number 2
</code></pre>

<p>Must update mysql table with the values </p>

<p>Query may be like this</p>

<pre><code> UPDATE 2_1_transactionpartners SET 
 CompanyName = CASE NumberRenamed 
 WHEN ? THEN ? WHEN ? THEN ? 
 END, 
 RegistrationNumber = CASE NumberRenamed 
 WHEN ? THEN ? WHEN ? THEN ? 
 END 
 WHERE NumberRenamed in (?,?)
</code></pre>

<p>or </p>

<pre><code>$sql = ""
    UPDATE 2_1_transactionpartners SET
    CompanyName = CASE NumberRenamed
    $when_then
    END, 
    RegistrationNumber = CASE NumberRenamed
    $when_then
    END
    WHERE NumberRenamed in ($placeholders_for_number_renamed)"";
</code></pre>

<p>Now within foreach create variables</p>

<pre><code>$entry_id_for_number_renamed = array();

foreach ($_POST['entry_id'] as $i =&gt; $entry_id) {

    $for_company_name .= ( $_POST['entry_id'][$i]. ','. $_POST['transaction_partner_name'][$i]. ',' );

    $for_registration_number .= ( $_POST['entry_id'][$i]. ','. $_POST['registration_number'][$i]. ',' );

    $entry_id_for_number_renamed[] = $_POST['entry_id'][$i];

    $when_then .= 'WHEN ? THEN ? ';
    $placeholders_for_number_renamed .= '?,';

}

$for_company_name = rtrim($for_company_name, ',');
$for_company_name = explode(',', $for_company_name);

$for_registration_number = rtrim($for_registration_number, ',');
$for_registration_number = explode(',', $for_registration_number);

$insertData = array_merge( $for_company_name, $for_registration_number, $entry_id_for_number_renamed );
</code></pre>

<p>If idea about better (shorter) solution, please advice</p>",php|mysql|case,"<pre><code>UPDATE transactionpartners
SET transaction_partner_name = q.transaction_partner_name,
    registration_number      = q.registration_number
FROM (
    SELECT 10          AS entry_id                ,
        'new name 1'   AS transaction_partner_name,
        'new number 2' AS registration_number

    UNION

    SELECT 11          AS entry_id                ,
        'new name 3'   AS transaction_partner_name,
        'new number 4' AS registration_number
    )
    q
WHERE q.entry_id = transactionpartners.entry_id
</code></pre>",1
18710376,Two MySQL queries in JSON objects,"<p>I am trying to build the following JSON through MySQL and PHP.<br>
Each Chapter has an id, a chapter title, and a list of topics.<br>
Each topic has an id and a topic area</p>

<pre><code>{
""Chapters"": [
    {
        ""id"": ""1"",
        ""chapterTitle"": ""Introduction"",
        ""Topics"": [
            {
                ""id"": ""1"",
                ""topicArea"": ""C++""
            },
            {
                ""id"": ""2"",
                ""topicArea"": ""Java""
            }
        ]
    },
    {
        ""id"": ""2"",
        ""chapterTitle"": ""Getting Started"",
        ""Topics"": [
            {
                ""id"": ""1"",
                ""topicArea"": ""Start Here""
            }
        ]
    }
 ]
}
</code></pre>

<p>However, I am not able to generate this output if I try the following PHP code (<a href=""https://stackoverflow.com/questions/17911533/two-queries-mysql-in-one-object-json"">1</a>)</p>

<pre><code>//Get all chapters
$result = mysql_query(""SELECT * FROM chapters"");      

while ($row = mysql_fetch_array($result))
{
    $json[] = $row;
    $json2 = array();
    $chapterid = $row[""id""];

    //Fetch all topics within the first book chapter
    $fetch = mysql_query(""SELECT id,topicArea FROM topics where chapterid=$chapterid"");
    while ($row2 = mysql_fetch_assoc($fetch))
    {
         $json2[] = array( 
            'id' =&gt; $row2[""id""],
            'topicArea' =&gt; $row2[""topicArea""]
           );
     }
     $json['Topics'] = $json2;          //I think the problem is here!
}
echo json_encode($json);
</code></pre>",php|mysql|arrays|json,"<p>Please don't use the <code>mysql_*</code> functions any more. Both <code>mysqli</code> and <code>PDO</code> enables you to use prepared statements.</p>

<p>With that said, you are right that <code>$json['Topics'] = $json2;</code> is the problem: this needs to be <code>$json['Topics'][] = $json2;</code>.</p>

<p>Finally for performance reasons (look at <a href=""https://stackoverflow.com/questions/97197/what-is-the-n1-selects-issue"">What is SELECT N+1?</a>), you might want to look into a <code>JOIN</code>. All in all:</p>

<pre><code>$dbh = new PDO(""mysql:host=$db_host;dbname=$db_name"", $db_user, $db_pass);
$query = 'SELECT c.id AS chapter_id, c.chapterTitle, t.id as topic_id, t.topicArea FROM chapters c INNER JOIN topics t ON c.id = t.chapterid';
$json = array();
foreach ($dbh-&gt;query($query) as $row) {
  $json[$row['chapter_id']]['id'] = $row-&gt;chapter_id;
  $json[$row['chapter_id']]['chapter_title'] = $row-&gt;chapter_title;
  $json[$row['chapter_id']]['Topics'][] = array(
    'id' =&gt; $row-&gt;topic_id,
    'topicArea' =&gt; $row-&gt;topicArea,
  );
}
print json_encode(array_values($json));
</code></pre>",1
19227011,how to select and sum directly preceded related rows,"<p>I have a table of bills payable ..</p>

<p>I would like to select all data where
(if <code>sd_doc</code> is NULL) then retrieves this invoice price as it</p>

<p>However, <code>if sd_doc is NOT NULL</code> retrieves all the previous <code>NULL sd_doc</code>, and then <code>SUM prices</code> of all those rows together</p>

<p>Note : I want the empty months that directly preceded not all <code>NULL sd_doc</code></p>

<p>my table and sampledata</p>

<pre><code>CREATE TABLE IF NOT EXISTS `d_statistics_docs` (
  `sd_id` int(11) NOT NULL AUTO_INCREMENT,
  `sd_pub` int(11) NOT NULL,
  `sd_date` date NOT NULL,
  `sd_doc` text NOT NULL,
  `price` int(11) NOT NULL,
  PRIMARY KEY (`sd_id`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 AUTO_INCREMENT=16 ;

--
-- Dumping data for table `d_statistics_docs`
--

INSERT INTO `d_statistics_docs` (`sd_id`, `sd_pub`, `sd_date`, `sd_doc`, `price`) VALUES
(9, 256, '2013-03-01', 'scifiwallpaper1.jpg', 5),
(10, 256, '2013-04-01', 'scifiwallpaper1.jpg', 15),
(11, 256, '2013-05-01', '', 3),
(12, 256, '2013-06-01', 'scifiwallpaper1.jpg', 7),
(13, 256, '2013-07-01', '', 9),
(14, 256, '2013-08-01', '', 11),
(15, 256, '2013-09-01', 'scifiwallpaper1.jpg', 25);
</code></pre>

<p>the result i need like that</p>

<pre><code>9   256     2013-03-01  scifiwallpaper1.jpg 5

10  256     2013-04-01  scifiwallpaper1.jpg 15

11  256     2013-05-01                       3

12  256    2013-06-01   scifiwallpaper1.jpg 10  // total 7 + 3 

13  256     2013-07-01                      9

14  256     2013-08-01                      11

15  256     2013-09-01  scifiwallpaper1.jpg 45  // total of 25+11+9
</code></pre>",mysql|sql,"<p>You had said null, but you're setting SD_DOC to spaces so I programmed for that</p>

<pre><code>Select 
  * 
, Case 
  When d.SD_DOC &lt;&gt; '' Then 
  IfNull
  (
    ( Select Sum(d2.PRICE)
      From d_statistics_docs d2
      Where d2.SD_ID &gt;
            ( Select Max(SD_ID)
              From d_statistics_docs d3
              Where SD_DOC &lt;&gt; ''
                And d3.SD_ID &lt; d.SD_ID
             )
        And d2.SD_ID &lt;= d.SD_ID
    )
  , d.PRICE  
  )
  Else d.PRICE
  End  TotPrev
From d_statistics_docs d
</code></pre>",1
34730787,MySQL Update query using a combination xy or yx,"<p>I know the question is little ambiguous. I hope I am able to clarify the question here.</p>

<p>I have a table,<a href=""http://i.stack.imgur.com/MdNOd.png"" rel=""nofollow"">Table Name: user_group_relation</a> </p>

<pre><code>|--------------------------------------|
| userId | userId_1 | groupId | amount |
|--------------------------------------|
|   3    |     5    |     1   |  0.00  |
|--------------------------------------|
</code></pre>

<p>I want to issue a update on the table, so as I have two columns userId and userId_1 which have the userId of two different users.</p>

<p>I have a relation (3,5) is there any way I can look up in the table for this combination where the relation (userId_1, userId) could have been stored as either (3,5) or (5,3)</p>",mysql|sql-update,"<p>Do you mean</p>

<pre><code>SELECT * FROM user_group_relation WHERE (userId_1 = 3 AND userId = 5) 
OR (userId_1 = 5 AND userId = 3);
</code></pre>

<p>or</p>

<pre><code>UPDATE user_group_relation set userId_1 = &lt;value&gt;, userId = &lt;value&gt; 
WHERE (userId_1 = 3 AND userId = 5) OR (userId_1 = 5 AND userId = 3);
</code></pre>

<p>?</p>",1
34659689,Adding a value into a field,"<p>Inherited a 20,000 book database with a particular field called 'keywords' that is a mess, in one huge table called books.
Trying to prepend a value to each of the 'keywords' fields that reads the words in that field and identifies its exact category with one clear phrase.</p>

<p>So, looking for the word 'ancient' and prepending the value 'menu-ancient'.</p>

<pre><code>UPDATE books SET keywords=CONCAT('menu-ancient, ',keywords) 
where keywords like '%ancient%';
</code></pre>

<p>That works, but then the following query doesn't do what I want!</p>

<p>It's supposed to find all the ones its just done and go through them to find which of them also have the word 'medieval' in there - to give the submenu menu-ancient-medieval as well.</p>

<pre><code>UPDATE books SET keywords=CONCAT('menu-ancient-medieval, ',keywords) 
where keywords = 'menu-ancient' AND keywords LIKE '%medieval%';
</code></pre>

<p>One example field is this:
menu-ancient, WAR., MIDDLE AGES, ANCIENT AND MEDIEVAL, ANCIENT TO 19TH CENTURY, </p>

<p>I have got the menu-ancient prepended but getting nowhere with the medieval bit!</p>",mysql,"<p>You can use the find_in_set() function to do this.</p>

<p>This works like in the following example :</p>

<pre><code>SELECT * from books where FIND_IN_SET('menu-ancient', keywords) &gt; 0;
</code></pre>

<p>You can apply this to your update query </p>

<pre><code>UPDATE books 
SET keywords=CONCAT('menu-ancient-medieval, ',keywords)
where
  FIND_IN_SET('menu-ancient', keywords)
  AND keywords LIKE '%medieval%';
</code></pre>

<p>NOTE: I'm not quite sure I understand your second part of the question correctly. I guess you may have to alter the query to use a subquery in your where clause.</p>",0
6858455,"no operation allowed after statement is closed. Java, Mysql","<p>I have this code:</p>

<pre><code>public void saveGPSReading(GPSReader gpsRd){

String sql=""INSERT INTO EventData("" +
        ""accountID,"" +
        ""deviceID,"" +
        ""timestamp,""+
        ""statusCode,"" +
        ""latitude,"" +
        ""longitude, "" +
        ""gpsAge,"" +
        ""speedKPH, "" +
        ""heading,"" +
        ""altitude,"" +
        ""address,"" +
        ""creationTime)"" +
        ""values("" +
        ""'demo','teltonika001',?,61714,?,?,0,?,?,?,'--not implemented--',?)"";

    try{
        if(!con.isClosed()){

            stmt = con.prepareStatement(sql);

            for(DeviceEvent de : gpsRd.getEvents()){
                GPSElement gps=de.getGpsElement();
                IOElementReader ioe= de.getIoElement();

                stmt.setLong(1, gps.getTimestamp().getTime());
                stmt.setDouble(2, gps.getLatitude());
                stmt.setDouble(3, gps.getLongitude());
                stmt.setLong(4, gps.getSpeed());
                stmt.setLong(5, gps.getAngle());
                stmt.setLong(6, gps.getAltitude());
                stmt.setLong(7, (new Date()).getTime());

                stmt.addBatch();
                //String s = stmt.toString();
            }
            stmt.executeBatch();
        }
    }
    catch(Exception err){
        err.printStackTrace();
    }
}
</code></pre>

<p>which gets called here:</p>

<pre><code>public void readPacketData(){
    if(info.isValid()==true){
        for( int i =0; i&lt; info.getRecords(); i++){
            GPSElement gps= readGPSElement();

            IOElementReader io= readIOElement();
            DeviceEvent dEvt = new DeviceEvent(gps,io);
            gpsReader.addEvent(dEvt);
        }
    }
    dbMan.saveGPSReading(gpsReader);
</code></pre>

<p>thats the only place where i call it and am getting that exception at the line </p>

<pre><code>stmt.executeBatch();
</code></pre>

<blockquote>
  <p>java.sql.BatchUpdateException: No operations allowed after statement
  closed.
          at
  com.mysql.jdbc.PreparedStatement.executeBatchSerially(PreparedStatement.java:2024)
          at
  com.mysql.jdbc.PreparedStatement.executeBatch(PreparedStatement.java:1449)
          at DBManager.saveGPSReading(DBManager.java:64)</p>
</blockquote>

<p>any help here?</p>

<p>am not closing anything here. not even the connection, at any point in my code</p>

<p>::EDIT::</p>

<p>so i followed your tips, changed the code to this:</p>

<pre><code>public void saveGPSReading(GPSReader gpsRd){

    String sql=""INSERT INTO EventData("" +
        ""accountID,"" +
        ""deviceID,"" +
        ""timestamp,""+
        ""statusCode,"" +
        ""latitude,"" +
        ""longitude, "" +
        ""gpsAge,"" +
        ""speedKPH, "" +
        ""heading,"" +
        ""altitude,"" +
        ""address,"" +
        ""creationTime)"" +
        ""values("" +
        ""'demo','teltonika001',?,61714,?,?,0,?,?,?,'--not implemented--',?)"";       
    try{
        Connection con= createConnection();
        con.setAutoCommit(false);
        stmt = con.prepareStatement(sql);                   
        for(DeviceEvent de : gpsRd.getEvents()){
            GPSElement gps=de.getGpsElement();
            IOElementReader ioe= de.getIoElement();

            stmt.setLong(1, gps.getTimestamp().getTime());
            stmt.setDouble(2, gps.getLatitude());
            stmt.setDouble(3, gps.getLongitude());
            stmt.setLong(4, gps.getSpeed());
            stmt.setLong(5, gps.getAngle());
            stmt.setLong(6, gps.getAltitude());
            stmt.setLong(7, (new Date()).getTime());

            stmt.addBatch();
        }
        int[] updateCounts = stmt.executeBatch();
        checkUpdateCounts(updateCounts);
        con.commit();
    }
    catch (BatchUpdateException e) {
        int[] updateCounts = e.getUpdateCounts();
        checkUpdateCounts(updateCounts);
        try {
            con.rollback();
        } 
        catch (Exception e2) {
            e.printStackTrace();
        }
    } 
    catch (Exception e) {
        e.printStackTrace();
    } 
    finally {
        try {
            stmt.close();
            con.close();
        } 
        catch (SQLException e) {
            e.printStackTrace();
        }         
    }
}
</code></pre>

<p>with a new method to create the connection :</p>

<pre><code>public Connection createConnection(){
    Connection con= null;
    if(con ==null){
        try {
            DriverManager.registerDriver(new com.mysql.jdbc.Driver()); 
            String c=Constants.DB.DB_URL+""?user=""+Constants.DB.DB_USER+""&amp;""+""password=""+Constants.DB.DB_PASSWORD;
            con=DriverManager.getConnection(c);
        }
        catch (SQLException e) {
            e.printStackTrace();
        }
    }
    return con;
}
</code></pre>

<p>the same issue still persists</p>",java|mysql,"<p>anfy2002us already posted in his comment that your DB-connection <strong>may not yet be open</strong> (because isClosed only is true if it was opened and then closed). </p>

<p>If that is not the problem here (e.g. if you are really checking that the connection is opened before you enter your <code>readPacketData()</code>, then do it like in this example:</p>

<p><a href=""http://www.java2s.com/Code/Java/Database-SQL-JDBC/DemoPreparedStatementAddBatchMySQL.htm"" rel=""nofollow"">http://www.java2s.com/Code/Java/Database-SQL-JDBC/DemoPreparedStatementAddBatchMySQL.htm</a></p>

<p>We should explicitly handle a batch-fail and rollback-retry on fail.</p>",0
6861719,Best practices for Denormalizing data from Relational to non-relational DBs,"<p>I'm running a website that's starting to grow beyond simple performance and Tunning. It's a PHP app with MySQL as backend. MySQL is properly tunned and the code is optimized.</p>

<p>The thing is that i see that i can use some sort of denormalization to speed things up.</p>

<p>Suppose you have a site similar to ebay or Amazon. You have products in your database with some information related (seller, customers who bought the product, city, state, etc). That would be multiple tables in a Relational DataBase, and is good to keep this way to make good querys. But, for example, for the home page, you could have one single denormalized document (for example in MongoDB). Could be a collection with the latest products, denormalied, similar to this:</p>

<pre><code>products = {
   {
      id:13,
      name:""Some product"",
      city:""aCity"",
      state:""aState"",
      price:""10""
   },
   {
      id:123,
      name:""another product"",
      city:""aCity"",
      state:""aState"",
      price:""10""
   }
}
</code></pre>

<p>This way, I could query that collection instead of the MySQL database (with all the joins involved) and things could get really fast.</p>

<p>Now, here is the question. When and how would you denormalize that data?
For example, i could decide that I want to denormalize the data when it's inserted.</p>

<p>So, in my ""create-product.php"" (simply put). I could do all the ""insert into"" for mysql, and after that i could do the save to the Mongo collection.</p>

<p>Or, i could just run a program in the server. Or make some cron to look for the latest products.</p>

<p>All these are posibilities. What do you do? What is your expirience?</p>

<p>Thanks a lot.</p>",php|mysql|performance|mongodb|denormalization,"<p>Conceptually you are creating some kind of a cache, and you're forseeing that populating it is  going to be time-expensive, hence you want to have it persistent, on the reasonable assumption that loading from your persisted cache is going to faster than going back to the real DB.</p>

<p>There are some variations on your idea, caching HTML page fragements or JSON strings, and using a distributed in-memory cache - not persistent  but fault-tolerant.</p>

<p>The big question with all caching solutions is: ""how stale can I afford to be?"". For some data being 24 hours out of date doesn't really matter. For example: Top 10 most popular books? Latest reviews, for those just some batch update will do. For more urgent stuff you may well need to ensure that there's a more rapid update, but you really want to avoid putting too much extra processing in the mainstream. For example it would be a shame to give a customer a slow purchasing experience because he's waiting for an update to a cache. In those cases you might just drop a ""Here's an update"" message on a queue, or indeed a ""your entry nunber 23 is now stale"" message, let the cache pick that up as its leisure and if need be refresh itself.</p>",4
6980942,Where can I get a full database of american neighborhoods?,"<p>I'm currently working on a project where I require an extensive hyperlocalised database of US neighborhoods.</p>

<p>I purchased the full US db from <a href=""http://www.zipcodedownload.com/"" rel=""nofollow"">http://www.zipcodedownload.com/</a> but because I am from Australia I didn't realize that each neighborhood in America does not specifically have a zip code (eg meatpacking district new york) so it is not that useful to me.</p>

<p>The db needs to be in a format that can be imported into Mysql and can't be an api. Also needs to have log and lat values for each area.</p>

<p>Thanks</p>",mysql|database,"<p>What about <a href=""http://aws.amazon.com/datasets/2341"" rel=""nofollow"">http://aws.amazon.com/datasets/2341</a> (US Economic Data for 2003-2006 from the The US Census Bureau)</p>",0
6980942,Where can I get a full database of american neighborhoods?,"<p>I'm currently working on a project where I require an extensive hyperlocalised database of US neighborhoods.</p>

<p>I purchased the full US db from <a href=""http://www.zipcodedownload.com/"" rel=""nofollow"">http://www.zipcodedownload.com/</a> but because I am from Australia I didn't realize that each neighborhood in America does not specifically have a zip code (eg meatpacking district new york) so it is not that useful to me.</p>

<p>The db needs to be in a format that can be imported into Mysql and can't be an api. Also needs to have log and lat values for each area.</p>

<p>Thanks</p>",mysql|database,"<p>Does the zip code database that you bought include data down to the ""zip+4"" level? A zip+4 normally identifies one side of a section of a street. That's probably smaller than what you consider a ""neighborhood"", but you could then aggregate.</p>

<p>Of course I have no idea what data you want ABOUT a neighborhood.</p>",0
6462123,php: merging arrays with mysql results and sorting them by an array key,"<p>basically i'm building an serch engine for my website but my sql database contains basically 2 sets of tables (one set for pages on the site and another set for the files (.doc etc))</p>

<p>I've got the popluate working and i got it returning results of pages, now i want to search both pages and files which i came up with the idea of running 2 querys (because of the 2 table sets) then merging those 2 resulting arrays into one and then sorting them by 'occurrence' which is added in by the querys. But the output isn't matching the input arrays. anyway some code to give you something to work off</p>

<pre><code>// Search the DB for pages
$page_result = mysql_query(""SELECT p.page_url AS url, COUNT(*) AS occurrences FROM page p, word w, occurrence o WHERE p.page_id = o.page_id AND w.page_word_id = o.page_word_id AND w.word_word LIKE '' '"" . $stemmed_string . ""' '%' GROUP BY p.page_id ORDER BY occurrences DESC"") // LIMIT "" . $results . """")
or die(""Invalid query: "" . mysql_error());

// Search the DB for files
$file_result = mysql_query(""SELECT f.file_url AS url, COUNT(*) AS occurrences FROM files f, filenames fn, fileoccurrence fo WHERE f.file_id = fo.file_id AND fn.file_word_id = fo.file_word_id AND fn.file_word LIKE '' '"" . $stemmed_string . ""' '%' GROUP BY f.file_id ORDER BY occurrences DESC"")
or die (""Invalid query: "" . mysql_error());

$page_array = mysql_fetch_array($page_result);
$file_array = mysql_fetch_array($file_result);


$results = array_merge((array)$page_array, (array)$file_array);
</code></pre>

<p>the output of a search term (a) with var dumps looks like this</p>

<blockquote>
  <p>array(4) { [0]=> string(33) ""/index.php?page=footy_tipping.htm"" [""url""]=> string(33) ""/index.php?page=footy_tipping.htm"" [1]=> string(4) ""1272"" [""occurrences""]=> string(4) ""1272"" }</p>
  
  <p>array(4) { [0]=> string(43) ""/files/forms/misc/Adjustment%20TEMPLATE.xls"" [""url""]=> string(43) ""/files/forms/misc/Adjustment%20TEMPLATE.xls"" [1]=> string(1) ""2"" [""occurrences""]=> string(1) ""2"" }</p>
  
  <p>array(6) { [0]=> string(33) ""/index.php?page=footy_tipping.htm"" [""url""]=> string(43) ""/files/forms/misc/Adjustment%20TEMPLATE.xls"" [1]=> string(4) ""1272"" [""occurrences""]=> string(1) ""2"" [2]=> string(43) ""/files/forms/misc/Adjustment%20TEMPLATE.xls"" [3]=> string(1) ""2"" } </p>
</blockquote>

<p>they are ordered the same as the variables above</p>

<p>Had a look around in the manual and nothing really helpfull came up on how to sort an array by key => value (eg sort($results['occurrence'], DESC))</p>

<p>any help would be appreaciated thanks guys :)</p>",php|mysql|arrays|sorting|merge,"<p>Have you look at <a href=""http://www.php.net/manual/en/function.array-multisort.php"" rel=""nofollow"">array_multisort</a>? You'll have to do something like this:</p>

<pre><code>&lt;?php
// Obtain a list of columns
foreach ($results as $key =&gt; $row) {
    $occurrences[$key]  = $row['occurrences'];
}

// Sort the data with volume descending, edition ascending
// Add $data as the last parameter, to sort by the common key
array_multisort($occurrences, SORT_DESC, $results);
?&gt;
</code></pre>",0
6462123,php: merging arrays with mysql results and sorting them by an array key,"<p>basically i'm building an serch engine for my website but my sql database contains basically 2 sets of tables (one set for pages on the site and another set for the files (.doc etc))</p>

<p>I've got the popluate working and i got it returning results of pages, now i want to search both pages and files which i came up with the idea of running 2 querys (because of the 2 table sets) then merging those 2 resulting arrays into one and then sorting them by 'occurrence' which is added in by the querys. But the output isn't matching the input arrays. anyway some code to give you something to work off</p>

<pre><code>// Search the DB for pages
$page_result = mysql_query(""SELECT p.page_url AS url, COUNT(*) AS occurrences FROM page p, word w, occurrence o WHERE p.page_id = o.page_id AND w.page_word_id = o.page_word_id AND w.word_word LIKE '' '"" . $stemmed_string . ""' '%' GROUP BY p.page_id ORDER BY occurrences DESC"") // LIMIT "" . $results . """")
or die(""Invalid query: "" . mysql_error());

// Search the DB for files
$file_result = mysql_query(""SELECT f.file_url AS url, COUNT(*) AS occurrences FROM files f, filenames fn, fileoccurrence fo WHERE f.file_id = fo.file_id AND fn.file_word_id = fo.file_word_id AND fn.file_word LIKE '' '"" . $stemmed_string . ""' '%' GROUP BY f.file_id ORDER BY occurrences DESC"")
or die (""Invalid query: "" . mysql_error());

$page_array = mysql_fetch_array($page_result);
$file_array = mysql_fetch_array($file_result);


$results = array_merge((array)$page_array, (array)$file_array);
</code></pre>

<p>the output of a search term (a) with var dumps looks like this</p>

<blockquote>
  <p>array(4) { [0]=> string(33) ""/index.php?page=footy_tipping.htm"" [""url""]=> string(33) ""/index.php?page=footy_tipping.htm"" [1]=> string(4) ""1272"" [""occurrences""]=> string(4) ""1272"" }</p>
  
  <p>array(4) { [0]=> string(43) ""/files/forms/misc/Adjustment%20TEMPLATE.xls"" [""url""]=> string(43) ""/files/forms/misc/Adjustment%20TEMPLATE.xls"" [1]=> string(1) ""2"" [""occurrences""]=> string(1) ""2"" }</p>
  
  <p>array(6) { [0]=> string(33) ""/index.php?page=footy_tipping.htm"" [""url""]=> string(43) ""/files/forms/misc/Adjustment%20TEMPLATE.xls"" [1]=> string(4) ""1272"" [""occurrences""]=> string(1) ""2"" [2]=> string(43) ""/files/forms/misc/Adjustment%20TEMPLATE.xls"" [3]=> string(1) ""2"" } </p>
</blockquote>

<p>they are ordered the same as the variables above</p>

<p>Had a look around in the manual and nothing really helpfull came up on how to sort an array by key => value (eg sort($results['occurrence'], DESC))</p>

<p>any help would be appreaciated thanks guys :)</p>",php|mysql|arrays|sorting|merge,"<p>How doing it in sql as a union?</p>

<pre><code>SELECT * FROM (    
    SELECT p.page_url AS url,
        COUNT(*) AS occurrences
    FROM page p, word w, occurrence o
    WHERE p.page_id = o.page_id
        AND w.page_word_id = o.page_word_id
        AND w.word_word LIKE '' '"" . $stemmed_string . ""' '%'
    GROUP BY p.page_id
    UNION
    SELECT f.file_url AS url,
        COUNT(*) AS occurrences
    FROM files f, filenames fn, fileoccurrence fo
    WHERE f.file_id = fo.file_id
        AND fn.file_word_id = fo.file_word_id
        AND fn.file_word LIKE '' '"" . $stemmed_string . ""' '%'
    GROUP BY f.file_id
) t
ORDER BY occurrences DESC
</code></pre>",1
6487418,How to handle multiple openIDs for the same user,"<p>For my site I am using a login system much like the one on SO. A user can login with his Facebook, Google (Gmail openID), Twitter account.</p>

<p>This question is not about specific oAuth or openID implementations.</p>

<p>The question is how to know if the same user logins with different providers. </p>

<p>Let me give an example:</p>

<p><em><strong>Bobo</em></strong> comes to site logins to site by clicking on <em>""Login with Facebook""</em>. Because this is his first visit we create an account for him. </p>

<p>Later <strong><em>Bobo</em></strong> comes to the site. This time he clicks on <em>""Login with Google""</em>. So how do I know if this is the same person so I can add this provider to his account instead of creating a new (and duplicate) account.</p>

<p>Can I trust solely on email?</p>

<p>What is the best way to handle this. How does SO do it? </p>

<p>Any ideas?</p>

<p><em><strong>Edit:</em></strong> 
If I trust on email is there a possibility that the same email can be used by different users? Can this be a security issue?</p>",php|mysql|login|oauth|openid,"<p>Unless both accounts provide the same email address, you would not be able to reliably determine that they were both the same user. </p>

<p>If you want a user to be able to login with multiple oAuth/OpenID accounts, you could provide a mechanism to allow the user to add additional authentications from their user account.</p>",0
6487418,How to handle multiple openIDs for the same user,"<p>For my site I am using a login system much like the one on SO. A user can login with his Facebook, Google (Gmail openID), Twitter account.</p>

<p>This question is not about specific oAuth or openID implementations.</p>

<p>The question is how to know if the same user logins with different providers. </p>

<p>Let me give an example:</p>

<p><em><strong>Bobo</em></strong> comes to site logins to site by clicking on <em>""Login with Facebook""</em>. Because this is his first visit we create an account for him. </p>

<p>Later <strong><em>Bobo</em></strong> comes to the site. This time he clicks on <em>""Login with Google""</em>. So how do I know if this is the same person so I can add this provider to his account instead of creating a new (and duplicate) account.</p>

<p>Can I trust solely on email?</p>

<p>What is the best way to handle this. How does SO do it? </p>

<p>Any ideas?</p>

<p><em><strong>Edit:</em></strong> 
If I trust on email is there a possibility that the same email can be used by different users? Can this be a security issue?</p>",php|mysql|login|oauth|openid,"<p>Go to your profile on this site, there, above your details, you will see 2 links: edit | add openid</p>

<p>Usually you will have 1 user = 1 login details (login/password stored together with the rest of info). In this multi-id situation you have to store login details separately (1 user may have more than 1 login id). Simple 1-to-many relation between DB tables.</p>",0
6487418,How to handle multiple openIDs for the same user,"<p>For my site I am using a login system much like the one on SO. A user can login with his Facebook, Google (Gmail openID), Twitter account.</p>

<p>This question is not about specific oAuth or openID implementations.</p>

<p>The question is how to know if the same user logins with different providers. </p>

<p>Let me give an example:</p>

<p><em><strong>Bobo</em></strong> comes to site logins to site by clicking on <em>""Login with Facebook""</em>. Because this is his first visit we create an account for him. </p>

<p>Later <strong><em>Bobo</em></strong> comes to the site. This time he clicks on <em>""Login with Google""</em>. So how do I know if this is the same person so I can add this provider to his account instead of creating a new (and duplicate) account.</p>

<p>Can I trust solely on email?</p>

<p>What is the best way to handle this. How does SO do it? </p>

<p>Any ideas?</p>

<p><em><strong>Edit:</em></strong> 
If I trust on email is there a possibility that the same email can be used by different users? Can this be a security issue?</p>",php|mysql|login|oauth|openid,"<p>I think you can't really know this unless the user explicitly says it's Bobo again. His FB and Google OpenID identities may have completely different info (as do mine). Only Bobo knows that these belong to the same person.</p>

<p>See how it's done here at SO: you log in with OpenID, then you can link another OpenID to your account. Hint your user do so, too. Provide a large enough ""I already have an account here"" button in the login process.</p>",1
6875553,How can I convert database query results to an array?,"<p>How would I convert the results returned in a MySQL query to an array in C# .Net/Mono</p>

<p>To my understanding you need to define arrays with the number of items the array will hold but I understand that the DataReader doesn't tell you have many row was returned. so how can I define a array.</p>

<p>So far I have:</p>

<pre><code>string sqlWhere;

        if ((name != None) &amp;&amp; (name != """"))
            sqlWhere = ""WHERE name LIKE '%""+name+""%'"";

        if ((company != None) &amp;&amp; (company != """"))
            if (sqlWhere == """")
                sqlWhere = ""WHERE company LIKE '%""+company+""%'"";
            else
                sqlWhere = sqlWhere + "" AND company LIKE '%""+company+""%'"";

        if ((dateFrom != None) &amp;&amp; (dateFrom != """") &amp;&amp; (dateTo != None) &amp;&amp; (dateTo != """"))
            if (sqlWhere == """")
                sqlWhere = ""WHERE date(timestampIn) BETWEEN '""+dateFrom+""' AND '""+dateTo+""'"";
            else
                sqlWhere = sqlWhere + "" AND date(timestampIn) BETWEEN '""+dateFrom+""' AND '""+dateTo+""'"";

        IDbCommand dbcmd = this.dbcon.CreateCommand();
        dbcmd.CommandText = ""SELECT * FROM visitors "" + sqlWhere;

                    MySqlDataReader Reader = dbcmd.ExecuteReader();

                    while (Reader.Read())
            {

            }
</code></pre>",c#|.net|mysql|mono,"<p>Instead of using a <code>DataReader</code>, use a <code>DataAdapter</code> to fill a <code>DataTable</code>. You can see the total number of rows in the resulting <code>DataTable</code>.</p>

<pre><code>var results = new DataTable();

var adapter = new SqlDataAdapter();
adapter.SelectCommand = dbcmd;
dapater.Fill(results);
</code></pre>",1
6875553,How can I convert database query results to an array?,"<p>How would I convert the results returned in a MySQL query to an array in C# .Net/Mono</p>

<p>To my understanding you need to define arrays with the number of items the array will hold but I understand that the DataReader doesn't tell you have many row was returned. so how can I define a array.</p>

<p>So far I have:</p>

<pre><code>string sqlWhere;

        if ((name != None) &amp;&amp; (name != """"))
            sqlWhere = ""WHERE name LIKE '%""+name+""%'"";

        if ((company != None) &amp;&amp; (company != """"))
            if (sqlWhere == """")
                sqlWhere = ""WHERE company LIKE '%""+company+""%'"";
            else
                sqlWhere = sqlWhere + "" AND company LIKE '%""+company+""%'"";

        if ((dateFrom != None) &amp;&amp; (dateFrom != """") &amp;&amp; (dateTo != None) &amp;&amp; (dateTo != """"))
            if (sqlWhere == """")
                sqlWhere = ""WHERE date(timestampIn) BETWEEN '""+dateFrom+""' AND '""+dateTo+""'"";
            else
                sqlWhere = sqlWhere + "" AND date(timestampIn) BETWEEN '""+dateFrom+""' AND '""+dateTo+""'"";

        IDbCommand dbcmd = this.dbcon.CreateCommand();
        dbcmd.CommandText = ""SELECT * FROM visitors "" + sqlWhere;

                    MySqlDataReader Reader = dbcmd.ExecuteReader();

                    while (Reader.Read())
            {

            }
</code></pre>",c#|.net|mysql|mono,"<p>You can use <code>List&lt;T&gt;</code> enter code here instead of array to store your data where T is the type of data you want to store e.g. string, int or your custom data type. For using Arrays, we need to specify the length at compile time but with <code>List&lt;T&gt;</code> we can store data without worrying about the length.</p>",1
6875553,How can I convert database query results to an array?,"<p>How would I convert the results returned in a MySQL query to an array in C# .Net/Mono</p>

<p>To my understanding you need to define arrays with the number of items the array will hold but I understand that the DataReader doesn't tell you have many row was returned. so how can I define a array.</p>

<p>So far I have:</p>

<pre><code>string sqlWhere;

        if ((name != None) &amp;&amp; (name != """"))
            sqlWhere = ""WHERE name LIKE '%""+name+""%'"";

        if ((company != None) &amp;&amp; (company != """"))
            if (sqlWhere == """")
                sqlWhere = ""WHERE company LIKE '%""+company+""%'"";
            else
                sqlWhere = sqlWhere + "" AND company LIKE '%""+company+""%'"";

        if ((dateFrom != None) &amp;&amp; (dateFrom != """") &amp;&amp; (dateTo != None) &amp;&amp; (dateTo != """"))
            if (sqlWhere == """")
                sqlWhere = ""WHERE date(timestampIn) BETWEEN '""+dateFrom+""' AND '""+dateTo+""'"";
            else
                sqlWhere = sqlWhere + "" AND date(timestampIn) BETWEEN '""+dateFrom+""' AND '""+dateTo+""'"";

        IDbCommand dbcmd = this.dbcon.CreateCommand();
        dbcmd.CommandText = ""SELECT * FROM visitors "" + sqlWhere;

                    MySqlDataReader Reader = dbcmd.ExecuteReader();

                    while (Reader.Read())
            {

            }
</code></pre>",c#|.net|mysql|mono,"<p>Expanding on @Deepansh Gupta's response:  You might consider creating a custom object or structure whose internal data fields correspond to the columns returned in your query result set (i.e., each object corresponds to a data row, each data variable in the object corresponds to columnar data).  As your code goes through each row of the results, create a new custom object and append it to your List.  </p>",1
6875553,How can I convert database query results to an array?,"<p>How would I convert the results returned in a MySQL query to an array in C# .Net/Mono</p>

<p>To my understanding you need to define arrays with the number of items the array will hold but I understand that the DataReader doesn't tell you have many row was returned. so how can I define a array.</p>

<p>So far I have:</p>

<pre><code>string sqlWhere;

        if ((name != None) &amp;&amp; (name != """"))
            sqlWhere = ""WHERE name LIKE '%""+name+""%'"";

        if ((company != None) &amp;&amp; (company != """"))
            if (sqlWhere == """")
                sqlWhere = ""WHERE company LIKE '%""+company+""%'"";
            else
                sqlWhere = sqlWhere + "" AND company LIKE '%""+company+""%'"";

        if ((dateFrom != None) &amp;&amp; (dateFrom != """") &amp;&amp; (dateTo != None) &amp;&amp; (dateTo != """"))
            if (sqlWhere == """")
                sqlWhere = ""WHERE date(timestampIn) BETWEEN '""+dateFrom+""' AND '""+dateTo+""'"";
            else
                sqlWhere = sqlWhere + "" AND date(timestampIn) BETWEEN '""+dateFrom+""' AND '""+dateTo+""'"";

        IDbCommand dbcmd = this.dbcon.CreateCommand();
        dbcmd.CommandText = ""SELECT * FROM visitors "" + sqlWhere;

                    MySqlDataReader Reader = dbcmd.ExecuteReader();

                    while (Reader.Read())
            {

            }
</code></pre>",c#|.net|mysql|mono,"<pre><code>public IList&lt;Group&gt; GetGroup()
        {
            Connection c = new Connection();
            String connectionString = c.ConnectionName;
            OleDbConnection conn = new OleDbConnection(connectionString);
            OleDbCommand mycmd = conn.CreateCommand();
            DataSet dspendingapps = new DataSet();
            dspendingapps.Clear();

            mycmd.CommandText = "" select g.groupid,g.groupname from tbl_group g order by g.groupname "";
            conn.Open();

            OleDbDataAdapter appreader = new OleDbDataAdapter(mycmd);
            appreader.Fill(dspendingapps);
            conn.Close();

            IList&lt;Group&gt; g = new List&lt;Group&gt;();

            foreach (DataRow drapp in dspendingapps.Tables[0].Rows)
            {
                Group gg = new Group();
                gg.GroupId = Convert.ToInt16(drapp[""groupid""]);
                gg.Name = drapp[""groupname""].ToString();
                g.Add(gg);

            }
            return g;
        }
</code></pre>",2
6581882,Very easy SQL function returns boolean 1 (true) instead of resource,"<p>I have this function </p>

<pre><code>function query($query)
{
     return mysql_query($query) or die(mysql_error())
}
</code></pre>

<p>but when I call it like </p>

<pre><code>$last = query(""SELECT * FROM jubox ORDER BY id desc LIMIT 45"");
</code></pre>

<p>$last returns 1 </p>

<pre><code> echo $last; //1
</code></pre>

<p>What am I doing wrong?</p>

<h1>EDIT:</h1>

<p>I want to return RESOURCE id NOT DATA</p>",php|mysql|sql|function,"<p>Currently, you are trying to echo out a resource, which returns 1 if valid (if echoing a resource, it does indeed echo 1)</p>

<p>You need to use a mysql_fetch_* function to get the data</p>",3
6581882,Very easy SQL function returns boolean 1 (true) instead of resource,"<p>I have this function </p>

<pre><code>function query($query)
{
     return mysql_query($query) or die(mysql_error())
}
</code></pre>

<p>but when I call it like </p>

<pre><code>$last = query(""SELECT * FROM jubox ORDER BY id desc LIMIT 45"");
</code></pre>

<p>$last returns 1 </p>

<pre><code> echo $last; //1
</code></pre>

<p>What am I doing wrong?</p>

<h1>EDIT:</h1>

<p>I want to return RESOURCE id NOT DATA</p>",php|mysql|sql|function,"<p>Look into mysql_fetch_* functions. They return actual rows for you. The mysql_query returns a link_identifier that can be used to fetch the results. See <a href=""http://php.net/manual/en/book.mysql.php"" rel=""nofollow"">http://php.net/manual/en/book.mysql.php</a> for the different functions available.</p>",1
6581882,Very easy SQL function returns boolean 1 (true) instead of resource,"<p>I have this function </p>

<pre><code>function query($query)
{
     return mysql_query($query) or die(mysql_error())
}
</code></pre>

<p>but when I call it like </p>

<pre><code>$last = query(""SELECT * FROM jubox ORDER BY id desc LIMIT 45"");
</code></pre>

<p>$last returns 1 </p>

<pre><code> echo $last; //1
</code></pre>

<p>What am I doing wrong?</p>

<h1>EDIT:</h1>

<p>I want to return RESOURCE id NOT DATA</p>",php|mysql|sql|function,"<p>You're echoing the result right? In case of a select this is a mysql result object and not true or false (like with update or insert). What you get is a  <a href=""http://nl.php.net/manual/en/language.types.resource.php"" rel=""nofollow"">result resource</a>. You need to use functions as <a href=""http://nl.php.net/manual/en/function.mysql-fetch-assoc.php"" rel=""nofollow"">fetch_assoc</a> to explore that result.</p>",0
6581882,Very easy SQL function returns boolean 1 (true) instead of resource,"<p>I have this function </p>

<pre><code>function query($query)
{
     return mysql_query($query) or die(mysql_error())
}
</code></pre>

<p>but when I call it like </p>

<pre><code>$last = query(""SELECT * FROM jubox ORDER BY id desc LIMIT 45"");
</code></pre>

<p>$last returns 1 </p>

<pre><code> echo $last; //1
</code></pre>

<p>What am I doing wrong?</p>

<h1>EDIT:</h1>

<p>I want to return RESOURCE id NOT DATA</p>",php|mysql|sql|function,"<p>i think the reason why you print out '1', is because your query result of an error and then it is the returned value of the die() that you get back.
Check you query, copy and paste it in phpMyAdmin for exemple, and look for an error</p>",0
6581882,Very easy SQL function returns boolean 1 (true) instead of resource,"<p>I have this function </p>

<pre><code>function query($query)
{
     return mysql_query($query) or die(mysql_error())
}
</code></pre>

<p>but when I call it like </p>

<pre><code>$last = query(""SELECT * FROM jubox ORDER BY id desc LIMIT 45"");
</code></pre>

<p>$last returns 1 </p>

<pre><code> echo $last; //1
</code></pre>

<p>What am I doing wrong?</p>

<h1>EDIT:</h1>

<p>I want to return RESOURCE id NOT DATA</p>",php|mysql|sql|function,"<p>Don't mix <code>return</code> and <code>x OR y</code></p>

<pre><code>&lt;?php
$mysql = mysql_connect('localhost', 'localonly', 'localonly') or die(mysql_error());
mysql_select_db('test', $mysql) or die(mysql_error($mysql));
mysql_query('CREATE TEMPORARY TABLE jubox_so (id int auto_increment, primary key(id))') or die(mysql_error($mysql));

$last = query(""SELECT * FROM jubox_so ORDER BY id desc LIMIT 45"");
echo $last;

function query($query)
{
    $v = mysql_query($query);
    if ( !$v ) {
        die(myql_error());
    }
    return $v;
}
</code></pre>

<p>prints (something like) <code>Resource id #6</code> as expected instead of 1 (which was caused by the bool->string conversion for echo)</p>",3
15608101,Accessing MySQL DB row data using PHP,"<p>I have the following PHP to access a DB for a simple forum I'm building:</p>

<pre><code>$sql = ""
    SELECT
        categories.cat_id,
        categories.cat_name,
        categories.cat_description
    FROM
        categories
    WHERE
        categories.cat_id = '"" . mysql_real_escape_string($_GET['id']) .""'
"";                        
$result = mysql_query($sql);

//If data is unable to be served...
if (!$result) { 
    echo 'Category could not be displayed! Please try again later' . mysql_error();
} else {
    if(mysql_num_rows($result) == 0) {
        //This is the error code being displayed
        echo 'Category does not exist!';
    }
}
</code></pre>

<p>Here is the code for this section of the DB:</p>

<pre><code>CREATE TABLE categories(
    cat_id          INT(8) NOT NULL AUTO_INCREMENT,
    cat_name        VARCHAR(255) NOT NULL,
    cat_description VARCHAR(255) NOT NULL,
    UNIQUE INDEX
    cat_name_unique (cat_name),
    PRIMARY KEY(cat_id)
)
TYPE=INNODB;
</code></pre>

<p>The problem: For some reason the query does not seem to be pulling the row data from the DB correctly, I'm at a loss as to why it's not working. That said, I'm also new to MySQL and SQL in general. Does anyone have any ideas as to what's going on? Simply stated, why is the MySQL query not accessing data for the PHP code?</p>

<p>Any help will be much appreciated!</p>

<p>Thanks!</p>

<p>Update:</p>

<p>After changing the SQL query to:</p>

<pre><code>categories.cat_id = "" . mysql_real_escape_string($_GET['id']);
</code></pre>

<p>That solved the original problem, only to make another problem come to the fore. </p>

<p>I am now getting the error code:</p>

<pre><code>echo 'Category could not be displayed! Please try again later' . mysql_error();
</code></pre>

<p>With SQL outputting: </p>

<pre><code>You have an error in your SQL syntax; check the manual that corresponds to
your MySQL server version for the right syntax to use near '' at line 8
</code></pre>

<p>I actually encountered this problem before, but in my attempts to fix it came up with the original code I posted. I have similar code throughout my PHP files that works, which leads me to believe it's an error I've made in the DB code. </p>",php|mysql|sql|forum,"<p>Yet to see what error you're returning, but in the mean time according to your table def, <code>cat_id</code> is an <code>int</code>.</p>

<p>But you're passing it in surrounded by single quotes, meaning if it's a string you won't get an error in PHP, you'll get it from mySQL.</p>

<p>Good practice is to change this</p>

<p><code>categories.cat_id = '"" . mysql_real_escape_string($_GET['id']) . ""'"";</code></p>

<p>to</p>

<p><code>categories.cat_id = "" . intval( mysql_real_escape_string($_GET['id']) );</code></p>

<p>and you'll be less likely to have DBMS errors if <code>$_GET['id']</code> returns a string, or if the DBMS is set to <a href=""http://dev.mysql.com/doc/refman/5.0/en/server-sql-mode.html"" rel=""nofollow""><code>strict_mode</code></a></p>

<p>Ideally you might <em>test</em> your values taken from <code>$_GET</code>, and handle incorrect types gracefully before passing them in, thus avoiding either PHP or mySql generating an error.</p>",1
15957261,Creating a MySQL Database Schema for large data set,"<p>I'm struggling to find the best way to build out a structure that will work for my project.  The answer may be simple but I'm struggling due to the massive number of columns or tables, depending on how it's set up. </p>

<p>We have several tools, each that can be run for many customers.  Each tool has a series of questions that populate a database of answers.  After the tool is run, we populate another series of data that is the output of the tool.  We have roughly 10 tools, all populating a spreadsheet of 1500 data points.  Here's where I struggle... each tool can be run multiple times, and many tools share the same data point.  My next project is to build an application that can begin data entry for a tool, but allow import of data that shares the same datapoint for a tool that has already been run.  </p>

<p>A simple example:
     Tool 1 - company, numberofusers, numberoflocations, cost
     Tool 2 - company, numberofusers, totalstorage, employeepayrate</p>

<p>So if the same company completed tool 1, I need to be able to populate ""numberofusers"" (or offer to populate) when they complete tool 2 since it already exists.  </p>

<p>I think what it boils down to is, would it be better to create a structure that has 1500 tables, 1 for each data element with additional data around each data element, or to create a single massive table - something like...</p>

<p>customerID(FK), EventID(fk), ToolID(fk), numberofusers, numberoflocations, cost, total storage, employee pay,.....(1500)</p>

<p>If I go this route and have one large table I'm not sure how that will impact performance.  Likewise - how difficult it will be to maintain 1500 tables.</p>

<p>Another dimension is that it would be nice to have a description of each field:
numberofusers,title,description,active(bool). I assume this is only possible if each element is in its own table? </p>

<p>Thoughts?  Suggestions?  Sorry for the lengthy question, new here.  </p>",mysql|schema,"<p>I agree with etherbubunny on normalization but with larger datasets there are performance considerations that quickly become important. Joins which are often required in normalized databases to display human readable information can be performance killers on even medium sized tables which is why a lot of data warehouse models use de-normalized datasets for reporting. This is essentially pre-building the joined reporting data into new tables with heavy use of indexing, archiving and partitioning.</p>

<p>In many cases smart use of partitioning on its own can also effectively help reduce the size of the datasets being queried. This usually takes quite a bit of maintenance unless certain parameters remain fixed though.</p>

<p>Ultimately in your case (and most others) I highly recommend building it the way you are able to maintain and understand what is going on and then performing regular performance checks via slow query logs, explain, and performance monitoring tools like percona's tool set. This will give you insight into what is really happening and give you some data to come back here or the MySQL forums with. We can always speculate here but ultimately the real data and your setup will be the driving force behind what is right for you.</p>",0
15957261,Creating a MySQL Database Schema for large data set,"<p>I'm struggling to find the best way to build out a structure that will work for my project.  The answer may be simple but I'm struggling due to the massive number of columns or tables, depending on how it's set up. </p>

<p>We have several tools, each that can be run for many customers.  Each tool has a series of questions that populate a database of answers.  After the tool is run, we populate another series of data that is the output of the tool.  We have roughly 10 tools, all populating a spreadsheet of 1500 data points.  Here's where I struggle... each tool can be run multiple times, and many tools share the same data point.  My next project is to build an application that can begin data entry for a tool, but allow import of data that shares the same datapoint for a tool that has already been run.  </p>

<p>A simple example:
     Tool 1 - company, numberofusers, numberoflocations, cost
     Tool 2 - company, numberofusers, totalstorage, employeepayrate</p>

<p>So if the same company completed tool 1, I need to be able to populate ""numberofusers"" (or offer to populate) when they complete tool 2 since it already exists.  </p>

<p>I think what it boils down to is, would it be better to create a structure that has 1500 tables, 1 for each data element with additional data around each data element, or to create a single massive table - something like...</p>

<p>customerID(FK), EventID(fk), ToolID(fk), numberofusers, numberoflocations, cost, total storage, employee pay,.....(1500)</p>

<p>If I go this route and have one large table I'm not sure how that will impact performance.  Likewise - how difficult it will be to maintain 1500 tables.</p>

<p>Another dimension is that it would be nice to have a description of each field:
numberofusers,title,description,active(bool). I assume this is only possible if each element is in its own table? </p>

<p>Thoughts?  Suggestions?  Sorry for the lengthy question, new here.  </p>",mysql|schema,"<p>Build a main table with all the common data: company, # users, .. other stuff. Give each row a unique id. </p>

<p>Build a table for each unique tool with the company id from above and any data unique to that implementation. Give each table a primary (unique key) for 'tool use' and 'company'.</p>

<p>This covers the common data in one place, identifies each 'customer' and provides for multiple uses of a given tool for each customer. Every use and customer is trackable and distinct.</p>

<p>More about <a href=""http://en.wikipedia.org/wiki/Database_normalization"" rel=""nofollow"">normalization</a> here.</p>",0
15463902,mysql - display the values that exists in ALL the tables,"<p>i did a quick search here but wasn't able to find the answer i was looking for. here is what i would like to do:</p>

<p>i am creating a simple event registration tracking system. </p>

<p>i have a database called registration and in that database i have created <strong>10 tables</strong> called table1, table2..... table10. all these tables just has <strong>one column: user_id</strong></p>

<p>i have one more table called <strong>userinfo</strong> and this table has 2 columns called <code>user_id</code> and <code>username</code> .</p>

<p>i need to create a query that checks whether <strong>ANY user_id exists</strong> in ALL the tables. if it does, it will display that user's name from the userinfo table.</p>

<p>i was thinking of using count function to get the total count for each user_id and if i get a count of 11, it will tell me that <strong>user_id</strong> exists in every table.</p>

<p>but I am not sure if that the proper way to go. any ideas will be appreciated. i am not good with queries so if someone could post an example as well. thanks a lot in advance.</p>",mysql,"<p>You can simply do an inner join on all the tables on the <code>user_id</code> field, and display the username from userinfo table only if a result exists in the joined query :</p>

<pre><code>SELECT username FROM userinfo it WHERE EXISTS (

SELECT user_id FROM table1 t1 
INNER JOIN Table2 USING(user_id)
INNER JOIN Table3 USING(user_id)
INNER JOIN Table4 USING(user_id)
INNER JOIN Table5 USING(user_id)
INNER JOIN Table6 USING(user_id)
INNER JOIN Table7 USING(user_id)
INNER JOIN Table8 USING(user_id)
INNER JOIN Table9 USING(user_id)
INNER JOIN Table10 USING(user_id)
WHERE t1.user_id = it.user_id
);
</code></pre>",1
15984480,Strange Characters when exporting to Excel,"<p>Hi im using the next code on php to export to excel. actually it works great.. but i always get strange characters like ? insted of áéíóú etc. (UTF8)</p>

<p>I found that adding.. </p>

<pre><code>Response.Charset = ""UTF-8"";
Response.ContentEncoding = System.Text.Encoding.Default; 
</code></pre>

<p>Will fix my problem.. </p>

<p>But i cant manage to put it here, i always get 500 Server Error.</p>

<p>here is my code</p>

<pre><code>//insertamos los headers que van a generar el archivo excel
header('Content-type: application/vnd.ms-excel');
//en filename vamos a colocar el nombre con el que el archivo xls sera generado
header(""Content-Disposition: attachment; filename=ventas.xls"");
header(""Pragma: no-cache"");
header(""Expires: 0"");

//hacemos la conexion al servidor MySql
$dbhost                         = ""xxx"";
$dbuser                         = ""xxx"";
$dbpass                         = ""xxx"";
$dbname                         = ""xxx"";

$conexio = mysql_connect($dbhost, $dbuser, $dbpass) or die (""Error connecting to database"");
mysql_select_db($dbname);
//realizamos la consulta
$tableName=""usuarios"";  
$sql = mysql_query(""SELECT id,name,lastname,email,codigo, media, phone, Pcode, birth FROM $tableName"",$conexio);
?&gt;
&lt;!DOCTYPE html PUBLIC ""-//W3C//DTD XHTML 1.0 Transitional//EN"" ""http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd""&gt;
&lt;html xmlns=""http://www.w3.org/1999/xhtml""&gt;
&lt;head&gt;
&lt;meta http-equiv=""Content-Type"" content=""text/html; charset=utf-8"" /&gt;
&lt;title&gt;Reporte de ventas&lt;/title&gt;
&lt;/head&gt;

&lt;body&gt;&lt;!–Vamos a crear una tabla que será impresa en el archivo excel –&gt;

&lt;table width=""600"" border=""0""&gt;
&lt;tr&gt;
&lt;th width=""600""&gt;

&lt;!-–Imprimimos un titulo -–&gt;

&lt;div style=""color:#003; text-align:center; text-shadow:#666;""&gt;&lt;font size=""+2""&gt;Reporte de Ventas &lt;br /&gt;Usuarios&lt;/font&gt;&lt;/div&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/table&gt;

&lt;!–-creamos la tabla de el reporte con border 1 y los títulos-–&gt;

&lt;table width=""641"" border=""1""&gt;
&lt;tr&gt;
&lt;th width=""50%"" style=""background-color:#006; text-align:center; color:#FFF""&gt;&lt;strong&gt;Ventas&lt;/strong&gt;&lt;/th&gt;
&lt;th width=""50%"" style=""background-color:#006; text-align:center; color:#FFF""&gt;&lt;strong&gt;Fecha&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;?php
// Un proceso repetitivo para imprimir cada uno de los registros.
while($row = mysql_fetch_array($sql)){
echo ""
&lt;tr&gt;
&lt;td bgcolor=\""#ededed\"" align=\""center\""&gt;{$row['name']}&lt;/td&gt;
&lt;td bgcolor=\""#ededed\"" align=\""center\""&gt;{$row['email']}&lt;/td&gt;
&lt;/tr&gt;"";
}
</code></pre>",php|mysql|database|excel|utf-8,"<p>just put it before Excel::create</p>

<p>ob_clean();</p>",0
15984480,Strange Characters when exporting to Excel,"<p>Hi im using the next code on php to export to excel. actually it works great.. but i always get strange characters like ? insted of áéíóú etc. (UTF8)</p>

<p>I found that adding.. </p>

<pre><code>Response.Charset = ""UTF-8"";
Response.ContentEncoding = System.Text.Encoding.Default; 
</code></pre>

<p>Will fix my problem.. </p>

<p>But i cant manage to put it here, i always get 500 Server Error.</p>

<p>here is my code</p>

<pre><code>//insertamos los headers que van a generar el archivo excel
header('Content-type: application/vnd.ms-excel');
//en filename vamos a colocar el nombre con el que el archivo xls sera generado
header(""Content-Disposition: attachment; filename=ventas.xls"");
header(""Pragma: no-cache"");
header(""Expires: 0"");

//hacemos la conexion al servidor MySql
$dbhost                         = ""xxx"";
$dbuser                         = ""xxx"";
$dbpass                         = ""xxx"";
$dbname                         = ""xxx"";

$conexio = mysql_connect($dbhost, $dbuser, $dbpass) or die (""Error connecting to database"");
mysql_select_db($dbname);
//realizamos la consulta
$tableName=""usuarios"";  
$sql = mysql_query(""SELECT id,name,lastname,email,codigo, media, phone, Pcode, birth FROM $tableName"",$conexio);
?&gt;
&lt;!DOCTYPE html PUBLIC ""-//W3C//DTD XHTML 1.0 Transitional//EN"" ""http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd""&gt;
&lt;html xmlns=""http://www.w3.org/1999/xhtml""&gt;
&lt;head&gt;
&lt;meta http-equiv=""Content-Type"" content=""text/html; charset=utf-8"" /&gt;
&lt;title&gt;Reporte de ventas&lt;/title&gt;
&lt;/head&gt;

&lt;body&gt;&lt;!–Vamos a crear una tabla que será impresa en el archivo excel –&gt;

&lt;table width=""600"" border=""0""&gt;
&lt;tr&gt;
&lt;th width=""600""&gt;

&lt;!-–Imprimimos un titulo -–&gt;

&lt;div style=""color:#003; text-align:center; text-shadow:#666;""&gt;&lt;font size=""+2""&gt;Reporte de Ventas &lt;br /&gt;Usuarios&lt;/font&gt;&lt;/div&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/table&gt;

&lt;!–-creamos la tabla de el reporte con border 1 y los títulos-–&gt;

&lt;table width=""641"" border=""1""&gt;
&lt;tr&gt;
&lt;th width=""50%"" style=""background-color:#006; text-align:center; color:#FFF""&gt;&lt;strong&gt;Ventas&lt;/strong&gt;&lt;/th&gt;
&lt;th width=""50%"" style=""background-color:#006; text-align:center; color:#FFF""&gt;&lt;strong&gt;Fecha&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;?php
// Un proceso repetitivo para imprimir cada uno de los registros.
while($row = mysql_fetch_array($sql)){
echo ""
&lt;tr&gt;
&lt;td bgcolor=\""#ededed\"" align=\""center\""&gt;{$row['name']}&lt;/td&gt;
&lt;td bgcolor=\""#ededed\"" align=\""center\""&gt;{$row['email']}&lt;/td&gt;
&lt;/tr&gt;"";
}
</code></pre>",php|mysql|database|excel|utf-8,"<p>Ok i found the answer..</p>

<p>need to apply mb_convert_encoding</p>

<pre><code>while($row = mysql_fetch_array($sql)){

    foreach($row as &amp;$value)
  {
    $value = mb_convert_encoding($value, ""UTF-8"", ""Windows-1252"");
  }
</code></pre>

<p>and for the headers i used</p>

<pre><code>header(""Content-Type:   application/vnd.ms-excel; charset=utf-8"");
header(""Content-type:   application/x-msexcel; charset=utf-8"");
header(""Content-Disposition: attachment; filename=ventas.xls"");
header(""Expires: 0"");
header(""Cache-Control: must-revalidate, post-check=0, pre-check=0"");
header(""Cache-Control: private"",false);
</code></pre>",2
15569492,"Getting specific data from Mysql database, based on user login","<p>So I have a simple working user log in script that carries forward myusername and mypassword.</p>

<p>What I am trying (and failing) to do is recall a specific piece of information from that users Mysql database to modify the page that they are on. </p>

<pre><code>MYSQL DATABASE ('members'): 
id:1
username:cornellmatt
password:encrypted(md5)
email:example@email.com
active: 0/1
**permission:1**
</code></pre>

<p>The field I need to extract is permission, as it holds the number that will relate the the scene that the user is currently on.
In order to do this I am running Jquery on the page that you arrive at after logging in, that links to connect.php</p>

<pre><code>&lt;script type=""text/javascript"" src=""jquery-1.9.1.min.js""&gt;&lt;/script&gt; 
&lt;script type=""text/javascript""&gt;

    $.get(""connect.php"", function(data) {
    alert(""Data Loaded: "" + data);
        });
</code></pre>

<p>I understand that there are all kinds of problems with my JavaScript at the moment, but for now I want to get the server side stuff done so I can focus on the JavaScript fully
The (Current) problem with my Php is that it doesn't seem to be getting anything from the database at all, I know it is connected, it just wont echo the value inside 'permission';</p>

<p><strong>connect.php:</strong></p>

<pre><code>&lt;?php
include ""Session.php""; 

$dbhost = ""host"";
$dbuser = ""username"";
$dbpass = ""password"";
$dbname = ""databasename"";
    //Connect to MySQL Server
mysql_connect($dbhost, $dbuser, $dbpass);
    //Select Database
mysql_select_db($dbname) or die(mysql_error());
    // Retrieve data from Query String


//this selects everything for the current user, ready to be used in the script below

$result = mysql_query(""SELECT * FROM members WHERE username = '$myusername' LIMIT 1"");

//this function will take the above query and create an array
while($row = mysql_fetch_array($result))
  {

 //with the array created above, I can create variables (left) with the outputted array (right)
$permission = $row['permission'];
  } 


        echo '&lt;u&gt;&lt;b&gt;Permision ID:&lt;/b&gt;&lt;/u&gt; - - No:' . $row['permission']  ;
?&gt;
</code></pre>

<p>If you are wondering what'Session.php' is, it is a script that handles the startup, and is the reason I know I am still logged in. Courtesy of Daryl Gill who helped me in a previous post.</p>

<p><strong>Session.php</strong></p>

<pre><code> &lt;?php
session_start();

if (!isset($_SESSION['Username']))
{
 include ""Logout.php""; 
 exit;
// session is not set, so enforce logout
}
?&gt;
</code></pre>

<p>So my quest is, Why doesn't connect.php echo the value permission, even when I go to the page direct? Please help, I am currently coding this for my student project and have been going in circles for days.</p>",php|javascript|jquery|html|mysql,"<p>Make sure you get any rows by doing this: </p>

<blockquote>
  <p>while($row = mysql_fetch_array($result)) {
        var_dump($row);
        $permission = $row['permission'];
      }</p>
</blockquote>",0
15569492,"Getting specific data from Mysql database, based on user login","<p>So I have a simple working user log in script that carries forward myusername and mypassword.</p>

<p>What I am trying (and failing) to do is recall a specific piece of information from that users Mysql database to modify the page that they are on. </p>

<pre><code>MYSQL DATABASE ('members'): 
id:1
username:cornellmatt
password:encrypted(md5)
email:example@email.com
active: 0/1
**permission:1**
</code></pre>

<p>The field I need to extract is permission, as it holds the number that will relate the the scene that the user is currently on.
In order to do this I am running Jquery on the page that you arrive at after logging in, that links to connect.php</p>

<pre><code>&lt;script type=""text/javascript"" src=""jquery-1.9.1.min.js""&gt;&lt;/script&gt; 
&lt;script type=""text/javascript""&gt;

    $.get(""connect.php"", function(data) {
    alert(""Data Loaded: "" + data);
        });
</code></pre>

<p>I understand that there are all kinds of problems with my JavaScript at the moment, but for now I want to get the server side stuff done so I can focus on the JavaScript fully
The (Current) problem with my Php is that it doesn't seem to be getting anything from the database at all, I know it is connected, it just wont echo the value inside 'permission';</p>

<p><strong>connect.php:</strong></p>

<pre><code>&lt;?php
include ""Session.php""; 

$dbhost = ""host"";
$dbuser = ""username"";
$dbpass = ""password"";
$dbname = ""databasename"";
    //Connect to MySQL Server
mysql_connect($dbhost, $dbuser, $dbpass);
    //Select Database
mysql_select_db($dbname) or die(mysql_error());
    // Retrieve data from Query String


//this selects everything for the current user, ready to be used in the script below

$result = mysql_query(""SELECT * FROM members WHERE username = '$myusername' LIMIT 1"");

//this function will take the above query and create an array
while($row = mysql_fetch_array($result))
  {

 //with the array created above, I can create variables (left) with the outputted array (right)
$permission = $row['permission'];
  } 


        echo '&lt;u&gt;&lt;b&gt;Permision ID:&lt;/b&gt;&lt;/u&gt; - - No:' . $row['permission']  ;
?&gt;
</code></pre>

<p>If you are wondering what'Session.php' is, it is a script that handles the startup, and is the reason I know I am still logged in. Courtesy of Daryl Gill who helped me in a previous post.</p>

<p><strong>Session.php</strong></p>

<pre><code> &lt;?php
session_start();

if (!isset($_SESSION['Username']))
{
 include ""Logout.php""; 
 exit;
// session is not set, so enforce logout
}
?&gt;
</code></pre>

<p>So my quest is, Why doesn't connect.php echo the value permission, even when I go to the page direct? Please help, I am currently coding this for my student project and have been going in circles for days.</p>",php|javascript|jquery|html|mysql,"<p>When <code>$_SESSION['Username']</code> is not set you have putted <code>exit;</code></p>

<p>And because of that it doesn't prints <code>permission</code></p>

<p>And When you do <code>Ajax</code> call may be the <code>$_SESSION['Username']</code> is set and it prints <code>permission</code>.</p>

<p>Also change </p>

<pre><code>echo '&lt;u&gt;&lt;b&gt;Permision ID:&lt;/b&gt;&lt;/u&gt; - - No:' . $row['permission']  ;
</code></pre>

<p>to</p>

<pre><code>echo '&lt;u&gt;&lt;b&gt;Permision ID:&lt;/b&gt;&lt;/u&gt; - - No:' . $permission;
</code></pre>

<p>Because outside while loop you can't access $row['permission'].</p>",1
15569492,"Getting specific data from Mysql database, based on user login","<p>So I have a simple working user log in script that carries forward myusername and mypassword.</p>

<p>What I am trying (and failing) to do is recall a specific piece of information from that users Mysql database to modify the page that they are on. </p>

<pre><code>MYSQL DATABASE ('members'): 
id:1
username:cornellmatt
password:encrypted(md5)
email:example@email.com
active: 0/1
**permission:1**
</code></pre>

<p>The field I need to extract is permission, as it holds the number that will relate the the scene that the user is currently on.
In order to do this I am running Jquery on the page that you arrive at after logging in, that links to connect.php</p>

<pre><code>&lt;script type=""text/javascript"" src=""jquery-1.9.1.min.js""&gt;&lt;/script&gt; 
&lt;script type=""text/javascript""&gt;

    $.get(""connect.php"", function(data) {
    alert(""Data Loaded: "" + data);
        });
</code></pre>

<p>I understand that there are all kinds of problems with my JavaScript at the moment, but for now I want to get the server side stuff done so I can focus on the JavaScript fully
The (Current) problem with my Php is that it doesn't seem to be getting anything from the database at all, I know it is connected, it just wont echo the value inside 'permission';</p>

<p><strong>connect.php:</strong></p>

<pre><code>&lt;?php
include ""Session.php""; 

$dbhost = ""host"";
$dbuser = ""username"";
$dbpass = ""password"";
$dbname = ""databasename"";
    //Connect to MySQL Server
mysql_connect($dbhost, $dbuser, $dbpass);
    //Select Database
mysql_select_db($dbname) or die(mysql_error());
    // Retrieve data from Query String


//this selects everything for the current user, ready to be used in the script below

$result = mysql_query(""SELECT * FROM members WHERE username = '$myusername' LIMIT 1"");

//this function will take the above query and create an array
while($row = mysql_fetch_array($result))
  {

 //with the array created above, I can create variables (left) with the outputted array (right)
$permission = $row['permission'];
  } 


        echo '&lt;u&gt;&lt;b&gt;Permision ID:&lt;/b&gt;&lt;/u&gt; - - No:' . $row['permission']  ;
?&gt;
</code></pre>

<p>If you are wondering what'Session.php' is, it is a script that handles the startup, and is the reason I know I am still logged in. Courtesy of Daryl Gill who helped me in a previous post.</p>

<p><strong>Session.php</strong></p>

<pre><code> &lt;?php
session_start();

if (!isset($_SESSION['Username']))
{
 include ""Logout.php""; 
 exit;
// session is not set, so enforce logout
}
?&gt;
</code></pre>

<p>So my quest is, Why doesn't connect.php echo the value permission, even when I go to the page direct? Please help, I am currently coding this for my student project and have been going in circles for days.</p>",php|javascript|jquery|html|mysql,"<p><code>$row['permission']</code> doesn't exist here. You just need <code>$permission.</code></p>

<p><code>echo '&lt;u&gt;&lt;b&gt;Permision ID:&lt;/b&gt;&lt;/u&gt; - - No:' . $permission;</code> </p>",1
15868106,magento SQLSTATE[23000]: Integrity constraint violation: 1062 Duplicate entry '363624' for key 'PRIMARY',"<p>i have migrated a mgento installation doing the following:</p>

<ol>
<li>copied all files</li>
<li>exported the db</li>
<li>imported the db using mysql workbench</li>
<li>changed the base_url's to the new domain</li>
<li>updated local.xml to the correct settings</li>
</ol>

<p>now im getting:</p>

<pre><code>SQLSTATE[23000]: Integrity constraint violation: 1062 Duplicate entry '363624' for key 'PRIMARY'
</code></pre>

<p>I have searched the db for this key 363624 , but it is not duplicated as the messages says</p>

<p>how can i solve this ?</p>",mysql|magento,"<p>Run this sql query in your magento data base.</p>

<pre><code>TRUNCATE dataflow_batch_export ;

TRUNCATE dataflow_batch_import ; 

TRUNCATE log_customer ; 

TRUNCATE log_quote ; 

TRUNCATE log_summary ; 

TRUNCATE log_summary_type ; 

TRUNCATE log_url ; 

TRUNCATE log_url_info ; 

TRUNCATE log_visitor ; 

TRUNCATE log_visitor_info ; 

TRUNCATE log_visitor_online ; 

TRUNCATE report_event ;
</code></pre>

<p>First you have to check the 'log_visitor_info' table structure. In this table 'visitor_id' field is should default value as null. If default value is set as anything you should run this below query, Otherwise you leave it the below query just execute the above query.</p>

<pre><code>ALTER TABLE `log_visitor_info` CHANGE `visitor_id` `visitor_id` BIGINT(20) UNSIGNED NOT NULL COMMENT 'Visitor ID';
</code></pre>",0
15868106,magento SQLSTATE[23000]: Integrity constraint violation: 1062 Duplicate entry '363624' for key 'PRIMARY',"<p>i have migrated a mgento installation doing the following:</p>

<ol>
<li>copied all files</li>
<li>exported the db</li>
<li>imported the db using mysql workbench</li>
<li>changed the base_url's to the new domain</li>
<li>updated local.xml to the correct settings</li>
</ol>

<p>now im getting:</p>

<pre><code>SQLSTATE[23000]: Integrity constraint violation: 1062 Duplicate entry '363624' for key 'PRIMARY'
</code></pre>

<p>I have searched the db for this key 363624 , but it is not duplicated as the messages says</p>

<p>how can i solve this ?</p>",mysql|magento,"<p>This problem is because table <code>log_visitor_info</code> contains extra rows of visitors that doesn't exist in <code>log_visitor</code> table, as explained in @creuzerm's comment;</p>

<p>if you run these queries you must have the same result</p>

<pre><code>SELECT MAX(`visitor_id`) FROM `log_visitor`;

SELECT MAX(`visitor_id`) FROM `log_visitor_info`;
</code></pre>

<p>to solve this problem you need to delete these extra invalid rows with the following query</p>

<pre><code>DELETE FROM `log_visitor_info` WHERE `visitor_id` &gt; ( SELECT MAX(`visitor_id`) FROM `log_visitor` );
</code></pre>

<p>for consistency run this too</p>

<pre><code>DELETE FROM `log_visitor_online` WHERE `visitor_id` &gt; ( SELECT MAX(`visitor_id`) FROM `log_visitor` );
</code></pre>",0
15868106,magento SQLSTATE[23000]: Integrity constraint violation: 1062 Duplicate entry '363624' for key 'PRIMARY',"<p>i have migrated a mgento installation doing the following:</p>

<ol>
<li>copied all files</li>
<li>exported the db</li>
<li>imported the db using mysql workbench</li>
<li>changed the base_url's to the new domain</li>
<li>updated local.xml to the correct settings</li>
</ol>

<p>now im getting:</p>

<pre><code>SQLSTATE[23000]: Integrity constraint violation: 1062 Duplicate entry '363624' for key 'PRIMARY'
</code></pre>

<p>I have searched the db for this key 363624 , but it is not duplicated as the messages says</p>

<p>how can i solve this ?</p>",mysql|magento,"<p>if the error showing for the table <code>'cataloginventory_stock_item' having 'UNQ_CATALOGINVENTORY_STOCK_ITEM_PRODUCT_ID_STOCK_ID' index,</code></p>

<p>then please sure that you are passing different product SKU from your script.</p>",0
15868106,magento SQLSTATE[23000]: Integrity constraint violation: 1062 Duplicate entry '363624' for key 'PRIMARY',"<p>i have migrated a mgento installation doing the following:</p>

<ol>
<li>copied all files</li>
<li>exported the db</li>
<li>imported the db using mysql workbench</li>
<li>changed the base_url's to the new domain</li>
<li>updated local.xml to the correct settings</li>
</ol>

<p>now im getting:</p>

<pre><code>SQLSTATE[23000]: Integrity constraint violation: 1062 Duplicate entry '363624' for key 'PRIMARY'
</code></pre>

<p>I have searched the db for this key 363624 , but it is not duplicated as the messages says</p>

<p>how can i solve this ?</p>",mysql|magento,<p>In my case the problem was UTF-8 without BOM encoding in text editor. I've change to UTF-8 with BOM and everything works fine.</p>,0
15868106,magento SQLSTATE[23000]: Integrity constraint violation: 1062 Duplicate entry '363624' for key 'PRIMARY',"<p>i have migrated a mgento installation doing the following:</p>

<ol>
<li>copied all files</li>
<li>exported the db</li>
<li>imported the db using mysql workbench</li>
<li>changed the base_url's to the new domain</li>
<li>updated local.xml to the correct settings</li>
</ol>

<p>now im getting:</p>

<pre><code>SQLSTATE[23000]: Integrity constraint violation: 1062 Duplicate entry '363624' for key 'PRIMARY'
</code></pre>

<p>I have searched the db for this key 363624 , but it is not duplicated as the messages says</p>

<p>how can i solve this ?</p>",mysql|magento,"<p>I was getting the same error.</p>

<p>For me, it turns out that the export was taking so long with the site staying 'live' that the end of the export was out of sync with the beginning.</p>

<p>Specifically, the 'log_visitor_info' table had about 100 more records than some of the other related visitor log tables, so the DB is trying to create a record ID from another table that already exists here.</p>

<p>I just deleted the last 100 or so records from this specific table and things worked again without the error.
Alternatively it looks like you can mash on the f5 key until you increment past that already-existing ID and Magento will start working again.</p>

<p>I suspect that putting the store in maintenance mode before the export may help with this particular error.</p>",6
15868106,magento SQLSTATE[23000]: Integrity constraint violation: 1062 Duplicate entry '363624' for key 'PRIMARY',"<p>i have migrated a mgento installation doing the following:</p>

<ol>
<li>copied all files</li>
<li>exported the db</li>
<li>imported the db using mysql workbench</li>
<li>changed the base_url's to the new domain</li>
<li>updated local.xml to the correct settings</li>
</ol>

<p>now im getting:</p>

<pre><code>SQLSTATE[23000]: Integrity constraint violation: 1062 Duplicate entry '363624' for key 'PRIMARY'
</code></pre>

<p>I have searched the db for this key 363624 , but it is not duplicated as the messages says</p>

<p>how can i solve this ?</p>",mysql|magento,"<p>This helped me (clearing some of the tables):</p>

<p>Enter your Magento database and run following sql query:</p>

<pre><code>TRUNCATE dataflow_batch_export ; 
TRUNCATE dataflow_batch_import ; 
TRUNCATE log_customer ; 
TRUNCATE log_quote ; 
TRUNCATE log_summary ; 
TRUNCATE log_summary_type ; 
TRUNCATE log_url ; 
TRUNCATE log_url_info ; 
TRUNCATE log_visitor ; 
TRUNCATE log_visitor_info ; 
TRUNCATE log_visitor_online ; 
TRUNCATE report_event ;
</code></pre>

<p>After that need to clear var/session dir (If your session stored in files) cause you will get same error until you clear session files.</p>",31
15868106,magento SQLSTATE[23000]: Integrity constraint violation: 1062 Duplicate entry '363624' for key 'PRIMARY',"<p>i have migrated a mgento installation doing the following:</p>

<ol>
<li>copied all files</li>
<li>exported the db</li>
<li>imported the db using mysql workbench</li>
<li>changed the base_url's to the new domain</li>
<li>updated local.xml to the correct settings</li>
</ol>

<p>now im getting:</p>

<pre><code>SQLSTATE[23000]: Integrity constraint violation: 1062 Duplicate entry '363624' for key 'PRIMARY'
</code></pre>

<p>I have searched the db for this key 363624 , but it is not duplicated as the messages says</p>

<p>how can i solve this ?</p>",mysql|magento,"<p>It is not duplicated but rather something must be <em>trying</em> to duplicate it.</p>

<p>How did you export the database? I would check that the dumped SQL file has the line ""<strong>SET FOREIGN_KEY_CHECKS=0;</strong>"" or similar at the top.</p>

<p>If not, I would drop the database and add this line to the top of the file:</p>

<p>SET FOREIGN_KEY_CHECKS=0;</p>

<p>... and this line to the bottom:</p>

<p>SET FOREIGN_KEY_CHECKS=1;</p>

<p>... then try again.</p>",7
15702727,Cannot Insert Data into MySQL Table,"<p>There are two blocks of data.</p>

<p>Block 1:</p>

<p>""Completed the main phase of development of version 9.8, release is on testing and        preparation, but for now we suggest you read the information about what awaits you with a new release. In this release, you are invited to a new system, through which your visitors can share interesting information on your site to other people, as well as in social networks, the new quick lock spammers on the site, the new template tags, new options for custom display of news and much more but everything in detail.""</p>

<p>Block 2:</p>

<p>""I'm not afraid (I'm not afraid)
To take a stand (to take a stand)
Everybody (everybody)
Come take my hand (come take my hand)
We'll walk this road together, through the storm
Whatever weather, cold or warm
Just letting you know that, you're not alone
Holla if you feel like you've been down the same road (same road)""</p>

<p>I can INSERT the first block of data into the MySQL table easily, but i cannot INSERT the second block.</p>

<p>Why ???</p>",php|mysql,"<p>use <a href=""http://www.php.net/manual/en/function.mysql-real-escape-string.php"" rel=""nofollow"">mysql_real_escape_string</a> for escaping the text in <code>INSERT</code> query.</p>",0
15702727,Cannot Insert Data into MySQL Table,"<p>There are two blocks of data.</p>

<p>Block 1:</p>

<p>""Completed the main phase of development of version 9.8, release is on testing and        preparation, but for now we suggest you read the information about what awaits you with a new release. In this release, you are invited to a new system, through which your visitors can share interesting information on your site to other people, as well as in social networks, the new quick lock spammers on the site, the new template tags, new options for custom display of news and much more but everything in detail.""</p>

<p>Block 2:</p>

<p>""I'm not afraid (I'm not afraid)
To take a stand (to take a stand)
Everybody (everybody)
Come take my hand (come take my hand)
We'll walk this road together, through the storm
Whatever weather, cold or warm
Just letting you know that, you're not alone
Holla if you feel like you've been down the same road (same road)""</p>

<p>I can INSERT the first block of data into the MySQL table easily, but i cannot INSERT the second block.</p>

<p>Why ???</p>",php|mysql,<p>As i can see your first block doesn't have single quotes and the second one have single quotes and double quotes so i think your solution will be solved by escaping quotes try and tell me the result :)</p>,0
15702727,Cannot Insert Data into MySQL Table,"<p>There are two blocks of data.</p>

<p>Block 1:</p>

<p>""Completed the main phase of development of version 9.8, release is on testing and        preparation, but for now we suggest you read the information about what awaits you with a new release. In this release, you are invited to a new system, through which your visitors can share interesting information on your site to other people, as well as in social networks, the new quick lock spammers on the site, the new template tags, new options for custom display of news and much more but everything in detail.""</p>

<p>Block 2:</p>

<p>""I'm not afraid (I'm not afraid)
To take a stand (to take a stand)
Everybody (everybody)
Come take my hand (come take my hand)
We'll walk this road together, through the storm
Whatever weather, cold or warm
Just letting you know that, you're not alone
Holla if you feel like you've been down the same road (same road)""</p>

<p>I can INSERT the first block of data into the MySQL table easily, but i cannot INSERT the second block.</p>

<p>Why ???</p>",php|mysql,"<p>IMHO, i think that the characters '  may broke your query, try to insert a \ before the ' in this fashion and try to re-execute the query:</p>

<pre><code>\'
</code></pre>",-1
15702727,Cannot Insert Data into MySQL Table,"<p>There are two blocks of data.</p>

<p>Block 1:</p>

<p>""Completed the main phase of development of version 9.8, release is on testing and        preparation, but for now we suggest you read the information about what awaits you with a new release. In this release, you are invited to a new system, through which your visitors can share interesting information on your site to other people, as well as in social networks, the new quick lock spammers on the site, the new template tags, new options for custom display of news and much more but everything in detail.""</p>

<p>Block 2:</p>

<p>""I'm not afraid (I'm not afraid)
To take a stand (to take a stand)
Everybody (everybody)
Come take my hand (come take my hand)
We'll walk this road together, through the storm
Whatever weather, cold or warm
Just letting you know that, you're not alone
Holla if you feel like you've been down the same road (same road)""</p>

<p>I can INSERT the first block of data into the MySQL table easily, but i cannot INSERT the second block.</p>

<p>Why ???</p>",php|mysql,"<p>You need to use <a href=""https://stackoverflow.com/tags/pdo/info"">PDO</a> for your inserts.</p>

<pre><code>// here goes connection code from the link above

$data = ""I'm not afraid (I'm not afraid) To take a stand (to take a stand) Everybody (everybody) Come take my hand (come take my hand) We'll walk this road together, through the storm Whatever weather, cold or warm Just letting you know that, you're not alone Holla if you feel like you've been down the same road (same road)"";
$stm = $pdo-&gt;prepare(""INSERT INTO table SET field=?"");
$stm-&gt;execute(array($data));
</code></pre>",0
58318235,Mysql insert query in after a chosen row?,"<p>I have persons in my database with their attended trainings but as time goes by, each of them will add some trainings again so i need to add it after that name.</p>

<p>I have table with columns id, firstname and training but that's my problem, inserting after a selected name</p>

<p>Sample</p>

<pre><code>Insert into table (firstname, training) values (""Zarie"", ""Technical Writing Course"") after a selected row where id = (select id where firstname=""Zarie"");
</code></pre>

<p>Thank you.</p>",php|mysql,"<p>When you adding row to mysql table it goes to the end of table or on free primary key id. You can't change this when you inserting data. You can change order only when you selecting data:</p>

<pre><code>SELECT * FROM table WHERE name = 'name' ORDER BY id DESC, firstname ASC
SELECT id, firstname FROM table WHERE name != 'Zimbo' ORDER BY firstname ASC
</code></pre>",0
58111627,Use Linq Any query or Expressions to build query for performance,"<p>we are Entity Framework in our project. Need to know the performance impact between .ANY() and Expressions to form Where clause.</p>

<p>In the below function i used two approach to get result:</p>

<p><strong>APPROACH 1 - Form Lambda expression query using ANY()</strong>
From my observation using .Any() is not adding where clause when query is executed(checked in sql profiler) what EF does is gets all matched inner joined records store in-memory and then apply condition specified in .ANY()</p>

<p><strong>APPROACH 2 - Form Expression Query Starts</strong>
With Expressions i'm explicitly forming where clause and executing.checked the same in SQL query Profiler i'm able to see where clause. 
Note: To form expression where clause i'm doing additional loops and ""CombinePredicates"".</p>

<p>Now, my doubts are:</p>

<ol>
<li><p>which approach will improve performance. Do i need to go with Lambda
with .ANY() or Expressions?</p></li>
<li><p>what is the right way to from where clause to improve performance?</p></li>
</ol>

<p>If not the two approach suggest me the right way to do it</p>

<pre><code>private bool GetClientNotifications(int clientId, IList&lt;ClientNotification&gt; clientNotifications)
{
IList&lt;string&gt; clientNotificationList = null;
var clientNotificationsExists = clientNotifications?.Select(x =&gt; new { x.Name, x.notificationId 
}).ToList();
if (clientNotificationsExists?.Count &gt; 0)
{

    //**Approach 1 =&gt; Form Lamada  Query starts**
    notificationList = this._clientNotificationRepository?.FindBy(x =&gt; clientNotificationsExists.Any(x1 =&gt; x.notificationId == x1.notificationId &amp;&amp; x.clientId == 
  clientId)).Select(x =&gt; x.Name).ToList();
    **//Form Lamada  Query Ends**

    //**Approach 2 =&gt;Form Expression Query Starts**
    var filterExpressions = new List&lt;Expression&lt;Func&lt;DbModel.ClientNotification, bool&gt;&gt;&gt;();
    Expression&lt;Func&lt;DbModel.ClientNotification, bool&gt;&gt; predicate = null;
    foreach (var clientNotification in clientNotificationsExists)
    {
        predicate = a =&gt; a.clientId == clientId &amp;&amp; a.notificationId == clientNotification .notificationId;
        filterExpressions.Add(predicate);
    }
    predicate = filterExpressions.CombinePredicates&lt;DbModel.ClientNotification&gt;(Expression.OrElse);
    clientNotificationList = this._clientNotificationRepository?.FindBy(predicate).Select(x =&gt; x.Name).ToList();
    //**Form Expression Query Ends**
}
return clientNotificationList;
  }
</code></pre>

<p>If non of the approaches were good please suggest me the right way to do.</p>",c#|mysql|lambda|entity-framework-6|expression,"<p>I noticed the clientId being used on both approaches is used on conditions linked to clientNotificationsExists but there is no actual relationship with its objects so this condition can be moved up one level. This might bring a minuscule benefit as the overall sql will be smaller without the duplicate clauses.</p>

<p>From the described behavior the first approach filter is not being translated to sql so it is being resolved at the client side however, if it could be translated the performance would be similar or identical.</p>

<p>If you want to generate an IN sql clause you can use an array and use the Contains method within your filter expression. That could perhaps improve a little bit but don't get your hopes too high.</p>

<p>Try the following:</p>

<pre><code>private bool GetClientNotifications(int clientId, IList&lt;ClientNotification&gt; clientNotifications)
{
    IList&lt;string&gt; clientNotificationList = null;
    var clientNotificationsExists = clientNotifications?
        .Select(x =&gt; new { x.Name, x.notificationId }).ToList();
    if (clientNotificationsExists?.Count &gt; 0)
    {
        var notificationIds = clientNotificationsExists.Select(x =&gt; x.notificationId).ToArray();
        clientNotificationList = this._clientNotificationRepository?
            .FindBy(x =&gt; x.clientId == clientId &amp;&amp; notificationIds.Contains(x.notificationId));
    }
    return clientNotificationList;
}
</code></pre>",0
31401236,Order By then Group?,"<p>I have two tables, the first, <code>hotel_info</code> that has fields such as(<code>hotel_id</code>,<code>hotel_name</code>,<code>location</code>) and a second table <code>rooms</code>, that has room information such as(<code>room_id</code>,<code>room_name</code>,<code>hotel_id</code>,<code>rate</code>,<code>description</code>). I want a query that returns the minimum room rate for a hotel and all information about the hotel from the <code>hotel_info</code> table. So far I have this query that is working properly but its not returning the minimum room rate. </p>

<pre><code>SELECT a.hotel_id,a.hotel_name ,a.location, b.rate FROM hotel_info a 
LEFT JOIN rooms b ON b.hotel_id=a.hotel_id 
GROUP BY hotel_id
</code></pre>

<p>How get the minimum room rate per hotel?</p>",mysql|join,"<pre><code>SELECT a.hotel_id, a.hotel_name, a.location, min(b.rate) as min_rate 
FROM hotel_info a 
LEFT JOIN rooms b ON b.hotel_id = a.hotel_id 
GROUP BY a.hotel_id, a.hotel_name, a.location
</code></pre>",1
31401236,Order By then Group?,"<p>I have two tables, the first, <code>hotel_info</code> that has fields such as(<code>hotel_id</code>,<code>hotel_name</code>,<code>location</code>) and a second table <code>rooms</code>, that has room information such as(<code>room_id</code>,<code>room_name</code>,<code>hotel_id</code>,<code>rate</code>,<code>description</code>). I want a query that returns the minimum room rate for a hotel and all information about the hotel from the <code>hotel_info</code> table. So far I have this query that is working properly but its not returning the minimum room rate. </p>

<pre><code>SELECT a.hotel_id,a.hotel_name ,a.location, b.rate FROM hotel_info a 
LEFT JOIN rooms b ON b.hotel_id=a.hotel_id 
GROUP BY hotel_id
</code></pre>

<p>How get the minimum room rate per hotel?</p>",mysql|join,"<p>You can use the mysql function min() such as</p>

<pre><code>select a.hotel_id, min(b.rate) 
from hotel_info a 
left join rooms b on b.hotel_id = a.hotel_id 
group by a.hotel_id;
</code></pre>",2
31501333,How to average numbers and show result dynamically,"<p>I want to average numbers froms four(4) input fields(with Min. value of 0 and Max. value of 100) and show the result dynamically (i.e. without reloading the page) immdiately any of the fields is filled. Then in the last column, is for the grade which is also dynamic. Should show A for value between 80 and 100 with a blue coloured cell, B for value between 60 and 80 with a green coloured cell and so on. But the grade is not working. I also want to input the data into a database dynamically using ajax but I don't know how to go about it. Below is what I have come up with. Thanks in advance. Below is the code</p>

<p><div class=""snippet"" data-lang=""js"" data-hide=""false"">
<div class=""snippet-code"">
<pre class=""snippet-code-js lang-js prettyprint-override""><code>$('#input1').keyup(function() {
  evaluate();
});
$('#input2').keyup(function() {
  evaluate();
});
$('#input3').keyup(function() {
  evaluate();
});
$('#input4').keyup(function() {
  evaluate();
});

var evaluate = function() {
  var input1 = parseInt($('#input1').val());
  var input2 = parseInt($('#input2').val());
  var input3 = parseInt($('#input3').val());
  var input4 = parseInt($('#input4').val());

  if (isNaN(input1) || isNaN(input2) || isNaN(input3) || isNaN(input4)) {
    $('#error').text('Inputs must be numbers');
  } else {
    var ave = (input1 + input2 + input3 + input4) / 4;
    $('#total').text(input1 + input2 + input3 + input4);
    $('#ave').text(ave);

    switch (ave) {
      case 100 &lt;= ave &gt;= 80:
        $('#grade').text('&lt;div bgcolor=""blue""&gt;A&lt;/div&gt;');
        break;
      case 80 &lt; ave &gt;= 60:
        $('#grade').text('&lt;div bgcolor=""green""&gt;B&lt;/div&gt;');
        break;
      case 60 &lt; ave &gt;= 40:
        $('#grade').text('&lt;div bgcolor=""yellow""&gt;C&lt;/div&gt;');
        break;
      case 40 &lt; ave &gt;= 20:
        $('#grade').text('&lt;div bgcolor=""red""&gt;D&lt;/div&gt;');
        break;
      case 20 &lt; ave &gt;= 0:
        $('#grade').text('&lt;div bgcolor=""green""&gt;E&lt;/div&gt;');
        break;
      default:
        $('#grade').text('&lt;div&gt;--&lt;/div&gt;');
    }
  }
};</code></pre>
<pre class=""snippet-code-html lang-html prettyprint-override""><code>&lt;script src=""https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js""&gt;&lt;/script&gt;
&lt;table&gt;
  &lt;tr&gt;
    &lt;th&gt;Input 1&lt;/th&gt;
    &lt;th&gt;Input 2&lt;/th&gt;
    &lt;th&gt;Input 3&lt;/th&gt;
    &lt;th&gt;Input 4&lt;/th&gt;
    &lt;th&gt;Total&lt;/th&gt;
    &lt;th&gt;Average&lt;/th&gt;
    &lt;th&gt;Grade&lt;/th&gt;
  &lt;/tr&gt;

  &lt;tr&gt;
    &lt;td&gt;
      &lt;input id=""input1"" name=""input1"" size=""1px"" /&gt;
    &lt;/td&gt;
    &lt;td&gt;
      &lt;input id=""input2"" name=""input2"" size=""1px"" /&gt;
    &lt;/td&gt;
    &lt;td&gt;
      &lt;input id=""input3"" name=""input3"" size=""1px"" /&gt;
    &lt;/td&gt;
    &lt;td&gt;
      &lt;input id=""input4"" name=""input4"" size=""1px"" /&gt;
    &lt;/td&gt;
    &lt;td id=""total""&gt;&lt;/td&gt;
    &lt;td id=""ave""&gt;&lt;/td&gt;
    &lt;td id=""grade""&gt;&lt;/td&gt;
  &lt;/tr&gt;
&lt;/table&gt;
&lt;div id=""error""&gt;&lt;/div&gt;</code></pre>
</div>
</div>
</p>",php|jquery|mysql,"<p>The comparison you're using for checking <code>avg</code> is not supported by JavaScript,
in other words, you can't do <code>0 &gt; avg &gt; 1</code>. <a href=""https://stackoverflow.com/questions/6454198/check-a-range-of-numbers-in-an-if-condition"">Here's  more on that matter.</a></p>

<p>Here is a working example of what you're trying to achieve.</p>

<p><strong>Update:</strong>
Here is a <a href=""http://jsfiddle.net/3p5htb0b/"" rel=""nofollow noreferrer"">Fiddle</a> of the same script wit all the values prepared to be saved.
<div class=""snippet"" data-lang=""js"" data-hide=""false"" data-console=""false"" data-babel=""false"">
<div class=""snippet-code"">
<pre class=""snippet-code-js lang-js prettyprint-override""><code>$(function() {
  function evaluate() {
    var input1 = parseInt($('#input1').val(), 10);
    var input2 = parseInt($('#input2').val(), 10);
    var input3 = parseInt($('#input3').val(), 10);
    var input4 = parseInt($('#input4').val(), 10);

    if (isNaN(input1) || isNaN(input2) || isNaN(input3) || isNaN(input4)) {
      $('#error').text('Inputs must be numbers');
    } else {

      $('#error').remove();

      var message = '&lt;div&gt;--&lt;/div&gt;',
        ave = (input1 + input2 + input3 + input4) / 4;
      $('#total').text(input1 + input2 + input3 + input4);
      $('#ave').text(ave);

      if (ave &gt;= 80) {
        message = '&lt;div class=""blue""&gt;A&lt;/div&gt;';
      } else if (80 &gt; ave &amp;&amp; ave &gt;= 60) {
        message = '&lt;div class=""green""&gt;B&lt;/div&gt;';
      } else if (60 &gt; ave &amp;&amp; ave &gt;= 40) {
        message = '&lt;div class=""yellow""&gt;C&lt;/div&gt;';
      } else if (40 &gt; ave &amp;&amp; ave &gt;= 20) {
        message = '&lt;div class=""red""&gt;D&lt;/div&gt;';
      } else if (20 &gt; ave &amp;&amp; ave &gt;= 0) {
        message = '&lt;div class=""green""&gt;E&lt;/div&gt;';
      }

      $('#grade').empty().html(message);
    }
  };

  $('.input').on('change', evaluate);
});</code></pre>
<pre class=""snippet-code-css lang-css prettyprint-override""><code>input {
  max-width: 50px;
}
table td {
  padding: 0 10px;
}
.blue {
  background: blue;
}
.green {
  background: green;
}
.yellow {
  background: yellow;
}
.red {
  background: blue;
}</code></pre>
<pre class=""snippet-code-html lang-html prettyprint-override""><code>&lt;link href=""http://meyerweb.com/eric/tools/css/reset/reset.css"" rel=""stylesheet"" /&gt;
&lt;script src=""https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js""&gt;&lt;/script&gt;
&lt;table&gt;
  &lt;tr&gt;
    &lt;th&gt;Input 1&lt;/th&gt;
    &lt;th&gt;Input 2&lt;/th&gt;
    &lt;th&gt;Input 3&lt;/th&gt;
    &lt;th&gt;Input 4&lt;/th&gt;
    &lt;th&gt;Total&lt;/th&gt;
    &lt;th&gt;Average&lt;/th&gt;
    &lt;th&gt;Grade&lt;/th&gt;
  &lt;/tr&gt;

  &lt;tr&gt;
    &lt;td&gt;
      &lt;input id=""input1"" class=""input"" type=""number"" value=""0"" name=""input1""&gt;
    &lt;/td&gt;
    &lt;td&gt;
      &lt;input id=""input2"" class=""input"" type=""number"" value=""0"" name=""input2""&gt;
    &lt;/td&gt;
    &lt;td&gt;
      &lt;input id=""input3"" class=""input"" type=""number"" value=""0"" name=""input3"" /&gt;
    &lt;/td&gt;
    &lt;td&gt;
      &lt;input id=""input4"" class=""input"" type=""number"" value=""0"" name=""input4""&gt;
    &lt;/td&gt;
    &lt;td id=""total""&gt;&lt;/td&gt;
    &lt;td id=""ave""&gt;&lt;/td&gt;
    &lt;td id=""grade""&gt;&lt;/td&gt;
  &lt;/tr&gt;
&lt;/table&gt;
&lt;div id=""error""&gt;&lt;/div&gt;</code></pre>
</div>
</div>
</p>",1
31501333,How to average numbers and show result dynamically,"<p>I want to average numbers froms four(4) input fields(with Min. value of 0 and Max. value of 100) and show the result dynamically (i.e. without reloading the page) immdiately any of the fields is filled. Then in the last column, is for the grade which is also dynamic. Should show A for value between 80 and 100 with a blue coloured cell, B for value between 60 and 80 with a green coloured cell and so on. But the grade is not working. I also want to input the data into a database dynamically using ajax but I don't know how to go about it. Below is what I have come up with. Thanks in advance. Below is the code</p>

<p><div class=""snippet"" data-lang=""js"" data-hide=""false"">
<div class=""snippet-code"">
<pre class=""snippet-code-js lang-js prettyprint-override""><code>$('#input1').keyup(function() {
  evaluate();
});
$('#input2').keyup(function() {
  evaluate();
});
$('#input3').keyup(function() {
  evaluate();
});
$('#input4').keyup(function() {
  evaluate();
});

var evaluate = function() {
  var input1 = parseInt($('#input1').val());
  var input2 = parseInt($('#input2').val());
  var input3 = parseInt($('#input3').val());
  var input4 = parseInt($('#input4').val());

  if (isNaN(input1) || isNaN(input2) || isNaN(input3) || isNaN(input4)) {
    $('#error').text('Inputs must be numbers');
  } else {
    var ave = (input1 + input2 + input3 + input4) / 4;
    $('#total').text(input1 + input2 + input3 + input4);
    $('#ave').text(ave);

    switch (ave) {
      case 100 &lt;= ave &gt;= 80:
        $('#grade').text('&lt;div bgcolor=""blue""&gt;A&lt;/div&gt;');
        break;
      case 80 &lt; ave &gt;= 60:
        $('#grade').text('&lt;div bgcolor=""green""&gt;B&lt;/div&gt;');
        break;
      case 60 &lt; ave &gt;= 40:
        $('#grade').text('&lt;div bgcolor=""yellow""&gt;C&lt;/div&gt;');
        break;
      case 40 &lt; ave &gt;= 20:
        $('#grade').text('&lt;div bgcolor=""red""&gt;D&lt;/div&gt;');
        break;
      case 20 &lt; ave &gt;= 0:
        $('#grade').text('&lt;div bgcolor=""green""&gt;E&lt;/div&gt;');
        break;
      default:
        $('#grade').text('&lt;div&gt;--&lt;/div&gt;');
    }
  }
};</code></pre>
<pre class=""snippet-code-html lang-html prettyprint-override""><code>&lt;script src=""https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js""&gt;&lt;/script&gt;
&lt;table&gt;
  &lt;tr&gt;
    &lt;th&gt;Input 1&lt;/th&gt;
    &lt;th&gt;Input 2&lt;/th&gt;
    &lt;th&gt;Input 3&lt;/th&gt;
    &lt;th&gt;Input 4&lt;/th&gt;
    &lt;th&gt;Total&lt;/th&gt;
    &lt;th&gt;Average&lt;/th&gt;
    &lt;th&gt;Grade&lt;/th&gt;
  &lt;/tr&gt;

  &lt;tr&gt;
    &lt;td&gt;
      &lt;input id=""input1"" name=""input1"" size=""1px"" /&gt;
    &lt;/td&gt;
    &lt;td&gt;
      &lt;input id=""input2"" name=""input2"" size=""1px"" /&gt;
    &lt;/td&gt;
    &lt;td&gt;
      &lt;input id=""input3"" name=""input3"" size=""1px"" /&gt;
    &lt;/td&gt;
    &lt;td&gt;
      &lt;input id=""input4"" name=""input4"" size=""1px"" /&gt;
    &lt;/td&gt;
    &lt;td id=""total""&gt;&lt;/td&gt;
    &lt;td id=""ave""&gt;&lt;/td&gt;
    &lt;td id=""grade""&gt;&lt;/td&gt;
  &lt;/tr&gt;
&lt;/table&gt;
&lt;div id=""error""&gt;&lt;/div&gt;</code></pre>
</div>
</div>
</p>",php|jquery|mysql,"<p>If you sum values are right,which i guess you have done,change your <code>switch</code> to this.</p>

<pre><code>     switch(ave) {
        case 100 &lt;= ave &gt;= 80 :
          $('#grade').css('background',""green"").text('B');      
        break;
        //SIMILAR FOR OTHER CASES
    }
</code></pre>",0
31343757,Laravel 5.1 - DB is adding back ticks to my query?,"<p>This function in a model I have:</p>

<pre><code>public static function getUserQuestions($id_user = null, $sort_by = 'date')
{
    $getData = DB::table('questions')
        -&gt;select('map_user_question_vote.id_question, questions.id, SUM(map_user_question_vote.vote) as votes', false)
        -&gt;leftJoin('map_user_question_vote', 'map_user_question_vote.id_question', '=', 'questions.id')
        -&gt;where('questions.id_user', $id_user)
        -&gt;where('map_user_question_vote.id_question', 'questions.id')
        -&gt;groupBy('questions.id')
        -&gt;get();
}
</code></pre>

<p>is outputting this:</p>

<pre><code>select `map_user_question_vote`.`id_question,` as `SUM(map_user_question_vote.vote)`, `` from `questions`
left join `map_user_question_vote` on `map_user_question_vote`.`id_question` = `questions`.`id`
where `questions`.`id_user` = 1 and `map_user_question_vote`.`id_question` = questions.id
group by `questions`.`id`
</code></pre>

<p>Same as this question:
<a href=""https://stackoverflow.com/questions/27480838/mysql-codeigniter-active-records-are-adding-extra-back-ticks-to-query"">mysql | Codeigniter Active Records are adding extra back ticks to query</a></p>

<p>But for Laravel, not CI.</p>

<p>You'll also notice that my SUM() as... is all messed up?
Is there a way round this?</p>",mysql|laravel|laravel-5,"<p>How about something like this:</p>

<pre><code>$getData = DB::table('questions')
-&gt;select(DB::raw('map_user_question_vote.id_question, questions.id, SUM(map_user_question_vote.vote) as votes'))
-&gt;leftJoin('map_user_question_vote', 'map_user_question_vote.id_question', '=', 'questions.id')
-&gt;where('questions.id_user', $id_user)
-&gt;where('map_user_question_vote.id_question', 'questions.id')
-&gt;groupBy('questions.id')
-&gt;get();
</code></pre>",2
31141394,"Pawn, PHP and MySQL","<p>I am trying to connect to my MySQL host in Hostinger from Pawn language ...
I do not know why I am getting these errors:</p>

<pre><code>[17:25:26] [ERROR] CMySQLConnection::Connect - (error #2005) Unknown MySQL
server host 'mysql.hostinger.co.il' (0)
[17:25:26] [WARNING] CMySQLConnection::Disconnect - no connection available
[17:25:26] [ERROR] CMySQLConnection::Connect - (error #2005) Unknown MySQL server host 'mysql.hostinger.co.il' (0)
[17:25:26] [WARNING] CMySQLConnection::Disconnect - no connection available
[17:25:26] [ERROR] CMySQLConnection::Connect - (error #2005) Unknown MySQL server host 'mysql.hostinger.co.il' (0)
[17:25:26] [WARNING] CMySQLConnection::Disconnect - no connection available
</code></pre>

<p>I will be very happy to get help.</p>

<p>I'm sorry for my bad english.</p>",php|mysql|connection|pawn,"<p>It is obvious, 'mysql.hostinger.co.il' is not valid mysql host. If you're trying to make remote connection, remote connection may be disallowed by Hostinger. If otherwise, just type 'localhost' instead of 'mysql.hostinger.co.il'</p>",0
31324498,mysqli fetch_assoc dropping first line with foreach,"<p>I'm trying to update one of my webpages from mysql commands to mysqli and everything works except for the output of my records.  It skips the first line. There should be 124 records, which I verify with</p>

<pre><code>$NumCols = $RecordSet-&gt;num_rows;
Print($NumCols . ""&lt;br/&gt;"");
</code></pre>

<p>However, only 123 records print using the following code:</p>

<pre><code>// Fill the first row of the table with the field names
$row = mysqli_fetch_assoc($RecordSet);
foreach($row as $column =&gt; $value) {
   Print(""&lt;td&gt;"" . $column . ""&lt;/td&gt;"");
}
Print(""&lt;/tr&gt;"");

// Fill the remaining rows of the table with the values
// This code is dropping the first result
$Pos = 1;
While($row1 = $RecordSet-&gt;fetch_assoc())
{
   Print(""&lt;tr&gt;&lt;td&gt;$Pos&lt;/td&gt;"");
   foreach($row1 as $column =&gt; $value) {
      Print(""&lt;td&gt;"" . $value . ""&lt;/td&gt;"");
   }
   Print(""&lt;/tr&gt;"");
   $Pos++;
}
</code></pre>

<p>I have tried without the while loop and that just prints a single record with each value as a new row. I have also tried to just print the row without a foreach statement and that just displayed the word Array 123 times and still skipped the first line. I have also tried to change the row variable in the while loop from row to row1 and both results give me the same missing first result.</p>

<p>I also verify the first line is missing when comparing the output from my mysql page to the mysqli page.</p>",php|mysql|arrays|mysqli,"<pre><code>$row = mysqli_fetch_assoc($RecordSet);
</code></pre>

<p>this is fetching the first record, so the fetch_assoc() of the while-loop can't fetch it.<br>
You might want to switch to a <a href=""http://docs.php.net/manual/en/control-structures.do.while.php"" rel=""nofollow"">do-while loop</a>.</p>",0
31324498,mysqli fetch_assoc dropping first line with foreach,"<p>I'm trying to update one of my webpages from mysql commands to mysqli and everything works except for the output of my records.  It skips the first line. There should be 124 records, which I verify with</p>

<pre><code>$NumCols = $RecordSet-&gt;num_rows;
Print($NumCols . ""&lt;br/&gt;"");
</code></pre>

<p>However, only 123 records print using the following code:</p>

<pre><code>// Fill the first row of the table with the field names
$row = mysqli_fetch_assoc($RecordSet);
foreach($row as $column =&gt; $value) {
   Print(""&lt;td&gt;"" . $column . ""&lt;/td&gt;"");
}
Print(""&lt;/tr&gt;"");

// Fill the remaining rows of the table with the values
// This code is dropping the first result
$Pos = 1;
While($row1 = $RecordSet-&gt;fetch_assoc())
{
   Print(""&lt;tr&gt;&lt;td&gt;$Pos&lt;/td&gt;"");
   foreach($row1 as $column =&gt; $value) {
      Print(""&lt;td&gt;"" . $value . ""&lt;/td&gt;"");
   }
   Print(""&lt;/tr&gt;"");
   $Pos++;
}
</code></pre>

<p>I have tried without the while loop and that just prints a single record with each value as a new row. I have also tried to just print the row without a foreach statement and that just displayed the word Array 123 times and still skipped the first line. I have also tried to change the row variable in the while loop from row to row1 and both results give me the same missing first result.</p>

<p>I also verify the first line is missing when comparing the output from my mysql page to the mysqli page.</p>",php|mysql|arrays|mysqli,"<p>You fetch the first line for the table header.<br>
You could reset the internal pointer of the result set, just before the while loop:</p>

<pre><code>$RecordSet-&gt;data_seek(0);
while($row1 = $RecordSet-&gt;fetch_assoc())
</code></pre>",2
31230170,array_rand function returns empty sometimes,"<p>I want to make a little service.The service's main idea is to show one record from mysql table and it makes this per click at randomly.</p>

<p>Here is the code that i wrote:</p>

<pre><code>&lt;?php
require'connection.php';

$dbQueryFirst = $nesnePDO-&gt;prepare(""SELECT CategoryID FROM Categories"");
$dbQueryFirst-&gt;execute();   
while ($resultsFirst = $dbQueryFirst-&gt;fetch(PDO::FETCH_ASSOC)) 
{
    $getidFirst[] = $resultsFirst;
    $puppet = array_rand($getidFirst);
    if ($puppet == null &amp;&amp; empty($puppet)) 
    {
        shuffle($getidFirst);       
    }       
}

$rndID = $puppet;

$dbQuerySecond = $nesnePDO-&gt;prepare(""SELECT * FROM Categories WHERE CategoryID = :CategoryID"");
$dbQuerySecond-&gt;bindParam("":CategoryID"",$rndID);
$dbQuerySecond-&gt;execute();
$resultsSecond = $dbQuerySecond-&gt;fetchAll(PDO::FETCH_ASSOC);
echo json_encode($resultsSecond);
?&gt;
</code></pre>

<p>First query is,get id's from db and take them into array.Second query,get the random id from the previous query's result and show the entire row of relevant id.And I got stuck at random function.
If I need to explain this work with percentage for to be more clearly,</p>

<ul>
<li>Works well and get results %70</li>
<li>get empty %20</li>
<li>get null array <code>[]</code> %10</li>
</ul>

<p>I wanted the show the screenshots but system didn't give the permission because of my reputation.So,the final statement as usual,""I'm not so good at PHP.Any idea?"" Honestly,any help would be appreciated.</p>",php|mysql|arrays|random,"<p>From the doc </p>

<pre><code>When picking only one entry, array_rand() returns the key for a random entry
</code></pre>

<p>Second, $resultsFirst, i think, is array you need take item of it <code>$resultsFirst['CategoryID']</code></p>

<p>So, use </p>

<pre><code>while ($resultsFirst = $dbQueryFirst-&gt;fetch(PDO::FETCH_ASSOC))  {
    $getidFirst[] = $resultsFirst['CategoryID'];
}

$puppet = array_rand($getidFirst);
$rndID = $getidFirst[$puppet];
</code></pre>",0
31230170,array_rand function returns empty sometimes,"<p>I want to make a little service.The service's main idea is to show one record from mysql table and it makes this per click at randomly.</p>

<p>Here is the code that i wrote:</p>

<pre><code>&lt;?php
require'connection.php';

$dbQueryFirst = $nesnePDO-&gt;prepare(""SELECT CategoryID FROM Categories"");
$dbQueryFirst-&gt;execute();   
while ($resultsFirst = $dbQueryFirst-&gt;fetch(PDO::FETCH_ASSOC)) 
{
    $getidFirst[] = $resultsFirst;
    $puppet = array_rand($getidFirst);
    if ($puppet == null &amp;&amp; empty($puppet)) 
    {
        shuffle($getidFirst);       
    }       
}

$rndID = $puppet;

$dbQuerySecond = $nesnePDO-&gt;prepare(""SELECT * FROM Categories WHERE CategoryID = :CategoryID"");
$dbQuerySecond-&gt;bindParam("":CategoryID"",$rndID);
$dbQuerySecond-&gt;execute();
$resultsSecond = $dbQuerySecond-&gt;fetchAll(PDO::FETCH_ASSOC);
echo json_encode($resultsSecond);
?&gt;
</code></pre>

<p>First query is,get id's from db and take them into array.Second query,get the random id from the previous query's result and show the entire row of relevant id.And I got stuck at random function.
If I need to explain this work with percentage for to be more clearly,</p>

<ul>
<li>Works well and get results %70</li>
<li>get empty %20</li>
<li>get null array <code>[]</code> %10</li>
</ul>

<p>I wanted the show the screenshots but system didn't give the permission because of my reputation.So,the final statement as usual,""I'm not so good at PHP.Any idea?"" Honestly,any help would be appreciated.</p>",php|mysql|arrays|random,"<p>Your should wait for array to get filled inside your while loop and then get random value from it.</p>

<pre><code>while ($resultsFirst = $dbQueryFirst-&gt;fetch(PDO::FETCH_ASSOC)) 
{
    $getidFirst[] = $resultsFirst;     
}

$puppet = array_rand($getidFirst);
$rndID = $getidFirst[$puppet];
</code></pre>

<p>Also, you can get random entry directly from your database without using php.</p>

<pre><code>$dbQueryFirst = $nesnePDO-&gt;prepare(""SELECT CategoryID FROM Categories ORDER BY RAND() LIMIT 1"");
$dbQueryFirst-&gt;execute();  
$rndID = $dbQueryFirst-&gt;fetch(PDO::FETCH_ASSOC)
</code></pre>

<p>By the way, you should be getting your CategoryID like so</p>

<pre><code>$rndID['CategoryID']
</code></pre>",1
31486032,SQL query using sum(),"<p>Hello I'm currently working on SQL problem that I can't quite figure out. Here is the Schema I'm working with:  </p>

<p><img src=""https://i.stack.imgur.com/VPkPJ.jpg"" alt=""enter image description here""></p>

<p>Here is the question I am stuck on:</p>

<p>-- 3 Find the first name, last name and total combined film length of Sci-Fi films for every actor. That is the result should list the names of all of the actors (even if an actor has not been in any Sci-Fi films) and the total length of Sci-Fi films they have been in.</p>

<p>So far I have </p>

<pre><code>SELECT actor.first_name, actor.last_name, (SELECT SUM(film.length)
from film 
INNER JOIN film_category
ON film.film_id = film_category.film_id
INNER JOIN category
ON film_category.category_id = category.category_id
INNER JOIN film_actor
ON film_actor.film_id = film.film_id
INNER JOIN actor
ON film_actor.actor_id = actor.actor_id
WHERE category.name = 'Sci-fi'
)
from actor
</code></pre>

<p>I know I need to group it by actor_id but i'm unable to do this in a select subquery. Anyone have some tips?</p>",mysql|sql,"<p>The top answer here actually is not correct. This will work:</p>

<pre><code>   SELECT T1.first_name, T1.last_name, T2.total
    FROM 
        (SELECT a.first_name, a.last_name, a.actor_id
         FROM actor a
         ) 
        AS T1
    LEFT JOIN 
        (SELECT a.first_name, a.last_name, a.actor_id, SUM( f.length ) AS total, c.name
        FROM actor a, film_actor fa, film f, film_category fc, category c
        WHERE c.category_id = fc.category_id
        AND fc.film_id = f.film_id
        AND a.actor_id = fa.actor_id
        AND fa.film_id = f.film_id
        AND c.name =  'sci-fi'
        GROUP BY a.actor_id) 
        AS T2 
    ON T1.actor_id = T2.actor_id;
</code></pre>

<p>It takes all actors, and combines them with the sci-fi actors and gives the combined screen time for sci-fi movies for all. Test it on your data set, worked for me.</p>",0
31486032,SQL query using sum(),"<p>Hello I'm currently working on SQL problem that I can't quite figure out. Here is the Schema I'm working with:  </p>

<p><img src=""https://i.stack.imgur.com/VPkPJ.jpg"" alt=""enter image description here""></p>

<p>Here is the question I am stuck on:</p>

<p>-- 3 Find the first name, last name and total combined film length of Sci-Fi films for every actor. That is the result should list the names of all of the actors (even if an actor has not been in any Sci-Fi films) and the total length of Sci-Fi films they have been in.</p>

<p>So far I have </p>

<pre><code>SELECT actor.first_name, actor.last_name, (SELECT SUM(film.length)
from film 
INNER JOIN film_category
ON film.film_id = film_category.film_id
INNER JOIN category
ON film_category.category_id = category.category_id
INNER JOIN film_actor
ON film_actor.film_id = film.film_id
INNER JOIN actor
ON film_actor.actor_id = actor.actor_id
WHERE category.name = 'Sci-fi'
)
from actor
</code></pre>

<p>I know I need to group it by actor_id but i'm unable to do this in a select subquery. Anyone have some tips?</p>",mysql|sql,"<p>This should get you exactly what you want, including the part about having actors that aren't in Sci-Fi movies. You can LEFT JOIN on film to include all films the film_actor is in.  The additional AND statement works with the LEFT JOIN to include actors not in Sci-Fi movies for your aggregate sum function. </p>

<pre><code>SELECT a.actor_id, a.first_name, a.last_name, sum(f.length) AS length
FROM actor a
INNER JOIN film_actor fa ON fa.actor_id = a.actor_id
INNER JOIN film_category fc ON fc.film_id = fa.film_id
INNER JOIN category c ON c.category_id = fc.category_id
LEFT JOIN film f ON f.film_id = fa.film_id 
AND c.name = 'Sci-Fi'
GROUP BY a.actor_id; 
</code></pre>",1
31486032,SQL query using sum(),"<p>Hello I'm currently working on SQL problem that I can't quite figure out. Here is the Schema I'm working with:  </p>

<p><img src=""https://i.stack.imgur.com/VPkPJ.jpg"" alt=""enter image description here""></p>

<p>Here is the question I am stuck on:</p>

<p>-- 3 Find the first name, last name and total combined film length of Sci-Fi films for every actor. That is the result should list the names of all of the actors (even if an actor has not been in any Sci-Fi films) and the total length of Sci-Fi films they have been in.</p>

<p>So far I have </p>

<pre><code>SELECT actor.first_name, actor.last_name, (SELECT SUM(film.length)
from film 
INNER JOIN film_category
ON film.film_id = film_category.film_id
INNER JOIN category
ON film_category.category_id = category.category_id
INNER JOIN film_actor
ON film_actor.film_id = film.film_id
INNER JOIN actor
ON film_actor.actor_id = actor.actor_id
WHERE category.name = 'Sci-fi'
)
from actor
</code></pre>

<p>I know I need to group it by actor_id but i'm unable to do this in a select subquery. Anyone have some tips?</p>",mysql|sql,"<p>I don't understand what are you need subquery, try this:</p>

<pre><code>SELECT actor.first_name, actor.last_name,SUM(film.length)
from film 
INNER JOIN film_category
ON film.film_id = film_category.film_id
INNER JOIN category
ON film_category.category_id = category.category_id
INNER JOIN film_actor
ON film_actor.film_id = film.film_id
INNER JOIN actor
ON film_actor.actor_id = actor.actor_id
WHERE category.name = 'Sci-fi'
GROUP BY actor.actor_id;
</code></pre>",1
31486032,SQL query using sum(),"<p>Hello I'm currently working on SQL problem that I can't quite figure out. Here is the Schema I'm working with:  </p>

<p><img src=""https://i.stack.imgur.com/VPkPJ.jpg"" alt=""enter image description here""></p>

<p>Here is the question I am stuck on:</p>

<p>-- 3 Find the first name, last name and total combined film length of Sci-Fi films for every actor. That is the result should list the names of all of the actors (even if an actor has not been in any Sci-Fi films) and the total length of Sci-Fi films they have been in.</p>

<p>So far I have </p>

<pre><code>SELECT actor.first_name, actor.last_name, (SELECT SUM(film.length)
from film 
INNER JOIN film_category
ON film.film_id = film_category.film_id
INNER JOIN category
ON film_category.category_id = category.category_id
INNER JOIN film_actor
ON film_actor.film_id = film.film_id
INNER JOIN actor
ON film_actor.actor_id = actor.actor_id
WHERE category.name = 'Sci-fi'
)
from actor
</code></pre>

<p>I know I need to group it by actor_id but i'm unable to do this in a select subquery. Anyone have some tips?</p>",mysql|sql,"<p>There is no need to use a subquery.  Aggregate functions work on the entire data set.  The 'group by' specifies how to group the data you're aggregating.</p>

<pre><code>select a.actor_id, a.first_name, a.last_name, sum(f.length)
  from actor a
  left outer join film_actor fa on fa.actor_id   = a.actor_id
  left outer join film       f  on f.film_id     = fa.film_id
  left outer join film_categories       fc on fc.film_id    = f.film_id
  left outer join categories            c  on c.category_id = fc.category_id
 where c.name = 'sci-fi'
  group by a.actor_id
;
</code></pre>

<p>The outer joins ensure actors with no sci-fi film experience are included in the results by </p>",4
31355185,PHP is updating instead of inserting,"<p>I am creating a page where the user fill a report and that report is inserted to the database
I have below my php page that is supposed to insert new values to table reports, but it is updating instead</p>

<pre><code>&lt;?php 
include 'connectionfile.php' ; 
$ref = $_POST['ref']; 
$title =$_POST['titl']; 
$type = $_POST['type']; 
$content = $_POST['content'];
session_start(); 
$sql = ""insert into reports (reference, title,id_type, content) values ('"".$ref.""', '"".$title.""', '"". $type.""','"".$content.""');""; 
$result =mysqli_query($con,$sql ); ?&gt;
</code></pre>

<p>Is it because <code>id_type</code> (primary key of table type) is a foreign key -in table report- of value 1 and 2? </p>

<p>Because if I insert <code>id_type=1</code> for example, id_report (primary key of table report) increments by 1, same goes to <code>id_type=2</code></p>

<p>Answer might be clear,my knowledge in web development was forgotten.</p>",php|mysql,"<p>With the SQL-Query you provided, no update is possible. You can make an <code>UPDATE ON DUPLICATE KEY</code>, but this is not in this query. Please note, that you do not have to and should not specify any value for an automatically setted parameter (<code>AUTO_INCREMENT</code>).</p>",2
31382900,How to join 2 queries to sort users by location in sql,"<p>I have a complex query returning a list of users with their details, and would like to sort them by distance according to a particular user latitude and longitude. So far I manage to pull their information on one side, and sort users using the haversine formula on the other, but after trying for many hours I still haven't managed yet to mix both queries into a single one. </p>

<p>Would anyone know how to do that?</p>

<p>Here are my 2 queries:</p>

<pre><code>/* list of users with their information */
SELECT x.* 
  FROM ow_base_user x
  JOIN ow_base_user y
    ON y.id = x.id  
  LEFT 
  JOIN ow_base_user_suspend z
    ON z.userId = y.id 
 WHERE z.id IS NULL
   AND y.emailVerify = 1
 ORDER 
    BY x.joinStamp DESC LIMIT 100 

/* sort users by distance according to user 1 lat and lng */
SELECT l.id
     , l.lat
     , l.lng
     , haversine(l.lat,l.lng,u.lat,u.lng)*111.045 distance 
  FROM ow_googlelocation_data u
     , ow_googlelocation_data l 
 WHERE l.entityType = 'user' 
   AND u.id = 1 
 ORDER 
    BY distance
</code></pre>

<p>EDIT:</p>

<p>Here is the output of the first query:
<img src=""https://i.stack.imgur.com/JdQk9.png"" alt=""list of users with detail""></p>

<p>And of the second query:
<img src=""https://i.stack.imgur.com/cz6BB.png"" alt=""users sorted by distance""></p>

<p>I would like to have as an output the first query + distance field of the second query, and everything sorted by distance.</p>

<p>EDIT 2: Here is a <a href=""https://drive.google.com/file/d/0BxxAR9Yb-g8BRzFQc2VjZk1GdTA/view?usp=sharing"" rel=""nofollow noreferrer"">dump</a> of the tables with dummy content and the original queries if you want to try it out</p>",mysql,"<p>Try this, i've been changing the table alias into something a bit more readable, let me know.</p>

<pre><code>SELECT 
    u1.*, 
    loc1.lat, 
    loc1.lng, 
    haversine(loc1.lat,loc1.lng,loc2.lat,loc2.lng)*111.045 as distance
FROM 
    ow_googlelocation_data as loc2,
    ow_base_user as u1 INNER JOIN ow_base_user u2
        ON u1.id = u2.id
    LEFT JOIN ow_base_user_suspend s
        ON s.userId = u1.id
    INNER JOIN ow_googlelocation_data as loc1 
        ON loc1.entityId = u1.id
WHERE
    s.id IS NULL AND
    u1.emailVerify = 1 AND
    loc1.entityType='user' AND
    loc2.entityType = 'user' AND
    u1.id != loc2.entityId AND
    loc2.entityId = 1
ORDER BY 
    distance ASC
LIMIT 100 
</code></pre>",1
29579580,How to grab an int from my MySQL server via PHP?,"<p>I am a novice when it comes to PHP but I don't understand if my syntax is wrong in this statement, or how would I grab an int from my MySQL server.</p>

<p>I know that my server credentials are working fine. How would I fix this statement to give me a returned integer of the number of reviews in the userinfo table?</p>

<pre><code>$numberofpreviousreviews = mysql_query(""SELECT `number_of_reviews` FROM `userinfo`"") or die(mysql_error()); //Check to see how many reviews user has previously created
$amountofreviews = $numberofpreviousreviews + 1;
$query2 = mysql_query(""ALTER TABLE userinfo ADD `amountofreviews` VARCHAR(10000)"") or die(mysql_error()); //Make another column in database for the new review 
</code></pre>",php|mysql,"<p>Assume you have a table <code>userinfo</code> which has the following structure and data :</p>

<p><img src=""https://i.stack.imgur.com/L4dLS.png"" alt=""enter image description here""></p>

<p>Scenario <strong>#1</strong> : </p>

<p>If you want to retrieve the all <code>number_of_reviews</code>, then do like this,</p>

<pre><code>$query = ""SELECT `number_of_reviews` FROM `userinfo`"";

$result = mysqli_query($db,$query);

while ($row = mysqli_fetch_assoc($result)) {
echo ""Number of reviews : "" . $row['number_of_reviews'] . ""&lt;br/&gt;"";
}
</code></pre>

<p>It will give you,</p>

<pre><code>Number of reviews : 20
Number of reviews : 40
</code></pre>

<p>Since, the result has many rows, it will display like above.</p>

<p>Scenario <strong>#2</strong>:</p>

<p>If you want to retrieve only the specific <code>number_of_reviews</code> for some user id (which is unique). I take <code>id</code> as <code>1</code> as a example here. Then do like,</p>

<pre><code>$query2 =  ""SELECT `number_of_reviews` FROM `userinfo` WHERE `id` = 1"";
$result2 = mysqli_query($db,$query2);

while ($row2 = mysqli_fetch_assoc($result2)) {
    echo $row2['number_of_reviews'] . ""&lt;br/&gt;"";
}
</code></pre>

<p>This will print,</p>

<pre><code>20.
</code></pre>

<p>Because, <code>number_of_reviews</code> is 20 for <code>id</code> 1.</p>",1
29579580,How to grab an int from my MySQL server via PHP?,"<p>I am a novice when it comes to PHP but I don't understand if my syntax is wrong in this statement, or how would I grab an int from my MySQL server.</p>

<p>I know that my server credentials are working fine. How would I fix this statement to give me a returned integer of the number of reviews in the userinfo table?</p>

<pre><code>$numberofpreviousreviews = mysql_query(""SELECT `number_of_reviews` FROM `userinfo`"") or die(mysql_error()); //Check to see how many reviews user has previously created
$amountofreviews = $numberofpreviousreviews + 1;
$query2 = mysql_query(""ALTER TABLE userinfo ADD `amountofreviews` VARCHAR(10000)"") or die(mysql_error()); //Make another column in database for the new review 
</code></pre>",php|mysql,"<p>You need to fetch your results after you run your query. There are several ways to do this but using <a href=""http://php.net/manual/en/function.mysql-fetch-assoc.php"" rel=""nofollow""><code>mysql_fetch_assoc()</code></a> will work for you.</p>

<pre><code>$numberofpreviousreviews = mysql_query(""SELECT `number_of_reviews` FROM `userinfo`"") or die(mysql_error()); //Check to see how many reviews user has previously created
$row = mysql_fetch_assoc($numberofpreviousreviews);
$amountofreviews = $row['number_of_reviews'] + 1;
</code></pre>

<p>FYI, you shouldn't be using <code>mysql_*</code> functions anymore. They are deprecated and going away. You should use <code>mysqli</code> or <code>PDO</code>.</p>",2
29388631,Mysql query error when trying to extract from two different tables with where clause,"<p>I am not able to retrieve query result when I am trying to extract data from two different table where column data matches(b/w column of first table and column of second table)</p>

<p>I used following 2 methods:</p>

<pre><code> SELECT a.*, FROM `table1` a, `table2` b
 WHERE a.`synonyms` in (b.`synonyms`);
</code></pre>

<p>or </p>

<pre><code>SELECT a.*, FROM `table1` a, `table2` b
WHERE a.`synonyms`=b.`synonyms`;
</code></pre>

<p>and </p>

<pre><code>SELECT * FROM `table1` where `synonyms` in (SELECT `synonyms`from `table2`WHERE 1);
</code></pre>

<p>First Query showing error:</p>

<pre><code>#1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'FROM `table1` a, `table2` b  WHERE' at line 1
</code></pre>

<hr>

<p>Second query is running long time and then at the end displaying nothing except:
show your query.</p>

<p>What mistake am I making here?</p>

<p>PS: tabel1 and table both having synonyms column (value of synonym is in varchar). around 300k synonyms(eg:gene name) are there in table1. table2 have around 5000 synonyms which also exsist in table1. I want to extract those 5000 from table1 with extra information it contain.</p>

<pre><code>    SELECT * FROM `table1` where `synonyms` in ('synonym1','synonym2','synonym3','synonym4'); 
</code></pre>",php|mysql,"<p>Change </p>

<pre><code> SELECT a.*, FROM
</code></pre>

<p>to </p>

<pre><code>SELECT a.* FROM
</code></pre>

<p>plus use join in your query like</p>

<pre><code>SELECT a.* FROM `table1` a join `table2` b on (a.synonyms=b.synonyms);
</code></pre>",0
29388631,Mysql query error when trying to extract from two different tables with where clause,"<p>I am not able to retrieve query result when I am trying to extract data from two different table where column data matches(b/w column of first table and column of second table)</p>

<p>I used following 2 methods:</p>

<pre><code> SELECT a.*, FROM `table1` a, `table2` b
 WHERE a.`synonyms` in (b.`synonyms`);
</code></pre>

<p>or </p>

<pre><code>SELECT a.*, FROM `table1` a, `table2` b
WHERE a.`synonyms`=b.`synonyms`;
</code></pre>

<p>and </p>

<pre><code>SELECT * FROM `table1` where `synonyms` in (SELECT `synonyms`from `table2`WHERE 1);
</code></pre>

<p>First Query showing error:</p>

<pre><code>#1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'FROM `table1` a, `table2` b  WHERE' at line 1
</code></pre>

<hr>

<p>Second query is running long time and then at the end displaying nothing except:
show your query.</p>

<p>What mistake am I making here?</p>

<p>PS: tabel1 and table both having synonyms column (value of synonym is in varchar). around 300k synonyms(eg:gene name) are there in table1. table2 have around 5000 synonyms which also exsist in table1. I want to extract those 5000 from table1 with extra information it contain.</p>

<pre><code>    SELECT * FROM `table1` where `synonyms` in ('synonym1','synonym2','synonym3','synonym4'); 
</code></pre>",php|mysql,"<p>In the second query you should define WHERE... = 'something'.</p>

<p>The right syntax is WHERE column_name operator value;</p>

<p>In first query you should remove comma like pointed already.</p>",0
29388631,Mysql query error when trying to extract from two different tables with where clause,"<p>I am not able to retrieve query result when I am trying to extract data from two different table where column data matches(b/w column of first table and column of second table)</p>

<p>I used following 2 methods:</p>

<pre><code> SELECT a.*, FROM `table1` a, `table2` b
 WHERE a.`synonyms` in (b.`synonyms`);
</code></pre>

<p>or </p>

<pre><code>SELECT a.*, FROM `table1` a, `table2` b
WHERE a.`synonyms`=b.`synonyms`;
</code></pre>

<p>and </p>

<pre><code>SELECT * FROM `table1` where `synonyms` in (SELECT `synonyms`from `table2`WHERE 1);
</code></pre>

<p>First Query showing error:</p>

<pre><code>#1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'FROM `table1` a, `table2` b  WHERE' at line 1
</code></pre>

<hr>

<p>Second query is running long time and then at the end displaying nothing except:
show your query.</p>

<p>What mistake am I making here?</p>

<p>PS: tabel1 and table both having synonyms column (value of synonym is in varchar). around 300k synonyms(eg:gene name) are there in table1. table2 have around 5000 synonyms which also exsist in table1. I want to extract those 5000 from table1 with extra information it contain.</p>

<pre><code>    SELECT * FROM `table1` where `synonyms` in ('synonym1','synonym2','synonym3','synonym4'); 
</code></pre>",php|mysql,"<p>Change     <code>SELECT a.*, FROM</code> to <code>SELECT a.* FROM</code></p>",0
29305831,JPA serial numbers using a customer ID generation,"<p>I get this error when I try to generate serial numbers for ID using a random generator instead of the built-in strategies:</p>

<pre><code>run:
[EL Info]: 2015-03-27 18:22:05.047--ServerSession(1185812646)--EclipseLink, version: Eclipse Persistence Services - 2.5.0.v20130507-3faac2b
[EL Info]: connection: 2015-03-27 18:22:09.295--ServerSession(1185812646)--file:/C:/Users/Sobhie/Desktop/people/build/classes/_peoplePU login successful
[EL Warning]: 2015-03-27 18:22:09.498--ServerSession(1185812646)--Exception [EclipseLink-4002] (Eclipse Persistence Services - 2.5.0.v20130507-3faac2b): org.eclipse.persistence.exceptions.DatabaseException
Internal Exception: com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: BLOB/TEXT column 'R' used in key specification without a key length
Error Code: 1170
Call: CREATE TABLE PERSON (R LONGBLOB NOT NULL, FNAME VARCHAR(255), ID BIGINT, LNAME VARCHAR(255), X INTEGER, PRIMARY KEY (R))
Query: DataModifyQuery(sql=""CREATE TABLE PERSON (R LONGBLOB NOT NULL, FNAME VARCHAR(255), ID BIGINT, LNAME VARCHAR(255), X INTEGER, PRIMARY KEY (R))"")
BUILD SUCCESSFUL (total time: 13 seconds)
</code></pre>",java|mysql|jpa|netbeans|eclipselink,"<p>You current custom primary key strategy result in primary keys mapped as blobs (so probably a serialized object)).
Out of the box, BLOB or TEXT cannot be used as PRIMARY KEY in mysql as </p>

<p>a) mysql has limit on how many characeters can form part of the index (so whole TEXT content is out of the question), 
b) there is no size constraint for TEXT (for example TEXT(512))</p>

<p>To use TEXT as Primary Key, the index length must be declared explicit (so mysql will look only at the first X characters).</p>

<pre><code>CREATE TABLE PERSON (R TEXT NOT NULL, FNAME VARCHAR(255), ..., KEY ix_length_r (R(255)))
</code></pre>

<p>If your R values are not unique in the first XX characters it will not work.</p>

<p>But the mysql ix limit lenght, comes down to 255 for unicodecharacters and to 765 for latin-1. So for unicode you are basically as good as using VARCHAR(255) as your primary key.</p>

<p>You mentioned random number generator for your primary keys but they are mapped as blobs. I don't believe having keys longer than 255 chars makes any sense (it is a huge space about 2E462, so more than atoms in the universe!!!), so you should limit yourself to having them as simple varchar. </p>

<p>But most likely you wanted to use simple Long, but you messed up with your mappings. Impossible to say without the code though.</p>",1
29620067,Notifications in webapplication using mysql servlet and jsp,"<p>I am developing a webapplication which is a cab booking system.</p>

<p>The working is when the customer books a cab the request information will sit into the database. The admin will view it in the web-application and book cab for the customer. 
What I want to do is the admin must get a notification that will show the total number of requests received for every 1 min. </p>

<p>How can I do this? What is that I need to use for doing this? </p>

<p>I'm using servlets,jsp and mysql.</p>

<p>Any help would be much appreciated!Thanks!</p>",mysql|jsp|servlets,"<p>You need to maintain the time-stamp feature in database side,based on time-stamp we will get the latest requests comming from customer.and also you need to use the ajax calling. </p>",0
29514483,$con->query error MySQL with PHP,"<p>What I'm trying to do is get my html/php code to display data from my MySQL in a table. <br>
It connects just find to the database, but I think I'm getting an error at: <code>$resultt=$con-&gt;query(""SELECT DisplayName, Kills, Deaths, Wins, Lost FROM TTPlayer"");</code>  for it always shows that code as text on the webpage when I execute it. Also in the tables it shows each of the row methods and their variable <br><br> Thanks in advance for any help!
<br><br><b>Code:</b>
<a href=""http://pastebin.com/j1EDux5y"" rel=""nofollow"">http://pastebin.com/j1EDux5y</a></p>

<p>Executed webpage:
<a href=""http://pasteboard.co/2pzqESnw.png"" rel=""nofollow"">http://pasteboard.co/2pzqESnw.png</a></p>",php|html|mysql|css,"<blockquote>
  <p><em>""It is a .html file, I will check on php5_module –  ZachtheBoB 2 mins ago""</em></p>
</blockquote>

<p><code>.html</code> file extensions will not parse PHP directives.</p>

<p>A <code>.php</code> extension is required to do this, plus making sure a webserver and PHP are installed and properly configured.</p>

<p>If on a local machine, you will need to access it like <code>http://localhost/file.php</code> and not <code>file:///file.php</code></p>

<p>You can however, instruct Apache to treat <code>.html</code> files as PHP through <code>.htaccess</code> if that is your preference.</p>

<pre><code>AddType application/x-httpd-php .html
</code></pre>

<p>If you only plan on including the PHP on one page, it is better to setup this way:</p>

<pre><code>&lt;Files yourpage.html&gt;
AddType application/x-httpd-php .html
&lt;/Files&gt;
</code></pre>

<p>If you are running PHP as CGI</p>

<pre><code>AddHandler application/x-httpd-php .html
</code></pre>

<p>If on GoDaddy</p>

<pre><code>Options +ExecCGI
AddType application/x-httpd-php .php .html
AddHandler x-httpd-php5 .php .html
</code></pre>",3
29321354,"Messages table in MySQL, getting last message for each thread","<p>I am trying to get the last message from each conversation, the only problem is I am not using a conversations table.</p>

<p>I am using one messages table, my table columns looks like this:</p>

<pre><code>id  from_id     to_id   text    isread  isseen  created_at  updated_at 
</code></pre>

<p>Right now I am able to retrieve conversations like this:</p>

<pre><code>$messages = Message::select('*')-&gt;
                from(DB::raw(""(select * from `messages` where `to_id` = "".Auth::id()."" order by `created_at` desc) as sub""))-&gt;
                groupBy('from_id')-&gt;orderBy('created_at', 'desc')-&gt;
                paginate(7);
</code></pre>

<p>The only downside to this is I am not retrieving the last message for each conversation, I am retrieving the last message received.</p>

<p>How can I retrieve the last message of each conversation?</p>

<p>Example Retrieve user63 conversations and last message for each conversation:</p>

<pre><code>id  from_id     to_id   text    isread  isseen  created_at  updated_at 
23  224         63      a        0         0    2015-03-28 22:23:54     2015-03-28 22:23:54
20  63          225     b        0        0     2015-03-28 22:23:06     2015-03-28 22:23:06
16  225         63      hi       0        1     2015-03-28 22:21:32     2015-03-28 22:21:32
</code></pre>

<p>I thought of an idea, not sure though:</p>

<pre><code>$messages = Message::select('*')-&gt;
            from(DB::raw(""
(
(select *, to_id as theuser from `messages` where `to_id` = "".Auth::id()."" order by `created_at` desc)
union
(select *, from_id as theuser from `messages` where `from_id` = "".Auth::id()."" order by `created_at` desc) group by theuser
) as sub""))-&gt;
            groupBy('from_id')-&gt;orderBy('created_at', 'desc')-&gt;
            paginate(7);
</code></pre>",php|mysql|laravel,"<p>I found a solution myself, thanks everyone! :)</p>

<pre><code>$messages = Message::select('*')-&gt;
from(DB::raw(""
    ( 
      SELECT *,`from_id` as `theuser`
      FROM `messages` WHERE `to_id` = 63
      union
      SELECT *,`to_id` as `theuser`
      FROM `messages` WHERE `from_id` = 63
      order by `created_at` desc
    ) as `sub`""))-&gt;groupBy('theuser')-&gt;
                   orderBy('created_at', 'desc')-&gt;
                   paginate(7);
</code></pre>",2
29321354,"Messages table in MySQL, getting last message for each thread","<p>I am trying to get the last message from each conversation, the only problem is I am not using a conversations table.</p>

<p>I am using one messages table, my table columns looks like this:</p>

<pre><code>id  from_id     to_id   text    isread  isseen  created_at  updated_at 
</code></pre>

<p>Right now I am able to retrieve conversations like this:</p>

<pre><code>$messages = Message::select('*')-&gt;
                from(DB::raw(""(select * from `messages` where `to_id` = "".Auth::id()."" order by `created_at` desc) as sub""))-&gt;
                groupBy('from_id')-&gt;orderBy('created_at', 'desc')-&gt;
                paginate(7);
</code></pre>

<p>The only downside to this is I am not retrieving the last message for each conversation, I am retrieving the last message received.</p>

<p>How can I retrieve the last message of each conversation?</p>

<p>Example Retrieve user63 conversations and last message for each conversation:</p>

<pre><code>id  from_id     to_id   text    isread  isseen  created_at  updated_at 
23  224         63      a        0         0    2015-03-28 22:23:54     2015-03-28 22:23:54
20  63          225     b        0        0     2015-03-28 22:23:06     2015-03-28 22:23:06
16  225         63      hi       0        1     2015-03-28 22:21:32     2015-03-28 22:21:32
</code></pre>

<p>I thought of an idea, not sure though:</p>

<pre><code>$messages = Message::select('*')-&gt;
            from(DB::raw(""
(
(select *, to_id as theuser from `messages` where `to_id` = "".Auth::id()."" order by `created_at` desc)
union
(select *, from_id as theuser from `messages` where `from_id` = "".Auth::id()."" order by `created_at` desc) group by theuser
) as sub""))-&gt;
            groupBy('from_id')-&gt;orderBy('created_at', 'desc')-&gt;
            paginate(7);
</code></pre>",php|mysql|laravel,"<p>This must works too:
The difference in this approach is a self join with a little help from max() function like this:</p>

<pre><code>SELECT from_id, MAX(created_at) AS last FROM messages GROUP BY from_id
</code></pre>

<p>So:</p>

<pre><code>$pagedMessages = Message::select('*')-&gt;
  from(
    DB::raw(""
        messages AS m 
        JOIN (
            SELECT from_id, MAX(created_at) AS lm FROM messages GROUP BY from_id
        ) AS lm 
        ON lm.from_id = m.from_id AND lm.created_at = m.created_at 
    ""))-&gt;
paginate(7);
</code></pre>",2
41273284,INTEGER from sqlalchemy.dialects.mysql takes no parameters in its __init__ method?,"<p>I am attempting to create the models for my database and plan to use MySQL as the database. I want to create various attributes of the models unsigned MySQL <code>INTEGER</code>s and found articles which recommended importing the types from  <code>sqlalchemy.dialects.mysql</code>, such as <code>INTEGER</code>, <code>BOOLEAN</code>, <code>VARCHAR</code> in order to specify MySQL specific constraints.</p>

<p>Here's my attempt:</p>

<pre><code>import datetime

import sqlalchemy
from sqlalchemy.dialects.mysql import INTEGER, BOOLEAN, VARCHAR

from app_name import app, db

class User(db.Model):
    __tablename__ = 'User'
    id = db.Column(sqlalchemy.dialects.mysql.INTEGER(usigned=True), primary_key=True, autoincrement=True, nullable=False)
    realname = db.Column(VARCHAR(256), nullable=False)
    username = db.Column(VARCHAR(256), nullable=False)
    joined = db.Column(db.TIMESTAMP, default=datetime.datetime.now)
    email = db.Column(VARCHAR(255), nullable=False)
</code></pre>

<p>However, both variations of the line defining the <code>id</code> attribute, either:
<code>db.Column(sqlalchemy.dialects.mysql.INTEGER(usigned=True), primary_key=True, autoincrement=True, nullable=False)</code></p>

<p>or </p>

<p><code>db.Column(INTEGER(usigned=True), primary_key=True, autoincrement=True, nullable=False)</code></p>

<p>fail with some variation of the following errors/traceback:</p>

<pre><code>  File ""/Users/Username/Development/App_Name/app_name/models/__init__.py"", line 8, in &lt;module&gt;
    class User(db.Model):
  File ""/Users/Username/Development/App_Name/app_name/models/__init__.py"", line 10, in User
    id = db.Column(sqlalchemy.dialects.mysql.INTEGER(usigned=True), primary_key=True, autoincrement=True, nullable=False)
  File ""/Users/Username/Development/.virtualenvs/app_name/lib/python3.5/site-packages/sqlalchemy/dialects/mysql/types.py"", line 254, in __init__
    super(INTEGER, self).__init__(display_width=display_width, **kw)
  File ""/Users/Username/Development/.virtualenvs/app_name/lib/python3.5/site-packages/sqlalchemy/dialects/mysql/types.py"", line 54, in __init__
    super(_IntegerType, self).__init__(**kw)
  File ""/Users/Username/Development/.virtualenvs/app_name/lib/python3.5/site-packages/sqlalchemy/dialects/mysql/types.py"", line 24, in __init__
    super(_NumericType, self).__init__(**kw)
TypeError: object.__init__() takes no parameters
</code></pre>

<p>Any insight into why my attempts have failed?</p>",python|mysql|python-3.x|sqlalchemy|flask-sqlalchemy,"<p>In general you should be vigilant with the names of the attributes passed when you see an error like this.</p>

<p>What the error essentially says is <code>object.__init__</code> got an argument it wasn't expecting. This happens when you pass an argument to a <code>**kwargs</code> defined <code>__init__</code> that isn't processed and get sent up to <code>object.__init__</code> during a <code>super</code> call (for example). </p>

<p>Take the following snippet to reproduce a similar scenario:</p>

<pre><code>class ExampleINTEGER:
    def __init__(self, **kwargs):
        # if unsigned is passed, grab it
        self.unsigned = kwargs.pop('unsigned', None)
        # yada yada for the rest of the expected args
        # if it isn't found, it gets forwarded :/
        super().__init__(**kwargs)

&gt;&gt;&gt; ExampleINTEGER(unsigned=True)
&lt;__main__.ExampleINTEGER at 0x7f41a048f978&gt;
&gt;&gt;&gt; ExampleINTEGER(usigned=True)
TypeErrorTraceback (most recent call last)
&lt;ipython-input-15-4b996bd42b90&gt; in &lt;module&gt;()
----&gt; 1 ExampleINTEGER(usigned=True)

&lt;ipython-input-13-6e67a8d8cdde&gt; in __init__(self, **kwargs)
      4         self.unsigned = kwargs.pop('unsigned', None)
      5         # if it isn't found, it gets forwarded :/
----&gt; 6         super().__init__(**kwargs)

TypeError: object.__init__() takes no parameters
</code></pre>

<p>In your case, (as in the mock example I created) you misspelled <code>unsigned</code> with <code>usigned</code> :-)</p>",1
41345149,authentication form using Electron (Atom shell) and PHP+mysql server only,"<p>I want to authenticate users of my app, I know how to do it using php on client but Electron can't use PHP at client side</p>

<p>Is there a way to authenticate users from mysql in Electron's app?</p>

<p>I need something like <code>$_SESSION</code> (PHP)</p>

<p>Thanks for the help :D</p>",javascript|php|mysql|login|electron,"<p>First never authenticate on the client side. Always on server side. Use <a href=""http://php.net/manual/de/book.oauth.php"" rel=""nofollow noreferrer"">OAuth´s PHP Implementation</a> or write you own implementation. Then simply use node´s native https request and return json from your server, PHP script. Please do a lot more research on application design and security.</p>",0
