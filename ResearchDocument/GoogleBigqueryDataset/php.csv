id,title,body,tags,answers,score
25335547,MySQLi prepared statement within while loop,"<p>I'm attempting to execute 4 prepared statement within a <code>mysqli_fetch_row</code> while loop. Currently my code is outputting NULL or empty values for all queries. This is my first time using prepared statements and I am trying to convert my code from <code>mysql</code> queries to <code>mysqli</code>. My code is below:</p>

<pre><code>$users = mysqli_query($link, ""SELECT id FROM users WHERE approved = '1'"");
while ($user = mysqli_fetch_row($users)) {
    if ($twitter_username_query = mysqli_prepare($username_query, ""SELECT username FROM personas WHERE user_id = ?"")) {
        mysqli_stmt_bind_param($username_query, ""d"", $user[0]);
        mysqli_stmt_execute($username_query);
        mysqli_stmt_bind_result($username_query, $username);
        mysqli_stmt_fetch($username_query);
        mysqli_stmt_close($twitter_username_query);
    }
    if ($count_user_clicks = mysqli_prepare($count_user_clicks, ""SELECT count(distinct txid) FROM users_clicks WHERE user_id = ?"")) {
        mysqli_stmt_bind_param($count_user_clicks, ""d"", $user[0]);
        mysqli_stmt_execute($count_user_clicks);
        mysqli_stmt_bind_result($count_user_clicks, $user_clicks);
        mysqli_stmt_fetch($count_user_clicks);
        mysqli_stmt_close($count_user_clicks);
    }
    if ($count_user_installs = mysqli_prepare(""SELECT count(txid) FROM (SELECT txid FROM users_installs WHERE user_id = ? GROUP BY txid) table1"")) {
        mysqli_stmt_bind_param($count_user_installs, ""d"", $user[0]);
        mysqli_stmt_execute($count_user_installs);
        mysqli_stmt_bind_result($count_user_installs, $user_installs);
        mysqli_stmt_fetch($count_user_installs);
        mysqli_stmt_close($count_user_installs);
    }
    if ($calc_user_cost = mysqli_prepare($calc_user_cost, ""SELECT sum(earnings) FROM (SELECT max(cost) as earnings FROM users_clicks WHERE user_id = ? GROUP BY txid) table1"")) {
        mysqli_stmt_bind_param($calc_user_cost, ""d"", $user[0]);
        mysqli_stmt_execute($calc_user_cost);
        mysqli_stmt_bind_result($calc_user_cost, $user_cost);
        mysqli_stmt_fetch($calc_user_cost);
        mysqli_stmt_close($calc_user_cost);
    }
    if ($user_clicks == '0') {
        $user_conv = 0;
    } else {
        $user_conv = ($user_installs / $user_clicks) * 100;
    }
    echo ""&lt;tr&gt;"";
    echo ""&lt;td&gt;&lt;b&gt;"".$username.""&lt;/b&gt;&lt;/td&gt;"";
    echo ""&lt;td&gt;"".number_format($user_clicks).""&lt;/td&gt;"";
    echo ""&lt;td&gt;"".number_format($user_installs).""&lt;/td&gt;"";
    if ($user_installs[0] == '0') {
        echo ""&lt;td&gt;$0.00&lt;/td&gt;"";
    } else {
        echo ""&lt;td&gt;$"".number_format($user_cost / $user_installs, 2).""&lt;/td&gt;"";
    }
    echo ""&lt;td&gt;"".number_format($user_conv, 2).""%&lt;/td&gt;"";
    echo ""&lt;/tr&gt;"";
}
</code></pre>",php|mysqli,"<p>Use a single query that JOINs all the subqueries:</p>

<pre><code>SELECT u.id, p.username, IFNULL(c.clicks, 0) AS clicks, IFNULL(i.installs, 0) AS installs, IFNULL(e.earnings, 0) AS earnings
FROM users AS u
JOIN personas AS p ON p.user_id = u.id
LEFT JOIN (
    SELECT user_id, COUNT(DISTINCT txid) AS clicks
    FROM user_clicks
    GROUP BY user_id) AS c ON c.user_id = u.id
LEFT JOIN (
    SELECT user_id, COUNT(DISTINCT txid) AS installs
    FROM user_installs
    GROUP BY user_id) AS i ON i.user_id = u.id
LEFT JOIN (
    SELECT user_id, SUM(earnings) AS earnings
    FROM (SELECT user_id, txid, MAX(cost) AS earnings
          FROM user_clicks
          GROUP BY use_id, txid) AS table1
    GROUP BY user_id) AS e
WHERE u.approved = 1
</code></pre>",2
25599796,"How to fix error ""CDbCommand ... SQLSTATE[42000]: Syntax error or access violation: 1064""","<p>I get this error when I use sql request</p>

<pre><code>$query = ""SELECT SUM "".$fields.""
                  FROM tbl_report all_months
                  "".$joins.""
                  WHERE all_months.date &gt; '$from_date' 
                        AND all_months.date &lt; '$to_date' GROUP BY fio"";
</code></pre>

<p>but with operator Distinct it works</p>

<pre><code>$query = ""SELECT DISTINCT "".$fields.""
                  FROM tbl_report all_months
                  "".$joins.""
                  WHERE all_months.date &gt; '$from_date' 
                        AND all_months.date &lt; '$to_date' GROUP BY fio"";
</code></pre>",php|mysql|yii,"<p>Use open and close parenthesis on mysql <a href=""http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_sum"" rel=""nofollow"">sum()</a>:</p>

<pre><code>$query = ""SELECT SUM ("".$fields."") AS result_value
</code></pre>

<p>Note: As hanky has said in the comments, it might not work as expected if the value of <code>$fields</code> contains comma separated list of column names.</p>

<p>If it is indeed, then you need to use <code>+</code> instead of <code>,</code>:</p>

<pre><code>$fields = str_replace(',', '+', $fields);
</code></pre>",2
25618777,"PHP: Merge multi dimensional arrays, grouping by a certain key","<p>I have some arrays like this:</p>

<pre><code>array(
    'id' =&gt; 1,
    'title' =&gt; 'title1',
    'name' =&gt; 'name1',
    'count' =&gt; 2
)
array(
    'id' =&gt; 1,
    'title' =&gt; 'title1',
    'name' =&gt; 'name2',
    'count' =&gt; 3
)
array(
    'id' =&gt; 2,
    'title' =&gt; 'title2',
    'name' =&gt; 'name1',
    'count' =&gt; 2
)
</code></pre>

<p>I want to merge them so that arrays with same <code>id</code> and <code>title</code> would be merged. The result should be like:</p>

<pre><code>array(
    'id' =&gt; 1,
    'title' =&gt; 'title1',
    'name' =&gt; array('name1', 'name2'),
    'count' =&gt; array(2, 3)
)
array(
    'id' =&gt; 2,
    'title' =&gt; 'title2',
    'name' =&gt; 'name1',
    'count' =&gt; 2
)
</code></pre>

<p>Or</p>

<pre><code>array(
    'id' =&gt; 1,
    'title' =&gt; 'title1',
    'name' =&gt; 'name1, name2',
    'count' =&gt; '2, 3'
)
array(
    'id' =&gt; 2,
    'title' =&gt; 'title2',
    'name' =&gt; 'name1',
    'count' =&gt; 2
)
</code></pre>

<p>Or</p>

<pre><code>array(
    'id' =&gt; 1,
    'title' =&gt; 'title1',
    'name1' =&gt; 2,
    'name2' =&gt; 3
)
array(
    'id' =&gt; 2,
    'title' =&gt; 'title2',
    'name1' =&gt; 2
)
</code></pre>

<p><code>array_merge_recursive()</code> will expand all the keys, instead of grouping. (All arrays could also be the form of objects.)</p>

<p><strong>Original Problem</strong></p>

<p>Actually it's a query result from MySQL database, where I used <code>COUNT</code>, <code>GROUP BY</code> and <code>JOIN</code> to generate the three arrays above. Since all MySQL queries have the structure of single rows, and the query results cannot contain subgroup type, some result rows have the same <code>id</code> and <code>title</code>. For now I'm thinking processing those results in PHP.</p>

<p>If you have some better ideas other than this, please also write it out.</p>",php|mysql|sql|arrays|group-by,"<p>Here is the code</p>

<pre><code>&lt;?php

$data=array(array(
    'id' =&gt; 1,
    'title' =&gt; 'title1',
    'name' =&gt; 'name1',
    'count' =&gt; 2
),
array(
    'id' =&gt; 1,
    'title' =&gt; 'title1',
    'name' =&gt; 'name2',
    'count' =&gt; 3
),
array(
    'id' =&gt; 2,
    'title' =&gt; 'title2',
    'name' =&gt; 'name1',
    'count' =&gt; 2
));

$result=array();

foreach($data AS $item)
{
    $key=$item['id'].'_'.$item['title'];

    if(!isset($result[$key]))
    {
        $result[$key]=array(
            'id'=&gt;$item['id'],
            'title'=&gt;$item['title'],
            'name'=&gt;array(),
            'count'=&gt;array()
        );
    }

    $result[$key]['name'][]=$item['name'];
    $result[$key]['count'][]=$item['count'];
}

print_r($result);
</code></pre>

<p>and here is the result</p>

<pre><code>Array
(
    [1_title1] =&gt; Array
        (
            [id] =&gt; 1
            [title] =&gt; title1
            [name] =&gt; Array
                (
                    [0] =&gt; name1
                    [1] =&gt; name2
                )

            [count] =&gt; Array
                (
                    [0] =&gt; 2
                    [1] =&gt; 3
                )

        )

    [2_title2] =&gt; Array
        (
            [id] =&gt; 2
            [title] =&gt; title2
            [name] =&gt; Array
                (
                    [0] =&gt; name1
                )

            [count] =&gt; Array
                (
                    [0] =&gt; 2
                )

        )

)
</code></pre>",1
25659119,Can file_get_contents() return HTML on 4xx?,"<p>I need to send a POST request from PHP to a remote HTTPS address, which returns a JSON.</p>

<p>I've used the following code:</p>

<pre><code>    //$url = ...
    $data = array('username' =&gt; $username, 'password' =&gt; $passwort);

    $options = array(
        'http' =&gt; array(
            'header'  =&gt; ""Content-type: application/x-www-form-urlencoded\r\n"",
            'method'  =&gt; 'POST',
            'content' =&gt; http_build_query($data),
        ),
    );
    $context  = stream_context_create($options);

    $result = file_get_contents($url, false, $context);
</code></pre>

<p>However at the last line the function fails with a <code>failed to open stream: HTTP request failed! HTTP/1.1 403 FORBIDDEN</code> error. </p>

<p>The server also sends an explanation in HTML format, but I have no idea how to access it through <code>file_get_contents</code>. Help?</p>

<p>EDIT: I will use cURL instead.</p>",php|post|file-get-contents,"<p>As far as I know it is not possible. But if you use an HTTP client like Guzzle you will be able to perform this request very easy and handle errors gracefully. Also Guzzle uses cURL under the hood so you don't have to deal with it directly!</p>

<p>Send your POST request like this:</p>

<pre><code>$client = new GuzzleHttp\Client();
$response = $client-&gt;post($url, [
    'body' =&gt; [
        'username' =&gt; $username,
        'password' =&gt; $password
    ]
]);

echo $response-&gt;getStatusCode();           // 200
echo $response-&gt;getHeader('content-type'); // 'application/json; charset=utf8'
echo $response-&gt;getBody();                 // {""type"":""User""...'
var_export($response-&gt;json());             // Outputs the JSON decoded data
</code></pre>

<p>Because you are placing the username and password in the body array it will automatically be url encoded! </p>

<p>You will be able to deal with errors in an OO way and get the body of the 4xx response if the response exists:</p>

<pre><code>try {
    $client-&gt;get('https://github.com/_abc_123_404');
} catch (RequestException $e) {
    echo $e-&gt;getRequest();
    if ($e-&gt;hasResponse()) {
        echo $e-&gt;getResponse();
    }
}
</code></pre>

<p>See the <a href=""http://guzzle.readthedocs.org/en/latest/index.html"" rel=""nofollow"">documentation</a> for more information.</p>",2
25546560,How to modify timestamp?,"<p>Why it dosn't work with timestamp? </p>

<pre><code>$date = date_create('@1409221272');
date_modify($date, '+1 day');
echo date_format($date, 'Y-m-d H:i:s');
</code></pre>

<p>This works </p>

<pre><code>$date = date_create('28-08-2014 13:20:00');
date_modify($date, '+1 day');
echo date_format($date, 'Y-m-d H:i:s');
</code></pre>",php|timestamp,"<p>You can use this to create a DateTime object from a timestamp:</p>

<pre><code>$date = date_create();
date_timestamp_set($date, 1171502725);
date_modify($date, '+1 day');
</code></pre>

<p>Source: <a href=""http://php.net/manual/en/datetime.settimestamp.php"" rel=""nofollow"">http://php.net/manual/en/datetime.settimestamp.php</a></p>",0
25533355,WordPress have_posts returns false but should return true,"<p>In the WordPress theme I have, when a contact form is completed a message is written on the page but not at the location I want it to be. But when changing the location of the message in the PHP code, the paragraph that goes with the contact form (written in an article) doesn't show up anymore. In fact, I think that the <code>have_posts</code> method returns false and so the <code>php_content</code> method isn't called.</p>

<p>Here is the original code :</p>

<pre><code>&lt;div id=""main"" class=""site-main container_16""&gt;
        &lt;div class=""inner""&gt;
            &lt;div id=""primary"" class=""grid_11 suffix_1""&gt;

            &lt;?php if ( have_posts() ) while ( have_posts() ) : the_post(); ?&gt;
                    &lt;?php the_content(); ?&gt;
                &lt;?php endwhile; // end of the loop. ?&gt;

                &lt;?php if(isset($emailSent) &amp;&amp; $emailSent == true) { ?&gt;
                    &lt;div class=""alert green""&gt;
                        &lt;?php _e( 'Thanks, your email was sent successfully.', 'wplook' ); ?&gt;
                    &lt;/div&gt;
                &lt;?php } else { ?&gt;
                    &lt;?php if(isset($hasError) ) { ?&gt;
                        &lt;p class=""error""&gt;&lt;?php _e( 'Sorry, an error occured.', 'wplook' ); ?&gt;&lt;p&gt;
                    &lt;?php } ?&gt;

                    &lt;form action=""&lt;?php the_permalink(); ?&gt;"" id=""contact-form"" method=""post""&gt; ...
</code></pre>

<p>And here is how I want it to be :</p>

<pre><code>&lt;div id=""main"" class=""site-main container_16""&gt;
        &lt;div class=""inner""&gt;
            &lt;div id=""primary"" class=""grid_11 suffix_1""&gt;

                &lt;?php if(isset($emailSent) &amp;&amp; $emailSent == true) { ?&gt;
                    &lt;div class=""alert green""&gt;
                        &lt;?php _e( 'Thanks, your email was sent successfully.', 'wplook' ); ?&gt;
                    &lt;/div&gt;
                &lt;?php } else { ?&gt;
                    &lt;?php if(isset($hasError) ) { ?&gt;
                        &lt;p class=""error""&gt;&lt;?php _e( 'Sorry, an error occured.', 'wplook' ); ?&gt;&lt;p&gt;
                    &lt;?php } ?&gt;

            &lt;?php if ( have_posts() ) while ( have_posts() ) : the_post(); ?&gt;
                    &lt;?php the_content(); ?&gt;
                &lt;?php endwhile; // end of the loop. ?&gt;

                    &lt;form action=""&lt;?php the_permalink(); ?&gt;"" id=""contact-form"" method=""post""&gt;...
</code></pre>

<p>As you can see, I only changed the location of the confirmation message. But in the second way, the condition with the <code>have_posts</code> does not seem to be true since the text I wrote in the article does not show up.</p>

<p>Can someone help me with this issue please ?</p>

<p>Thanks a lot !</p>

<p>Edit:</p>

<p><code>var_dump($wp_query)</code> displays this:</p>

<p>object(WP_Query)#195 (49) { [""query""]=> array(2) { [""page""]=> string(0) """" [""pagename""]=> string(22) ""accueil/nous-rejoindre"" } [""query_vars""]=> array(62) { [""page""]=> int(0) [""pagename""]=> string(14) ""nous-rejoindre"" [""error""]=> string(0) """" [""m""]=> string(0) """" [""p""]=> int(0) [""post_parent""]=> string(0) """" [""subpost""]=> string(0) """" [""subpost_id""]=> string(0) """" [""attachment""]=> string(0) """" [""attachment_id""]=> int(0) [""name""]=> string(14) ""nous-rejoindre"" [""static""]=> string(0) """" [""page_id""]=> int(0) [""second""]=> string(0) """" [""minute""]=> string(0) """" [""hour""]=> string(0) """" [""day""]=> int(0) [""monthnum""]=> int(0) [""year""]=> int(0) [""w""]=> int(0) [""category_name""]=> string(0) """" [""tag""]=> string(0) """" [""cat""]=> string(0) """" [""tag_id""]=> string(0) """" [""author""]=> string(0) """" [""author_name""]=> string(0) """" [""feed""]=> string(0) """" [""tb""]=> string(0) """" [""paged""]=> int(0) [""comments_popup""]=> string(0) """" [""meta_key""]=> string(0) """" [""meta_value""]=> string(0) """" [""preview""]=> string(0) """" [""s""]=> string(0) """" [""sentence""]=> string(0) """" [""fields""]=> string(0) """" [""menu_order""]=> string(0) """" [""category__in""]=> array(0) { } [""category__not_in""]=> array(0) { } [""category__and""]=> array(0) { } [""post__in""]=> array(0) { } [""post__not_in""]=> array(0) { } [""tag__in""]=> array(0) { } [""tag__not_in""]=> array(0) { } [""tag__and""]=> array(0) { } [""tag_slug__in""]=> array(0) { } [""tag_slug__and""]=> array(0) { } [""post_parent__in""]=> array(0) { } [""post_parent__not_in""]=> array(0) { } [""author__in""]=> array(0) { } [""author__not_in""]=> array(0) { } [""ignore_sticky_posts""]=> bool(false) [""suppress_filters""]=> bool(false) [""cache_results""]=> bool(true) [""update_post_term_cache""]=> bool(true) [""update_post_meta_cache""]=> bool(true) [""post_type""]=> string(0) """" [""posts_per_page""]=> int(10) [""nopaging""]=> bool(false) [""comments_per_page""]=> string(2) ""50"" [""no_found_rows""]=> bool(false) [""order""]=> string(4) ""DESC"" } [""tax_query""]=> NULL [""meta_query""]=> object(WP_Meta_Query)#75 (2) { [""queries""]=> array(0) { } [""relation""]=> NULL } [""date_query""]=> bool(false) [""queried_object""]=> object(WP_Post)#74 (24) { [""ID""]=> int(28) [""post_author""]=> string(1) ""1"" [""post_date""]=> string(19) ""2014-07-24 12:51:54"" [""post_date_gmt""]=> string(19) ""2014-07-24 11:51:54"" [""post_content""]=> string(1257) ""Rejoindre WiN France c’est...[content of my page]"" [""post_title""]=> string(14) ""Nous rejoindre"" [""post_excerpt""]=> string(0) """" [""post_status""]=> string(7) ""publish"" [""comment_status""]=> string(4) ""open"" [""ping_status""]=> string(6) ""closed"" [""post_password""]=> string(0) """" [""post_name""]=> string(14) ""nous-rejoindre"" [""to_ping""]=> string(0) """" [""pinged""]=> string(0) """" [""post_modified""]=> string(19) ""2014-07-26 18:06:47"" [""post_modified_gmt""]=> string(19) ""2014-07-26 17:06:47"" [""post_content_filtered""]=> string(0) """" [""post_parent""]=> int(8) [""guid""]=> string(41) ""<a href=""http://www.win-france.org/win/?page_id=28"" rel=""nofollow"">http://www.win-france.org/win/?page_id=28</a>"" [""menu_order""]=> int(0) [""post_type""]=> string(4) ""page"" [""post_mime_type""]=> string(0) """" [""comment_count""]=> string(1) ""0"" [""filter""]=> string(3) ""raw"" } [""queried_object_id""]=> int(28) [""request""]=> string(172) ""SELECT winfrance_posts.* FROM winfrance_posts WHERE 1=1 AND (winfrance_posts.ID = '28') AND winfrance_posts.post_type = 'page' ORDER BY winfrance_posts.post_date DESC "" [""posts""]=> &amp;array(1) { [0]=> object(WP_Post)#73 (24) { [""ID""]=> int(28) [""post_author""]=> string(1) ""1"" [""post_date""]=> string(19) ""2014-07-24 12:51:54"" [""post_date_gmt""]=> string(19) ""2014-07-24 11:51:54"" [""post_content""]=> string(1257) ""Rejoindre WiN France c’est...[content of my page]"" [""post_title""]=> string(14) ""Nous rejoindre"" [""post_excerpt""]=> string(0) """" [""post_status""]=> string(7) ""publish"" [""comment_status""]=> string(4) ""open"" [""ping_status""]=> string(6) ""closed"" [""post_password""]=> string(0) """" [""post_name""]=> string(14) ""nous-rejoindre"" [""to_ping""]=> string(0) """" [""pinged""]=> string(0) """" [""post_modified""]=> string(19) ""2014-07-26 18:06:47"" [""post_modified_gmt""]=> string(19) ""2014-07-26 17:06:47"" [""post_content_filtered""]=> string(0) """" [""post_parent""]=> int(8) [""guid""]=> string(41) ""[link of my page]"" [""menu_order""]=> int(0) [""post_type""]=> string(4) ""page"" [""post_mime_type""]=> string(0) """" [""comment_count""]=> string(1) ""0"" [""filter""]=> string(3) ""raw"" } } [""post_count""]=> int(1) [""current_post""]=> int(-1) [""in_the_loop""]=> bool(false) [""post""]=> object(WP_Post)#73 (24) { [""ID""]=> int(28) [""post_author""]=> string(1) ""1"" [""post_date""]=> string(19) ""2014-07-24 12:51:54"" [""post_date_gmt""]=> string(19) ""2014-07-24 11:51:54"" [""post_content""]=> string(1257) ""Rejoindre WiN France c’est...[content of my page]"" [""post_title""]=> string(14) ""Nous rejoindre"" [""post_excerpt""]=> string(0) """" [""post_status""]=> string(7) ""publish"" [""comment_status""]=> string(4) ""open"" [""ping_status""]=> string(6) ""closed"" [""post_password""]=> string(0) """" [""post_name""]=> string(14) ""nous-rejoindre"" [""to_ping""]=> string(0) """" [""pinged""]=> string(0) """" [""post_modified""]=> string(19) ""2014-07-26 18:06:47"" [""post_modified_gmt""]=> string(19) ""2014-07-26 17:06:47"" [""post_content_filtered""]=> string(0) """" [""post_parent""]=> int(8) [""guid""]=> string(41) ""<a href=""http://www.win-france.org/win/?page_id=28"" rel=""nofollow"">http://www.win-france.org/win/?page_id=28</a>"" [""menu_order""]=> int(0) [""post_type""]=> string(4) ""page"" [""post_mime_type""]=> string(0) """" [""comment_count""]=> string(1) ""0"" [""filter""]=> string(3) ""raw"" } [""comment_count""]=> int(0) [""current_comment""]=> int(-1) [""found_posts""]=> int(1) [""max_num_pages""]=> int(0) [""max_num_comment_pages""]=> int(0) [""is_single""]=> bool(false) [""is_preview""]=> bool(false) [""is_page""]=> bool(true) [""is_archive""]=> bool(false) [""is_date""]=> bool(false) [""is_year""]=> bool(false) [""is_month""]=> bool(false) [""is_day""]=> bool(false) [""is_time""]=> bool(false) [""is_author""]=> bool(false) [""is_category""]=> bool(false) [""is_tag""]=> bool(false) [""is_tax""]=> bool(false) [""is_search""]=> bool(false) [""is_feed""]=> bool(false) [""is_comment_feed""]=> bool(false) [""is_trackback""]=> bool(false) [""is_home""]=> bool(false) [""is_404""]=> bool(false) [""is_comments_popup""]=> bool(false) [""is_paged""]=> bool(false) [""is_admin""]=> bool(false) [""is_attachment""]=> bool(false) [""is_singular""]=> bool(true) [""is_robots""]=> bool(false) [""is_posts_page""]=> bool(false) [""is_post_type_archive""]=> bool(false) [""query_vars_hash""]=> string(32) ""763460f55e15fb6827b2ee25a60c558c"" [""query_vars_changed""]=> bool(false) [""thumbnails_cached""]=> bool(false) [""stopwords"":""WP_Query"":private]=> NULL }</p>",php|wordpress,"<p>hiii, i tried your both codes and it is giving post content</p>

<p>I tried following code, </p>

<pre><code>&lt;div id=""main"" class=""site-main container_16""&gt;
        &lt;div class=""inner""&gt;
            &lt;div id=""primary"" class=""grid_11 suffix_1""&gt;

                &lt;?php if(isset($emailSent) &amp;&amp; $emailSent == true) { ?&gt;
                    &lt;div class=""alert green""&gt;
                        &lt;?php _e( 'Thanks, your email was sent successfully.', 'wplook' ); ?&gt;
                    &lt;/div&gt;
                &lt;?php } else { ?&gt;
                    &lt;?php if(isset($hasError) ) { ?&gt;
                        &lt;p class=""error""&gt;&lt;?php _e( 'Sorry, an error occured.', 'wplook' ); ?&gt;&lt;p&gt;
                    &lt;?php } ?&gt;
              &lt;?php } ?&gt;

            &lt;?php if ( have_posts() ) while ( have_posts() ) : the_post(); ?&gt;
                    &lt;?php the_content(); ?&gt;
                &lt;?php endwhile; // end of the loop. ?&gt;

                    &lt;/div&gt;
        &lt;/div&gt;
        &lt;/div&gt;
</code></pre>",0
25766843,Pass checkbox values into an array using ajax to php,"<p>I am needing some help passing checkbox values into an array using ajax and retrieving the values in my controller. The following code is not working. I receive the error: ""Invalid argument supplied for foreach()"". Var_dump gives <code>string(42) ""Educator_Classes[]=1&amp;Educator_Classes;[]=3</code></p>

<p>Thanks for any help you can provide.</p>

<p>My html form input:</p>

<pre><code>&lt;input type=""checkbox"" id=""Educator_Classes[]"" name=""Educator_Classes"" class=""Educator_Classes"" value=""&lt;?php echo $Class_Number; ?&gt;""/&gt;
</code></pre>

<p>My jquery:</p>

<pre><code>$(""#Send_Invite"").click(function() {
    var form_data = {
        Opportunity_Id: $('#Opportunity_Id').val(),
        Educator_Id: $('#Educator_Id').val(),
        Educator_Classes: $('#Educator_Classes:checked').serialize(),
        ajax: '1'
    };

    $.ajax({
        url: ""&lt;?php echo site_url('schedule/update_educator_class'); ?&gt;"",
        type: 'POST',
        data: form_data,
        success: function(data) {
            $('#response').html(data);
        }
    });

    return false;
})
</code></pre>

<p>My controller:</p>

<pre><code>function update_educator_class() {
    $Educator_Id = $this-&gt;input-&gt;post('Educator_Id');
    $Opportunity_Id = $this-&gt;input-&gt;post('Opportunity_Id');
    $Educator_Classes = $this-&gt;input-&gt;post('Educator_Classes');

    foreach($Educator_Classes as $Educator_Class):
        $this-&gt;ion_auth_model-&gt;update_educator_class($Opportunity_Id, $Educator_Class, $Educator_Id);
    endforeach;
}
</code></pre>",php|jquery|ajax|codeigniter,"<p>The Solution is that you have to take the array of name attribute of checkbox.
 Like :</p>

<pre><code>&lt;input type=""checkbox"" id=""Educator_Classes[]"" name=""Educator_Classes[]"" class=""Educator_Classes"" value=""&lt;?php echo $Class_Number; ?&gt;""/&gt;
</code></pre>",2
25766843,Pass checkbox values into an array using ajax to php,"<p>I am needing some help passing checkbox values into an array using ajax and retrieving the values in my controller. The following code is not working. I receive the error: ""Invalid argument supplied for foreach()"". Var_dump gives <code>string(42) ""Educator_Classes[]=1&amp;Educator_Classes;[]=3</code></p>

<p>Thanks for any help you can provide.</p>

<p>My html form input:</p>

<pre><code>&lt;input type=""checkbox"" id=""Educator_Classes[]"" name=""Educator_Classes"" class=""Educator_Classes"" value=""&lt;?php echo $Class_Number; ?&gt;""/&gt;
</code></pre>

<p>My jquery:</p>

<pre><code>$(""#Send_Invite"").click(function() {
    var form_data = {
        Opportunity_Id: $('#Opportunity_Id').val(),
        Educator_Id: $('#Educator_Id').val(),
        Educator_Classes: $('#Educator_Classes:checked').serialize(),
        ajax: '1'
    };

    $.ajax({
        url: ""&lt;?php echo site_url('schedule/update_educator_class'); ?&gt;"",
        type: 'POST',
        data: form_data,
        success: function(data) {
            $('#response').html(data);
        }
    });

    return false;
})
</code></pre>

<p>My controller:</p>

<pre><code>function update_educator_class() {
    $Educator_Id = $this-&gt;input-&gt;post('Educator_Id');
    $Opportunity_Id = $this-&gt;input-&gt;post('Opportunity_Id');
    $Educator_Classes = $this-&gt;input-&gt;post('Educator_Classes');

    foreach($Educator_Classes as $Educator_Class):
        $this-&gt;ion_auth_model-&gt;update_educator_class($Opportunity_Id, $Educator_Class, $Educator_Id);
    endforeach;
}
</code></pre>",php|jquery|ajax|codeigniter,"<p>You have to use <code>[]</code> for name attribute and not for <code>id</code>, otherwise it can't act like an array</p>

<pre><code>&lt;input type=""checkbox"" id=""Educator_Classes"" name=""Educator_Classes[]"" class=""Educator_Classes"" value=""&lt;?php echo $Class_Number; ?&gt;""/&gt;
</code></pre>

<p>And also your jQuery code can be simpler:</p>

<pre><code>$(""#Send_Invite"").click(function() {
    var form_data = $(this).closest('form).serialize();
    form_data['ajax'] = 1;

    $.ajax({
        url: ""&lt;?php echo site_url('schedule/update_educator_class'); ?&gt;"",
        type: 'POST',
        data: form_data,
        success: function(data) {
            $('#response').html(data);
        }
    });

    return false;
});
</code></pre>

<p>To debut what's passed to <code>$Educator_Classes</code> you can do this:</p>

<pre><code>var_export($Educator_Classes);
</code></pre>",2
25780417,Jquery form success value using in if else,"<p>I was using the same code before and it was working well now it works but problem is returning value. I test the value which is returning from saving page its ""true"" but in if else no matter what else condition works.</p>

<pre><code>&lt;script&gt;
function save(){
$.ajax({
    type:'POST',
    url:'save.php',
    data:$('#form').serialize(),
    success: function (result){
        if (result==""true"")
        {
            $(""#message"").html(""saved!"");
        }
        else
        {
            $(""#message"").html(""oops!"");
        }
    }
});
&lt;/script&gt;
</code></pre>

<p>Edit: Php save the form to mysql and return true I can get it with alert(result) but if else condition doesn't care about it. Jquery ver. jquery-2.1.1.min.js</p>

<pre><code>&lt;?php
$save=mysql_query(""Insert into table_pr(textval) Values ('$textval')"");
        if($save&gt;0)
        {
            json_encode(""true"");
        }
        else
        {
            json_encode(""false"");
        }
?&gt;
</code></pre>

<p><strong>Solution:</strong> <code>dataType: 'json'</code>, this line is missing and saving page I used json_encode(""true""); and it works now thanks for help.</p>",javascript|php|jquery,"<p><strong>FIRST</strong></p>

<p>PHP's mysql_query returns either TRUE for success or FALSE on fail
 try true for 0 and false for the else statement </p>

<p><strong>SECOND</strong></p>

<p>why do you wanna go with that solution</p>

<pre><code>&lt;?php
if(mysql_query(""Insert into table_pr(textval) Values ('$textval')""))
{
            echo ""true"";
}
        else
        {
            echo ""false"";
        }
?&gt;
</code></pre>

<p>Thats how it should be. Code neatly!</p>",0
25780417,Jquery form success value using in if else,"<p>I was using the same code before and it was working well now it works but problem is returning value. I test the value which is returning from saving page its ""true"" but in if else no matter what else condition works.</p>

<pre><code>&lt;script&gt;
function save(){
$.ajax({
    type:'POST',
    url:'save.php',
    data:$('#form').serialize(),
    success: function (result){
        if (result==""true"")
        {
            $(""#message"").html(""saved!"");
        }
        else
        {
            $(""#message"").html(""oops!"");
        }
    }
});
&lt;/script&gt;
</code></pre>

<p>Edit: Php save the form to mysql and return true I can get it with alert(result) but if else condition doesn't care about it. Jquery ver. jquery-2.1.1.min.js</p>

<pre><code>&lt;?php
$save=mysql_query(""Insert into table_pr(textval) Values ('$textval')"");
        if($save&gt;0)
        {
            json_encode(""true"");
        }
        else
        {
            json_encode(""false"");
        }
?&gt;
</code></pre>

<p><strong>Solution:</strong> <code>dataType: 'json'</code>, this line is missing and saving page I used json_encode(""true""); and it works now thanks for help.</p>",javascript|php|jquery,"<p>The string contains the "" symbol at the start and end, so check if the string is equal to '""true""' instead.</p>",0
25544808,"Sorting foreach by date give Warning: usort() expects parameter 1 to be array, null given in","<p>I have a .php that retrieve fields from my Joomla database and then echo them with a foreach function:</p>

<pre><code>&lt;?php                   
  $jquery1 = ""SELECT `fulltext`,alias,metakey,publish_up,metadesc FROM xxx_content  WHERE catid=22 AND state= '1'"";
  $jdb1-&gt;setQuery( $jquery1 );
  $jfeed1= $jdb1-&gt;loadObjectList();
  foreach ($jfeed1 as $jitem1):
?&gt;
&lt;li&gt;
 &lt;div&gt;
  &lt;?php                                 
  $oldLocale = setlocale(LC_TIME, 'en_US');
  echo strftime(""%a %d %b %Y"", strtotime($jitem1-&gt;publish_up)); 
  setlocale(LC_TIME, $oldLocale);
  ?&gt;
 &lt;/div&gt;
 &lt;div&gt;&lt;?php echo $jitem1-&gt;fulltext; ?&gt;&lt;/div&gt;
&lt;/li&gt; 
&lt;?php endforeach; ?&gt;
</code></pre>

<p>However I would like to sort the foreach function by date, I have tried two different way of doing it (based on other SE questions) but each time I get this warning:</p>

<pre><code>Warning: usort() expects parameter 1 to be array, null given in...
</code></pre>

<p>Here is my first try:</p>

<pre><code>$jfeed1= $jdb1-&gt;loadObjectList();
function date_compare($a, $b)
{
   $t1 = strtotime($a['publish_up']);
   $t2 = strtotime($a['publish_up']);
   return $t1 - $t2;
}    
usort($jitem1, 'date_compare');
foreach ($jfeed1 as $jitem1):
</code></pre>

<p>And here was my second try:</p>

<pre><code>$jfeed1= $jdb1-&gt;loadObjectList();
usort($jfeed1-&gt;publish_up, function($a, $b) {
$date1 = DateTime::createFromFormat('Y-m-d H:i:s', $a);
$date2 = DateTime::createFromFormat('Y-m-d H:i:s', $b);
return $date1 &gt; $date2;
});
foreach ($jfeed1 as $jitem1):
</code></pre>

<p>I've ""learned"" php just by looking at codes and tuto, so I am missing a lot of fondamental notions that why I don't understand what I am supposed to do to solve this warning. Thanks for your help! </p>

<p>EDIT 1:
The function</p>

<pre><code>&lt;?php
    var_dump($jfeed1)
?&gt;
</code></pre>

<p>gives me for the first item:</p>

<pre><code>array(22) { [0]=&gt; object(stdClass)#318 (5) { [""fulltext""]=&gt; string(212) ""Yesterday ..."" [""alias""]=&gt; string(3) ""237"" [""metakey""]=&gt; string(7) ""Romania"" [""publish_up""]=&gt; string(19) ""2011-11-15 09:06:39"" }
</code></pre>

<p>EDIT 2 </p>

<pre><code>$jfeed1= $jdb1-&gt;loadObjectList();

function date_compare($a, $b)
{
   $t1 = strtotime($a['publish_up']);
   $t2 = strtotime($b['publish_up']);
   return $t1 - $t2;
}    
usort($jfeed1, 'date_compare');
foreach ($jfeed1 as $jitem1):
</code></pre>",php|sorting|joomla|foreach|usort,"<p>You can sort out each array entry by the date directly in the query with:</p>

<pre><code>ORDER BY publish_up DESC (descending order)
ORDER BY publish_up ASC (ascending order)
</code></pre>

<p>As in: </p>

<pre><code>$jquery1 = ""SELECT `fulltext`,alias,metakey,publish_up,metadesc FROM xxx_content  WHERE catid=22 AND state= '1' ORDER BY publish_up ASC"";
</code></pre>

<p>If you want to keep this PHP function <code>date_compare</code> then you have to replace:</p>

<pre><code>$a['publish_up']
</code></pre>

<p>by</p>

<pre><code>$a-&gt;publish_up
</code></pre>

<p>As in:</p>

<pre><code>$jfeed1= $jdb1-&gt;loadObjectList();
function date_compare($a, $b)
{
   $t1 = strtotime($a-&gt;publish_up);
   $t2 = strtotime($b-&gt;publish_up);
   return $t1 - $t2;
}    
usort($jfeed1, 'date_compare');
foreach ($jfeed1 as $jitem1):
</code></pre>

<p><code>return $t1 - $t2;</code> is ascending</p>

<p><code>return $t2 - $t1;</code> is descending</p>",1
31970499,I cant find a way to print my array,"<p>Hey stackoverflow people, can you help me with this script. I dont know how to print this type of array with javascript for. Here is how my array looks like:</p>

<pre><code>Array
(
    [13] =&gt; John Freeman
    [14] =&gt; Jim Golish
    [36] =&gt; Tim Morgan
    [38] =&gt; Lusy Jay
)
</code></pre>

<p>And here is my javascript:</p>

<pre><code>  var myObject = JSON.parse(httpxml.responseText);  // Received the data 

    var str=""&lt;table width='50%'  align=center&gt;&lt;tr&gt;&lt;th align='left' bgcolor='#ffff00'&gt;ID&lt;/th&gt;&lt;th align='left' bgcolor='#ffff00'&gt;Name&lt;/th&gt;&lt;/tr&gt;"";
  for(i=0;i&lt;myObject.data.length;i++)
  { 
    str = str + ""&lt;tr&gt;&lt;td&gt;"" + myObject.data[i] + "" &lt;/td&gt;&lt;td&gt;""+ myObject.data[i] + ""&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;""
  }
</code></pre>

<p>Here is how JSON encode look like:</p>

<pre><code>{""data"":{""13"":""John Freeman"",""14"":""Jim Golish"",""36"":""Tim Morgan"",""38""
:""Lusy Jay""}} 
</code></pre>

<p>How to print my type of array  with that javascript <code>for(i=0;i&lt;myObject.data.length;i++)</code>?</p>",javascript|php|arrays|json,"<p>Try </p>

<pre><code>for(i=0;i&lt;Object.keys(myObject.data).length;i++)
</code></pre>",1
31970499,I cant find a way to print my array,"<p>Hey stackoverflow people, can you help me with this script. I dont know how to print this type of array with javascript for. Here is how my array looks like:</p>

<pre><code>Array
(
    [13] =&gt; John Freeman
    [14] =&gt; Jim Golish
    [36] =&gt; Tim Morgan
    [38] =&gt; Lusy Jay
)
</code></pre>

<p>And here is my javascript:</p>

<pre><code>  var myObject = JSON.parse(httpxml.responseText);  // Received the data 

    var str=""&lt;table width='50%'  align=center&gt;&lt;tr&gt;&lt;th align='left' bgcolor='#ffff00'&gt;ID&lt;/th&gt;&lt;th align='left' bgcolor='#ffff00'&gt;Name&lt;/th&gt;&lt;/tr&gt;"";
  for(i=0;i&lt;myObject.data.length;i++)
  { 
    str = str + ""&lt;tr&gt;&lt;td&gt;"" + myObject.data[i] + "" &lt;/td&gt;&lt;td&gt;""+ myObject.data[i] + ""&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;""
  }
</code></pre>

<p>Here is how JSON encode look like:</p>

<pre><code>{""data"":{""13"":""John Freeman"",""14"":""Jim Golish"",""36"":""Tim Morgan"",""38""
:""Lusy Jay""}} 
</code></pre>

<p>How to print my type of array  with that javascript <code>for(i=0;i&lt;myObject.data.length;i++)</code>?</p>",javascript|php|arrays|json,"<p>Assuming you want to print it to the console you can just use</p>

<pre><code>console.log(JSON.stringify(myObject, null, 2));
</code></pre>

<p>Which will pretty print your object.</p>

<p>Or did you want to display it as html in the page?</p>",1
31970499,I cant find a way to print my array,"<p>Hey stackoverflow people, can you help me with this script. I dont know how to print this type of array with javascript for. Here is how my array looks like:</p>

<pre><code>Array
(
    [13] =&gt; John Freeman
    [14] =&gt; Jim Golish
    [36] =&gt; Tim Morgan
    [38] =&gt; Lusy Jay
)
</code></pre>

<p>And here is my javascript:</p>

<pre><code>  var myObject = JSON.parse(httpxml.responseText);  // Received the data 

    var str=""&lt;table width='50%'  align=center&gt;&lt;tr&gt;&lt;th align='left' bgcolor='#ffff00'&gt;ID&lt;/th&gt;&lt;th align='left' bgcolor='#ffff00'&gt;Name&lt;/th&gt;&lt;/tr&gt;"";
  for(i=0;i&lt;myObject.data.length;i++)
  { 
    str = str + ""&lt;tr&gt;&lt;td&gt;"" + myObject.data[i] + "" &lt;/td&gt;&lt;td&gt;""+ myObject.data[i] + ""&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;""
  }
</code></pre>

<p>Here is how JSON encode look like:</p>

<pre><code>{""data"":{""13"":""John Freeman"",""14"":""Jim Golish"",""36"":""Tim Morgan"",""38""
:""Lusy Jay""}} 
</code></pre>

<p>How to print my type of array  with that javascript <code>for(i=0;i&lt;myObject.data.length;i++)</code>?</p>",javascript|php|arrays|json,"<p>you need to this format
Array
(
    '13' => John Freeman
    '14'=> Jim Golish
...
)</p>

<p>and make a print with a for</p>",1
31970499,I cant find a way to print my array,"<p>Hey stackoverflow people, can you help me with this script. I dont know how to print this type of array with javascript for. Here is how my array looks like:</p>

<pre><code>Array
(
    [13] =&gt; John Freeman
    [14] =&gt; Jim Golish
    [36] =&gt; Tim Morgan
    [38] =&gt; Lusy Jay
)
</code></pre>

<p>And here is my javascript:</p>

<pre><code>  var myObject = JSON.parse(httpxml.responseText);  // Received the data 

    var str=""&lt;table width='50%'  align=center&gt;&lt;tr&gt;&lt;th align='left' bgcolor='#ffff00'&gt;ID&lt;/th&gt;&lt;th align='left' bgcolor='#ffff00'&gt;Name&lt;/th&gt;&lt;/tr&gt;"";
  for(i=0;i&lt;myObject.data.length;i++)
  { 
    str = str + ""&lt;tr&gt;&lt;td&gt;"" + myObject.data[i] + "" &lt;/td&gt;&lt;td&gt;""+ myObject.data[i] + ""&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;""
  }
</code></pre>

<p>Here is how JSON encode look like:</p>

<pre><code>{""data"":{""13"":""John Freeman"",""14"":""Jim Golish"",""36"":""Tim Morgan"",""38""
:""Lusy Jay""}} 
</code></pre>

<p>How to print my type of array  with that javascript <code>for(i=0;i&lt;myObject.data.length;i++)</code>?</p>",javascript|php|arrays|json,"<p>Here you go:</p>

<p><div class=""snippet"" data-lang=""js"" data-hide=""false"">
<div class=""snippet-code"">
<pre class=""snippet-code-js lang-js prettyprint-override""><code>var data = {""data"":{""13"":""John Freeman"",""14"":""Jim Golish"",""36"":""Tim Morgan"",""38"":""Lusy Jay""}} ;


 var str=""&lt;table width='50%'  align=center&gt;&lt;tr&gt;&lt;th align='left' bgcolor='#ffff00'&gt;ID&lt;/th&gt;&lt;th align='left' bgcolor='#ffff00'&gt;Name&lt;/th&gt;&lt;/tr&gt;"";
  for(var key in data.data)
  { 
    str = str + ""&lt;tr&gt;&lt;td&gt;"" + key + "" &lt;/td&gt;&lt;td&gt;""+ data.data[key] + ""&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;"";
  }
document.write(str);</code></pre>
</div>
</div>
</p>",1
31970499,I cant find a way to print my array,"<p>Hey stackoverflow people, can you help me with this script. I dont know how to print this type of array with javascript for. Here is how my array looks like:</p>

<pre><code>Array
(
    [13] =&gt; John Freeman
    [14] =&gt; Jim Golish
    [36] =&gt; Tim Morgan
    [38] =&gt; Lusy Jay
)
</code></pre>

<p>And here is my javascript:</p>

<pre><code>  var myObject = JSON.parse(httpxml.responseText);  // Received the data 

    var str=""&lt;table width='50%'  align=center&gt;&lt;tr&gt;&lt;th align='left' bgcolor='#ffff00'&gt;ID&lt;/th&gt;&lt;th align='left' bgcolor='#ffff00'&gt;Name&lt;/th&gt;&lt;/tr&gt;"";
  for(i=0;i&lt;myObject.data.length;i++)
  { 
    str = str + ""&lt;tr&gt;&lt;td&gt;"" + myObject.data[i] + "" &lt;/td&gt;&lt;td&gt;""+ myObject.data[i] + ""&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;""
  }
</code></pre>

<p>Here is how JSON encode look like:</p>

<pre><code>{""data"":{""13"":""John Freeman"",""14"":""Jim Golish"",""36"":""Tim Morgan"",""38""
:""Lusy Jay""}} 
</code></pre>

<p>How to print my type of array  with that javascript <code>for(i=0;i&lt;myObject.data.length;i++)</code>?</p>",javascript|php|arrays|json,"<p>That is not a javascript array, your data variable is a javascript object, you should use</p>

<pre><code> for(var i in myObject.data)
</code></pre>",2
31970499,I cant find a way to print my array,"<p>Hey stackoverflow people, can you help me with this script. I dont know how to print this type of array with javascript for. Here is how my array looks like:</p>

<pre><code>Array
(
    [13] =&gt; John Freeman
    [14] =&gt; Jim Golish
    [36] =&gt; Tim Morgan
    [38] =&gt; Lusy Jay
)
</code></pre>

<p>And here is my javascript:</p>

<pre><code>  var myObject = JSON.parse(httpxml.responseText);  // Received the data 

    var str=""&lt;table width='50%'  align=center&gt;&lt;tr&gt;&lt;th align='left' bgcolor='#ffff00'&gt;ID&lt;/th&gt;&lt;th align='left' bgcolor='#ffff00'&gt;Name&lt;/th&gt;&lt;/tr&gt;"";
  for(i=0;i&lt;myObject.data.length;i++)
  { 
    str = str + ""&lt;tr&gt;&lt;td&gt;"" + myObject.data[i] + "" &lt;/td&gt;&lt;td&gt;""+ myObject.data[i] + ""&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;""
  }
</code></pre>

<p>Here is how JSON encode look like:</p>

<pre><code>{""data"":{""13"":""John Freeman"",""14"":""Jim Golish"",""36"":""Tim Morgan"",""38""
:""Lusy Jay""}} 
</code></pre>

<p>How to print my type of array  with that javascript <code>for(i=0;i&lt;myObject.data.length;i++)</code>?</p>",javascript|php|arrays|json,"<p>Your dealing with an object, not an <em>array</em>, so go with <code>for in</code></p>

<p><div class=""snippet"" data-lang=""js"" data-hide=""false"">
<div class=""snippet-code"">
<pre class=""snippet-code-js lang-js prettyprint-override""><code>var data = {""data"":{""13"":""John Freeman"",""14"":""Jim Golish"",""36"":""Tim Morgan"",""38""
:""Lusy Jay""}} ;

for(var key in data.data){
  console.log(key);
  console.log(data.data[key]);
  }</code></pre>
</div>
</div>
</p>",2
31659255,"PHP: Form emailing displaying some fields, not others?","<p>This isn't particularly my domain. I'm helping a friend and I've been attempting to logic out  the issue through common sense and Google, but I can't figure it out.</p>

<p>In short: Friend has a form on his website. Form goes through a PHP script and emails him the results whenever someone fills it out. It has worked fine for awhile. He recently added some new fields and now all of a sudden some of the fields do not return results through the PHP script when submitted via the form.</p>

<p>Here is the HTML for the form:</p>

<pre><code>        &lt;div id=""contact-area""&gt;

            &lt;form method=""post"" action=""contactengine.php""&gt;
                &lt;table&gt;
                    &lt;tr&gt;
                        &lt;td class=""left""&gt;&lt;label for=""Name""&gt;Full Name:&lt;/label&gt;&lt;/td&gt;
                        &lt;td&gt;&lt;input type=""text"" name=""Name"" /&gt;&lt;/td&gt;
                    &lt;/tr&gt;
                    &lt;tr&gt;
                        &lt;td class=""left""&gt;&lt;label for=""EMT""&gt;EMT #:&lt;/label&gt;&lt;/td&gt;
                        &lt;td&gt;&lt;input type=""text"" name=""EMT"" /&gt;&lt;/td&gt;
                    &lt;/tr&gt;

                    &lt;tr&gt;
                        &lt;td class=""left""&gt;&lt;label for=""NREMT""&gt;NREMT #:&lt;/label&gt;&lt;/td&gt;
                        &lt;td&gt;&lt;input type=""text"" name=""NREMT"" /&gt;&lt;/td&gt;
                    &lt;/tr&gt;
                    &lt;tr&gt;
                        &lt;td class=""left""&gt;&lt;label for=""Email""&gt;Email:&lt;/label&gt;&lt;/td&gt;
                        &lt;td&gt;&lt;input type=""text"" name=""Email"" /&gt;&lt;/td&gt;
                    &lt;/tr&gt;
                    &lt;tr&gt;
                        &lt;td class=""left""&gt;&lt;label for=""Phone""&gt;Phone:&lt;/label&gt;&lt;/td&gt;
                        &lt;td&gt;&lt;input type=""text"" name=""Phone"" /&gt;&lt;/td&gt;
                    &lt;/tr&gt;
                    &lt;tr&gt;
                        &lt;td class=""left""&gt;&lt;label for=""Address""&gt;Full Address:&lt;/label&gt;&lt;/td&gt;
                        &lt;td&gt;&lt;textarea name=""Address"" rows=""10"" cols=""20""&gt;&lt;/textarea&gt;&lt;/td&gt;
                    &lt;/tr&gt;
                    &lt;tr&gt;            
                        &lt;td class=""left""&gt;&lt;label for=""Program""&gt;Program(s):&lt;/label&gt;&lt;/td&gt;
                        &lt;td&gt;&lt;input type=""radio"" value=""EMT NCCR"" name=""Program""/&gt;&lt;label&gt;EMT NCCR&lt;/label&gt;&lt;br /&gt;
                        &lt;input type=""radio"" value=""Paramedic NCCR"" name=""Program""/&gt;&lt;label&gt;Paramedic NCCR&lt;/label&gt;&lt;br /&gt;
                                    &lt;input type=""radio"" value=""10 hours ConEd"" name=""Program""/&gt;&lt;label&gt;10 hours ConEd&lt;/label&gt;&lt;br /&gt;
                                    &lt;input type=""radio"" value=""Snowbird EMS Conference"" name=""Program""/&gt;&lt;label&gt;Snowbird EMS Conference&lt;/label&gt;&lt;br /&gt;
                                    &lt;input type=""radio"" value=""AHA ACLS"" name=""Program""/&gt;&lt;label&gt;AHA ACLS&lt;/label&gt;&lt;br /&gt;
                                    &lt;input type=""radio"" value=""AHA PALS"" name=""Program""/&gt;&lt;label&gt;AHA PALS&lt;/label&gt;&lt;br /&gt;
    &lt;/tr&gt;

                        &lt;tr&gt;                
                        &lt;td class=""left""&gt;&lt;label for=""nccrtraining""&gt;Desired NCCR Training:&lt;/label&gt;&lt;/td&gt;
                        &lt;td&gt;&lt;input type=""radio"" value=""Online"" name=""nccrtraining"" /&gt;&lt;label&gt;Online&lt;/label&gt;&lt;br /&gt;
                            &lt;input type=""radio"" value=""DVD"" name=""nccrtraining""/&gt;&lt;label&gt;DVD&lt;/label&gt;&lt;br  /&gt;
                        &lt;input type=""radio"" value=""USB"" name=""nccrtraining""/&gt;&lt;label&gt;USB Thumbdrive&lt;/label&gt;&lt;/td&gt; 
                    &lt;/tr&gt;  
                    &lt;tr&gt;
                        &lt;td class=""left""&gt;&lt;label for=""Operating""&gt;Operating System:&lt;/label&gt;&lt;/td&gt;
                        &lt;td&gt;&lt;input type=""radio"" value=""Windows"" name=""Operating"" /&gt;&lt;label&gt;Windows&lt;/label&gt;&lt;br /&gt;
                            &lt;input type=""radio"" value=""Mac"" name=""Operating""/&gt;&lt;label&gt;Mac&lt;/label&gt;&lt;/td&gt;

                    &lt;/tr&gt;   
                    &lt;tr&gt;
                        &lt;td class=""left""&gt;&lt;label for=""emt20hournccpcoursedate""&gt;EMT 20-hour NCCP Course Date:&lt;/label&gt;&lt;/td&gt;
                        &lt;td&gt;
                        &lt;input type=""radio"" value=""September 26th, 2015 - 12:30PM"" name=""emt20hournccpcoursedate"" /&gt;&lt;label&gt;September 26th, 2015 - 12:30PM&lt;/label&gt;&lt;br /&gt;
            &lt;input type=""radio"" value=""October 17th, 2015 - 12:30PM"" name=""emt20hournccpcoursedate"" /&gt;&lt;label&gt;October 17th, 2015 - 12:30PM&lt;/label&gt;&lt;br /&gt;
                        &lt;input type=""radio"" value=""November 14th, 2015 12:30PM"" name=""emt20hournccpcoursedate"" /&gt;&lt;label&gt;November 14th, 2015 12:30PM&lt;/label&gt;&lt;br /&gt;
                        &lt;input type=""radio"" value=""December 5th, 2015 8:00AM"" name=""emt20hournccpcoursedate"" /&gt;&lt;label&gt;December 5th, 2015 8:00AM&lt;/label&gt;&lt;br /&gt;
                        &lt;input type=""radio"" value=""December 5th, 2015 10:30AM"" name=""emt20hournccpcoursedate"" /&gt;&lt;label&gt;December 5th, 2015 10:30AM&lt;/label&gt;&lt;br /&gt;
                       &lt;input type=""radio"" value=""December 5th, 2015 1:00PM"" name=""emt20hournccpcoursedate"" /&gt;&lt;label&gt;December 5th, 2015 1:00PM&lt;/label&gt;&lt;br /&gt;
    &lt;/tr&gt;
    &lt;tr&gt;                

&lt;/tr&gt;   
    &lt;tr&gt;
                        &lt;td class=""left""&gt;&lt;label for=""paramedic30hournccpcoursedate""&gt;Paramedic 30-hour NCCP Course Date:&lt;/label&gt;&lt;/td&gt;
                        &lt;td&gt;
                        &lt;input type=""radio"" value=""July 17th, 2015 - 8:30AM"" name=""paramedic30hournccpcoursedate"" /&gt;&lt;label&gt;July 17th, 2015 - 8:30AM&lt;/label&gt;&lt;br /&gt;
            &lt;input type=""radio"" value=""August 7th, 2015 - 8:30AM"" name=""paramedic30hournccpcoursedate"" /&gt;&lt;label&gt;August 7th, 2015 - 8:30AM&lt;/label&gt;&lt;br /&gt;
                        &lt;input type=""radio"" value=""August 28th, 2015 8:30AM"" name=""paramedic30hournccpcoursedate"" /&gt;&lt;label&gt;August 27th, 2015 8:30AM&lt;/label&gt;&lt;br /&gt;
                        &lt;input type=""radio"" value=""December 4th, 2015 8:30AM"" name=""paramedic30hournccpcoursedate"" /&gt;&lt;label&gt;December 4th, 2015 8:30AM&lt;/label&gt;&lt;br /&gt;
                        &lt;input type=""radio"" value=""January 14th, 2016 8:30AM"" name=""paramedic30hournccpcoursedate"" /&gt;&lt;label&gt;January 14th, 2016 8:30AM&lt;/label&gt;&lt;br /&gt;
                       &lt;input type=""radio"" value=""February 29th, 2016 8:30AM"" name=""paramedic30hournccpcoursedate"" /&gt;&lt;label&gt;February 29th, 2016 8:30AM&lt;/label&gt;&lt;br /&gt;
    &lt;/tr&gt;
    &lt;tr&gt;                

&lt;/tr&gt;                   &lt;tr&gt;                    

                    &lt;td class=""left""&gt;&lt;label for=""aclsinitialcoursedate""&gt;2015 ACLS Initial Course Dates:&lt;/label&gt;&lt;/td&gt;
                        &lt;td&gt;
                       &lt;input type=""radio"" value=""6/8 &amp; 6/10 8AM"" name=""aclsinitialcoursedate"" /&gt;&lt;label&gt; 6/8 &amp; 6/10 8AM&lt;/label&gt;&lt;br /&gt;
             &lt;input type=""radio"" value=""7/6 &amp; 7/8 8AM"" name=""aclsinitialcoursedate"" /&gt;&lt;label&gt; 7/6 &amp; 7/8 8AM&lt;/label&gt;&lt;br /&gt;
             &lt;input type=""radio"" value=""8/3 &amp; 8/5 8AM"" name=""aclsinitialcoursedate"" /&gt;&lt;label&gt; 8/3 &amp; 8/5 8AM&lt;/label&gt;&lt;br/&gt;
             &lt;input type=""radio"" value=""9/18 &amp; 9/25 8AM"" name=""aclsinitialcoursedate"" /&gt;&lt;label&gt; 9/18 &amp; 9/25 8AM&lt;/label&gt;&lt;br /&gt;
         &lt;input type=""radio"" value=""11/6 &amp; 11/13 8AM"" name=""aclsinitialcoursedate"" /&gt;&lt;label&gt; 11/6 &amp; 11/13 8AM&lt;/label&gt;&lt;br /&gt; 
                    &lt;tr&gt;                

                    &lt;td class=""left""&gt;&lt;label for=""aclsrecertcoursedate""&gt;2015 ACLS Recert Course Dates:&lt;/label&gt;&lt;/td&gt;
                        &lt;td&gt;
                       &lt;input type=""radio"" value=""6/15 8AM"" name=""aclsrecertcoursedate"" /&gt;&lt;label&gt; 6/15 8AM&lt;/label&gt;&lt;br /&gt;
             &lt;input type=""radio"" value=""7/13 8AM"" name=""aclsrecertcoursedate"" /&gt;&lt;label&gt; 7/13 8AM&lt;/label&gt;&lt;br /&gt;
             &lt;input type=""radio"" value=""10/2 8AM"" name=""aclsrecertcoursedate"" /&gt;&lt;label&gt; 10/2 8AM&lt;/label&gt;&lt;br/&gt;
             &lt;input type=""radio"" value=""11/20 8AM"" name=""aclsrecertcoursedate"" /&gt;&lt;label&gt; 11/20 8AM&lt;/label&gt;&lt;br/&gt;     
    &lt;/tr&gt;
    &lt;tr&gt;                

            &lt;td class=""left""&gt;&lt;label for=""palsinitialcoursedate""&gt;2015 PALS Initial Course Dates:&lt;/label&gt;&lt;/td&gt;
                        &lt;td&gt;
                       &lt;input type=""radio"" value=""6/22 &amp; 6/24 8AM"" name=""palsinitialcoursedate"" /&gt;&lt;label&gt; 6/22 &amp; 6/24 8AM&lt;/label&gt;&lt;br /&gt;
             &lt;input type=""radio"" value=""7/20 &amp; 7/22 8AM"" name=""palsinitialcoursedate"" /&gt;&lt;label&gt; 7/20 &amp; 7/22 8AM&lt;/label&gt;&lt;br /&gt;
             &lt;input type=""radio"" value=""8/10 &amp; 8/12 8AM"" name=""palsinitialcoursedate"" /&gt;&lt;label&gt; 8/10 &amp; 8/12 8AM&lt;/label&gt;&lt;br/&gt;
    &lt;input type=""radio"" value=""10/9 &amp; 10/16 8AM"" name=""palsinitialcoursedate"" /&gt;&lt;label&gt; 10/9 &amp; 10/16 8AM&lt;/label&gt;&lt;br/&gt;        
                    &lt;tr&gt;                    

                    &lt;td class=""left""&gt;&lt;label for=""palsrecertcoursedate""&gt;2015 PALS Recert Course Dates:&lt;/label&gt;&lt;/td&gt;
                        &lt;td&gt;
                       &lt;input type=""radio"" value=""6/29 8AM"" name=""palsrecertcoursedate"" /&gt;&lt;label&gt; 6/29 8AM&lt;/label&gt;&lt;br /&gt;
             &lt;input type=""radio"" value=""7/27 8AM"" name=""palsrecertcoursedate"" /&gt;&lt;label&gt; 7/27 8AM&lt;/label&gt;&lt;br /&gt;
             &lt;input type=""radio"" value=""10/23 8AM"" name=""palsrecertcoursedate"" /&gt;&lt;label&gt; 10/23 8AM&lt;/label&gt;&lt;br/&gt;
             &lt;/td&gt;  

                                                    &lt;tr&gt;



                &lt;/table&gt;

                &lt;div id=""captcha-area"" style=""margin-left: 130px;""&gt;

                &lt;?php

                require_once('recaptchalib.php');
                $publickey = ""edited out for example"";
                $privatekey = ""edited out for example"";

                # the response from reCAPTCHA
                $resp = null;
                # the error code from reCAPTCHA, if any
                $error = null;

                # are we submitting the page?
                if ($_POST[""submit""]) {
                  $resp = recaptcha_check_answer ($privatekey,
                                                  $_SERVER[""REMOTE_ADDR""],
                                                  $_POST[""recaptcha_challenge_field""],
                                                  $_POST[""recaptcha_response_field""]);

                  if ($resp-&gt;is_valid) {
                    echo ""You got it!"";
                    # in a real application, you should send an email, create an account, etc
                  } else {
                    # set the error code so that we can display it. You could also use
                    # die (""reCAPTCHA failed""), but using the error message is
                    # more user friendly
                    $error = $resp-&gt;error;
                  }
                }
                echo recaptcha_get_html($publickey, $error);
                ?&gt;

                &lt;/div&gt;

                &lt;input type=""submit"" name=""submit"" value=""Submit"" class=""submit-button"" /&gt;
            &lt;/form&gt;
</code></pre>

<p>Here is contactengine.php:</p>

<pre><code>&lt;?php

require_once('recaptchalib.php');
$privatekey = ""key removed intentionally for example"";
$resp = recaptcha_check_answer ($privatekey,
                                $_SERVER[""REMOTE_ADDR""],
                                $_POST[""recaptcha_challenge_field""],
                                $_POST[""recaptcha_response_field""]);

if (!$resp-&gt;is_valid) {
  die (""The reCAPTCHA wasn't entered correctly. Go back and try it again."" .
       ""(reCAPTCHA said: "" . $resp-&gt;error . "")"");
}

$EmailFrom = ""email@address.com"";
$EmailTo = ""email@address.com"";
$Subject = ""Refresher Form Submission"";
$Name = Trim(stripslashes($_POST['Name'])); 
$EMT = Trim(stripslashes($_POST['EMT'])); 
$NREMT = Trim(stripslashes($_POST['NREMT'])); 
$Email = Trim(stripslashes($_POST['Email'])); 
$Phone = Trim(stripslashes($_POST['Phone'])); 
$Address = Trim(stripslashes($_POST['Address'])); 
$Program = Trim(stripslashes($_POST['Program'])); 
$nccrtraining = Trim(stripslashes($_POST['NCCR Training'])); 
$Operating = Trim(stripslashes($_POST['Operating']));
$emt20hournccpcoursedate = Trim(stripslashes($_POST['EMT 20 Hour NCCP Course Date:']));  
$paramedic30hournccpcoursedate = Trim(stripslashes($_POST['Paramedic 30 Hour NCCP Course Date']));  
$aclsinitialcoursedate = Trim(stripslashes($_POST['ACLS Initial Course Date']));  
$aclsrecertcoursedate = Trim(stripslashes($_POST['ACLS Recert Course Date']));  
$palsinitialcoursedate = Trim(stripslashes($_POST['PALS Initial Course Date']));  
$palsrecertcoursedate = Trim(stripslashes($_POST['2015 PALS Recert Course Dates:']));  

// validation
$validationOK=true;
if (!$validationOK) {
  print ""&lt;meta http-equiv=\""refresh\"" content=\""0;URL=error.htm\""&gt;"";
  exit;
}

// prepare email body text
$Body = """";
$Body .= ""Name: "";
$Body .= $Name;
$Body .= ""\n"";
$Body .= ""EMT: "";
$Body .= $EMT;
$Body .= ""\n"";
$Body .= ""NREMT: "";
$Body .= $NREMT;
$Body .= ""\n"";
$Body .= ""Email: "";
$Body .= $Email;
$Body .= ""\n"";
$Body .= ""Phone: "";
$Body .= $Phone;
$Body .= ""\n"";
$Body .= ""Address: "";
$Body .= $Address;
$Body .= ""\n"";
$Body .= ""Program: "";
$Body .= $Program;
$Body .= ""\n"";
$Body .= ""NCCR Training: "";
$Body .= $nccrtraining;
$Body .= ""\n"";
$Body .= ""Operating: "";
$Body .= $Operating;
$Body .= ""\n"";
$Body .= ""EMT 20 Hour NCCP Course Date: "";
$Body .= $emt20hournccpcoursedate;
$Body .= ""\n"";
$Body .= ""Paramedic 30 Hour NCCP Course Date: "";
$Body .= $paramedic30hournccpcoursedate;
$Body .= ""\n"";
$Body .= ""ACLS Initial Course Date: "";
$Body .= $aclsinitialcoursedate;
$Body .= ""\n"";
$Body .= ""ACLS Recert Course Date: "";
$Body .= $aclsrecertcoursedate;
$Body .= ""\n"";
$Body .= ""PALS Initial Course Date: "";
$Body .= $palsinitialcoursedate;
$Body .= ""\n"";
$Body .= ""2015 PALS Recert Course Dates: "";
$Body .= $palsrecertlcoursedate;
$Body .= ""\n"";

// send email 
$success = mail($EmailTo, $Subject, $Body, ""From: &lt;$EmailFrom&gt;"");

// redirect to success page 
if ($success){
  print ""&lt;meta http-equiv=\""refresh\"" content=\""0;URL=payment.html\""&gt;"";
}
else{
  print ""&lt;meta http-equiv=\""refresh\"" content=\""0;URL=error.htm\""&gt;"";
}
?&gt;
</code></pre>

<p>On my end when I fill out the form I receive the following emailed to me:</p>

<pre><code>Name: Firstname Lastname
EMT: 12345
NREMT: 123456
Email: email@address.com
Phone: 5555555555
Address: Full address
Program: EMT NCCR
NCCR Training:
Operating: Windows
EMT 20 Hour NCCP Course Date:
Paramedic 30 Hour NCCP Course Date:
ACLS Initial Course Date:
ACLS Recert Course Date:
PALS Initial Course Date:
2015 PALS Recert Course Dates:
</code></pre>

<p>The fields NCCR Training, EMT 20 Hour NCCP Course Date, Paramedic 30 Hour NCCP Course Date, ACLS Initial Course Date, ACLS Recert Course Date, PALS Initial Course Date and 2015 PALS Recert Course Dates are completely blank. But the other fields are fine. As far as I can tell all the fields are configured in the same way.</p>

<p>Thoughts? Please and thank you, Stackoverflow. </p>",php|forms,"<p>you are missing to add the names in collecting the post data,try to change,</p>

<pre><code>$_POST['NCCR Training'] to $_POST['nccrtraining']

$_POST['EMT 20 Hour NCCP Course Date'] to $_POST['emt20hournccpcoursedate']

$_POST['Paramedic 30 Hour NCCP Course '] to _POST['paramedic30hournccpcoursedate']

$_POST['ACLS Initial Course Date'] to $_POST['aclsinitialcoursedate']

$_POST['ACLS Initial Course Date'] to $_POST['aclsrecertcoursedate']

$_POST['PALS Initial Course Date'] to $_POST['palsinitialcoursedate']
</code></pre>",0
31659255,"PHP: Form emailing displaying some fields, not others?","<p>This isn't particularly my domain. I'm helping a friend and I've been attempting to logic out  the issue through common sense and Google, but I can't figure it out.</p>

<p>In short: Friend has a form on his website. Form goes through a PHP script and emails him the results whenever someone fills it out. It has worked fine for awhile. He recently added some new fields and now all of a sudden some of the fields do not return results through the PHP script when submitted via the form.</p>

<p>Here is the HTML for the form:</p>

<pre><code>        &lt;div id=""contact-area""&gt;

            &lt;form method=""post"" action=""contactengine.php""&gt;
                &lt;table&gt;
                    &lt;tr&gt;
                        &lt;td class=""left""&gt;&lt;label for=""Name""&gt;Full Name:&lt;/label&gt;&lt;/td&gt;
                        &lt;td&gt;&lt;input type=""text"" name=""Name"" /&gt;&lt;/td&gt;
                    &lt;/tr&gt;
                    &lt;tr&gt;
                        &lt;td class=""left""&gt;&lt;label for=""EMT""&gt;EMT #:&lt;/label&gt;&lt;/td&gt;
                        &lt;td&gt;&lt;input type=""text"" name=""EMT"" /&gt;&lt;/td&gt;
                    &lt;/tr&gt;

                    &lt;tr&gt;
                        &lt;td class=""left""&gt;&lt;label for=""NREMT""&gt;NREMT #:&lt;/label&gt;&lt;/td&gt;
                        &lt;td&gt;&lt;input type=""text"" name=""NREMT"" /&gt;&lt;/td&gt;
                    &lt;/tr&gt;
                    &lt;tr&gt;
                        &lt;td class=""left""&gt;&lt;label for=""Email""&gt;Email:&lt;/label&gt;&lt;/td&gt;
                        &lt;td&gt;&lt;input type=""text"" name=""Email"" /&gt;&lt;/td&gt;
                    &lt;/tr&gt;
                    &lt;tr&gt;
                        &lt;td class=""left""&gt;&lt;label for=""Phone""&gt;Phone:&lt;/label&gt;&lt;/td&gt;
                        &lt;td&gt;&lt;input type=""text"" name=""Phone"" /&gt;&lt;/td&gt;
                    &lt;/tr&gt;
                    &lt;tr&gt;
                        &lt;td class=""left""&gt;&lt;label for=""Address""&gt;Full Address:&lt;/label&gt;&lt;/td&gt;
                        &lt;td&gt;&lt;textarea name=""Address"" rows=""10"" cols=""20""&gt;&lt;/textarea&gt;&lt;/td&gt;
                    &lt;/tr&gt;
                    &lt;tr&gt;            
                        &lt;td class=""left""&gt;&lt;label for=""Program""&gt;Program(s):&lt;/label&gt;&lt;/td&gt;
                        &lt;td&gt;&lt;input type=""radio"" value=""EMT NCCR"" name=""Program""/&gt;&lt;label&gt;EMT NCCR&lt;/label&gt;&lt;br /&gt;
                        &lt;input type=""radio"" value=""Paramedic NCCR"" name=""Program""/&gt;&lt;label&gt;Paramedic NCCR&lt;/label&gt;&lt;br /&gt;
                                    &lt;input type=""radio"" value=""10 hours ConEd"" name=""Program""/&gt;&lt;label&gt;10 hours ConEd&lt;/label&gt;&lt;br /&gt;
                                    &lt;input type=""radio"" value=""Snowbird EMS Conference"" name=""Program""/&gt;&lt;label&gt;Snowbird EMS Conference&lt;/label&gt;&lt;br /&gt;
                                    &lt;input type=""radio"" value=""AHA ACLS"" name=""Program""/&gt;&lt;label&gt;AHA ACLS&lt;/label&gt;&lt;br /&gt;
                                    &lt;input type=""radio"" value=""AHA PALS"" name=""Program""/&gt;&lt;label&gt;AHA PALS&lt;/label&gt;&lt;br /&gt;
    &lt;/tr&gt;

                        &lt;tr&gt;                
                        &lt;td class=""left""&gt;&lt;label for=""nccrtraining""&gt;Desired NCCR Training:&lt;/label&gt;&lt;/td&gt;
                        &lt;td&gt;&lt;input type=""radio"" value=""Online"" name=""nccrtraining"" /&gt;&lt;label&gt;Online&lt;/label&gt;&lt;br /&gt;
                            &lt;input type=""radio"" value=""DVD"" name=""nccrtraining""/&gt;&lt;label&gt;DVD&lt;/label&gt;&lt;br  /&gt;
                        &lt;input type=""radio"" value=""USB"" name=""nccrtraining""/&gt;&lt;label&gt;USB Thumbdrive&lt;/label&gt;&lt;/td&gt; 
                    &lt;/tr&gt;  
                    &lt;tr&gt;
                        &lt;td class=""left""&gt;&lt;label for=""Operating""&gt;Operating System:&lt;/label&gt;&lt;/td&gt;
                        &lt;td&gt;&lt;input type=""radio"" value=""Windows"" name=""Operating"" /&gt;&lt;label&gt;Windows&lt;/label&gt;&lt;br /&gt;
                            &lt;input type=""radio"" value=""Mac"" name=""Operating""/&gt;&lt;label&gt;Mac&lt;/label&gt;&lt;/td&gt;

                    &lt;/tr&gt;   
                    &lt;tr&gt;
                        &lt;td class=""left""&gt;&lt;label for=""emt20hournccpcoursedate""&gt;EMT 20-hour NCCP Course Date:&lt;/label&gt;&lt;/td&gt;
                        &lt;td&gt;
                        &lt;input type=""radio"" value=""September 26th, 2015 - 12:30PM"" name=""emt20hournccpcoursedate"" /&gt;&lt;label&gt;September 26th, 2015 - 12:30PM&lt;/label&gt;&lt;br /&gt;
            &lt;input type=""radio"" value=""October 17th, 2015 - 12:30PM"" name=""emt20hournccpcoursedate"" /&gt;&lt;label&gt;October 17th, 2015 - 12:30PM&lt;/label&gt;&lt;br /&gt;
                        &lt;input type=""radio"" value=""November 14th, 2015 12:30PM"" name=""emt20hournccpcoursedate"" /&gt;&lt;label&gt;November 14th, 2015 12:30PM&lt;/label&gt;&lt;br /&gt;
                        &lt;input type=""radio"" value=""December 5th, 2015 8:00AM"" name=""emt20hournccpcoursedate"" /&gt;&lt;label&gt;December 5th, 2015 8:00AM&lt;/label&gt;&lt;br /&gt;
                        &lt;input type=""radio"" value=""December 5th, 2015 10:30AM"" name=""emt20hournccpcoursedate"" /&gt;&lt;label&gt;December 5th, 2015 10:30AM&lt;/label&gt;&lt;br /&gt;
                       &lt;input type=""radio"" value=""December 5th, 2015 1:00PM"" name=""emt20hournccpcoursedate"" /&gt;&lt;label&gt;December 5th, 2015 1:00PM&lt;/label&gt;&lt;br /&gt;
    &lt;/tr&gt;
    &lt;tr&gt;                

&lt;/tr&gt;   
    &lt;tr&gt;
                        &lt;td class=""left""&gt;&lt;label for=""paramedic30hournccpcoursedate""&gt;Paramedic 30-hour NCCP Course Date:&lt;/label&gt;&lt;/td&gt;
                        &lt;td&gt;
                        &lt;input type=""radio"" value=""July 17th, 2015 - 8:30AM"" name=""paramedic30hournccpcoursedate"" /&gt;&lt;label&gt;July 17th, 2015 - 8:30AM&lt;/label&gt;&lt;br /&gt;
            &lt;input type=""radio"" value=""August 7th, 2015 - 8:30AM"" name=""paramedic30hournccpcoursedate"" /&gt;&lt;label&gt;August 7th, 2015 - 8:30AM&lt;/label&gt;&lt;br /&gt;
                        &lt;input type=""radio"" value=""August 28th, 2015 8:30AM"" name=""paramedic30hournccpcoursedate"" /&gt;&lt;label&gt;August 27th, 2015 8:30AM&lt;/label&gt;&lt;br /&gt;
                        &lt;input type=""radio"" value=""December 4th, 2015 8:30AM"" name=""paramedic30hournccpcoursedate"" /&gt;&lt;label&gt;December 4th, 2015 8:30AM&lt;/label&gt;&lt;br /&gt;
                        &lt;input type=""radio"" value=""January 14th, 2016 8:30AM"" name=""paramedic30hournccpcoursedate"" /&gt;&lt;label&gt;January 14th, 2016 8:30AM&lt;/label&gt;&lt;br /&gt;
                       &lt;input type=""radio"" value=""February 29th, 2016 8:30AM"" name=""paramedic30hournccpcoursedate"" /&gt;&lt;label&gt;February 29th, 2016 8:30AM&lt;/label&gt;&lt;br /&gt;
    &lt;/tr&gt;
    &lt;tr&gt;                

&lt;/tr&gt;                   &lt;tr&gt;                    

                    &lt;td class=""left""&gt;&lt;label for=""aclsinitialcoursedate""&gt;2015 ACLS Initial Course Dates:&lt;/label&gt;&lt;/td&gt;
                        &lt;td&gt;
                       &lt;input type=""radio"" value=""6/8 &amp; 6/10 8AM"" name=""aclsinitialcoursedate"" /&gt;&lt;label&gt; 6/8 &amp; 6/10 8AM&lt;/label&gt;&lt;br /&gt;
             &lt;input type=""radio"" value=""7/6 &amp; 7/8 8AM"" name=""aclsinitialcoursedate"" /&gt;&lt;label&gt; 7/6 &amp; 7/8 8AM&lt;/label&gt;&lt;br /&gt;
             &lt;input type=""radio"" value=""8/3 &amp; 8/5 8AM"" name=""aclsinitialcoursedate"" /&gt;&lt;label&gt; 8/3 &amp; 8/5 8AM&lt;/label&gt;&lt;br/&gt;
             &lt;input type=""radio"" value=""9/18 &amp; 9/25 8AM"" name=""aclsinitialcoursedate"" /&gt;&lt;label&gt; 9/18 &amp; 9/25 8AM&lt;/label&gt;&lt;br /&gt;
         &lt;input type=""radio"" value=""11/6 &amp; 11/13 8AM"" name=""aclsinitialcoursedate"" /&gt;&lt;label&gt; 11/6 &amp; 11/13 8AM&lt;/label&gt;&lt;br /&gt; 
                    &lt;tr&gt;                

                    &lt;td class=""left""&gt;&lt;label for=""aclsrecertcoursedate""&gt;2015 ACLS Recert Course Dates:&lt;/label&gt;&lt;/td&gt;
                        &lt;td&gt;
                       &lt;input type=""radio"" value=""6/15 8AM"" name=""aclsrecertcoursedate"" /&gt;&lt;label&gt; 6/15 8AM&lt;/label&gt;&lt;br /&gt;
             &lt;input type=""radio"" value=""7/13 8AM"" name=""aclsrecertcoursedate"" /&gt;&lt;label&gt; 7/13 8AM&lt;/label&gt;&lt;br /&gt;
             &lt;input type=""radio"" value=""10/2 8AM"" name=""aclsrecertcoursedate"" /&gt;&lt;label&gt; 10/2 8AM&lt;/label&gt;&lt;br/&gt;
             &lt;input type=""radio"" value=""11/20 8AM"" name=""aclsrecertcoursedate"" /&gt;&lt;label&gt; 11/20 8AM&lt;/label&gt;&lt;br/&gt;     
    &lt;/tr&gt;
    &lt;tr&gt;                

            &lt;td class=""left""&gt;&lt;label for=""palsinitialcoursedate""&gt;2015 PALS Initial Course Dates:&lt;/label&gt;&lt;/td&gt;
                        &lt;td&gt;
                       &lt;input type=""radio"" value=""6/22 &amp; 6/24 8AM"" name=""palsinitialcoursedate"" /&gt;&lt;label&gt; 6/22 &amp; 6/24 8AM&lt;/label&gt;&lt;br /&gt;
             &lt;input type=""radio"" value=""7/20 &amp; 7/22 8AM"" name=""palsinitialcoursedate"" /&gt;&lt;label&gt; 7/20 &amp; 7/22 8AM&lt;/label&gt;&lt;br /&gt;
             &lt;input type=""radio"" value=""8/10 &amp; 8/12 8AM"" name=""palsinitialcoursedate"" /&gt;&lt;label&gt; 8/10 &amp; 8/12 8AM&lt;/label&gt;&lt;br/&gt;
    &lt;input type=""radio"" value=""10/9 &amp; 10/16 8AM"" name=""palsinitialcoursedate"" /&gt;&lt;label&gt; 10/9 &amp; 10/16 8AM&lt;/label&gt;&lt;br/&gt;        
                    &lt;tr&gt;                    

                    &lt;td class=""left""&gt;&lt;label for=""palsrecertcoursedate""&gt;2015 PALS Recert Course Dates:&lt;/label&gt;&lt;/td&gt;
                        &lt;td&gt;
                       &lt;input type=""radio"" value=""6/29 8AM"" name=""palsrecertcoursedate"" /&gt;&lt;label&gt; 6/29 8AM&lt;/label&gt;&lt;br /&gt;
             &lt;input type=""radio"" value=""7/27 8AM"" name=""palsrecertcoursedate"" /&gt;&lt;label&gt; 7/27 8AM&lt;/label&gt;&lt;br /&gt;
             &lt;input type=""radio"" value=""10/23 8AM"" name=""palsrecertcoursedate"" /&gt;&lt;label&gt; 10/23 8AM&lt;/label&gt;&lt;br/&gt;
             &lt;/td&gt;  

                                                    &lt;tr&gt;



                &lt;/table&gt;

                &lt;div id=""captcha-area"" style=""margin-left: 130px;""&gt;

                &lt;?php

                require_once('recaptchalib.php');
                $publickey = ""edited out for example"";
                $privatekey = ""edited out for example"";

                # the response from reCAPTCHA
                $resp = null;
                # the error code from reCAPTCHA, if any
                $error = null;

                # are we submitting the page?
                if ($_POST[""submit""]) {
                  $resp = recaptcha_check_answer ($privatekey,
                                                  $_SERVER[""REMOTE_ADDR""],
                                                  $_POST[""recaptcha_challenge_field""],
                                                  $_POST[""recaptcha_response_field""]);

                  if ($resp-&gt;is_valid) {
                    echo ""You got it!"";
                    # in a real application, you should send an email, create an account, etc
                  } else {
                    # set the error code so that we can display it. You could also use
                    # die (""reCAPTCHA failed""), but using the error message is
                    # more user friendly
                    $error = $resp-&gt;error;
                  }
                }
                echo recaptcha_get_html($publickey, $error);
                ?&gt;

                &lt;/div&gt;

                &lt;input type=""submit"" name=""submit"" value=""Submit"" class=""submit-button"" /&gt;
            &lt;/form&gt;
</code></pre>

<p>Here is contactengine.php:</p>

<pre><code>&lt;?php

require_once('recaptchalib.php');
$privatekey = ""key removed intentionally for example"";
$resp = recaptcha_check_answer ($privatekey,
                                $_SERVER[""REMOTE_ADDR""],
                                $_POST[""recaptcha_challenge_field""],
                                $_POST[""recaptcha_response_field""]);

if (!$resp-&gt;is_valid) {
  die (""The reCAPTCHA wasn't entered correctly. Go back and try it again."" .
       ""(reCAPTCHA said: "" . $resp-&gt;error . "")"");
}

$EmailFrom = ""email@address.com"";
$EmailTo = ""email@address.com"";
$Subject = ""Refresher Form Submission"";
$Name = Trim(stripslashes($_POST['Name'])); 
$EMT = Trim(stripslashes($_POST['EMT'])); 
$NREMT = Trim(stripslashes($_POST['NREMT'])); 
$Email = Trim(stripslashes($_POST['Email'])); 
$Phone = Trim(stripslashes($_POST['Phone'])); 
$Address = Trim(stripslashes($_POST['Address'])); 
$Program = Trim(stripslashes($_POST['Program'])); 
$nccrtraining = Trim(stripslashes($_POST['NCCR Training'])); 
$Operating = Trim(stripslashes($_POST['Operating']));
$emt20hournccpcoursedate = Trim(stripslashes($_POST['EMT 20 Hour NCCP Course Date:']));  
$paramedic30hournccpcoursedate = Trim(stripslashes($_POST['Paramedic 30 Hour NCCP Course Date']));  
$aclsinitialcoursedate = Trim(stripslashes($_POST['ACLS Initial Course Date']));  
$aclsrecertcoursedate = Trim(stripslashes($_POST['ACLS Recert Course Date']));  
$palsinitialcoursedate = Trim(stripslashes($_POST['PALS Initial Course Date']));  
$palsrecertcoursedate = Trim(stripslashes($_POST['2015 PALS Recert Course Dates:']));  

// validation
$validationOK=true;
if (!$validationOK) {
  print ""&lt;meta http-equiv=\""refresh\"" content=\""0;URL=error.htm\""&gt;"";
  exit;
}

// prepare email body text
$Body = """";
$Body .= ""Name: "";
$Body .= $Name;
$Body .= ""\n"";
$Body .= ""EMT: "";
$Body .= $EMT;
$Body .= ""\n"";
$Body .= ""NREMT: "";
$Body .= $NREMT;
$Body .= ""\n"";
$Body .= ""Email: "";
$Body .= $Email;
$Body .= ""\n"";
$Body .= ""Phone: "";
$Body .= $Phone;
$Body .= ""\n"";
$Body .= ""Address: "";
$Body .= $Address;
$Body .= ""\n"";
$Body .= ""Program: "";
$Body .= $Program;
$Body .= ""\n"";
$Body .= ""NCCR Training: "";
$Body .= $nccrtraining;
$Body .= ""\n"";
$Body .= ""Operating: "";
$Body .= $Operating;
$Body .= ""\n"";
$Body .= ""EMT 20 Hour NCCP Course Date: "";
$Body .= $emt20hournccpcoursedate;
$Body .= ""\n"";
$Body .= ""Paramedic 30 Hour NCCP Course Date: "";
$Body .= $paramedic30hournccpcoursedate;
$Body .= ""\n"";
$Body .= ""ACLS Initial Course Date: "";
$Body .= $aclsinitialcoursedate;
$Body .= ""\n"";
$Body .= ""ACLS Recert Course Date: "";
$Body .= $aclsrecertcoursedate;
$Body .= ""\n"";
$Body .= ""PALS Initial Course Date: "";
$Body .= $palsinitialcoursedate;
$Body .= ""\n"";
$Body .= ""2015 PALS Recert Course Dates: "";
$Body .= $palsrecertlcoursedate;
$Body .= ""\n"";

// send email 
$success = mail($EmailTo, $Subject, $Body, ""From: &lt;$EmailFrom&gt;"");

// redirect to success page 
if ($success){
  print ""&lt;meta http-equiv=\""refresh\"" content=\""0;URL=payment.html\""&gt;"";
}
else{
  print ""&lt;meta http-equiv=\""refresh\"" content=\""0;URL=error.htm\""&gt;"";
}
?&gt;
</code></pre>

<p>On my end when I fill out the form I receive the following emailed to me:</p>

<pre><code>Name: Firstname Lastname
EMT: 12345
NREMT: 123456
Email: email@address.com
Phone: 5555555555
Address: Full address
Program: EMT NCCR
NCCR Training:
Operating: Windows
EMT 20 Hour NCCP Course Date:
Paramedic 30 Hour NCCP Course Date:
ACLS Initial Course Date:
ACLS Recert Course Date:
PALS Initial Course Date:
2015 PALS Recert Course Dates:
</code></pre>

<p>The fields NCCR Training, EMT 20 Hour NCCP Course Date, Paramedic 30 Hour NCCP Course Date, ACLS Initial Course Date, ACLS Recert Course Date, PALS Initial Course Date and 2015 PALS Recert Course Dates are completely blank. But the other fields are fine. As far as I can tell all the fields are configured in the same way.</p>

<p>Thoughts? Please and thank you, Stackoverflow. </p>",php|forms,"<p>Because you're not targeting the correct attribute. You need to use each form element's name attribute, so for example, <code>$_POST['NCCR Training'])</code> is wrong and should be <code>$_POST['nccrtraining'])</code></p>",3
31962740,array output not working from class php,"<p>i got error using this code</p>

<p><strong><em>Fatal error: Only variables can be passed by reference in /home/u448966927/public_html/Myclass.php on line 8</em></strong></p>

<p><strong>Myclass.php</strong></p>

<pre><code>&lt;?php

class yt
{
    public $channels = array
    (
        ""music"" =&gt; array( ""id"" =&gt; 74,""img"" =&gt; ""&lt;img src=../icon/music.png height=18 width=18 /&gt;"", ""name"" =&gt; ""Music"", ""slug"" =&gt; ""music"") ,
        ""sports"" =&gt; array( ""id"" =&gt; 11,""img"" =&gt; ""&lt;img src=../icon/sport.png height=18 width=18 /&gt;"", ""name"" =&gt; ""Sports"", ""sug"" =&gt; ""sport""),
        ""movies"" =&gt; array( ""id"" =&gt; 45,""img"" =&gt; ""&lt;img src=../icon/movies.png height=18 width=18 /&gt;"", ""name"" =&gt; ""Movies"", ""sug"" =&gt; ""movie""),
        ""gaming"" =&gt; array( ""id"" =&gt; 85,""img"" =&gt; ""&lt;img src=../icon/game.png height=18 width=18 /&gt;"", ""name"" =&gt; ""Gaming"", ""sug"" =&gt; ""game""),
        ""people"" =&gt; array( ""id"" =&gt; 56,""img"" =&gt; ""&lt;img src=../icon/people.png height=18 width=18 /&gt;"", ""name"" =&gt; ""People &amp; Blog"", ""sug"" =&gt; ""people""),
        ""comedy"" =&gt; array( ""id"" =&gt; 72,""img"" =&gt; ""&lt;img src=../icon/comedy.png height=18 width=18 /&gt;"", ""name"" =&gt; ""Comedy"", ""sug"" =&gt; ""comedy""),
        ""news"" =&gt; array( ""id"" =&gt; 84,""img"" =&gt; ""&lt;img src=../icon/news.png height=18 width=18 /&gt;"", ""name"" =&gt; ""News &amp; Politics"", ""sug"" =&gt; ""news""),
        ""animation"" =&gt; array( ""id"" =&gt; 29,""img"" =&gt; ""&lt;img src=../icon/film.png height=18 width=18 /&gt;"", ""name"" =&gt; ""Film &amp; Animation"", ""sug"" =&gt; ""animation""),
        ""auto-vehicles"" =&gt; array( ""id"" =&gt; 59,""img"" =&gt; ""&lt;img src=../icon/auto.png height=18 width=18 /&gt;"", ""name"" =&gt; ""Autos &amp; Vehicles"", ""sug"" =&gt; ""auto-vehicles""),
        ""howto"" =&gt; array( ""id"" =&gt; 68,""img"" =&gt; ""&lt;img src=../icon/howto.png height=18 width=18 /&gt;"", ""name"" =&gt; ""Howto &amp; Style"", ""sug"" =&gt; ""howto""),
        ""science"" =&gt; array( ""id"" =&gt; 98,""img"" =&gt; ""&lt;img src=../icon/science.png height=18 width=18 /&gt;"", ""name"" =&gt; ""Science &amp; Technology"", ""sug"" =&gt; ""science"")

    );
    public function getChannels(){
        $html = ""&lt;li&gt;&lt;a href='#' class='current'&gt;&lt;img src=../icon/pupolar.png height=18 width=18 /&gt;\tPopular&lt;/a&gt;"";
        ksort(channels);
        foreach (channels as $channel) {
            $html .=""&lt;li&gt;&lt;a href='channel/"".$channel[""slug""].""'&gt;now&lt;/a&gt;"";
        }
        return $html;
    }
};

?&gt;]
</code></pre>

<p><strong>INDEX.php</strong></p>

<pre><code>&lt;?php include_once('Myclass.php'); echo getChannels(); ?&gt;
</code></pre>",php|oop,"<p><code>channels</code> doesn't exist and is invalid in your <code>ksort</code> and <code>foreach</code> (line 22)</p>

<p>Change</p>

<pre><code>ksort(channels);
foreach (channels as $channel) {
</code></pre>

<p>To</p>

<pre><code>ksort($this-&gt;channels);
foreach ($this-&gt;channels as $channel) {
</code></pre>

<p>As the function <code>getChannels</code> is in a class, you need to <a href=""http://php.net/manual/en/language.oop5.basic.php#language.oop5.basic.new"" rel=""nofollow"">instantiate the class</a>. In <code>index.php</code> add the following;</p>

<pre><code>$objYT = new yt;
echo $objYT-&gt;getChannels();
</code></pre>

<p><a href=""https://eval.in/415737"" rel=""nofollow"">https://eval.in/415737</a></p>",1
31962740,array output not working from class php,"<p>i got error using this code</p>

<p><strong><em>Fatal error: Only variables can be passed by reference in /home/u448966927/public_html/Myclass.php on line 8</em></strong></p>

<p><strong>Myclass.php</strong></p>

<pre><code>&lt;?php

class yt
{
    public $channels = array
    (
        ""music"" =&gt; array( ""id"" =&gt; 74,""img"" =&gt; ""&lt;img src=../icon/music.png height=18 width=18 /&gt;"", ""name"" =&gt; ""Music"", ""slug"" =&gt; ""music"") ,
        ""sports"" =&gt; array( ""id"" =&gt; 11,""img"" =&gt; ""&lt;img src=../icon/sport.png height=18 width=18 /&gt;"", ""name"" =&gt; ""Sports"", ""sug"" =&gt; ""sport""),
        ""movies"" =&gt; array( ""id"" =&gt; 45,""img"" =&gt; ""&lt;img src=../icon/movies.png height=18 width=18 /&gt;"", ""name"" =&gt; ""Movies"", ""sug"" =&gt; ""movie""),
        ""gaming"" =&gt; array( ""id"" =&gt; 85,""img"" =&gt; ""&lt;img src=../icon/game.png height=18 width=18 /&gt;"", ""name"" =&gt; ""Gaming"", ""sug"" =&gt; ""game""),
        ""people"" =&gt; array( ""id"" =&gt; 56,""img"" =&gt; ""&lt;img src=../icon/people.png height=18 width=18 /&gt;"", ""name"" =&gt; ""People &amp; Blog"", ""sug"" =&gt; ""people""),
        ""comedy"" =&gt; array( ""id"" =&gt; 72,""img"" =&gt; ""&lt;img src=../icon/comedy.png height=18 width=18 /&gt;"", ""name"" =&gt; ""Comedy"", ""sug"" =&gt; ""comedy""),
        ""news"" =&gt; array( ""id"" =&gt; 84,""img"" =&gt; ""&lt;img src=../icon/news.png height=18 width=18 /&gt;"", ""name"" =&gt; ""News &amp; Politics"", ""sug"" =&gt; ""news""),
        ""animation"" =&gt; array( ""id"" =&gt; 29,""img"" =&gt; ""&lt;img src=../icon/film.png height=18 width=18 /&gt;"", ""name"" =&gt; ""Film &amp; Animation"", ""sug"" =&gt; ""animation""),
        ""auto-vehicles"" =&gt; array( ""id"" =&gt; 59,""img"" =&gt; ""&lt;img src=../icon/auto.png height=18 width=18 /&gt;"", ""name"" =&gt; ""Autos &amp; Vehicles"", ""sug"" =&gt; ""auto-vehicles""),
        ""howto"" =&gt; array( ""id"" =&gt; 68,""img"" =&gt; ""&lt;img src=../icon/howto.png height=18 width=18 /&gt;"", ""name"" =&gt; ""Howto &amp; Style"", ""sug"" =&gt; ""howto""),
        ""science"" =&gt; array( ""id"" =&gt; 98,""img"" =&gt; ""&lt;img src=../icon/science.png height=18 width=18 /&gt;"", ""name"" =&gt; ""Science &amp; Technology"", ""sug"" =&gt; ""science"")

    );
    public function getChannels(){
        $html = ""&lt;li&gt;&lt;a href='#' class='current'&gt;&lt;img src=../icon/pupolar.png height=18 width=18 /&gt;\tPopular&lt;/a&gt;"";
        ksort(channels);
        foreach (channels as $channel) {
            $html .=""&lt;li&gt;&lt;a href='channel/"".$channel[""slug""].""'&gt;now&lt;/a&gt;"";
        }
        return $html;
    }
};

?&gt;]
</code></pre>

<p><strong>INDEX.php</strong></p>

<pre><code>&lt;?php include_once('Myclass.php'); echo getChannels(); ?&gt;
</code></pre>",php|oop,"<p>You have several problems in the code you have posted.</p>

<pre><code>ksort(channels);
foreach (channels as $channel) {
</code></pre>

<p>The names of variables in PHP start with <code>$</code>. When PHP reaches <code>channels</code> it thinks it is a constant created using <a href=""http://php.net/manual/en/function.define.php"" rel=""nofollow""><code>define()</code></a>. But function <a href=""http://php.net/manual/en/function.ksort.php"" rel=""nofollow"">`ksort()</a> expects a parameter of type array passed by reference. This is the source of the error.</p>

<p>If you change it to <code>ksort($channels)</code> it is still an error because there is no variable <code>$channels</code> defined in the current scope. What you probably need is to use the <code>$channels</code> property of the current object and that one is always accessed using <code>$this</code> (the current object) followed by the <code>-&gt;</code> (member access operator) and the name of the property you want to access, without <code>$</code> (<code>channels</code>):</p>

<pre><code>ksort($this-&gt;channels);
</code></pre>

<p>The same for the next line:</p>

<pre><code>foreach ($this-&gt;channels as $channel);
</code></pre>

<p>You also have a similar problem in <code>index.php</code>:</p>

<pre><code>&lt;?php include_once('Myclass.php'); echo getChannels();
</code></pre>

<p>The call to <code>getChannels()</code> tries to execute the global function <code>getChannels()</code> but it fails because no such function exists. What you want to accomplish is a call to method <code>getChannels()</code> of an object of class <code>yt</code>. In order to do that you have to create such an object first:</p>

<pre><code>&lt;?php
include_once 'Myclass.php';
$obj = new yt();
echo $obj-&gt;getChannels();
// That's all
</code></pre>

<p>And the file <code>Myclass.php</code> should look like:</p>

<pre><code>&lt;?php

class yt
{
    // ...

    public function getChannels(){
        $html = ""&lt;li&gt;&lt;a href='#' class='current'&gt;&lt;img src=../icon/pupolar.png height=18 width=18 /&gt;\tPopular&lt;/a&gt;"";
        ksort($this-&gt;channels);
        foreach ($this-&gt;channels as $channel) {
            $html .=""&lt;li&gt;&lt;a href='channel/"".$channel[""slug""].""'&gt;now&lt;/a&gt;"";
        }
        return $html;
    }
}
</code></pre>",0
31962740,array output not working from class php,"<p>i got error using this code</p>

<p><strong><em>Fatal error: Only variables can be passed by reference in /home/u448966927/public_html/Myclass.php on line 8</em></strong></p>

<p><strong>Myclass.php</strong></p>

<pre><code>&lt;?php

class yt
{
    public $channels = array
    (
        ""music"" =&gt; array( ""id"" =&gt; 74,""img"" =&gt; ""&lt;img src=../icon/music.png height=18 width=18 /&gt;"", ""name"" =&gt; ""Music"", ""slug"" =&gt; ""music"") ,
        ""sports"" =&gt; array( ""id"" =&gt; 11,""img"" =&gt; ""&lt;img src=../icon/sport.png height=18 width=18 /&gt;"", ""name"" =&gt; ""Sports"", ""sug"" =&gt; ""sport""),
        ""movies"" =&gt; array( ""id"" =&gt; 45,""img"" =&gt; ""&lt;img src=../icon/movies.png height=18 width=18 /&gt;"", ""name"" =&gt; ""Movies"", ""sug"" =&gt; ""movie""),
        ""gaming"" =&gt; array( ""id"" =&gt; 85,""img"" =&gt; ""&lt;img src=../icon/game.png height=18 width=18 /&gt;"", ""name"" =&gt; ""Gaming"", ""sug"" =&gt; ""game""),
        ""people"" =&gt; array( ""id"" =&gt; 56,""img"" =&gt; ""&lt;img src=../icon/people.png height=18 width=18 /&gt;"", ""name"" =&gt; ""People &amp; Blog"", ""sug"" =&gt; ""people""),
        ""comedy"" =&gt; array( ""id"" =&gt; 72,""img"" =&gt; ""&lt;img src=../icon/comedy.png height=18 width=18 /&gt;"", ""name"" =&gt; ""Comedy"", ""sug"" =&gt; ""comedy""),
        ""news"" =&gt; array( ""id"" =&gt; 84,""img"" =&gt; ""&lt;img src=../icon/news.png height=18 width=18 /&gt;"", ""name"" =&gt; ""News &amp; Politics"", ""sug"" =&gt; ""news""),
        ""animation"" =&gt; array( ""id"" =&gt; 29,""img"" =&gt; ""&lt;img src=../icon/film.png height=18 width=18 /&gt;"", ""name"" =&gt; ""Film &amp; Animation"", ""sug"" =&gt; ""animation""),
        ""auto-vehicles"" =&gt; array( ""id"" =&gt; 59,""img"" =&gt; ""&lt;img src=../icon/auto.png height=18 width=18 /&gt;"", ""name"" =&gt; ""Autos &amp; Vehicles"", ""sug"" =&gt; ""auto-vehicles""),
        ""howto"" =&gt; array( ""id"" =&gt; 68,""img"" =&gt; ""&lt;img src=../icon/howto.png height=18 width=18 /&gt;"", ""name"" =&gt; ""Howto &amp; Style"", ""sug"" =&gt; ""howto""),
        ""science"" =&gt; array( ""id"" =&gt; 98,""img"" =&gt; ""&lt;img src=../icon/science.png height=18 width=18 /&gt;"", ""name"" =&gt; ""Science &amp; Technology"", ""sug"" =&gt; ""science"")

    );
    public function getChannels(){
        $html = ""&lt;li&gt;&lt;a href='#' class='current'&gt;&lt;img src=../icon/pupolar.png height=18 width=18 /&gt;\tPopular&lt;/a&gt;"";
        ksort(channels);
        foreach (channels as $channel) {
            $html .=""&lt;li&gt;&lt;a href='channel/"".$channel[""slug""].""'&gt;now&lt;/a&gt;"";
        }
        return $html;
    }
};

?&gt;]
</code></pre>

<p><strong>INDEX.php</strong></p>

<pre><code>&lt;?php include_once('Myclass.php'); echo getChannels(); ?&gt;
</code></pre>",php|oop,"<p>Try this ..</p>

<pre><code>class yt
{
    public $channels = array
    (
        ""music"" =&gt; array( ""id"" =&gt; 74,""img"" =&gt; ""&lt;img src=../icon/music.png height=18 width=18 /&gt;"", ""name"" =&gt; ""Music"", ""slug"" =&gt; ""music"") ,
        ""sports"" =&gt; array( ""id"" =&gt; 11,""img"" =&gt; ""&lt;img src=../icon/sport.png height=18 width=18 /&gt;"", ""name"" =&gt; ""Sports"", ""slug"" =&gt; ""sport""),
        ""movies"" =&gt; array( ""id"" =&gt; 45,""img"" =&gt; ""&lt;img src=../icon/movies.png height=18 width=18 /&gt;"", ""name"" =&gt; ""Movies"", ""slug"" =&gt; ""movie""),
        ""gaming"" =&gt; array( ""id"" =&gt; 85,""img"" =&gt; ""&lt;img src=../icon/game.png height=18 width=18 /&gt;"", ""name"" =&gt; ""Gaming"", ""slug"" =&gt; ""game""),
        ""people"" =&gt; array( ""id"" =&gt; 56,""img"" =&gt; ""&lt;img src=../icon/people.png height=18 width=18 /&gt;"", ""name"" =&gt; ""People &amp; Blog"", ""slug"" =&gt; ""people""),
        ""comedy"" =&gt; array( ""id"" =&gt; 72,""img"" =&gt; ""&lt;img src=../icon/comedy.png height=18 width=18 /&gt;"", ""name"" =&gt; ""Comedy"", ""slug"" =&gt; ""comedy""),
        ""news"" =&gt; array( ""id"" =&gt; 84,""img"" =&gt; ""&lt;img src=../icon/news.png height=18 width=18 /&gt;"", ""name"" =&gt; ""News &amp; Politics"", ""slug"" =&gt; ""news""),
        ""animation"" =&gt; array( ""id"" =&gt; 29,""img"" =&gt; ""&lt;img src=../icon/film.png height=18 width=18 /&gt;"", ""name"" =&gt; ""Film &amp; Animation"", ""slug"" =&gt; ""animation""),
        ""auto-vehicles"" =&gt; array( ""id"" =&gt; 59,""img"" =&gt; ""&lt;img src=../icon/auto.png height=18 width=18 /&gt;"", ""name"" =&gt; ""Autos &amp; Vehicles"", ""slug"" =&gt; ""auto-vehicles""),
        ""howto"" =&gt; array( ""id"" =&gt; 68,""img"" =&gt; ""&lt;img src=../icon/howto.png height=18 width=18 /&gt;"", ""name"" =&gt; ""Howto &amp; Style"", ""slug"" =&gt; ""howto""),
        ""science"" =&gt; array( ""id"" =&gt; 98,""img"" =&gt; ""&lt;img src=../icon/science.png height=18 width=18 /&gt;"", ""name"" =&gt; ""Science &amp; Technology"", ""slug"" =&gt; ""science"")

    );

    public function getChannels(){
        $html = ""&lt;li&gt;&lt;a href='#' class='current'&gt;&lt;img src=../icon/pupolar.png height=18 width=18 /&gt;\tPopular&lt;/a&gt;"";
        ksort($this-&gt;channels);
        foreach ($this-&gt;channels as $channel) {
            $html .=""&lt;li&gt;&lt;a href='channel/"".$channel[""slug""].""'&gt;now&lt;/a&gt;"";
        }
        return $html;
    }
}
</code></pre>

<p>----- On index.php ---</p>

<pre><code>  include_once('Myclass.php'); 
    $yt = new yt;    
    echo $yt-&gt;getChannels();
</code></pre>",0
31962740,array output not working from class php,"<p>i got error using this code</p>

<p><strong><em>Fatal error: Only variables can be passed by reference in /home/u448966927/public_html/Myclass.php on line 8</em></strong></p>

<p><strong>Myclass.php</strong></p>

<pre><code>&lt;?php

class yt
{
    public $channels = array
    (
        ""music"" =&gt; array( ""id"" =&gt; 74,""img"" =&gt; ""&lt;img src=../icon/music.png height=18 width=18 /&gt;"", ""name"" =&gt; ""Music"", ""slug"" =&gt; ""music"") ,
        ""sports"" =&gt; array( ""id"" =&gt; 11,""img"" =&gt; ""&lt;img src=../icon/sport.png height=18 width=18 /&gt;"", ""name"" =&gt; ""Sports"", ""sug"" =&gt; ""sport""),
        ""movies"" =&gt; array( ""id"" =&gt; 45,""img"" =&gt; ""&lt;img src=../icon/movies.png height=18 width=18 /&gt;"", ""name"" =&gt; ""Movies"", ""sug"" =&gt; ""movie""),
        ""gaming"" =&gt; array( ""id"" =&gt; 85,""img"" =&gt; ""&lt;img src=../icon/game.png height=18 width=18 /&gt;"", ""name"" =&gt; ""Gaming"", ""sug"" =&gt; ""game""),
        ""people"" =&gt; array( ""id"" =&gt; 56,""img"" =&gt; ""&lt;img src=../icon/people.png height=18 width=18 /&gt;"", ""name"" =&gt; ""People &amp; Blog"", ""sug"" =&gt; ""people""),
        ""comedy"" =&gt; array( ""id"" =&gt; 72,""img"" =&gt; ""&lt;img src=../icon/comedy.png height=18 width=18 /&gt;"", ""name"" =&gt; ""Comedy"", ""sug"" =&gt; ""comedy""),
        ""news"" =&gt; array( ""id"" =&gt; 84,""img"" =&gt; ""&lt;img src=../icon/news.png height=18 width=18 /&gt;"", ""name"" =&gt; ""News &amp; Politics"", ""sug"" =&gt; ""news""),
        ""animation"" =&gt; array( ""id"" =&gt; 29,""img"" =&gt; ""&lt;img src=../icon/film.png height=18 width=18 /&gt;"", ""name"" =&gt; ""Film &amp; Animation"", ""sug"" =&gt; ""animation""),
        ""auto-vehicles"" =&gt; array( ""id"" =&gt; 59,""img"" =&gt; ""&lt;img src=../icon/auto.png height=18 width=18 /&gt;"", ""name"" =&gt; ""Autos &amp; Vehicles"", ""sug"" =&gt; ""auto-vehicles""),
        ""howto"" =&gt; array( ""id"" =&gt; 68,""img"" =&gt; ""&lt;img src=../icon/howto.png height=18 width=18 /&gt;"", ""name"" =&gt; ""Howto &amp; Style"", ""sug"" =&gt; ""howto""),
        ""science"" =&gt; array( ""id"" =&gt; 98,""img"" =&gt; ""&lt;img src=../icon/science.png height=18 width=18 /&gt;"", ""name"" =&gt; ""Science &amp; Technology"", ""sug"" =&gt; ""science"")

    );
    public function getChannels(){
        $html = ""&lt;li&gt;&lt;a href='#' class='current'&gt;&lt;img src=../icon/pupolar.png height=18 width=18 /&gt;\tPopular&lt;/a&gt;"";
        ksort(channels);
        foreach (channels as $channel) {
            $html .=""&lt;li&gt;&lt;a href='channel/"".$channel[""slug""].""'&gt;now&lt;/a&gt;"";
        }
        return $html;
    }
};

?&gt;]
</code></pre>

<p><strong>INDEX.php</strong></p>

<pre><code>&lt;?php include_once('Myclass.php'); echo getChannels(); ?&gt;
</code></pre>",php|oop,"<p>Change this piece of code from</p>

<pre><code>&amp;lt;?php include_once(&amp;apos;ytcx.php&amp;apos;); echo getChannels(); ?&amp;gt;
</code></pre>

<p>To</p>

<pre><code>&lt;?php 
    include_once('ytcx.php'); 
    $obj = new yt();
    echo $obj-&gt;getChannels();
?&gt;
</code></pre>

<p>I think PHP thinks that <code>&amp;apos;</code> is a parameter being passed, the <code>&amp;</code> is a by-reference character in PHP and it is just getting confused.</p>

<p>You also need to change</p>

<pre><code>public function getChannels(){
        $html = ""&lt;li&gt;&lt;a href='#' class='current'&gt;&lt;img src=../icon/pupolar.png height=18 width=18 /&gt;\tPopular&lt;/a&gt;"";
        ksort($this -&gt; channels);
        foreach ($this -&gt; channels as $channel) {
            $html .=""&lt;li&gt;&lt;a href='channel/"".$channel[""slug""].""'&gt;now&lt;/a&gt;"";
        }
        return $html;
    }
</code></pre>

<p>When you are referencing a class property from within a class method, you need the <code>$this-&gt;</code>.</p>",1
31934749,How to backup the whole database 30mins once automattically?,"<p>I am using codeigniter.I have a function in a controller to backup the whole database. This happens only when I click a button. how to do this automattically.
This is my controller file.</p>

<pre><code>public function backup_db()       
{
    $this-&gt;load-&gt;dbutil();
    $prefs = array(
                    'format'      =&gt; 'zip',
                    'filename'    =&gt; 'ospos.sql'
            );       
    $backup =&amp; $this-&gt;dbutil-&gt;backup($prefs);                
    $file_name =  'elfanto_billing-' . date(""Y-m-d-H-i-s"") .'.zip';
    $save = 'uploads/'.$file_name;
    $this-&gt;load-&gt;helper('download');
    while (ob_get_level())
    {
        ob_end_clean();
    }
    force_download($file_name, $backup);
}
</code></pre>

<p>How to code for this? Can someone help me?</p>",php|mysql|codeigniter,"<p>You can set cron job for automation </p>

<p>Use:
php index.php Controller method</p>

<p>as command in your crontab. E.g.:</p>

<p>30 * * * * php /home/username/index.php welcome show</p>

<p>Source: <a href=""http://ellislab.com/codeigniter/user-guide/general/cli.html"" rel=""nofollow"">http://ellislab.com/codeigniter/user-guide/general/cli.html</a></p>",0
31934749,How to backup the whole database 30mins once automattically?,"<p>I am using codeigniter.I have a function in a controller to backup the whole database. This happens only when I click a button. how to do this automattically.
This is my controller file.</p>

<pre><code>public function backup_db()       
{
    $this-&gt;load-&gt;dbutil();
    $prefs = array(
                    'format'      =&gt; 'zip',
                    'filename'    =&gt; 'ospos.sql'
            );       
    $backup =&amp; $this-&gt;dbutil-&gt;backup($prefs);                
    $file_name =  'elfanto_billing-' . date(""Y-m-d-H-i-s"") .'.zip';
    $save = 'uploads/'.$file_name;
    $this-&gt;load-&gt;helper('download');
    while (ob_get_level())
    {
        ob_end_clean();
    }
    force_download($file_name, $backup);
}
</code></pre>

<p>How to code for this? Can someone help me?</p>",php|mysql|codeigniter,"<p>What you want to do is setup you script to run from the command line or <code>cli</code> then you can setup a simple timed cron job if on linux, using C-Panel or crond.</p>

<p><a href=""https://help.ubuntu.com/community/CronHowto"" rel=""nofollow"">https://help.ubuntu.com/community/CronHowto</a></p>",0
31934749,How to backup the whole database 30mins once automattically?,"<p>I am using codeigniter.I have a function in a controller to backup the whole database. This happens only when I click a button. how to do this automattically.
This is my controller file.</p>

<pre><code>public function backup_db()       
{
    $this-&gt;load-&gt;dbutil();
    $prefs = array(
                    'format'      =&gt; 'zip',
                    'filename'    =&gt; 'ospos.sql'
            );       
    $backup =&amp; $this-&gt;dbutil-&gt;backup($prefs);                
    $file_name =  'elfanto_billing-' . date(""Y-m-d-H-i-s"") .'.zip';
    $save = 'uploads/'.$file_name;
    $this-&gt;load-&gt;helper('download');
    while (ob_get_level())
    {
        ob_end_clean();
    }
    force_download($file_name, $backup);
}
</code></pre>

<p>How to code for this? Can someone help me?</p>",php|mysql|codeigniter,"<p>Try this..</p>

<p>You have to create cron job and set time to run every 30 mins and add following code</p>

<pre><code>$this-&gt;load-&gt;dbutil();

        $prefs = array(     
                'format'      =&gt; 'zip',             
                'filename'    =&gt; 'my_db_backup.sql'
              );


        $backup =&amp; $this-&gt;dbutil-&gt;backup($prefs); 

        $db_name = 'backup-on-'. date(""Y-m-d-H-i-s"") .'.zip';
        $save = 'pathtobkfolder/'.$db_name;

        $this-&gt;load-&gt;helper('file');
        write_file($save, $backup); 


        $this-&gt;load-&gt;helper('download');
        force_download($db_name, $backup); 
</code></pre>

<p><a href=""http://w3facility.org/question/backup-mysql-database-with-codeigniter/"" rel=""nofollow"">http://w3facility.org/question/backup-mysql-database-with-codeigniter/</a></p>

<p><a href=""http://www.codeigniter.com/user_guide/database/utilities.html#backup-your-database"" rel=""nofollow"">http://www.codeigniter.com/user_guide/database/utilities.html#backup-your-database</a></p>

<p><a href=""http://www-scf.usc.edu/~adportno/apache/htdocs/adportno/hw5/user_guide/database/utilities.html#backup"" rel=""nofollow"">http://www-scf.usc.edu/~adportno/apache/htdocs/adportno/hw5/user_guide/database/utilities.html#backup</a></p>",0
31934749,How to backup the whole database 30mins once automattically?,"<p>I am using codeigniter.I have a function in a controller to backup the whole database. This happens only when I click a button. how to do this automattically.
This is my controller file.</p>

<pre><code>public function backup_db()       
{
    $this-&gt;load-&gt;dbutil();
    $prefs = array(
                    'format'      =&gt; 'zip',
                    'filename'    =&gt; 'ospos.sql'
            );       
    $backup =&amp; $this-&gt;dbutil-&gt;backup($prefs);                
    $file_name =  'elfanto_billing-' . date(""Y-m-d-H-i-s"") .'.zip';
    $save = 'uploads/'.$file_name;
    $this-&gt;load-&gt;helper('download');
    while (ob_get_level())
    {
        ob_end_clean();
    }
    force_download($file_name, $backup);
}
</code></pre>

<p>How to code for this? Can someone help me?</p>",php|mysql|codeigniter,"<p>@sundar nivash: please check this, it may be helpful.</p>

<pre><code>http://stackoverflow.com/questions/14093020/backup-mysql-database-with-codeigniter
</code></pre>",-1
31924220,PHPStorm Debug CLI to HTTP Request,"<p>I am trying to debug a Laravel artisan command, executed via CLI, which in turn calls an external endpoint (via Guzzle).
Both the original app and the external endpoint are available locally, open in PHPStorm as two separate projects.</p>

<p>I'm able to debug the CLI command by running this command in terminal:</p>

<pre><code>export XDEBUG_CONFIG=""remote_enable=1 remote_mode=req remote_port=9000 remote_host=127.0.0.1 remote_connect_back=0""
</code></pre>

<p>(or for windows):</p>

<pre><code>set XDEBUG_CONFIG=""remote_enable=1 remote_mode=req remote_port=9000 remote_host=127.0.0.1 remote_connect_back=0""
</code></pre>

<p>As illustrated on <a href=""https://confluence.jetbrains.com/display/PhpStorm/Simultaneous+debugging+sessions+with+PhpStorm"" rel=""nofollow"">PHPStorm docs</a>, you can execute an external script by passing a debug query string:</p>

<pre><code>$debuggingQuerystring = '';
if (isset($_GET['XDEBUG_SESSION_START'])) { // xdebug
    $debuggingQuerystring = 'XDEBUG_SESSION_START=' . $_GET['XDEBUG_SESSION_START'];
}
if (isset($_COOKIE['XDEBUG_SESSION'])) { // xdebug (cookie)
    $debuggingQuerystring = 'XDEBUG_SESSION_START=PHPSTORM';
}
if (isset($_GET['start_debug'])) { // zend debugger
    $debuggingQuerystring = 'start_debug=' . $_GET['start_debug'];
}

$personJson = file_get_contents('http://127.0.0.1:778/backend.php?' . $debuggingQuerystring);
</code></pre>

<p>The current problem that when executed via CLI, the $debugQueryString is empty. What do we pass along and how to the external url which will allow debugging on the second project?</p>

<pre><code>$client = new Guzzle\Http\Client($this-&gt;webhook_url);
$response = $client-&gt;post('', [], $this-&gt;params)-&gt;send();

$code = $response-&gt;getStatusCode();
</code></pre>",php|debugging|phpstorm|xdebug,"<p>This was easier than I thought.</p>

<pre><code>$debuggingQuerystring = '';
    if (isset($_GET['XDEBUG_SESSION_START'])) { // xdebug
        $debuggingQuerystring = 'XDEBUG_SESSION_START=' . $_GET['XDEBUG_SESSION_START'];
    }
    if (isset($_COOKIE['XDEBUG_SESSION'])) { // xdebug (cookie)
        $debuggingQuerystring = 'XDEBUG_SESSION_START=PHPSTORM';
    }
    if (isset($_GET['start_debug'])) { // zend debugger
        $debuggingQuerystring = 'start_debug=' . $_GET['start_debug'];
    }

    if(empty($debuggingQuerystring))
    {
        $debuggingQuerystring = 'XDEBUG_SESSION_START=PHPSTORM';
    }

    $this-&gt;debugString = $debuggingQuerystring;
</code></pre>

<p>And then the url call:</p>

<pre><code>$client = new Guzzle\Http\Client($this-&gt;webhook_url);
$response = $client-&gt;post('?' . $this-&gt;debugString, [], $this-&gt;final_data)-&gt;send();

$code = $response-&gt;getStatusCode();
</code></pre>",0
31654389,Why does this function return zero?,"<p>I have a function that is triggered via a jQuery ajax.</p>

<p>Within the function, I stop it via <code>return</code>. For example:</p>

<pre><code>if ($processed_total &lt; 3) {

    echo 'Post is successfully approved. ';

    return;
}
</code></pre>

<p>The problem is that the output will be:</p>

<blockquote>
  <p>Post is successfully approved. 0</p>
</blockquote>

<p>Note the zero at the end. Why is it there? What am I doing wrong?</p>

<p>EDIT: </p>

<p>Here is the JS used for calling the function:</p>

<pre><code>jQuery('.voteapproveform').submit(ajaxSubmit_voteapproveform);

function ajaxSubmit_voteapproveform(){

    var voteapproveform = jQuery(this).serialize();

    jQuery(this).parent().fadeOut(); // hide approve and reject button to prevent further voting

    jQuery.ajax({
        type:""POST"",
        url: SiteParameters.site_url+""/wp-admin/admin-ajax.php"",
        data: voteapproveform,
        context: this,
        success:function(data){
            jQuery(this).fadeOut(); // hide approve box on submit
            jQuery(this).parent().next().html(data); // empty div .modboxfeedback to show returned data

        }
    });

    return false;
}
</code></pre>",php,"<blockquote>
  <p><a href=""http://php.net/manual/en/function.return.php"" rel=""nofollow""><strong>return</strong></a> returns program control to the calling module. Execution resumes at the statement following the called module's invocation.</p>
</blockquote>

<p><strong>Why does this function return zero?</strong></p>

<p><strong>If called from within a function, the return statement immediately ends execution of the current function.</strong> Not the rest of the other scripts or function.</p>

<blockquote>
  <p><strong>For command line scripts, the return statement will NOT return a status to the OS!</strong></p>
</blockquote>

<p>Instead, you must use <a href=""http://php.net/exit"" rel=""nofollow""><code>exit()</code></a></p>

<p><a href=""http://php.net/manual/en/function.return.php"" rel=""nofollow"">Please refer Docs</a>
<a href=""http://php.net/manual/en/function.return.php#116709"" rel=""nofollow"">Also Check This Example</a></p>",1
31654389,Why does this function return zero?,"<p>I have a function that is triggered via a jQuery ajax.</p>

<p>Within the function, I stop it via <code>return</code>. For example:</p>

<pre><code>if ($processed_total &lt; 3) {

    echo 'Post is successfully approved. ';

    return;
}
</code></pre>

<p>The problem is that the output will be:</p>

<blockquote>
  <p>Post is successfully approved. 0</p>
</blockquote>

<p>Note the zero at the end. Why is it there? What am I doing wrong?</p>

<p>EDIT: </p>

<p>Here is the JS used for calling the function:</p>

<pre><code>jQuery('.voteapproveform').submit(ajaxSubmit_voteapproveform);

function ajaxSubmit_voteapproveform(){

    var voteapproveform = jQuery(this).serialize();

    jQuery(this).parent().fadeOut(); // hide approve and reject button to prevent further voting

    jQuery.ajax({
        type:""POST"",
        url: SiteParameters.site_url+""/wp-admin/admin-ajax.php"",
        data: voteapproveform,
        context: this,
        success:function(data){
            jQuery(this).fadeOut(); // hide approve box on submit
            jQuery(this).parent().next().html(data); // empty div .modboxfeedback to show returned data

        }
    });

    return false;
}
</code></pre>",php,"<p>Try this in a unit test environment if you are not sure if it comes from PHP or the JS. </p>

<blockquote>
  <p>php -e filename.php</p>
</blockquote>

<p>might help you, provided you do the groud work for it...</p>

<pre><code>&lt;?php
$processed_total = 2;
if ($processed_total &lt; 3)
{
    echo 'Post is successfully approved. ';
    return;
}
echo ""I am done with the test"";
echo;
?&gt;
</code></pre>

<p>Just by the looks of it, I am sure its not from the PHP code.</p>",-1
48919881,mysqli_query() expects parameter 1 to be mysqli boolean given while inserting unicode data to database,"<p>I want to insert unicode data to database so user the function <code>$mysqli=mysqli_set_charset($con,'utf-8');</code> what is wrong with it?
 I couldn't solve this.</p>

<pre><code>function insert(){

    $con = mysqli_connect('localhost','root','','db_darta');
    $mysqli=mysqli_set_charset($con,'utf-8');
    if (mysqli_connect_errno())
    {
    echo ""Failed to connect to MySQL: "" . mysqli_connect_error();
    exit();
    }
    mysqli_query($mysqli,""insert into tbl_darta (fiscal_year, darta_no, darta_date, patra_date, paper_from, letter_recievedby, subject, file_upload, remarks, created_by, created_date, section) values ('$this-&gt;fiscal_year', '$this-&gt;darta_no', '$this-&gt;darta_date', '$this-&gt;patra_date', '$this-&gt;paper_from', '$this-&gt;letter_recievedby', '$this-&gt;subject', '$this-&gt;file_upload', '$this-&gt;remarks','$this-&gt;created_by','$this-&gt;created_date','$this-&gt;section')"");
}
</code></pre>",php|mysql|mysqli,"<p><strong>In your query you passing argument which Return Value:    TRUE on success. FALSE on failure.</strong></p>

<p>mysqli_query({database connection object}, {your desired query})</p>

<pre><code>    function insert(){

    $con = mysqli_connect('localhost','root','','db_darta');
    if (mysqli_connect_errno())
    {
    echo ""Failed to connect to MySQL: "" . mysqli_connect_error();
    exit();
    }
    mysqli_set_charset($con,""utf8""); // returns true or false
    mysqli_query($con,""insert into tbl_darta (fiscal_year, darta_no, darta_date, patra_date, paper_from, letter_recievedby, subject, file_upload, remarks, created_by, created_date, section) values ('$this-&gt;fiscal_year', '$this-&gt;darta_no', '$this-&gt;darta_date', '$this-&gt;patra_date', '$this-&gt;paper_from', '$this-&gt;letter_recievedby', '$this-&gt;subject', '$this-&gt;file_upload', '$this-&gt;remarks','$this-&gt;created_by','$this-&gt;created_date','$this-&gt;section')"");
}
</code></pre>",0
49088132,Artisan won't connect to mysql - Laravel 4.2,"<p>I cloned a project which is built on laravel 4.2. Currently my Xampp has a  version 7.0.13.1 and  has php version of 7.1.  </p>

<p>When i type <code>php artisan migrate</code>, it gives an error <code>[PDOException] SQLSTATE[HY000] [2002] No such file or directory</code> which means my artisan is not connected to my mysql running on the Xampp. </p>

<p>In the terminal, i tried <code>which php</code> and i get <code>/usr/local/php5/bin/php</code> 
. </p>

<p>Could this be the cause of my problem? That the path doesn't point to my Xampp version 7.0.13.1? </p>

<p>PS: After cloning, i followed the steps on the github page </p>

<pre><code>composer install

$ php artisan migrate

$ php artisan db:seed

$ php artisan serve
</code></pre>

<p>Please help?</p>",php|mysql|laravel,"<p>Tools like <a href=""https://www.apachefriends.org/index.html"" rel=""nofollow noreferrer"">XAMP</a>, <a href=""https://www.mamp.info/en/"" rel=""nofollow noreferrer"">MAMP</a> or <a href=""https://www.wampserver.com/en/"" rel=""nofollow noreferrer"">WAMP</a> have their own PHP and MySQL binaries and do not use a potential globally installed version.<br>
I guess you are using MySQL installed with XAMP, so the socket is not the
default one that you could search in your system but the one in XAMP.</p>

<p>You have two options:</p>

<ol>
<li>Update your global PHP's <code>php.ini</code> to set the <code>pdo_mysql.default_socket</code>
or <code>mysqli.default_socket</code> to the MySQL socket in your XAMP installation
in order to your global PHP binary will be able to connect the your XAMP's
MySQL version.</li>
<li>Use the XAMP's PHP binary (<strong>recommanded</strong>).</li>
</ol>

<p>The recommanded option is the second one, because the XAMP's PHP binary is
already configured to use the right MySQL socket and does not need to
update any configuration file.</p>

<p>I explain below how to find the MySQL socket and how to locate the PHP binary directory.</p>

<p><strong>Find the MySQL socket path:</strong></p>

<ul>
<li><p>Write the following code in you Web server directory (usually <code>www/</code>, <code>htdocs/</code> or <code>public_html/</code>)</p>

<pre><code>&lt;?php
//phpinfo.php
phpinfo();
</code></pre></li>
<li><p>Open the URL <code>http://localhost/phpinfo.php</code> in your Web browser (adapt the
host name if required).</p></li>
<li><p>According to the PHP extension you use to connect to the datase search for
either <code>pdo_mysql.default_socket</code> or <code>mysqli.default_socket</code> and you'll
find the path to the socket file.</p></li>
</ul>

<p>See <a href=""https://secure.php.net/manual/en/function.phpinfo.php"" rel=""nofollow noreferrer"">phpinfo()</a>.</p>

<p><strong>Find the PHP binary directory:</strong></p>

<ul>
<li><p>Write the following code in your Web server directory</p>

<pre><code>&lt;?php
//bindir.php
echo PHP_BINDIR;
</code></pre></li>
<li><p>Open the URL <code>http://localhost/bindir.php</code> in your Web browser.</p></li>
<li>The path to the directory hosting the PHP binary is written.</li>
</ul>

<p>Thanks to <a href=""https://stackoverflow.com/a/3889557/4932315"">this answer</a> for the information.<br>
See the <a href=""https://secure.php.net/manual/en/reserved.constants.php#constant.php-bindir"" rel=""nofollow noreferrer"">documentation</a> about pre-defined constants.</p>

<p>In your case the directory hosting PHP is <code>/Applications/XAMPP/bin/</code> so you
should run the command:</p>

<pre><code>/Applications/XAMPP/bin/php artisan migrate
</code></pre>",2
49088132,Artisan won't connect to mysql - Laravel 4.2,"<p>I cloned a project which is built on laravel 4.2. Currently my Xampp has a  version 7.0.13.1 and  has php version of 7.1.  </p>

<p>When i type <code>php artisan migrate</code>, it gives an error <code>[PDOException] SQLSTATE[HY000] [2002] No such file or directory</code> which means my artisan is not connected to my mysql running on the Xampp. </p>

<p>In the terminal, i tried <code>which php</code> and i get <code>/usr/local/php5/bin/php</code> 
. </p>

<p>Could this be the cause of my problem? That the path doesn't point to my Xampp version 7.0.13.1? </p>

<p>PS: After cloning, i followed the steps on the github page </p>

<pre><code>composer install

$ php artisan migrate

$ php artisan db:seed

$ php artisan serve
</code></pre>

<p>Please help?</p>",php|mysql|laravel,<p>Did you have a .env file with an existant database and an authorised user and password for that database? </p>,0
49022212,Get file from blob url in Laravel,"<p>I'm getting the blob URL as 
<code>blob:http://localhost:3000/a7e2a2d5-6c2d-462c-acbf-171ff64e1e2d</code>from the frontend.It contains a zip file.I need to download the zip file from that url and store it in the server.
<code>$request-&gt;values['modelfile']</code> has this blob url.
How can i get the file from that URL in the controller?</p>",php|laravel|file-upload|laravel-5.3,"<pre><code>    &lt;?php
$upload_dir = ""upload/"";
$img = $_POST['blob_data'];
$img = str_replace('data:image/png;base64,', '', $img);
$img = str_replace(' ', '+', $img);
$data = base64_decode($img);
$file = $upload_dir . mktime() . "".png"";
$success = file_put_contents($file, $data);
print $success ? $file : 'Unable to save the file.';
?&gt;
</code></pre>",0
49022212,Get file from blob url in Laravel,"<p>I'm getting the blob URL as 
<code>blob:http://localhost:3000/a7e2a2d5-6c2d-462c-acbf-171ff64e1e2d</code>from the frontend.It contains a zip file.I need to download the zip file from that url and store it in the server.
<code>$request-&gt;values['modelfile']</code> has this blob url.
How can i get the file from that URL in the controller?</p>",php|laravel|file-upload|laravel-5.3,"<p>You can download the file from url using :</p>

<pre><code>$content = file_get_contents('http://example.com/image.php'); // URL of your blob object
file_put_contents('/my/folder/flower.jpg', $content);
</code></pre>

<p>Reference : <a href=""https://stackoverflow.com/a/724397/1740102"">https://stackoverflow.com/a/724397/1740102</a></p>

<p>Or</p>

<pre><code>$ch = curl_init('http://example.com/image.php');
$fp = fopen('/my/folder/flower.gif', 'wb');
curl_setopt($ch, CURLOPT_FILE, $fp);
curl_setopt($ch, CURLOPT_HEADER, 0);
curl_exec($ch);
curl_close($ch);
fclose($fp);
</code></pre>

<p>Reference : <a href=""https://stackoverflow.com/a/724449/1740102"">https://stackoverflow.com/a/724449/1740102</a></p>",1
49066626,How to retrieve data from table which is separated by comma in sql?,"<p>I have table students containing data like given below :</p>

<pre><code>id       name       activity
1        susan      1,2
2        denny      1,2,3
3        ken        3
</code></pre>

<p>I want to choose all the data like name and id from this table having activity equal to 2. I have done a sql query using like but it will not work.</p>

<pre><code>$sqll = mysqli_query($con,""SELECT id,studentname FROM students WHERE activity LIKE '%$activity'"");
</code></pre>

<p>If another row contains data like <code>id : 4 name:ben activity : 22</code> it will show this row also. I want the rows containing activity 2 only.</p>

<p>Can anyone suggest a solution for this ?</p>",php|mysql|sql|database-design,"<p>I agree with the comments so far about normalising the data but to answer your question with the table structure as it is you can do this:</p>

<pre><code>$sqll = mysqli_query($con,""SELECT id,studentname FROM students WHERE CONCAT(',',activity,',') LIKE '%,$activity,%'"");
</code></pre>

<p>Note, you concatenate a comma either side of the field data and the specific activity you are looking for. Also note, I added a % on the right of the like as well so that ""denny"" will be caught</p>",0
49066626,How to retrieve data from table which is separated by comma in sql?,"<p>I have table students containing data like given below :</p>

<pre><code>id       name       activity
1        susan      1,2
2        denny      1,2,3
3        ken        3
</code></pre>

<p>I want to choose all the data like name and id from this table having activity equal to 2. I have done a sql query using like but it will not work.</p>

<pre><code>$sqll = mysqli_query($con,""SELECT id,studentname FROM students WHERE activity LIKE '%$activity'"");
</code></pre>

<p>If another row contains data like <code>id : 4 name:ben activity : 22</code> it will show this row also. I want the rows containing activity 2 only.</p>

<p>Can anyone suggest a solution for this ?</p>",php|mysql|sql|database-design,"<pre><code>SELECT  id, studentname
    FROM  students
    WHERE  FIND_IN_SET(""$activity"", activity);
</code></pre>",0
4587819,How to get the whole XML elements of a particular namespace with their tags?,"<p>I cannot find a specific question like this so I'm posting. Hopefully, this will be of general use.</p>

<p>I have a file that includes XML tags of ""<code>&lt;w:t&gt; data data.....&lt;/w:t&gt;</code>"". There is a lot of other stuff too. I need to capture everything within (and including) the <code>&lt;w:t&gt;&lt;/w:t&gt;</code> tags.</p>

<p>I'd appreciate hearing suggestions on how to proceed.</p>

<p>Thanks in advance..</p>

<p>David</p>",php|xml-namespaces|xml-parsing,"<p>You should really use a XML DOM parser like <a href=""http://php.net/simplexml"" rel=""nofollow"">SimpleXML</a>:</p>

<pre><code>$string = '&lt;?xml version=""1.0""?&gt;
&lt;root xmlns:w=""http://example.com/""&gt;
    &lt;w:t&gt;some data...&lt;/w:t&gt;
    &lt;not-captured&gt;data data&lt;/not-captured&gt;
    &lt;w:t&gt;more data...&lt;/w:t&gt;
&lt;/root&gt;';
$doc = simplexml_load_string($string);
foreach ($doc-&gt;xpath('//w:t') as $elem) {
    var_dump($elem-&gt;asXML());
}
</code></pre>

<p>If you do not specify the namespace for <em>w</em> in your XML document, use <a href=""http://php.net/simplexmlelement.registerxpathnamespace"" rel=""nofollow"">SimpleXMLElement::registerXPathNamespace</a>:</p>

<pre><code>$doc-&gt;registerXPathNamespace('w', 'http://example.com/');
</code></pre>",1
4587819,How to get the whole XML elements of a particular namespace with their tags?,"<p>I cannot find a specific question like this so I'm posting. Hopefully, this will be of general use.</p>

<p>I have a file that includes XML tags of ""<code>&lt;w:t&gt; data data.....&lt;/w:t&gt;</code>"". There is a lot of other stuff too. I need to capture everything within (and including) the <code>&lt;w:t&gt;&lt;/w:t&gt;</code> tags.</p>

<p>I'd appreciate hearing suggestions on how to proceed.</p>

<p>Thanks in advance..</p>

<p>David</p>",php|xml-namespaces|xml-parsing,"<p>Using DomXml is preferred option since it does not restrict you to searching for other tags/data.</p>

<p>But using regular expressions makes far less code so I would go for preg_match_all if those tags are only thing you need.</p>

<pre><code>$string = '&lt;?xml version=""1.0""?&gt;
&lt;root&gt;
    &lt;w:t&gt;some data...&lt;/w:t&gt;
    &lt;not-captured&gt;data data&lt;/not-captured&gt;
    &lt;w:t&gt;more data...&lt;/w:t&gt;
&lt;/root&gt;
&lt;/xml&gt;';

preg_match_all('/&lt;w\:t&gt;.*&lt;\/w\:t&gt;/is', $string, $matches);
var_dump($matches);
</code></pre>

<p>response:</p>

<pre><code>array(1) {
  [0]=&gt;
  array(2) {
    [0]=&gt;
    string(23) ""&lt;w:t&gt;some data...&lt;/w:t&gt;""
    [1]=&gt;
    string(23) ""&lt;w:t&gt;more data...&lt;/w:t&gt;""
  }
}
</code></pre>

<p>Edit: /is modifier added to regex</p>",-1
4587819,How to get the whole XML elements of a particular namespace with their tags?,"<p>I cannot find a specific question like this so I'm posting. Hopefully, this will be of general use.</p>

<p>I have a file that includes XML tags of ""<code>&lt;w:t&gt; data data.....&lt;/w:t&gt;</code>"". There is a lot of other stuff too. I need to capture everything within (and including) the <code>&lt;w:t&gt;&lt;/w:t&gt;</code> tags.</p>

<p>I'd appreciate hearing suggestions on how to proceed.</p>

<p>Thanks in advance..</p>

<p>David</p>",php|xml-namespaces|xml-parsing,"<p>Adding to the previous answer, I would include an 's' in lower-case after the i in the end to take care of line breaks. </p>

<p>Good point by Mr. Gumbo below. Yes do also add a 'U' in upper-case after the 's' to make the expression less greedy otherwise it won't work as expected</p>

<p>e.g.</p>

<p>preg_match_all('/.*&lt;\/w\:t>/isU', $string, $matches);</p>",1
4797228,Ajax request with Javascript,"<p>I have a page on which I want to show a couple of MySQL tables.<br>
There is one table on the right that may only change when a different person is selected.<br>
De second table is the main table in the center. I have a dropdown box with contains every person. The results from the selected person is showed in the middle table. There are multiple results for each person so there is a second dropdown box to choose which of these results you want to show. This is al done by a Ajax XMLHTTP request. </p>

<p>The problem is that the right table uses some javascript. I know this is not possible with Ajax in combination with a XMLHTTP-request. But without the javascript I can't make what I want. Is there a way, to show the right table after the javascript is finished doing his work? </p>

<p>I now use frames. This is not very nice. Because I have to style both pages to look nice together, and that's not so easy as said. But this way it is doing as I want it to be. </p>

<p>So I searched the internet (a long time) and just a few minutes before I wanted to give up i found this piece of code (coming from <a href=""http://www.javascriptkit.com/dhtmltutors/ajaxincludes.shtml"" rel=""nofollow"">http://www.javascriptkit.com/dhtmltutors/ajaxincludes.shtml</a>):  </p>

<pre><code>function HttpRequest(url){ 
var pageRequest = false //variable to hold ajax object 
   /*@cc_on
      @if (@_jscript_version &gt;= 5)
         try {
         pageRequest = new ActiveXObject(""Msxml2.XMLHTTP"")
         }
         catch (e){
            try {
            pageRequest = new ActiveXObject(""Microsoft.XMLHTTP"")
            }
            catch (e2){
            pageRequest = false
            }
         }
      @end
   @*/

   if (!pageRequest &amp;&amp; typeof XMLHttpRequest != 'undefined')
      pageRequest = new XMLHttpRequest()

   if (pageRequest){ //if pageRequest is not false
      pageRequest.open('GET', url, false) //get page synchronously
      pageRequest.send(null)
      embedpage(pageRequest)
   } 
} 

function embedpage(request){ 
   //if viewing page offline or the document was successfully retrieved online (status code=2000)
   if (window.location.href.indexOf(""http"")==-1 || request.status==200)
      document.write(request.responseText)
   }
}

HttpRequest(""external.htm"") //include ""external.htm"" onto current page   
</code></pre>

<p>This code works perfectly... The first time. As soon as you change the person the whole page disappears and only the table shows up and firefox keeps ""loading"" the page (you see that circle going round). I do know how to edit the code above to fit my needs but I have no understanding of Ajax or how to fix this problem. Hopefully someone can help me and give me a good solution! And tell me why the code above isn't working properly? </p>

<p>Thanks in advance! </p>

<p>Milaan </p>",php|ajax|xmlhttprequest,"<p>You might want to use dom functions to add your downloaded content to the existing document, like:</p>

<pre><code>document.getElementById('mypanel').innerHTML = '&lt;html code goes here&gt;';
</code></pre>

<p>The best idea probably would be to use a slim javascript framework lie jquery which helps you with browser compatibility.</p>",0
4797228,Ajax request with Javascript,"<p>I have a page on which I want to show a couple of MySQL tables.<br>
There is one table on the right that may only change when a different person is selected.<br>
De second table is the main table in the center. I have a dropdown box with contains every person. The results from the selected person is showed in the middle table. There are multiple results for each person so there is a second dropdown box to choose which of these results you want to show. This is al done by a Ajax XMLHTTP request. </p>

<p>The problem is that the right table uses some javascript. I know this is not possible with Ajax in combination with a XMLHTTP-request. But without the javascript I can't make what I want. Is there a way, to show the right table after the javascript is finished doing his work? </p>

<p>I now use frames. This is not very nice. Because I have to style both pages to look nice together, and that's not so easy as said. But this way it is doing as I want it to be. </p>

<p>So I searched the internet (a long time) and just a few minutes before I wanted to give up i found this piece of code (coming from <a href=""http://www.javascriptkit.com/dhtmltutors/ajaxincludes.shtml"" rel=""nofollow"">http://www.javascriptkit.com/dhtmltutors/ajaxincludes.shtml</a>):  </p>

<pre><code>function HttpRequest(url){ 
var pageRequest = false //variable to hold ajax object 
   /*@cc_on
      @if (@_jscript_version &gt;= 5)
         try {
         pageRequest = new ActiveXObject(""Msxml2.XMLHTTP"")
         }
         catch (e){
            try {
            pageRequest = new ActiveXObject(""Microsoft.XMLHTTP"")
            }
            catch (e2){
            pageRequest = false
            }
         }
      @end
   @*/

   if (!pageRequest &amp;&amp; typeof XMLHttpRequest != 'undefined')
      pageRequest = new XMLHttpRequest()

   if (pageRequest){ //if pageRequest is not false
      pageRequest.open('GET', url, false) //get page synchronously
      pageRequest.send(null)
      embedpage(pageRequest)
   } 
} 

function embedpage(request){ 
   //if viewing page offline or the document was successfully retrieved online (status code=2000)
   if (window.location.href.indexOf(""http"")==-1 || request.status==200)
      document.write(request.responseText)
   }
}

HttpRequest(""external.htm"") //include ""external.htm"" onto current page   
</code></pre>

<p>This code works perfectly... The first time. As soon as you change the person the whole page disappears and only the table shows up and firefox keeps ""loading"" the page (you see that circle going round). I do know how to edit the code above to fit my needs but I have no understanding of Ajax or how to fix this problem. Hopefully someone can help me and give me a good solution! And tell me why the code above isn't working properly? </p>

<p>Thanks in advance! </p>

<p>Milaan </p>",php|ajax|xmlhttprequest,"<p>jQuery should make things easier for you. Your code should look something like this. </p>

<pre><code>$.post(""somepage.php"", function(data){
   $(""#divID"").html(data);
});

&lt;div id=""divID""&gt;&lt;/div&gt;
</code></pre>

<p>And <code>somepage.php</code> could be something like this:</p>

<pre><code>&lt;?php
   // get table content
   echo ""&lt;table&gt;...&lt;/table&gt;"";
?&gt;
</code></pre>",0
4797228,Ajax request with Javascript,"<p>I have a page on which I want to show a couple of MySQL tables.<br>
There is one table on the right that may only change when a different person is selected.<br>
De second table is the main table in the center. I have a dropdown box with contains every person. The results from the selected person is showed in the middle table. There are multiple results for each person so there is a second dropdown box to choose which of these results you want to show. This is al done by a Ajax XMLHTTP request. </p>

<p>The problem is that the right table uses some javascript. I know this is not possible with Ajax in combination with a XMLHTTP-request. But without the javascript I can't make what I want. Is there a way, to show the right table after the javascript is finished doing his work? </p>

<p>I now use frames. This is not very nice. Because I have to style both pages to look nice together, and that's not so easy as said. But this way it is doing as I want it to be. </p>

<p>So I searched the internet (a long time) and just a few minutes before I wanted to give up i found this piece of code (coming from <a href=""http://www.javascriptkit.com/dhtmltutors/ajaxincludes.shtml"" rel=""nofollow"">http://www.javascriptkit.com/dhtmltutors/ajaxincludes.shtml</a>):  </p>

<pre><code>function HttpRequest(url){ 
var pageRequest = false //variable to hold ajax object 
   /*@cc_on
      @if (@_jscript_version &gt;= 5)
         try {
         pageRequest = new ActiveXObject(""Msxml2.XMLHTTP"")
         }
         catch (e){
            try {
            pageRequest = new ActiveXObject(""Microsoft.XMLHTTP"")
            }
            catch (e2){
            pageRequest = false
            }
         }
      @end
   @*/

   if (!pageRequest &amp;&amp; typeof XMLHttpRequest != 'undefined')
      pageRequest = new XMLHttpRequest()

   if (pageRequest){ //if pageRequest is not false
      pageRequest.open('GET', url, false) //get page synchronously
      pageRequest.send(null)
      embedpage(pageRequest)
   } 
} 

function embedpage(request){ 
   //if viewing page offline or the document was successfully retrieved online (status code=2000)
   if (window.location.href.indexOf(""http"")==-1 || request.status==200)
      document.write(request.responseText)
   }
}

HttpRequest(""external.htm"") //include ""external.htm"" onto current page   
</code></pre>

<p>This code works perfectly... The first time. As soon as you change the person the whole page disappears and only the table shows up and firefox keeps ""loading"" the page (you see that circle going round). I do know how to edit the code above to fit my needs but I have no understanding of Ajax or how to fix this problem. Hopefully someone can help me and give me a good solution! And tell me why the code above isn't working properly? </p>

<p>Thanks in advance! </p>

<p>Milaan </p>",php|ajax|xmlhttprequest,"<p><code>document.write</code> only works when the page is loading for the first time, Once the page rendering is done, calling <code>document.write</code> will clear the page first.</p>

<p><a href=""https://developer.mozilla.org/en/document.write"" rel=""nofollow"">https://developer.mozilla.org/en/document.write</a></p>

<p>What you might want to do instead is:</p>

<pre><code>if (window.location.href.indexOf(""http"")==-1 || request.status==200) {
    var elm = document.createElement('div');
    elm.innerHTML = request.responseText;
    document.getElementsByTagName('body')[0].appendChild(elm);
}
</code></pre>",2
4797228,Ajax request with Javascript,"<p>I have a page on which I want to show a couple of MySQL tables.<br>
There is one table on the right that may only change when a different person is selected.<br>
De second table is the main table in the center. I have a dropdown box with contains every person. The results from the selected person is showed in the middle table. There are multiple results for each person so there is a second dropdown box to choose which of these results you want to show. This is al done by a Ajax XMLHTTP request. </p>

<p>The problem is that the right table uses some javascript. I know this is not possible with Ajax in combination with a XMLHTTP-request. But without the javascript I can't make what I want. Is there a way, to show the right table after the javascript is finished doing his work? </p>

<p>I now use frames. This is not very nice. Because I have to style both pages to look nice together, and that's not so easy as said. But this way it is doing as I want it to be. </p>

<p>So I searched the internet (a long time) and just a few minutes before I wanted to give up i found this piece of code (coming from <a href=""http://www.javascriptkit.com/dhtmltutors/ajaxincludes.shtml"" rel=""nofollow"">http://www.javascriptkit.com/dhtmltutors/ajaxincludes.shtml</a>):  </p>

<pre><code>function HttpRequest(url){ 
var pageRequest = false //variable to hold ajax object 
   /*@cc_on
      @if (@_jscript_version &gt;= 5)
         try {
         pageRequest = new ActiveXObject(""Msxml2.XMLHTTP"")
         }
         catch (e){
            try {
            pageRequest = new ActiveXObject(""Microsoft.XMLHTTP"")
            }
            catch (e2){
            pageRequest = false
            }
         }
      @end
   @*/

   if (!pageRequest &amp;&amp; typeof XMLHttpRequest != 'undefined')
      pageRequest = new XMLHttpRequest()

   if (pageRequest){ //if pageRequest is not false
      pageRequest.open('GET', url, false) //get page synchronously
      pageRequest.send(null)
      embedpage(pageRequest)
   } 
} 

function embedpage(request){ 
   //if viewing page offline or the document was successfully retrieved online (status code=2000)
   if (window.location.href.indexOf(""http"")==-1 || request.status==200)
      document.write(request.responseText)
   }
}

HttpRequest(""external.htm"") //include ""external.htm"" onto current page   
</code></pre>

<p>This code works perfectly... The first time. As soon as you change the person the whole page disappears and only the table shows up and firefox keeps ""loading"" the page (you see that circle going round). I do know how to edit the code above to fit my needs but I have no understanding of Ajax or how to fix this problem. Hopefully someone can help me and give me a good solution! And tell me why the code above isn't working properly? </p>

<p>Thanks in advance! </p>

<p>Milaan </p>",php|ajax|xmlhttprequest,"<p>It´s been a long time since I´ve seen code like this, but one problem I can see, is that you don´t include any kind of variable in your <code>XMLHttpRequest</code>; no user ID or anything. Is it just supposed to load a static page?</p>

<p>And is there any reason you can´t use a library like jQuery? It´s no magic bullet but it will make your life and ajax requests a lot easier.</p>",0
4694500,Does using $_SERVER['PHP_SELF'] reset the session?,"<p>I am finding that the session value is being reset each time I submit the form. The snippet is as follows:</p>

<pre><code> &lt;? php session_start(); ?&gt;
&lt;html&gt;
&lt;head&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;?php
if($_SESSION['idi']=="""")
{
$_SESSION['idi'] = $_GET['id6'];
$_SESSION['class1'] = $_GET['class6'];
$_SESSION['section1'] = $_GET['section6'];
}
echo $_SESSION['idi'].' '.$_SESSION['class1'].' '.$_SESSION['section1'].'&lt;br&gt;';
print session_id(); 
?&gt;
&lt;form method=""post"" action=""""&gt;
&lt;table&gt;
&lt;tr&gt;
    &lt;td&gt; &lt;label&gt; CLASS NAME &lt;/label&gt;
    &lt;td&gt;&lt;input type=""text"" name=""class_name"" value=""&lt;?php echo $_SESSION['class1'] ;?&gt;""&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
    &lt;td&gt;&lt;label&gt; SECTION &lt;/label&gt;
    &lt;td&gt;&lt;input type=""text"" name=""section"" value=""&lt;?php echo $_SESSION['section1'] ;?&gt;""&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
    &lt;td&gt;
        &lt;input type=""submit"" value=""UPDATE"" name=""update1"" &gt;
    &lt;/td&gt;
&lt;/tr&gt;
&lt;/table&gt;
&lt;/form&gt;
&lt;?php
    if(isset($_POST['update1'])){
        $class_name = $_POST['class_name'];
        $section = $_POST['section'];
        update_data($_SESSION['idi'],$_POST['class_name'],$_POST['section']);
        echo 'did='.$_SESSION['idi'].' class1='.$_SESSION['class1'].' section1='.$_SESSION['section1'].'&lt;br&gt;';
    }

function update_data($id1,$class1,$section1)
    {
        echo'suresh &lt;br&gt;';
        echo $id1.' '.$class1.' '.$section1.'&lt;br&gt;';
        $dbc = mysqli_connect('localhost','root','','cce')
                    or die('Error connecting to MySQL server');

        $query = ""SELECT * FROM class"";
        $result = mysqli_query($dbc,$query)
                    or die(""Error connecting to database1"");

        //while($row = mysqli_fetch_array($result))
        //{
            echo'TEST&lt;br&gt;';
            $query=""UPDATE class SET class_name='"".$class1.""', class_section='"".$section1.""' WHERE id = '"".$id1.""'"";
            $result = mysqli_query($dbc,$query)
                    or die(""Error connecting to database2"");
            echo'TEST2&lt;br&gt;';
        //}
        mysqli_close($dbc); 
    }
?&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>

<p>The problem is each time I submit the form, I am expecting to see the same session value printed out. BUT as soon as I hit submit, the value disappears and prints nothing...
However IF I MAKE action="""" in the form THEN each time I submit the form the value of <code>$_SESSION['abc']</code> is still the same, 99.</p>

<p>Why is this? Does <code>$_SERVER['PHP_SELF']</code> reset the session? Or is it anything in the configuration?</p>",php,"<p>PHP_SELF has nothing to do with sessions. There must be something wrong in your code.</p>

<p>What i would do is:</p>

<pre><code>$Value = '';
if(isset($_GET['myValue']) {
    $Value = $_GET['myValue'];
}
if(!empty($_POST)&amp;&amp;isset($_POST['myValue']) {
    //Do stuff here
}

&lt;form action=""&lt;? php echo ""$_SERVER['PHP_SELF']""; ?&gt;"" method=""POST""&gt;
&lt;input type=""hidden"" name=""myValue"" value=""&lt;?php echo $Value;?&gt;"" /&gt;
</code></pre>",0
4694500,Does using $_SERVER['PHP_SELF'] reset the session?,"<p>I am finding that the session value is being reset each time I submit the form. The snippet is as follows:</p>

<pre><code> &lt;? php session_start(); ?&gt;
&lt;html&gt;
&lt;head&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;?php
if($_SESSION['idi']=="""")
{
$_SESSION['idi'] = $_GET['id6'];
$_SESSION['class1'] = $_GET['class6'];
$_SESSION['section1'] = $_GET['section6'];
}
echo $_SESSION['idi'].' '.$_SESSION['class1'].' '.$_SESSION['section1'].'&lt;br&gt;';
print session_id(); 
?&gt;
&lt;form method=""post"" action=""""&gt;
&lt;table&gt;
&lt;tr&gt;
    &lt;td&gt; &lt;label&gt; CLASS NAME &lt;/label&gt;
    &lt;td&gt;&lt;input type=""text"" name=""class_name"" value=""&lt;?php echo $_SESSION['class1'] ;?&gt;""&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
    &lt;td&gt;&lt;label&gt; SECTION &lt;/label&gt;
    &lt;td&gt;&lt;input type=""text"" name=""section"" value=""&lt;?php echo $_SESSION['section1'] ;?&gt;""&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
    &lt;td&gt;
        &lt;input type=""submit"" value=""UPDATE"" name=""update1"" &gt;
    &lt;/td&gt;
&lt;/tr&gt;
&lt;/table&gt;
&lt;/form&gt;
&lt;?php
    if(isset($_POST['update1'])){
        $class_name = $_POST['class_name'];
        $section = $_POST['section'];
        update_data($_SESSION['idi'],$_POST['class_name'],$_POST['section']);
        echo 'did='.$_SESSION['idi'].' class1='.$_SESSION['class1'].' section1='.$_SESSION['section1'].'&lt;br&gt;';
    }

function update_data($id1,$class1,$section1)
    {
        echo'suresh &lt;br&gt;';
        echo $id1.' '.$class1.' '.$section1.'&lt;br&gt;';
        $dbc = mysqli_connect('localhost','root','','cce')
                    or die('Error connecting to MySQL server');

        $query = ""SELECT * FROM class"";
        $result = mysqli_query($dbc,$query)
                    or die(""Error connecting to database1"");

        //while($row = mysqli_fetch_array($result))
        //{
            echo'TEST&lt;br&gt;';
            $query=""UPDATE class SET class_name='"".$class1.""', class_section='"".$section1.""' WHERE id = '"".$id1.""'"";
            $result = mysqli_query($dbc,$query)
                    or die(""Error connecting to database2"");
            echo'TEST2&lt;br&gt;';
        //}
        mysqli_close($dbc); 
    }
?&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>

<p>The problem is each time I submit the form, I am expecting to see the same session value printed out. BUT as soon as I hit submit, the value disappears and prints nothing...
However IF I MAKE action="""" in the form THEN each time I submit the form the value of <code>$_SESSION['abc']</code> is still the same, 99.</p>

<p>Why is this? Does <code>$_SERVER['PHP_SELF']</code> reset the session? Or is it anything in the configuration?</p>",php,"<p>When you use <code>action=""""</code> then the url to which the form is redirected is the exact url that is currently in location bar. If however, you use <code>$_SERVER['PHP_SELF']</code>, the url is stripped of any variables, so $_GET['id'] is empty.</p>

<p>Also it should be <code>echo $_SERVER['PHP_SELF'];</code> or <code>echo  ""{$_SERVER['PHP_SELF']}"";</code></p>",3
4694500,Does using $_SERVER['PHP_SELF'] reset the session?,"<p>I am finding that the session value is being reset each time I submit the form. The snippet is as follows:</p>

<pre><code> &lt;? php session_start(); ?&gt;
&lt;html&gt;
&lt;head&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;?php
if($_SESSION['idi']=="""")
{
$_SESSION['idi'] = $_GET['id6'];
$_SESSION['class1'] = $_GET['class6'];
$_SESSION['section1'] = $_GET['section6'];
}
echo $_SESSION['idi'].' '.$_SESSION['class1'].' '.$_SESSION['section1'].'&lt;br&gt;';
print session_id(); 
?&gt;
&lt;form method=""post"" action=""""&gt;
&lt;table&gt;
&lt;tr&gt;
    &lt;td&gt; &lt;label&gt; CLASS NAME &lt;/label&gt;
    &lt;td&gt;&lt;input type=""text"" name=""class_name"" value=""&lt;?php echo $_SESSION['class1'] ;?&gt;""&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
    &lt;td&gt;&lt;label&gt; SECTION &lt;/label&gt;
    &lt;td&gt;&lt;input type=""text"" name=""section"" value=""&lt;?php echo $_SESSION['section1'] ;?&gt;""&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
    &lt;td&gt;
        &lt;input type=""submit"" value=""UPDATE"" name=""update1"" &gt;
    &lt;/td&gt;
&lt;/tr&gt;
&lt;/table&gt;
&lt;/form&gt;
&lt;?php
    if(isset($_POST['update1'])){
        $class_name = $_POST['class_name'];
        $section = $_POST['section'];
        update_data($_SESSION['idi'],$_POST['class_name'],$_POST['section']);
        echo 'did='.$_SESSION['idi'].' class1='.$_SESSION['class1'].' section1='.$_SESSION['section1'].'&lt;br&gt;';
    }

function update_data($id1,$class1,$section1)
    {
        echo'suresh &lt;br&gt;';
        echo $id1.' '.$class1.' '.$section1.'&lt;br&gt;';
        $dbc = mysqli_connect('localhost','root','','cce')
                    or die('Error connecting to MySQL server');

        $query = ""SELECT * FROM class"";
        $result = mysqli_query($dbc,$query)
                    or die(""Error connecting to database1"");

        //while($row = mysqli_fetch_array($result))
        //{
            echo'TEST&lt;br&gt;';
            $query=""UPDATE class SET class_name='"".$class1.""', class_section='"".$section1.""' WHERE id = '"".$id1.""'"";
            $result = mysqli_query($dbc,$query)
                    or die(""Error connecting to database2"");
            echo'TEST2&lt;br&gt;';
        //}
        mysqli_close($dbc); 
    }
?&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>

<p>The problem is each time I submit the form, I am expecting to see the same session value printed out. BUT as soon as I hit submit, the value disappears and prints nothing...
However IF I MAKE action="""" in the form THEN each time I submit the form the value of <code>$_SESSION['abc']</code> is still the same, 99.</p>

<p>Why is this? Does <code>$_SERVER['PHP_SELF']</code> reset the session? Or is it anything in the configuration?</p>",php,<p>Your example does not close the <code>&lt;form&gt;</code> tag -- are you closing the <code>&lt;form&gt;</code> tag?</p>,0
4694500,Does using $_SERVER['PHP_SELF'] reset the session?,"<p>I am finding that the session value is being reset each time I submit the form. The snippet is as follows:</p>

<pre><code> &lt;? php session_start(); ?&gt;
&lt;html&gt;
&lt;head&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;?php
if($_SESSION['idi']=="""")
{
$_SESSION['idi'] = $_GET['id6'];
$_SESSION['class1'] = $_GET['class6'];
$_SESSION['section1'] = $_GET['section6'];
}
echo $_SESSION['idi'].' '.$_SESSION['class1'].' '.$_SESSION['section1'].'&lt;br&gt;';
print session_id(); 
?&gt;
&lt;form method=""post"" action=""""&gt;
&lt;table&gt;
&lt;tr&gt;
    &lt;td&gt; &lt;label&gt; CLASS NAME &lt;/label&gt;
    &lt;td&gt;&lt;input type=""text"" name=""class_name"" value=""&lt;?php echo $_SESSION['class1'] ;?&gt;""&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
    &lt;td&gt;&lt;label&gt; SECTION &lt;/label&gt;
    &lt;td&gt;&lt;input type=""text"" name=""section"" value=""&lt;?php echo $_SESSION['section1'] ;?&gt;""&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
    &lt;td&gt;
        &lt;input type=""submit"" value=""UPDATE"" name=""update1"" &gt;
    &lt;/td&gt;
&lt;/tr&gt;
&lt;/table&gt;
&lt;/form&gt;
&lt;?php
    if(isset($_POST['update1'])){
        $class_name = $_POST['class_name'];
        $section = $_POST['section'];
        update_data($_SESSION['idi'],$_POST['class_name'],$_POST['section']);
        echo 'did='.$_SESSION['idi'].' class1='.$_SESSION['class1'].' section1='.$_SESSION['section1'].'&lt;br&gt;';
    }

function update_data($id1,$class1,$section1)
    {
        echo'suresh &lt;br&gt;';
        echo $id1.' '.$class1.' '.$section1.'&lt;br&gt;';
        $dbc = mysqli_connect('localhost','root','','cce')
                    or die('Error connecting to MySQL server');

        $query = ""SELECT * FROM class"";
        $result = mysqli_query($dbc,$query)
                    or die(""Error connecting to database1"");

        //while($row = mysqli_fetch_array($result))
        //{
            echo'TEST&lt;br&gt;';
            $query=""UPDATE class SET class_name='"".$class1.""', class_section='"".$section1.""' WHERE id = '"".$id1.""'"";
            $result = mysqli_query($dbc,$query)
                    or die(""Error connecting to database2"");
            echo'TEST2&lt;br&gt;';
        //}
        mysqli_close($dbc); 
    }
?&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>

<p>The problem is each time I submit the form, I am expecting to see the same session value printed out. BUT as soon as I hit submit, the value disappears and prints nothing...
However IF I MAKE action="""" in the form THEN each time I submit the form the value of <code>$_SESSION['abc']</code> is still the same, 99.</p>

<p>Why is this? Does <code>$_SERVER['PHP_SELF']</code> reset the session? Or is it anything in the configuration?</p>",php,"<p>PHP_SELF doesn't include GET variables; you need to specify them explicitly (plus change your quotes a bit):</p>

<pre><code>&lt;form action=""&lt;?php echo $_SERVER['PHP_SELF'].""?id="".urlencode($_GET['id']); ?&gt;"" method=""POST""&gt;
</code></pre>",1
4694500,Does using $_SERVER['PHP_SELF'] reset the session?,"<p>I am finding that the session value is being reset each time I submit the form. The snippet is as follows:</p>

<pre><code> &lt;? php session_start(); ?&gt;
&lt;html&gt;
&lt;head&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;?php
if($_SESSION['idi']=="""")
{
$_SESSION['idi'] = $_GET['id6'];
$_SESSION['class1'] = $_GET['class6'];
$_SESSION['section1'] = $_GET['section6'];
}
echo $_SESSION['idi'].' '.$_SESSION['class1'].' '.$_SESSION['section1'].'&lt;br&gt;';
print session_id(); 
?&gt;
&lt;form method=""post"" action=""""&gt;
&lt;table&gt;
&lt;tr&gt;
    &lt;td&gt; &lt;label&gt; CLASS NAME &lt;/label&gt;
    &lt;td&gt;&lt;input type=""text"" name=""class_name"" value=""&lt;?php echo $_SESSION['class1'] ;?&gt;""&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
    &lt;td&gt;&lt;label&gt; SECTION &lt;/label&gt;
    &lt;td&gt;&lt;input type=""text"" name=""section"" value=""&lt;?php echo $_SESSION['section1'] ;?&gt;""&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
    &lt;td&gt;
        &lt;input type=""submit"" value=""UPDATE"" name=""update1"" &gt;
    &lt;/td&gt;
&lt;/tr&gt;
&lt;/table&gt;
&lt;/form&gt;
&lt;?php
    if(isset($_POST['update1'])){
        $class_name = $_POST['class_name'];
        $section = $_POST['section'];
        update_data($_SESSION['idi'],$_POST['class_name'],$_POST['section']);
        echo 'did='.$_SESSION['idi'].' class1='.$_SESSION['class1'].' section1='.$_SESSION['section1'].'&lt;br&gt;';
    }

function update_data($id1,$class1,$section1)
    {
        echo'suresh &lt;br&gt;';
        echo $id1.' '.$class1.' '.$section1.'&lt;br&gt;';
        $dbc = mysqli_connect('localhost','root','','cce')
                    or die('Error connecting to MySQL server');

        $query = ""SELECT * FROM class"";
        $result = mysqli_query($dbc,$query)
                    or die(""Error connecting to database1"");

        //while($row = mysqli_fetch_array($result))
        //{
            echo'TEST&lt;br&gt;';
            $query=""UPDATE class SET class_name='"".$class1.""', class_section='"".$section1.""' WHERE id = '"".$id1.""'"";
            $result = mysqli_query($dbc,$query)
                    or die(""Error connecting to database2"");
            echo'TEST2&lt;br&gt;';
        //}
        mysqli_close($dbc); 
    }
?&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>

<p>The problem is each time I submit the form, I am expecting to see the same session value printed out. BUT as soon as I hit submit, the value disappears and prints nothing...
However IF I MAKE action="""" in the form THEN each time I submit the form the value of <code>$_SESSION['abc']</code> is still the same, 99.</p>

<p>Why is this? Does <code>$_SERVER['PHP_SELF']</code> reset the session? Or is it anything in the configuration?</p>",php,"<p>If I'm reading this correctly, you're submitting the form to this page, right?  And when it gets back to this page, it runs across <code>session_start();</code>, and dutifully restarts the session.  At least that's how I read <a href=""http://us.php.net/manual/en/function.session-start.php"" rel=""nofollow"">this</a>.</p>

<p>You might try moving your <code>session_start();</code> to the inside of your <code>if</code> statement.  That way, it'll only restart the session if it doesn't see that particular session variable.</p>

<p>Alternatively, you can used a named session and pass that along via a cookie, POST, or GET variable.</p>",0
4764859,"how to know if a $string ends with ','?","<blockquote>
  <p><strong>Possible Duplicate:</strong><br>
  <a href=""https://stackoverflow.com/questions/4427172/find-last-character-in-a-string-in-php"">Find last character in a string in PHP</a>  </p>
</blockquote>



<p>hi there?</p>

<p>how can i know if the last char of a $string is ',' ?</p>

<p>thanks a lot?</p>",php,"<pre><code>//$str hold your string
if(substr($str, -1) ==',')
{
   return true
}
</code></pre>",2
4764859,"how to know if a $string ends with ','?","<blockquote>
  <p><strong>Possible Duplicate:</strong><br>
  <a href=""https://stackoverflow.com/questions/4427172/find-last-character-in-a-string-in-php"">Find last character in a string in PHP</a>  </p>
</blockquote>



<p>hi there?</p>

<p>how can i know if the last char of a $string is ',' ?</p>

<p>thanks a lot?</p>",php,"<pre><code>if (substr($str, -1) === ',') 
{
 echo 'it is';
}
</code></pre>",4
4764859,"how to know if a $string ends with ','?","<blockquote>
  <p><strong>Possible Duplicate:</strong><br>
  <a href=""https://stackoverflow.com/questions/4427172/find-last-character-in-a-string-in-php"">Find last character in a string in PHP</a>  </p>
</blockquote>



<p>hi there?</p>

<p>how can i know if the last char of a $string is ',' ?</p>

<p>thanks a lot?</p>",php,"<p>You can use regular expressions for this in PHP:</p>

<pre><code>if (preg_match(""/,$/"", $string)) {
    #DO THIS
} else {
    #DO THAT
}
</code></pre>

<p>This says to check for a match of a comma at the end of the $string.</p>",6
4764859,"how to know if a $string ends with ','?","<blockquote>
  <p><strong>Possible Duplicate:</strong><br>
  <a href=""https://stackoverflow.com/questions/4427172/find-last-character-in-a-string-in-php"">Find last character in a string in PHP</a>  </p>
</blockquote>



<p>hi there?</p>

<p>how can i know if the last char of a $string is ',' ?</p>

<p>thanks a lot?</p>",php,"<pre><code>$string = 'foo,bar,';
if(substr($string, -1) === ','){
    // it ends with ','
}
</code></pre>",10
4764859,"how to know if a $string ends with ','?","<blockquote>
  <p><strong>Possible Duplicate:</strong><br>
  <a href=""https://stackoverflow.com/questions/4427172/find-last-character-in-a-string-in-php"">Find last character in a string in PHP</a>  </p>
</blockquote>



<p>hi there?</p>

<p>how can i know if the last char of a $string is ',' ?</p>

<p>thanks a lot?</p>",php,"<p>See the endsWith function here:</p>

<p><a href=""https://stackoverflow.com/questions/834303/php-startswith-and-endswith-functions"">startsWith() and endsWith() functions in PHP</a></p>",2
4764859,"how to know if a $string ends with ','?","<blockquote>
  <p><strong>Possible Duplicate:</strong><br>
  <a href=""https://stackoverflow.com/questions/4427172/find-last-character-in-a-string-in-php"">Find last character in a string in PHP</a>  </p>
</blockquote>



<p>hi there?</p>

<p>how can i know if the last char of a $string is ',' ?</p>

<p>thanks a lot?</p>",php,"<p>For the micro optimizers:</p>

<pre><code>$string[strlen($string)-1] == "",""
</code></pre>",3
4764859,"how to know if a $string ends with ','?","<blockquote>
  <p><strong>Possible Duplicate:</strong><br>
  <a href=""https://stackoverflow.com/questions/4427172/find-last-character-in-a-string-in-php"">Find last character in a string in PHP</a>  </p>
</blockquote>



<p>hi there?</p>

<p>how can i know if the last char of a $string is ',' ?</p>

<p>thanks a lot?</p>",php,"<p>There are a few options:</p>

<pre><code>if (substr($string, -1) == ',') {
</code></pre>

<p>Or (slightly less readable):</p>

<pre><code>if ($string[strlen($string) - 1] == ',') {
</code></pre>

<p>Or (even less readable):</p>

<pre><code>if (strrpos($string, ',') == strlen($string) - 1) {
</code></pre>

<p>Or (even worse yet):</p>

<pre><code>if (preg_match('/,$/', $string)) {
</code></pre>

<p>Or (wow this is bad):</p>

<pre><code>if (end(explode(',', $string)) == '') {
</code></pre>

<p>The take away, is just use <code>substr($string, -1)</code> and be done with it.  But there are many other alternatives out there...</p>",109
4173867,Random number in range [min - max] using PHP,"<p>Is there a way to generate a random number based on a min and max?</p>

<p>For example, if min was 1 and max 20 it should generate any number between 1 and 20, including 1 and 20?</p>",php|security|random,"<p>In a new <a href=""https://wiki.php.net/rfc/easy_userland_csprng"">PHP7</a> there is a finally a support for a <a href=""http://php.net/manual/en/function.random-int.php"">cryptographically secure pseudo-random integers.</a></p>

<pre><code>int random_int ( int $min , int $max )
</code></pre>

<blockquote>
  <p>random_int — Generates cryptographically secure pseudo-random integers</p>
</blockquote>

<p>which basically makes previous answers obsolete.</p>",29
4173867,Random number in range [min - max] using PHP,"<p>Is there a way to generate a random number based on a min and max?</p>

<p>For example, if min was 1 and max 20 it should generate any number between 1 and 20, including 1 and 20?</p>",php|security|random,"<pre><code>rand(1,20)
</code></pre>

<p>Docs for PHP's rand function are here:</p>

<p><a href=""http://php.net/manual/en/function.rand.php"" rel=""nofollow"">http://php.net/manual/en/function.rand.php</a></p>

<p>Use the <code>srand()</code> function to set the random number generator's seed value.</p>",4
4173867,Random number in range [min - max] using PHP,"<p>Is there a way to generate a random number based on a min and max?</p>

<p>For example, if min was 1 and max 20 it should generate any number between 1 and 20, including 1 and 20?</p>",php|security|random,"<pre><code>(rand() % ($max-$min)) + $min
</code></pre>

<p>or</p>

<pre><code>rand ( $min , $max )
</code></pre>

<p><a href=""http://php.net/manual/en/function.rand.php"" rel=""noreferrer"">http://php.net/manual/en/function.rand.php</a></p>",5
4173867,Random number in range [min - max] using PHP,"<p>Is there a way to generate a random number based on a min and max?</p>

<p>For example, if min was 1 and max 20 it should generate any number between 1 and 20, including 1 and 20?</p>",php|security|random,"<p>A <strike>quicker</strike> faster version would use mt_rand:</p>

<pre><code>$min=1;
$max=20;
echo mt_rand($min,$max);
</code></pre>

<p>Source: <a href=""http://www.php.net/manual/en/function.mt-rand.php"">http://www.php.net/manual/en/function.mt-rand.php</a>. </p>

<p><strong>NOTE:</strong> Your server needs to have the Math PHP module enabled for this to work. If it doesn't, bug your host to enable it, or you have to use the normal (and slower) rand().</p>",17
4173867,Random number in range [min - max] using PHP,"<p>Is there a way to generate a random number based on a min and max?</p>

<p>For example, if min was 1 and max 20 it should generate any number between 1 and 20, including 1 and 20?</p>",php|security|random,"<p>Try This one. It will generate id according to your wish.</p>

<pre><code>function id()
{
 // add limit
$id_length = 20;

// add any character / digit
$alfa = ""abcdefghijklmnopqrstuvwxyz1234567890"";
$token = """";
for($i = 1; $i &lt; $id_length; $i ++) {

  // generate randomly within given character/digits
  @$token .= $alfa[rand(1, strlen($alfa))];

}    
return $token;
}
</code></pre>",0
4173867,Random number in range [min - max] using PHP,"<p>Is there a way to generate a random number based on a min and max?</p>

<p>For example, if min was 1 and max 20 it should generate any number between 1 and 20, including 1 and 20?</p>",php|security|random,"<p>I have bundled the answers here and made it version independent;</p>

<pre><code>function generateRandom($min = 1, $max = 20) {
    if (function_exists('random_int')):
        return random_int($min, $max); // more secure
    elseif (function_exists('mt_rand')):
        return mt_rand($min, $max); // faster
    endif;
    return rand($min, $max); // old
}
</code></pre>",4
4173867,Random number in range [min - max] using PHP,"<p>Is there a way to generate a random number based on a min and max?</p>

<p>For example, if min was 1 and max 20 it should generate any number between 1 and 20, including 1 and 20?</p>",php|security|random,"<pre><code>&lt;?php
  $min=1;
  $max=20;
  echo rand($min,$max);
?&gt;
</code></pre>",132
54131414,How verify if input is numeric,"<p>I have a simple system where this calculation of rates, how to verify if in numerical value is input? I use is_numeric but can  use a only variable, what is alternative?</p>

<p>Show this error: 
Warning: is_nan() expects exactly 1 parameter, 5 given in C:\xampp\htdocs\imposto\processar.php on line 10</p>

<p>follow the code html:</p>

<pre><code>&lt;html lang=""pt-br""&gt;

&lt;head&gt;
    &lt;title&gt;Calc - Imposto&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;h2&gt;SISTEMA DE CÁLCULO DE IMPOSTOS&lt;/h2&gt;
&lt;h3&gt;Subistua vírgula por ponto "".""&lt;/h3&gt;
&lt;form method=""POST"" action=""processar.php""&gt;
    &lt;label&gt;Valor Total: &lt;/label&gt;
    &lt;input type=""text"" name=""valorTotal"" style=""width: 100px;""&gt;&lt;/br&gt;&lt;/br&gt;&lt;/br&gt;

    % &lt;input type=""text"" name=""porcentagem1"" style=""width: 100px;""&gt;&lt;/br&gt;&lt;/br&gt;

    % &lt;input type=""text"" name=""porcentagem2"" style=""width: 100px;""&gt;&lt;/br&gt;&lt;/br&gt;

    % &lt;input type=""text"" name=""porcentagem3"" style=""width: 100px;""&gt;&lt;/br&gt;&lt;/br&gt;

    % &lt;input type=""text"" name=""porcentagem4"" style=""width: 100px;""&gt;&lt;/br&gt;&lt;/br&gt;

    &lt;input type=""submit"" value=""Enivar"" &gt;


     &lt;input type=""reset""&gt;
&lt;/form&gt;

&lt;/body&gt;
&lt;/html&gt;
</code></pre>

<p>follow the code php:</p>

<pre><code>&lt;
?php

$valortotal = $_POST['valorTotal'];
$porcentagem1 = $_POST['porcentagem1'];
$porcentagem2 = $_POST['porcentagem2'];
$porcentagem3 = $_POST['porcentagem3'];
$porcentagem4 = $_POST['porcentagem4'];


if(is_numeric($valortotal, $porcentagem1, $porcentagem2, $porcentagem3, $porcentagem4)){
    echo ""Por favor, digite apenas números"";
}

?&gt;
</code></pre>",php,"<p>First of all your <code>&lt;?php</code> is in two lines..
Second the error tells you that the is_numeric expects one parameter you have given it 5.</p>

<p>In order to check all 5 variables you could use the <code>&amp;&amp;</code> for every variable so 5 different calls to <code>is_numeric()</code> or you could do an array to loop throught and check for every variable if is numeric</p>

<pre><code>&lt;?php
$valortotal = $_POST['valorTotal'];
$porcentagem1 = $_POST['porcentagem1'];
$porcentagem2 = $_POST['porcentagem2'];
$porcentagem3 = $_POST['porcentagem3'];
$porcentagem4 = $_POST['porcentagem4'];

$Verify_Int = array(
    $valortotal,
    $porcentagem1,
    $porcentagem2,
    $porcentagem3,
    $porcentagem4
);

foreach ($Verify_Int as $element) {
    if (is_numeric($element)) {
        echo var_export($element, true) . "" is numeric"", PHP_EOL;
    } else {
        echo var_export($element, true) . "" is NOT numeric"", PHP_EOL;
    }
}
?&gt;
</code></pre>",0
54131414,How verify if input is numeric,"<p>I have a simple system where this calculation of rates, how to verify if in numerical value is input? I use is_numeric but can  use a only variable, what is alternative?</p>

<p>Show this error: 
Warning: is_nan() expects exactly 1 parameter, 5 given in C:\xampp\htdocs\imposto\processar.php on line 10</p>

<p>follow the code html:</p>

<pre><code>&lt;html lang=""pt-br""&gt;

&lt;head&gt;
    &lt;title&gt;Calc - Imposto&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;h2&gt;SISTEMA DE CÁLCULO DE IMPOSTOS&lt;/h2&gt;
&lt;h3&gt;Subistua vírgula por ponto "".""&lt;/h3&gt;
&lt;form method=""POST"" action=""processar.php""&gt;
    &lt;label&gt;Valor Total: &lt;/label&gt;
    &lt;input type=""text"" name=""valorTotal"" style=""width: 100px;""&gt;&lt;/br&gt;&lt;/br&gt;&lt;/br&gt;

    % &lt;input type=""text"" name=""porcentagem1"" style=""width: 100px;""&gt;&lt;/br&gt;&lt;/br&gt;

    % &lt;input type=""text"" name=""porcentagem2"" style=""width: 100px;""&gt;&lt;/br&gt;&lt;/br&gt;

    % &lt;input type=""text"" name=""porcentagem3"" style=""width: 100px;""&gt;&lt;/br&gt;&lt;/br&gt;

    % &lt;input type=""text"" name=""porcentagem4"" style=""width: 100px;""&gt;&lt;/br&gt;&lt;/br&gt;

    &lt;input type=""submit"" value=""Enivar"" &gt;


     &lt;input type=""reset""&gt;
&lt;/form&gt;

&lt;/body&gt;
&lt;/html&gt;
</code></pre>

<p>follow the code php:</p>

<pre><code>&lt;
?php

$valortotal = $_POST['valorTotal'];
$porcentagem1 = $_POST['porcentagem1'];
$porcentagem2 = $_POST['porcentagem2'];
$porcentagem3 = $_POST['porcentagem3'];
$porcentagem4 = $_POST['porcentagem4'];


if(is_numeric($valortotal, $porcentagem1, $porcentagem2, $porcentagem3, $porcentagem4)){
    echo ""Por favor, digite apenas números"";
}

?&gt;
</code></pre>",php,"<p>is_numeric only checks 1 variable. </p>

<p>You have to write a if statement like the following:</p>

<pre><code>    if(is_numeric($valortotal) &amp;&amp; is_numeric($porcentagem1) &amp;&amp; is_numeric($porcentagem2) &amp;&amp; is_numeric($porcentagem3) &amp;&amp; is_numeric($porcentagem4))
    {
        echo ""Por favor, digite apenas números"";
    }
</code></pre>

<p><strong>Note:</strong> This only echo's ""Por favor, digite apenas números"" if <strong>all</strong> the variables are numeric.</p>",2
54175161,Get image type from binary data image & convert it to actual image in PHP,"<p>frankly speaking, I'm not sure if this is duplication of another question since the context should be different.</p>

<p>I currently working with some API that returns status &amp; contents(binary data image) which I will base64 encode at first. The question is how to initially get the image type on it's binary data form, &amp; after that convert it to actual image with its type extension. In this scenario, I'm using PHP since it involves with backend task.
Thanks.</p>

<p>updates:
for this case, I get the image in binary form from external site api. I use file_get_contents but it returns empty or null. When i use base64_encode then it will shows up the image as an encoded data. the issue is I need to convert it as normal image. I try getimagesize as encoded &amp; decoded &amp; try to print the output &amp; it returns empty. 
is there any steps I am still missing?</p>",php|image|base64|binary-data|binary-image,"<p>About your 2 questions:</p>

<blockquote>
  <p>how to convert it back to normal image. </p>
</blockquote>

<p>If the image is simply encode with base64, then of course decode it with <a href=""http://php.net/manual/en/function.base64-decode.php"" rel=""nofollow noreferrer"">base64_decode</a> got the original image data.</p>

<pre><code>$original_image = base64_decode($encoded_base64_string);
</code></pre>

<blockquote>
  <p>I guess no since what I need is its original image type</p>
</blockquote>

<p>Don't be confused by it's name, <a href=""http://www.php.net/manual/en/function.getimagesize.php"" rel=""nofollow noreferrer"">getimagesize</a> also tells you the image type and the mime type.</p>",1
58854293,Is it possible to compare Session::get('key') value and compare it using laravel inline if else statement?,"<p>what I'm trying to do is a filter radio button. When a user apply the filter based on a specific year, it goes into the controller to filter data results based on that year and return back to the view with new values. However when the page refreshes, the value filtered by the year <strong>is reflected</strong>, just that the radio button is unchecked and the default <strong><em>All</em></strong> radio button is checked. </p>

<p>What I did was store the radio button's id in a Session at the controller based on value of which radio button has been clicked. If the id of the radio button matches the id stored in the session, it should checked that radio button.</p>

<p>Index.blade.php</p>

<pre><code>&lt;label&gt;
  &lt;input type=""radio"" name=""year"" id=""tab"" value=""_all"" class=""flat-red filter"" checked=""checked""&gt; All
&lt;/label&gt;

@foreach ($years as $year)
  &lt;label&gt;
      &lt;input type=""radio"" name=""year"" id=""id{{$year-&gt;year}}"" value=""{{ $year-&gt;year }}"" class=""flat-red filter"" checked = {{ Session::get('radio') == ""id{{$year-&gt;year}}"" ? 'checked' : 'false' }}&gt; {{$year-&gt;year}}
  &lt;/label&gt;
@endforeach

&lt;button type=""submit"" class=""btn btn-primary btn-sm pull-right""&gt;Apply Filter&lt;/button&gt;
</code></pre>

<p>StatisticsController.php</p>

<pre><code>session(['radio' =&gt; 'id'.request('year')]);
return view('statistics.index', $counts, compact('years'));
</code></pre>

<p>Error that I am getting</p>

<pre><code>syntax error, unexpected ')', expecting :: (T_PAAMAYIM_NEKUDOTAYIM)
</code></pre>

<p>Method(s) I have tried,
1. Using JS to see which radio button has been click and store it in the local session.</p>

<p>What am I doing wrong or missed out?</p>",php|eloquent|laravel-6,"<p>A solution could be to read that session variable in your controller and inject it into your template.</p>

<p>Don't put more logic into the template, that's not what a template engine is made for - better decouple such logic. This helps you to keep your code maintainable. A blade template does not need to know anything about a session</p>",0
58854293,Is it possible to compare Session::get('key') value and compare it using laravel inline if else statement?,"<p>what I'm trying to do is a filter radio button. When a user apply the filter based on a specific year, it goes into the controller to filter data results based on that year and return back to the view with new values. However when the page refreshes, the value filtered by the year <strong>is reflected</strong>, just that the radio button is unchecked and the default <strong><em>All</em></strong> radio button is checked. </p>

<p>What I did was store the radio button's id in a Session at the controller based on value of which radio button has been clicked. If the id of the radio button matches the id stored in the session, it should checked that radio button.</p>

<p>Index.blade.php</p>

<pre><code>&lt;label&gt;
  &lt;input type=""radio"" name=""year"" id=""tab"" value=""_all"" class=""flat-red filter"" checked=""checked""&gt; All
&lt;/label&gt;

@foreach ($years as $year)
  &lt;label&gt;
      &lt;input type=""radio"" name=""year"" id=""id{{$year-&gt;year}}"" value=""{{ $year-&gt;year }}"" class=""flat-red filter"" checked = {{ Session::get('radio') == ""id{{$year-&gt;year}}"" ? 'checked' : 'false' }}&gt; {{$year-&gt;year}}
  &lt;/label&gt;
@endforeach

&lt;button type=""submit"" class=""btn btn-primary btn-sm pull-right""&gt;Apply Filter&lt;/button&gt;
</code></pre>

<p>StatisticsController.php</p>

<pre><code>session(['radio' =&gt; 'id'.request('year')]);
return view('statistics.index', $counts, compact('years'));
</code></pre>

<p>Error that I am getting</p>

<pre><code>syntax error, unexpected ')', expecting :: (T_PAAMAYIM_NEKUDOTAYIM)
</code></pre>

<p>Method(s) I have tried,
1. Using JS to see which radio button has been click and store it in the local session.</p>

<p>What am I doing wrong or missed out?</p>",php|eloquent|laravel-6,"<p>Everything inside of <code>{{ }}</code> is PHP. The <code>{{ }}</code> gets replaced by the Blade Compiler with something like this:</p>

<pre><code>&lt;?php echo e(...); ?&gt;
</code></pre>

<p>So basically just use regular PHP syntax between <code>{{ }}</code>:</p>

<pre><code>{{ Session::get('radio') == ""id{$year-&gt;year}"" ? 'checked' : 'false' }}
</code></pre>

<p>Having <code>{{ }}</code> inside of <code>{{ }}</code> is going to break the compiling of that echo statement.</p>",0
59062675,"Laravel, How to update user profile and check if phone number is duplicated","<p>I'm using ajax to update user profile in the same page, I dont have any problem with this, as the user is logged in, then the controller check the user id from the Auth as in the code below, but in registration page its check if the phone number is duplicated but in update I dont know how to do this and also to ignore update for the current user if he didnt update his phone number!</p>

<p>Controller:</p>

<pre><code> public function update(Request $request)
  {
  $user_id=Auth::user()-&gt;id;
  User::where('id', $user_id)-&gt;update([
  'phone' =&gt; $request-&gt;phone,
  'fname' =&gt; $request-&gt;fname,
  'lname' =&gt; $request-&gt;lname
  ]);
   return Response::json(array(
   ));
  }
   }
</code></pre>",php|laravel,"<p>You need to validate the request before save to database</p>

<pre><code>public function update(Request $request)
  {
    $user = Auth::user();

    $request-&gt;validate([
      // unique:table,column,except,idColumn
      'phone' =&gt; 'unique:App\User,phone,' . $user-&gt;phone,
    ]);

    $user_id=Auth::user()-&gt;id;

    User::where('id', $user_id)-&gt;update([
      'phone' =&gt; $request-&gt;phone,
      'fname' =&gt; $request-&gt;fname,
      'lname' =&gt; $request-&gt;lname
    ]);

    return;
  }
</code></pre>

<p>I hone it helps you.</p>",0
59062675,"Laravel, How to update user profile and check if phone number is duplicated","<p>I'm using ajax to update user profile in the same page, I dont have any problem with this, as the user is logged in, then the controller check the user id from the Auth as in the code below, but in registration page its check if the phone number is duplicated but in update I dont know how to do this and also to ignore update for the current user if he didnt update his phone number!</p>

<p>Controller:</p>

<pre><code> public function update(Request $request)
  {
  $user_id=Auth::user()-&gt;id;
  User::where('id', $user_id)-&gt;update([
  'phone' =&gt; $request-&gt;phone,
  'fname' =&gt; $request-&gt;fname,
  'lname' =&gt; $request-&gt;lname
  ]);
   return Response::json(array(
   ));
  }
   }
</code></pre>",php|laravel,"<p>You can actually validate data before you get to your controller. It's much safer, and you will have a cleaner code. First, create your custom request validation: </p>

<pre><code>php artisan make:request UserRequest
</code></pre>

<p>This will create an empty <code>UserRequest</code> class, where you can validate your data: </p>

<pre><code>class UserRequest extends FormRequest
{
    public function authorize()
    {
        return true;
    }

    //Validate your data here
    public function rules()
    {
        return [
            'phone' =&gt; 'required|unique:users',
            'fname' =&gt; 'required',
            'lname' =&gt; 'required',
        ];
    }

    //Add custom message if validation fails
    public function messages()
    {
        return [
            'phone.required' =&gt; 'Phone is required.',
            'phone.unique' =&gt; 'Phone number should be unique.',
            'fname.unique' =&gt; 'First name is required.',
            'lname.required' =&gt; 'Last name is required.',
        ];
    }
}
</code></pre>

<p>All you have to do now, is import this custom validation inside your controller: </p>

<pre><code>public function update(UserRequest $request)
  {
    $user_id = Auth::user()-&gt;id;

    User::where('id', $user_id)-&gt;update([
      'phone' =&gt; $request-&gt;phone,
      'fname' =&gt; $request-&gt;fname,
      'lname' =&gt; $request-&gt;lname
    ]);

    return;
  }
</code></pre>

<p>Let me know if this helped you, or if you get any errors or anything like that. </p>",0
59046964,Set a flag on a table based on dependent flags in another table with sql,"<p>I would like to set a boolean column in one table based on every row from another table.</p>

<p>For example: I have 3 tables; Table B is the N:M relation between table A and C</p>

<blockquote>
  <p>Table A: ID, flag</p>
  
  <p>Table B: A-ID, C-ID</p>
  
  <p>Table C: ID, flag</p>
</blockquote>

<p>I want to set a.flag to false if only 1 c.flag row is false.</p>

<p>I tried with different case statements but I always get errors or something like this because I'm still learning how to use sql correctly           </p>",php|sql|database,"<p>I think you want:</p>

<pre><code>update a
    set flag = (case when exists (select 1
                                  from b join
                                       c
                                       on b.a_id = c.a_id
                                  where c.flag = 'false'
                                 )
                     then 'false' else 'true'
                end);
</code></pre>

<p>You haven't specified the database, so I have used strings for the values.</p>

<p>If you specifically want <em>exactly</em> one row, then you would use aggregation:</p>

<pre><code>update a
    set flag = (case when 1 = (select count(*)
                               from b join
                                    c
                                    on b.a_id = c.a_id
                               where c.flag = 'false'
                              )
                     then 'false' else 'true'
                end);
</code></pre>",0
58991019,CakePhp 3.8 with Jquery autocomplete not working,"<p>I'm trying to use the autocomplete jquery function to complete a field with one of two source values: ['pere', 'mele']. unfortunately it does not work.</p>

<p><strong>default.ctp</strong></p>

<pre><code>     &lt;script
src=""https://code.jquery.com/jquery-3.4.1.min.js""
integrity=""sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=""
crossorigin=""anonymous""&gt;&lt;/script&gt;
&lt;script
src=""https://code.jquery.com/ui/1.12.1/jquery-ui.min.js""
integrity=""sha256-VazP97ZCwtekAsvgPBSUwPFKdrwD3unUfSGVYrahUqU=""
crossorigin=""anonymous""&gt;&lt;/script&gt;
&lt;link rel=""stylesheet"" href=""https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css""&gt;

    &lt;!------ Include the above in your HEAD tag ----------&gt;
    &lt;?php echo $this-&gt;Html-&gt;script(['single']) ?&gt;
</code></pre>

<p><strong>in view file</strong></p>

<pre><code>&lt;?php echo $this-&gt;Form-&gt;create($societa); ?&gt;       

&lt;fieldset&gt;
     &lt;h1&gt;Aggiungi Società&lt;/h1&gt;


    &lt;div class=""form-group""&gt;
        &lt;div class=""col-lg-10 col-lg-offset-2""&gt;
        &lt;?php echo $this-&gt;Form-&gt;control('nome_societa',['class'=&gt;'form-control','required' =&gt; true]);?&gt;  
        &lt;/div&gt;  
    &lt;/div&gt;
    &lt;div class=""form-group""&gt;
        &lt;div class=""col-lg-10 col-lg-offset-2""&gt;
         &lt;?php echo $this-&gt;Form-&gt;control('nome_societa_abbreviato',['class'=&gt;'form-control','required' =&gt; true]);?&gt;  
        &lt;/div&gt;  
    &lt;/div&gt;
    &lt;div class=""form-group""&gt;
        &lt;div class=""col-lg-10 col-lg-offset-2""&gt;
         &lt;?php echo $this-&gt;Form-&gt;control('sede',['class'=&gt;'form-control','id'=&gt;'naruto','required' =&gt; true]);?&gt;  
        &lt;/div&gt;  
    &lt;/div&gt;
    &lt;div class=""form-group""&gt;
        &lt;div class=""col-lg-10 col-lg-offset-2""&gt;
         &lt;?php echo $this-&gt;Form-&gt;control('cap',['class'=&gt;'form-control','required' =&gt; true]);?&gt;  
        &lt;/div&gt;  
    &lt;/div&gt;    
    &lt;div class=""form-group""&gt;
        &lt;div class=""col-lg-10 col-lg-offset-2""&gt;
         &lt;?php echo $this-&gt;Form-&gt;control('citta',['class'=&gt;'form-control']);?&gt;  
        &lt;/div&gt;  
    &lt;/div&gt; 
    &lt;div class=""form-group""&gt;
        &lt;div class=""col-lg-10 col-lg-offset-2""&gt;
         &lt;?php echo $this-&gt;Form-&gt;control('pr',['class'=&gt;'form-control']);?&gt;  
        &lt;/div&gt;  
    &lt;/div&gt; 

    &lt;div class=""form-group""&gt;
        &lt;div class=""col-lg-10 col-lg-offset-2""&gt;
         &lt;?php echo $this-&gt;Form-&gt;button(__('Salva'),['class'=&gt;'btn btn-primary']);?&gt;  
        &lt;/div&gt;  
    &lt;/div&gt;           
&lt;/fieldset&gt; 
&lt;?php echo $this-&gt;Form-&gt;end();?&gt;  
&lt;?php echo $this-&gt;Html-&gt;link('Indietro', ['action'=&gt;'index'], ['class'=&gt;'btn btn-primary']) ?&gt;
</code></pre>

<p><strong>in js file single.js</strong></p>

<pre><code>$(document).ready(function(){
    $(""#naruto"").autocomplete({
        source:['pere','mele']
    });    
});
</code></pre>

<p><strong>in console google chrome</strong></p>

<pre><code>A cookie associated with a cross-site resource at http://bootstrapcdn.com/ was set without the `SameSite` attribute. A future release of Chrome will only deliver cookies with cross-site requests if they are set with `SameSite=None` and `Secure`. You can review cookies in developer tools under Application&gt;Storage&gt;Cookies and see more details at https://www.chromestatus.com/feature/5088147346030592 and https://www.chromestatus.com/feature/5633521622188032.
add#:1 A cookie associated with a cross-site resource at http://forum.jquery.com/ was set without the `SameSite` attribute. A future release of Chrome will only deliver cookies with cross-site requests if they are set with `SameSite=None` and `Secure`. You can review cookies in developer tools under Application&gt;Storage&gt;Cookies and see more details at https://www.chromestatus.com/feature/5088147346030592 and https://www.chromestatus.com/feature/5633521622188032.
add#:1 A cookie associated with a cross-site resource at https://forum.jquery.com/ was set without the `SameSite` attribute. A future release of Chrome will only deliver cookies with cross-site requests if they are set with `SameSite=None` and `Secure`. You can review cookies in developer tools under Application&gt;Storage&gt;Cookies and see more details at https://www.chromestatus.com/feature/5088147346030592 and https://www.chromestatus.com/feature/5633521622188032.
add#:1 A cookie associated with a cross-site resource at http://jquery.com/ was set without the `SameSite` attribute. A future release of Chrome will only deliver cookies with cross-site requests if they are set with `SameSite=None` and `Secure`. You can review cookies in developer tools under Application&gt;Storage&gt;Cookies and see more details at https://www.chromestatus.com/feature/5088147346030592 and https://www.chromestatus.com/feature/5633521622188032.
</code></pre>

<p>unfortunately the file does not work even if the console does not give errors</p>",jquery-ui|cakephp|design-patterns|jquery-ui-autocomplete|cakephp-3.8,"<p>OK so it works. Fixed the various Jquery UI calls. Resolved</p>

<pre><code>&lt;head&gt;
&lt;meta charset=""utf-8""&gt;
&lt;meta http-equiv=""X-UA-Compatible"" content=""IE=edge""&gt;
&lt;meta name=""viewport"" content=""width=device-width, initial-scale=1""&gt;
&lt;meta name=""description"" content=""Responsive sidebar template with sliding effect and dropdown menu based on bootstrap 3""&gt;
&lt;title&gt;Calciotel&lt;/title&gt;

&lt;link href=""https://use.fontawesome.com/releases/v5.0.6/css/all.css"" rel=""stylesheet""&gt;
&lt;link href=""https://stackpath.bootstrapcdn.com/bootswatch/4.3.1/litera/bootstrap.min.css"" rel=""stylesheet"" id=""bootstrap-css""&gt;

&lt;script src=""//cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js""&gt;&lt;/script&gt;


&lt;link rel=""stylesheet"" href=""//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css""&gt;
</code></pre>

<p>
  </p>

<pre><code>&lt;?php 
echo $this-&gt;Html-&gt;css(['jquery-ui.theme.min','jquery-ui.min','prova']);

echo $this-&gt;Html-&gt;script(['bootstrap.min','jquery-3.4.1.min','jquery-ui.min','prova','single','popper.min.js']);

echo $this-&gt;Html-&gt;meta('icon');
echo $this-&gt;fetch('meta');
echo $this-&gt;fetch('css');
echo $this-&gt;fetch('script');
echo $this-&gt;Html-&gt;charset();

?&gt;
</code></pre>",0
58980430,PHP - Why am I getting wierd result from my encoded object array?,"<p>I have an object array in PHP, how can I echo this as JSON? I tried the json_encode but I am getting very strange results. The JSON is not between {} but between [] and it adds a 0 at the end of the output. What am I doing wrong? It makes me get an Unexpected number in JSON error in the console.</p>

<p><strong>PHP</strong></p>

<pre><code>function do_get_children_as_hierarchy()
{

    if (!isset($_GET) || !isset($_GET['taxonomy_name'])) {
        echo ""Parameter is missing."";
        die;
    }

    $taxonomy = $_GET['taxonomy_name'];

    $terms = get_terms(array(
        'taxonomy' =&gt; $taxonomy,
    ));

    $termObjects = [];

    foreach ($terms as $term) {
        $depth = count(get_ancestors($term-&gt;term_id, $taxonomy));
        $obj = (object) array('term_id' =&gt; $term-&gt;term_id, 'name' =&gt; $term-&gt;name, 'depth' =&gt; $depth);
        array_push($termObjects, $obj);
    }

    echo json_encode($termObjects);
}
add_action('wp_ajax_get_children_as_hierarchy', 'do_get_children_as_hierarchy');
add_action('wp_ajax_nopriv_get_children_as_hierarchy', 'do_get_children_as_hierarchy');
</code></pre>

<p><strong>JSON</strong></p>

<pre><code>[
    {""term_id"":415,""name"":""1 kanaals"",""depth"":2},
    {""term_id"":416,""name"":""12 kanaals"",""depth"":2},
    {""term_id"":417,""name"":""24 kanaals"",""depth"":2}
]0
</code></pre>

<p><strong>Javascript</strong></p>

<pre><code>function do_get_terms_as_hierarchy()
{
    return '&lt;script&gt;
            var data = {
                ""action"":""get_children_as_hierarchy"",
                ""taxonomy_name"":""productcategorie"",
            };

            $.ajax({
                url: ""/wp-admin/admin-ajax.php"",
                type: ""GET"",
                data: data,
            }).then(response =&gt; {
               console.log(JSON.parse(response));
            });
    &lt;/script&gt;';
}
add_shortcode('get_terms_as_hierarchy','do_get_terms_as_hierarchy');
</code></pre>",javascript|php|json,"<p>As suggested in the comment section, probably the best solution for the 0 is to put a <code>die()</code> after <code>json_encode()</code> in order to prevent other output in the page. Also the <code>[]</code> it's because the values are inside an array, not an object</p>",1
16625072,Is this possible to do in RethinkDB,"<p>I've used mongodb in the past and I want to use similar schema. I've tried to create it using PHP driver but it doesn't work as I expected. So my guesses were either rethinkdb does not support it or php driver is not capable to do this.</p>

<pre><code>r\table('User')-&gt;insert([
        'username' =&gt; 'Something',
        'skills' =&gt; [
            'php' =&gt; 10,
            'html' =&gt; 15 
        ]
        ])-&gt;run($conn)
</code></pre>

<p>result in RethinkDB administrator js client:</p>

<pre><code>{
    ""username"":  ""Something"" ,
    ""id"":  ""899a2693-dd94-4670-a496-05626a88d190"" ,
    ""skills"": { }
}
</code></pre>

<p>What do you suggest and how should I do this?</p>",php|rethinkdb,"<p>It seems to work with PHP 5.4.13, RethinkDB 1.5.1 and the lastest version of php-rql.</p>

<pre><code>r\table('User')-&gt;insert([
        'username' =&gt; 'Something',
        'skills' =&gt; [
            'php' =&gt; 10,
            'html' =&gt; 15 
        ]
])-&gt;run($conn);
</code></pre>

<p>It gives the following results:</p>

<pre><code>$result = r\db(""test"")-&gt;table(""user"")-&gt;run($conn);
print_r($result-&gt;toNative());


Array
(
    [0] =&gt; Array
        (
            [username] =&gt; Something
            [skills] =&gt; Array
                (
                    [php] =&gt; 10
                    [html] =&gt; 15
                )

            [id] =&gt; 2c66490f-72da-49ad-9692-a85366ce94ab
        )

)
</code></pre>

<p>And in the Data Explorer:</p>

<pre><code>[

    {
        ""username"": ""Something"" ,
        ""skills"": {
            ""php"": 10 ,
            ""html"": 15
        } ,
        ""id"": ""2c66490f-72da-49ad-9692-a85366ce94ab""
    }

]
</code></pre>",3
16618175,how to use Bcrypt in php to encrypt password with register and login process,"<p>I have a register page that allow user to enter information one of it password so it must be encrypted or hashed so used Bcrypt and it work on the register </p>

<p>but when it come to the login i do not know where and how to use it<br>
can anyone help me?</p>

<p>register.php:</p>

<pre><code>require_once('Bcrypt.php'); 

$bcrypt = new Bcrypt(15);
$hash = $bcrypt-&gt;hash('$pass1');

//********Insert all the members's input to the database**************//
$query = mysql_query(""INSERT INTO members
                      (user_name, first_name, last_name,
                       governorate, district, village,
                       birth_date, email_address,
                       specialization, password, registered_date)
                      VALUES
                      ('$username', '$firstname', '$lastname',
                       '$governorate', '$district', '$village',
                       '$bdate', '$email', '$specialization',
                       ' $hash',  now())"")
                      or die(""could not insert data"");
</code></pre>

<p>login.php</p>

<pre><code>require_once('Bcrypt.php');

$bcrypt = new Bcrypt(15);
$hash = $bcrypt-&gt;hash('$pass');
$isGood = $bcrypt-&gt;verify('$pass', $hash);

$sql=mysql_query(""SELECT user_id, email_address,
                         first_name, user_name
                  FROM members
                  WHERE email_address='$email'AND password= '$hash'
                  LIMIT 1"") or die(""error in members table"");

$login_check = mysql_num_rows($sql);
</code></pre>",php|mysql|bcrypt,"<p>You're obviously using a third party library for the Bcrypt hashing. PHP has bcrypt functionality built-in, I guess this library is a wrapper for that. But I can't be certain because I don't recognise the library you're using, so I can't give specific advice about how to use it (other than to follow it's documentation). </p>

<p>Allowing for the fact that I don't recognise the library you're using, there isn't anything obviously visibly wrong in the bcrypt parts of your code. (the sql queries have variables that aren't defined anywhere, but I guess that's because you've only shown us a snippet of the code)</p>

<p>If you're not getting anywhere with this library, I would suggest maybe looking at alternative libraries; there are two that I can think of that would be good to look at:</p>

<ul>
<li><p><a href=""https://github.com/ircmaxell/password_compat"" rel=""nofollow"">password_compat</a><br />
This is written by the same guy who does all the security code in the PHP core. In PHP 5.5 (due for release soon), they're introducing a new set of <code>password_xxx()</code> functions. This library implements those same functions in pure PHP code so they can be run in PHP 5.3 or 5.4. This library is therefore a good one to pick if you want to be compatible with future PHP versions.</p></li>
<li><p><a href=""https://github.com/ircmaxell/PHP-PasswordLib"" rel=""nofollow"">PHP-Password</a><br />
A slightly older library by the same author. Just as good, but with an object-oriented API instead of mimicking the PHP 5.5 functions. If you want a general utility library for making it dead easy to handle passwords with complete security, this is the one I'd recommend.</p></li>
</ul>

<p>Both of these libraries use the latest bcrypt algorithms behind the scenes.</p>

<p><strong>[EDIT]</strong> Password field length. As mentioned in the comments, you'll need to have at least 60 character long fields to store a bcrypt hash. Your current 20 character limit isn't going to work for any kind of hash algorithm.</p>",0
16618175,how to use Bcrypt in php to encrypt password with register and login process,"<p>I have a register page that allow user to enter information one of it password so it must be encrypted or hashed so used Bcrypt and it work on the register </p>

<p>but when it come to the login i do not know where and how to use it<br>
can anyone help me?</p>

<p>register.php:</p>

<pre><code>require_once('Bcrypt.php'); 

$bcrypt = new Bcrypt(15);
$hash = $bcrypt-&gt;hash('$pass1');

//********Insert all the members's input to the database**************//
$query = mysql_query(""INSERT INTO members
                      (user_name, first_name, last_name,
                       governorate, district, village,
                       birth_date, email_address,
                       specialization, password, registered_date)
                      VALUES
                      ('$username', '$firstname', '$lastname',
                       '$governorate', '$district', '$village',
                       '$bdate', '$email', '$specialization',
                       ' $hash',  now())"")
                      or die(""could not insert data"");
</code></pre>

<p>login.php</p>

<pre><code>require_once('Bcrypt.php');

$bcrypt = new Bcrypt(15);
$hash = $bcrypt-&gt;hash('$pass');
$isGood = $bcrypt-&gt;verify('$pass', $hash);

$sql=mysql_query(""SELECT user_id, email_address,
                         first_name, user_name
                  FROM members
                  WHERE email_address='$email'AND password= '$hash'
                  LIMIT 1"") or die(""error in members table"");

$login_check = mysql_num_rows($sql);
</code></pre>",php|mysql|bcrypt,"<p>It looks fine to me except that I would write the login.php query from <code>WHERE email_address='$email'AND password= '$hash'</code> to <code>WHERE email_address='$email' AND password='$hash'</code></p>

<p>Make sure the columns data type that holds the password hash is long enough to contain any password the users will enter. If the extra bytes of data aren't a problem, then set the column to varchar(255) to make sure MySQL doesn't chop the end off your hash when you save it.</p>

<p>I would check out some of the built in cryptography libraries. They've been updated since php 5.5 and will probably do the job for you if it's bcrypt thats not working right.</p>

<p><a href=""http://www.php.net/manual/en/refs.crypto.php"" rel=""nofollow"">http://www.php.net/manual/en/refs.crypto.php</a></p>

<p>I have used md5 in the past with no problems, and if you're really worried about having it super secure check out php's built in mcrypt library. You could also ""salt"" the passwords as well to make sure they go in secured.</p>",0
17055702,preg_replace not replacing underscore,"<p>I want to allow only alpha numeric characters and spaces, so I use the following;</p>

<pre><code>$name = preg_replace('/[^a-zA-z0-9 ]/', '', $str);
</code></pre>

<p>However, that is allowing underscores ""_"" which I don't want. Why is this and how do I fix it?</p>

<p>Thanks</p>",php|regex|preg-replace,"<p>The <a href=""http://ca1.php.net/manual/regexp.reference.character-classes.php"" rel=""nofollow"">character class</a> range is for a range of characters between two code points. The character <code>_</code> is included in the range <code>A-z</code>, and you can see this by looking at the ASCII table:</p>

<pre>
... Y Z [ \ ] ^ _ ` a b ...
</pre>

<p>So it's not only the underscore that's being let through, but those other characters you see above, as stated in the <a href=""http://ca1.php.net/manual/regexp.reference.character-classes.php"" rel=""nofollow"">documentation</a>:</p>

<blockquote>
  <p>Ranges operate in ASCII collating sequence. ... For example, <code>[W-c]</code> is equivalent to <code>[][\^_</code>`<code>wxyzabc]</code>.</p>
</blockquote>

<p>To prevent this from happening, you can perform a case insensitive match with a single character range in your character class:</p>

<pre><code>$name = preg_replace('/[^a-z0-9 ]/i', '', $str);
</code></pre>",1
17055702,preg_replace not replacing underscore,"<p>I want to allow only alpha numeric characters and spaces, so I use the following;</p>

<pre><code>$name = preg_replace('/[^a-zA-z0-9 ]/', '', $str);
</code></pre>

<p>However, that is allowing underscores ""_"" which I don't want. Why is this and how do I fix it?</p>

<p>Thanks</p>",php|regex|preg-replace,"<p>You have mistake in your expression. Last Z must be capital.</p>

<pre><code>$name = preg_replace('/[^a-zA-Z0-9 ]/', '', $str);
                              ^
</code></pre>",0
17015618,PHP Grab User's Form Selection,"<p>Currently, I am grabbing a list from a database via an SQL statement and then injecting it into a drop down menu via php. However, now I need to tell which one the user selects from the list. Any easy way to do this without actually listing out all the option statements?</p>

<pre><code>echo ""&lt;select name='countydomain' mehod='post' onchange='form.submit()'&gt;"";
while ($row = mysql_fetch_array($result)) {
    echo ""&lt;option value=selection'"" . $row['countydomain'] . ""'&gt;"" . $row['countydomain']  .""
    &lt;/option&gt;"";
}
echo ""&lt;/select&gt;"";
</code></pre>",php|sql|forms|select,"<p>I assume you want to do this on the server-side. If so, use <code>$_POST['countydomain']</code>.</p>",0
17015618,PHP Grab User's Form Selection,"<p>Currently, I am grabbing a list from a database via an SQL statement and then injecting it into a drop down menu via php. However, now I need to tell which one the user selects from the list. Any easy way to do this without actually listing out all the option statements?</p>

<pre><code>echo ""&lt;select name='countydomain' mehod='post' onchange='form.submit()'&gt;"";
while ($row = mysql_fetch_array($result)) {
    echo ""&lt;option value=selection'"" . $row['countydomain'] . ""'&gt;"" . $row['countydomain']  .""
    &lt;/option&gt;"";
}
echo ""&lt;/select&gt;"";
</code></pre>",php|sql|forms|select,"<p>Sure, you can modify your select's onchange to point to a custom javascript function. Have the function get the value of the select (probably want to pass <em>this</em> as a parameter to the function) and do whatever you need to, finally call <code>document.forms[""myformID""].submit();</code></p>

<p>Let's create an example javascript:</p>

<pre><code>&lt;script type=""text/javascript""&gt;
  function checkFirst(theSelect){
    alert(theSelect.value);
    document.forms[""myform""].submit();
  }
&lt;/script&gt;
</code></pre>

<p>And your markup would look like:</p>

<pre><code>echo ""&lt;select name='countydomain' mehod='post' onchange='checkFirst(this);'&gt;"";
</code></pre>",0
16698240,How to implement email verification with php?,"<p>I'm using php and laravel as a framework. I want to let user be able to activate their accounts through email.</p>

<p>I have no experience with this however. I already set up a form that asks for username, email and password.</p>

<p>Would this still be the best way to go about it in 2013?</p>

<p><a href=""http://net.tutsplus.com/tutorials/php/how-to-implement-email-verification-for-new-members/?search_index=8"" rel=""nofollow"">http://net.tutsplus.com/tutorials/php/how-to-implement-email-verification-for-new-members/?search_index=8</a></p>

<p>So:</p>

<ol>
<li>I need to create a database field for a hashed password.</li>
<li>On user account creation create a random password for this field and email it to them.</li>
<li>Provide link with the password and user id in the url to a page that compares the emailed password with password in db field.</li>
<li>Activate account(set active to 1) when the passwords match.</li>
</ol>

<p>Something along those lines?</p>",php|email|laravel|verification,"<p>A warning: According to the PHP Manual, EREGI is DEPRECATED! <a href=""http://php.net/manual/en/function.eregi.php"" rel=""nofollow"">http://php.net/manual/en/function.eregi.php</a></p>

<p>preg_match would be a good option. <a href=""http://www.php.net/manual/en/function.preg-match.php"" rel=""nofollow"">http://www.php.net/manual/en/function.preg-match.php</a></p>",1
16698240,How to implement email verification with php?,"<p>I'm using php and laravel as a framework. I want to let user be able to activate their accounts through email.</p>

<p>I have no experience with this however. I already set up a form that asks for username, email and password.</p>

<p>Would this still be the best way to go about it in 2013?</p>

<p><a href=""http://net.tutsplus.com/tutorials/php/how-to-implement-email-verification-for-new-members/?search_index=8"" rel=""nofollow"">http://net.tutsplus.com/tutorials/php/how-to-implement-email-verification-for-new-members/?search_index=8</a></p>

<p>So:</p>

<ol>
<li>I need to create a database field for a hashed password.</li>
<li>On user account creation create a random password for this field and email it to them.</li>
<li>Provide link with the password and user id in the url to a page that compares the emailed password with password in db field.</li>
<li>Activate account(set active to 1) when the passwords match.</li>
</ol>

<p>Something along those lines?</p>",php|email|laravel|verification,"<p>Email verification is a simple process there is two way to verify email either by sending code to user email address or by sending link both works same here is a sample code from a tutorial <a href=""http://talkerscode.com/webtricks/account-verification-system-through-email-using-php.php"" rel=""nofollow"">http://talkerscode.com/webtricks/account-verification-system-through-email-using-php.php</a> on TalkersCode</p>

<pre><code>// Table Scheme for Verify Table
CREATE TABLE `verify` (
`id` int(11) NOT NULL AUTO_INCREMENT,
`email` text NOT NULL,
`password` text NOT NULL,
`code` text NOT NULL,
PRIMARY KEY (`id`)
) ENGINE=MyISAM AUTO_INCREMENT=6 DEFAULT CHARSET=latin1

// Table Scheme for verified_user table
CREATE TABLE `verified_user` (
`id` int(11) NOT NULL AUTO_INCREMENT,
`email` text NOT NULL,
`password` text NOT NULL,
PRIMARY KEY (`id`)
) ENGINE=MyISAM AUTO_INCREMENT=6 DEFAULT CHARSET=latin1


if(isset($_POST['register']))
{
$email_id=$_POST['email'];
$pass=$_POST['password'];
$code=substr(md5(mt_rand()),0,15);
mysql_connect('localhost','root','');
mysql_select_db('sample');

$insert=mysql_query(""insert into verify values('','$email','$pass','$code')"");
$db_id=mysql_insert_id();

$message = ""Your Activation Code is "".$code."""";
$to=$email;
$subject=""Activation Code For Talkerscode.com"";
$from = 'your email';
$body='Your Activation Code is '.$code.' Please Click On This link &lt;a href=""verification.php""&gt;Verify.php?id='.$db_id.'&amp;code='.$code.'&lt;/a&gt;to activate your account.';
$headers = ""From:"".$from;
mail($to,$subject,$body,$headers);

echo ""An Activation Code Is Sent To You Check You Emails"";
}

if(isset($_GET['id']) &amp;&amp; isset($_GET['code']))
{
$id=$_GET['id'];
$code=$_GET['id'];
mysql_connect('localhost','root','');
mysql_select_db('sample');
$select=mysql_query(""select email,password from verify where id='$id' and code='$code'"");
if(mysql_num_rows($select)==1)
{
    while($row=mysql_fetch_array($select))
    {
        $email=$row['email'];
        $password=$row['password'];
    }
    $insert_user=mysql_query(""insert into verified_user values('','$email','$password')"");
    $delete=mysql_query(""delete from verify where id='$id' and code='$code'"");
}
}
</code></pre>",3
16698240,How to implement email verification with php?,"<p>I'm using php and laravel as a framework. I want to let user be able to activate their accounts through email.</p>

<p>I have no experience with this however. I already set up a form that asks for username, email and password.</p>

<p>Would this still be the best way to go about it in 2013?</p>

<p><a href=""http://net.tutsplus.com/tutorials/php/how-to-implement-email-verification-for-new-members/?search_index=8"" rel=""nofollow"">http://net.tutsplus.com/tutorials/php/how-to-implement-email-verification-for-new-members/?search_index=8</a></p>

<p>So:</p>

<ol>
<li>I need to create a database field for a hashed password.</li>
<li>On user account creation create a random password for this field and email it to them.</li>
<li>Provide link with the password and user id in the url to a page that compares the emailed password with password in db field.</li>
<li>Activate account(set active to 1) when the passwords match.</li>
</ol>

<p>Something along those lines?</p>",php|email|laravel|verification,"<p>In your explanation you forgot the most important part: the random hash. Compare the hash, not the password. The guide explains it correctly.</p>

<p>The guide looks solid.</p>

<p>I would implement a better random password generator though, <code>rand(1000,5000)</code> is really not very good. You could even set up a first-time logon that asks for a password.</p>",1
16548900,Optimizing for loop in php,"<p>I have been running a foreach loop 1000 times on php page. The code inside the foreach loop looks like below:</p>

<pre><code>$first          = mysql_query(""SELECT givenname FROM first_names order by rand() LIMIT 1"");
$first_n        = mysql_fetch_array($first);
$first_name     = $first_n['givenname'];
$last           = mysql_query(""SELECT surname FROM last_name order by rand() LIMIT 1"");
$last_n         = mysql_fetch_array($last);
$last_name      = $last_n['surname'];
$first_lastname = $first_name . "" "" . $last_name;


$add     = mysql_query(""SELECT streetaddress FROM user_addresss order by rand() LIMIT 1"");  
$addr    = mysql_fetch_array($add);
$address = $addr['streetaddress'];

$unlisted  = ""unlisted"";
$available = ""available"";

$arr = array(
    $first_lastname,
    $address,
    $unlisted,
    $available
);
</code></pre>

<p>Then I have been using array_rand function to get a randomized value each time the loop runs:</p>

<pre><code>&lt;td&gt;&lt;?php echo $arr[array_rand($arr)] ?&gt;&lt;/td&gt;
</code></pre>

<p>So loading the php page is taking a really long time. Is there a way I could optimize this code. As I need a unique value each time the loop runs</p>",php|for-loop,"<p>It has already been explained why ORDER BY RAND() should be avoided, so I simply provide a way to do it with some faster queries.</p>

<p>First get a random number based on your table size:</p>

<pre><code>SELECT FLOOR(RAND()*COUNT(*)) FROM first_names
</code></pre>

<p>Second use the random number in a limit</p>

<pre><code>SELECT * FROM first_names $pos,1
</code></pre>

<p>Unfortunately I don't think there is any way to combine the two queries into one.</p>

<p>Also you can do a <code>SELECT COUNT(*) FROM first_names</code>, store the number, and generate random $pos in PHP as many times as you like.</p>",0
16548900,Optimizing for loop in php,"<p>I have been running a foreach loop 1000 times on php page. The code inside the foreach loop looks like below:</p>

<pre><code>$first          = mysql_query(""SELECT givenname FROM first_names order by rand() LIMIT 1"");
$first_n        = mysql_fetch_array($first);
$first_name     = $first_n['givenname'];
$last           = mysql_query(""SELECT surname FROM last_name order by rand() LIMIT 1"");
$last_n         = mysql_fetch_array($last);
$last_name      = $last_n['surname'];
$first_lastname = $first_name . "" "" . $last_name;


$add     = mysql_query(""SELECT streetaddress FROM user_addresss order by rand() LIMIT 1"");  
$addr    = mysql_fetch_array($add);
$address = $addr['streetaddress'];

$unlisted  = ""unlisted"";
$available = ""available"";

$arr = array(
    $first_lastname,
    $address,
    $unlisted,
    $available
);
</code></pre>

<p>Then I have been using array_rand function to get a randomized value each time the loop runs:</p>

<pre><code>&lt;td&gt;&lt;?php echo $arr[array_rand($arr)] ?&gt;&lt;/td&gt;
</code></pre>

<p>So loading the php page is taking a really long time. Is there a way I could optimize this code. As I need a unique value each time the loop runs</p>",php|for-loop,"<p>You should switch to using either mysqli or pdo if your host supports it but something like this should work. You will have to determine what you want to do if you don't have a enough record in either of the tables though (array_pad or wrap the indexes and restart)</p>

<pre><code>function getRandomNames($qty){
    $qty = (int)$qty;
    $fnames = array();
    $lnames = array();
    $address = array();

    $sel =mysql_query(""SELECT givenname FROM first_names order by rand() LIMIT "".$qty);
    while ($rec = mysql_fetch_array($sel)){$fnames[] = $rec[0]; }

    $sel =mysql_query(""SELECT surname FROM last_name order by rand() LIMIT "".$qty);
    while ($rec = mysql_fetch_array($sel)){ $lnames[] = $rec[0]; }

    $sel =mysql_query(""SELECT streetaddress FROM user_addresss order by rand() LIMIT "".$qty);
    while ($rec = mysql_fetch_array($sel)){ $address[] = $rec[0]; }

    // lets stitch the results together
    $results = array();
    for($x = 0; $x &lt; $qty; $x++){
       $results[] = array(""given_name""=&gt;$fnames[$x], ""surname""=&gt;$lnames[$x], ""streetaddress""=&gt;$address[$x]);
    }
    return $results;
}
</code></pre>

<p>Hope this helps</p>

<p><strong>UPDATE</strong></p>

<p>Based on Sébastien Renauld's answer a more complete solution may be to structure the queries more like </p>

<pre><code>""SELECT givenname from first_names where id in (select id from first_names order by rand() limit "".$qty."")"";
</code></pre>",0
16548900,Optimizing for loop in php,"<p>I have been running a foreach loop 1000 times on php page. The code inside the foreach loop looks like below:</p>

<pre><code>$first          = mysql_query(""SELECT givenname FROM first_names order by rand() LIMIT 1"");
$first_n        = mysql_fetch_array($first);
$first_name     = $first_n['givenname'];
$last           = mysql_query(""SELECT surname FROM last_name order by rand() LIMIT 1"");
$last_n         = mysql_fetch_array($last);
$last_name      = $last_n['surname'];
$first_lastname = $first_name . "" "" . $last_name;


$add     = mysql_query(""SELECT streetaddress FROM user_addresss order by rand() LIMIT 1"");  
$addr    = mysql_fetch_array($add);
$address = $addr['streetaddress'];

$unlisted  = ""unlisted"";
$available = ""available"";

$arr = array(
    $first_lastname,
    $address,
    $unlisted,
    $available
);
</code></pre>

<p>Then I have been using array_rand function to get a randomized value each time the loop runs:</p>

<pre><code>&lt;td&gt;&lt;?php echo $arr[array_rand($arr)] ?&gt;&lt;/td&gt;
</code></pre>

<p>So loading the php page is taking a really long time. Is there a way I could optimize this code. As I need a unique value each time the loop runs</p>",php|for-loop,"<p>The problem is not your PHP foreach loop. If you order your MySQL table by RAND(), you are making a <strong>serious mistake</strong>. Let me explain to you what happens when you do this.</p>

<p>Every time you make a MySQL request, MySQL will attempt to map your search parameters (WHERE, ORDER BY) to indices to cut down on the data read. It will then load the relevant info in memory for processing. If the info is too large, it will default to writing it to disk and reading from disk to perform the comparison. You want to avoid disk reads <strong>at all costs</strong> as they are inefficient, slow, repetitive and can sometimes be flat-out wrong under specific circumstances.</p>

<p>When MySQL finds an index that is possible to be used, it will load the index table instead. An index table is a hash table between memory location and the value of the index. So, for instance, the index table for a primary key looks like this:</p>

<pre><code>  id      location
  1         0 bytes in
  2         17 bytes in
  3         34 bytes in
</code></pre>

<p>This is extremely efficient as even very large index tables can fit in tiny amounts of memory.</p>

<p>Why am I talking about indices? <strong>Because by using RAND(), you are preventing MySQL from using them</strong>. <code>ORDER BY RAND()</code> forces MySQL to create a new random value for each row. This requires MySQL to copy all your table data in what is called a temporary table, and to add a new field with the RAND() value. This table will be too big to store in memory, so it will be stored to disk.</p>

<p>When you tell MySQL to ORDER BY RAND(), and the table is created, MySQL will then compare every single row by pairs (MySQL sorting uses quicksort). Since the rows are too big, you're looking at quite a few disk reads for this operation. When it is done, it returns, and you get your data -at a huge cost.</p>

<p>There are plenty of ways to prevent this massive overhead SNAFU. One of them is to select ID from RAND() to maximum index and limit by 1. This does not require the creation of an extra field. There are plenty of similar Stack questions.</p>",2
17058147,how to acess my database elements using the for loop?,"<p>I'm learning <code>PHP</code> and I'm well versed with <code>Java</code> and <code>C</code>. I was given a practice assignment to create a shopping project. I need to pull out the products from my database. I'm using the product id to do this. I thought of using for loop but I can't access the <code>prod_id</code> from the database as a condition to check! Can anybody help me?! I have done all the form handling but I need to output the products. This is the <code>for</code>-loop I am using. Please let me know if I have to add any more info. Thanks in advance :)</p>

<pre><code>for($i=1; $i + 1 &lt; prod_id; $i++)
{
   $query = ""SELECT * FROM products where prod_id=$i"";
}
</code></pre>",php|loops|for-loop,"<p>I think you want all records from your table, if this is the requirement you can easily do it</p>

<pre><code>$query = mysql_query(""SELECT * FROM products""); // where condition is optional   

while($row=mysql_fetch_array($query)){
   print_r($row);
   echo '&lt;br&gt;';
}
</code></pre>

<p>This will print an associative array for each row, you can access each field like</p>

<pre><code>echo $row['prod_id'];
</code></pre>",0
17058147,how to acess my database elements using the for loop?,"<p>I'm learning <code>PHP</code> and I'm well versed with <code>Java</code> and <code>C</code>. I was given a practice assignment to create a shopping project. I need to pull out the products from my database. I'm using the product id to do this. I thought of using for loop but I can't access the <code>prod_id</code> from the database as a condition to check! Can anybody help me?! I have done all the form handling but I need to output the products. This is the <code>for</code>-loop I am using. Please let me know if I have to add any more info. Thanks in advance :)</p>

<pre><code>for($i=1; $i + 1 &lt; prod_id; $i++)
{
   $query = ""SELECT * FROM products where prod_id=$i"";
}
</code></pre>",php|loops|for-loop,"<ol>
<li><p>First of all, you should use <a href=""http://www.php.net/manual/en/refs.database.php"" rel=""nofollow"">database access drivers</a> to connect to your database.</p></li>
<li><p>Your query should not be passed to cycle. It is very rare situation, when such approach is needed. Better to use <code>WHERE</code> condition clause properly.</p></li>
<li><p>To get all rows from <code>products</code> table you may just ommit <code>WHERE</code> clause. Consider reading of <a href=""http://dev.mysql.com/doc/refman/5.7/en/select.html"" rel=""nofollow""><strong>manual</strong></a> at <a href=""http://dev.mysql.com/doc"" rel=""nofollow"">http://dev.mysql.com/doc</a>.</p></li>
</ol>

<blockquote>
  <p>The statement selects all rows if there is no WHERE clause.</p>
</blockquote>

<p>Following example is for <a href=""http://www.php.net/mysqli"" rel=""nofollow""><code>MySQLi</code></a> driver.</p>

<pre><code>// connection to MySQL:
// replace host, login, password, database with real values.
$dbms = mysqli_connect('host', 'login', 'password', 'database');

// if not connected then exit:
if($dbms-&gt;connect_errno)exit($dbms-&gt;connect_error);

$sql = ""SELECT * FROM products"";

// executing query:
$result = $dbms-&gt;query($sql);

// if query failed then exit:
if($dbms-&gt;errno)exit($dbms-&gt;error);

// for each result row as $product:
while($product = $row-&gt;fetch_assoc()){
    // output:
    var_dump($product); // replace it with requied template
}

// free result memory:
$result-&gt;free();

// close dbms connection:
$dbms-&gt;close();
</code></pre>",2
17058147,how to acess my database elements using the for loop?,"<p>I'm learning <code>PHP</code> and I'm well versed with <code>Java</code> and <code>C</code>. I was given a practice assignment to create a shopping project. I need to pull out the products from my database. I'm using the product id to do this. I thought of using for loop but I can't access the <code>prod_id</code> from the database as a condition to check! Can anybody help me?! I have done all the form handling but I need to output the products. This is the <code>for</code>-loop I am using. Please let me know if I have to add any more info. Thanks in advance :)</p>

<pre><code>for($i=1; $i + 1 &lt; prod_id; $i++)
{
   $query = ""SELECT * FROM products where prod_id=$i"";
}
</code></pre>",php|loops|for-loop,"<p>I would suggest that you use PDO. This method will secure all your SQLand will keep all your connections closed and intact.</p>

<p>Here is an example</p>

<p><strong>EXAMPLE.</strong>
This is your dbc class (dbc.php)</p>

<pre><code>&lt;?php

class dbc {

    public $dbserver = 'server';
    public $dbusername = 'user';
    public $dbpassword = 'pass';
    public $dbname = 'db';

    function openDb() {    
        try {
            $db = new PDO('mysql:host=' . $this-&gt;dbserver . ';dbname=' . $this-&gt;dbname . ';charset=utf8', '' . $this-&gt;dbusername . '', '' . $this-&gt;dbpassword . '');
        } catch (PDOException $e) {
            die(""error, please try again"");
        }        
        return $db;
    }

    function getproduct($id) {
        //prepared query to prevent SQL injections
        $query = ""SELECT * FROM products where prod_id=?"";
        $stmt = $this-&gt;openDb()-&gt;prepare($query);
        $stmt-&gt;bindValue(1, $id, PDO::PARAM_INT);
        $stmt-&gt;execute();
        $rows = $stmt-&gt;fetchAll(PDO::FETCH_ASSOC);
        return $rows;
    }    
?&gt;
</code></pre>

<p>your PHP page: </p>

<pre><code>&lt;?php 
require ""dbc.php"";
for($i=1; $i+1&lt;prod_id; $i++) 
{

$getList = $db-&gt;getproduct($i);
//for each loop will be useful Only if there are more than one records (FYI)
foreach ($getList as $key=&gt; $row) {
         echo $row['columnName'] .' key: '. $key;
    }
}
</code></pre>",2
17058147,how to acess my database elements using the for loop?,"<p>I'm learning <code>PHP</code> and I'm well versed with <code>Java</code> and <code>C</code>. I was given a practice assignment to create a shopping project. I need to pull out the products from my database. I'm using the product id to do this. I thought of using for loop but I can't access the <code>prod_id</code> from the database as a condition to check! Can anybody help me?! I have done all the form handling but I need to output the products. This is the <code>for</code>-loop I am using. Please let me know if I have to add any more info. Thanks in advance :)</p>

<pre><code>for($i=1; $i + 1 &lt; prod_id; $i++)
{
   $query = ""SELECT * FROM products where prod_id=$i"";
}
</code></pre>",php|loops|for-loop,"<pre><code>for($i=1;$i+1&lt;prod_id;$i++) {
    $query = ""SELECT * FROM products where prod_id=$i"";
    $result = mysqli_query($query, $con);
</code></pre>

<p>$con is the Database connection details
you can use wile loop to loop thru each rows</p>

<pre><code>    while ($row = mysqli_fetch_array($result))
    {
        ......
    }
}
</code></pre>",0
17058147,how to acess my database elements using the for loop?,"<p>I'm learning <code>PHP</code> and I'm well versed with <code>Java</code> and <code>C</code>. I was given a practice assignment to create a shopping project. I need to pull out the products from my database. I'm using the product id to do this. I thought of using for loop but I can't access the <code>prod_id</code> from the database as a condition to check! Can anybody help me?! I have done all the form handling but I need to output the products. This is the <code>for</code>-loop I am using. Please let me know if I have to add any more info. Thanks in advance :)</p>

<pre><code>for($i=1; $i + 1 &lt; prod_id; $i++)
{
   $query = ""SELECT * FROM products where prod_id=$i"";
}
</code></pre>",php|loops|for-loop,"<p>Hope this might work as per your need..</p>

<pre><code>for($i=1; $i+1&lt;prod_id; $i++) {
   $query  = ""SELECT * FROM products where prod_id = $i"";
   $result = mysql_query($query);

   while ($row = mysql_fetch_array($result, MYSQL_NUM)) {
         print_r($row);  
   }
}
</code></pre>",0
30686390,MySQLi LEFT JOIN query is throwing a syntax error,"<p>I have two tables 'lr_users' and 'lr_ranks' with the following table structures:</p>

<blockquote>
  <p><strong>lr_users:</strong>
  user_id(pk), username, rank(fk), job_id(fk), date_joined </p>
  
  <blockquote>
    <p><strong>lr_ranks:</strong> rank_id(pk), name</p>
  </blockquote>
</blockquote>

<pre><code>$qry= mysqli_query($con, ""SELECT lr_users.username, lr_users.rank, lr_users.job_id, lr_users.date_joined lr_ranks.name AS rankname FROM lr_users 
    LEFT JOIN lr_ranks ON lr_users.rank = lr_ranks.rank_id"")or die(mysqli_error($con));
$rows = mysqli_num_rows($qry);
</code></pre>

<p>Above is my PHP code for generating a 'LEFT JOIN' query, however when I run it i get the following error:</p>

<blockquote>
  <p>You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '.name AS rankname FROM lr_users LEFT JOIN lr_ranks ON lr_users.rank = lr_ran' at line 1.</p>
</blockquote>

<p>What am I doing wrong? </p>",php|mysql|join|mysqli|left-join,"<p>Syntax error (comma missing before <code>lr_users.date_joined</code>):</p>

<pre><code>$qry= mysqli_query($con, ""SELECT lr_users.username, lr_users.rank, lr_users.job_id, lr_users.date_joined, lr_ranks.name AS rankname FROM lr_users 
    LEFT JOIN lr_ranks ON lr_users.rank = lr_ranks.rank_id"")or die(mysqli_error($con));
$rows = mysqli_num_rows($qry);
</code></pre>",2
30686390,MySQLi LEFT JOIN query is throwing a syntax error,"<p>I have two tables 'lr_users' and 'lr_ranks' with the following table structures:</p>

<blockquote>
  <p><strong>lr_users:</strong>
  user_id(pk), username, rank(fk), job_id(fk), date_joined </p>
  
  <blockquote>
    <p><strong>lr_ranks:</strong> rank_id(pk), name</p>
  </blockquote>
</blockquote>

<pre><code>$qry= mysqli_query($con, ""SELECT lr_users.username, lr_users.rank, lr_users.job_id, lr_users.date_joined lr_ranks.name AS rankname FROM lr_users 
    LEFT JOIN lr_ranks ON lr_users.rank = lr_ranks.rank_id"")or die(mysqli_error($con));
$rows = mysqli_num_rows($qry);
</code></pre>

<p>Above is my PHP code for generating a 'LEFT JOIN' query, however when I run it i get the following error:</p>

<blockquote>
  <p>You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '.name AS rankname FROM lr_users LEFT JOIN lr_ranks ON lr_users.rank = lr_ran' at line 1.</p>
</blockquote>

<p>What am I doing wrong? </p>",php|mysql|join|mysqli|left-join,"<p>If you formatted your code more legibly, this kind of error wouldn't arise:</p>

<pre><code>$query = ""
SELECT u.username
     , u.rank
     , u.job_id
     , u.date_joined 
     , r.name rankname 
  FROM lr_users u
  LEFT 
  JOIN lr_ranks r
    ON u.rank = r.rank_id;
"";
</code></pre>",0
31083366,2 array same keys and value check if value from one array is here,"<p>I have 2 arrays merge to one array, Now i want to check if value 1 in array <code>$b</code> then add special content value to <code>$b</code> in foreach.</p>

<p>But in below example added the content to <code>$s</code> and <code>$b</code></p>

<pre><code>$s = array(1,2,3,4,5);
$b = array(1,2,3,4);

 $one = array_merge($s,$b);
 $arr = array_chunk($one, 1);
foreach($arr as $k=&gt;$v){
if(in_array($arr[$k][0],$b)){
    echo ""c"";
}
     echo $arr[$k][0].""&lt;br&gt;"";
}
</code></pre>

<p>Output</p>

<pre><code>c1
c2
c3
c4
5
c1
c2
c3
c4
</code></pre>

<p>And i want that output</p>

<pre><code>1
2
3
4
5
c1
c2
c3
c4
</code></pre>",php|arrays|if-statement,"<p>It's Simple. You just have to check with the <strong>if condition</strong>. If the loop has been repeated more than the length of the array $s, then do echo ""c"";</p>

<pre><code>$s = array(1,2,3,4,5);
$b = array(1,2,3,4);

$one = array_merge($s,$b);
$arr = array_chunk($one, 1);
$s_length = count($s);
$i = 1;
foreach($arr as $k=&gt;$v){
    // Check if the loop has been repeated more than the length of the array $s
    if($i &gt; $s_length){
        echo ""c"";
    }
    echo $arr[$k][0].""&lt;br&gt;"";
    $i++;
}
</code></pre>",0
31083366,2 array same keys and value check if value from one array is here,"<p>I have 2 arrays merge to one array, Now i want to check if value 1 in array <code>$b</code> then add special content value to <code>$b</code> in foreach.</p>

<p>But in below example added the content to <code>$s</code> and <code>$b</code></p>

<pre><code>$s = array(1,2,3,4,5);
$b = array(1,2,3,4);

 $one = array_merge($s,$b);
 $arr = array_chunk($one, 1);
foreach($arr as $k=&gt;$v){
if(in_array($arr[$k][0],$b)){
    echo ""c"";
}
     echo $arr[$k][0].""&lt;br&gt;"";
}
</code></pre>

<p>Output</p>

<pre><code>c1
c2
c3
c4
5
c1
c2
c3
c4
</code></pre>

<p>And i want that output</p>

<pre><code>1
2
3
4
5
c1
c2
c3
c4
</code></pre>",php|arrays|if-statement,"<p>I don't know exactly if that is what you want but:   </p>

<pre><code>$s = array(1,2,3,4,5);
$b = array(1,2,3,4);

$arr = array_diff($s, $b);

// Search differences between diff() and $s
$cs= """";
$cb= """";
// If array have semantical keys we'll do an array_values()
foreach ( array_values($arr) as $k =&gt; $v ){ 
    // If $cs is actually set as 'c'
    if ( ""c""!=$cs ){
        // If a value in the diff() array are not in s =&gt; $cs = 'c'
        $cs= ( !in_array( $v, $s ,true ))? ""c"": """";
    }
    // If $cb is actually set as 'c'
    if ( ""c""!=$cb ){
        $cb= ( !in_array( $v, $b ,true ))? ""c"" : """";
    }
}

// Print each array values with associated $c
foreach ( $s as $k =&gt; $v ){ 
    echo ""&lt;br&gt;$cs$v""    ;
}
foreach ( $b as $k =&gt; $v ){ 
    echo ""&lt;br&gt;$cb$v""    ;
}
</code></pre>

<p>Output:</p>

<pre><code>1
2
3
4
5
c1
c2
c3
c4
</code></pre>",0
30716511,Javascript (jQuery) loading modal until database queries end on php page,"<p>I have many mysql queries on the page. Until they are done, i'd like to show() a modal on my page. Modal is ready.</p>

<p>My Algorithm : <br></p>

<pre><code>page.onload -&gt; show loading modal
/*wait until all the queries end*/
hide loading modal.
</code></pre>

<p>how can i handle wait until all the queries end part ?<br>
<br>Thanks in advance.</p>

<p>---Edit---
<br><br>
I am using laravel debugbar. Debugbar shows me as following :<br><br>
<img src=""https://i.stack.imgur.com/Rx91t.png"" alt=""enter image description here""></p>

<p><br>
---Update--
<br></p>

<p>Javascript file :</p>

<pre><code>$(document).ready(function(){
   $('#myTab a').on('load', function (e) {
        e.preventDefault();
        $(this).tab('show');
    },onLoadMyTab());
}

function onLoadMyTab(){
   //postRoute is on my routes.php and data is including the values
   $.post(""postRoute"", function(data)){
      //some javascript code, just for UI
   }
}
</code></pre>

<p>Routes.php<br></p>

<pre><code>Route::post('postRoute', array(
   'uses' =&gt; 'myController@myPostFunction'
   'as' =&gt; 'postRoute'
));
</code></pre>

<p><br>
myController.php
<br></p>

<pre><code>public function myPostFunction(){
   //some database queries here, returning JSON to my onLoadMyTab js function
   //which returns as data to onLoadMyTab js function.
}
</code></pre>

<p>Hope i could make sense.</p>",javascript|php|jquery|mysql|laravel,"<p>A couple issues here:</p>

<ol>
<li>You have an error in your DOM ready handler. Within <code>$(...).on()</code> the third argument is the callback called whenever the event is emitted. <a href=""http://api.jquery.com/on/"" rel=""nofollow"">http://api.jquery.com/on/</a> </li>
</ol>

<p>You are actually passing in <code>undefined</code> into the callback because you called <code>onLoadMyTab</code> which returns undefined implicitly.</p>

<p>You probably want to just call the your <code>onLoadMyTab</code> immediately when the DOM is ready.</p>

<pre><code>$(document).ready(onLoadMyTab);
</code></pre>

<ol start=""2"">
<li><p>$.post will make an ajax request and call the second param when the request completes.</p>

<pre><code>function onLoadMyTab() {
    $.post(""postRoute"", function(data)){
        // show modal with data here
    });
}
</code></pre></li>
</ol>",1
30988756,"Parse error: syntax error, unexpected '<' PHP","<p>I have this code:</p>

<pre><code>&lt;p class=""test""&gt;
&lt;?php  
    $button_value = get_field('button_name');
    echo $button_value;
    if ($button_value == 1) {
        &lt;a href=""?page_id=26"" class=""get_quote""&gt;get quote&lt;/a&gt; 
    }
?&gt;  
&lt;/p&gt;
</code></pre>

<p>This is the error:</p>

<pre><code>Parse error: syntax error, unexpected '&lt;' in /home/dgsite81/public_html/dgprint/wp-content/themes/dgprint/index.php on line 122
</code></pre>",php|syntax-error,"<pre><code>echo '&lt;a href=""?page_id=26"" class=""get_quote""&gt;get quote&lt;/a&gt;';
</code></pre>",2
47718533,How to sort a multidimensional array on PHP where keys are not string labels,"<p>I have this multidimensional array:</p>

<pre><code>$serviceTimes = Array (
  [0] =&gt; Array ( [0] =&gt; PM1900 [1] =&gt; 7:00pm )
  [1] =&gt; Array ( [0] =&gt; PM1900 [1] =&gt; 7:00pm )
  [2] =&gt; Array ( [0] =&gt; PM1415 [1] =&gt; 2:15pm )
  [3] =&gt; Array ( [0] =&gt; PM1919 [1] =&gt; 7:19pm )
  [6] =&gt; Array ( [0] =&gt; PM2020 [1] =&gt; 8:20pm )
)
</code></pre>

<p>But I am unable to sort the array on the [0] element. This does not work:</p>

<p><code>array_multisort( $serviceTimes[0], SORT_ASC, $serviceTimes );</code></p>

<p>nor does this work</p>

<p><code>array_multisort( $serviceTimes[][0], SORT_ASC, $serviceTimes );</code></p>

<p>Any thoughts?</p>

<p>Ideally and ultimately, this is what I am looking to produce:</p>

<pre><code>Array (
  [0] =&gt; 2:15pm )
  [1] =&gt; 7:00pm )
  [2] =&gt; 7:00pm )
  [3] =&gt; 7:19pm )
  [4] =&gt; 8:20pm )
)
</code></pre>",php|multidimensional-array,"<p>Use <code>array_column</code> to extract the <code>0</code> column from the sub-arrays and sort on that:</p>

<pre><code>array_multisort(array_column($serviceTimes, 0), SORT_ASC, $serviceTimes);
</code></pre>

<p>You state sorting on the <code>0</code> element but your output shows times from the <code>1</code> element.  If so just change the <code>array_column</code> argument to a <code>1</code>.</p>",4
47718533,How to sort a multidimensional array on PHP where keys are not string labels,"<p>I have this multidimensional array:</p>

<pre><code>$serviceTimes = Array (
  [0] =&gt; Array ( [0] =&gt; PM1900 [1] =&gt; 7:00pm )
  [1] =&gt; Array ( [0] =&gt; PM1900 [1] =&gt; 7:00pm )
  [2] =&gt; Array ( [0] =&gt; PM1415 [1] =&gt; 2:15pm )
  [3] =&gt; Array ( [0] =&gt; PM1919 [1] =&gt; 7:19pm )
  [6] =&gt; Array ( [0] =&gt; PM2020 [1] =&gt; 8:20pm )
)
</code></pre>

<p>But I am unable to sort the array on the [0] element. This does not work:</p>

<p><code>array_multisort( $serviceTimes[0], SORT_ASC, $serviceTimes );</code></p>

<p>nor does this work</p>

<p><code>array_multisort( $serviceTimes[][0], SORT_ASC, $serviceTimes );</code></p>

<p>Any thoughts?</p>

<p>Ideally and ultimately, this is what I am looking to produce:</p>

<pre><code>Array (
  [0] =&gt; 2:15pm )
  [1] =&gt; 7:00pm )
  [2] =&gt; 7:00pm )
  [3] =&gt; 7:19pm )
  [4] =&gt; 8:20pm )
)
</code></pre>",php|multidimensional-array,"<p>Generally, you may also use <a href=""http://php.net/manual/en/function.usort.php"" rel=""nofollow noreferrer"">usort</a>() with you own compoare function for this kind of custom sort (all functions prefixed with ""u"" : <a href=""http://php.net/manual/en/function.usort.php"" rel=""nofollow noreferrer"">usort</a>, <a href=""http://php.net/manual/en/function.uasort.php"" rel=""nofollow noreferrer"">uasort</a>, <a href=""http://php.net/manual/en/function.uksort.php"" rel=""nofollow noreferrer"">uksort</a>...)</p>

<pre><code>&lt;?php
function mysort ($a, $b){
    return strcmp($a[0], $b[0]);
}

$serviceTimes = array ( 0 =&gt; array ( 0 =&gt; 'PM1900', 1 =&gt; '7:00pm', ), 1 =&gt; array ( 0 =&gt; 'PM1900', 1 =&gt; '7:00pm', ), 2 =&gt; array ( 0 =&gt; 'PM1415', 1 =&gt; '2:15pm', ), 3 =&gt; array ( 0 =&gt; 'PM1919', 1 =&gt; '7:19pm', ), 4 =&gt; array ( 0 =&gt; 'PM2020', 1 =&gt; '8:20pm', ), );

usort($serviceTimes, 'mysort');

var_dump(serviceTimes);
</code></pre>",1
47651994,yii redirect with array,"<pre><code>$this-&gt;redirect(array($redirect, 'error' =&gt; $error, 'msg' =&gt; $msg, 'details' =&gt; $details));
</code></pre>

<p>How can we pass array as a parameter? 
I have tried during redirection.</p>

<p>Returning:</p>

<blockquote>
  <p>Error 400 Your request is invalid.</p>
</blockquote>

<p>Any help would be appreciated. </p>",php|redirect|yii,"<p>If redirect to different page</p>

<pre><code>$this-&gt;redirect(array('YourController/YourFunction','error'=&gt;$error,'msg'=&gt;$msg,'details'=&gt;$details));
</code></pre>

<p>If in the same controller you just need to put your function on the array.
hope this can help</p>",-1
47651994,yii redirect with array,"<pre><code>$this-&gt;redirect(array($redirect, 'error' =&gt; $error, 'msg' =&gt; $msg, 'details' =&gt; $details));
</code></pre>

<p>How can we pass array as a parameter? 
I have tried during redirection.</p>

<p>Returning:</p>

<blockquote>
  <p>Error 400 Your request is invalid.</p>
</blockquote>

<p>Any help would be appreciated. </p>",php|redirect|yii,"<p>After a lots of tries I have found that , the array what I was passing is an associative array and passing with <code>GET</code> method, so while redirection if we seen in URL, associative array passing with every internal element of <code>$details</code> array, and same parameters are not listed at destination method, so the result will not found such a method.</p>",0
47411152,Web scraping URL contains </a> end tag at the end how to remove,"<p>So I have this code to parse a url link from a website, but it contains and <code>&lt;/a&gt;</code> end tag at the end of the url like this <code>http://www2.enekoshop.jp/shop/tadaseinikuten/&lt;/a&gt;</code></p>

<pre><code>$html = new simple_html_dom();
$html-&gt;load($xml-&gt;retdata);

$item = array();

foreach($html-&gt;find('body') as $home) {
    //some other fields here
    $email1 = preg_replace('/[^\00-\255]+/u','',trim($home-&gt;find('div[id=""home""] div[id=""mainblock""] div[class=""txtblock""]', 8)-&gt;children(1)-&gt;plaintext));

    $email = filter_var($email1, FILTER_SANITIZE_EMAIL);

    if(filter_var($email, FILTER_VALIDATE_EMAIL)){
        $item['email'] = $email;
    } else {
        $item['email'] = NULL;
    }
}
</code></pre>

<p>Although I'm using <code>plaintext</code> to just scrape a text, it has <code>&lt;/a&gt;</code> end tag. How can I remove it?</p>",php|html|regex|parsing,"<p>How about just expand your <code>preg_replace()</code> pattern a little?</p>

<p>Old Pattern: <code>/[^\00-\255]+/u</code><br></p>

<p>New Pattern: <code>~[^\00-\255]+|&lt;/a&gt;$~u</code></p>

<p><a href=""https://regex101.com/r/vGVuYq/1"" rel=""nofollow noreferrer"">Pattern &amp; Replace Demo Link</a></p>

<p>I am just changing your pattern delimiters to avoid escaping the forward slash in <code>&lt;/a&gt;</code> and adding an ""alternative"" (<code>|</code> = 'or') to match <code>&lt;/a&gt;</code> only at the end of the string using the <code>$</code> anchor.</p>

<pre><code>$email1 = preg_replace('~[^\00-\255]+|&lt;/a&gt;$~u','',trim($home-&gt;find('div[id=""home""] div[id=""mainblock""] div[class=""txtblock""]', 8)-&gt;children(1)-&gt;plaintext));
</code></pre>",1
14799285,How to install SonataIntlBundle with composer?,"<p>I read <a href=""http://sonata-project.org/bundles/intl/master/doc/reference/installation.html"" rel=""nofollow"">the documentation</a> but when I do this :</p>

<pre><code>php composer.phar require sonata-project/intl-bundle
</code></pre>

<p>I have this message in my console :5</p>

<pre><code>Please provide a version constraint for the sonata-project/intl-bundle requirement: 
</code></pre>

<p>So I tried ""master"" or ""2.*"" but this doesn't work.</p>

<p>I'm using Symfony 2.1.7 and PHP 5.4.3, with the php_intl extension.</p>

<p>If someone can help me... Thanks !</p>",php|symfony-2.1|composer-php|symfony-sonata|intl,"<p>You should take a look at <a href=""https://packagist.org/packages/sonata-project/intl-bundle"" rel=""nofollow noreferrer"">their package</a> to determine which version of the package you want. In this case, you only have a <code>dev-master</code> version, so you should run this:</p>

<pre><code>$ php composer.phar require sonata-project/intl-bundle:dev-master
</code></pre>

<p>For a longer answer on how to install bundles with composer, see <a href=""https://stackoverflow.com/a/13340180/1149495"">this answer on another question</a></p>",2
14465212,PHP error: open_basedir restriction in effect,"<p>I using this Yubico authentication PHP class: <a href=""https://github.com/Yubico/php-yubico"" rel=""nofollow"">https://github.com/Yubico/php-yubico</a>. I create php file test.php with this code:</p>

<pre><code>&lt;?php
 require_once 'Auth/Yubico.php';
 $otp = ""ccbbddeertkrctjkkcglfndnlihhnvekchkcctif"";

 # Generate a new id+key from https://api.yubico.com/get-api-key/
 $yubi = new Auth_Yubico('42', 'FOOBAR=');
 $auth = $yubi-&gt;verify($otp);
 if (PEAR::isError($auth)) {
    print ""&lt;p&gt;Authentication failed: "" . $auth-&gt;getMessage();
    print ""&lt;p&gt;Debug output from server: "" . $yubi-&gt;getLastResponse();
 } else {
    print ""&lt;p&gt;You are authenticated!"";
 }
?&gt;
</code></pre>

<p>And do all instructions in this github library. When I open this script I get:    </p>

<blockquote>
  <p>Warning: require_once(): open_basedir restriction in effect.
  File(/usr/share/php/Auth/Yubico.php) is not within the allowed
  path(s): (/var/www/hmci/data:.) in
  /var/www/hmci/data/www/hmci.ru/php-yubico/test.php on line 2 Warning:
  require_once(/usr/share/php/Auth/Yubico.php): failed to open stream:
  Operation not permitted in
  /var/www/hmci/data/www/hmci.ru/php-yubico/test.php on line 2 Fatal
  error: require_once(): Failed opening required 'Auth/Yubico.php'
  (include_path='.:/usr/share/php:/usr/share/pear') in
  /var/www/hmci/data/www/hmci.ru/php-yubico/test.php on line 2</p>
</blockquote>

<p>How to solve this problem?</p>",php|require-once|open-basedir,"<p>Using an explicit path to the file you want to include causes PHP to skip the directory scanning causing the error:</p>

<pre><code>require_once dirname(__FILE__) . '/Auth/Yubico.php';
</code></pre>",1
14465212,PHP error: open_basedir restriction in effect,"<p>I using this Yubico authentication PHP class: <a href=""https://github.com/Yubico/php-yubico"" rel=""nofollow"">https://github.com/Yubico/php-yubico</a>. I create php file test.php with this code:</p>

<pre><code>&lt;?php
 require_once 'Auth/Yubico.php';
 $otp = ""ccbbddeertkrctjkkcglfndnlihhnvekchkcctif"";

 # Generate a new id+key from https://api.yubico.com/get-api-key/
 $yubi = new Auth_Yubico('42', 'FOOBAR=');
 $auth = $yubi-&gt;verify($otp);
 if (PEAR::isError($auth)) {
    print ""&lt;p&gt;Authentication failed: "" . $auth-&gt;getMessage();
    print ""&lt;p&gt;Debug output from server: "" . $yubi-&gt;getLastResponse();
 } else {
    print ""&lt;p&gt;You are authenticated!"";
 }
?&gt;
</code></pre>

<p>And do all instructions in this github library. When I open this script I get:    </p>

<blockquote>
  <p>Warning: require_once(): open_basedir restriction in effect.
  File(/usr/share/php/Auth/Yubico.php) is not within the allowed
  path(s): (/var/www/hmci/data:.) in
  /var/www/hmci/data/www/hmci.ru/php-yubico/test.php on line 2 Warning:
  require_once(/usr/share/php/Auth/Yubico.php): failed to open stream:
  Operation not permitted in
  /var/www/hmci/data/www/hmci.ru/php-yubico/test.php on line 2 Fatal
  error: require_once(): Failed opening required 'Auth/Yubico.php'
  (include_path='.:/usr/share/php:/usr/share/pear') in
  /var/www/hmci/data/www/hmci.ru/php-yubico/test.php on line 2</p>
</blockquote>

<p>How to solve this problem?</p>",php|require-once|open-basedir,"<p><code>open_basedir</code> is a PHP option restricting PHP's access to specific directories.</p>

<p>You have the directory <code>/usr/share/php</code> in your include path without having access to it. Usually, PHP tries all paths in the <code>include_path</code> one by one. This means that PHP cannot find the file <code>Auth/Yubico.php</code> in the current directory, so PHP searches in <code>/usr/share/php</code> next.</p>

<p>Make sure that the file you want to include is actually there. You can also remove <code>/usr/share/php</code> from your include path  (either by editing the <code>php.ini</code> file, if you have access to it, otherwhise using the <code>ini_set()</code>method).</p>",2
14713258,"cakephp $this->request-is(""post"") return false for just one form, so strange?","<p>I have many forms in the website. They are all created in the similar way like</p>

<pre><code>&lt;?php echo $this-&gt;Form-&gt;create('SysUser');?&gt;
&lt;fieldset&gt;
&lt;legend&gt;&lt;?php echo __('Edit Basic Information'); ?&gt;&lt;/legend&gt;
&lt;?php
echo $this-&gt;Form-&gt;input('SysUser.first_name');
echo $this-&gt;Form-&gt;input('SysUser.family_name',array('label'=&gt;__(""Last Name"")));
echo $this-&gt;Form-&gt;input('SysUser.mobile_phone_number');
echo $this-&gt;Form-&gt;input('SysUser.user_name',array('label'=&gt;__(""Screen Name"")));
echo $this-&gt;Form-&gt;input('action', array('type'=&gt;'hidden','value'=&gt;'edit_basic_info'));
echo $this-&gt;Form-&gt;input('SysUser.id', array('type'=&gt;'hidden','value'=&gt;$user[""id""]));
?&gt;
&lt;/fieldset&gt;
&lt;?php echo $this-&gt;Form-&gt;end(__('Submit'));?&gt;
</code></pre>

<p>But the type of one form becomes ""put"" , not ""post"". I never explicitly set the type to ""post"" when I create these forms. I gather CakePHP sets the default value to post. Now it seems something wrong about the way I create this new special form. Oddly, this was working days ago!</p>

<p>I don't know what's wrong. Here is it:</p>

<pre><code>&lt;?php echo $this-&gt;Form-&gt;create('Member'); ?&gt;
&lt;fieldset&gt;
    &lt;legend&gt;&lt;?php echo __('Basic Profile Setup'); ?&gt;&lt;/legend&gt;
    &lt;?php
    echo $this-&gt;Form-&gt;input('Member.gender_id');
    $w = array();
    for ($i = 40; $i &lt; 120; $i++) {
        $w[$i] = $i . "" kg"";
    }
    $h = array();
    for ($i = 120; $i &lt; 230; $i++) {
        $h[$i] = $i . "" cm"";
    }
    echo $this-&gt;Form-&gt;input('Member.height', array(
        'options' =&gt; $h,
        'empty' =&gt; __(""choose one"")
    ));
    echo $this-&gt;Form-&gt;input('Member.weight', array(
        'options' =&gt; $w,
        'empty' =&gt; __(""choose one"")
    ));
    $options['minYear'] = date('Y') - 78;
    $options['maxYear'] = date('Y') - 18;
    echo $this-&gt;Form-&gt;input('Member.birthdate', $options);
    echo $this-&gt;Form-&gt;input('Member.residential_location_id', array('label' =&gt; __(""City/Location"")));
    echo $this-&gt;Form-&gt;input('Member.occupation_id',array('id'=&gt;'MemberOccupationId'));
    echo $this-&gt;Form-&gt;input('action', array('type' =&gt; 'hidden', 'value' =&gt; 'create_member'));
    ?&gt;
&lt;/fieldset&gt;
&lt;?php
echo $this-&gt;Form-&gt;end(array(""label"" =&gt; __('Save')));
</code></pre>",cakephp,"<p>I had this problem as well. In my situation this was happening when I had validation errors. So for the second run, the script thought it was a PUT request instead of a POST request. Now, because it was a PUT, it didn't even get inside the if-clause where I checked if it was a POST, so it would return to the input and try to create a POST request. This was looping forever.</p>

<p>The solution? Checking for a NOT GET.</p>

<p>So you would get something like this:</p>

<pre><code>if (!$this-&gt;request-&gt;is('get')){
    //Save logic here
}
</code></pre>

<p>I have seen an example like this in the Cookbook, but I can not find it. So I have a feeling it has been updated, but as far as I am concerned you have to use this method. So you will cover a PUT, as well as a POST request.</p>

<p><strong>UPDATE</strong></p>

<p>It is not recommended to use this approach. It is a PUT/POST based on if the <code>id</code> is set in the form. Since I was setting the id based on the type of request, instead of if it actually exists, it was switching over and over again. I am using 1 form for the <code>add</code> and the <code>edit</code> action. They both use the <code>edit.ctp</code> which is just set up more flexible.</p>",3
14713258,"cakephp $this->request-is(""post"") return false for just one form, so strange?","<p>I have many forms in the website. They are all created in the similar way like</p>

<pre><code>&lt;?php echo $this-&gt;Form-&gt;create('SysUser');?&gt;
&lt;fieldset&gt;
&lt;legend&gt;&lt;?php echo __('Edit Basic Information'); ?&gt;&lt;/legend&gt;
&lt;?php
echo $this-&gt;Form-&gt;input('SysUser.first_name');
echo $this-&gt;Form-&gt;input('SysUser.family_name',array('label'=&gt;__(""Last Name"")));
echo $this-&gt;Form-&gt;input('SysUser.mobile_phone_number');
echo $this-&gt;Form-&gt;input('SysUser.user_name',array('label'=&gt;__(""Screen Name"")));
echo $this-&gt;Form-&gt;input('action', array('type'=&gt;'hidden','value'=&gt;'edit_basic_info'));
echo $this-&gt;Form-&gt;input('SysUser.id', array('type'=&gt;'hidden','value'=&gt;$user[""id""]));
?&gt;
&lt;/fieldset&gt;
&lt;?php echo $this-&gt;Form-&gt;end(__('Submit'));?&gt;
</code></pre>

<p>But the type of one form becomes ""put"" , not ""post"". I never explicitly set the type to ""post"" when I create these forms. I gather CakePHP sets the default value to post. Now it seems something wrong about the way I create this new special form. Oddly, this was working days ago!</p>

<p>I don't know what's wrong. Here is it:</p>

<pre><code>&lt;?php echo $this-&gt;Form-&gt;create('Member'); ?&gt;
&lt;fieldset&gt;
    &lt;legend&gt;&lt;?php echo __('Basic Profile Setup'); ?&gt;&lt;/legend&gt;
    &lt;?php
    echo $this-&gt;Form-&gt;input('Member.gender_id');
    $w = array();
    for ($i = 40; $i &lt; 120; $i++) {
        $w[$i] = $i . "" kg"";
    }
    $h = array();
    for ($i = 120; $i &lt; 230; $i++) {
        $h[$i] = $i . "" cm"";
    }
    echo $this-&gt;Form-&gt;input('Member.height', array(
        'options' =&gt; $h,
        'empty' =&gt; __(""choose one"")
    ));
    echo $this-&gt;Form-&gt;input('Member.weight', array(
        'options' =&gt; $w,
        'empty' =&gt; __(""choose one"")
    ));
    $options['minYear'] = date('Y') - 78;
    $options['maxYear'] = date('Y') - 18;
    echo $this-&gt;Form-&gt;input('Member.birthdate', $options);
    echo $this-&gt;Form-&gt;input('Member.residential_location_id', array('label' =&gt; __(""City/Location"")));
    echo $this-&gt;Form-&gt;input('Member.occupation_id',array('id'=&gt;'MemberOccupationId'));
    echo $this-&gt;Form-&gt;input('action', array('type' =&gt; 'hidden', 'value' =&gt; 'create_member'));
    ?&gt;
&lt;/fieldset&gt;
&lt;?php
echo $this-&gt;Form-&gt;end(array(""label"" =&gt; __('Save')));
</code></pre>",cakephp,"<p>One of the ways I've handled this situation is to create my own detector that defines the context of post OR put. This goes in the <code>beforeFilter()</code> method in AppController:</p>

<pre><code>// add a simple form post detector
    $this-&gt;request-&gt;addDetector('formPosted', array(
    'env' =&gt; 'REQUEST_METHOD',
    'options' =&gt; array('post', 'put')
));
</code></pre>

<p>Then when you need to check if a form has been posted (or ""putted""), then:</p>

<pre><code>if ($this-&gt;request-&gt;is('formPosted')) { ... }
</code></pre>

<p>Since the detector is added in AppController, the condition can be checked from within any controller method.</p>",0
14713258,"cakephp $this->request-is(""post"") return false for just one form, so strange?","<p>I have many forms in the website. They are all created in the similar way like</p>

<pre><code>&lt;?php echo $this-&gt;Form-&gt;create('SysUser');?&gt;
&lt;fieldset&gt;
&lt;legend&gt;&lt;?php echo __('Edit Basic Information'); ?&gt;&lt;/legend&gt;
&lt;?php
echo $this-&gt;Form-&gt;input('SysUser.first_name');
echo $this-&gt;Form-&gt;input('SysUser.family_name',array('label'=&gt;__(""Last Name"")));
echo $this-&gt;Form-&gt;input('SysUser.mobile_phone_number');
echo $this-&gt;Form-&gt;input('SysUser.user_name',array('label'=&gt;__(""Screen Name"")));
echo $this-&gt;Form-&gt;input('action', array('type'=&gt;'hidden','value'=&gt;'edit_basic_info'));
echo $this-&gt;Form-&gt;input('SysUser.id', array('type'=&gt;'hidden','value'=&gt;$user[""id""]));
?&gt;
&lt;/fieldset&gt;
&lt;?php echo $this-&gt;Form-&gt;end(__('Submit'));?&gt;
</code></pre>

<p>But the type of one form becomes ""put"" , not ""post"". I never explicitly set the type to ""post"" when I create these forms. I gather CakePHP sets the default value to post. Now it seems something wrong about the way I create this new special form. Oddly, this was working days ago!</p>

<p>I don't know what's wrong. Here is it:</p>

<pre><code>&lt;?php echo $this-&gt;Form-&gt;create('Member'); ?&gt;
&lt;fieldset&gt;
    &lt;legend&gt;&lt;?php echo __('Basic Profile Setup'); ?&gt;&lt;/legend&gt;
    &lt;?php
    echo $this-&gt;Form-&gt;input('Member.gender_id');
    $w = array();
    for ($i = 40; $i &lt; 120; $i++) {
        $w[$i] = $i . "" kg"";
    }
    $h = array();
    for ($i = 120; $i &lt; 230; $i++) {
        $h[$i] = $i . "" cm"";
    }
    echo $this-&gt;Form-&gt;input('Member.height', array(
        'options' =&gt; $h,
        'empty' =&gt; __(""choose one"")
    ));
    echo $this-&gt;Form-&gt;input('Member.weight', array(
        'options' =&gt; $w,
        'empty' =&gt; __(""choose one"")
    ));
    $options['minYear'] = date('Y') - 78;
    $options['maxYear'] = date('Y') - 18;
    echo $this-&gt;Form-&gt;input('Member.birthdate', $options);
    echo $this-&gt;Form-&gt;input('Member.residential_location_id', array('label' =&gt; __(""City/Location"")));
    echo $this-&gt;Form-&gt;input('Member.occupation_id',array('id'=&gt;'MemberOccupationId'));
    echo $this-&gt;Form-&gt;input('action', array('type' =&gt; 'hidden', 'value' =&gt; 'create_member'));
    ?&gt;
&lt;/fieldset&gt;
&lt;?php
echo $this-&gt;Form-&gt;end(array(""label"" =&gt; __('Save')));
</code></pre>",cakephp,"<p>I had the same issue and after 4 hours searching I just resolved it appending the Model name to the fields in the view like this:</p>

<pre><code>&lt;?php echo $this-&gt;Form-&gt;create('User');?&gt;

&lt;?php
    echo $this-&gt;Form-&gt;input('User.id');
    echo $this-&gt;Form-&gt;input('User.username', array('readonly' =&gt; true));
    echo $this-&gt;Form-&gt;input('User.email', array('readonly' =&gt; true));
    echo $this-&gt;Form-&gt;input('User.name');
    echo $this-&gt;Form-&gt;input('User.phone');
    echo $this-&gt;Form-&gt;input('User.gender');
    echo $this-&gt;Form-&gt;input('User.locale', array('id' =&gt; 'locale_select', 'options' =&gt; array('es' =&gt; __('Spanish'), 'en' =&gt; __('English'))));
    echo $this-&gt;Form-&gt;input('User.birthday', array('type' =&gt; 'date', 'dateFormat' =&gt; 'DMY', 'minYear' =&gt; date('Y') - 100, 'maxYear' =&gt; date('Y')));
?&gt;
&lt;?php echo $this-&gt;Form-&gt;end(__('Save', true));?&gt;
</code></pre>

<p>Well, I have to say that this code is in a plugin, so I don't know if there could be any other problems. But other forms in that plugin work perfect and this one needs to have the Model name.</p>",0
14713258,"cakephp $this->request-is(""post"") return false for just one form, so strange?","<p>I have many forms in the website. They are all created in the similar way like</p>

<pre><code>&lt;?php echo $this-&gt;Form-&gt;create('SysUser');?&gt;
&lt;fieldset&gt;
&lt;legend&gt;&lt;?php echo __('Edit Basic Information'); ?&gt;&lt;/legend&gt;
&lt;?php
echo $this-&gt;Form-&gt;input('SysUser.first_name');
echo $this-&gt;Form-&gt;input('SysUser.family_name',array('label'=&gt;__(""Last Name"")));
echo $this-&gt;Form-&gt;input('SysUser.mobile_phone_number');
echo $this-&gt;Form-&gt;input('SysUser.user_name',array('label'=&gt;__(""Screen Name"")));
echo $this-&gt;Form-&gt;input('action', array('type'=&gt;'hidden','value'=&gt;'edit_basic_info'));
echo $this-&gt;Form-&gt;input('SysUser.id', array('type'=&gt;'hidden','value'=&gt;$user[""id""]));
?&gt;
&lt;/fieldset&gt;
&lt;?php echo $this-&gt;Form-&gt;end(__('Submit'));?&gt;
</code></pre>

<p>But the type of one form becomes ""put"" , not ""post"". I never explicitly set the type to ""post"" when I create these forms. I gather CakePHP sets the default value to post. Now it seems something wrong about the way I create this new special form. Oddly, this was working days ago!</p>

<p>I don't know what's wrong. Here is it:</p>

<pre><code>&lt;?php echo $this-&gt;Form-&gt;create('Member'); ?&gt;
&lt;fieldset&gt;
    &lt;legend&gt;&lt;?php echo __('Basic Profile Setup'); ?&gt;&lt;/legend&gt;
    &lt;?php
    echo $this-&gt;Form-&gt;input('Member.gender_id');
    $w = array();
    for ($i = 40; $i &lt; 120; $i++) {
        $w[$i] = $i . "" kg"";
    }
    $h = array();
    for ($i = 120; $i &lt; 230; $i++) {
        $h[$i] = $i . "" cm"";
    }
    echo $this-&gt;Form-&gt;input('Member.height', array(
        'options' =&gt; $h,
        'empty' =&gt; __(""choose one"")
    ));
    echo $this-&gt;Form-&gt;input('Member.weight', array(
        'options' =&gt; $w,
        'empty' =&gt; __(""choose one"")
    ));
    $options['minYear'] = date('Y') - 78;
    $options['maxYear'] = date('Y') - 18;
    echo $this-&gt;Form-&gt;input('Member.birthdate', $options);
    echo $this-&gt;Form-&gt;input('Member.residential_location_id', array('label' =&gt; __(""City/Location"")));
    echo $this-&gt;Form-&gt;input('Member.occupation_id',array('id'=&gt;'MemberOccupationId'));
    echo $this-&gt;Form-&gt;input('action', array('type' =&gt; 'hidden', 'value' =&gt; 'create_member'));
    ?&gt;
&lt;/fieldset&gt;
&lt;?php
echo $this-&gt;Form-&gt;end(array(""label"" =&gt; __('Save')));
</code></pre>",cakephp,"<p>When the <code>Request data</code> contains a Model.id <code>CakeRequest::method()</code> is set to <code>put</code>. The preferred way to handle this in cakephp would be as follows.</p>

<pre><code>if ($this-&gt;request-&gt;is(array('post', 'put'))) {
    // Code
}
</code></pre>

<p>You can see this in <a href=""http://book.cakephp.org/2.0/en/console-and-shells/code-generation-with-bake.html"">baked</a> controller, edit actions.</p>",17
14713258,"cakephp $this->request-is(""post"") return false for just one form, so strange?","<p>I have many forms in the website. They are all created in the similar way like</p>

<pre><code>&lt;?php echo $this-&gt;Form-&gt;create('SysUser');?&gt;
&lt;fieldset&gt;
&lt;legend&gt;&lt;?php echo __('Edit Basic Information'); ?&gt;&lt;/legend&gt;
&lt;?php
echo $this-&gt;Form-&gt;input('SysUser.first_name');
echo $this-&gt;Form-&gt;input('SysUser.family_name',array('label'=&gt;__(""Last Name"")));
echo $this-&gt;Form-&gt;input('SysUser.mobile_phone_number');
echo $this-&gt;Form-&gt;input('SysUser.user_name',array('label'=&gt;__(""Screen Name"")));
echo $this-&gt;Form-&gt;input('action', array('type'=&gt;'hidden','value'=&gt;'edit_basic_info'));
echo $this-&gt;Form-&gt;input('SysUser.id', array('type'=&gt;'hidden','value'=&gt;$user[""id""]));
?&gt;
&lt;/fieldset&gt;
&lt;?php echo $this-&gt;Form-&gt;end(__('Submit'));?&gt;
</code></pre>

<p>But the type of one form becomes ""put"" , not ""post"". I never explicitly set the type to ""post"" when I create these forms. I gather CakePHP sets the default value to post. Now it seems something wrong about the way I create this new special form. Oddly, this was working days ago!</p>

<p>I don't know what's wrong. Here is it:</p>

<pre><code>&lt;?php echo $this-&gt;Form-&gt;create('Member'); ?&gt;
&lt;fieldset&gt;
    &lt;legend&gt;&lt;?php echo __('Basic Profile Setup'); ?&gt;&lt;/legend&gt;
    &lt;?php
    echo $this-&gt;Form-&gt;input('Member.gender_id');
    $w = array();
    for ($i = 40; $i &lt; 120; $i++) {
        $w[$i] = $i . "" kg"";
    }
    $h = array();
    for ($i = 120; $i &lt; 230; $i++) {
        $h[$i] = $i . "" cm"";
    }
    echo $this-&gt;Form-&gt;input('Member.height', array(
        'options' =&gt; $h,
        'empty' =&gt; __(""choose one"")
    ));
    echo $this-&gt;Form-&gt;input('Member.weight', array(
        'options' =&gt; $w,
        'empty' =&gt; __(""choose one"")
    ));
    $options['minYear'] = date('Y') - 78;
    $options['maxYear'] = date('Y') - 18;
    echo $this-&gt;Form-&gt;input('Member.birthdate', $options);
    echo $this-&gt;Form-&gt;input('Member.residential_location_id', array('label' =&gt; __(""City/Location"")));
    echo $this-&gt;Form-&gt;input('Member.occupation_id',array('id'=&gt;'MemberOccupationId'));
    echo $this-&gt;Form-&gt;input('action', array('type' =&gt; 'hidden', 'value' =&gt; 'create_member'));
    ?&gt;
&lt;/fieldset&gt;
&lt;?php
echo $this-&gt;Form-&gt;end(array(""label"" =&gt; __('Save')));
</code></pre>",cakephp,"<p>Not sure why it is happening, but you can set the form type this way:</p>

<pre><code>&lt;?php echo $this-&gt;Form-&gt;create('Member', array('type' =&gt; 'post')); ?&gt;
</code></pre>",5
14713258,"cakephp $this->request-is(""post"") return false for just one form, so strange?","<p>I have many forms in the website. They are all created in the similar way like</p>

<pre><code>&lt;?php echo $this-&gt;Form-&gt;create('SysUser');?&gt;
&lt;fieldset&gt;
&lt;legend&gt;&lt;?php echo __('Edit Basic Information'); ?&gt;&lt;/legend&gt;
&lt;?php
echo $this-&gt;Form-&gt;input('SysUser.first_name');
echo $this-&gt;Form-&gt;input('SysUser.family_name',array('label'=&gt;__(""Last Name"")));
echo $this-&gt;Form-&gt;input('SysUser.mobile_phone_number');
echo $this-&gt;Form-&gt;input('SysUser.user_name',array('label'=&gt;__(""Screen Name"")));
echo $this-&gt;Form-&gt;input('action', array('type'=&gt;'hidden','value'=&gt;'edit_basic_info'));
echo $this-&gt;Form-&gt;input('SysUser.id', array('type'=&gt;'hidden','value'=&gt;$user[""id""]));
?&gt;
&lt;/fieldset&gt;
&lt;?php echo $this-&gt;Form-&gt;end(__('Submit'));?&gt;
</code></pre>

<p>But the type of one form becomes ""put"" , not ""post"". I never explicitly set the type to ""post"" when I create these forms. I gather CakePHP sets the default value to post. Now it seems something wrong about the way I create this new special form. Oddly, this was working days ago!</p>

<p>I don't know what's wrong. Here is it:</p>

<pre><code>&lt;?php echo $this-&gt;Form-&gt;create('Member'); ?&gt;
&lt;fieldset&gt;
    &lt;legend&gt;&lt;?php echo __('Basic Profile Setup'); ?&gt;&lt;/legend&gt;
    &lt;?php
    echo $this-&gt;Form-&gt;input('Member.gender_id');
    $w = array();
    for ($i = 40; $i &lt; 120; $i++) {
        $w[$i] = $i . "" kg"";
    }
    $h = array();
    for ($i = 120; $i &lt; 230; $i++) {
        $h[$i] = $i . "" cm"";
    }
    echo $this-&gt;Form-&gt;input('Member.height', array(
        'options' =&gt; $h,
        'empty' =&gt; __(""choose one"")
    ));
    echo $this-&gt;Form-&gt;input('Member.weight', array(
        'options' =&gt; $w,
        'empty' =&gt; __(""choose one"")
    ));
    $options['minYear'] = date('Y') - 78;
    $options['maxYear'] = date('Y') - 18;
    echo $this-&gt;Form-&gt;input('Member.birthdate', $options);
    echo $this-&gt;Form-&gt;input('Member.residential_location_id', array('label' =&gt; __(""City/Location"")));
    echo $this-&gt;Form-&gt;input('Member.occupation_id',array('id'=&gt;'MemberOccupationId'));
    echo $this-&gt;Form-&gt;input('action', array('type' =&gt; 'hidden', 'value' =&gt; 'create_member'));
    ?&gt;
&lt;/fieldset&gt;
&lt;?php
echo $this-&gt;Form-&gt;end(array(""label"" =&gt; __('Save')));
</code></pre>",cakephp,"<p>From <a href=""http://book.cakephp.org/2.0/en/core-libraries/helpers/form.html#FormHelper%3a%3acreate"" rel=""nofollow"">the Cookbook</a>:</p>

<blockquote>
  <p>If <code>$this-&gt;request-&gt;data</code> contains an array element named after the form’s model, and that array contains a non-empty value of the model’s primary key, then the FormHelper will create an edit form for that record.</p>
</blockquote>

<p>Is that the case, perhaps? What's <code>Member</code>'s primary key?</p>",0
14440743,Implode with double quotes as separator,"<p>I have this right now:</p>

<pre><code>$_words = ""'"".implode(""','"", $array_of_words).""'"";
</code></pre>

<p>Which gives me a string like:</p>

<pre><code>'word','word2','word3'
</code></pre>

<p>How can I modify that to get</p>

<pre><code>""word"",""word2"",""word3""
</code></pre>

<p>Thanks</p>",php|implode,"<pre><code>$result=array();
foreach ($array_of_words as $a1) {
    $result[]='""'.$a1.'""';
}
$_words = implode( ',', $result );
echo $_words;                   
</code></pre>",0
14440743,Implode with double quotes as separator,"<p>I have this right now:</p>

<pre><code>$_words = ""'"".implode(""','"", $array_of_words).""'"";
</code></pre>

<p>Which gives me a string like:</p>

<pre><code>'word','word2','word3'
</code></pre>

<p>How can I modify that to get</p>

<pre><code>""word"",""word2"",""word3""
</code></pre>

<p>Thanks</p>",php|implode,"<p><code>$_words = implode( ""','"", $array_of_words );</code></p>",0
14440743,Implode with double quotes as separator,"<p>I have this right now:</p>

<pre><code>$_words = ""'"".implode(""','"", $array_of_words).""'"";
</code></pre>

<p>Which gives me a string like:</p>

<pre><code>'word','word2','word3'
</code></pre>

<p>How can I modify that to get</p>

<pre><code>""word"",""word2"",""word3""
</code></pre>

<p>Thanks</p>",php|implode,"<p>Just swap your quotes</p>

<pre><code>$_words = '""'.implode('"",""', $array_of_words).'""';
</code></pre>",24
14854431,Yii PHP Framework: Unable to require_once inside Yii,"<p>I'm trying to implement a rewritten Ext.Direct functionality into Yii. And everything works smoothly except that I cannot get the <code>doRpc</code> function to work properly, and this is vital to the application working properly, the function is defined in the <a href=""http://docs.sencha.com/ext-js/4-1/#!/guide/direct_grid_pt1"" rel=""nofollow"">Sencha Ext.Direct Tutorial</a>, although I have done some changes to it, so here's my rewritten code:</p>

<p><strong>components/Ext_Router.php</strong></p>

<pre><code>class Ext_Router extends CApplicationComponent
{
    public function doRpc($cdata)
    {
        $API = Yii::app()-&gt;ext_api-&gt;getApi();
        try {
            if(!isset($API[$cdata-&gt;action])){
                throw new Exception('Call to undefined action: ' . $cdata-&gt;action);
            }

            $action = $cdata-&gt;action;
            $a = $API[$action];

            Yii::app()-&gt;ext_router-&gt;doAroundCalls($a['before'], $cdata);

            $method = $cdata-&gt;method;
            $mdef = $a['methods'][$method];
            if(!$mdef){
                throw new Exception(""Call to undefined method: $method on action $action"");
            }
            Yii::app()-&gt;ext_router-&gt;doAroundCalls($mdef['before'], $cdata);

            $r = array(
                'type'=&gt;'rpc',
                'tid'=&gt;$cdata-&gt;tid,
                'action'=&gt;$action,
                'method'=&gt;$method
            );

            // TODO require_once always returns: No such file or directory
            require_once(""index.php?r=direct/classes/index&amp;classaction=$action"");

            $o = new $action();
            if (isset($mdef['len'])) {
                $params = isset($cdata-&gt;data) &amp;&amp; is_array($cdata-&gt;data) ? $cdata-&gt;data : array();
            } else {
                $params = array($cdata-&gt;data);
            }

            $r['result'] = call_user_func_array(array($o, $method), $params);

            Yii::app()-&gt;ext_router-&gt;doAroundCalls($mdef['after'], $cdata, $r);
            Yii::app()-&gt;ext_router-&gt;doAroundCalls($a['after'], $cdata, $r);
        }
        catch(Exception $e){
            $r['type'] = 'exception';
            $r['message'] = $e-&gt;getMessage();
            $r['where'] = $e-&gt;getTraceAsString();
        }
        return $r;
    }

    public function doAroundCalls(&amp;$fns, &amp;$cdata, &amp;$returnData=null)
    {
        if(!$fns){
            return;
        }
        if(is_array($fns)){
            foreach($fns as $f){
                $f($cdata, $returnData);
            }
        }else{
            $fns($cdata, $returnData);
        }
    }
}
</code></pre>

<p><strong>modules/direct/controllers/ClassesController.php</strong></p>

<pre><code>class ClassesController extends Controller
{
    public function actionIndex($classaction)
    {
        $this-&gt;render(""$classaction"");
    }
}
</code></pre>

<p><strong>modules/direct/views/classes/Temporary.php</strong></p>

<pre><code>class Temporary
{
    protected $_result;
    public $results;

    public function getResults(stdClass $params)
    {
        $_result = Temporary::model()-&gt;findAllByAttributes(array('id'=&gt;Yii::app()-&gt;session['id']));

        $results = array();

        if($_results != null) {
            foreach($_result as $row) {
                $results[] = $row;
            }
        }

        return $results;
    }   

    ...
}
</code></pre>

<p><strong>The problem:</strong></p>

<pre><code>require_once(""index.php?r=direct/classes/index&amp;classaction=$action"");
</code></pre>

<p>What is the best way of circumventing this problem? How do I 'parse'/include/require this PHP file? </p>

<p>(Have in mind that I haven't gotten around to testing my Temporary.php, because I simply have not gotten past the current error)</p>",php|extjs|yii,"<p>Use <a href=""http://www.yiiframework.com/doc/api/1.1/YiiBase/#import-detail"" rel=""nofollow"">Yii's import</a> :</p>

<pre><code>&lt;?php
Yii::import('application.modules.direct.views.classes.Temporary');
</code></pre>",2
2208080,Apache/PHP serving file multiple times,"<p>I have a system with a download.php page. The page takes and id and loads a file based on from the DB Record and then serves it up. I've noticed a couple instances where files are requested multiple times in short time spans (20ms). Times that are too quick for human input. There are plenty of instances where the downloader functions fine. However, in taking a closer look at the downloader’s usage, I did see some interesting behavior.</p>

<p>For instance, the IP address xxx.xxx.xxx.xxx (which is one in a range owned by xxxxxx.de in Germany) came to the site through Google. They browsed around and then came to the page <a href=""http://site.com/xxxx/press+125.php"" rel=""noreferrer"">http://site.com/xxxx/press+125.php</a> There they issued a request for /download.php?id=/ZZ/n+aH55Y= (a PDF) at 9:04:23AM. That alone is not a big deal. However, what is interesting is that the server seems to have been quite preoccupied with serving that request. In the logs the request first completes between 9:09:48 and 9:10:00. It looks like the user must have gotten tired of waiting during that time and requested the document two more times. Between 09:14:47 and 09:15:00 the same request appears again, except it is from 9:04:43AM, 20ms later than the first request. Then it pops up a third time, with a request that started at 09:05:06 completing between 09:19:55 and 09:19:58!</p>

<p>I’m suspicious of that document. In looking through the logs I see other instances where it takes the server a little while to handle that specific file. Check out this list of requests from zzz.zzz.zzz.zzz[different than above] for the file /download.php?id=/ZZ/n+aH55Y= (the same docuemnt as before):</p>

<p>Request time     Complete Time
04:32:43               04:33:36
04:32:50               04:33:36
04:32:51               04:33:38
04:33:05               04:33:38
04:33:34               04:33:42
04:33:05               04:33:42</p>

<p>So something is definitely going on. Whether it has to do with this specific document tripping up the server, the download.php page’s code, or if we’re just seeing the evidence of some server level overload as it plays out in real time I’m not yet sure.</p>

<p>In fairness, there are other instances of people downloading /download.php?id=/ZZ/n+aH55Y= (the same PDF) without error. However, it is interesting that the multiple processes only seem to happen with this one file, and then only when it is accessed through the page  <a href=""http://site.com/press+125.php"" rel=""noreferrer"">http://site.com/press+125.php</a> . It bears further investigation if there’s something amiss inside the code that causes the system to fire off multiple download requests that occupy the server.</p>

<p>I don't know if this press+125.php is a rabbit hole, but there is weird consicence. </p>

<p>Any ideas? I'm totally out of ideas.  Apache maxed out? Things like that.</p>

<pre><code>///DOWNLOAD.php
$file = new files();
$file-&gt;comparison_filter(""id"", ""="", $id); //sql to load
if ($file-&gt;load()) {
    $file-&gt;serve(); 
}


//FILES
function serve() {  
        if ($this-&gt;is_loaded) {
            if (file_exists($this-&gt;get_value(""filename""))) {
                if ($this-&gt;get_value(""content_type"") != """") {
                    header(""Content-Type: "" . $this-&gt;get_value(""content_type""));
                }       
                header(""Content-Length: "" . filesize($this-&gt;get_value(""filename"")));
                if ($this-&gt;get_value(""flag_image"") == 0 || $this-&gt;get_value(""flag_image"") == false) {
                    header(""Cache-Control: private"");
                    header(""Content-Disposition: attachment; filename="" . urlencode($this-&gt;get_value(""original_filename"")));
                }

                set_time_limit(0);
                @readfile($this-&gt;get_value(""filename""));

                exit;
            }
        }
}
</code></pre>",php|apache|file|download,"<p>Add '%D %X' to your logging config - I expect that will answer many of your questions.</p>

<p>C.</p>",0
2208080,Apache/PHP serving file multiple times,"<p>I have a system with a download.php page. The page takes and id and loads a file based on from the DB Record and then serves it up. I've noticed a couple instances where files are requested multiple times in short time spans (20ms). Times that are too quick for human input. There are plenty of instances where the downloader functions fine. However, in taking a closer look at the downloader’s usage, I did see some interesting behavior.</p>

<p>For instance, the IP address xxx.xxx.xxx.xxx (which is one in a range owned by xxxxxx.de in Germany) came to the site through Google. They browsed around and then came to the page <a href=""http://site.com/xxxx/press+125.php"" rel=""noreferrer"">http://site.com/xxxx/press+125.php</a> There they issued a request for /download.php?id=/ZZ/n+aH55Y= (a PDF) at 9:04:23AM. That alone is not a big deal. However, what is interesting is that the server seems to have been quite preoccupied with serving that request. In the logs the request first completes between 9:09:48 and 9:10:00. It looks like the user must have gotten tired of waiting during that time and requested the document two more times. Between 09:14:47 and 09:15:00 the same request appears again, except it is from 9:04:43AM, 20ms later than the first request. Then it pops up a third time, with a request that started at 09:05:06 completing between 09:19:55 and 09:19:58!</p>

<p>I’m suspicious of that document. In looking through the logs I see other instances where it takes the server a little while to handle that specific file. Check out this list of requests from zzz.zzz.zzz.zzz[different than above] for the file /download.php?id=/ZZ/n+aH55Y= (the same docuemnt as before):</p>

<p>Request time     Complete Time
04:32:43               04:33:36
04:32:50               04:33:36
04:32:51               04:33:38
04:33:05               04:33:38
04:33:34               04:33:42
04:33:05               04:33:42</p>

<p>So something is definitely going on. Whether it has to do with this specific document tripping up the server, the download.php page’s code, or if we’re just seeing the evidence of some server level overload as it plays out in real time I’m not yet sure.</p>

<p>In fairness, there are other instances of people downloading /download.php?id=/ZZ/n+aH55Y= (the same PDF) without error. However, it is interesting that the multiple processes only seem to happen with this one file, and then only when it is accessed through the page  <a href=""http://site.com/press+125.php"" rel=""noreferrer"">http://site.com/press+125.php</a> . It bears further investigation if there’s something amiss inside the code that causes the system to fire off multiple download requests that occupy the server.</p>

<p>I don't know if this press+125.php is a rabbit hole, but there is weird consicence. </p>

<p>Any ideas? I'm totally out of ideas.  Apache maxed out? Things like that.</p>

<pre><code>///DOWNLOAD.php
$file = new files();
$file-&gt;comparison_filter(""id"", ""="", $id); //sql to load
if ($file-&gt;load()) {
    $file-&gt;serve(); 
}


//FILES
function serve() {  
        if ($this-&gt;is_loaded) {
            if (file_exists($this-&gt;get_value(""filename""))) {
                if ($this-&gt;get_value(""content_type"") != """") {
                    header(""Content-Type: "" . $this-&gt;get_value(""content_type""));
                }       
                header(""Content-Length: "" . filesize($this-&gt;get_value(""filename"")));
                if ($this-&gt;get_value(""flag_image"") == 0 || $this-&gt;get_value(""flag_image"") == false) {
                    header(""Cache-Control: private"");
                    header(""Content-Disposition: attachment; filename="" . urlencode($this-&gt;get_value(""original_filename"")));
                }

                set_time_limit(0);
                @readfile($this-&gt;get_value(""filename""));

                exit;
            }
        }
}
</code></pre>",php|apache|file|download,"<p>Use a CDN network for file downloads. They will handle this for you, and plus provide you with bandwidth and scalability. No more lock ups on your server. <a href=""http://www.reelseo.com/free-cdn-velocix/"" rel=""nofollow noreferrer"">http://www.reelseo.com/free-cdn-velocix/</a></p>",0
2208080,Apache/PHP serving file multiple times,"<p>I have a system with a download.php page. The page takes and id and loads a file based on from the DB Record and then serves it up. I've noticed a couple instances where files are requested multiple times in short time spans (20ms). Times that are too quick for human input. There are plenty of instances where the downloader functions fine. However, in taking a closer look at the downloader’s usage, I did see some interesting behavior.</p>

<p>For instance, the IP address xxx.xxx.xxx.xxx (which is one in a range owned by xxxxxx.de in Germany) came to the site through Google. They browsed around and then came to the page <a href=""http://site.com/xxxx/press+125.php"" rel=""noreferrer"">http://site.com/xxxx/press+125.php</a> There they issued a request for /download.php?id=/ZZ/n+aH55Y= (a PDF) at 9:04:23AM. That alone is not a big deal. However, what is interesting is that the server seems to have been quite preoccupied with serving that request. In the logs the request first completes between 9:09:48 and 9:10:00. It looks like the user must have gotten tired of waiting during that time and requested the document two more times. Between 09:14:47 and 09:15:00 the same request appears again, except it is from 9:04:43AM, 20ms later than the first request. Then it pops up a third time, with a request that started at 09:05:06 completing between 09:19:55 and 09:19:58!</p>

<p>I’m suspicious of that document. In looking through the logs I see other instances where it takes the server a little while to handle that specific file. Check out this list of requests from zzz.zzz.zzz.zzz[different than above] for the file /download.php?id=/ZZ/n+aH55Y= (the same docuemnt as before):</p>

<p>Request time     Complete Time
04:32:43               04:33:36
04:32:50               04:33:36
04:32:51               04:33:38
04:33:05               04:33:38
04:33:34               04:33:42
04:33:05               04:33:42</p>

<p>So something is definitely going on. Whether it has to do with this specific document tripping up the server, the download.php page’s code, or if we’re just seeing the evidence of some server level overload as it plays out in real time I’m not yet sure.</p>

<p>In fairness, there are other instances of people downloading /download.php?id=/ZZ/n+aH55Y= (the same PDF) without error. However, it is interesting that the multiple processes only seem to happen with this one file, and then only when it is accessed through the page  <a href=""http://site.com/press+125.php"" rel=""noreferrer"">http://site.com/press+125.php</a> . It bears further investigation if there’s something amiss inside the code that causes the system to fire off multiple download requests that occupy the server.</p>

<p>I don't know if this press+125.php is a rabbit hole, but there is weird consicence. </p>

<p>Any ideas? I'm totally out of ideas.  Apache maxed out? Things like that.</p>

<pre><code>///DOWNLOAD.php
$file = new files();
$file-&gt;comparison_filter(""id"", ""="", $id); //sql to load
if ($file-&gt;load()) {
    $file-&gt;serve(); 
}


//FILES
function serve() {  
        if ($this-&gt;is_loaded) {
            if (file_exists($this-&gt;get_value(""filename""))) {
                if ($this-&gt;get_value(""content_type"") != """") {
                    header(""Content-Type: "" . $this-&gt;get_value(""content_type""));
                }       
                header(""Content-Length: "" . filesize($this-&gt;get_value(""filename"")));
                if ($this-&gt;get_value(""flag_image"") == 0 || $this-&gt;get_value(""flag_image"") == false) {
                    header(""Cache-Control: private"");
                    header(""Content-Disposition: attachment; filename="" . urlencode($this-&gt;get_value(""original_filename"")));
                }

                set_time_limit(0);
                @readfile($this-&gt;get_value(""filename""));

                exit;
            }
        }
}
</code></pre>",php|apache|file|download,"<ol>
<li>Have you analyzed User-Agent and
Referer headers in HTTP request?</li>
<li>Why not serving all static files
from apache or whatever you have? If you want to track
download stats you can do a redirect from you script to static file.</li>
</ol>",0
2284099,"Mysql Real Escape String PHP Function Adding ""\"" to My Field Entry","<p>I am submitting a form to my MySQL database using PHP.</p>

<p>I am sending the form data through the <code>mysql_real_escape_string($content)</code> function.</p>

<p>When the entry shows up in my database (checking in phpMyAdmin) all of my double quotes and single quotes are escaped.  </p>

<p>I'm fairly certain this is a PHP configuration issue?</p>

<p>so:</p>

<pre><code>$content = 'Hi, my name is Jascha and my ""favorite"" thing to do is sleep';
mysql_real_escape_string($content);
$query = 'INSERT INTO DB...'
</code></pre>

<p>comes up in my database as:</p>

<p>Hi, my name is Jascha and my \""favorite"" thing to do is sleep</p>

<p>Who do I tell what to do?  (I cannot access the php.ini).</p>",php|mysql|magic-quotes,"<p>You need to take magic quotes into account when retrieving request data. If <a href=""http://php.net/manual/en/function.get-magic-quotes-gpc.php"" rel=""noreferrer""><code>get_magic_quotes_gpc()</code></a> is <code>true</code>, then you need to run <a href=""http://php.net/manual/en/function.stripslashes.php"" rel=""noreferrer""><code>stripslashes()</code></a> on the input. Best way would be to write a function for that. Something like:</p>

<pre><code>function get_string($array, $index, $default = null) {
    if (isset($array[$index]) &amp;&amp; strlen($value = trim($array[$index])) &gt; 0) {
        return get_magic_quotes_gpc() ? stripslashes($value) : $value;
    } else {
        return $default;
    }
}
</code></pre>

<p>..which you can use as</p>

<pre><code>$input = get_string($_POST, 'input');
</code></pre>

<p>..instead of</p>

<pre><code>$input = $_POST['input'];
</code></pre>

<p>Do the same for trivial stuff like <code>get_number()</code>, <code>get_boolean()</code>, <code>get_array()</code> and so on.</p>",5
2284099,"Mysql Real Escape String PHP Function Adding ""\"" to My Field Entry","<p>I am submitting a form to my MySQL database using PHP.</p>

<p>I am sending the form data through the <code>mysql_real_escape_string($content)</code> function.</p>

<p>When the entry shows up in my database (checking in phpMyAdmin) all of my double quotes and single quotes are escaped.  </p>

<p>I'm fairly certain this is a PHP configuration issue?</p>

<p>so:</p>

<pre><code>$content = 'Hi, my name is Jascha and my ""favorite"" thing to do is sleep';
mysql_real_escape_string($content);
$query = 'INSERT INTO DB...'
</code></pre>

<p>comes up in my database as:</p>

<p>Hi, my name is Jascha and my \""favorite"" thing to do is sleep</p>

<p>Who do I tell what to do?  (I cannot access the php.ini).</p>",php|mysql|magic-quotes,"<p>I know it is a little late, but as a noob to php I needed something really simple. 
So I am using this code below to fix the problem described by the OP with magic_quotes_gpc
I have a server running php 5.2.8 and one running 5.3</p>

<p>My web app is using datatables.net to display information. 
I started getting JSON errors when data was saved with special characters escaped in the database.</p>

<p>My Development machine uses 5.3 where this wasn't neccesary, but with php 5.2.8 I needed to use the stripslashes function in order to save the values to my database.</p>

<pre><code>$description = mysql_real_escape_string($description);
// hack for php 5.2.8 //
if (get_magic_quotes_gpc()) {
     $description = stripslashes($description); 
     //echo ""description: $description"";
    }
</code></pre>

<p>I realize this is basically the same answer as above, but for me it seemed more my style. 
Hopefully this will help others in the same boat as I am.....</p>",-1
2284099,"Mysql Real Escape String PHP Function Adding ""\"" to My Field Entry","<p>I am submitting a form to my MySQL database using PHP.</p>

<p>I am sending the form data through the <code>mysql_real_escape_string($content)</code> function.</p>

<p>When the entry shows up in my database (checking in phpMyAdmin) all of my double quotes and single quotes are escaped.  </p>

<p>I'm fairly certain this is a PHP configuration issue?</p>

<p>so:</p>

<pre><code>$content = 'Hi, my name is Jascha and my ""favorite"" thing to do is sleep';
mysql_real_escape_string($content);
$query = 'INSERT INTO DB...'
</code></pre>

<p>comes up in my database as:</p>

<p>Hi, my name is Jascha and my \""favorite"" thing to do is sleep</p>

<p>Who do I tell what to do?  (I cannot access the php.ini).</p>",php|mysql|magic-quotes,"<p>If you are getting your $content data from a form <em>(and not ""as-is"" in the PHP code)</em>, maybe you're having a problem because of Magic quotes <em>(see <a href=""http://php.net/manual/en/info.configuration.php#ini.magic-quotes-gpc"" rel=""noreferrer""><code>magic_quotes_gpc</code></a>)</em></p>

<p>Basically :</p>

<blockquote>
  <p>When magic_quotes are on, all <code>'</code>
  (single-quote), <code>""</code> (double quote), <code>\</code>
  (backslash) and NUL's are escaped with
  a backslash automatically</p>
</blockquote>

<p>If magic quotes are enabled <em>(you can check this in the ouput of <a href=""http://php.net/phpinfo"" rel=""noreferrer""><code>phpinfo()</code></a>, for instance)</em>, you'll be getting that kind of ""double escaping"" :</p>

<ul>
<li>Those characters will be escaped once by magic quotes,</li>
<li>And, then, they'll be escaped a second time by <code>mysql_real_escape_string</code></li>
</ul>

<p><br>
The good solution, in this case, is not to stop using <code>mysql_real_escape_string</code>, but to disabled magic_quotes_gpc in your configuration...</p>

<p>... But, as you don't have access to it, you'll actually have to ""revert"" the effect of magic quotes, calling <a href=""http://php.net/stripslashes"" rel=""noreferrer""><code>stripslashes</code></a> on the input you're getting as <code>$_GET</code> and <code>$_POST</code>, before begining using it.</p>

<p>Note : it's an advice that's given on the manual page of <a href=""http://php.net/mysql_real_escape_string"" rel=""noreferrer""><code>mysql_real_escape_string</code></a> <em>(quoting)</em> :</p>

<blockquote>
  <p>Note: If <a href=""http://fr.php.net/manual/en/info.configuration.php#ini.magic-quotes-gpc"" rel=""noreferrer""><code>magic_quotes_gpc</code></a> is
  enabled, first apply
  <a href=""http://fr.php.net/manual/en/function.stripslashes.php"" rel=""noreferrer""><code>stripslashes()</code></a> to the data.
  Using this function on data which has
  already been escaped will escape the
  data twice.</p>
</blockquote>",6
1977890,Self modifying PHP script,"<p>I'm trying to modify a part of a PHP script structured like this barebone example</p>

<pre><code>&lt;-- part A --&gt;
function modify_B($string)
{
    some code to modify part B
}
&lt;-- end A --&gt;

&lt;-- part B --&gt; 
&lt;container&gt;some XML&lt;/container&gt;
&lt;-- end B --&gt;

&lt;-- part C --&gt;
&lt;-- end C --&gt;
</code></pre>

<p>I'd like to modify part B without changing the rest of the file, because A and B are the logic of the script which should not change.</p>

<p>Could somebody help me?
Thank you in advance for your help. </p>",php|self-modifying,"<p>Do you mean that the XML is outside of your PHP <code>&lt;? ?&gt;</code> script tags? So you want to modify the text that's about to be output by the PHP script?</p>

<p>If that's the case, remember that anything outside of script tags is just treated as a string, which PHP outputs as if you had written <code>echo $string;</code>. So just save your changed data in a string variable, and echo it.</p>",0
1977890,Self modifying PHP script,"<p>I'm trying to modify a part of a PHP script structured like this barebone example</p>

<pre><code>&lt;-- part A --&gt;
function modify_B($string)
{
    some code to modify part B
}
&lt;-- end A --&gt;

&lt;-- part B --&gt; 
&lt;container&gt;some XML&lt;/container&gt;
&lt;-- end B --&gt;

&lt;-- part C --&gt;
&lt;-- end C --&gt;
</code></pre>

<p>I'd like to modify part B without changing the rest of the file, because A and B are the logic of the script which should not change.</p>

<p>Could somebody help me?
Thank you in advance for your help. </p>",php|self-modifying,"<p>Or if you need persistence in the changes, put ""B"" in a file and include or read it.</p>",0
1977890,Self modifying PHP script,"<p>I'm trying to modify a part of a PHP script structured like this barebone example</p>

<pre><code>&lt;-- part A --&gt;
function modify_B($string)
{
    some code to modify part B
}
&lt;-- end A --&gt;

&lt;-- part B --&gt; 
&lt;container&gt;some XML&lt;/container&gt;
&lt;-- end B --&gt;

&lt;-- part C --&gt;
&lt;-- end C --&gt;
</code></pre>

<p>I'd like to modify part B without changing the rest of the file, because A and B are the logic of the script which should not change.</p>

<p>Could somebody help me?
Thank you in advance for your help. </p>",php|self-modifying,"<p>You should never write self modifying code (unless you are writing assembly) it can cause all sorts of problems, consider for example what happens if there is a bug that destroys the code in the file.</p>

<p>Split your data out from the code and load it with a require_once command</p>

<p>You can then use standard file reading and writing commands to edit the data <a href=""http://www.php.net/manual/en/book.filesystem.php"" rel=""nofollow"">http://www.php.net/manual/en/book.filesystem.php</a> </p>

<p>... or better still since the data is XML, save the file as an XML file and use simple xml to maintain the data  <a href=""http://php.net/manual/en/book.simplexml.php"" rel=""nofollow"">http://php.net/manual/en/book.simplexml.php</a></p>",0
1977890,Self modifying PHP script,"<p>I'm trying to modify a part of a PHP script structured like this barebone example</p>

<pre><code>&lt;-- part A --&gt;
function modify_B($string)
{
    some code to modify part B
}
&lt;-- end A --&gt;

&lt;-- part B --&gt; 
&lt;container&gt;some XML&lt;/container&gt;
&lt;-- end B --&gt;

&lt;-- part C --&gt;
&lt;-- end C --&gt;
</code></pre>

<p>I'd like to modify part B without changing the rest of the file, because A and B are the logic of the script which should not change.</p>

<p>Could somebody help me?
Thank you in advance for your help. </p>",php|self-modifying,"<p>It looks like, from your example, it's just some string data XML. So load the content into a string somehow (either set a variable with standard string notation, or read it from the contents of a separate file), modify the string according to your whims, and then echo the string to the output. Then it's not a problem of being self-modifying anymore. It's just a matter of being data-driven.</p>",1
1672558,error handling returns blank,"<p>I have the following snippet from my code:</p>

<pre><code>switch ($extention)
{
 case ""gif"": $src = @imagecreatefromgif($uploadedfile); break;
 case ""jpeg"": $src = @imagecreatefromjpeg($uploadedfile);  break;
 case ""png"": $src = @imagecreatefrompng($uploadedfile); break;
 default: $src = @imagecreatefromjpeg($uploadedfile);  break;
}

if(!$src)
 die(""Error: Could not upload image code:#011"");
</code></pre>

<p>The script terminates but does not return error. Anyone know why?</p>",php|error-handling,"<p>Where does it end? If that's your whole script, it's quite natural that you don't get any output (you're not outputting anything). Try putting <code>echo</code>-statements here and there do find the line where the script breaks.</p>

<p><strong>EDIT</strong> after clarification in answers:</p>

<p>You can't catch the out-of-memory error in PHP, it is simply impossible (anything you would do would require more memory anyway). You can't even check if the memory would be available beforehand, since you cannot know how much memory a 10kb jpeg-image would require (it depends on the dimensions of the image, its color depth, etc.)</p>

<p>The only way I can think of handling such errors is making the operation outside of PHP (calling another script using <code>exec()</code> or doing it with imagemagick using <code>exec()</code> or similar)</p>",1
1672558,error handling returns blank,"<p>I have the following snippet from my code:</p>

<pre><code>switch ($extention)
{
 case ""gif"": $src = @imagecreatefromgif($uploadedfile); break;
 case ""jpeg"": $src = @imagecreatefromjpeg($uploadedfile);  break;
 case ""png"": $src = @imagecreatefrompng($uploadedfile); break;
 default: $src = @imagecreatefromjpeg($uploadedfile);  break;
}

if(!$src)
 die(""Error: Could not upload image code:#011"");
</code></pre>

<p>The script terminates but does not return error. Anyone know why?</p>",php|error-handling,"<p>The <code>@</code>-operator suppresses errors, remove them.</p>",0
1672558,error handling returns blank,"<p>I have the following snippet from my code:</p>

<pre><code>switch ($extention)
{
 case ""gif"": $src = @imagecreatefromgif($uploadedfile); break;
 case ""jpeg"": $src = @imagecreatefromjpeg($uploadedfile);  break;
 case ""png"": $src = @imagecreatefrompng($uploadedfile); break;
 default: $src = @imagecreatefromjpeg($uploadedfile);  break;
}

if(!$src)
 die(""Error: Could not upload image code:#011"");
</code></pre>

<p>The script terminates but does not return error. Anyone know why?</p>",php|error-handling,"<pre><code>echo ""bar"";
switch ($extention)
{
    case ""gif"": $src = @imagecreatefromgif($uploadedfile); echo ""foo""; break;
    case ""jpeg"": $src = @imagecreatefromjpeg($uploadedfile); echo ""foo""; break; // best quality
    case ""png"": $src = @imagecreatefrompng($uploadedfile); echo ""foo""; break; // no compression
    default: $src = @imagecreatefromjpeg($uploadedfile); echo ""foo""; break; // best quality
}

echo ""foo"";
if(!$src)
    die(""Error: Could not upload image code:#011"");
echo ""foo foo"";
</code></pre>

<p>returns only ""bar""</p>",0
1672558,error handling returns blank,"<p>I have the following snippet from my code:</p>

<pre><code>switch ($extention)
{
 case ""gif"": $src = @imagecreatefromgif($uploadedfile); break;
 case ""jpeg"": $src = @imagecreatefromjpeg($uploadedfile);  break;
 case ""png"": $src = @imagecreatefrompng($uploadedfile); break;
 default: $src = @imagecreatefromjpeg($uploadedfile);  break;
}

if(!$src)
 die(""Error: Could not upload image code:#011"");
</code></pre>

<p>The script terminates but does not return error. Anyone know why?</p>",php|error-handling,"<p>As has been suggested temporarily remove the @ symbols to find out which imagecreatefrom... is breaking your script, once you've debugged it put them back in. Also because you've echoed foo after the imagecreatefrom... function that is breaking the process it'll never print out anyway.</p>

<p><strong>EDIT AFTER COMMENTS:</strong></p>

<p>Okay so if you want to handle the errors yourself just using @ won't work, it'll suppress the message but not the fact that a fatal error occurred. You'll need to set up an error handler, have a look <a href=""http://www.php.net/set_error_handler"" rel=""nofollow noreferrer"">here</a> for information about this.</p>",0
1921422,PHP nested conditional operator bug?,"<pre>   
                return
                    true  ? 'a' :
                    false ? 'b' :
                                                           'c';</pre>

<p>This should return 'a', but it doesn't. It returns 'b' instead. Is there a bug in PHP's order of handling the different parts of the conditional operators?</p>

<p>I got the idea from <a href=""https://stackoverflow.com/questions/1917718/are-multiple-conditional-operators-in-this-situation-a-good-idea"">Are multiple conditional operators in this situation a good idea?</a> where it does seem to work correctly.</p>

<p>(the true and false are for the purpose of the example, of course. in the real code they are statements that evaluate to true and false respectively. yes, i know that for sure)</p>",php|conditional-operator,<p>Suspect it's evaluating <code>(true ? 'a' : false)</code> as the input to the second ternary operator and interpreting 'a' as true. Try bracketing appropriately.</p>,6
1921422,PHP nested conditional operator bug?,"<pre>   
                return
                    true  ? 'a' :
                    false ? 'b' :
                                                           'c';</pre>

<p>This should return 'a', but it doesn't. It returns 'b' instead. Is there a bug in PHP's order of handling the different parts of the conditional operators?</p>

<p>I got the idea from <a href=""https://stackoverflow.com/questions/1917718/are-multiple-conditional-operators-in-this-situation-a-good-idea"">Are multiple conditional operators in this situation a good idea?</a> where it does seem to work correctly.</p>

<p>(the true and false are for the purpose of the example, of course. in the real code they are statements that evaluate to true and false respectively. yes, i know that for sure)</p>",php|conditional-operator,"<blockquote>
  <p>It is recommended that you avoid
  ""stacking"" ternary expressions. PHP's
  behaviour when using more than one
  ternary operator within a single
  statement is non-obvious</p>
</blockquote>

<p><em>From the <a href=""http://php.net/manual/en/language.operators.comparison.php"" rel=""noreferrer"">PHP Manual</a> under ""Non-obvious Ternary Behaviour"".</em></p>

<p>Ternary operators are evaluated left to right, so unless you add it the braces it doesn't behave as you expect. The following would work though,</p>

<pre><code>return (true ? ""a"" : (false ? ""b"" : ""c""));
</code></pre>",8
1921422,PHP nested conditional operator bug?,"<pre>   
                return
                    true  ? 'a' :
                    false ? 'b' :
                                                           'c';</pre>

<p>This should return 'a', but it doesn't. It returns 'b' instead. Is there a bug in PHP's order of handling the different parts of the conditional operators?</p>

<p>I got the idea from <a href=""https://stackoverflow.com/questions/1917718/are-multiple-conditional-operators-in-this-situation-a-good-idea"">Are multiple conditional operators in this situation a good idea?</a> where it does seem to work correctly.</p>

<p>(the true and false are for the purpose of the example, of course. in the real code they are statements that evaluate to true and false respectively. yes, i know that for sure)</p>",php|conditional-operator,"<p>Let me explain in same way it was explained to me. But you have to pay attention in parenthesis to understand what is happening.</p>

<h2>The PHP</h2>

<p>The PHP code below</p>

<pre><code>true ? ""a"" : false ? ""b"" : ""c""
</code></pre>

<p>Is equivalent to:</p>

<pre><code>(true ? ""a"" : false) ? ""b"" : ""c""
</code></pre>

<h2>Another languages</h2>

<p>The code below</p>

<pre><code>true ? ""a"" : false ? ""b"" : ""c""
</code></pre>

<p>Is equivalent to:</p>

<pre><code>true ? ""a"" : (false ? ""b"" : ""c"")
</code></pre>",0
1921422,PHP nested conditional operator bug?,"<pre>   
                return
                    true  ? 'a' :
                    false ? 'b' :
                                                           'c';</pre>

<p>This should return 'a', but it doesn't. It returns 'b' instead. Is there a bug in PHP's order of handling the different parts of the conditional operators?</p>

<p>I got the idea from <a href=""https://stackoverflow.com/questions/1917718/are-multiple-conditional-operators-in-this-situation-a-good-idea"">Are multiple conditional operators in this situation a good idea?</a> where it does seem to work correctly.</p>

<p>(the true and false are for the purpose of the example, of course. in the real code they are statements that evaluate to true and false respectively. yes, i know that for sure)</p>",php|conditional-operator,"<p>order of operations:</p>

<pre><code>&gt;&gt;&gt; return true ? 'a' : false ? 'b': 'c';
'b'
&gt;&gt;&gt; return true ? 'a' : (false ? 'b': 'c');
'a'
</code></pre>",3
2032924,How to partially download a remote file with cURL?,"<p>Is it possible to partially download a remote file with cURL?
Let's say, the actual filesize of the remote file is 1000 KB. 
How can I download only first 500 KB of it?</p>",php|curl,"<p>This could be your solution (download <strong>first 500KB</strong> into <strong>output.txt</strong>)</p>

<pre><code>curl -r 0-511999 http://www.yourwebsite.com &gt; output.txt
</code></pre>

<ul>
<li>while <code>511999</code> is <code>500^1024-1</code></li>
</ul>",0
2032924,How to partially download a remote file with cURL?,"<p>Is it possible to partially download a remote file with cURL?
Let's say, the actual filesize of the remote file is 1000 KB. 
How can I download only first 500 KB of it?</p>",php|curl,"<p>Thanks for the nice solution VolkerK. However I needed to use this code as a function, so here's what I came up with. I hope it's useful for others. The main difference is <strong>use ($limit, &amp;$datadump)</strong> so a limit can be passed, and using the by-reference variable $datadump to be able to return it as a result. I also added CURLOPT_USERAGENT because some websites won't allow access without a user-agent header.</p>

<p>Check <a href=""http://php.net/manual/en/functions.anonymous.php"" rel=""nofollow noreferrer"">http://php.net/manual/en/functions.anonymous.php</a></p>

<pre><code>function curl_get_contents_partial($url, $limit) {
  $writefn = function($ch, $chunk) use ($limit, &amp;$datadump) { 
    static $data = '';

    $len = strlen($data) + strlen($chunk);
    if ($len &gt;= $limit) {
      $data .= substr($chunk, 0, $limit - strlen($data));
      $datadump = $data;
      return -1;
    }
    $data .= $chunk;
    return strlen($chunk);
  };

  $ch = curl_init();
  curl_setopt($ch, CURLOPT_URL, $url);
  curl_setopt($ch, CURLOPT_USERAGENT, 'Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8.1.13) Gecko/20080311 Firefox/2.0.0.13');
  //curl_setopt($ch, CURLOPT_RANGE, '0-1000'); //not honored by many sites, maybe just remove it altogether.
  curl_setopt($ch, CURLOPT_BINARYTRANSFER, 1);
  curl_setopt($ch, CURLOPT_WRITEFUNCTION, $writefn);
  $data = curl_exec($ch);
  curl_close($ch);
  return $datadump;
}
</code></pre>

<blockquote>
  <p>usage:<br> $page =
  curl_get_contents_partial('<a href=""http://some.webpage.com"" rel=""nofollow noreferrer"">http://some.webpage.com</a>', 1000); //read the
  first 1000 bytes<br> echo $page // or do whatever with the result.</p>
</blockquote>",2
2032924,How to partially download a remote file with cURL?,"<p>Is it possible to partially download a remote file with cURL?
Let's say, the actual filesize of the remote file is 1000 KB. 
How can I download only first 500 KB of it?</p>",php|curl,"<p>Get the first 100 bytes of a document:</p>

<pre class=""lang-sh prettyprint-override""><code>curl -r 0-99 http://www.get.this
</code></pre>

<p>from the manual</p>

<p>make sure you have a modern curl</p>",17
2032924,How to partially download a remote file with cURL?,"<p>Is it possible to partially download a remote file with cURL?
Let's say, the actual filesize of the remote file is 1000 KB. 
How can I download only first 500 KB of it?</p>",php|curl,"<p>You can also set the range header parameter with the php-curl extension.</p>

<pre><code>$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, 'http://www.spiegel.de/');
curl_setopt($ch, CURLOPT_RANGE, '0-500');
curl_setopt($ch, CURLOPT_BINARYTRANSFER, 1);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
$result = curl_exec($ch);
curl_close($ch);
echo $result;
</code></pre>

<p>But as noted before if the server doesn't honor this header but sends the whole file curl will download all of it. E.g. <a href=""http://www.php.net"" rel=""noreferrer"">http://www.php.net</a> ignores the header. But you can (in addition) set a write function callback and abort the request when more data is received, e.g.</p>

<pre><code>// php 5.3+ only
// use function writefn($ch, $chunk) { ... } for earlier versions
$writefn = function($ch, $chunk) { 
  static $data='';
  static $limit = 500; // 500 bytes, it's only a test

  $len = strlen($data) + strlen($chunk);
  if ($len &gt;= $limit ) {
    $data .= substr($chunk, 0, $limit-strlen($data));
    echo strlen($data) , ' ', $data;
    return -1;
  }

  $data .= $chunk;
  return strlen($chunk);
};

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, 'http://www.php.net/');
curl_setopt($ch, CURLOPT_RANGE, '0-500');
curl_setopt($ch, CURLOPT_BINARYTRANSFER, 1);
curl_setopt($ch, CURLOPT_WRITEFUNCTION, $writefn);
$result = curl_exec($ch);
curl_close($ch);
</code></pre>",35
2035344,Conditional configuration: How to detect if I'm local or online?,"<p>I want to provide different configurations for local and offline. At the moment, every time I upload my stuff to the web server, I must make sure that I don't mess up with the different config files. One for local development, and one for online.</p>

<p>I slightly remember a couple of years ago, a code snippet distinguished somehow automatically between online and local development.</p>

<p>Is there a safe way to detect that?</p>",php,"<p>I have build this function that checks if current <strong>server name</strong> has <strong>name server</strong> records, normally local server don't has.</p>

<pre><code>&lt;?php
function isLocal ()
{
  return !checkdnsrr($_SERVER['SERVER_NAME'], 'NS');
}
?&gt;
</code></pre>",2
2035344,Conditional configuration: How to detect if I'm local or online?,"<p>I want to provide different configurations for local and offline. At the moment, every time I upload my stuff to the web server, I must make sure that I don't mess up with the different config files. One for local development, and one for online.</p>

<p>I slightly remember a couple of years ago, a code snippet distinguished somehow automatically between online and local development.</p>

<p>Is there a safe way to detect that?</p>",php,"<p>Here is a solution that requires zero configuration and should work pretty fast:</p>

<pre><code>function isOnline()
{
    return checkdnsrr('google.com', 'ANY');
}
</code></pre>",0
2035344,Conditional configuration: How to detect if I'm local or online?,"<p>I want to provide different configurations for local and offline. At the moment, every time I upload my stuff to the web server, I must make sure that I don't mess up with the different config files. One for local development, and one for online.</p>

<p>I slightly remember a couple of years ago, a code snippet distinguished somehow automatically between online and local development.</p>

<p>Is there a safe way to detect that?</p>",php,"<p>I generally use the server name, for that ; for example, here's what I use on my blog :</p>

<pre><code>if ($_SERVER['SERVER_NAME'] === 'blog') {
    // Development
} else {
    // Production
}
</code></pre>

<p>This is because :</p>

<ul>
<li>On my development machine, the blog is accessed via <code>http://blog</code> <em>(nothing else after)</em>, using a <code>VirtualHost</code> with a <code>ServerName</code> directive.</li>
<li>On the production server, of course, the <code>ServerName</code> directive is a bit longer than this, containing the actual blog server name.</li>
</ul>",4
2035344,Conditional configuration: How to detect if I'm local or online?,"<p>I want to provide different configurations for local and offline. At the moment, every time I upload my stuff to the web server, I must make sure that I don't mess up with the different config files. One for local development, and one for online.</p>

<p>I slightly remember a couple of years ago, a code snippet distinguished somehow automatically between online and local development.</p>

<p>Is there a safe way to detect that?</p>",php,"<p>Another approach: Set up a .htacces file in your development root:</p>

<pre><code>SetEnv APPLICATION_ENV development
</code></pre>

<p>Then read it:</p>

<pre><code>defined('APPLICATION_ENV')
    || define('APPLICATION_ENV', (getenv('APPLICATION_ENV')
                                    ? getenv('APPLICATION_ENV')
                                    : 'production'));
</code></pre>",1
2035344,Conditional configuration: How to detect if I'm local or online?,"<p>I want to provide different configurations for local and offline. At the moment, every time I upload my stuff to the web server, I must make sure that I don't mess up with the different config files. One for local development, and one for online.</p>

<p>I slightly remember a couple of years ago, a code snippet distinguished somehow automatically between online and local development.</p>

<p>Is there a safe way to detect that?</p>",php,"<p>My answer is basically the same as Pascal’s on this page, but since you may change your development server name and you may need several of this checks in your code, i prefer doing this:</p>

<pre><code>define ('DEV_HOST', 'blog'); // if you just use http://blog locally
</code></pre>

<p>And then check</p>

<pre><code>if ($_SERVER['SERVER_NAME'] == DEV_HOST) {
  // do your tricks
}
</code></pre>",1
1828370,workflow for a license server / selling software,"<p>I have a product I'm selling. Users purchase a license key and enter that into the config to enable the product. </p>

<p>My first idea was.. </p>

<p>The product pings the license server w/ the license key on launch, and fails if the server returns a Not Authorized (expired license, invalid etc). But what if the license server is down..?</p>

<p>Another idea was to just check the license once, or maybe every 30 days, or just every time it is entered (app reinstalled etc).</p>

<p>Is there any safer way (in regard to at least SOME decent protection from script kiddies) of going about this? I've never sold software, but I know how easy it is to reverse-engineer/modify software to avoid requiring a license. And to complicate things, this is in PHP.</p>",php|licensing,"<p>Check out <a href=""http://www.zend.com/products/guard/"" rel=""nofollow noreferrer"">Zend Guard</a>, it's from the creators of PHP and it allows you to do both code obfuscation and licensing. </p>",0
1828370,workflow for a license server / selling software,"<p>I have a product I'm selling. Users purchase a license key and enter that into the config to enable the product. </p>

<p>My first idea was.. </p>

<p>The product pings the license server w/ the license key on launch, and fails if the server returns a Not Authorized (expired license, invalid etc). But what if the license server is down..?</p>

<p>Another idea was to just check the license once, or maybe every 30 days, or just every time it is entered (app reinstalled etc).</p>

<p>Is there any safer way (in regard to at least SOME decent protection from script kiddies) of going about this? I've never sold software, but I know how easy it is to reverse-engineer/modify software to avoid requiring a license. And to complicate things, this is in PHP.</p>",php|licensing,"<p>What about a file containing an expiry date and a digital signature created on the server with an asymmetric key. On the install base you check the date in the file and the signature. The signature can be checked by having only the public key. The problem with this is of course that if someone would resign the file with their own key and replace the public key, then they could make your product work forever. But I don't know if a script kiddie can do this.</p>",0
1828370,workflow for a license server / selling software,"<p>I have a product I'm selling. Users purchase a license key and enter that into the config to enable the product. </p>

<p>My first idea was.. </p>

<p>The product pings the license server w/ the license key on launch, and fails if the server returns a Not Authorized (expired license, invalid etc). But what if the license server is down..?</p>

<p>Another idea was to just check the license once, or maybe every 30 days, or just every time it is entered (app reinstalled etc).</p>

<p>Is there any safer way (in regard to at least SOME decent protection from script kiddies) of going about this? I've never sold software, but I know how easy it is to reverse-engineer/modify software to avoid requiring a license. And to complicate things, this is in PHP.</p>",php|licensing,"<p>There are some tools you can use for protecting PHP code. One of them is called ioncube, and there's at least one other, but I can't remember what it was called.</p>",0
1828370,workflow for a license server / selling software,"<p>I have a product I'm selling. Users purchase a license key and enter that into the config to enable the product. </p>

<p>My first idea was.. </p>

<p>The product pings the license server w/ the license key on launch, and fails if the server returns a Not Authorized (expired license, invalid etc). But what if the license server is down..?</p>

<p>Another idea was to just check the license once, or maybe every 30 days, or just every time it is entered (app reinstalled etc).</p>

<p>Is there any safer way (in regard to at least SOME decent protection from script kiddies) of going about this? I've never sold software, but I know how easy it is to reverse-engineer/modify software to avoid requiring a license. And to complicate things, this is in PHP.</p>",php|licensing,"<p>For a new product the answer is always:</p>

<p>Don't worry about copy protection.  Unless people are actively already pirating your product there is no reason to add a 'phone-home' feature.</p>

<p>Large companies tend to be paranoid about having the proper licenses, so they will pay you for licenses.  Most small companies are ethical and any license issues are probably an oversight.  Right now you should be far more worried about getting your name out and getting people familiar with your product.  Someone using your product at home who would have never paid for a license is a good thing for you right now.  Get people using your code, make it so businesses would have a hard time changing to something else, then worry about making sure they aren't using it for free.  This is a version 3 problem, if you make it that far.</p>",7
1828370,workflow for a license server / selling software,"<p>I have a product I'm selling. Users purchase a license key and enter that into the config to enable the product. </p>

<p>My first idea was.. </p>

<p>The product pings the license server w/ the license key on launch, and fails if the server returns a Not Authorized (expired license, invalid etc). But what if the license server is down..?</p>

<p>Another idea was to just check the license once, or maybe every 30 days, or just every time it is entered (app reinstalled etc).</p>

<p>Is there any safer way (in regard to at least SOME decent protection from script kiddies) of going about this? I've never sold software, but I know how easy it is to reverse-engineer/modify software to avoid requiring a license. And to complicate things, this is in PHP.</p>",php|licensing,"<p>Your model has been tried before. If you are really worried about people stealing your software then yes your best bet would be to go ahead and ping your license server every time the application starts up. Yes, there is that down side of your server going down and people would not be able to use your application.</p>

<p>For my software I prefer to ping the server the first time the person registers his key in my software and any if they are gong to get updates for my software. This basically allows my users to use their applications freely until they reinstall or get those ""awesome"" new updates! If they don't get updates they can use the tool without contacting the internet. It is the best situation that I could come up with.</p>

<p>Regardless of what you do, there is always a work around! Hackers will just modify their host files, point your license server locally. They will obviously crack or share your keys. It is a sad world that we live in. So in order to keep your users interested you have to provide them with better content to keep track of illegal use. I recommend after the first time doing this in the background, the users won't be able to get updates anyway, so at this point in time, there is no point in telling them you are re authenticating. </p>

<p>I guess I should add on a couple things. I don't recommend you to host your own license server. You should always outsource this to a larger company if possible. One which will have a guarantee to you that their servers will be operational for a long time. Also, make sure to always have multiple license servers, that way if one goes down another one can kick in.</p>

<p>My company even if it goes down is obligated by contract to always keep that software licensing servers alive for up to 10 years. I know many company's give out yearly licenses to their users, this is another great way to get your users to update or face the consequences.</p>

<p>Again, all of this is a lot of work, and you should make sure that your tool really needs this amount of authentication because so far there isn't really anything that can't be broken. </p>",2
1632680,Duplicate a record in MySQL,"<p>I have a table and I want to duplicate specific rows in the table. I know this is not the best way to do things but we are looking for a quick solution.</p>

<p>Here's something harder than I initially thought, all I need to do is copy an entire record to a new record in an auto-increment table in MySql without the need to specify each field. This is because the table can change in future and might break duplication. I will be duplicating MySQL records from PHP.</p>

<p>It is a problem because in a 'SELECT * ' query MySql will try to copy the ID of the record being copied which genenerates a duplicate ID error. </p>

<p>This blocks out:
 <code>INSERT INTO customer SELECT * FROM customer WHERE customerid=9181</code>. It also blocks out <code>INSERT INTO customer (Field1, Field2, ...) SELECT Field1, Field2, ..... FROM customer WHERE customerid=9181.</code></p>

<p>Is there a way to do this from PHP or MySQL?</p>",php|sql|mysql,"<p>How about copying the the rows into a temp table and then back into the customer table?  I think that would force mysql to give it a new autoincrement ID, especially with the second version of the query you posted.</p>",0
1632680,Duplicate a record in MySQL,"<p>I have a table and I want to duplicate specific rows in the table. I know this is not the best way to do things but we are looking for a quick solution.</p>

<p>Here's something harder than I initially thought, all I need to do is copy an entire record to a new record in an auto-increment table in MySql without the need to specify each field. This is because the table can change in future and might break duplication. I will be duplicating MySQL records from PHP.</p>

<p>It is a problem because in a 'SELECT * ' query MySql will try to copy the ID of the record being copied which genenerates a duplicate ID error. </p>

<p>This blocks out:
 <code>INSERT INTO customer SELECT * FROM customer WHERE customerid=9181</code>. It also blocks out <code>INSERT INTO customer (Field1, Field2, ...) SELECT Field1, Field2, ..... FROM customer WHERE customerid=9181.</code></p>

<p>Is there a way to do this from PHP or MySQL?</p>",php|sql|mysql,"<p>Two posts so far, and here is a 3rd option:  In PHP, dynamically determine the fields in your table.  Or, you can make an array list of fields that you ""hard-code"", maintain by hand to reflect the table.  Your resulting query won't use *.</p>",0
1632680,Duplicate a record in MySQL,"<p>I have a table and I want to duplicate specific rows in the table. I know this is not the best way to do things but we are looking for a quick solution.</p>

<p>Here's something harder than I initially thought, all I need to do is copy an entire record to a new record in an auto-increment table in MySql without the need to specify each field. This is because the table can change in future and might break duplication. I will be duplicating MySQL records from PHP.</p>

<p>It is a problem because in a 'SELECT * ' query MySql will try to copy the ID of the record being copied which genenerates a duplicate ID error. </p>

<p>This blocks out:
 <code>INSERT INTO customer SELECT * FROM customer WHERE customerid=9181</code>. It also blocks out <code>INSERT INTO customer (Field1, Field2, ...) SELECT Field1, Field2, ..... FROM customer WHERE customerid=9181.</code></p>

<p>Is there a way to do this from PHP or MySQL?</p>",php|sql|mysql,"<p>If you know the name of the primary key column in your table (and I'm guessing that you do because it's in the where clause anyway), I think you could do this:</p>

<p>Edit - I forgot that MySQL doesn't support select...into.  This should work instead</p>

<pre><code>create new_table 
select * 
from   customer
where  customerid = 9181 

alter table new_table 
drop column customerid

insert into customer
select  null, *
from    new_table

drop table new_table
</code></pre>",0
1632680,Duplicate a record in MySQL,"<p>I have a table and I want to duplicate specific rows in the table. I know this is not the best way to do things but we are looking for a quick solution.</p>

<p>Here's something harder than I initially thought, all I need to do is copy an entire record to a new record in an auto-increment table in MySql without the need to specify each field. This is because the table can change in future and might break duplication. I will be duplicating MySQL records from PHP.</p>

<p>It is a problem because in a 'SELECT * ' query MySql will try to copy the ID of the record being copied which genenerates a duplicate ID error. </p>

<p>This blocks out:
 <code>INSERT INTO customer SELECT * FROM customer WHERE customerid=9181</code>. It also blocks out <code>INSERT INTO customer (Field1, Field2, ...) SELECT Field1, Field2, ..... FROM customer WHERE customerid=9181.</code></p>

<p>Is there a way to do this from PHP or MySQL?</p>",php|sql|mysql,"<p>Options:</p>

<ol>
<li><p>Avoid using the <code>*</code> wildcard, and specify all the columns yourself.  But you say the table is expected to change in the future and this isn't a workable solution for your case.</p></li>
<li><p>Introspect the columns from the current table definition (using <a href=""http://dev.mysql.com/doc/refman/5.1/en/describe.html"" rel=""nofollow noreferrer""><code>DESCRIBE</code></a> or by querying <a href=""http://dev.mysql.com/doc/refman/5.1/en/columns-table.html"" rel=""nofollow noreferrer""><code>INFORMATION_SCHEMA.COLUMNS</code></a>).  Use this information about metadata to build the query, omitting the auto-increment primary key column.</p></li>
<li><p>Do the <code>SELECT *</code> query, fetch the row back into your application, and then remove the auto-increment column from it.  Then use that tuple to construct an <code>INSERT</code> statement. </p></li>
</ol>

<p>In short, you have a complex requirement to adapt to changing metadata.  That probably can't be done in a single query.</p>",1
1632680,Duplicate a record in MySQL,"<p>I have a table and I want to duplicate specific rows in the table. I know this is not the best way to do things but we are looking for a quick solution.</p>

<p>Here's something harder than I initially thought, all I need to do is copy an entire record to a new record in an auto-increment table in MySql without the need to specify each field. This is because the table can change in future and might break duplication. I will be duplicating MySQL records from PHP.</p>

<p>It is a problem because in a 'SELECT * ' query MySql will try to copy the ID of the record being copied which genenerates a duplicate ID error. </p>

<p>This blocks out:
 <code>INSERT INTO customer SELECT * FROM customer WHERE customerid=9181</code>. It also blocks out <code>INSERT INTO customer (Field1, Field2, ...) SELECT Field1, Field2, ..... FROM customer WHERE customerid=9181.</code></p>

<p>Is there a way to do this from PHP or MySQL?</p>",php|sql|mysql,"<p>I finally found this code. I am sure it will help people in the future. So here it is.</p>

<pre><code>function DuplicateMySQLRecord ($table, $id_field, $id) {
  // load the original record into an array
  $result = mysql_query(""SELECT * FROM {$table} WHERE {$id_field}={$id}"");
  $original_record = mysql_fetch_assoc($result);

  // insert the new record and get the new auto_increment id
  mysql_query(""INSERT INTO {$table} (`{$id_field}`) VALUES (NULL)"");
  $newid = mysql_insert_id();

  // generate the query to update the new record with the previous values
  $query = ""UPDATE {$table} SET "";
  foreach ($original_record as $key =&gt; $value) {
    if ($key != $id_field) {
        $query .= '`'.$key.'` = ""'.str_replace('""','\""',$value).'"", ';
    }
  }
  $query = substr($query,0,strlen($query)-2); # lop off the extra trailing comma
  $query .= "" WHERE {$id_field}={$newid}"";
  mysql_query($query);

  // return the new id
  return $newid;
}
</code></pre>

<p>Here is the link to the article <a href=""http://www.epigroove.com/posts/79/how_to_duplicate_a_record_in_mysql_using_php"" rel=""noreferrer"">http://www.epigroove.com/posts/79/how_to_duplicate_a_record_in_mysql_using_php</a></p>",12
1632680,Duplicate a record in MySQL,"<p>I have a table and I want to duplicate specific rows in the table. I know this is not the best way to do things but we are looking for a quick solution.</p>

<p>Here's something harder than I initially thought, all I need to do is copy an entire record to a new record in an auto-increment table in MySql without the need to specify each field. This is because the table can change in future and might break duplication. I will be duplicating MySQL records from PHP.</p>

<p>It is a problem because in a 'SELECT * ' query MySql will try to copy the ID of the record being copied which genenerates a duplicate ID error. </p>

<p>This blocks out:
 <code>INSERT INTO customer SELECT * FROM customer WHERE customerid=9181</code>. It also blocks out <code>INSERT INTO customer (Field1, Field2, ...) SELECT Field1, Field2, ..... FROM customer WHERE customerid=9181.</code></p>

<p>Is there a way to do this from PHP or MySQL?</p>",php|sql|mysql,"<p>What about</p>

<pre><code>insert into test.abc select null, val1, val2 from test.abc where val2 = some_condition;
</code></pre>

<p>Seems to work for me like that.  Substitute your table, fields, condition of course.</p>

<p>The null lets the DB generate the auto-increment ID for you.</p>",1
1959062,How to add anchor tag to a URL from text input,"<p>I want to be able to take user inputted text in a comment field and check for URL type expression, and if it exists, add an anchor tag (to url) when the comment is displayed.</p>

<p>I am using PHP on the server-side, and Javascript (with jQuery) on client, so should I wait to check for URL until right before it is displayed? Or add the anchor tag before inserting it in the database?</p>

<p>so </p>

<pre><code>&lt;textarea id=""comment""&gt;check out blahblah.com or www.thisthing.co.uk or http://checkthis.us/&lt;/textarea&gt;  
</code></pre>

<p>becomes  </p>

<pre><code>&lt;div id=""commentDisplay""&gt;check out &lt;a href=""blahblah.com""&gt;blahblah.com&lt;/a&gt; or &lt;a href=""www.thisthing.co.uk""&gt;www.thisthing.co.uk&lt;/a&gt; or &lt;a href=""http://checkthis.us/""&gt;http://checkthis.us/&lt;/a&gt;&lt;/div&gt;
</code></pre>",php|javascript|jquery|html,"<p>I adapted Jonathan Sampson's regex option so that it is more lenient about what is a domain (doesn't need http(s) to qualify).</p>

<pre><code>function hyperlinksAnchored($text) {
    return preg_replace('@(http)?(s)?(://)?(([-\w]+\.)+([^\s]+)+[^,.\s])@', '&lt;a href=""http$2://$4""&gt;$1$2$3$4&lt;/a&gt;', $text);
}
</code></pre>

<p>Works for these URLs (and successfully leaves out trailing period or comma):</p>

<pre><code>http://www.google.com/
https://www.google.com/.
www.google.com
www.google.com.
www.google.com/test
google.com
google.com,
google.com/test
123.com/test
www.123.com.au
ex-ample.com
http://ex-ample.com
http://ex-ample.com/test-url_chars.php?param1=val1.
http://ex-ample.com/test-url_chars?param1=value1&amp;param2=val+with%20spaces
</code></pre>

<p>Hope that helps someone.</p>",13
1959062,How to add anchor tag to a URL from text input,"<p>I want to be able to take user inputted text in a comment field and check for URL type expression, and if it exists, add an anchor tag (to url) when the comment is displayed.</p>

<p>I am using PHP on the server-side, and Javascript (with jQuery) on client, so should I wait to check for URL until right before it is displayed? Or add the anchor tag before inserting it in the database?</p>

<p>so </p>

<pre><code>&lt;textarea id=""comment""&gt;check out blahblah.com or www.thisthing.co.uk or http://checkthis.us/&lt;/textarea&gt;  
</code></pre>

<p>becomes  </p>

<pre><code>&lt;div id=""commentDisplay""&gt;check out &lt;a href=""blahblah.com""&gt;blahblah.com&lt;/a&gt; or &lt;a href=""www.thisthing.co.uk""&gt;www.thisthing.co.uk&lt;/a&gt; or &lt;a href=""http://checkthis.us/""&gt;http://checkthis.us/&lt;/a&gt;&lt;/div&gt;
</code></pre>",php|javascript|jquery|html,"<p>Simply suggest a useful plugin here:  <code>External Links</code> <a href=""https://wordpress.org/plugins/sem-external-links/"" rel=""nofollow"">https://wordpress.org/plugins/sem-external-links/</a></p>",0
1959062,How to add anchor tag to a URL from text input,"<p>I want to be able to take user inputted text in a comment field and check for URL type expression, and if it exists, add an anchor tag (to url) when the comment is displayed.</p>

<p>I am using PHP on the server-side, and Javascript (with jQuery) on client, so should I wait to check for URL until right before it is displayed? Or add the anchor tag before inserting it in the database?</p>

<p>so </p>

<pre><code>&lt;textarea id=""comment""&gt;check out blahblah.com or www.thisthing.co.uk or http://checkthis.us/&lt;/textarea&gt;  
</code></pre>

<p>becomes  </p>

<pre><code>&lt;div id=""commentDisplay""&gt;check out &lt;a href=""blahblah.com""&gt;blahblah.com&lt;/a&gt; or &lt;a href=""www.thisthing.co.uk""&gt;www.thisthing.co.uk&lt;/a&gt; or &lt;a href=""http://checkthis.us/""&gt;http://checkthis.us/&lt;/a&gt;&lt;/div&gt;
</code></pre>",php|javascript|jquery|html,"<p>I would rather do that in the server side. Javascript has a ""lag""; it runs only when the entire HTML DOM tree is been loaded and displayed in the webbrowser. Thus it may take a (although short) while before the URL's are recognized and parsed. The client may see the links instantly been replaced while he is still facing the content. This might lead to ""wtf?"" experiences at the client side. This is nowadays too quickly related to advertisting/spam/spyware. You should avoid that as much as possible. Don't use JS to change the content onload, rather do it only during user-controlled events (onclick, onchange, onfocus, etc). Use the server side language to change content prior to save or display.</p>

<p>So, just look for a PHP script which parses the text (or uses regex) to construct fullworthy links based on URL's in plain text. You can find a lot <a href=""http://google.com/search?q=php+replace+url+with+hyperlink"" rel=""nofollow noreferrer"">here</a>. Good luck.</p>",1
1959062,How to add anchor tag to a URL from text input,"<p>I want to be able to take user inputted text in a comment field and check for URL type expression, and if it exists, add an anchor tag (to url) when the comment is displayed.</p>

<p>I am using PHP on the server-side, and Javascript (with jQuery) on client, so should I wait to check for URL until right before it is displayed? Or add the anchor tag before inserting it in the database?</p>

<p>so </p>

<pre><code>&lt;textarea id=""comment""&gt;check out blahblah.com or www.thisthing.co.uk or http://checkthis.us/&lt;/textarea&gt;  
</code></pre>

<p>becomes  </p>

<pre><code>&lt;div id=""commentDisplay""&gt;check out &lt;a href=""blahblah.com""&gt;blahblah.com&lt;/a&gt; or &lt;a href=""www.thisthing.co.uk""&gt;www.thisthing.co.uk&lt;/a&gt; or &lt;a href=""http://checkthis.us/""&gt;http://checkthis.us/&lt;/a&gt;&lt;/div&gt;
</code></pre>",php|javascript|jquery|html,"<p>Here is my code to format all the links inside text including emails, urls with and without protocol.</p>

<pre><code>public function formatLinksInText($text)
{
    //Catch all links with protocol      
    $reg = '/(http|https|ftp|ftps)\:\/\/[a-zA-Z0-9\-\.]+\.[a-zA-Z]{2,}(\/\S*)?/'; 
    $formatText = preg_replace($reg, '&lt;a href=""$0"" style=""font-weight: normal;"" target=""_blank"" title=""$0""&gt;$0&lt;/a&gt;', $formatText);

    //Catch all links without protocol
    $reg2 = '/(?&lt;=\s|\A)([0-9a-zA-Z\-\.]+\.[a-zA-Z0-9\/]{2,})(?=\s|$|\,|\.)/';
    $formatText = preg_replace($reg2, '&lt;a href=""//$0"" style=""font-weight: normal;"" target=""_blank"" title=""$0""&gt;$0&lt;/a&gt;', $formatText);

    //Catch all emails
    $emailRegex = '/(\S+\@\S+\.\S+)/';
    $formatText = preg_replace($emailRegex, '&lt;a href=""mailto:$1"" style=""font-weight: normal;"" target=""_blank"" title=""$1""&gt;$1&lt;/a&gt;', $formatText);
    $formatText = nl2br($formatText);
    return $formatText;
}
</code></pre>",3
1959062,How to add anchor tag to a URL from text input,"<p>I want to be able to take user inputted text in a comment field and check for URL type expression, and if it exists, add an anchor tag (to url) when the comment is displayed.</p>

<p>I am using PHP on the server-side, and Javascript (with jQuery) on client, so should I wait to check for URL until right before it is displayed? Or add the anchor tag before inserting it in the database?</p>

<p>so </p>

<pre><code>&lt;textarea id=""comment""&gt;check out blahblah.com or www.thisthing.co.uk or http://checkthis.us/&lt;/textarea&gt;  
</code></pre>

<p>becomes  </p>

<pre><code>&lt;div id=""commentDisplay""&gt;check out &lt;a href=""blahblah.com""&gt;blahblah.com&lt;/a&gt; or &lt;a href=""www.thisthing.co.uk""&gt;www.thisthing.co.uk&lt;/a&gt; or &lt;a href=""http://checkthis.us/""&gt;http://checkthis.us/&lt;/a&gt;&lt;/div&gt;
</code></pre>",php|javascript|jquery|html,"<p>Refining Markd's answer to avoid links on decimals, percentages, numerical dates (10.3.2001), ellipsis and IP addresses:</p>

<pre><code>    function addLinks($text) {
    return preg_replace('@(http)?(s)?(://)?(([a-zA-Z])([-\w]+\.)+([^\s\.]+[^\s]*)+[^,.\s])@', '&lt;a target=""ref"" href=""http$2://$4""&gt;$1$2$3$4&lt;/a&gt;', $text);
}
</code></pre>

<p>Works for:</p>

<p>http://<strong>www.google.com</strong>/<br />
https://<strong>www.google.com</strong>/.<br />
<strong>www.google.com</strong><br />
<strong>www.google.com</strong>.<br />
<strong>www.google.com/test</strong><br />
<strong>google.com</strong><br />
<strong>google.com</strong>,<br />
<strong>google.com/test</strong><br />
<strong>www.123.com.au</strong><br />
<strong>ex-ample.com</strong><br />
http://<strong>ex-ample.com</strong><br />
http://<strong>ex-ample.com/test-url_chars.php?param1=val1</strong>.<br />
http://<strong>ex-ample.com/test-url_chars?param1=value1&amp;param2=val+with%20spaces</strong><br /><br />Does not work for:<br /><br />
123.com/test <strong>(numeric domains without 'www')</strong><br />
Keep it up press of popular opinion........keep the average <strong>(ellipsis)</strong><br />
Rising 3.8% to 3.94 million from 3.79 million <strong>(percentages and decimals) </strong><br />
Edited by Andrew Brooke - 07.08.2013 19:57 <strong>(dd.mm.yyyy dates)</strong><br />
10.1.1.1 <strong>(IP Addresses)</strong></p>",2
1959062,How to add anchor tag to a URL from text input,"<p>I want to be able to take user inputted text in a comment field and check for URL type expression, and if it exists, add an anchor tag (to url) when the comment is displayed.</p>

<p>I am using PHP on the server-side, and Javascript (with jQuery) on client, so should I wait to check for URL until right before it is displayed? Or add the anchor tag before inserting it in the database?</p>

<p>so </p>

<pre><code>&lt;textarea id=""comment""&gt;check out blahblah.com or www.thisthing.co.uk or http://checkthis.us/&lt;/textarea&gt;  
</code></pre>

<p>becomes  </p>

<pre><code>&lt;div id=""commentDisplay""&gt;check out &lt;a href=""blahblah.com""&gt;blahblah.com&lt;/a&gt; or &lt;a href=""www.thisthing.co.uk""&gt;www.thisthing.co.uk&lt;/a&gt; or &lt;a href=""http://checkthis.us/""&gt;http://checkthis.us/&lt;/a&gt;&lt;/div&gt;
</code></pre>",php|javascript|jquery|html,"<p>Personally, I would mark it up with JS right before displaying, seems more professional and sustainable than editing the user's comment yourself.</p>",2
1959062,How to add anchor tag to a URL from text input,"<p>I want to be able to take user inputted text in a comment field and check for URL type expression, and if it exists, add an anchor tag (to url) when the comment is displayed.</p>

<p>I am using PHP on the server-side, and Javascript (with jQuery) on client, so should I wait to check for URL until right before it is displayed? Or add the anchor tag before inserting it in the database?</p>

<p>so </p>

<pre><code>&lt;textarea id=""comment""&gt;check out blahblah.com or www.thisthing.co.uk or http://checkthis.us/&lt;/textarea&gt;  
</code></pre>

<p>becomes  </p>

<pre><code>&lt;div id=""commentDisplay""&gt;check out &lt;a href=""blahblah.com""&gt;blahblah.com&lt;/a&gt; or &lt;a href=""www.thisthing.co.uk""&gt;www.thisthing.co.uk&lt;/a&gt; or &lt;a href=""http://checkthis.us/""&gt;http://checkthis.us/&lt;/a&gt;&lt;/div&gt;
</code></pre>",php|javascript|jquery|html,"<p>First, a request. Don't do this before writing the data to the database. Instead, do it before displaying the data to the end-user. This will cut down on all confusion, and will allow you more flexibility in the future.</p>

<p>One example <a href=""http://snipplr.com/view/2371/regex-regular-expression-to-match-a-url/"" rel=""noreferrer"">found online</a> follows:</p>

<pre><code>$text = preg_replace('@(https?://([-\w\.]+)+(:\d+)?(/([-\w/_\.]*(\?\S+)?)?)?)@', '&lt;a href=""$1""&gt;$1&lt;/a&gt;', $text);
</code></pre>

<p>And a much more thorough one from <a href=""http://daringfireball.net/2009/11/liberal_regex_for_matching_urls"" rel=""noreferrer"">daringfireball.net</a>:</p>

<pre><code>/**
 * Replace links in text with html links
 *
 * @param  string $text
 * @return string
 */
function auto_link_text($text)
{
   $pattern  = '#\b(([\w-]+://?|www[.])[^\s()&lt;&gt;]+(?:\([\w\d]+\)|([^[:punct:]\s]|/)))#';
   $callback = create_function('$matches', '
       $url       = array_shift($matches);
       $url_parts = parse_url($url);

       $text = parse_url($url, PHP_URL_HOST) . parse_url($url, PHP_URL_PATH);
       $text = preg_replace(""/^www./"", """", $text);

       $last = -(strlen(strrchr($text, ""/""))) + 1;
       if ($last &lt; 0) {
           $text = substr($text, 0, $last) . ""&amp;hellip;"";
       }

       return sprintf(\'&lt;a rel=""nowfollow"" href=""%s""&gt;%s&lt;/a&gt;\', $url, $text);
   ');

   return preg_replace_callback($pattern, $callback, $text);
}
</code></pre>",22
1365756,How to view DOMNodeList object's data in php,"<p>when I want to test php array I use the following code</p>

<pre><code>    print_r($myarray);
</code></pre>

<p>but know I want to see the data of an object
my object is </p>

<pre><code>    $xpath = new DOMXPath($doc);
    $myobject = $xpath-&gt;query('//*[ancestor-or-self::a]');
</code></pre>

<p>when I use</p>

<pre><code>    print_r($myobject);
</code></pre>

<p>I get that output</p>

<pre><code>    DOMNodeList Object ( )
</code></pre>

<p>I want to iterate through the values of this object to test the result of my query?</p>",php|dom|xpath|domdocument,"<p>For some reason, I've been unable to get the saveHTML/saveXML methods to work. So I wrote my own recursive routine which works for me:</p>

<pre><code>function pvIndent ( $ind ) {
    for ($i=0;$i&lt;$ind;$i++)
        print ( ""   "" );
}

function pvPrint_r ( $val ) {
    echo '&lt;pre&gt;';
    print_r ( $val );
    echo '&lt;/pre&gt;';
}

function pvDOMNodeListPrint_r_ ( $ind,$DOMNodeList ) {
    for ($item=0;$item&lt;$DOMNodeList-&gt;length;$item++) {
        $DOMNode = $DOMNodeList-&gt;item($item);
        if ($DOMNode-&gt;nodeName != ""#text"") {
            pvIndent ( $ind );
            print $DOMNode-&gt;nodeName;
            if ($DOMNode-&gt;nodeValue)
                print "" = "" . trim($DOMNode-&gt;nodeValue);
            print ""\n"";
            if ($DOMNode-&gt;attributes)
                for ($attr=0;$attr&lt;$DOMNode-&gt;attributes-&gt;length;$attr++) {
                    $DOMNodeAttr = $DOMNode-&gt;attributes-&gt;item($attr);
                    pvIndent ( $ind+1 );
                    print ""@"" . $DOMNodeAttr-&gt;nodeName . "" = "" . trim($DOMNodeAttr-&gt;nodeValue) . ""\n"";
                }
            if ($DOMNode-&gt;childNodes)
                pvDOMNodeListPrint_r_ ( $ind+1,$DOMNode-&gt;childNodes );
        }
    }
}

function pvDOMNodeListPrint_r ( $DOMNodeList ) {
    echo '&lt;pre&gt;';
    pvDOMNodeListPrint_r_ ( 0,$DOMNodeList );
    echo '&lt;/pre&gt;';
}
</code></pre>

<p>Call pvDOMNodeListPrint_r with your result from a query on an XDOMPath object.</p>

<p>Notes :</p>

<p>pv is just the prefix I use to avoid name space pollution - feel free to edit it out.</p>

<p>pre tags are used so white space and newlines are handle properly for formatting when output in the body of your html, which is where I generally need such debugging statements - you can format to your taste.</p>

<p>I've explicitly skipped DOMNode's with the name ""#text"" as these seem to repeat the text already contained in the parent node. I'm not sure this correct for all valid XDOMPath's loaded with HTML, but I've not yet seen an exception - you can always eliminate the exclusion if you don't mind the usual redundancy.</p>",1
1365756,How to view DOMNodeList object's data in php,"<p>when I want to test php array I use the following code</p>

<pre><code>    print_r($myarray);
</code></pre>

<p>but know I want to see the data of an object
my object is </p>

<pre><code>    $xpath = new DOMXPath($doc);
    $myobject = $xpath-&gt;query('//*[ancestor-or-self::a]');
</code></pre>

<p>when I use</p>

<pre><code>    print_r($myobject);
</code></pre>

<p>I get that output</p>

<pre><code>    DOMNodeList Object ( )
</code></pre>

<p>I want to iterate through the values of this object to test the result of my query?</p>",php|dom|xpath|domdocument,"<p>How about a recursive function?  </p>

<pre><code>Function XMLPrint_r($d_DomNode) {
    print $d_DomNode-&gt;$nodeName."" "".$d_DomNode-&gt;$nodeValue.""&lt;br&gt;"";
    Foreach($d_DomNode-&gt;$childNodes as $d_ChildNode) {
        print "" "";
        XMLPrint_r($d_ChildNode);
    }
}
</code></pre>

<p>I did not test this, but you get the idea.</p>",1
1365756,How to view DOMNodeList object's data in php,"<p>when I want to test php array I use the following code</p>

<pre><code>    print_r($myarray);
</code></pre>

<p>but know I want to see the data of an object
my object is </p>

<pre><code>    $xpath = new DOMXPath($doc);
    $myobject = $xpath-&gt;query('//*[ancestor-or-self::a]');
</code></pre>

<p>when I use</p>

<pre><code>    print_r($myobject);
</code></pre>

<p>I get that output</p>

<pre><code>    DOMNodeList Object ( )
</code></pre>

<p>I want to iterate through the values of this object to test the result of my query?</p>",php|dom|xpath|domdocument,"<p>Someone wrote a great getArray() function:
<a href=""http://www.php.net/manual/en/class.domdocument.php#101014"" rel=""nofollow"">http://www.php.net/manual/en/class.domdocument.php#101014</a></p>",2
1365756,How to view DOMNodeList object's data in php,"<p>when I want to test php array I use the following code</p>

<pre><code>    print_r($myarray);
</code></pre>

<p>but know I want to see the data of an object
my object is </p>

<pre><code>    $xpath = new DOMXPath($doc);
    $myobject = $xpath-&gt;query('//*[ancestor-or-self::a]');
</code></pre>

<p>when I use</p>

<pre><code>    print_r($myobject);
</code></pre>

<p>I get that output</p>

<pre><code>    DOMNodeList Object ( )
</code></pre>

<p>I want to iterate through the values of this object to test the result of my query?</p>",php|dom|xpath|domdocument,"<p>Your xpath query is not matching anything in your XML.</p>

<p>From the <a href=""http://www.php.net/manual/en/domxpath.query.php"" rel=""nofollow noreferrer"">DomXPath::query manual page</a>:</p>

<blockquote>
  <p>Returns a DOMNodeList containing all
  nodes matching the given XPath
  expression . Any expression which do
  not return nodes will return an empty
  DOMNodeList.</p>
</blockquote>",0
1365756,How to view DOMNodeList object's data in php,"<p>when I want to test php array I use the following code</p>

<pre><code>    print_r($myarray);
</code></pre>

<p>but know I want to see the data of an object
my object is </p>

<pre><code>    $xpath = new DOMXPath($doc);
    $myobject = $xpath-&gt;query('//*[ancestor-or-self::a]');
</code></pre>

<p>when I use</p>

<pre><code>    print_r($myobject);
</code></pre>

<p>I get that output</p>

<pre><code>    DOMNodeList Object ( )
</code></pre>

<p>I want to iterate through the values of this object to test the result of my query?</p>",php|dom|xpath|domdocument,"<p>DOMNodeList is an interesting object, one that you will not get much information from using <code>print_r</code> or <code>var_dump</code>.</p>

<p>There are many ways to view the data of a DOMNodeList object. Here is an example: </p>

<pre><code>$xpath = new DOMXpath($dom);
$dom_node_list = $xpath-&gt;query($your_xpath_query);
$temp_dom = new DOMDocument();
foreach($dom_node_list as $n) $temp_dom-&gt;appendChild($temp_dom-&gt;importNode($n,true));
print_r($temp_dom-&gt;saveHTML());
</code></pre>

<p>(Of course use saveXML instead of saveHTML if you are dealing with XML.)</p>

<p>A DOMNodeList can be iterated over like an array. If you want to pull the data out of the DOMNodeList object and put it into a different data structure, such as an array or stdClass object, then you simply iterate through the ""nodes"" in the DOMNodeList, converting the nodes' values and/or attributes (that you want to have available) before adding them to the new data structure.</p>",21
1365756,How to view DOMNodeList object's data in php,"<p>when I want to test php array I use the following code</p>

<pre><code>    print_r($myarray);
</code></pre>

<p>but know I want to see the data of an object
my object is </p>

<pre><code>    $xpath = new DOMXPath($doc);
    $myobject = $xpath-&gt;query('//*[ancestor-or-self::a]');
</code></pre>

<p>when I use</p>

<pre><code>    print_r($myobject);
</code></pre>

<p>I get that output</p>

<pre><code>    DOMNodeList Object ( )
</code></pre>

<p>I want to iterate through the values of this object to test the result of my query?</p>",php|dom|xpath|domdocument,<p><code>var_dump($myobject);</code> may be what you're looking for</p>,0
1365756,How to view DOMNodeList object's data in php,"<p>when I want to test php array I use the following code</p>

<pre><code>    print_r($myarray);
</code></pre>

<p>but know I want to see the data of an object
my object is </p>

<pre><code>    $xpath = new DOMXPath($doc);
    $myobject = $xpath-&gt;query('//*[ancestor-or-self::a]');
</code></pre>

<p>when I use</p>

<pre><code>    print_r($myobject);
</code></pre>

<p>I get that output</p>

<pre><code>    DOMNodeList Object ( )
</code></pre>

<p>I want to iterate through the values of this object to test the result of my query?</p>",php|dom|xpath|domdocument,"<p>After much debugging I found out that all DOM objects are invisible to var_dump() and print_r(), my guess is because they are C objects and not PHP objects. So I tried saveXML(), which works fine on DOMDocument, but is not implemented on DOMElement.</p>

<p>The solution is simple (if you know it):</p>

<pre><code>$xml = $domElement-&gt;ownerDocument-&gt;saveXML($domElement);
</code></pre>",-2
1365756,How to view DOMNodeList object's data in php,"<p>when I want to test php array I use the following code</p>

<pre><code>    print_r($myarray);
</code></pre>

<p>but know I want to see the data of an object
my object is </p>

<pre><code>    $xpath = new DOMXPath($doc);
    $myobject = $xpath-&gt;query('//*[ancestor-or-self::a]');
</code></pre>

<p>when I use</p>

<pre><code>    print_r($myobject);
</code></pre>

<p>I get that output</p>

<pre><code>    DOMNodeList Object ( )
</code></pre>

<p>I want to iterate through the values of this object to test the result of my query?</p>",php|dom|xpath|domdocument,"<p>A bit late in the game, but perhaps it helps someone... </p>

<p>Be aware of utf-8 output when using the dom/xpath object itself. </p>

<p>If you would output the nodeValue directly, you would get corrupted characters e.g.:</p>

<pre><code>Ã¬ÂÂÃ¬ÂÂ Ã«Â¹ÂÃ«Â”Â”Ã¬ÂÂ¤
ìì ë¹ë””ì¤ í°ì  íì¤
</code></pre>

<p>You have to load your dom object with the second param ""utf-8"", <code>new \DomDocument('1.0', 'utf-8')</code>, but still when you print the dom node list/element value you get broken characters:</p>

<p><code>echo $contentItem-&gt;item($index)-&gt;nodeValue</code> </p>

<p>you have to wrap it up with utf8_decode:</p>

<p><code>echo utf8_decode($contentItem-&gt;item($index)-&gt;nodeValue)
//output: 者不終朝而會，愚者可浹旬而學
</code></p>",1
1365756,How to view DOMNodeList object's data in php,"<p>when I want to test php array I use the following code</p>

<pre><code>    print_r($myarray);
</code></pre>

<p>but know I want to see the data of an object
my object is </p>

<pre><code>    $xpath = new DOMXPath($doc);
    $myobject = $xpath-&gt;query('//*[ancestor-or-self::a]');
</code></pre>

<p>when I use</p>

<pre><code>    print_r($myobject);
</code></pre>

<p>I get that output</p>

<pre><code>    DOMNodeList Object ( )
</code></pre>

<p>I want to iterate through the values of this object to test the result of my query?</p>",php|dom|xpath|domdocument,"<p>It's possible to navigate through the nodes by using a simple foreach as follow:</p>

<pre><code>foreach ($myobject as $node) {

  echo $node-&gt;nodeValue, PHP_EOL;

} // end foreach 
</code></pre>

<p>Hope that it can help others, the important pieces of code are the </p>

<pre><code>foreach 
</code></pre>

<p>and the item </p>

<pre><code>$node-&gt;nodeValue
</code></pre>

<p>for more details regarding this class please visit:</p>

<p><a href=""http://php.net/manual/en/class.domnodelist.php"" rel=""nofollow"">http://php.net/manual/en/class.domnodelist.php</a></p>",4
2035798,Math average with php,"<p>Time to test your math skills...</p>

<p>I'm using php to find the average of $num1, $num2, $num3 and so on; upto an unset amount of numbers.  It then saves that average to a database.</p>

<p>Next time the php script is called a new number is added to the mix.</p>

<p>Is there a math (most likely algebra) equation that I can use to find the average of the original numbers with the new number included. Or do I need to save the original numbers in the database so I can query them and re-calculate the entire bunch of numbers together?</p>",php|math|average,"<pre><code>function avgvals($avg_vals,$avg_delimiter=',') { 
 if ( (is_string($avg_vals) &amp;&amp; strlen($avg_vals) &gt; 2) &amp;&amp; (is_string($avg_delimiter) &amp;&amp; !empty($avg_delimiter)) ) { 
    $average_vals = explode($avg_delimiter, $avg_vals); 
        $return_vals = ( array_sum($average_vals) / count($average_vals) ); 
 } elseif ( (is_string($avg_vals) &amp;&amp; strlen($avg_vals) &lt;= 2) &amp;&amp; (is_string($avg_delimiter) &amp;&amp; !empty($avg_delimiter)) ) { 
        $return_vals = $avg_vals; 
 } else { 
        $return_vals = FALSE; 
 } 
   return $return_vals; 
}
</code></pre>",0
2035798,Math average with php,"<p>Time to test your math skills...</p>

<p>I'm using php to find the average of $num1, $num2, $num3 and so on; upto an unset amount of numbers.  It then saves that average to a database.</p>

<p>Next time the php script is called a new number is added to the mix.</p>

<p>Is there a math (most likely algebra) equation that I can use to find the average of the original numbers with the new number included. Or do I need to save the original numbers in the database so I can query them and re-calculate the entire bunch of numbers together?</p>",php|math|average,"<p>This is called a 'running average' or '<a href=""http://mathworld.wolfram.com/MovingAverage.html"" rel=""nofollow noreferrer"">moving average</a>'.</p>

<p>If the database stores the average <strong>and</strong> the number of values averaged, it will be possible to calculate a new running average for each new value.</p>",0
2035798,Math average with php,"<p>Time to test your math skills...</p>

<p>I'm using php to find the average of $num1, $num2, $num3 and so on; upto an unset amount of numbers.  It then saves that average to a database.</p>

<p>Next time the php script is called a new number is added to the mix.</p>

<p>Is there a math (most likely algebra) equation that I can use to find the average of the original numbers with the new number included. Or do I need to save the original numbers in the database so I can query them and re-calculate the entire bunch of numbers together?</p>",php|math|average,<p>You need to save all the original numbers in the database.</p>,-3
2035798,Math average with php,"<p>Time to test your math skills...</p>

<p>I'm using php to find the average of $num1, $num2, $num3 and so on; upto an unset amount of numbers.  It then saves that average to a database.</p>

<p>Next time the php script is called a new number is added to the mix.</p>

<p>Is there a math (most likely algebra) equation that I can use to find the average of the original numbers with the new number included. Or do I need to save the original numbers in the database so I can query them and re-calculate the entire bunch of numbers together?</p>",php|math|average,"<pre><code>&lt;?php
function avrg()
{
 $count = func_num_args();
 $args = func_get_args();
 return (array_sum($args) / $count);
}
?&gt;
</code></pre>

<p><a href=""http://php.net/manual/en/function.array-sum.php#101727"" rel=""nofollow"">http://php.net/manual/en/function.array-sum.php#101727</a></p>",4
2035798,Math average with php,"<p>Time to test your math skills...</p>

<p>I'm using php to find the average of $num1, $num2, $num3 and so on; upto an unset amount of numbers.  It then saves that average to a database.</p>

<p>Next time the php script is called a new number is added to the mix.</p>

<p>Is there a math (most likely algebra) equation that I can use to find the average of the original numbers with the new number included. Or do I need to save the original numbers in the database so I can query them and re-calculate the entire bunch of numbers together?</p>",php|math|average,"<pre><code>Average = Sum / Number of values
</code></pre>

<p>Just store all 3 values, there's no need for anything complicated.</p>

<p>If you store the <code>Average</code> and <code>Sum</code> then calculate <code>Number of values</code> you'll lose a little accuracy due to truncation of Average.</p>

<p>If you store the <code>Average</code> and <code>Number of values</code> then calculate <code>Sum</code> you'll lose even more accuracy. You have more margin for error in calculating a correct value for <code>Number of values</code> than <code>Sum</code> thanks to it being an integer.</p>",12
2035798,Math average with php,"<p>Time to test your math skills...</p>

<p>I'm using php to find the average of $num1, $num2, $num3 and so on; upto an unset amount of numbers.  It then saves that average to a database.</p>

<p>Next time the php script is called a new number is added to the mix.</p>

<p>Is there a math (most likely algebra) equation that I can use to find the average of the original numbers with the new number included. Or do I need to save the original numbers in the database so I can query them and re-calculate the entire bunch of numbers together?</p>",php|math|average,"<p>If you know the amount of numbers you can calculate the old sum, add the new one and divide by the old amount plus one.</p>

<pre><code>$oldsum = $average * $amount;
$newaverage = ($oldsum + $newnum) / ($amount + 1);
</code></pre>",1
2035798,Math average with php,"<p>Time to test your math skills...</p>

<p>I'm using php to find the average of $num1, $num2, $num3 and so on; upto an unset amount of numbers.  It then saves that average to a database.</p>

<p>Next time the php script is called a new number is added to the mix.</p>

<p>Is there a math (most likely algebra) equation that I can use to find the average of the original numbers with the new number included. Or do I need to save the original numbers in the database so I can query them and re-calculate the entire bunch of numbers together?</p>",php|math|average,"<p>Typically what you might do is save two pieces of information:</p>

<ul>
<li>the sum of all the numbers</li>
<li>the count of numbers</li>
</ul>

<p>Whenever you want to get the average, divide the sum by the count (taking care for the case of count == 0, of course). Whenever you want to include a new number, add the new number to the sum and increment the count by 1.</p>",1
2035798,Math average with php,"<p>Time to test your math skills...</p>

<p>I'm using php to find the average of $num1, $num2, $num3 and so on; upto an unset amount of numbers.  It then saves that average to a database.</p>

<p>Next time the php script is called a new number is added to the mix.</p>

<p>Is there a math (most likely algebra) equation that I can use to find the average of the original numbers with the new number included. Or do I need to save the original numbers in the database so I can query them and re-calculate the entire bunch of numbers together?</p>",php|math|average,"<p>Thought that I should share my function</p>

<pre><code>function avg($sum=0,$count=0){
    return ($count)? $sum / $count: NAN;
}
var_dump( avg(array_sum($values),count($values)) );
</code></pre>

<p>Will return the average and also take into account 0, for example dividing by zero always returns NaN (Not a number)</p>

<p>1/0 = NaN<br>
0/0 = NaN</p>",2
2035798,Math average with php,"<p>Time to test your math skills...</p>

<p>I'm using php to find the average of $num1, $num2, $num3 and so on; upto an unset amount of numbers.  It then saves that average to a database.</p>

<p>Next time the php script is called a new number is added to the mix.</p>

<p>Is there a math (most likely algebra) equation that I can use to find the average of the original numbers with the new number included. Or do I need to save the original numbers in the database so I can query them and re-calculate the entire bunch of numbers together?</p>",php|math|average,"<pre><code>array_sum($values) / count($values)
</code></pre>",52
2035798,Math average with php,"<p>Time to test your math skills...</p>

<p>I'm using php to find the average of $num1, $num2, $num3 and so on; upto an unset amount of numbers.  It then saves that average to a database.</p>

<p>Next time the php script is called a new number is added to the mix.</p>

<p>Is there a math (most likely algebra) equation that I can use to find the average of the original numbers with the new number included. Or do I need to save the original numbers in the database so I can query them and re-calculate the entire bunch of numbers together?</p>",php|math|average,"<p>If what you mean by average is mean and you don't want to store all numbers then store the amount of numbers:</p>

<pre><code>$last_average = 100;
$total_numbers = 10;
$new_number = 54;

$new_average = (($last_average * $total_numbers) + $new_number) / ($total_number + 1);
</code></pre>",13
2310426,Optimizing queries for the next and previous element,"<p>I am looking for the best way to retrieve the next and previous records of a record without running a full query. I have a fully implemented solution in place, and would like to know whether there are any better approaches to do this out there. </p>

<p>Let's say we are building a web site for a fictitious greengrocer. In addition to his HTML pages, every week, he wants to publish a list of special offers on his site. He wants those offers to reside in an actual database table, and users have to be able to sort the offers in three ways.</p>

<p>Every item also has to have a detail page with more, textual information on the offer and ""previous"" and ""next"" buttons. The ""previous"" and ""next"" buttons need to point to the neighboring entries <em>depending on the sorting the user had chosen for the list</em>.</p>

<p><a href=""https://i.stack.imgur.com/5LMXm.gif"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/5LMXm.gif"" alt=""alt text""></a><br>
<sub>(source: <a href=""http://www.pekkagaiser.com/stuff/Sort.gif?"" rel=""nofollow noreferrer"">pekkagaiser.com</a>)</sub>  </p>

<p>Obviously, the ""next"" button for ""Tomatoes, Class I"" has to be ""Apples, class 1"" in the first example, ""Pears, class I"" in the second, and none in the third.</p>

<p>The task in the detail view is <strong>to determine the next and previous items without running a query every time</strong>, with the sort order of the list as the only available information (Let's say we get that through a GET parameter <code>?sort=offeroftheweek_price</code>, and ignore the security implications).</p>

<p>Obviously, simply passing the IDs of the next and previous elements as a parameter is the first solution that comes to mind. After all, we already know the ID's at this point. But, this is not an option here - it would work in this simplified example, but not in many of my real world use cases.</p>

<p>My current approach in my CMS is using something I have named ""sorting cache"". When a list is loaded, I store the item positions in records in a table named <code>sortingcache</code>.</p>

<pre><code>name (VARCHAR)             items (TEXT)

offeroftheweek_unsorted    Lettuce; Tomatoes; Apples I; Apples II; Pears
offeroftheweek_price       Tomatoes;Pears;Apples I; Apples II; Lettuce
offeroftheweek_class_asc   Apples II;Lettuce;Apples;Pears;Tomatoes
</code></pre>

<p>obviously, the <code>items</code> column is really populated with numeric IDs. </p>

<p>In the detail page, I now access the appropriate <code>sortingcache</code> record, fetch the <code>items</code> column, explode it, search for the current item ID, and return the previous and next neighbour.</p>

<pre><code>array(""current""   =&gt; ""Tomatoes"",
      ""next""      =&gt; ""Pears"",
      ""previous""  =&gt; null
      );
</code></pre>

<p>This is obviously expensive, works for a limited number of records only and creates redundant data, but let's assume that in the real world, the query to create the lists is very expensive (it is), running it in every detail view is out of the question, and <em>some</em> caching is needed. </p>

<p><strong>My questions:</strong></p>

<ul>
<li><p>Do you think this is a good practice to find out the neighbouring records for varying query orders?</p></li>
<li><p>Do you know better practices in terms of performance and simplicity? Do you know something that makes this completely obsolete? </p></li>
<li><p>In programming theory, is there a name for this problem?</p></li>
<li><p>Is the name ""Sorting cache"" is appropriate and understandable for this technique? </p></li>
<li><p>Are there any recognized, common patterns to solve this problem? What are they called?</p></li>
</ul>

<blockquote>
  <p><strong>Note:</strong> My question is not about building the list, or how to display the detail view. Those are just examples. My question is the <strong>basic functionality</strong> of determining the neighbors of a record when a re-query is impossible, and the fastest and cheapest way to get there.</p>
</blockquote>

<p>If something is unclear, please leave a comment and I will clarify.</p>

<blockquote>
  <p>Starting a bounty - maybe there is some more info on this out there. </p>
</blockquote>",php|mysql|algorithm|data-structures|pseudocode,"<p>There are as many ways to do this as to skin the proverbial cat. So here are a couple of mine.</p>

<p>If your original query is expensive, which you say it is, then create another table possibly a memory table populating it with the results of your expensive and seldom run main query.</p>

<p>This second table could then be queried on every view and the sorting is as simple as setting the appropriate sort order.</p>

<p>As is required repopulate the second table with results from the first table, thus keeping the data fresh, but minimising the use of the expensive query.</p>

<p>Alternately, If you want to avoid even connecting to the db then you could store all the data in a php array and store it using memcached. this would be very fast and provided your lists weren't too huge would be resource efficient. and can be easily sorted.</p>

<p>DC</p>",0
2310426,Optimizing queries for the next and previous element,"<p>I am looking for the best way to retrieve the next and previous records of a record without running a full query. I have a fully implemented solution in place, and would like to know whether there are any better approaches to do this out there. </p>

<p>Let's say we are building a web site for a fictitious greengrocer. In addition to his HTML pages, every week, he wants to publish a list of special offers on his site. He wants those offers to reside in an actual database table, and users have to be able to sort the offers in three ways.</p>

<p>Every item also has to have a detail page with more, textual information on the offer and ""previous"" and ""next"" buttons. The ""previous"" and ""next"" buttons need to point to the neighboring entries <em>depending on the sorting the user had chosen for the list</em>.</p>

<p><a href=""https://i.stack.imgur.com/5LMXm.gif"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/5LMXm.gif"" alt=""alt text""></a><br>
<sub>(source: <a href=""http://www.pekkagaiser.com/stuff/Sort.gif?"" rel=""nofollow noreferrer"">pekkagaiser.com</a>)</sub>  </p>

<p>Obviously, the ""next"" button for ""Tomatoes, Class I"" has to be ""Apples, class 1"" in the first example, ""Pears, class I"" in the second, and none in the third.</p>

<p>The task in the detail view is <strong>to determine the next and previous items without running a query every time</strong>, with the sort order of the list as the only available information (Let's say we get that through a GET parameter <code>?sort=offeroftheweek_price</code>, and ignore the security implications).</p>

<p>Obviously, simply passing the IDs of the next and previous elements as a parameter is the first solution that comes to mind. After all, we already know the ID's at this point. But, this is not an option here - it would work in this simplified example, but not in many of my real world use cases.</p>

<p>My current approach in my CMS is using something I have named ""sorting cache"". When a list is loaded, I store the item positions in records in a table named <code>sortingcache</code>.</p>

<pre><code>name (VARCHAR)             items (TEXT)

offeroftheweek_unsorted    Lettuce; Tomatoes; Apples I; Apples II; Pears
offeroftheweek_price       Tomatoes;Pears;Apples I; Apples II; Lettuce
offeroftheweek_class_asc   Apples II;Lettuce;Apples;Pears;Tomatoes
</code></pre>

<p>obviously, the <code>items</code> column is really populated with numeric IDs. </p>

<p>In the detail page, I now access the appropriate <code>sortingcache</code> record, fetch the <code>items</code> column, explode it, search for the current item ID, and return the previous and next neighbour.</p>

<pre><code>array(""current""   =&gt; ""Tomatoes"",
      ""next""      =&gt; ""Pears"",
      ""previous""  =&gt; null
      );
</code></pre>

<p>This is obviously expensive, works for a limited number of records only and creates redundant data, but let's assume that in the real world, the query to create the lists is very expensive (it is), running it in every detail view is out of the question, and <em>some</em> caching is needed. </p>

<p><strong>My questions:</strong></p>

<ul>
<li><p>Do you think this is a good practice to find out the neighbouring records for varying query orders?</p></li>
<li><p>Do you know better practices in terms of performance and simplicity? Do you know something that makes this completely obsolete? </p></li>
<li><p>In programming theory, is there a name for this problem?</p></li>
<li><p>Is the name ""Sorting cache"" is appropriate and understandable for this technique? </p></li>
<li><p>Are there any recognized, common patterns to solve this problem? What are they called?</p></li>
</ul>

<blockquote>
  <p><strong>Note:</strong> My question is not about building the list, or how to display the detail view. Those are just examples. My question is the <strong>basic functionality</strong> of determining the neighbors of a record when a re-query is impossible, and the fastest and cheapest way to get there.</p>
</blockquote>

<p>If something is unclear, please leave a comment and I will clarify.</p>

<blockquote>
  <p>Starting a bounty - maybe there is some more info on this out there. </p>
</blockquote>",php|mysql|algorithm|data-structures|pseudocode,"<p>Basic assumptions:</p>

<ul>
<li>Specials are weekly</li>
<li>We can expect the site to change infrequently... probably daily?</li>
<li>We can control updates to the database with ether an API or respond via triggers</li>
</ul>

<p>If the site changes on a daily basis, I suggest that all the pages are statically generated overnight. One query for each sort-order iterates through and makes all the related pages. Even if there are dynamic elements, odds are that you can address them by including the static page elements. This would provide optimal page service and no database load. In fact, you could possibly generate separate pages and prev / next elements that are included into the pages. This may be crazier with 200 ways to sort, but with 3 I'm a big fan of it.</p>

<pre><code>?sort=price
include(/sorts/$sort/tomatoes_class_1)
/*tomatoes_class_1 is probably a numeric id; sanitize your sort key... use numerics?*/
</code></pre>

<p>If for some reason this isn't feasible, I'd resort to memorization. Memcache is popular for this sort of thing (pun!). When something is pushed to the database, you can issue a trigger to update your cache with the correct values. Do this in the same way you would if as if your updated item existed in 3 linked lists -- relink as appropriate (this.next.prev = this.prev, etc). From that, as long as your cache doesn't overfill, you'll be pulling simple values from memory in a primary key fashion.</p>

<p>This method will take some extra coding on the select and update / insert methods, but it should be fairly minimal. In the end, you'll be looking up <code>[id of tomatoes class 1].price.next</code>. If that key is in your cache, golden. If not, insert into cache and display.</p>

<ul>
<li>Do you think this is a good practice to find out the neighboring records for varying query orders? <em>Yes. It is wise to perform look-aheads on expected upcoming requests.</em></li>
<li>Do you know better practices in terms of performance and simplicity? Do you know something that makes this completely obsolete? <em>Hopefully the above</em></li>
<li>In programming theory, is there a name for this problem? <em>Optimization?</em></li>
<li>Is the name ""Sorting cache"" is appropriate and understandable for this technique? <em>I'm not sure of a specific appropriate name. It is caching, it is a cache of sorts, but I'm not sure that telling me you have a ""sorting cache"" would convey instant understanding.</em></li>
<li>Are there any recognized, common patterns to solve this problem? What are they called? <em>Caching?</em></li>
</ul>

<p>Sorry my tailing answers are kind of useless, but I think my narrative solutions should be quite useful.</p>",0
2310426,Optimizing queries for the next and previous element,"<p>I am looking for the best way to retrieve the next and previous records of a record without running a full query. I have a fully implemented solution in place, and would like to know whether there are any better approaches to do this out there. </p>

<p>Let's say we are building a web site for a fictitious greengrocer. In addition to his HTML pages, every week, he wants to publish a list of special offers on his site. He wants those offers to reside in an actual database table, and users have to be able to sort the offers in three ways.</p>

<p>Every item also has to have a detail page with more, textual information on the offer and ""previous"" and ""next"" buttons. The ""previous"" and ""next"" buttons need to point to the neighboring entries <em>depending on the sorting the user had chosen for the list</em>.</p>

<p><a href=""https://i.stack.imgur.com/5LMXm.gif"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/5LMXm.gif"" alt=""alt text""></a><br>
<sub>(source: <a href=""http://www.pekkagaiser.com/stuff/Sort.gif?"" rel=""nofollow noreferrer"">pekkagaiser.com</a>)</sub>  </p>

<p>Obviously, the ""next"" button for ""Tomatoes, Class I"" has to be ""Apples, class 1"" in the first example, ""Pears, class I"" in the second, and none in the third.</p>

<p>The task in the detail view is <strong>to determine the next and previous items without running a query every time</strong>, with the sort order of the list as the only available information (Let's say we get that through a GET parameter <code>?sort=offeroftheweek_price</code>, and ignore the security implications).</p>

<p>Obviously, simply passing the IDs of the next and previous elements as a parameter is the first solution that comes to mind. After all, we already know the ID's at this point. But, this is not an option here - it would work in this simplified example, but not in many of my real world use cases.</p>

<p>My current approach in my CMS is using something I have named ""sorting cache"". When a list is loaded, I store the item positions in records in a table named <code>sortingcache</code>.</p>

<pre><code>name (VARCHAR)             items (TEXT)

offeroftheweek_unsorted    Lettuce; Tomatoes; Apples I; Apples II; Pears
offeroftheweek_price       Tomatoes;Pears;Apples I; Apples II; Lettuce
offeroftheweek_class_asc   Apples II;Lettuce;Apples;Pears;Tomatoes
</code></pre>

<p>obviously, the <code>items</code> column is really populated with numeric IDs. </p>

<p>In the detail page, I now access the appropriate <code>sortingcache</code> record, fetch the <code>items</code> column, explode it, search for the current item ID, and return the previous and next neighbour.</p>

<pre><code>array(""current""   =&gt; ""Tomatoes"",
      ""next""      =&gt; ""Pears"",
      ""previous""  =&gt; null
      );
</code></pre>

<p>This is obviously expensive, works for a limited number of records only and creates redundant data, but let's assume that in the real world, the query to create the lists is very expensive (it is), running it in every detail view is out of the question, and <em>some</em> caching is needed. </p>

<p><strong>My questions:</strong></p>

<ul>
<li><p>Do you think this is a good practice to find out the neighbouring records for varying query orders?</p></li>
<li><p>Do you know better practices in terms of performance and simplicity? Do you know something that makes this completely obsolete? </p></li>
<li><p>In programming theory, is there a name for this problem?</p></li>
<li><p>Is the name ""Sorting cache"" is appropriate and understandable for this technique? </p></li>
<li><p>Are there any recognized, common patterns to solve this problem? What are they called?</p></li>
</ul>

<blockquote>
  <p><strong>Note:</strong> My question is not about building the list, or how to display the detail view. Those are just examples. My question is the <strong>basic functionality</strong> of determining the neighbors of a record when a re-query is impossible, and the fastest and cheapest way to get there.</p>
</blockquote>

<p>If something is unclear, please leave a comment and I will clarify.</p>

<blockquote>
  <p>Starting a bounty - maybe there is some more info on this out there. </p>
</blockquote>",php|mysql|algorithm|data-structures|pseudocode,"<p>You could save the <a href=""http://www.devx.com/tips/Tip/14251"" rel=""nofollow"">row numbers</a> of the ordered lists into <a href=""http://en.wikipedia.org/wiki/View_%28database%29"" rel=""nofollow"">views</a>, and you could reach the previous and next items in the list under (current_rownum-1) and (current_rownum+1) row numbers.</p>",0
2310426,Optimizing queries for the next and previous element,"<p>I am looking for the best way to retrieve the next and previous records of a record without running a full query. I have a fully implemented solution in place, and would like to know whether there are any better approaches to do this out there. </p>

<p>Let's say we are building a web site for a fictitious greengrocer. In addition to his HTML pages, every week, he wants to publish a list of special offers on his site. He wants those offers to reside in an actual database table, and users have to be able to sort the offers in three ways.</p>

<p>Every item also has to have a detail page with more, textual information on the offer and ""previous"" and ""next"" buttons. The ""previous"" and ""next"" buttons need to point to the neighboring entries <em>depending on the sorting the user had chosen for the list</em>.</p>

<p><a href=""https://i.stack.imgur.com/5LMXm.gif"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/5LMXm.gif"" alt=""alt text""></a><br>
<sub>(source: <a href=""http://www.pekkagaiser.com/stuff/Sort.gif?"" rel=""nofollow noreferrer"">pekkagaiser.com</a>)</sub>  </p>

<p>Obviously, the ""next"" button for ""Tomatoes, Class I"" has to be ""Apples, class 1"" in the first example, ""Pears, class I"" in the second, and none in the third.</p>

<p>The task in the detail view is <strong>to determine the next and previous items without running a query every time</strong>, with the sort order of the list as the only available information (Let's say we get that through a GET parameter <code>?sort=offeroftheweek_price</code>, and ignore the security implications).</p>

<p>Obviously, simply passing the IDs of the next and previous elements as a parameter is the first solution that comes to mind. After all, we already know the ID's at this point. But, this is not an option here - it would work in this simplified example, but not in many of my real world use cases.</p>

<p>My current approach in my CMS is using something I have named ""sorting cache"". When a list is loaded, I store the item positions in records in a table named <code>sortingcache</code>.</p>

<pre><code>name (VARCHAR)             items (TEXT)

offeroftheweek_unsorted    Lettuce; Tomatoes; Apples I; Apples II; Pears
offeroftheweek_price       Tomatoes;Pears;Apples I; Apples II; Lettuce
offeroftheweek_class_asc   Apples II;Lettuce;Apples;Pears;Tomatoes
</code></pre>

<p>obviously, the <code>items</code> column is really populated with numeric IDs. </p>

<p>In the detail page, I now access the appropriate <code>sortingcache</code> record, fetch the <code>items</code> column, explode it, search for the current item ID, and return the previous and next neighbour.</p>

<pre><code>array(""current""   =&gt; ""Tomatoes"",
      ""next""      =&gt; ""Pears"",
      ""previous""  =&gt; null
      );
</code></pre>

<p>This is obviously expensive, works for a limited number of records only and creates redundant data, but let's assume that in the real world, the query to create the lists is very expensive (it is), running it in every detail view is out of the question, and <em>some</em> caching is needed. </p>

<p><strong>My questions:</strong></p>

<ul>
<li><p>Do you think this is a good practice to find out the neighbouring records for varying query orders?</p></li>
<li><p>Do you know better practices in terms of performance and simplicity? Do you know something that makes this completely obsolete? </p></li>
<li><p>In programming theory, is there a name for this problem?</p></li>
<li><p>Is the name ""Sorting cache"" is appropriate and understandable for this technique? </p></li>
<li><p>Are there any recognized, common patterns to solve this problem? What are they called?</p></li>
</ul>

<blockquote>
  <p><strong>Note:</strong> My question is not about building the list, or how to display the detail view. Those are just examples. My question is the <strong>basic functionality</strong> of determining the neighbors of a record when a re-query is impossible, and the fastest and cheapest way to get there.</p>
</blockquote>

<p>If something is unclear, please leave a comment and I will clarify.</p>

<blockquote>
  <p>Starting a bounty - maybe there is some more info on this out there. </p>
</blockquote>",php|mysql|algorithm|data-structures|pseudocode,"<p>The problem / datastructur is named bi-directional graph or you could say you've got several linked lists.</p>

<p>If you think of it as a linked list, you could just add fields to the items table for every sorting and prev / next key. But the DB Person will kill you for that, it's like GOTO.</p>

<p>If you think of it as a (bi-)directional graph, you go with Jessica's answer. The main problem there is that order updates are expensive operations.</p>

<pre><code> Item Next Prev
   A   B     -
   B   C     A
   C   D     B
   ...
</code></pre>

<p>If you change one items position to the new order A, C, B, D, you will have to update 4 rows.</p>",0
2310426,Optimizing queries for the next and previous element,"<p>I am looking for the best way to retrieve the next and previous records of a record without running a full query. I have a fully implemented solution in place, and would like to know whether there are any better approaches to do this out there. </p>

<p>Let's say we are building a web site for a fictitious greengrocer. In addition to his HTML pages, every week, he wants to publish a list of special offers on his site. He wants those offers to reside in an actual database table, and users have to be able to sort the offers in three ways.</p>

<p>Every item also has to have a detail page with more, textual information on the offer and ""previous"" and ""next"" buttons. The ""previous"" and ""next"" buttons need to point to the neighboring entries <em>depending on the sorting the user had chosen for the list</em>.</p>

<p><a href=""https://i.stack.imgur.com/5LMXm.gif"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/5LMXm.gif"" alt=""alt text""></a><br>
<sub>(source: <a href=""http://www.pekkagaiser.com/stuff/Sort.gif?"" rel=""nofollow noreferrer"">pekkagaiser.com</a>)</sub>  </p>

<p>Obviously, the ""next"" button for ""Tomatoes, Class I"" has to be ""Apples, class 1"" in the first example, ""Pears, class I"" in the second, and none in the third.</p>

<p>The task in the detail view is <strong>to determine the next and previous items without running a query every time</strong>, with the sort order of the list as the only available information (Let's say we get that through a GET parameter <code>?sort=offeroftheweek_price</code>, and ignore the security implications).</p>

<p>Obviously, simply passing the IDs of the next and previous elements as a parameter is the first solution that comes to mind. After all, we already know the ID's at this point. But, this is not an option here - it would work in this simplified example, but not in many of my real world use cases.</p>

<p>My current approach in my CMS is using something I have named ""sorting cache"". When a list is loaded, I store the item positions in records in a table named <code>sortingcache</code>.</p>

<pre><code>name (VARCHAR)             items (TEXT)

offeroftheweek_unsorted    Lettuce; Tomatoes; Apples I; Apples II; Pears
offeroftheweek_price       Tomatoes;Pears;Apples I; Apples II; Lettuce
offeroftheweek_class_asc   Apples II;Lettuce;Apples;Pears;Tomatoes
</code></pre>

<p>obviously, the <code>items</code> column is really populated with numeric IDs. </p>

<p>In the detail page, I now access the appropriate <code>sortingcache</code> record, fetch the <code>items</code> column, explode it, search for the current item ID, and return the previous and next neighbour.</p>

<pre><code>array(""current""   =&gt; ""Tomatoes"",
      ""next""      =&gt; ""Pears"",
      ""previous""  =&gt; null
      );
</code></pre>

<p>This is obviously expensive, works for a limited number of records only and creates redundant data, but let's assume that in the real world, the query to create the lists is very expensive (it is), running it in every detail view is out of the question, and <em>some</em> caching is needed. </p>

<p><strong>My questions:</strong></p>

<ul>
<li><p>Do you think this is a good practice to find out the neighbouring records for varying query orders?</p></li>
<li><p>Do you know better practices in terms of performance and simplicity? Do you know something that makes this completely obsolete? </p></li>
<li><p>In programming theory, is there a name for this problem?</p></li>
<li><p>Is the name ""Sorting cache"" is appropriate and understandable for this technique? </p></li>
<li><p>Are there any recognized, common patterns to solve this problem? What are they called?</p></li>
</ul>

<blockquote>
  <p><strong>Note:</strong> My question is not about building the list, or how to display the detail view. Those are just examples. My question is the <strong>basic functionality</strong> of determining the neighbors of a record when a re-query is impossible, and the fastest and cheapest way to get there.</p>
</blockquote>

<p>If something is unclear, please leave a comment and I will clarify.</p>

<blockquote>
  <p>Starting a bounty - maybe there is some more info on this out there. </p>
</blockquote>",php|mysql|algorithm|data-structures|pseudocode,"<p>Apologies if I have misunderstood, but I think you want to retain the ordered list between user accesses to the server. If so, your answer may well lie in your caching strategy and technologies rather than in database query/ schema optimization.</p>

<p>My approach would be to serialize() the array once its first retrieved, and then cache that in to a separate storage area; whether that's memcached/ APC/ hard-drive/ mongoDb/ etc. and retain its cache location details for each user individually through their session data. The actual storage backend would naturally be dependent upon the size of the array, which you don't go into much detail about, but memcached scales great over multiple servers and mongo even further at a slightly greater latency cost. </p>

<p>You also don't indicate how many sort permutations there are in the real-world; e.g. do you  need to cache separate lists per user, or can you globally cache per sort permutation and then filter out what you don't need via PHP?. In the example you give, I'd simply cache both permutations and store which of the two I needed to unserialize() in the session data.</p>

<p>When the user returns to the site, check the Time To Live value of the cached data and re-use it if still valid. I'd also have a trigger running on INSERT/ UPDATE/ DELETE for the special offers that simply sets a timestamp field in a separate table. This would immediately indicate whether the cache was stale and the query needed to be re-run for a very low query cost. The great thing about only using the trigger to set a single field is that there's no need to worry about pruning old/ redundant values out of that table.</p>

<p>Whether this is suitable would depend upon the size of the data being returned, how frequently it was modified, and what caching technologies are available on your server.</p>",0
2310426,Optimizing queries for the next and previous element,"<p>I am looking for the best way to retrieve the next and previous records of a record without running a full query. I have a fully implemented solution in place, and would like to know whether there are any better approaches to do this out there. </p>

<p>Let's say we are building a web site for a fictitious greengrocer. In addition to his HTML pages, every week, he wants to publish a list of special offers on his site. He wants those offers to reside in an actual database table, and users have to be able to sort the offers in three ways.</p>

<p>Every item also has to have a detail page with more, textual information on the offer and ""previous"" and ""next"" buttons. The ""previous"" and ""next"" buttons need to point to the neighboring entries <em>depending on the sorting the user had chosen for the list</em>.</p>

<p><a href=""https://i.stack.imgur.com/5LMXm.gif"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/5LMXm.gif"" alt=""alt text""></a><br>
<sub>(source: <a href=""http://www.pekkagaiser.com/stuff/Sort.gif?"" rel=""nofollow noreferrer"">pekkagaiser.com</a>)</sub>  </p>

<p>Obviously, the ""next"" button for ""Tomatoes, Class I"" has to be ""Apples, class 1"" in the first example, ""Pears, class I"" in the second, and none in the third.</p>

<p>The task in the detail view is <strong>to determine the next and previous items without running a query every time</strong>, with the sort order of the list as the only available information (Let's say we get that through a GET parameter <code>?sort=offeroftheweek_price</code>, and ignore the security implications).</p>

<p>Obviously, simply passing the IDs of the next and previous elements as a parameter is the first solution that comes to mind. After all, we already know the ID's at this point. But, this is not an option here - it would work in this simplified example, but not in many of my real world use cases.</p>

<p>My current approach in my CMS is using something I have named ""sorting cache"". When a list is loaded, I store the item positions in records in a table named <code>sortingcache</code>.</p>

<pre><code>name (VARCHAR)             items (TEXT)

offeroftheweek_unsorted    Lettuce; Tomatoes; Apples I; Apples II; Pears
offeroftheweek_price       Tomatoes;Pears;Apples I; Apples II; Lettuce
offeroftheweek_class_asc   Apples II;Lettuce;Apples;Pears;Tomatoes
</code></pre>

<p>obviously, the <code>items</code> column is really populated with numeric IDs. </p>

<p>In the detail page, I now access the appropriate <code>sortingcache</code> record, fetch the <code>items</code> column, explode it, search for the current item ID, and return the previous and next neighbour.</p>

<pre><code>array(""current""   =&gt; ""Tomatoes"",
      ""next""      =&gt; ""Pears"",
      ""previous""  =&gt; null
      );
</code></pre>

<p>This is obviously expensive, works for a limited number of records only and creates redundant data, but let's assume that in the real world, the query to create the lists is very expensive (it is), running it in every detail view is out of the question, and <em>some</em> caching is needed. </p>

<p><strong>My questions:</strong></p>

<ul>
<li><p>Do you think this is a good practice to find out the neighbouring records for varying query orders?</p></li>
<li><p>Do you know better practices in terms of performance and simplicity? Do you know something that makes this completely obsolete? </p></li>
<li><p>In programming theory, is there a name for this problem?</p></li>
<li><p>Is the name ""Sorting cache"" is appropriate and understandable for this technique? </p></li>
<li><p>Are there any recognized, common patterns to solve this problem? What are they called?</p></li>
</ul>

<blockquote>
  <p><strong>Note:</strong> My question is not about building the list, or how to display the detail view. Those are just examples. My question is the <strong>basic functionality</strong> of determining the neighbors of a record when a re-query is impossible, and the fastest and cheapest way to get there.</p>
</blockquote>

<p>If something is unclear, please leave a comment and I will clarify.</p>

<blockquote>
  <p>Starting a bounty - maybe there is some more info on this out there. </p>
</blockquote>",php|mysql|algorithm|data-structures|pseudocode,"<p>I've had nightmares with this one as well. Your current approach seems to be the best solution even for lists of 10k items. Caching the IDs of the list view in the http session and then using that for displaying the (personalized to current user) previous/next. This works well especially when there are too many ways to filter and sort the initial list of items instead of just 3.<br>
Also, by storing the whole IDs list you get to display a <code>""you are at X out of Y""</code> usability enhancing text.<br>
<img src=""https://i.stack.imgur.com/8tNOc.png"" alt=""JIRA&#39;s previous/next""></p>

<p>By the way, this is what <a href=""http://www.atlassian.com/software/jira/"" rel=""nofollow noreferrer"">JIRA</a> does as well.</p>

<p>To directly answer your questions:</p>

<ul>
<li>Yes it's good practice because it scales without any added code complexity when your filter/sorting and item types crow more complex. I'm using it in a production system with 250k articles with ""infinite"" filter/sort variations. Trimming the cacheable IDs to 1000 is also a possibility since the user will most probably never click on prev or next more than 500 times (He'll most probably go back and refine the search or paginate).</li>
<li>I don't know of a better way. But if the sorts where limited and this was a public site (with no http session) then I'd most probably denormalize.</li>
<li>Dunno.</li>
<li>Yes, sorting cache sounds good. In my project I call it ""previous/next on search results"" or ""navigation on search results"".</li>
<li>Dunno.</li>
</ul>",2
2310426,Optimizing queries for the next and previous element,"<p>I am looking for the best way to retrieve the next and previous records of a record without running a full query. I have a fully implemented solution in place, and would like to know whether there are any better approaches to do this out there. </p>

<p>Let's say we are building a web site for a fictitious greengrocer. In addition to his HTML pages, every week, he wants to publish a list of special offers on his site. He wants those offers to reside in an actual database table, and users have to be able to sort the offers in three ways.</p>

<p>Every item also has to have a detail page with more, textual information on the offer and ""previous"" and ""next"" buttons. The ""previous"" and ""next"" buttons need to point to the neighboring entries <em>depending on the sorting the user had chosen for the list</em>.</p>

<p><a href=""https://i.stack.imgur.com/5LMXm.gif"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/5LMXm.gif"" alt=""alt text""></a><br>
<sub>(source: <a href=""http://www.pekkagaiser.com/stuff/Sort.gif?"" rel=""nofollow noreferrer"">pekkagaiser.com</a>)</sub>  </p>

<p>Obviously, the ""next"" button for ""Tomatoes, Class I"" has to be ""Apples, class 1"" in the first example, ""Pears, class I"" in the second, and none in the third.</p>

<p>The task in the detail view is <strong>to determine the next and previous items without running a query every time</strong>, with the sort order of the list as the only available information (Let's say we get that through a GET parameter <code>?sort=offeroftheweek_price</code>, and ignore the security implications).</p>

<p>Obviously, simply passing the IDs of the next and previous elements as a parameter is the first solution that comes to mind. After all, we already know the ID's at this point. But, this is not an option here - it would work in this simplified example, but not in many of my real world use cases.</p>

<p>My current approach in my CMS is using something I have named ""sorting cache"". When a list is loaded, I store the item positions in records in a table named <code>sortingcache</code>.</p>

<pre><code>name (VARCHAR)             items (TEXT)

offeroftheweek_unsorted    Lettuce; Tomatoes; Apples I; Apples II; Pears
offeroftheweek_price       Tomatoes;Pears;Apples I; Apples II; Lettuce
offeroftheweek_class_asc   Apples II;Lettuce;Apples;Pears;Tomatoes
</code></pre>

<p>obviously, the <code>items</code> column is really populated with numeric IDs. </p>

<p>In the detail page, I now access the appropriate <code>sortingcache</code> record, fetch the <code>items</code> column, explode it, search for the current item ID, and return the previous and next neighbour.</p>

<pre><code>array(""current""   =&gt; ""Tomatoes"",
      ""next""      =&gt; ""Pears"",
      ""previous""  =&gt; null
      );
</code></pre>

<p>This is obviously expensive, works for a limited number of records only and creates redundant data, but let's assume that in the real world, the query to create the lists is very expensive (it is), running it in every detail view is out of the question, and <em>some</em> caching is needed. </p>

<p><strong>My questions:</strong></p>

<ul>
<li><p>Do you think this is a good practice to find out the neighbouring records for varying query orders?</p></li>
<li><p>Do you know better practices in terms of performance and simplicity? Do you know something that makes this completely obsolete? </p></li>
<li><p>In programming theory, is there a name for this problem?</p></li>
<li><p>Is the name ""Sorting cache"" is appropriate and understandable for this technique? </p></li>
<li><p>Are there any recognized, common patterns to solve this problem? What are they called?</p></li>
</ul>

<blockquote>
  <p><strong>Note:</strong> My question is not about building the list, or how to display the detail view. Those are just examples. My question is the <strong>basic functionality</strong> of determining the neighbors of a record when a re-query is impossible, and the fastest and cheapest way to get there.</p>
</blockquote>

<p>If something is unclear, please leave a comment and I will clarify.</p>

<blockquote>
  <p>Starting a bounty - maybe there is some more info on this out there. </p>
</blockquote>",php|mysql|algorithm|data-structures|pseudocode,"<p>In general, I denormalize the data from the indexes. They may be stored in the same rows, but I almost always retrieve my result IDs, then make a separate trip for the data. This makes caching the data very simple. It's not so important in PHP where the latency is low and the bandwidth high, but such a strategy is very useful when you have a high latency, low bandwidth application, such as an AJAX website where much of the site is rendered in JavaScript.</p>

<p>I always cache the lists of results, and the results themselves separately. If anything affects the results of a list query, the cache of the list results is refreshed. If anything affects the results themselves, those particular results are refreshed. This allows me to update either one without having to regenerate everything, resulting in effective caching.</p>

<p>Since my lists of results rarely change, I generate all the lists at the same time. This may make the initial response slightly slower, but it simplifies cache refreshing (all the lists get stored in a single cache entry).</p>

<p>Because I have the entire list cached, it's trivial to find neighbouring items without revisiting the database. With luck, the data for those items will also be cached. This is especially handy when sorting data in JavaScript. If I already have a copy cached on the client, I can resort instantly.</p>

<p>To answer your questions specifically:</p>

<ul>
<li>Yes, it's a fantastic idea to find out the neighbours ahead of time, or whatever information the client is likely to access next, especially if the cost is low now and the cost to recalculate is high. Then it's simply a trade off of extra pre-calculation and storage versus speed.</li>
<li>In terms of performance and simplicity, avoid tying things together that are logically different things. Indexes and data are different, are likely to be changed at different times (e.g. adding a new datum will affect the indexes, but not the existing data), and thus should be accessed separately. This may be slightly less efficient from a single-threaded standpoint, but every time you tie something together, you lose caching effectiveness and asychronosity (the key to scaling is asychronosity).</li>
<li>The term for getting data ahead of time is pre-fetching. Pre-fetching can happen at the time of access or in the background, but before the pre-fetched data is actually needed. Likewise with pre-calculation. It's a trade-off of cost now, storage cost, and cost to get when needed.</li>
<li>""Sorting cache"" is an apt name.</li>
<li>I don't know.</li>
</ul>

<p>Also, when you cache things, cache them at the most generic level possible. Some stuff might be user specific (such as results for a search query), where others might be user agnostic, such as browsing a catalog. Both can benefit from caching. The catalog query might be frequent and save a little each time, and the search query may be expensive and save a lot a few times.</p>",2
2310426,Optimizing queries for the next and previous element,"<p>I am looking for the best way to retrieve the next and previous records of a record without running a full query. I have a fully implemented solution in place, and would like to know whether there are any better approaches to do this out there. </p>

<p>Let's say we are building a web site for a fictitious greengrocer. In addition to his HTML pages, every week, he wants to publish a list of special offers on his site. He wants those offers to reside in an actual database table, and users have to be able to sort the offers in three ways.</p>

<p>Every item also has to have a detail page with more, textual information on the offer and ""previous"" and ""next"" buttons. The ""previous"" and ""next"" buttons need to point to the neighboring entries <em>depending on the sorting the user had chosen for the list</em>.</p>

<p><a href=""https://i.stack.imgur.com/5LMXm.gif"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/5LMXm.gif"" alt=""alt text""></a><br>
<sub>(source: <a href=""http://www.pekkagaiser.com/stuff/Sort.gif?"" rel=""nofollow noreferrer"">pekkagaiser.com</a>)</sub>  </p>

<p>Obviously, the ""next"" button for ""Tomatoes, Class I"" has to be ""Apples, class 1"" in the first example, ""Pears, class I"" in the second, and none in the third.</p>

<p>The task in the detail view is <strong>to determine the next and previous items without running a query every time</strong>, with the sort order of the list as the only available information (Let's say we get that through a GET parameter <code>?sort=offeroftheweek_price</code>, and ignore the security implications).</p>

<p>Obviously, simply passing the IDs of the next and previous elements as a parameter is the first solution that comes to mind. After all, we already know the ID's at this point. But, this is not an option here - it would work in this simplified example, but not in many of my real world use cases.</p>

<p>My current approach in my CMS is using something I have named ""sorting cache"". When a list is loaded, I store the item positions in records in a table named <code>sortingcache</code>.</p>

<pre><code>name (VARCHAR)             items (TEXT)

offeroftheweek_unsorted    Lettuce; Tomatoes; Apples I; Apples II; Pears
offeroftheweek_price       Tomatoes;Pears;Apples I; Apples II; Lettuce
offeroftheweek_class_asc   Apples II;Lettuce;Apples;Pears;Tomatoes
</code></pre>

<p>obviously, the <code>items</code> column is really populated with numeric IDs. </p>

<p>In the detail page, I now access the appropriate <code>sortingcache</code> record, fetch the <code>items</code> column, explode it, search for the current item ID, and return the previous and next neighbour.</p>

<pre><code>array(""current""   =&gt; ""Tomatoes"",
      ""next""      =&gt; ""Pears"",
      ""previous""  =&gt; null
      );
</code></pre>

<p>This is obviously expensive, works for a limited number of records only and creates redundant data, but let's assume that in the real world, the query to create the lists is very expensive (it is), running it in every detail view is out of the question, and <em>some</em> caching is needed. </p>

<p><strong>My questions:</strong></p>

<ul>
<li><p>Do you think this is a good practice to find out the neighbouring records for varying query orders?</p></li>
<li><p>Do you know better practices in terms of performance and simplicity? Do you know something that makes this completely obsolete? </p></li>
<li><p>In programming theory, is there a name for this problem?</p></li>
<li><p>Is the name ""Sorting cache"" is appropriate and understandable for this technique? </p></li>
<li><p>Are there any recognized, common patterns to solve this problem? What are they called?</p></li>
</ul>

<blockquote>
  <p><strong>Note:</strong> My question is not about building the list, or how to display the detail view. Those are just examples. My question is the <strong>basic functionality</strong> of determining the neighbors of a record when a re-query is impossible, and the fastest and cheapest way to get there.</p>
</blockquote>

<p>If something is unclear, please leave a comment and I will clarify.</p>

<blockquote>
  <p>Starting a bounty - maybe there is some more info on this out there. </p>
</blockquote>",php|mysql|algorithm|data-structures|pseudocode,"<p>I'm not sure whether I understood right, so if not, just tell me ;)</p>

<p>Let's say, that the givens are the query for the sorted list and the current offset in that list, i.e. we have a <code>$query</code> and an <code>$n</code>.</p>

<p>A very obvious solution to minimize the queries, would be to fetch all the data at once:</p>

<pre><code>list($prev, $current, $next) = DB::q($query . ' LIMIT ?i, 3', $n - 1)-&gt;fetchAll(PDO::FETCH_NUM);
</code></pre>

<p>That statement fetches the previous, the current and the next elements from the database in the current sorting order and puts the associated information into the corresponding variables.</p>

<p>But as this solution is too simple, I assume I misunderstood something.</p>",1
2310426,Optimizing queries for the next and previous element,"<p>I am looking for the best way to retrieve the next and previous records of a record without running a full query. I have a fully implemented solution in place, and would like to know whether there are any better approaches to do this out there. </p>

<p>Let's say we are building a web site for a fictitious greengrocer. In addition to his HTML pages, every week, he wants to publish a list of special offers on his site. He wants those offers to reside in an actual database table, and users have to be able to sort the offers in three ways.</p>

<p>Every item also has to have a detail page with more, textual information on the offer and ""previous"" and ""next"" buttons. The ""previous"" and ""next"" buttons need to point to the neighboring entries <em>depending on the sorting the user had chosen for the list</em>.</p>

<p><a href=""https://i.stack.imgur.com/5LMXm.gif"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/5LMXm.gif"" alt=""alt text""></a><br>
<sub>(source: <a href=""http://www.pekkagaiser.com/stuff/Sort.gif?"" rel=""nofollow noreferrer"">pekkagaiser.com</a>)</sub>  </p>

<p>Obviously, the ""next"" button for ""Tomatoes, Class I"" has to be ""Apples, class 1"" in the first example, ""Pears, class I"" in the second, and none in the third.</p>

<p>The task in the detail view is <strong>to determine the next and previous items without running a query every time</strong>, with the sort order of the list as the only available information (Let's say we get that through a GET parameter <code>?sort=offeroftheweek_price</code>, and ignore the security implications).</p>

<p>Obviously, simply passing the IDs of the next and previous elements as a parameter is the first solution that comes to mind. After all, we already know the ID's at this point. But, this is not an option here - it would work in this simplified example, but not in many of my real world use cases.</p>

<p>My current approach in my CMS is using something I have named ""sorting cache"". When a list is loaded, I store the item positions in records in a table named <code>sortingcache</code>.</p>

<pre><code>name (VARCHAR)             items (TEXT)

offeroftheweek_unsorted    Lettuce; Tomatoes; Apples I; Apples II; Pears
offeroftheweek_price       Tomatoes;Pears;Apples I; Apples II; Lettuce
offeroftheweek_class_asc   Apples II;Lettuce;Apples;Pears;Tomatoes
</code></pre>

<p>obviously, the <code>items</code> column is really populated with numeric IDs. </p>

<p>In the detail page, I now access the appropriate <code>sortingcache</code> record, fetch the <code>items</code> column, explode it, search for the current item ID, and return the previous and next neighbour.</p>

<pre><code>array(""current""   =&gt; ""Tomatoes"",
      ""next""      =&gt; ""Pears"",
      ""previous""  =&gt; null
      );
</code></pre>

<p>This is obviously expensive, works for a limited number of records only and creates redundant data, but let's assume that in the real world, the query to create the lists is very expensive (it is), running it in every detail view is out of the question, and <em>some</em> caching is needed. </p>

<p><strong>My questions:</strong></p>

<ul>
<li><p>Do you think this is a good practice to find out the neighbouring records for varying query orders?</p></li>
<li><p>Do you know better practices in terms of performance and simplicity? Do you know something that makes this completely obsolete? </p></li>
<li><p>In programming theory, is there a name for this problem?</p></li>
<li><p>Is the name ""Sorting cache"" is appropriate and understandable for this technique? </p></li>
<li><p>Are there any recognized, common patterns to solve this problem? What are they called?</p></li>
</ul>

<blockquote>
  <p><strong>Note:</strong> My question is not about building the list, or how to display the detail view. Those are just examples. My question is the <strong>basic functionality</strong> of determining the neighbors of a record when a re-query is impossible, and the fastest and cheapest way to get there.</p>
</blockquote>

<p>If something is unclear, please leave a comment and I will clarify.</p>

<blockquote>
  <p>Starting a bounty - maybe there is some more info on this out there. </p>
</blockquote>",php|mysql|algorithm|data-structures|pseudocode,"<p>I have an idea somewhat similar to Jessica's.  However, instead of storing links to the next and previous sort items, you store the sort order for each sort type.  To find the previous or next record, just get the row with SortX=currentSort++ or SortX=currentSort--.</p>

<p>Example:</p>

<pre><code>Type     Class Price Sort1  Sort2 Sort3
Lettuce  2     0.89  0      4     0
Tomatoes 1     1.50  1      0     4
Apples   1     1.10  2      2     2
Apples   2     0.95  3      3     1
Pears    1     1.25  4      1     3
</code></pre>

<p>This solution would yield very short query times, and would take up less disk space than Jessica's idea.  However, as I'm sure you realize, the cost of updating one row of data is notably higher, since you have to recalculate and store all sort orders.  But still, depending on your situation, if data updates are rare and especially if they always happen in bulk, then this solution might be the best.</p>

<p>i.e.</p>

<pre><code>once_per_day
  add/delete/update all records
  recalculate sort orders
</code></pre>

<p>Hope this is useful.</p>",4
2310426,Optimizing queries for the next and previous element,"<p>I am looking for the best way to retrieve the next and previous records of a record without running a full query. I have a fully implemented solution in place, and would like to know whether there are any better approaches to do this out there. </p>

<p>Let's say we are building a web site for a fictitious greengrocer. In addition to his HTML pages, every week, he wants to publish a list of special offers on his site. He wants those offers to reside in an actual database table, and users have to be able to sort the offers in three ways.</p>

<p>Every item also has to have a detail page with more, textual information on the offer and ""previous"" and ""next"" buttons. The ""previous"" and ""next"" buttons need to point to the neighboring entries <em>depending on the sorting the user had chosen for the list</em>.</p>

<p><a href=""https://i.stack.imgur.com/5LMXm.gif"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/5LMXm.gif"" alt=""alt text""></a><br>
<sub>(source: <a href=""http://www.pekkagaiser.com/stuff/Sort.gif?"" rel=""nofollow noreferrer"">pekkagaiser.com</a>)</sub>  </p>

<p>Obviously, the ""next"" button for ""Tomatoes, Class I"" has to be ""Apples, class 1"" in the first example, ""Pears, class I"" in the second, and none in the third.</p>

<p>The task in the detail view is <strong>to determine the next and previous items without running a query every time</strong>, with the sort order of the list as the only available information (Let's say we get that through a GET parameter <code>?sort=offeroftheweek_price</code>, and ignore the security implications).</p>

<p>Obviously, simply passing the IDs of the next and previous elements as a parameter is the first solution that comes to mind. After all, we already know the ID's at this point. But, this is not an option here - it would work in this simplified example, but not in many of my real world use cases.</p>

<p>My current approach in my CMS is using something I have named ""sorting cache"". When a list is loaded, I store the item positions in records in a table named <code>sortingcache</code>.</p>

<pre><code>name (VARCHAR)             items (TEXT)

offeroftheweek_unsorted    Lettuce; Tomatoes; Apples I; Apples II; Pears
offeroftheweek_price       Tomatoes;Pears;Apples I; Apples II; Lettuce
offeroftheweek_class_asc   Apples II;Lettuce;Apples;Pears;Tomatoes
</code></pre>

<p>obviously, the <code>items</code> column is really populated with numeric IDs. </p>

<p>In the detail page, I now access the appropriate <code>sortingcache</code> record, fetch the <code>items</code> column, explode it, search for the current item ID, and return the previous and next neighbour.</p>

<pre><code>array(""current""   =&gt; ""Tomatoes"",
      ""next""      =&gt; ""Pears"",
      ""previous""  =&gt; null
      );
</code></pre>

<p>This is obviously expensive, works for a limited number of records only and creates redundant data, but let's assume that in the real world, the query to create the lists is very expensive (it is), running it in every detail view is out of the question, and <em>some</em> caching is needed. </p>

<p><strong>My questions:</strong></p>

<ul>
<li><p>Do you think this is a good practice to find out the neighbouring records for varying query orders?</p></li>
<li><p>Do you know better practices in terms of performance and simplicity? Do you know something that makes this completely obsolete? </p></li>
<li><p>In programming theory, is there a name for this problem?</p></li>
<li><p>Is the name ""Sorting cache"" is appropriate and understandable for this technique? </p></li>
<li><p>Are there any recognized, common patterns to solve this problem? What are they called?</p></li>
</ul>

<blockquote>
  <p><strong>Note:</strong> My question is not about building the list, or how to display the detail view. Those are just examples. My question is the <strong>basic functionality</strong> of determining the neighbors of a record when a re-query is impossible, and the fastest and cheapest way to get there.</p>
</blockquote>

<p>If something is unclear, please leave a comment and I will clarify.</p>

<blockquote>
  <p>Starting a bounty - maybe there is some more info on this out there. </p>
</blockquote>",php|mysql|algorithm|data-structures|pseudocode,"<p>So you have two tasks: </p>

<ol>
<li>build sorted list of items (SELECTs with different ORDER BY)</li>
<li>show details about each item (SELECT details from database with possible caching).</li>
</ol>

<p>What is the problem?</p>

<p>PS: if ordered list may be too big you just need PAGER functionality implemented. There could be different implementations, e.g. you may wish to add ""LIMIT 5"" into query and provide ""Show next 5"" button. When this button is pressed, condition like ""WHERE price &lt; 0.89 LIMIT 5"" is added. </p>",-3
2310426,Optimizing queries for the next and previous element,"<p>I am looking for the best way to retrieve the next and previous records of a record without running a full query. I have a fully implemented solution in place, and would like to know whether there are any better approaches to do this out there. </p>

<p>Let's say we are building a web site for a fictitious greengrocer. In addition to his HTML pages, every week, he wants to publish a list of special offers on his site. He wants those offers to reside in an actual database table, and users have to be able to sort the offers in three ways.</p>

<p>Every item also has to have a detail page with more, textual information on the offer and ""previous"" and ""next"" buttons. The ""previous"" and ""next"" buttons need to point to the neighboring entries <em>depending on the sorting the user had chosen for the list</em>.</p>

<p><a href=""https://i.stack.imgur.com/5LMXm.gif"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/5LMXm.gif"" alt=""alt text""></a><br>
<sub>(source: <a href=""http://www.pekkagaiser.com/stuff/Sort.gif?"" rel=""nofollow noreferrer"">pekkagaiser.com</a>)</sub>  </p>

<p>Obviously, the ""next"" button for ""Tomatoes, Class I"" has to be ""Apples, class 1"" in the first example, ""Pears, class I"" in the second, and none in the third.</p>

<p>The task in the detail view is <strong>to determine the next and previous items without running a query every time</strong>, with the sort order of the list as the only available information (Let's say we get that through a GET parameter <code>?sort=offeroftheweek_price</code>, and ignore the security implications).</p>

<p>Obviously, simply passing the IDs of the next and previous elements as a parameter is the first solution that comes to mind. After all, we already know the ID's at this point. But, this is not an option here - it would work in this simplified example, but not in many of my real world use cases.</p>

<p>My current approach in my CMS is using something I have named ""sorting cache"". When a list is loaded, I store the item positions in records in a table named <code>sortingcache</code>.</p>

<pre><code>name (VARCHAR)             items (TEXT)

offeroftheweek_unsorted    Lettuce; Tomatoes; Apples I; Apples II; Pears
offeroftheweek_price       Tomatoes;Pears;Apples I; Apples II; Lettuce
offeroftheweek_class_asc   Apples II;Lettuce;Apples;Pears;Tomatoes
</code></pre>

<p>obviously, the <code>items</code> column is really populated with numeric IDs. </p>

<p>In the detail page, I now access the appropriate <code>sortingcache</code> record, fetch the <code>items</code> column, explode it, search for the current item ID, and return the previous and next neighbour.</p>

<pre><code>array(""current""   =&gt; ""Tomatoes"",
      ""next""      =&gt; ""Pears"",
      ""previous""  =&gt; null
      );
</code></pre>

<p>This is obviously expensive, works for a limited number of records only and creates redundant data, but let's assume that in the real world, the query to create the lists is very expensive (it is), running it in every detail view is out of the question, and <em>some</em> caching is needed. </p>

<p><strong>My questions:</strong></p>

<ul>
<li><p>Do you think this is a good practice to find out the neighbouring records for varying query orders?</p></li>
<li><p>Do you know better practices in terms of performance and simplicity? Do you know something that makes this completely obsolete? </p></li>
<li><p>In programming theory, is there a name for this problem?</p></li>
<li><p>Is the name ""Sorting cache"" is appropriate and understandable for this technique? </p></li>
<li><p>Are there any recognized, common patterns to solve this problem? What are they called?</p></li>
</ul>

<blockquote>
  <p><strong>Note:</strong> My question is not about building the list, or how to display the detail view. Those are just examples. My question is the <strong>basic functionality</strong> of determining the neighbors of a record when a re-query is impossible, and the fastest and cheapest way to get there.</p>
</blockquote>

<p>If something is unclear, please leave a comment and I will clarify.</p>

<blockquote>
  <p>Starting a bounty - maybe there is some more info on this out there. </p>
</blockquote>",php|mysql|algorithm|data-structures|pseudocode,"<p>Here is an idea. You could offload the expensive operations to an update when the grocer inserts/updates new offers rather than when the end user selects the data to view. This may seem like a non-dynamic way to handle the sort data, but it may increase speed. And, as we know, there is always a trade off between performance and other coding factors.</p>

<p>Create a table to hold next and previous for each offer and each sort option. (Alternatively, you could store this in the offer table if you will always have three sort options -- query speed is a good reason to denormalize your database)</p>

<p>So you would have these columns:</p>

<ul>
<li>Sort Type (Unsorted, Price, Class and Price Desc)</li>
<li>Offer ID</li>
<li>Prev ID</li>
<li>Next ID</li>
</ul>

<p>When the detail information for the offer detail page is queried from the database, the NextID and PrevID would be part of the results. So you would only need one query for each detail page.</p>

<p>Each time an offer is inserted, updated or deleted, you would need to run a process which validates the integrity/accuracy of the sorttype table. </p>",16
13571867,prepared statement using bindValue not working,"<p>I'm new to PHP and I'm trying to get a prepared statement to work. Its for my final year project at university and I remember reading that prepared statements are good practice and also good for SQL injections. However the following code gives me a Server 500 error.</p>

<pre><code>&lt;?php
    $email = ""blah@blah.co.uk"";
    $hash = ""somerandomhashedpassword"";
    $db = new mysqli(""localhost"", ""root"", ""1234"", ""UEAnetwork"");    
    $sql = ""INSERT INTO Students (Email, Password) VALUES (?,?)"";
    $stmt = $db-&gt;prepare($sql);
    $stmt-&gt;bindValue(1, $email);
    $stmt-&gt;bindValue(2, $hash);           
    if ($stmt-&gt;execute()) {
        echo ""You have registered!!!!!!!!!!!!!!!!!!!!!!!!!!!!"";
    }
?&gt;
</code></pre>

<p>If I run the following then a row is inserted, so I'm pretty sure I'm connecting to the database properly.</p>

<pre><code>&lt;?php
    $db = new mysqli(""localhost"", ""root"", ""1234"", ""UEAnetwork"");    
    $sql = ""INSERT INTO Students (Email, Password) VALUES ('blah@blah.co.uk','somerandomhashedpassword')"";
    $stmt = $db-&gt;prepare($sql);         
    if ($stmt-&gt;execute()) {
        echo ""You have registered!!!!!!!!!!!!!!!!!!!!!!!!!!!!"";
    }
?&gt;
</code></pre>

<p>Am I using <code>bindValue</code> incorrectly? I've seen it used this way in many tutorials online but I must be doing something wrong.</p>",php|prepared-statement|bindvalue,"<p><code>mysqli</code> has a very different API than <code>PDO</code>.  There is no <code>mysql_stmt::bindValue</code>.  You want to use <code>mysql_stmt::bind_param</code>, but the syntax is quite different:</p>

<pre><code>$stmt-&gt;bind_param('ss', $email, $hash);
</code></pre>",5
13238597,Sticky page not working in wordpress,"<p>Why id the Sticky post functionality is not working? 
I quick edit the posts to sticky on the blog they reside on so it will show at the top of the main blog home page, but nothing happens. </p>

<p>This site uses a plugin called ""AHP Sitewide Recent Posts for WordPress"" in order to combine all the sites individual blogs on one page. </p>

<p>I have looked at the code and cant figure out what is preventing the sticky from working. i have tried pretty much everything i know. Please help, my .php knowledge is basic. This is the code that displays the Main Blog. </p>

<pre><code>    &lt;?php
/**
 * @package WordPress
 * @subpackage EHC_Theme
 */


/*
Template Name: 3-Column
*/

         get_header(); ?&gt;

    &lt;?php include(TEMPLATEPATH . ""/sidebarHome.php""); ?&gt;

    &lt;div id=""content"" class=""narrowcolumn"" role=""main""&gt;
    &lt;h3&gt;Recent Posts&lt;/h3&gt;


    &lt;?php ahp_recent_posts(10, 300, 127, 150, 4, '&lt;div class=""post""&gt;', '&lt;/div&gt;', 1); ?&gt;


    &lt;?php if (have_posts()) : ?&gt;

        &lt;?php the_post();  the_content(); ?&gt;
         &lt;!--&lt;?php while (have_posts()) : the_post(); ?&gt;

            &lt;div &lt;?php post_class() ?&gt; id=""post-&lt;?php the_ID(); ?&gt;""&gt;
            &lt;?php echo get_blog_avatar(1,'32','mystery'); ?&gt;
                &lt;h2&gt;&lt;a href=""&lt;?php the_permalink() ?&gt;"" rel=""bookmark"" title=""Permanent Link to &lt;?php the_title_attribute(); ?&gt;""&gt;&lt;?php the_title(); ?&gt;&lt;/a&gt;&lt;/h2&gt;
                &lt;p class=""postmetadata""&gt;&lt;small&gt;&lt;?php the_date() ?&gt;, &lt;?php the_time() ?&gt;  By &lt;?php the_author() ?&gt;&lt;/small&gt;&lt;/p&gt;

                &lt;div class=""entry""&gt;
                    &lt;?php the_excerpt('Read the rest of this entry &amp;raquo;'); ?&gt;
                &lt;/div&gt;

                &lt;p class=""postmetadata""&gt;&lt;?php the_tags('Tags: ', ', ', '&lt;br /&gt;'); ?&gt; Posted in &lt;?php the_category(', ') ?&gt; | &lt;?php edit_post_link('Edit', '', ' | '); ?&gt;  &lt;?php comments_popup_link('No Comments &amp;#187;', '1 Comment &amp;#187;', '% Comments &amp;#187;'); ?&gt;&lt;/p&gt;
            &lt;/div&gt;

        &lt;?php endwhile; ?&gt;

        --&gt;
                &lt;div class=""navigation""&gt;
            &lt;div class=""alignleft""&gt;&lt;?php next_posts_link('&amp;laquo; Older Entries') ?&gt;Next&lt;/div&gt;
            &lt;div class=""alignright""&gt;&lt;?php previous_posts_link('Newer Entries &amp;raquo;') ?&gt;Prev&lt;/div&gt;
        &lt;/div&gt;



       &lt;?php else : ?&gt;

        &lt;h2 class=""center""&gt;Not Found&lt;/h2&gt;
        &lt;p class=""center""&gt;Sorry, but you are looking for something that isn't here.&lt;/p&gt;
        &lt;?php get_search_form(); ?&gt;

    &lt;?php endif; ?&gt;

           &lt;/div&gt;

&lt;div&gt;
&lt;?php get_sidebar(); ?&gt;
&lt;/div&gt;
&lt;?php get_footer(); ?&gt;
</code></pre>",php|wordpress|blogs|posts|sticky,"<p>The <code>ahp_recent_posts()</code> function is probably override the default Loop functionality. Hard to say without seeing its contents, but try commenting it out and see what the display looks like.</p>",0
13387091,Getting Codeigniter CSRF token without a form?,"<p>I have CSRF protection enabled on my site, but the only time the CSRF token is placed in a hidden field is when <code>form_close()</code> is used. I am posting data via ajax and need to send the CSRF as well to prevent the 500 errors.</p>

<p>I thought there was a way to explicitly embed the CSRF token into the page, but I can't seem to find it.</p>

<p>How can I get the CSRF token when there isn't a form on the page?</p>",php|ajax|codeigniter,"<p>Here is an example that shows you how to enable CSRF Attack mode :</p>

<p><div class=""snippet"" data-lang=""js"" data-hide=""false"" data-console=""true"" data-babel=""false"">
<div class=""snippet-code"">
<pre class=""snippet-code-js lang-js prettyprint-override""><code>&lt;script&gt;
    
  var cct = '&lt;?php echo $this-&gt;security-&gt;get_csrf_hash() ?&gt;';
  var get_csrf_token_name = '&lt;?php echo $this-&gt;security-&gt;get_csrf_token_name() ?&gt;';
  
   $.ajaxSetup({
   type:'post',
  data:{ &lt;?php echo $this-&gt;security-&gt;get_csrf_token_name() ?&gt; :cct}
   });
   
  
    var siteurl = '&lt;?= site_url()?&gt;';        
       
   &lt;/script&gt;</code></pre>
</div>
</div>
</p>",0
13387091,Getting Codeigniter CSRF token without a form?,"<p>I have CSRF protection enabled on my site, but the only time the CSRF token is placed in a hidden field is when <code>form_close()</code> is used. I am posting data via ajax and need to send the CSRF as well to prevent the 500 errors.</p>

<p>I thought there was a way to explicitly embed the CSRF token into the page, but I can't seem to find it.</p>

<p>How can I get the CSRF token when there isn't a form on the page?</p>",php|ajax|codeigniter,"<p>Add it to the form this way</p>

<pre><code>&lt;input type=""hidden"" name=""&lt;?php echo $this-&gt;security-&gt;get_csrf_token_name(); ?&gt;"" value=""&lt;?php echo $this-&gt;security-&gt;get_csrf_hash(); ?&gt;""&gt;
</code></pre>",12
13387091,Getting Codeigniter CSRF token without a form?,"<p>I have CSRF protection enabled on my site, but the only time the CSRF token is placed in a hidden field is when <code>form_close()</code> is used. I am posting data via ajax and need to send the CSRF as well to prevent the 500 errors.</p>

<p>I thought there was a way to explicitly embed the CSRF token into the page, but I can't seem to find it.</p>

<p>How can I get the CSRF token when there isn't a form on the page?</p>",php|ajax|codeigniter,"<p>You can get the CSRF token name and value via the security class:</p>

<pre><code>$this-&gt;security-&gt;get_csrf_hash();
$this-&gt;security-&gt;get_csrf_token_name();
</code></pre>",42
13366573,How to pass multidimensional array from controller to view page and how to access it,"<p>Can anybody tell me like how can i access pass multidimensional object array from a controller to view page and how can i access those data from the view page. My requirement look like this</p>

<p>i have my first array </p>

<pre><code>for($i=1; $i&lt;=$day;$i++){
    $search_result[$i][1] = $this-&gt;photos_m-&gt;get_user_photos_by_date($this-&gt;user-&gt;_id, str_pad($i, 2, '0', STR_PAD_LEFT) , $month, $year);
} 
</code></pre>

<p>and also i need to append the values to this array like this </p>

<pre><code>foreach($friends as $friend=&gt;$obj){   
    $friendCount++;
    for($i=1; $i&lt;=$day;$i++){                                      
        $search_result['results'][$j] = $this-&gt;photos_m-&gt;get_friend_photos_by_date($obj-&gt;relation_id, str_pad($i, 2, '0', STR_PAD_LEFT) , $month, $year);
    }
}
</code></pre>

<p>the result of <code>$this-&gt;photos_m-&gt;get_friend_photos_by_date($obj-&gt;relation_id, str_pad($i, 2, '0', STR_PAD_LEFT) , $month, $year);</code> is an object array.</p>

<p>Please note that i have to store the data in a multidimensional array like this</p>

<pre><code>$search_result[0][1],$search_result[0][1] .... $search_result[n][n]
</code></pre>

<p>please check my code that i pasted above and please guide me if i have done anything wrong. If it is right please tell me how to access that data from the view page?</p>",php|codeigniter,"<p>Since I can't comment I'll post an answer and edit it :)<br>
You're using codeigniter, right?</p>

<p>So if you pass an array (in your <strong>Controller</strong>) to your view like:<br></p>

<pre><code>$data['results'] = $search_result;
$this-&gt;load-&gt;view('your_view', $data);
</code></pre>

<p>You can then access your multi dimensional array(in your <strong>View</strong>) like this:</p>

<pre><code>&lt;?php foreach($results as $result):
print_r($result); 
endforeach:?&gt;
</code></pre>

<p>If that doesn't work: Did you check if you got any output while doing</p>

<pre><code>foreach($friends as $friend=&gt;$obj){   
</code></pre>

<p>I mean, did you check if $friend and $obj actually have a value? <br>And more important: Did you <code>print_r($search_result);</code> after your loop? Just so see if you actually got any values in your array.</p>",0
54514377,Transform request object to array for database insert,"<p>i have made a duplicable form input using jquery, how do i insert all data </p>

<pre><code>    &lt;tbody id=""visites""&gt;
    &lt;tr id=""ligne""&gt;
    &lt;td&gt; &lt;input type... name=""id[]""&gt;&lt;/td&gt;
    &lt;td&gt; &lt;input type... name=""date[]""&gt;&lt;/td&gt;
    &lt;td&gt; &lt;input type... name=""statut[]""&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;/tbody&gt;
    &lt;script type=""text/javascript""&gt;
      function dupliquer()
      {
        $( ""#ligne"" ).clone().appendTo( ""#visites"" );
      }
    &lt;/script&gt;
</code></pre>

<p>This is the request bag </p>

<pre><code>        id  
          0 ""1""
          1 ""1""
          2 ""1""
          3 ""1""
        date    
          0 null
          1 null
          2 null
          3 null
        statut  
          0 null
          1 null
          2 null
          3 null
</code></pre>

<p>The model fillable are </p>

<pre><code>['id','date','statut']
</code></pre>

<p>I want to transform the request() bag to something like that </p>

<pre><code>    $data = [
             {id:1,date:'..',statut:'3'},
             {id:1,date:'..',statut:'3'},
             {id:1,date:'..',statut:'3'}
            ]
</code></pre>

<p>and perform this :</p>

<pre><code>    foreach($data as ....)
    { 
      Model::create([...]);
    }
</code></pre>

<p>Summarly this is the request bag 
<a href=""https://i.stack.imgur.com/3WTVa.png"" rel=""nofollow noreferrer"">Request bag</a>
And this is what i want
<a href=""https://i.stack.imgur.com/8u5s7.png"" rel=""nofollow noreferrer"">Data</a>
I hope i'v been clear ^^ thanks.</p>",php|laravel-5,"<p>you can try doing this </p>

<pre><code>$dataArray = [];
foreach($request['id'] as $key =&gt; $value){
   // create new empty object
   $ob = new \stdClass;
   $ob-&gt;id = $request['id'][$key];
   $ob-&gt;date = $request['date'][$key];
   $ob-&gt;status = $request['statut'][$key];

   // push the new object to the array
   $dataArray[] = $ob;
}
</code></pre>",0
54546593,PHP persistent replacing space characted at the end of my post value,"<p>I have a post value that contain space <code>' '</code> at the end like this:</p>

<pre><code>&lt;input name=""code"" type=""text"" value=""test1 "" /&gt;
</code></pre>

<p>the value is dynamic , sometimes it will contain whitespace at the end and sometimes it will not contain whitespace at the end</p>

<pre><code>&lt;input name=""code"" type=""text"" value=""test2"" /&gt;
</code></pre>

<p>when i retrieve the post data like this:</p>

<pre><code>print_r($POST); 
//$_POST[""code""] = ""test""
</code></pre>

<p>the space at the end of value is gone, how to keep this space at the end of the value?</p>",php|post,"<p>You can add : <code>value=""test&amp;nbsp;""</code> in input field. <code>&amp;nbsp;</code> post as a space</p>",0
54546593,PHP persistent replacing space characted at the end of my post value,"<p>I have a post value that contain space <code>' '</code> at the end like this:</p>

<pre><code>&lt;input name=""code"" type=""text"" value=""test1 "" /&gt;
</code></pre>

<p>the value is dynamic , sometimes it will contain whitespace at the end and sometimes it will not contain whitespace at the end</p>

<pre><code>&lt;input name=""code"" type=""text"" value=""test2"" /&gt;
</code></pre>

<p>when i retrieve the post data like this:</p>

<pre><code>print_r($POST); 
//$_POST[""code""] = ""test""
</code></pre>

<p>the space at the end of value is gone, how to keep this space at the end of the value?</p>",php|post,"<p>I am not sure I understand the question.  What I think you mean is that when the space is missing you want to add one in?  PHP won't automatically trim that space off, so it's the only thing I can think you mean.</p>

<p>For exmple:</p>

<pre><code>if(isset($_POST[""code""])) $_POST[""code""] = rtrim( $_POST[""code""] ).' ';
</code></pre>

<p>Trim any spaces from the right, then add one space. If there was no space it gets a space, if there was, it gets removed and a new one added.  Which has the effect of always having a space at the end.</p>

<p>Simple.</p>",0
54453566,Is $params a reserved word in PHP 7.2?,"<p>I just made a migration and something got me astonished. I have this function inside a class:</p>

<pre><code>function selectEnums($name,$table,$filed, $params = '')
{
    $fieldName = $name. $this-&gt;name;
    if(is_array($params) &amp;&amp; sizeof($params) &gt; 0)
    {
        foreach($params as $var =&gt; $newValue)
        {
            $$var = $newValue;
        }
    }
    $res = $this-&gt;getEnums($table,$field, $this-&gt;db);
    $this-&gt;debug('res after getEnums');
    $this-&gt;debug($res);
    $params['options'] = array();
    foreach($res as $v)
    {
        $params['options'][] = $v;
    }
    .....
}
</code></pre>

<p>Now, I am getting: </p>

<blockquote>
  <p>PHP Fatal Error: Uncaught Error: Cannot use string offset as an array
  in ....</p>
</blockquote>

<p>at this line: <code>foreach($res as $v)</code></p>

<p>Thanks to the previous debug, I am 100% certain that <code>$res</code> is an array. Now, here is the tricky thing: If I change the variable from <code>$params</code> to <code>$parames</code>, it works just fine. What's even worst, this line works fine:  <code>if(is_array($params) &amp;&amp; sizeof($params) &gt; 0)</code> and the Fatal error is thrown at other line where there is nothing to do with <code>$params</code>.</p>

<p>So it's working with that change, buy WHY??? Any ideas? Maybe a php.ini config? A reserved word? I haven't find it on PHP docs.</p>

<p>Thanks</p>",php|parameters|reserved,"<p>The error message has nothing to do with $params and everything to do with $res, which you're passing as an array to foreach at that line. Evidently getEnums is returning a string, or at least not an array.</p>

<p>EDIT: Also, if this is meant to import the elements of $params into the symbol table (i.e., with the array keys becoming variable names):</p>

<pre><code>foreach($params as $var =&gt; $newValue)
        {
            $$var = $newValue;
        }
</code></pre>

<p>... it can be written more simply as:</p>

<pre><code>extract($params);
</code></pre>

<p><a href=""http://php.net/manual/en/function.extract.php"" rel=""nofollow noreferrer"">http://php.net/manual/en/function.extract.php</a></p>",0
