_id,title,content,total_like,tags
30170980,How to setup apache jackrabbit to use MySQL DB to store metadata and Filesystem to store files associated with that metadata,"<p>I want to configure Apache JackRabbit in such a way that all metadata should be stored in a MyQSL database and files associated with that metadata to be stored in the file system. </p>

<p>Use case: I will get some files in Pdf/Word format and the user will also send properties like author, topic etc..  for these files. I want to store those properties in a database and the actual file in the filesystem. </p>

<p>My question is: is it possible to do so?<br>
If yes: How do I configure it? </p>",0,java|mysql|weblogic11g|jackrabbit
30202836,How to add scope_identity() to UNION ALL syntax in SQL Server,"<p>I have a query for multiple inserts using <code>UNION ALL</code>. </p>

<p>How do I use <code>SELECT scope_identity();</code> for each row of data inserted?</p>

<pre><code>INSERT INTO MyTable (FirstCol, SecondCol)
   SELECT 'First', 1
   UNION ALL
   SELECT 'Second', 2
   UNION ALL
   SELECT 'Third', 3
   UNION ALL
   SELECT 'Fourth', 4
   UNION ALL
   SELECT 'Fifth', 5
</code></pre>",0,sql|sql-server
30203389,Save Default Image if none selected,"<p>I have a following situation:</p>

<p>The Image control to show the image and a button to open file dialog to choose it. Later that image would be saved to the database. But if user don't select any image how can I show a default image and save it in same way as if it was selected?</p>

<pre><code>byte[] dtImagem = null;

private void btnAddImg(object sender, RoutedEventArgs e)
{
    OpenFileDialog _fd = new OpenFileDialog();

    if (_fd.ShowDialog() == true)
    {
        try
        {
            _fs = new FileStream(_fd.FileName, FileMode.Open, FileAccess.Read);
            dtImagem = new byte[_fs.Length];
            _fs.Read(dadosImagem, 0, System.Convert.ToInt32(_fs.Length));
            _fs.Close();

            ImageSourceConverter imgs = new ImageSourceConverter();
            imgPessoa.SetValue(Image.SourceProperty, imgs.ConvertFromString(_fd.FileName.ToString()));
        }
        catch (Exception ex)
        {
            MessageBox.Show(""Erro :: "" + ex.Message);
        }                          
    }
    else
    {
        //Here is the problem how can i use dtImage and save it on database?
        var uri = new Uri(@""/AppWPF;component/Images/images.png"");
        ImageSourceConverter imgs = new ImageSourceConverter();
        imgPessoa.SetValue(Image.SourceProperty,imgs.ConvertFromString(uri.ToString()));
    }
}
</code></pre>

<p>My code for insertion to the database works, I just need a way to add a default image if user selects none</p>",0,c#|.net|sql-server|wpf
29902083,SQL count items outside of group by filter,"<p>Suppose I have the following table:</p>

<pre><code>Product A    Product B
Water        Soda
Water        Soda
Water        Eggs
Water        Apples
</code></pre>

<p>I'm trying to count the product combinations and the number of each product so that my results are:</p>

<pre><code>Product A   Product B   Combination Product A Count Product B Count
Water        Soda               2                 4               2
Water        Eggs               1                 4               1
Water        Apples             1                 4               1
</code></pre>

<p>Unfortunately, once I group the products, I can't get the individual counts. Any help would be appreciated.  </p>

<pre><code>SELECT [ProductA], [ProductB], Count(*) as ComboCount
FROM [ProductCombinations]
GROUP BY [ProductA], [ProductB]
Order by ComboCount Desc
</code></pre>",1,sql|sql-server|select|count|group-by
30099737,Default value for DATETIME field,"<p>I have a .mwb file that I want to forward engineer. It contains the query creating new table, which in turn creates a column with DATETIME type.</p>

<p>The part of this query that throws an error is:</p>

<pre><code>'last_send_at` DATETIME NULL DEFAULT '0000-00-00 00:00:00',
</code></pre>

<p>The error is:</p>

<pre><code>Executing SQL script in server
ERROR: Error 1067: Invalid default value for 'last_send_at'
</code></pre>

<p>What's wrong?</p>",2,mysql|mysql-workbench
29837531,Changing Permissions of Google Container Engine Cluster,"<p>I have been able to successfully create a Google Container Cluster in the developers console and have deployed my app to it. This all starts up fine, however I find that I can't connect to Cloud SQL, I get;</p>

<pre><code> ""Error: Handshake inactivity timeout""
</code></pre>

<p>After a bit of digging, I hadn't had any trouble connecting to the Database from App Engine or my local machine so I thought this was a little strange. It was then I noticed the cluster permissions...</p>

<p>When I select my cluster I see the following;</p>

<pre><code>  Permissions

User info           Disabled
Compute             Read Write
Storage             Read Only
Task queue          Disabled
BigQuery            Disabled
Cloud SQL           Disabled
Cloud Datastore     Disabled
Cloud Logging       Write Only
Cloud Platform      Disabled
</code></pre>

<p>I was really hoping to use both Cloud Storage and Cloud SQL in my Container Engine Nodes. I have allowed access to each of these API's in my project settings and my Cloud SQL instance is accepting connections from any IP (I've been running Node in a Managed VM on App Engine previously), so my thinking is that Google is Explicitly disabling these API's.</p>

<p>So my two part question is;</p>

<ul>
<li>Is there any way that I can modify these permissions?</li>
<li>Is there any good reason why these API's are disabled? (I assume there must be)</li>
</ul>

<p>Any help much appreciated!</p>",10,node.js|google-cloud-storage|google-cloud-sql|google-cloud-platform|google-kubernetes-engine
29746966,Get libpq runtime version (from libpqxx),"<p>In the libpqxx reference I can read sometimes stuff that is limited to the underlying libpq version (""Requires libpq version from PostgreSQL 7.4 or better. "") <strong><a href=""http://pqxx.org/devprojects/libpqxx/doc/4.0/html/Reference/a00023.html#ab63e45ad783d8adb8d4a9f03e03ef6ef"" rel=""nofollow"" title=""here"">like here</a></strong>.</p>

<p>Now the question(s): (1) How to obtain the libpq version used in the current program (using libpqxx)? (2) As far as I found out, libpqxx not necessarily need to be recompiled when moving forward to a new libpq release. Replacing the old libpq.dll covers (often) new technologies, like ssl compression in my case. That is why I am thinking the libpq version shall be received on runtime.</p>",1,postgresql|libpq|libpqxx
29958009,Repeat event on assigned day every week until specific date,"<p>When creating event I need to set event start and event end in datetime format (<code>0000-00-00 00:00:00</code>)
Then I have option to set weekly repeating of that event until specific date (<code>0000-00-00</code>)
But I can't insert repeating events properly in database. Here is what I have:</p>

<pre><code>$startDateTime = '2015-04-30 10:30:00';
$endDateTime = '2015-04-30 11:30:00';
$repeatEndDate = '2015-06-01';
$timestamp = strtotime($startDateTime);
$day_of_week = date('l', $timestamp);
$step  = 1;
$unit  = 'W';
$repeatStart = new DateTime($startDateTime);
$repeatEnd   = new DateTime($repeatEndDate);
$repeatStart-&gt;modify($day_of_week);  
$interval = new DateInterval(""P{$step}{$unit}"");
$period   = new DatePeriod($repeatStart, $interval, $repeatEnd);

foreach ($period as $key =&gt; $date ) {
    $repeatQuery = 'INSERT INTO event(start,end,status,repeats) VALUES (""'.$startDateTime.'"",""'.$endDateTime.'"",""'.$status.'"",""'.$repeatEndDate.'"")';
    $repeatResult = mysqli_query($db, $repeatQuery) or die (mysqli_error($db));
}
</code></pre>

<p>When I do <code>print_r($date);</code> it looks like this, no actual time just <code>00:00:00</code></p>

<pre><code>DateTime Object
(
    [date] =&gt; 2015-04-30 00:00:00
    [timezone_type] =&gt; 3
    [timezone] =&gt; Europe/Berlin
)
</code></pre>

<p>I know that I can't insert values like that but I don't know how to get correct values from objects.
So in this example I need to insert events that begin in 10:30:00 and end in 11:30:00(events always end same day) every Thursday starting at 2015-04-30 and ending at 2015-06-01. How can this be achieved?</p>

<p>Thank you</p>",18,php|mysql|date|datetime
29830076,MySQL subquery within self join or alternative?,"<p>I'm trying to form a query for our scholarship fundraising club that returns all ticket sales to a dinner event, as well as indicates whether or not each member who's purchased tickets is current on her dues (paid within last 365 days).  This will be used for a sign-in sheet that indicates how many tickets have been purchased and whether we need to ask them to renew their membership yet, update their contact info, etc.  I can return either ticket sales or active memberships, but I can't figure how to incorporate both queries into a single query so I won't have to use a PHP array.  Hopefully someone can help:</p>

<p>/* Here are excerpts from the relevant tables */</p>

<pre><code>+----------+  +--------------------+  +--------------------------+
| members  |  | store_transactions |  | store_product_categories |
+----------+  +--------------------+  +--------------------------+
| id       |  | id                 |  | id                       |
| last     |  | invoice            |  | category                 |
| first    |  | memberID           |  | officeID                 |
| spouse   |  | categoryID         |  | modified                 |
| lifetime |  | productID          |  +--------------------------+
| email    |  | name               |  
| phone    |  | price              |  +-------------+
| created  |  | quantity           |  | pmt_methods |
+----------+  | addedBy            |  +-------------+
              | pmtMethod          |  | id          |
              | created            |  | method      |
              +--------------------+  +-------------+
</code></pre>

<p>/* The 1st query returns all Muster ticket sales w/whom added (auto transaction via website or manual via club officer) and method of pmt (RSVP only, cash, etc) */</p>

<pre><code>SELECT member.last, member.first, member.spouse,  
       member.email, member.phone, 
       SUM(transaction.quantity) dinnerTix, 
       SUM(transaction.price * transaction.quantity) total, 
       IF (addedBy = '0' OR addedBy IS NULL, 'Website', 
           CONCAT_WS(' ', officer.first, officer.last)) 
           AS addedBy, method
FROM store_transactions AS transaction
LEFT JOIN members AS member ON transaction.memberID = member.id
LEFT JOIN store_product_categories ON transaction.categoryID =   
          store_product_categories.id 
LEFT JOIN pmt_methods ON transaction.pmtMethod = pmt_methods.id
LEFT JOIN members officer ON officer.id = addedBy
WHERE categoryID = '2' 
    AND year(transaction.created) = '2015' 
    AND (name LIKE '%member%') 
GROUP BY CONCAT(member.last, '_', member.first)
ORDER BY member.last, member.first;
</code></pre>

<p>The 1st query returns something like this:</p>

<pre><code>+------+-------+--------+-------------+--------------+---
| last | first | spouse | email       | phone        |
+------+-------+--------+-------------+--------------+---
|  Doe | John  | Jane   | abc@abc.com | 123-456-7890 |
+------+-------+--------+-------------+--------------+---

---+-----------+--------+-----------+--------+
   | dinnerTix | total  | addedBy   | method |
---+-----------+--------+-----------+--------+
   |     5     | 150.00 | President | cash   |
---+-----------+--------+-----------+--------+
</code></pre>

<p>/* This 2nd query returns all active members, adding 1 year to last membership purchase to show annual membership expiration */</p>

<pre><code>SELECT last, first,
    DATE_FORMAT(ADDDATE(store_transactions.created, INTERVAL 1 YEAR), 
        '%M %e, %Y') AS expires
FROM store_transactions
LEFT JOIN members ON store_transactions.memberID = members.id
WHERE store_transactions.created &gt;= SUBDATE(CURDATE(), INTERVAL 1     
    YEAR) AND categoryID = 1 OR lifetime = 'Y'
GROUP BY members.id
ORDER BY members.last, members.first;
</code></pre>

<p>The 2nd query returns something like this:</p>

<pre><code>+------+-------+-------------+
| last | first | expires     |
+------+-------+-------------+
|  Doe | John  | May 3, 2015 |
+------+-------+-------------+
</code></pre>

<p>I thought it would be simple to combine the two queries so the expiration date returned in the second query would be appended to each row of the first query result.  Unfortunately, I'm chasing my tail here, so any help would be greatly appreciated!  This was my first foray into self-joins and table aliases, so I'm trying to expand my horizons without breaking the site which has been operating smoothly for the last 8 years!  Thanks!!</p>",0,mysql|subquery|self-join
29877898,mysql C++ will not compile with make but will if g++ arguments put on cmd line,"<p>So i'm just trying to compile this sample mysql C++ program. It will compile and run just fine if i put <code>g++ -Wall -I/usr/include/cppconn -o mysql_test mysql_test.cpp -L/usr/lib -lmysqlcppconn</code>  on the command line. If i try to use make, it fails due to a undefined function call. What is wrong with the make script?</p>

<blockquote>
  <p>g++ -o prog mysql_test.o
  mysql_test.o: In function <code>main':
  mysql_test.cpp:(.text+0x3a): undefined reference to</code>get_driver_instance'
  collect2: error: ld returned 1 exit status
  make: *** [all] Error 1</p>
</blockquote>

<p>Here is the make file:</p>

<pre><code>CXX=g++
#CXXFLAGS=-g -std=c++0x -Wall -pedantic -lmysqlcppconn -lmysqlcppconn-static
CXXFLAGS=-g -std=c++0x -Wall -I/usr/include/cppconn -L/usr/lib -lmysqlcppconn
BIN=prog

SRC=$(wildcard *.cpp)
OBJ=$(SRC:%.cpp=%.o)

all: $(OBJ)
    $(CXX) -o $(BIN) $^

%.o: %.c
    $(CXX) $@ -c $&lt;

clean:
    rm -f *.o
    rm $(BIN)
</code></pre>

<p>Here is the cpp source:</p>

<pre><code>#include &lt;stdlib.h&gt;
#include &lt;iostream&gt;

/*
  Include directly the different
  headers from cppconn/ and mysql_driver.h + mysql_util.h
  (and mysql_connection.h). This will reduce your build time!
*/
#include &lt;mysql_connection.h&gt;

#include &lt;cppconn/driver.h&gt;
#include &lt;cppconn/exception.h&gt;
#include &lt;cppconn/resultset.h&gt;
#include &lt;cppconn/statement.h&gt;


using namespace std;

int main(void)
{
cout &lt;&lt; endl;
cout &lt;&lt; ""Running 'SELECT 'Hello World!' AS _message'..."" &lt;&lt; endl;

try {
  sql::Driver *driver;
  sql::Connection *con;
  sql::Statement *stmt;
  sql::ResultSet *res;

  /* Create a connection */
  driver = get_driver_instance();
  con = driver-&gt;connect(""tcp://127.0.0.1:3306"", ""root"", ""password"");
  /* Connect to the MySQL test database */
  con-&gt;setSchema(""mysql"");

  stmt = con-&gt;createStatement();
  res = stmt-&gt;executeQuery(""SELECT 'Hello World!' AS _message"");
  while (res-&gt;next()) {
    cout &lt;&lt; ""\t... MySQL replies: "";
    /* Access column data by alias or column name */
    cout &lt;&lt; res-&gt;getString(""_message"") &lt;&lt; endl;
    cout &lt;&lt; ""\t... MySQL says it again: "";
    /* Access column fata by numeric offset, 1 is the first column */
    cout &lt;&lt; res-&gt;getString(1) &lt;&lt; endl;
  }
  delete res;
  delete stmt;
  delete con;

} catch (sql::SQLException &amp;e) {
  cout &lt;&lt; ""# ERR: SQLException in "" &lt;&lt; __FILE__;
  cout &lt;&lt; ""("" &lt;&lt; __FUNCTION__ &lt;&lt; "") on line "" &lt;&lt; __LINE__ &lt;&lt; endl;
  cout &lt;&lt; ""# ERR: "" &lt;&lt; e.what();
  cout &lt;&lt; "" (MySQL error code: "" &lt;&lt; e.getErrorCode();
  cout &lt;&lt; "", SQLState: "" &lt;&lt; e.getSQLState() &lt;&lt; "" )"" &lt;&lt; endl;
}

cout &lt;&lt; endl;

return EXIT_SUCCESS;
}
</code></pre>

<p>Thanks for any help with this.</p>

<p>Here is the working make:</p>

<pre><code>CXX=g++
#CXXFLAGS=-g -std=c++0x -Wall -pedantic -lmysqlcppconn -lmysqlcppconn-static
CXXFLAGS=-g -std=c++0x -Wall -I/usr/include/cppconn
LDFLAGS=-L/usr/lib -lmysqlcppconn
BIN=prog

SRC=$(wildcard *.cpp)
OBJ=$(SRC:%.cpp=%.o)

all: $(OBJ)
    $(CXX) -o $(BIN) $(LDFLAGS) $^

%.o: %.c
    $(CXX) $@ -c $&lt;

clean:
    rm -f *.o
    rm $(BIN) 
</code></pre>",1,c++|mysql|c++11|makefile|g++
29978346,MySQL split on semicolon in a column to form a new row for each split,"<p>So I've been given legacy mysql db with data that looks like this:</p>

<pre><code>   DATE     |     DATA
2015-04-27  | sample; sample2; sample3
2015-04-28  | sample1; sample4
</code></pre>

<p>I'm looking to create a new table that would store date/data pairs like this.</p>

<pre><code>   DATE     |     DATA
2015-04-27  | sample
2015-04-27  | sample2
2015-04-27  | sample3
2015-04-28  | sample1
2015-04-28  | sample4
</code></pre>

<p>I've tried looking into user defined split functions, but they all seem to just want to split on a char and return an instance of the splits. I need to keep all instances to put in new table. </p>

<p>So using this: <a href=""http://blog.fedecarg.com/2009/02/22/mysql-split-string-function/"" rel=""nofollow"">http://blog.fedecarg.com/2009/02/22/mysql-split-string-function/</a></p>

<p>I created the split function and have tried altering the return:</p>

<pre><code>REPLACE(SUBSTRING(SUBSTRING_INDEX(list, ';'),
LENGTH(SUBSTRING_INDEX(list, ';', pos -1)) + 1),
delim, '')
</code></pre>

<p>But it requires a third parameter to specify which instance you want to return. Is there a way to return all instances of new rows with the date from left column?</p>",0,mysql|split|concat|group-concat
29989309,Single quotes prevent bindValue from replacing placeholder mark,"<p>When I prepare a statement with bindValue the placeholder mark is not replaced if it is surrounded with single quotes. This is problematic since in SQL strings are surrounded by single quotes to avoid keyword conflicts.
See my attachements with screenies of the content of the database once inserted with and once without single quotes.
I already reported a <a href=""https://bugreports.qt.io/browse/QTBUG-45915"" rel=""nofollow noreferrer"">bug</a>, but meanwhile I am not sure anymore if this is not just an encoding problem. Is it correct to use single quotes, i.e. should this work/ is this really a bug?</p>

<p>With quoutes
<img src=""https://i.stack.imgur.com/0OPBF.png"" alt=""enter image description here"">
Without quoutes
<img src=""https://i.stack.imgur.com/Cn00c.png"" alt=""enter image description here""></p>",0,c++|qt|sqlite|qt5|qtsql
30087453,MySQL data as source for PHP Graph?,"<p>I am trying to generate a php-graph, but not with fixed data, rather with dynamic data from mysql database. For the graph I use the code of KoolPHPSuite.</p>

<p>I have come pretty far, for someone with almost no experience with php coding. I only need the cherry on the cheesecake!</p>

<p>So to give you some context; this is my code that generates a Line-Graph.</p>

<pre><code>    &lt;?php 

     require ""KoolControls/KoolChart/koolchart.php"";

    $chart = new KoolChart(""chart"");
    $chart-&gt;scriptFolder=""KoolControls/KoolChart"";
    $chart-&gt;Width = 1000;
    $chart-&gt;Title-&gt;Text = ""Patient's Progression Week#"";
    $chart-&gt;PlotArea-&gt;XAxis-&gt;Title = ""Days"";
    $chart-&gt;PlotArea &gt;XAxis&gt;Set
(array(""Monday"",""Tuesday"",""Wednesday"",""Thursday"",""Friday""));
    $chart-&gt;PlotArea-&gt;YAxis-&gt;Title = ""Value"";
    $chart-&gt;PlotArea-&gt;YAxis-&gt;Set(array(""10"",""20"",""30""));
    $series = new LineSeries();
    $series-&gt; $ds;
    $series-&gt;ArrayData(array(10, 30, 25, 50, 40)); //Here you can see they y-coordinates per day. But I fixed these myself and as you have noticed, they aren't from my database.
    $series-&gt;ArrayData(array(10, 20, 30));
    $chart-&gt;PlotArea-&gt;AddSeries($series); 
?&gt;
&lt;html&gt;
    &lt;head&gt;
        &lt;title&gt;GRAPH&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;?php echo $chart-&gt;Render(); ?&gt;
    &lt;/body&gt;
&lt;/html&gt;
</code></pre>

<p>So you have read my comment after the $series line about the fixed data. This code displays a respectful line graph. However, it's just the beginning of my idea.</p>

<p>So I began to think, ""Ok, so if the format for the code is: 10, 30, 25, 50, 40 than I should write a php that 'SELECTS' the respectful data from a specific table from my database and displays the inputs just like that format, Than I should hook that output to a variable and put that variable into the place of X just like this: $series->ArrayData(array(X));</p>

<p>So I wrote this:</p>

<pre><code>&lt;?php
// Connect to MySQL
$link = mysql_connect( '', '', '');
if ( !$link ) {
  die( 'Could not connect: ' . mysql_error() );
}

// Select the data base
$db = mysql_select_db( 'WebApplication', $link );
if ( !$db ) {
  die ( 'Error: could not select database \'WebApplication\' : ' . mysql_error() );
}

// Fetch the data
$query = "" SELECT heartrate FROM info;"";
$result = mysql_query( $query );

// All good?
if ( !$result ) {
  // Nope
  $message  = 'Bad Query: ' . mysql_error() . ""\n"";
  $message .= 'Whole Query: ' . $query;
  die( $message );
}

$prefix = '';
echo ""\n"";
while ( $row = mysql_fetch_assoc( $result ) ) {
  echo $prefix . ""\n"";
  echo $row['heartrate'];
  $prefix = "",\n"";}
  echo ""\n"";

// Close the connection
mysql_close($link);
?&gt;
</code></pre>

<p>This generates the following:</p>

<p><strong>72.5, 64, 100, 93, 98, 84, 74, 96, 68, 57</strong></p>

<p>Which is the good format, but how do I make a variable that is hooked to the output (72.5, 64, 100, 93, 98, 84, 74, 96, 68, 57) and put that variable into the place of the X ?</p>

<p>I have tried some things here and there, for instance putting into the first code a line like this:</p>

<pre><code>$source_ds = ""db_connect.php"";
</code></pre>

<p>and substituting that X with $source_ds</p>

<p>But that just runs the php code..</p>

<p>Thank you very much! </p>

<p>-M</p>",0,php|mysql
29904957,Insert transaction if not exists in SQL Server,"<p>I want to insert in the table only if I do not have the specific column it is a track table with different titles and I want to add different titles with one procedure I did the try catch and I have problem in my where not exists condition, I don't know where to put the <code>values</code> term:</p>

<pre><code>BEGIN TRANSACTION [Tran1]
BEGIN TRY

INSERT INTO  [s15guest59].[dbo].[track](track_topic)
values(@par1)
   WHERE NOT EXISTS (SELECT track_topic FROM [track]
                     WHERE track_topic=@par1)
COMMIT TRANSACTION [Tran1]
END TRY
BEGIN CATCH
  ROLLBACK TRANSACTION [Tran1]
END CATCH  

GO
</code></pre>

<p>I don't know what to write in the middle for it to work </p>

<blockquote>
  <p>Msg 137, Level 15, State 2, Line 2<br>
  Must declare the scalar variable ""@par1"".</p>
</blockquote>",0,sql|sql-server|insert|transactions|procedures
30168736,sum values of the same month in Postgres,"<p>I'm trying the sum of values of the same month but the result is rows with the date and the values separated. </p>

<p>My code is</p>

<pre><code> select 
    case extract(month from date(m.data)) 
    when extract(month from current_date) then 'Current Month' 
    else to_char(m.data, 'TMMonth/YYYY') end as ""Date"", 
    sum(m.valor) as ""Result"" 
    from movimentacao m 
    group by m.data 
    order by m.data;
</code></pre>

<p>and my result is </p>

<pre><code>Apr/2015      | 150.75
Apr/2015      | 15.00
Current Month | 10.00
Current Month | 2.34
</code></pre>

<p>what I need is to group this values by month to sum works, but when I try to group by month the sql get error because I'm using the m.data in function and I need to group by from m.data.</p>",1,sql|postgresql|group-by
30167478,How to open .sqlitedb file in Visual Studio / Xamarin project?,"<p>I am working on a project that uses a .sqlitedb format to show a map in offline mode on a android phone. My filetype does not correlate to similar questions on SO and I can not open the file with how it is currently written that is the same as people that have the same problem but with the filetype .s3db, what am I doing wrong?</p>

<pre><code>using System;
using System.Collections.Generic;
using System.Collections;
using System.Linq;
using System.Text;
using SQLite;
using SQLitePCL;
using System.Data;


using Android.App;
using Android.Content;
using Android.OS;
using Android.Runtime;
using Android.Views;
using Android.Widget;
using Android.Graphics;
using System.Drawing;
using System.Runtime.Serialization.Formatters.Binary;
using System.IO;
using System.ComponentModel;

namespace MapplicationIII
{


public class TilesProvider : DataModel
{
    public SQLiteConnection db_con;
    public void Prepare() { }
    public sqlite3_stmt stmt;

public TilesProvider(String dbPath)
        {

            db_con = new SQLiteConnection(@""Data Source = [file path]\MapDataBase.sqlitedb;"");

            //DataTable tables = db_con.GetTableInfo&lt;db_con.GetTableInfo(string tiles_tb);

        }
}
}
</code></pre>

<p>I get the error:</p>

<p>SQLite.SQLiteException: Could not open database file</p>",1,c#|android-sqlite
29873091,Which unit is `distance` returning in this SQL query,"<p>I'm messing with some latitude/longitude related code in the Google Maps API which provides me with the following SQL statement</p>

<pre><code>SELECT id, (
  3959 * acos( cos( radians(37) ) *
  cos( radians( lat ) ) *
  cos( radians( lng ) - radians(-122) ) +
  sin( radians(37) ) * sin( radians( lat ) ) ) )
AS distance
FROM marker
HAVING distance &lt; 25
ORDER BY distance LIMIT 0 , 20;
</code></pre>

<p>Link to Google Maps example here: <a href=""https://developers.google.com/maps/articles/phpsqlsearch_v3"" rel=""nofollow"">https://developers.google.com/maps/articles/phpsqlsearch_v3</a></p>

<p>However the distance returned is over 7,000, while I know that all of my entries in the database are within 50 miles of each other. I've verified this using <a href=""http://www.movable-type.co.uk/scripts/latlong.html"" rel=""nofollow"">http://www.movable-type.co.uk/scripts/latlong.html</a> which also goes over the Haversine formula.</p>

<p>So I'm curious as to what I'm doing wrong with the provided query, which returns:</p>

<blockquote>
  <p>(IMAGE)
  <a href=""http://gyazo.com/ece247747616c5a412edd40c82c4b0ce"" rel=""nofollow"">http://gyazo.com/ece247747616c5a412edd40c82c4b0ce</a> -- (Failed to upload image, format not accepted???).</p>
</blockquote>

<p>All points are compared from</p>

<pre><code>long: 39.410870
lat:  -107.102180
</code></pre>

<p>Here's the full query:</p>

<pre><code>SELECT id,`user_long`,`user_lat`,
( 3959 * acos( cos( radians(39.410870) ) * cos( radians( `user_lat` ) ) * cos( radians( `user_long` ) - radians(-107.102180) ) + sin( radians(39.410870) ) * sin( radians( `user_lat` ) ) ) ) AS distance
FROM `accounts`
ORDER BY distance LIMIT 0 , 20
</code></pre>

<p>As you can see in the results, it's really strange, because even when compared to itself, the distance is > 7000.</p>

<pre><code>ID:    1
LONG: 39.410870
LAT:  -107.102180
DIST: 7923.067131806453
</code></pre>",1,mysql|haversine
29804401,ORA-25028: regular trigger body can not start with keyword COMPOUND,"<p>I was getting the mutating error for the trigger I created. Hence, I changed my trigger to use compound trigger. I have a compound trigger as below:</p>

<pre><code>CREATE OR REPLACE TRIGGER trig_chpt_update
AFTER UPDATE ON task_status
COMPOUND TRIGGER
/* Declaration Section */
task_id number(15);
ckpt_id number(15);
count_of_ckpt number(15);
record number(15);
ckpt_completed number(15):=0;
total_ckpt number(15):=0;

CURSOR cur_task_ckpt IS
SELECT c.taskid, c.ckpt_id, ts.status FROM checkpoint c INNER JOIN   
task_status ts ON c.ckpt_id=ts.ckpt_id;

AFTER EACH ROW IS
BEGIN
/* Get taskid of the checkpoint status being updated */
SELECT taskid INTO task_id FROM checkpoint WHERE ckpt_id=:new.ckpt_id;
END AFTER EACH ROW;

AFTER EACH STATEMENT IS
BEGIN
/* Get number of checkpoints for the task */
--SELECT COUNT(*) INTO count_of_ckpt FROM checkpoint WHERE taskid=task_id;

/* Checking the assumption */
OPEN cur_task_ckpt;
FOR record IN cur_task_ckpt
LOOP
  IF record.taskid=task_id THEN
     total_ckpt:=total_ckpt+1;
     IF record.status=1 THEN
        ckpt_completed:=ckpt_completed+1;
     END IF;
  END IF;
END LOOP;
DBMS_OUTPUT.PUT_LINE(ckpt_completed||' of '||total_ckpt||' checkpoints associated with Task ID '||task_id||'have been completed.');
 CLOSE cur_task_ckpt;
END AFTER STATEMENT;

END trig_chpt_update;
</code></pre>

<p>But when I execute it, I get an error as <code>ORA-25028: regular trigger body can not start with keyword COMPOUND</code> . Please let me know where am I going wrong.</p>",1,oracle|plsql
30117684,How can I optimize DAL web2py query?,"<pre><code>result = db((db.company.location.belongs(locations)) &amp;
            (db.company.emp_id.belongs(employee_ids)) &amp;
            (db.company.type.belongs(types))).select()
</code></pre>

<p><code>locations</code> is list of location ids</p>

<p><code>employee_ids</code> is list of employee ids</p>

<p><code>types = ['General', 'office', 'e-commerce']</code></p>

<p>This query return 60,000 records and takes 1 minute to complete. How can I optimize it or split it?</p>",0,python|mysql|web2py|database-abstraction
29825436,PHP: foreach loop with array_merge to create json objects,"<p>I'm new to php but i really like like it so far!
Now i stumbled over a problem with <code>array_merge</code>.</p>

<p>This is my code, it simply grabs each table specified in my database then makes it to a big json file.: </p>

<pre><code>  $tables = array(""buildings"", ""medical"", ""other"", ""tools"", ""traps"", ""weapons""); 

    foreach ($tables as $table) {

        // Get tables from database
        $sth = $db-&gt;query(""SELECT * FROM $table"");
        $result = $sth-&gt;fetchAll();

        // Merge arrays together
        if ($arr === null) {
            //echo ""its 0 &lt;br/&gt; "";
            $arr = array( ""$table"" =&gt; $result );
        } else {
            //echo ""more than 0 &lt;br/&gt; "";
            $arr2 = array( ""$table"" =&gt; $result );
            $merge = array_merge($arr, $arr2);
        }

    } //End loop

    echo $merge;
</code></pre>

<p>So far It's working somehow, I manage to get the first table ""buildings"" and the last table ""weapons"" to be displayed the way i want perfectly! </p>

<p>But I don't understand why it jumps over the other ones..
I believe it has something to do with <code>$arr2</code> and that i need to specify a unique array for each of the tables. But how can i achieve this? Is this the way to go or is there a more efficient way to achieve this?
Thanks!</p>",0,php|mysql|arrays|json|foreach
29848758,To use or not to use identity on a lookup table,"<p>In SQL Server I have the following lookup table that holds degree levels:</p>

<pre><code>create table dbo.DegreeLevel 
( 
    Id int identity not null
       constraint PK_DegreeLevel_Id primary key clustered (Id),
    Name nvarchar (80) not null
       constraint UQ_DegreeLevel_Name unique (Name)
)
</code></pre>

<p>Should I use identity on the <code>ID</code>?</p>

<p>When should I use identity or a simple int in a lookup table?</p>",3,sql-server
30139227,C# ArrayList group using Linq,"<p>I am currently stuck at this place. I need some help.</p>

<p><strong>Say for example this is the scenario input.</strong></p>

<p>Input : Mo-Fr 06:00-22:00, Sa 07:00-22:00, So 08:00-22:00</p>

<p>Formetet to database Table:</p>

<p><strong>Table name : (Opening)</strong></p>

<ul>
<li><p><strong>Day | DayNumber | Number | Open | Close</strong></p></li>
<li><p>Mon, 1,  0:00, 22:00</p></li>
<li>Tue, 2, 0:00, 22:00</li>
<li>Wed, 3, 0:00, 22:00</li>
<li>Thu, 4, 0:00, 22:00</li>
<li>Fri, 5, 0:00, 22:00</li>
<li>Sat, 6, 7:00, 24:00</li>
<li>Sun, 0, 8:00, 24:00</li>
</ul>

<p><strong>I would like to group by day range from this table</strong></p>

<p>The expected output will be like :</p>

<pre><code>""periods"": [
        {
          ""open"": {
            ""day"": 1,
            ""time"": ""06:00""
          },
          ""close"": {
            ""day"": 5,
            ""time"": ""22:00""
          }
        },
        {
          ""open"": {
            ""day"": 6,
            ""time"": ""07:00""
          },
          ""close"": {
            ""day"": 6,
            ""time"": ""24:00""
          }
        },
        {
          ""open"": {
            ""day"": 0,
            ""time"": ""08:00""
          },
          ""close"": {
            ""day"": 0,
            ""time"": ""24:00""
          }
        }
      ]
</code></pre>",-1,c#|arrays|arraylist|group-by|sql-order-by
29871461,Return existing primary key ID upon constraint failure in sqlite3,"<p>I have <code>UNIQUE</code> constraint on two columns of a table in SQLite.</p>

<p>If I insert a record with a duplicate on these two columns into the table, I will get an exception (<code>sqlite3.IntegrityError</code>).</p>

<p>Is it possible to retrieve the primary key ID of this record upon such a violation, without doing an additional <code>SELECT</code>?</p>",0,python|python-3.x|sqlite|unique-constraint
30189472,T-SQL: query xml with namespace,"<p>I've done some basic xml work in T-SQL before, but literally 'basic'.</p>

<p>Now come across some more complex xml and I am completely flummoxed as to where to begin.</p>

<pre><code>&lt;?xml version=""1.0"" encoding=""UTF-8""?&gt;
&lt;Calculation:scenario xmlns:Calculation=""http://www.sap.com/ndb/BiModelCalculation.ecore"" schemaVersion=""2.3"" id=""ADR2"" applyPrivilegeType=""ANALYTIC_PRIVILEGE"" checkAnalyticPrivileges=""true"" defaultClient=""$$client$$"" defaultLanguage=""$$language$$"" visibility=""internal"" calculationScenarioType=""TREE_BASED"" dataCategory=""DIMENSION"" enforceSqlExecution=""false"" executionSemantic=""UNDEFINED"" outputViewType=""Projection""&gt;
&lt;origin/&gt;
&lt;descriptions defaultDescription=""ADR2""/&gt;
&lt;metadata activatedAt=""2015-04-22 16:13:29.0"" changedAt=""2015-04-22 21:12:59.193""/&gt;
&lt;localVariables/&gt;
&lt;variableMappings/&gt;
&lt;dataSources&gt;
    &lt;DataSource id=""ADR2"" ....
</code></pre>

<p>All my attempts just bring back <code>&lt;blank&gt;</code>
I am guessing the issue is the semicolon ""Calculation:scenario"" and  ""xmlns:Calculation""
From googling so far, this is a 'namespace'.</p>

<p>However, in all examples I have found of querying xml with namespaces, the source xml has a property such as : xmlns:ns=""uri""</p>

<p>They then use this in the query :  "";WITH XMLNAMESPACES ('uri' as ns)""</p>

<p>My xml does not have this ns attribute.</p>

<p>Could anyone give me any pointers as to where to begin, or some basic tutorial that includes my scenario ?</p>

<p>Many Thanks</p>",1,xml|tsql
30009879,AngularJS $http.get not retrieving the backend data,"<p>i am new to the ""Angularjs and Nodejs"" combination and i am trying to make a simple crud app. The problem is, when i use $http.get in angular, it doesnt go to the backend.</p>

<p>Here are my codes: </p>

<p>server.js (nodejs)</p>

<pre><code>var connection = util.getDBConnection();
app.use(express.static(__dirname + ""/public""));
app.use(bodyParser.json());
//routes = require('./routes/routes')(app, connection);

app.get('/', function(req, res) {
console.log(""Backend"");
        connection.query(""SELECT * FROM user_info;"", function(err, rows){
            if(err){
                res.redirect('/error');
                console.log(""Error in the database: "" + err);
            } 
            res.end(JSON.stringify(rows));
            console.log(""Connected to the Database!"");
        });
    });
</code></pre>

<p>angularmodule.js</p>

<pre><code>var app = angular.module('two_way', ['ngRoute']);
app.controller('two_way_control', function($scope, $http){
    $scope.message = ""Hello from controller"";
    $http.get('/').success(function(data){
        console.log(""http get"");
        console.log(data);
        $scope.profile_pictures = data;
    });
});
</code></pre>

<p>and console.log(data) returns the whole index.html</p>

<p>index.html</p>

<pre><code>&lt;body&gt;
    &lt;div id=""container"" ng-app=""two_way"" ng-controller=""two_way_control""&gt;
        &lt;div class=""row"" ng-repeat=""data in profile_pictures""&gt;
            {{message}}
            &lt;div class="".col-sm-6 .col-md-5 .col-lg-6""&gt;
                &lt;h4&gt;User Say's&lt;/h4&gt;&lt;hr&gt;
                &lt;p&gt;
                    This is a Demo feed. It is developed to demonstrate Two way data binding.
                &lt;/p&gt;
                {{ data.profile_picture }}
                &lt;img src=""{{data.profile_picture}}""&gt;
            &lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/body&gt;
</code></pre>

<p>But this code returns the mysql data in json format:</p>

<pre><code>app.get('/load', function(req, res) {
console.log(""Backend"");
        connection.query(""SELECT * FROM user_info;"", function(err, rows){
            if(err){
                res.redirect('/error');
                console.log(""Error in the database: "" + err);
            } 
            res.end(JSON.stringify(rows));
            console.log(""Connected to the Database!"");
        });
    });
</code></pre>

<p>Please help. Thanks in advance and sorry for the bad english.</p>",3,javascript|mysql|angularjs|node.js
30154628,"WHERE clause with INSERT statement, ""Incorrect Syntax"" at the WHERE, and IF NOT EXISTS running regardless of if record exists","<p>I have this INSERT query:</p>

<pre><code>INSERT INTO Appointments (StaffID, CustomerID, TimeSlot, AppDate) 
VALUES (1, 11, 1, DATEADD(day, 1, GETDATE()))
WHERE NOT EXISTS 
    (SELECT * FROM Appointments 
     WHERE StaffID = 1 AND CustomerID = 11 AND TimeSlot = 1 AND AppDate = DATEADD(day, 1, GETDATE()));
</code></pre>

<p>Yet it says ""Incorrect syntax near the keyword 'WHERE'"" </p>

<p>This is very basic error, but have no clue whats up. </p>

<p>I have also tried using IF NOT EXISTS, which gives no syntax errors, but also doesn't work, preforming the insert even though the record with the values does already exist:</p>

<pre><code>IF NOT EXISTS 
    (
        SELECT * FROM Appointments 
        WHERE StaffID = 1 AND CustomerID = 11 AND TimeSlot = 1 AND AppDate = DATEADD(day, 1, GETDATE())
    )
    BEGIN
        INSERT INTO Appointments (StaffID, CustomerID, TimeSlot, AppDate) 
        VALUES (1, 11, 1, DATEADD(day, 1, GETDATE()))
END;
</code></pre>

<p>The record with the values 1, 11, 1, and tomorrow does 100% already exist, yet inserts it again. </p>",2,sql|sql-server-2008|where|sql-insert
29953033,HSQLDB + insert data + error statement,"<p>I have an error message that I can not solve. I want to log the data from a JFrame (textefield) in a table</p>

<p>I use Eclipse + HSQLDB. I get my data from textefield in a JFrame. I give my récupre correctly but I get an error statement Does not generate a result set.</p>

<p>My table: Sales (ID is auto-increment integer, string quantity, total string)</p>

<pre><code>package Fabriques;

import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;

import Donnees.MyException;
import Donnees.Ventes;

public class FabVentes {

    private static FabVentes fabVen;
    private FabVentes(){}


    public static FabVentes getInstance(){
        if(FabVentes.fabVen==null) FabVentes.fabVen=new FabVentes();
        return FabVentes.fabVen;
    }

    /*requetes select*/
    private String insertVentes = ""insert into ventes values (?,?,?)"";

    private PreparedStatement prepinsertVentes;

    public void demarrerConnexion(Connection connexionEnCours) throws SQLException {
        this.prepinsertVentes=connexionEnCours.prepareStatement(this.insertVentes);
    }

    @SuppressWarnings(""resource"") 
    public Ventes ajouter(Integer ID,final String Quantite,final String Total) throws SQLException{
        this.prepinsertVentes.setString(1,null);
        this.prepinsertVentes.setString(2,Quantite);
        System.out.println(Quantite); //-&gt; I Get my string
        this.prepinsertVentes.setString(3,Total);
        System.out.println(Total); //-&gt; I Get my string
        ResultSet resultat=this.prepinsertVentes.executeQuery();

        Ventes v=null;
        while(resultat.next())
            v=new Ventes(null,resultat.getString(2),resultat.getString(3));
        return v;
    }
}
</code></pre>

<p>The error:</p>

<pre><code>java.sql.SQLException: statement does not generate a result set
    at org.hsqldb.jdbc.JDBCUtil.sqlException(Unknown Source)
    at org.hsqldb.jdbc.JDBCUtil.sqlException(Unknown Source)
    at org.hsqldb.jdbc.JDBCUtil.sqlException(Unknown Source)
    at org.hsqldb.jdbc.JDBCPreparedStatement.checkStatementType(Unknown Source)
    at org.hsqldb.jdbc.JDBCPreparedStatement.executeQuery(Unknown Source)
    at Fabriques.FabVentes.ajouter(FabVentes.java:38)
    at Metier.Metier.ajouter(Metier.java:12)
    at IHM.JPanelVentes$1.mouseClicked(Fenetre.java:262)
    at java.awt.AWTEventMulticaster.mouseClicked(Unknown Source)
    at java.awt.Component.processMouseEvent(Unknown Source)
    at javax.swing.JComponent.processMouseEvent(Unknown Source)
    at java.awt.Component.processEvent(Unknown Source)
    at java.awt.Container.processEvent(Unknown Source)
    at java.awt.Component.dispatchEventImpl(Unknown Source)
    at java.awt.Container.dispatchEventImpl(Unknown Source)
    at java.awt.Component.dispatchEvent(Unknown Source)
    at java.awt.LightweightDispatcher.retargetMouseEvent(Unknown Source)
    at java.awt.LightweightDispatcher.processMouseEvent(Unknown Source)
    at java.awt.LightweightDispatcher.dispatchEvent(Unknown Source)
    at java.awt.Container.dispatchEventImpl(Unknown Source)
    at java.awt.Window.dispatchEventImpl(Unknown Source)
    at java.awt.Component.dispatchEvent(Unknown Source)
    at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
    at java.awt.EventQueue.access$500(Unknown Source)
    at java.awt.EventQueue$3.run(Unknown Source)
    at java.awt.EventQueue$3.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
    at java.awt.EventQueue$4.run(Unknown Source)
    at java.awt.EventQueue$4.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
    at java.awt.EventQueue.dispatchEvent(Unknown Source)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.run(Unknown Source)
Caused by: org.hsqldb.HsqlException: statement does not generate a result set
    at org.hsqldb.error.Error.error(Unknown Source)
    at org.hsqldb.error.Error.error(Unknown Source)
    ... 38 more
</code></pre>

<p>Thanks for your help,</p>

<p>Laure</p>",0,java|swing|hsqldb
29987521,How to update the database automatically after session is expired without refreshing on my page,"<p>This code you need to refresh or click the page before it will go to index page and before it will update the database after the session is expired.</p>

<p>How can I make it automatically that after session is expired it will update the database so the user active will be 0 without refreshing or clicking on page?</p>

<pre><code>$idletime = 3600; //after 1hr the user gets logged out

if (time() - $_SESSION['timestamp'] &gt;= $idletime){
    $online = ""UPDATE users SET active = 0 WHERE username = '"".$_SESSION['username'].""'"";
    mysqli_query($con, $online);
    session_destroy();
    header(""Location:index.php"");
} else {
    $_SESSION['timestamp'] = time();
}
</code></pre>",3,php|mysql|session
30024990,mysql convert float to double,"<p>It is necessary to change the type of a table field (with data).
From Float type to Double type.
The code that does this:</p>

<pre><code>ALTER TABLE `my_table`
CHANGE COLUMN `my_value` `my_value` 
DOUBLE NULL DEFAULT NULL AFTER `id`;
</code></pre>

<p>But I got a problem:
All fractional numbers soured:
Old value -> New value: </p>

<pre><code>129.8 -&gt; 129.8000030517578
117.9 -&gt; 117.9000015258789
99.2 -&gt; 99.19999694824219
</code></pre>

<p>How to change the field type without data corruption?</p>",2,mysql|double|alter-table
29803847,"How to download, compile & install ONLY the libpq source on a server that DOES NOT have PostgreSQL installed","<p>How can I download, compile, make &amp; install ONLY the libpq source on a server (Ubuntu) that DOES NOT have PostgreSQL installed?</p>

<p>I have found the libpq source <a href=""https://github.com/postgres/postgres/tree/master/src/interfaces/libpq"" rel=""nofollow noreferrer"">here</a>. However it does NOT seem to be separable from the entire PostgreSQL. Thanks in advance.</p>

<p>I DO NOT want to install the entire PostgreSQL. I want to use libpq as a C interface to PostgreSQL on a DIFFERENT server (also Ubuntu) that DOES have it installed. </p>

<p>I also found <a href=""https://stackoverflow.com/a/1244813/601770"">this old link</a> which indicates that the above is POSSIBLE but not HOW to do it.</p>",1,postgresql|install|libpq
29759750,Ransack Searching Full Name with White Spaces,"<p>I have a user model with the fields </p>

<pre><code>:first_name 
:last_name
</code></pre>

<p>I wanna a single search box that says full_name where the user can search for </p>

<pre><code>John Doe 
</code></pre>

<p>in my user.rb</p>

<pre><code>ransacker :full_name do |parent|
  Arel::Nodes::NamedFunction.new('concat_ws', [' ',    parent.table[:first_name], parent.table[:last_name]])
end
</code></pre>

<p>in my views i have </p>

<pre><code>= f.text_field :full_name_cont, placeholder: 'full name'
</code></pre>

<p>however when a user creates a name with a space in front of it</p>

<pre><code> first_name: 'John'
 last_name: ' Doe'
</code></pre>

<p>and i search for </p>

<pre><code> 'John Doe'
 - no results
</code></pre>

<p>but if i search for </p>

<pre><code>  'John  Doe' (two spaces in between)
   - 'John Doe'
</code></pre>

<p>How can i prevent this from happening</p>

<p>I know ideally i would want to sanitize the data before creating by stripping white spaces....but what would be the most unobtrusive way of getting around this bug.</p>

<p>Thanks</p>",1,mysql|ruby-on-rails|ruby-on-rails-4|ransack
29792710,Filtering postgres data using bytea column,"<p>I have a java application that inserts stock items as they are received from the supplier. I capture the bar-code image of the the product along with other information(name,price &amp; so on..). I'm saving the bar-code image inform of bytea in PostgreSQL database. Since I do not yet have a bar-code scanner, I'm taking a photo of the bar-code image and inserting as follows.</p>

<pre><code>  //code extract
    File imgFile = new File(barcodeImage.jpg);
    FileInputStream fin=new FileInputStream(imgFile);
    pstmt2.setBinaryStream(19, fin,  (int) imgFile.length());  //inserts      into barcodeImage - bytea column
</code></pre>

<p>I now want to retrive the product from the database using the barcode image i had saved. something like :</p>

<pre><code>         select * from stock_item where barcodeImage=***
</code></pre>

<p>How do I go about to filter the data using the barcodeImage(bytea) column? Just like how the barcode scanners work.</p>",1,java|postgresql|barcode|bytea
30109179,sqlite version of vlookup,"<p>is there a way in sqlite to do the equivalent of a vlookup? I'm trying to do something like this:
Master table:
ValueA | ValueB | concatValueA&amp;ValueB</p>

<p>Mapping table:
concatValueA&amp;ValueB | mapped Value</p>

<p>final table:
ValueA | ValueB | concatValueA&amp;ValueB | mapped Value</p>

<p>In Excel, I would just do a vlookup.</p>

<p>Is there a way to add the mapped value to a table in sqlite?</p>

<p>I tried this:</p>

<pre><code>UPDATE Master Set ""mapped Value"" = (select mapping.""mapped Value"" from Master left join mapping on Master.concat = mapping.concat)
</code></pre>

<p>But this fills sets the mapped Value column entirely equal to the first value from the select statement, but I would like the values to be different</p>",0,sqlite|vlookup
30194324,Hibernate criteria by latitude and longitude,"<p>Having a MySQL table with more than 20 millions of rows, there is some way with Hibernate to build a criteria in order to get nearest rows given a latitude and longitude?</p>

<p>Using <code>Criteria</code> would be great because I need to use more filters (price, category, etc).</p>

<p>Finally, it's posible get the rows ordered by distance? Or there are too much rows?</p>",6,java|mysql|hibernate|latitude-longitude
29941266,How to count more than one distinct columns in linq to sql?,"<p>I am struggling with Linq, hence it is a lame question but still ..
I have a table with following 4 columns</p>

<pre><code>Pid   SKU    colorid   sizeid
1     'A65102'    38       2
2     'A65102'    38       4
3     'A65102'    38       18
</code></pre>

<p>I have to get how many different color and size option are available for this.</p>

<p>In sql, I use to do it by:</p>

<pre><code>select count(distinct [sizeid]) ,count(distinct [colors]) 
from [item_master] 
where sku = 'A65102' 
</code></pre>

<p>But in Linq, I can get all the values by </p>

<pre><code>var dd = (from im in db.item_masters 
          where im.sku.Contains(""A65102"") 
          select new {im.sizeid,im.colors });
</code></pre>

<p>But how can I get the count of distinct values for both in single query?</p>",0,c#|sql-server|linq
29787012,JDBC ResultSet Data to HashMap,"<p>I am not able to set the data from ResultSet to HashMap.</p>

<p>My Query is returning 4 records, but HashMap is holding Last 2 records only. However, in the loop I am able to print 4 records data.
Can any one help?</p>

<p>Here is my code:</p>

<pre><code>workOrderMap=new HashMap&lt;String, Integer&gt;();

Statement statement = serviceconnection.createStatement();
ResultSet rs = statement.executeQuery(""SELECT OPERATION,WORKORDERID FROM History WHERE OPERATION='CREATE'OR OPERATION='UPDATE'"");
workOrderMap=new HashMap&lt;String, Integer&gt;();

while (rs.next()) {
    workOrderMap.put(rs.getString(""OPERATION""), rs.getInt(""WORKORDERID""));
    System.out.println(rs.getString(""OPERATION"")); // loops 4 times
}

System.out.println(""List of Workorder id's"" + workOrderMap.size()); // prints 2
</code></pre>",1,java|mysql|jakarta-ee|jdbc|jdbctemplate
29925696,Laravel/Eloquent/DB Query - Join when is null and not null,"<p>I'm trying this code without any success:</p>

<pre><code>MyModel::join('countries', 'countries.id', '=', 'messages.from_country_id')
         -&gt;join('users', 'users.id', '=', 'messages.user_id')
         -&gt;where('messages.id', '=', $id)
         -&gt;select('users.name', 'messages.from_name', 'messages.from_email', 'messages.content', 'countries.code AS c_code', 'countries.name AS c_name')-&gt;firstOrFail();
</code></pre>

<p>But in some cases <code>messages.user_id</code> is null. What i want is to retrieve all messages, and each <code>message</code> with the correct <code>users.name</code>(when it's available).</p>",1,php|mysql|laravel|join|eloquent
30132118,WHMCS Hook for Client Downloads?,"<p>WHMCS has a feature for providing downloads to clients.  The feature can be found in their admin area at <code>/admin/supportdownloads.php</code></p>

<p>Is there any action hook for when files are uploaded via the admin area?  The only related hook I can find is for when files are downloaded.</p>

<p>What I want do to is add a hook so any file I upload is added to the list of Associated Downloads for each of my products.  With all the hook options they have, I'm surprised I can't find one for this...</p>",2,php|mysql|whmcs
30119219,Using sqlite3_column_text() to fetch interger value,"<p>I have a table with <code>TEXT</code>, <code>INTEGER</code>, <code>REAL</code> and other data types.</p>

<p>I wrote a generic sql function to read results for all queries using <code>sqlite3_column_text()</code> like so:</p>

<p><code>char *dataAsChar = (char *) sqlite3_column_text(compiledStatement, ii);</code></p>

<p>Although I should be using <code>sqlite3_column_int</code> etc. to read the numeric values, the above code seems to work for me. I get the number values as string which I later convert to int using <code>[*numberAsString* intValue]</code>.</p>

<p>Since I am using a generic function to read all my db values, this is very convenient for me. <strong>But is there something that can go wrong with my code?</strong> </p>

<p>I could use <code>sqlite3_column_type</code> for each column to determine the type and use appropriate function. Am I correct in assuming that <code>sqlite3_column_text</code> basically returns the column value in <code>TEXT</code> format and does not necessarily need the value itself for be <code>TEXT</code>?</p>

<p>The only situation where I can see this implementation failing is with <code>BLOB</code> data type.</p>",0,ios|sql|objective-c|sqlite
29953234,How would I change this query to fit into Laravel's Query Builder?,"<p>I've tried creating this query in Laravel and still can't get it to work with a query builder. It's giving me syntax errors yet I can run it in the tables and it run smooth.</p>

<p><strong>Query trying to run:</strong></p>

<pre><code>select A.*, sum(RawAmt) as AmountOwed from (select Login, PatID,
if(length(ApptID) &gt; 0, ApptID, VisitID) as VisitID,
ServiceDate,
TotalCharge,
InsurancePaid,
PrevPaid,
WriteOff,
Refund,
MiscDebit,
AmountOwed as RawAmt,
ApptTime,
ApptDate,
Physician,
isCopay,
HLocation from MDPay_AcctHist where Login='demo') A
group by PatID, VisitID
</code></pre>

<p>It's giving me a syntax issue when trying to do this with DB::raw statements in DB::select and DB::where;</p>

<p>Any help on trying to write this to meet laravels specs would be helpful.</p>",0,php|mysql|laravel|eloquent
30209010,Create foreign key on table with large size,"<p>When I use the following SQL Server command to add foreign key </p>

<pre><code>ALTER TABLE [TABLE_A]
WITH CHECK ADD CONSTRAINT [FK_TABLE_A_TABLE_B]
FOREIGN KEY ([COLUMN_A]) REFERENCES [TABLE_B] ([COLUMN_A])
</code></pre>

<p>it will run very slow on tables with large size. Is there any faster/optimized way to add foreign key on table with large size? </p>

<p>Thanks!</p>",3,sql-server|sql-server-2012
29971788,Mongodb: Finding and updating object property from array,"<p>I have a collection with multiple documents which follow this structure:</p>

<pre><code>{
    ""_id"" : {
        ""oid"" : XXX
    },
    ""name"" : ""Name"",
    ""videos"" [
        {
          ""id"" : 1,
          ""thumbnail"" : ""thumbnail.jpg"",
          ""name"" : ""Name here""
        },
        {
          ""id"" : 2,
          ""thumbnail"" : ""thumbnail.jpg"",
          ""name"" : ""Name here""
        },
        {
          ""id"" : 3,
          ""thumbnail"" : ""thumbnail.jpg"",
          ""name"" : ""Name here""
        }
    ]
}
</code></pre>

<p>I want to find and update the a thumbnail of a video, of which I only know the id, but not which document it is in.</p>

<p>This is what I've tried so far, but it's not working properly. All the examples I found relied on knowing the document id, and the array position of the object to update. I also found that doing a query like this found the document okay, but set the whole document as the new thumbnail!</p>

<pre><code>db.collection(COLLECTION-NAME, function(err, collection){
    collection.update(
      { 'videos.id' : 2 },
      { $set: { thumbnail: ""newThumbnail.jpg"" } },
      function(err, result){
        if (!err){
          console.log('saved', result)
        } else {
          console.log('error', err);
        }
      }
    );
  });
</code></pre>",2,mongodb|mongodb-query|nosql
29782159,How to add summary rows to income statements in postgresql,"<p>Income statement table has structure:</p>

<pre><code>sgroup char(30),
account char(10),
jan numeric(12,2),
feb numeric(12,2)
</code></pre>

<p>and has values:</p>

<pre><code>SGroup   Account  Jan     Feb

Sales   311      100     200
Sales   312       20      30
..
Other   410     3333      44
Other   411      333     344
...
</code></pre>

<p>How convert this table to have header and subtotals for each group:</p>

<pre><code>Caption       Jan     Feb

Sales
 311          100     200
 312           20      30
Sales Total   120     230

Other
 410         3333     44
 411          333    344
Other total  3666    388
...          ...     ...
Grand Total  ...     ...
</code></pre>

<p>Caption column should contain group header, account numbers and group total for each group.
After total there should be empty row.
After that that there should be next group etc.
In the end there should be a ""Grand Total"" row containing the sum of all rows.</p>

<p>Using Postgres 9.1.2 in Debian.<br>
Mono C# ASP.NET MVC application running in Debian. If it's more reasonable, this conversion can done in MVC controller also.</p>",0,sql|asp.net-mvc|postgresql|aggregate|postgresql-9.1
29807453,Solr DataimportHandler with MySQL and URLDataSource as JSON,"<p>I have this data-config.xml</p>

<pre><code>&lt;dataConfig&gt;
&lt;dataSource name=""sql""  type=""JdbcDataSource""
              driver=""com.mysql.jdbc.Driver""
              url=""jdbc:mysql://server/db""
              user=""user""
              password=""pwd""/&gt;
    &lt;dataSource name=""web"" type=""URLDataSource"" connectionTimeout=""5000"" readTimeout=""10000"" /&gt;

&lt;document name=""doc""&gt;
    &lt;entity name=""artikel"" datasource=""sql"" query=""select a.x1,a.x2,b.y1,b.y2 from tab1 a, tab2 b WHERE a.id&gt;0 and a.x1=b.y1""
              deltaImportQuery=""select a.x1,a.x2,b.y1,b.y2 from tab1 a, tab2 b WHERE a.id&gt;0 and a.x1=b.y1 id='${dataimporter.delta.job_jobs_id}' ""
              deltaQuery=""select select a.x1,a.x2,b.y1,b.y2 from tab1 a, tab2 b WHERE a.id&gt;0 and a.x1=b.y1 from tab1 a, tab2 b b WHERE timestamp &gt; '${dataimporter.last_index_time}' and a.shopwgr=b.shopwgr""&gt;

        &lt;field column=""x1"" name=""id"" /&gt;
        &lt;field column=""x2"" name=""bezeich"" /&gt;
        &lt;field column=""y1"" name=""beschr"" /&gt;
        &lt;field column=""y2"" name=""keynum"" /&gt;

        &lt;entity name=""artikeljson"" processor=""XPathEntityProcessor"" forEach=""/""  url=""http://xxx.web.de/dataimport.php"" dataSource=""web""&gt;
            &lt;field column=""xx1"" name=""xx2"" xpath =""/xx2"" /&gt;
    &lt;/entity&gt;
   &lt;/entity&gt;
&lt;/document&gt;
</code></pre>

<p></p>

<p>The Request from dataimport.php returns this JSON:</p>

<pre><code>Array (
[0] =&gt; Array (
        [xx1] =&gt; Text1
        [xx2] =&gt; Text2 
        [keynum] =&gt; 10003
        [xx3] =&gt; text3
        [xx4] =&gt; Array
            (
                [0] =&gt; http://bildurl1.de/832500+1427507417.jpg
                [1] =&gt; http://bildurl1.de/07418.jpg
            )

        [xx5] =&gt; 18.89
        [xx6] =&gt; 0
        [xx7] =&gt; 0
        [xx8] =&gt; http://urlzum.de/artikel.php?id=10003
        [xx9] =&gt; 3
        [xx10] =&gt; 0
        [xx11] =&gt; 0
        [xx12] =&gt; 32122
        [xx13] =&gt; 0
        [xx14] =&gt; -1
        [xx15] =&gt; -1
        [xx16] =&gt; 
        [xx17] =&gt; Array
            (
                [yy1] =&gt; Array
                    (
                        [0] =&gt; 10003
                    )

                [yy2] =&gt; Array
                    (
                        [0] =&gt; 10003
                    )

                [yy3] =&gt; Array
                    (
                        [10003] =&gt; 18.89
                    )

                [yy4] =&gt; Array
                    (
                        [10003] =&gt; 0
                    )

                [yy5] =&gt; 3
                [yy6] =&gt; 0
            )

        [xx18] =&gt; 0
        [xx19] =&gt; text5
        [xx20] =&gt; 19
        [xx21] =&gt; 3
        [xx22] =&gt; text6
        [xx23] =&gt; 0
        [xx24] =&gt; Array
            (
                [1] =&gt; wrgr01
                [3] =&gt; wrgr02
            )))
</code></pre>

<p>How i get the Fields at json into Solr? Have one a example with a entity and a PHP generated json that starts with:</p>

<pre><code>Array ( [0] =&gt; Array (
    [xx1] =&gt; Text1
</code></pre>

<p>Can some help me, for the correct data-config.xml?</p>",1,php|mysql|json|solr
29901876,SQLite no such column when trying to read from database (android),"<p>I'm having troubles reading from a db for my app, I'm fairly new to SQLite. </p>

<p>So I have a listview which is supposed to show a list of ""expenses"" coming from the database, When I do it with ""desc"" only it works just fine, but I tried adding code for a amount column and it wouldn't work. </p>

<p>I think the error is coming from the ExpenseDataSource class but I'll summarise the Main activity as well. It contains only the listview and you can add new and edit/delete items when you click them, if you leave a textfield blank the Edit becomes invalid. Every kind of help would be much appreciated. Thanks in advance</p>

<p>**Logs: **</p>

<pre><code>04-27 11:55:33.877    1264-1264/cm3019.coursework1209323 D/﹕ HostConnection::get() New Host Connection established 0xb75deb70, tid 1264
04-27 11:55:33.927    1264-1264/cm3019.coursework1209323 W/EGL_emulation﹕ eglSurfaceAttrib not implemented
04-27 11:55:33.937    1264-1264/cm3019.coursework1209323 D/OpenGLRenderer﹕ Enabling debug mode 0
04-27 11:55:33.947    1264-1277/cm3019.coursework1209323 E/AndroidRuntime﹕ FATAL EXCEPTION: AsyncTask #1
    Process: cm3019.coursework1209323, PID: 1264
    java.lang.RuntimeException: An error occured while executing doInBackground()
            at android.os.AsyncTask$3.done(AsyncTask.java:300)
            at java.util.concurrent.FutureTask.finishCompletion(FutureTask.java:355)
            at java.util.concurrent.FutureTask.setException(FutureTask.java:222)
            at java.util.concurrent.FutureTask.run(FutureTask.java:242)
            at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1112)
            at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:587)
            at java.lang.Thread.run(Thread.java:841)
     Caused by: android.database.sqlite.SQLiteException: no such column: amount (code 1): , while compiling: SELECT _id, desc, amount FROM expenses
            at android.database.sqlite.SQLiteConnection.nativePrepareStatement(Native Method)
            at android.database.sqlite.SQLiteConnection.acquirePreparedStatement(SQLiteConnection.java:889)
            at android.database.sqlite.SQLiteConnection.prepare(SQLiteConnection.java:500)
            at android.database.sqlite.SQLiteSession.prepare(SQLiteSession.java:588)
            at android.database.sqlite.SQLiteProgram.&lt;init&gt;(SQLiteProgram.java:58)
            at android.database.sqlite.SQLiteQuery.&lt;init&gt;(SQLiteQuery.java:37)
            at android.database.sqlite.SQLiteDirectCursorDriver.query(SQLiteDirectCursorDriver.java:44)
            at android.database.sqlite.SQLiteDatabase.rawQueryWithFactory(SQLiteDatabase.java:1314)
            at android.database.sqlite.SQLiteDatabase.queryWithFactory(SQLiteDatabase.java:1161)
            at android.database.sqlite.SQLiteDatabase.query(SQLiteDatabase.java:1032)
            at android.database.sqlite.SQLiteDatabase.query(SQLiteDatabase.java:1200)
            at cm3019.coursework1209323.ExpenseDataSource.read(ExpenseDataSource.java:84)
            at cm3019.coursework1209323.SQLiteExpenseDataLoader.buildList(SQLiteExpenseDataLoader.java:32)
            at cm3019.coursework1209323.SQLiteExpenseDataLoader.buildList(SQLiteExpenseDataLoader.java:10)
            at cm3019.coursework1209323.AbstractDataLoader.loadInBackground(AbstractDataLoader.java:26)
            at cm3019.coursework1209323.AbstractDataLoader.loadInBackground(AbstractDataLoader.java:11)
            at android.content.AsyncTaskLoader.onLoadInBackground(AsyncTaskLoader.java:312)
            at android.content.AsyncTaskLoader$LoadTask.doInBackground(AsyncTaskLoader.java:69)
            at android.content.AsyncTaskLoader$LoadTask.doInBackground(AsyncTaskLoader.java:57)
            at android.os.AsyncTask$2.call(AsyncTask.java:288)
            at java.util.concurrent.FutureTask.run(FutureTask.java:237)
            at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1112)
            at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:587)
            at java.lang.Thread.run(Thread.java:841)
04-27 11:55:34.067      389-499/system_process W/ActivityManager﹕ Force finishing activity cm3019.coursework1209323/.MainActivity
04-27 11:55:34.397      389-499/system_process I/WindowManager﹕ Screenshot max retries 4 of Token{b205d250 ActivityRecord{b205d0f0 u0 cm3019.coursework1209323/.MainActivity t5 f}} appWin=Window{b2007f18 u0 Starting cm3019.coursework1209323} drawState=3
04-27 11:55:34.397      389-499/system_process W/WindowManager﹕ Screenshot failure taking screenshot for (768x1280) to layer 21010
04-27 11:55:34.487      389-562/system_process I/ActivityManager﹕ Killing 983:com.android.mms/u0a9 (adj 15): empty for 2037s
04-27 11:55:34.527      389-400/system_process D/CountryDetector﹕ No listener is left
04-27 11:55:34.757      554-554/com.android.launcher W/EGL_emulation﹕ eglSurfaceAttrib not implemented
04-27 11:55:35.077    1264-1264/cm3019.coursework1209323 I/Choreographer﹕ Skipped 31 frames!  The application may be doing too much work on its main thread.
04-27 12:00:34.537    1264-1277/cm3019.coursework1209323 I/Process﹕ Sending signal. PID: 1264 SIG: 9
04-27 12:00:34.627      389-400/system_process I/ActivityManager﹕ Process cm3019.coursework1209323 (pid 1264) has died.
04-27 12:02:01.707      389-428/system_process D/ConnectivityService﹕ Sampling interval elapsed, updating statistics ..
04-27 12:02:01.837      389-428/system_process D/dalvikvm﹕ GC_FOR_ALLOC freed 1015K, 22% free 7327K/9304K, paused 87ms, total 94ms
04-27 12:02:01.877      389-428/system_process D/ConnectivityService﹕ Done.
04-27 12:02:01.877      389-428/system_process D/ConnectivityService﹕ Setting timer for 720seconds
04-27 12:02:52.597      540-540/com.android.phone D/dalvikvm﹕ GC_FOR_ALLOC freed 593K, 17% free 3430K/4088K, paused 50ms, total 51ms
</code></pre>

<p><strong>Here's the code for the data table:</strong></p>

<pre><code>import android.content.ContentValues;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;

import java.util.ArrayList;

/**
 * Created by 1209323 on 14/04/2015.
 */
public class ExpenseDataSource extends DataSource&lt;Expense&gt; {


    public static final String TABLE_NAME = ""expenses"";
    public static final String COLUMN_ID = ""_id"";
    public static final String COLUMN_DESC = ""desc"";
    public static final String COLUMN_AMOUNT = ""amount"";

    public static final String CREATE_COMMAND = ""create table "" + TABLE_NAME + ""(""
            + COLUMN_ID + "" integer primary key autoincrement, ""
            + COLUMN_DESC + "" text not null, ""
            + COLUMN_AMOUNT + ""real not null""
            +"");"";

    public ExpenseDataSource(SQLiteDatabase database) {
        super(database);
    }

    @Override
    public boolean insert(Expense entity) {
        if (entity == null) {
            return false;
        }
        long result = mDatabase.insert(TABLE_NAME, null,
                generateContentValuesFromObject(entity));
        return result != -1;
    }

    @Override
    public boolean delete(Expense entity) {
        if (entity == null) {
            return false;
        }
        int result = mDatabase.delete(TABLE_NAME,
                COLUMN_ID + "" = "" + entity.getId(), null);
        return result != 0;
    }

    @Override
    public boolean update(Expense entity) {
        if (entity == null) {
            return false;
        }
        int result = mDatabase.update(TABLE_NAME,
                generateContentValuesFromObject(entity), COLUMN_ID + "" = ""
                        + entity.getId(), null);
        return result != 0;
    }

    @Override
    public ArrayList&lt;Expense&gt; read() {
        Cursor cursor = mDatabase.query(TABLE_NAME, getAllColumns(), null,
                null, null, null, null);
        ArrayList expenses = new ArrayList();
        if (cursor != null &amp;&amp; cursor.moveToFirst()) {
            while (!cursor.isAfterLast()) {
                expenses.add(generateObjectFromCursor(cursor));
                cursor.moveToNext();
            }
            cursor.close();
        }
        return expenses;
    }

    public String[] getAllColumns() {
        return new String[] { COLUMN_ID, COLUMN_DESC, COLUMN_AMOUNT};
    }

    @Override
    public ArrayList&lt;Expense&gt; read(String selection, String[] selectionArgs,
                                String groupBy, String having, String orderBy) {
        Cursor cursor = mDatabase.query(TABLE_NAME, getAllColumns(), selection,
                selectionArgs, groupBy, having, orderBy);
        ArrayList tasks = new ArrayList();
        if (cursor != null &amp;&amp; cursor.moveToFirst()) {
            while (!cursor.isAfterLast()) {
                tasks.add(generateObjectFromCursor(cursor));
                cursor.moveToNext();
            }
            cursor.close();
        }
        return tasks;
    }

    public Expense generateObjectFromCursor(Cursor cursor) {
        if (cursor == null) {
            return null;
        }
        Expense expense = new Expense();
        expense.setId(cursor.getInt(cursor.getColumnIndex(COLUMN_ID)));
        expense.setDesc(cursor.getString(cursor.getColumnIndex(COLUMN_DESC)));
        expense.setAmount(cursor.getDouble(cursor.getColumnIndex(COLUMN_AMOUNT)));
        return expense;
    }

    public ContentValues generateContentValuesFromObject(Expense entity) {
        if (entity == null) {
            return null;
        }
        ContentValues values = new ContentValues();
        values.put(COLUMN_DESC, entity.getDesc());
        values.put(COLUMN_AMOUNT, entity.getAmount());
        return values;
    }
</code></pre>

<p><strong>DBHelper :</strong></p>

<pre><code>import android.content.Context;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;

/**
 * Created by 1209323 on 14/04/2015.
 */
public class DatabaseHelper extends SQLiteOpenHelper{
    private static final String DATABASE_NAME = ""expenses.db"";
    private static final int DATABASE_VERSION = 1;
    public DatabaseHelper(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
    }
    @Override
    public void onCreate(SQLiteDatabase database) {
        database.execSQL(ExpenseDataSource.CREATE_COMMAND);
    }
    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        db.execSQL(""DROP TABLE IF EXISTS "" + ExpenseDataSource.TABLE_NAME);
        onCreate(db);
    }
}
</code></pre>

<p><strong>Main Activity where DB is used</strong></p>

<pre><code>import android.app.DialogFragment;
import android.app.LoaderManager;
import android.database.sqlite.SQLiteDatabase;
import android.content.Loader;
import android.support.v7.app.ActionBarActivity;
import android.os.Bundle;
import android.view.Menu;
import android.view.MenuItem;
import android.view.View;
import android.widget.AdapterView;
import android.widget.ArrayAdapter;
import android.widget.EditText;
import android.widget.ListView;
import android.widget.RadioButton;
import android.widget.TextView;
import android.widget.Toast;

import java.util.ArrayList;


public class MainActivity extends ActionBarActivity implements
    LoaderManager.LoaderCallbacks&lt;ArrayList&lt;Expense&gt;&gt;
{


        private ArrayAdapter&lt;Expense&gt; mAdapter;
        private SQLiteDatabase mDatabase;
        private ExpenseDataSource mDataSource;
        private DatabaseHelper mDbHelper;

        private static final int LOADER_ID = 1;
        // The callbacks through which we will interact with the LoaderManager.
        private LoaderManager.LoaderCallbacks&lt;ArrayList&lt;Expense&gt;&gt; mCallbacks;
        private LoaderManager mLoaderManager;

        private ListView mListView ; // the listview embedded in the main activity's screen layout
        // used to save the position in the list view of any task selected by the user
        private int mCurrentExpense;
        private DialogFragment mNewFragment, mDeleteEditFragment;

        @Override
        protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_main);

            // TODO Auto-generated method stub
            //setHasOptionsMenu(true);
            mDbHelper = new DatabaseHelper(this);
            mDatabase = mDbHelper.getWritableDatabase();
            mDataSource = new ExpenseDataSource(mDatabase);
            mAdapter = new ArrayAdapter(this,
                    android.R.layout.simple_list_item_1);
            mListView = (ListView)findViewById(R.id.listView1);
            mListView.setAdapter(mAdapter);
            TextView emptyText = (TextView)findViewById(android.R.id.empty);
            mListView.setEmptyView(emptyText);

            mListView.setOnItemClickListener(new AdapterView.OnItemClickListener() {
                public void onItemClick(AdapterView&lt;?&gt; adapter, View view, int position,
                                        long id) {
                    mCurrentExpense = position;
                    Expense expense = mAdapter.getItem(mCurrentExpense);
                    showDeleteEditDialog(expense);
                }
            });

            // The Activity (which implements the LoaderCallbacks&lt;Cursor&gt;
            // interface) is the callbacks object through which we will interact
            // with the LoaderManager. The LoaderManager uses this object to
            // instantiate the Loader and to notify the client when data is made
            // available/unavailable.
            mCallbacks = this;

            // Initialize the Loader with id '1' and callbacks 'mCallbacks'.
            // If the loader doesn't already exist, one is created. Otherwise,
            // the already created Loader is reused. In either case, the
            // LoaderManager will manage the Loader across the Activity/Fragment
            // lifecycle, will receive any new loads once they have completed,
            // and will report this new data back to the 'mCallbacks' object.
            mLoaderManager = getLoaderManager();
            mLoaderManager.initLoader(LOADER_ID, null, mCallbacks);
        }


        // Will be called via the onClick attribute of the buttons in main.xml
        public void onClick(View view) {
            switch (view.getId()) {
                case R.id.add:
                    showNewExpenseDialog();
                    break;
            }
        }

        void showDeleteEditDialog(Expense expense) {
            mDeleteEditFragment = DeleteEditExpenseDialogFragment.newInstance(
                    R.string.delete_edit_dialog_title, expense);
            mDeleteEditFragment.show(getFragmentManager(), ""dialog"");
        }

        public void doDeleteEditExpensePositiveClick() {
            @SuppressWarnings(""unchecked"")
            //ArrayAdapter&lt;Task&gt; adapter = (ArrayAdapter&lt;Task&gt;) mListView.getAdapter();
            Expense expense = mAdapter.getItem(mCurrentExpense);
            Loader loader = mLoaderManager.getLoader(LOADER_ID);
            RadioButton deleteEditRadioButton = (RadioButton) mDeleteEditFragment.getDialog().findViewById(R.id.delete);
            if (deleteEditRadioButton.isChecked()) {
                ((SQLiteExpenseDataLoader)loader).delete(expense);
                Toast.makeText(getApplicationContext(), ""Delete confirmed"",
                        Toast.LENGTH_LONG).show();
            }
            else {
                EditText editDesc = (EditText) mDeleteEditFragment.getDialog().findViewById(R.id.editDesc);
                EditText editMaj = (EditText) mDeleteEditFragment.getDialog().findViewById(R.id.editMajVal);
                EditText editMin = (EditText) mDeleteEditFragment.getDialog().findViewById(R.id.editMinVal);
                String desc = editDesc.getText().toString();
                String majValString = editMaj.getText().toString();
                String minValString = editMin.getText().toString();
                if (!desc.equals("""")
                        &amp;&amp;!minValString.equals("""")
                        &amp;&amp;!majValString.equals("""")
                        ){
                    Integer majVal = new Integer(majValString);
                    Integer minVal = new Integer(minValString);
                    expense.setDesc(desc);
                    if (majVal&lt;=999 &amp;&amp; minVal&lt;=99){

                        System.out.println(""TEST MAJ VAL "" + majVal);
                        System.out.println(""TEST MIN VAL "" + minVal);
                        System.out.println(""TEST amount "" + (majVal + minVal/100));
                        expense.setAmount(majVal, minVal);
                        System.out.println(""TEST amount2 "" + expense.getAmount());
                        ((SQLiteExpenseDataLoader)loader).update(expense);
                        Toast.makeText(getApplicationContext(), ""Edit confirmed"",
                            Toast.LENGTH_LONG).show();
                        System.out.println(""TEST TEST TEST "" + expense.toString());
                        System.out.println(""TEST amount3 "" + expense.getAmount());
                    }
                }
                else
                    doDeleteEditTaskNegativeClick();
                    System.out.println(expense.getAmount());
                    System.out.println(expense.toString());
            }
            // force loader to refresh the listview
            //Loader loader = mLoaderManager.getLoader(LOADER_ID);
            //loader.onContentChanged();
        }

        public void doDeleteEditTaskNegativeClick() {
            Toast.makeText(getApplicationContext(), ""Cancelled"",
                    Toast.LENGTH_LONG).show();
        }

        void showNewExpenseDialog() {
            mNewFragment = NewExpenseDialogFragment.newInstance(
                    R.string.new_expense_dialog_title);
            mNewFragment.show(getFragmentManager(), ""dialog"");
        }

        public void doNewExpensePositiveClick() {
            EditText editDesc = (EditText) mNewFragment.getDialog().findViewById(R.id.editDesc);
            EditText editMajVal = (EditText) mNewFragment.getDialog().findViewById(R.id.editMajVal);
            EditText editMinVal = (EditText) mNewFragment.getDialog().findViewById(R.id.editMinVal);
            String desc = editDesc.getText().toString();
            String majValString = editMajVal.getText().toString();
            String minValString = editMinVal.getText().toString();
            Integer majValue, minValue;
            if (!desc.equals("""")
                &amp;&amp;!minValString.equals("""")
                &amp;&amp;!majValString.equals("""")){
                     majValue = new Integer(majValString);
                     minValue = new Integer(minValString);
                    Toast.makeText(getApplicationContext(), ""New task confirmed"",Toast.LENGTH_LONG).show();
                //@SuppressWarnings(""unchecked"")
                //ArrayAdapter&lt;Task&gt; adapter = (ArrayAdapter&lt;Task&gt;) mListView.getAdapter();
                Loader loader = mLoaderManager.getLoader(LOADER_ID);
                ((SQLiteExpenseDataLoader)loader).insert(new Expense(desc, majValue, minValue));
                // force loader to refresh the listview
                //Loader loader = mLoaderManager.getLoader(LOADER_ID);
                //loader.onContentChanged();
            }else {
                Toast.makeText(getApplicationContext(), ""New task cancelled"",
                        Toast.LENGTH_LONG).show();
            }
        }

        public void doNewExpenseNegativeClick() {
            Toast.makeText(getApplicationContext(), ""New task cancelled"",
                    Toast.LENGTH_LONG).show();
        }

        @Override
        public boolean onCreateOptionsMenu(Menu menu) {
            // Inflate the menu; this adds items to the action bar if it is present.
            getMenuInflater().inflate(R.menu.menu_main, menu);
            return true;
        }

        @Override
        public boolean onOptionsItemSelected(MenuItem item) {
            // Handle action bar item clicks here. The action bar will
            // automatically handle clicks on the Home/Up button, so long
            // as you specify a parent activity in AndroidManifest.xml.
            int id = item.getItemId();

            //noinspection SimplifiableIfStatement
            if (id == R.id.action_settings) {
                return true;
            }

            return super.onOptionsItemSelected(item);
        }

        @Override
        public Loader&lt;ArrayList&lt;Expense&gt;&gt; onCreateLoader(int id, Bundle args) {
            SQLiteExpenseDataLoader loader = new SQLiteExpenseDataLoader(this, mDataSource, null, null, null, null, null);
            return loader;
        }

        @Override
        public void onLoadFinished(Loader&lt;ArrayList&lt;Expense&gt;&gt; loader, ArrayList&lt;Expense&gt; data) {
            mAdapter.clear();
                for (Expense expense : data) {
                    mAdapter.add(expense);
                }


        }

        @Override
        public void onLoaderReset(Loader&lt;ArrayList&lt;Expense&gt;&gt; loader) {
            mAdapter.clear();
        }

        @Override
        public void onDestroy() {
            super.onDestroy();
            mDbHelper.close();
            mDatabase.close();
            mDataSource = null;
            mDbHelper = null;
            mDatabase = null;
        }
}
</code></pre>

<p><strong>And the loader</strong></p>

<pre><code>import android.content.Context;

import java.util.ArrayList;

/**
 * Created by 1209323 on 14/04/2015.
 */
public class SQLiteExpenseDataLoader extends AbstractDataLoader&lt;ArrayList&lt;Expense&gt;&gt;{

    private DataSource&lt;Expense&gt; mDataSource;
    private String mSelection;
    private String[] mSelectionArgs;
    private String mGroupBy;
    private String mHaving;
    private String mOrderBy;

    public SQLiteExpenseDataLoader(Context context, DataSource dataSource, String selection, String[] selectionArgs,
                                String groupBy, String having, String orderBy) {
        super(context);
        mDataSource = dataSource;
        mSelection = selection;
        mSelectionArgs = selectionArgs;
        mGroupBy = groupBy;
        mHaving = having;
        mOrderBy = orderBy;
    }

    @Override
    protected ArrayList&lt;Expense&gt; buildList() {
        ArrayList&lt;Expense&gt; expenseList = mDataSource.read(mSelection, mSelectionArgs, mGroupBy, mHaving,
                mOrderBy);
        return expenseList;
    }

    public void insert(Expense entity) {
        new InsertExpense(this).execute(entity);
    }

    public void update(Expense entity) {
        new UpdateExpense(this).execute(entity);
    }

    public void delete(Expense entity) {
        new DeleteExpense(this).execute(entity);
    }

    private class InsertExpense extends ContentChangingExpense&lt;Expense, Void, Void&gt; {
        InsertExpense(SQLiteExpenseDataLoader loader) {
            super(loader);
        }

        @Override
        protected Void doInBackground(Expense... params) {
            mDataSource.insert(params[0]);
            return (null);
        }
    }

    private class UpdateExpense extends ContentChangingExpense&lt;Expense, Void, Void&gt; {
        UpdateExpense(SQLiteExpenseDataLoader loader) {
            super(loader);
        }

        @Override
        protected Void doInBackground(Expense... params) {
            mDataSource.update(params[0]);
            return (null);
        }
    }

    private class DeleteExpense extends ContentChangingExpense&lt;Expense, Void, Void&gt; {
        DeleteExpense(SQLiteExpenseDataLoader loader) {
            super(loader);
        }

        @Override
        protected Void doInBackground(Expense... params) {
            mDataSource.delete(params[0]);
            return (null);
        }
    }
}
</code></pre>",-1,android|database|sqlite|android-asynctask
29942723,How to use FOUND_ROWS() on multiple tables,"<p>I have the following query which executes without an error, however it does not return the correct number of rows. The same query works when selecting from one table, but not two:</p>

<pre><code>SELECT FOUND_ROWS() as `total` 
FROM `products` t1 
RIGHT JOIN `homepage` t2 ON `t2`.id = `t1`.id;
</code></pre>",0,php|mysql
30012582,"Dynamically setting the selected value of a select list, after querying from the wpdb","<p>I'm trying to dynamically set the selected option of a select list which is built inside a foreach loop. The values of the select list come from a custom table inside of the wordpress database.The function gets parsed a variable that contains the ticket priority that needs to be selected. My current code base is:</p>

<pre><code>function create_select($ticket_priority){
global $wpdb;

$query = ""SELECT * FROM st_support_priorities"";
$allrecs = $wpdb-&gt;get_results($query);

$buffer = '&lt;select name=""ticket_priority""&gt;';
foreach ($allrecs as $rec) {
    $buffer .= '&lt;option value=""'.$rec-&gt;ticket_priority.'"" ';
        if($ticket_priority == ""$rec-&gt;ticket_priority.""){
            $buffer .= 'selected';
        }
    $buffer .= '&gt;'.$rec-&gt;ticket_priority.'&lt;/option&gt;';
}
$buffer .= '&lt;/select&gt;';

echo $buffer;
}
</code></pre>

<p>There are a lot of little intricate parts to the building of each select element, so I'm sure I'm missing something, just can't see what it is. I get no errors when running this and the select list is being built properly but the priority being parsed in is not being selected. </p>",1,php|mysql|sql|database|wordpress
30097732,Select most recent records by DB2 date in form of YYYYMMDD,"<p>I am importing records from a DB2 data source into a MS SQL Server destination.
The records are coming in with the date format of <code>20150302/YYYYMMDD</code>, but I only want the last 14 days based on current server date.</p>

<p>Can some advise on how to select based on this date format against <code>DATEADD(d, - 1, { fn CURDATE() })</code> please.</p>

<p>Thanks!</p>",0,sql|db2
30170013,First row from each group based on condition,"<pre><code>Id Date
1 5/11/2015
1 5/11/2015
1 5/12/2015
1 5/13/2015
2 5/11/2015
2 5/11/2015
2 5/12/2015
2 5/13/2015
3 5/14/2015
3 5/15/2015
3 5/16/2015
3 5/17/2015
4 5/13/2015
4 5/13/2015
4 5/14/2015
4 5/15/2015


ID Name
1 Roy
2 Jame
3 Jani
4 Romi
</code></pre>

<p>I am not able to get the first row matching with second table</p>

<p>I want to get only one row from each table group by ID where date is greater than today's date (i.e. 5/11/2015), like as shown below.</p>

<pre><code>Id Name Date
1 Roy 5/12/2015
2 Jane 5/12/2015
3 Jani 5/14/2015
4 Romi 5/13/2015
</code></pre>",2,sql|sql-server|sql-server-2008
30088630,Find page for a specific item in paginate() SQLAlchemy,"<p>I am usign Flask-SQLAlchemy’s <code>paginate()</code>. Now I need to find what is the page for a specific comment id.</p>

<p>For example, this will work, if I have all comments in the same page:</p>

<pre><code>new_dict['url'] = '/comments#comment_' + str(comment.id)
</code></pre>

<p>However in my case I need this structure:</p>

<pre><code>/comments?page=1#comment_73
</code></pre>

<p>How can I find what is the page?</p>",0,python|flask|pagination|sqlalchemy|flask-sqlalchemy
30135672,Oracle SQL: rtrim and group by,"<p>I was doing like the following query and received ""not a single-group group function"" error.</p>

<pre><code>select distinct a.col1, 
       a.col2,
       rtrim(xmlagg(xmlelement(e, b.col1 ||',')).extract('//text()'), ','),
       rtrim(xmlagg(xmlelement(e, b.col2 ||',')).extract('//text()'), ',')
from table1 a
where a.col3 like '%string%'
left join table2 b on (a.pid = b.pid);
</code></pre>

<p>I did left join between table1 and table2 and I need to aggregate multiple rows into one row. So I wrote:</p>

<pre><code>rtrim(xmlagg(xmlelement(e, b.col1 ||',')).extract('//text()'), ','),
rtrim(xmlagg(xmlelement(e, b.col2 ||',')).extract('//text()'), ',') 
</code></pre>

<p>But when I attempt to do this, I received an error: </p>

<pre><code>ORA-00937 not a single-group group function
</code></pre>

<p>I am not using any aggregations in select statement. What should I do to write rtrim(... ) without the error?</p>

<p>Thanks in advance.</p>",0,sql|oracle|group-by|string-aggregation
30042955,"SqlDependency.Start() error: ""Cannot find the specified user 'owner'""","<p>I am trying to develop a website using Signalr and <code>SqlDependency</code>. I've enabled Service Broker and ran following T SQL:</p>

<pre><code>GRANT CREATE PROCEDURE TO [SqlUser];
GRANT CREATE SERVICE TO [SqlUser];
GRANT CREATE QUEUE TO [SqlUser];
GRANT REFERENCES ON CONTRACT::[http://schemas.microsoft.com/SQL/Notifications/PostQueryNotification] TO [SqlUser];
GRANT SUBSCRIBE QUERY NOTIFICATIONS TO [SqlUser];
GRANT CONTROL ON SCHEMA::[dbo] TO [SqlUser];
GRANT IMPERSONATE ON USER::DBO TO [SqlUser];
</code></pre>

<p>But when I run the website, I get the following error:</p>

<blockquote>
  <p>Cannot find the specified user 'owner'.<br>
      Cannot find the queue 'SqlQueryNotificationService-ce08361b-7c12-412a-a087-495959118214', because it does not exist or you do not have permission.<br>
      Invalid object name 'SqlQueryNotificationService-ce08361b-7c12-412a-a087-495959118214'.  </p>
</blockquote>

<pre><code>protected void Application_Start()  
{
    SqlDependency.Start(
        ConfigurationManager
            .ConnectionStrings[""CiaosConnectionString""].ConnectionString);

    //WebApiConfig.Register(GlobalConfiguration.Configuration);

    GlobalConfiguration.Configure(WebApiConfig.Register);
</code></pre>

<p>Can someone help me find the problem?</p>",3,c#|sql-server|signalr|sqldependency
29760082,Best way to consume WCF Service from Access application,"<p>We have a WCF Service and now we are having to suppor tit in backward compatibility mode. One of the consumer turns out to be an Access Application. Now, I have personally never worked with Access and not sure if Access has a direct way to consume the WCF services. However, I came across following link:</p>

<p><a href=""http://jaliyaudagedara.blogspot.com/2014/02/calling-wcf-service-from-stored.html?m=1"" rel=""nofollow"">http://jaliyaudagedara.blogspot.com/2014/02/calling-wcf-service-from-stored.html?m=1</a></p>

<ul>
<li>Given the fact that I would be more comfortable working with SQL Server rather than doing any work in Access to do backward compatibility, I found this link as my best shot to backward compatibility.</li>
<li>Are there any other ways that I can approach this problem?</li>
</ul>",0,c#|sql-server|wcf|ms-access-2010|clr
29831051,Sort French Language in ABC Order (SQLite),"<p>I have a list that I am trying to sort in Alphabetical Order. I have retrieved my database with <code>SELECT DISTINCT Category FROM 'Main Database' ORDER BY Category asc'""</code></p>

<p>It correctly alphabetizes the category list but the letter É is at the very bottom of the list, right after T. Is there a way I can set it so the accent É is right after E in the english alphabet? </p>",0,sqlite
29838808,"SQL query in python script, how to get quotes around a parameter?","<p>I need to rewrite the php script that handles a POST request and queries a SQLite3 database into python. The Query now looks like this</p>

<pre><code>cursor.execute(""SELECT * from ""+requestedProgram+"" WHERE start LIKE ? ORDER BY start"", (requestedDate,))
</code></pre>

<p>the first part until the <em>WHERE</em> condition works (it is not elegant but unfortunately it seems that table names cannot be parametrized). </p>

<p>However, I need to put quotes around the requestedDate string in order to make <em>LIKE</em> work. How do I get quotes around the parameter/variable?</p>

<p>On another note: does the <em>ORDER BY</em> statement even do anything considering the nature of the cursor?</p>",1,python|sql|sqlite
29994805,ActiveRecord - Altering a table to set an auto increment minimum value?,"<h2>Background</h2>

<p>A simple rails activerecord migration </p>

<pre><code>class CreateMyTable &lt; ActiveRecord::Migration
  def change    
    create_table :my_table, force: :cascade do |t|
      t.index    ""id""
      t.string   ""column1"",     limit: 64
      t.string   ""column2"", limit: 64

      t.timestamps null: false
    end       
    MyTable.connection.execute(""ALTER TABLE my_table AUTO_INCREMENT = 10000;"") 
  end
end
</code></pre>

<p>It creates <code>my_table</code> and adds a few columns to it. The last line executes a raw command to set the first <code>id</code> to start counting at 10000.</p>

<h2>The problem</h2>

<p>When running <code>db:migrate</code> rails updates the <code>schema.rb</code> file to incorporate the result of this migration, which is adding the new table. </p>

<p>However the last statement setting the <code>AUTO_INCREMENT</code> doesn't get captured in the <code>schema.rb</code> file.</p>

<p>When another user or server runs <code>db:setup</code> for the first time rails will use that <code>schema.rb</code> to construct the schema and won't pick up the fact that it needs to bump the <code>id</code> to 10000. </p>

<p>Is there any way to get this migration change into the <code>schema.rb</code> file so that all future DB's constructed based off this <code>schema.rb</code> file will appropriately increment the <code>id</code>?</p>

<h3>Edit</h3>

<p>Based off the suggestion below by inye, I tried editing my migration to remove the <code>t.index</code> reference, and my <code>schema.rb</code> is as follows</p>

<pre><code>ActiveRecord::Schema.define(version: 20150501211519) do

  create_table ""my_table"", force: :cascade do |t|
    t.string   ""column1"",    limit: 64
    t.string   ""column2"",    limit: 64
    t.datetime ""created_at"",            null: false
    t.datetime ""updated_at"",            null: false
  end

end
</code></pre>",1,mysql|ruby-on-rails|activerecord
30187750,PHP redirect to different page after form submit,"<p>Here's the first bit of my form code </p>

<pre><code> &lt;form action=""PHP/form.php"" id=""msform"" method=""post""&gt;

&lt;fieldset id=""owner_service""&gt;
&lt;h2&gt; ARE YOU A DOG OWNER OR SERVICE PROVIDER?&lt;/h2&gt;
&lt;legend&gt;owner_service&lt;/legend&gt;
&lt;div class=""owner_service""&gt;
&lt;input type=""radio"" id=""service"" name=""owner_service"" value=""service""&gt;
&lt;label for =""service""&gt;&lt;h5&gt;SERVICE PROVIDER&lt;/h5&gt;&lt;/label&gt;
&lt;input type=""radio"" id=""owner"" name=""owner_service"" value=""owner""&gt;
&lt;label for =""owner""&gt;&lt;h5&gt;DOG OWNER&lt;/h5&gt;&lt;/label&gt;
&lt;/div&gt;
&lt;input type=""button"" name=""next"" class=""next action-button"" id=""next"" value=""NEXT"" /&gt;
&lt;/fieldset&gt;
</code></pre>

<p>and here's the PHP </p>

<pre><code>  &lt;?php
session_start();

$servername = """";
$username = """";
$password = """";
$dbname = """";

// Create connection
$conn = new mysqli($servername, $username, $password, $dbname);
// Check connection
if ($conn-&gt;connect_error) {
    die(""Connection failed: "" . $conn-&gt;connect_error);
} 


$sql = ""INSERT INTO pets (owner_service, Gender, Age, Size, Location, idealLocation, Service)
VALUES ('{$_POST['owner_service']}', '{$_POST['gender']}', '{$_POST['age']}', '{$_POST['size']}', '$locationCommaString', '{$_POST['ideal_location']}', '{$_POST['service']}')"";



if($conn-&gt;query($sql) === TRUE) {
    echo ""New record created successfully"";
} else {
    echo ""Error: "" . $sql . ""&lt;br&gt;"" . $conn-&gt;error;
}


?&gt;
</code></pre>

<p>I've got my form running, so the results are in the database but what I want to do is bring the user to a new page depending on whether they clicked 'service provider' or 'dog owner'. I have no idea where to put the header because if I replace the if statement that I already have then the results won't show in my database. </p>",0,php|sql|forms|redirect|header
29832686,Is there a way to map a role to linked server login in SQL Server,"<p>Couldn't find anything online about this, but I'd like to give a SQL Server role access to a linked server using a specific login to that server. I know you can assign a specific local login to a linked server login with <code>sp_addlinkedsrvlogin</code> but I'm not looking to do this for every login (nor am I looking for a script to do it for every login). I suppose there's some security reasons to prefer the use of an account, but I'd like to know if it's possible.  </p>",0,sql|sql-server|sql-server-2012|linked-server
29782814,Java Springs Connection Pool com.mchange.v2.c3p0.impl.NewProxyConnection,"<p>Folks, I am a java newbie. I am trying to debug an application written by some one else. I see following statements when ever the application hits the database.</p>

<pre><code>DEBUG [TP-Processor9] - ooo Using Connection [com.mchange.v2.c3p0.impl.NewProxyConnection@f266c22]

Using Connection [com.mchange.v2.c3p0.impl.NewProxyConnection@1f792416]
</code></pre>

<p>please note the ID after @ symbol</p>

<p>I want to understand if the code is creating new connection to the DB for each query??</p>

<p>here is my bean configuration :</p>

<pre><code>&lt;bean id=""dataSource""
      class=""com.mchange.v2.c3p0.ComboPooledDataSource""
      destroy-method=""close""
      p:driverClass=""com.mysql.jdbc.Driver""
      p:jdbcUrl=""${db.url}""
      p:user=""""
      p:password=""""
      p:idleConnectionTestPeriod=""25200""/&gt; 
</code></pre>",0,java|mysql|spring|jdbc
29858764,Get all XML nodes that contain a certain inner node in T-SQL,"<p>I am receiving a XML string information for many tables. The problem is that in stead of having the format</p>

<pre><code>&lt;root&gt;
  &lt;Candy&gt;
    &lt;Name&gt;M-M&lt;/Name&gt;
    &lt;Size&gt;Small&lt;/Size&gt;
  &lt;/Candy&gt;
  &lt;Candy&gt;
    &lt;Name&gt;KitKat&lt;/Name&gt;
    &lt;Size&gt;Medium&lt;/Size&gt;
  &lt;/Candy&gt;
  &lt;Fruit&gt;
    &lt;Description&gt;Banana&lt;/Description&gt;
    &lt;Color&gt;Yellow&lt;/Color&gt;
  &lt;/Fruit&gt;
  &lt;Fruit&gt;
    &lt;Description&gt;Cherry&lt;/Description&gt;
    &lt;Color&gt;Red&lt;/Color&gt;
  &lt;/Fruit&gt;
&lt;root&gt;
</code></pre>

<p>What I get is</p>

<pre><code>&lt;root&gt;
  &lt;Candy&gt;
    &lt;M-M&gt;
      &lt;Size&gt;Small&lt;/Size&gt;
    &lt;/M-M&gt;
    &lt;KitKat&gt;
      &lt;Size&gt;Medium&lt;/Size&gt;
    &lt;KitKat&gt;
  &lt;/Candy&gt;
  &lt;Fruit&gt;
    &lt;Banana&gt;
      &lt;Color&gt;Yellow&lt;/Color&gt;
    &lt;/Banana&gt;
    &lt;Cherry&gt;
      &lt;Color&gt;Red&lt;/Color&gt;
    &lt;/Cherry&gt;
  &lt;/Fruit&gt;
&lt;/root&gt;
</code></pre>

<p>I need to insert the rows for candy in the table Candy and the rows for fruits in the table Fruit. If I received the first format I'd just do</p>

<pre><code> select *
   from
openxml (@hDoc, '/root/Candy', 2)
</code></pre>

<p>and I'd get all the Candy rows, but the guys from the other side of the web service are reluctant to send it that way. So, before I put a fight, is there a way to get all Candy using the second xml format? like requesting all nodes that have an inner node named Size? I'm using SQLServer 2008 so I can use either the openxml instruction or the newer node functions, which I haven't learned how to use yet. Also, process speed is more important than memory, I think...</p>",1,sql-server|xml|tsql|xpath
29964881,Loading Data from SQL Server using jQuery and asp.net web-services,"<p>I want to load SQL data into a jQuery Graph plugin</p>

<p><strong>What I have read:</strong></p>

<p>Through out my research, everyone says that connecting directly to SQL Server from jQuery <code>.get</code> method is unsafe. What was suggested was that you rather connect to the database from a server side language such as asp.net.</p>

<p><strong>My question:</strong></p>

<p>Would it be safer then to create a web service that connects to the database and retrieves the data and then connect to that web service via jQuery?</p>

<p>Thanks</p>",0,jquery|asp.net|sql-server|web-services|security
30079630,"How to simulate a ""lock timeout"" error with Django on MySQL","<p>What's the easiest way to simulate a ""lock timeout"" DatabaseError with Django using the MySQL backend?</p>

<p>I have a piece of code, that operates over large querysets, and occasionally it throws the exception:</p>

<pre><code> DatabaseError: (1205, 'Lock wait timeout exceeded; try restarting transaction')
</code></pre>

<p>I understand what causes this and how to fix it, but I'm not sure how to test my fix since the error only happens in a production environment where several users are accessing certain tables simultaneously.</p>

<p>I first tried to run <a href=""http://shiningpanda.com/mysql-table-lock-django.html"" rel=""nofollow"">some sample code</a> in a separate process to make Django apply a lock in MySQL, and while it does seem to lock the target table and make all other requests wait, a lock timeout never occurs when I test on my localhost with runserver. I let it run for 20 minutes without a timeout occurring.</p>",0,python|mysql|django|django-orm|database-locking
29752321,Get Insert query with already inserted data from a table based On certain Conditions,"<p>I have a table named <code>sampletable</code> </p>

<p>and it has 10000 rows and i want to generate script (Insert query with inserted data) for this table based on certain conditions.</p>

<p>That is i need the insert query with data  for certain conditions </p>

<p>like <code>select * from sampletable where id=10</code> something like that </p>

<p>The select query will results 100 rows only so i need to get only this 100 rows as insert query statement with inserted values</p>

<p>I had tried </p>

<p><code>Sql Management Studio</code> <strong>Generate Script methods</strong> but it results all rows.
I don't know how to do this please help me to solve this .</p>

<p>My purpose is i need to take backup of the  data (Only the Specific condition data not all)</p>",0,sql-server|sql-server-2008|generate-scripts
29881740,"Looping through all csv files in a directory, pulling info from each and putting data in mysql database","<p>I am trying to write a php script that will read all columns from a directory full of 1000 csv files (all of these files have like columns) and take all the data that it gets from the csv files and then insert it into a mysql database. I have tried writing this 3 different ways after going through tutorials online but I just cannot get it to work. </p>

<p>I am new to PHP so I have no idea what is going on. Is there an easy way to loop through a directory full of 1000 csv files, read in all the data from the files, and then insert the data into a mysql database?</p>",1,php|mysql|database|csv|insert
29971071,XML to Postgres via python/psycopg2,"<p>I have an existing python script that loops through a directory of XML files parsing each file using etree, and inserting data at different points into a Postgres database schema using psycopg2 module.  This hacked together script worked just fine but now the amount of data (number and size of XML files) is growing rapidly, and the number of INSERT statements is just not scaling. The largest table in my final database has grown to about ~50 million records from about 200,000 XML files. So my question is, what is the most efficient way to:</p>

<ol>
<li>Parse data out of XMLs</li>
<li>Assemble row(s)</li>
<li>Insert row(s) to Postgres</li>
</ol>

<p>Would it be faster to write all the data to a CSV in the correct format and then bulk load the final CSV tables to Postgres using COPY_FROM command?  </p>

<p>Otherwise I was thinking about populating some sort of temporary data structure in memory that I could insert into the DB once it reaches a certain size?  I am just having trouble arriving at the specifics of how this would work.  </p>

<p>Thanks for any insight on this topic, and please let me know if more information is needed to answer my question.</p>",2,python|xml|postgresql|csv
30045518,Save image path in database using angularjs,"<p>I Have uploaded my image in local folder using angular file-model and returning the path using json but i am unable to save the path to database. Please help me to solve this issue. I am using .success method to return the response data to a hidden field to store it in database but it shows ERROR:"" Cannot read property 'success' of undefined "".</p>

<p><strong>services.js:</strong></p>

<pre><code>service.UploadFile = function (file) {
    var fd = new FormData();
    fd.append('file', file);
    $http.post('/Empdet/UploadFile', fd, {
        transformRequest: angular.identity,
        headers: { 'Content-Type': undefined }
    })
    .success(function () {
    })
    .error(function () {
    });
}

return service;
</code></pre>

<p><strong>Controller.js:</strong></p>

<pre><code> $scope.UploadFile = function () {
    console.log('UploadFile');
    console.log($scope.Empdet.PhotoFile);
    EmployeeFactory.UploadFile($scope.Empdet.PhotoFile).success(function (response) {
        console.log('response.IsSuccessful');
        console.log(response.Data);

        $scope.IsSuccessful = response.IsSuccessful;
        if ($scope.IsSuccessful) {
            $scope.PhotoText = response.Data;
            console.log('$scope.PhotoText');
            console.log($scope.PhotoText);                   
            $scope.CanClearMessage = true;
        } else {
            $scope.SuccessMessage = '';
            $scope.ErrorMessage = response.ReasonForFailure;
            $scope.CanClearMessage = true;
        }
    }
)};
</code></pre>

<p><strong>CreateNewEmployee.cshtml:</strong></p>

<pre><code> &lt;tr&gt;
    &lt;td style=""text-align: left;""&gt;
        &lt;label class=""labelsytle""&gt;
            PhotoFile
        &lt;/label&gt;
    &lt;/td&gt;
    &lt;td style=""text-align: left;""&gt;
        &lt;input class=""form-control"" type=""file"" file-model=""Empdet.PhotoFile"" style=""border-radius: 5px;""/&gt;  
        &lt;td&gt;&lt;button class=""btn btn-primary"" ng-click=""UploadFile()"" style=""border-radius: 5px; font-family: Consolas;""&gt;UPLOAD&lt;/button&gt;&lt;/td&gt;
    &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
    @*&lt;td style=""text-align: left;""&gt;
           &lt;label class=""labelsytle""&gt;
            PhotoText
        &lt;/label&gt;
    &lt;/td&gt;*@
    &lt;td style=""text-align: left;""&gt;
        &lt;input class=""form-control"" type=""hidden"" name=""search"" ng-model=""Empdet.PhotoText"" placeholder=""Enter PhotoText"" style=""border-radius: 5px;"" /&gt;
    &lt;/td&gt;
&lt;/tr&gt;
</code></pre>

<p><strong>EmpdetController.cs:</strong></p>

<pre><code>[HttpPost]
    public ActionResult UploadFile()
    {
        var file = Request.Files[0];
        var path = Path.Combine(Server.MapPath(""~/Photos/"") + file.FileName);
        file.SaveAs(path);

        // prepare a relative path to be stored in the database and used to display later on.
        path = Url.Content(Path.Combine(""~/Photos/"" + file.FileName));
        // save to db
        return Json(path.ToString(), JsonRequestBehavior.AllowGet);

    }
</code></pre>",1,javascript|sql|asp.net|angularjs|asp.net-mvc-4
30047055,"Getting Error The argument 'nameOrConnectionString' cannot be null, empty or contain only white space with Azure Database","<p>I am having my database and other storage on azure cloud storage.i am using Entity Code first appoach but problem is when i am trying to read connection string from cloud storage using <strong>CloudConfigurationManager.GetSetting()</strong> i am getting below error:</p>

<p><strong>Error:The argument 'nameOrConnectionString' cannot be null, empty or contain only white space.
An exception of type 'System.ArgumentException' occurred in EntityFramework.dll but was not handled in user code</strong></p>

<p>This is my Azure project:Demo.Web.Azure</p>

<p>It has 2 configurations file:</p>

<p>1)ServiceConfiguration.Cloud.cscfg:</p>

<pre><code>&lt;Role name=""Demo.Web""&gt;
 &lt;Setting name=""MyConnectionString""
 value=""Server=----;Database=DemoEntity;User ID=---;Password=---&amp;amp;w;Trusted_Connection=False;
Encrypt=True;MultipleActiveResultSets=True;"" /&gt;

  &lt;Setting name=""Demo.Storage""
 value=""DefaultEndpointsProtocol=https;AccountName=---;AccountKey=------""
 /&gt;
</code></pre>

<p>2)ServiceConfiguration.Local.cscfg:</p>

<pre><code>&lt;Role name=""Demo.Worker""&gt;
  &lt;Setting name=""Demo.Storage""
 value=""DefaultEndpointsProtocol=https;AccountName=---;AccountKey=------""
 /&gt;
</code></pre>

<p>3)ServiceDefinition.csdef:</p>

<pre><code>&lt;ServiceDefinition name=""Demo.Web.Azure"" schemaVersion=""2014-06.2.4""&gt;
      &lt;WebRole name=""RepuGuard.Web"" vmsize=""Small""&gt;
         &lt;ConfigurationSettings&gt;
                  &lt;Setting name=""MyConnectionString"" /&gt;

                  &lt;Setting name=""Demo.Storage"" /&gt;
                 &lt;/ConfigurationSettings&gt;

     &lt;/WebRole&gt;

 &lt;WorkerRole name=""Demo.Worker"" vmsize=""Small""&gt;
                &lt;ConfigurationSettings&gt;
                  &lt;Setting name=""MyConnectionString"" /&gt;

                  &lt;Setting name=""Demo.Storage"" /&gt;
                 &lt;/ConfigurationSettings&gt;

 &lt;/WorkerRole&gt;

&lt;/ServiceDefinition&gt;
</code></pre>

<p>This is my Context file which read Database connection string:</p>

<pre><code>public partial class MyDemoDBContext : DbContext, IDisposable
    {
           public ObjectContext Context { get; set; }
           public MyDemoDBContext()
            : base(CloudConfigurationManager.GetSetting(""MyConnectionString""))//Getting Error here
           {
             Context = ((IObjectContextAdapter)this).ObjectContext;
           }
             public MyDemoDBContext (string connectionString)

            : base(connectionString)

             {

                 Context = ((IObjectContextAdapter)this).ObjectContext;

             }
}
</code></pre>

<p>Getting error here:</p>

<pre><code>public MyDemoDBContext()
            : base(CloudConfigurationManager.GetSetting(""MyConnectionString""))
           {
             Context = ((IObjectContextAdapter)this).ObjectContext;
           }
</code></pre>",7,asp.net-mvc|entity-framework|azure|azure-sql-database|azure-configuration
29809463,How to cache third party API access in SQL database for a WordPress plugin,"<p>Is there any way to cache data for a WordPress plugin ? I have a ready one that uses third party API access to YouTube API V3 and I need to apply cache for both optimization and keeping the hits under the quota.</p>

<p>Supposing I have this function:</p>

<pre><code>function popular_uploads() {
        $url = 'https://www.googleapis.com/youtube/v3/search?order=viewCount&amp;part=snippet&amp;channelId='. channel_id(). '&amp;maxResults=5&amp;key={key}&amp;type=video';
        $json = file_get_contents($url);
        $json_data = json_decode($json, false);
        foreach ( $json_data-&gt;items as $item ) {
            $id = $item-&gt;id-&gt;videoId;
            echo '&lt;iframe id=""ytplayer"" type=""text/html"" width=""auto"" height=""auto"" 
                src=""//www.youtube.com/embed/' . $id . '?rel=0&amp;showinfo=1""
                frameborder=""0"" allowfullscreen&gt;&lt;/iframe&gt;';
        }
}
</code></pre>

<p>How am I going to cache the data for sometime in a database ? I am really new to this process and I have looked it up and couldn't find a fix.</p>

<p>Thank you so much for assisting a beginner!</p>

<p>Regards.</p>

<p><strong>Edit:</strong></p>

<p>I have followed all steps found in <a href=""http://www.xeweb.net/2010/01/15/simple-php-caching/"" rel=""nofollow"">Simple PHP caching</a> article, the only difficulty I have is implementing the code below : </p>

<pre><code>&lt;?php
// Some query
$q = mysql_query(""SELECT * FROM articles ORDER BY id"");
while ($r = mysql_fetch_array($q)) {
  echo '&lt;li&gt;&lt;a href=""view_article.php?id='.$r['id'].'""&gt;'.$r['title'].'&lt;/a&gt;&lt;/li&gt;';
}
?&gt;
</code></pre>",3,php|sql|api|caching
30187895,how to Copy data from an existing remote database(MySQL) to another local MySQL database with different schema?,"<p>I want to copy data from a MySQL remote database to an other MySQL database whith different schema (table and column names as well as primary and foreign key constraint)</p>

<p>I want to bring the data from <code>db1.person</code> and put it into <code>db2.user</code> while mapping <code>db1.person.id</code> to <code>db2.user.id</code> and the same for the name and email column.</p>

<p>I intend to make this process run twice a week so it would be great to have a script for it.</p>

<p>remote database db1 has table <code>person</code>:</p>

<ul>
<li>id</li>
<li>name</li>
<li>email</li>
</ul>

<p>local database db2 has table <code>user</code></p>

<ul>
<li>id</li>
<li>name</li>
<li>email</li>
<li>group_id</li>
</ul>

<p>and <code>group</code></p>

<ul>
<li>id</li>
<li>label</li>
<li>description</li>
</ul>",2,mysql|database
29866223,Can't remove whitespaces in string,"<p>My script reads txt file and then writes values into database table. There is a field with price, and in txt file price with 4 digit values have whitespace after first digit (2 500 ex.). I put this function (str_replace works well and replaced ',' but when I use it for removing whitespace it does not do it, and finally I put preg_replace but it also skips whitespace):</p>

<pre><code>$model-&gt;price = preg_replace('/\s+/','',str_replace(',', '.', $row_data[3]));
</code></pre>

<p>datatype of price field in my table is varchar, when I used int or decimal it skips digits after space (2 070 becomes 2, 12 015 => 12). I have to remove this space in integration stage, because when I do operations with price field php skips digits after space and I have errors in my further manipulations.</p>

<p>What is the problem guys? </p>

<p><strong>UPD</strong> Solution from @jeroen works great, I changed field of price to decimal (10,2) and put this line for parsing the string with price:</p>

<pre><code>$model-&gt;price = filter_var(str_replace(',', '.', $row_data[3]), FILTER_SANITIZE_NUMBER_FLOAT, FILTER_FLAG_ALLOW_FRACTION); 
</code></pre>",3,php|mysql|kohana
30022048,Jasper Reports:java.sql.SQLException: ORA-22905: cannot access rows from a non-nested table item,"<p>I have requirment same output format have different reports and different tables.So what i implemented Oracle Piplined functions and jasper report >Report Query wrote below</p>

<p>Oracle Stored Procedure</p>

<pre><code>FUNCTION VENDOR_TYPE(REPORT_TYPE IN VARCHAR2) RETURN T_VENDOR_TYPE pipelined

C1 sys_refcursor;

out_rec VENDOR_TYPE := VENDOR_TYPE(0, null, null, null);
BEGIN
IF REPORT_TYPE='1' THEN
OPEN C1 FOR SELECT .....;
ELSIF REPORT_TYPE='2' THEN
OPEN C1 FOR SELECT .....;
END IF;
LOOP 
FETCH C1 INTO out_rec.VENDOR,out_rec.VENDOR_ID;
EXIT WHEN C1%NOTFOUND;
PIPE ROW(out_rec);

END LOOP
CLOSE C1;
RETURN;

END VENDOR_TYPE
</code></pre>

<p>My query is :</p>

<pre><code>select * from table(VENDOR_TYPE('1')) - was running fine
</code></pre>

<p>But I had created two parameters and change the query as</p>

<pre><code>select * from table(VENDOR_TYPE($P{report_no}))
</code></pre>

<p>After I have executed the report it gives me the error as follows ""java.sql.SQLException: ORA-22905: cannot access rows from a non-nested table item "". Can you please help me to solve this?</p>",0,oracle|plsql|jasper-reports
30104649,Where is Connection String Located as it relates to Availability Group Listeners?,"<p>I am trying to teach myself about Availability Group Listeners and see that I need to update a ""Connection String."" I know that I have a connection string in my web.config file on the Web server, but is this where it needs to be updated? Is there somewhere in SQL Server Management Studio where it needs to be updated?</p>

<p>I've updated the connection string there, replacing the server name with the new Availability Group Listener Name that I've created, then updated my database table to replace the server name there with the AG Listener name too. When I update the name in the database table, my records will not open in the GUI where I'm accessing them from a website.</p>

<p>I think this will be a problem because if there is a failover, I'll need to manually update the name of the server for each record of the table to point to the new server location. I figured that if I put in the listener name in place of the server name, this would never need to be updated in the event of a failover.</p>

<p>Any thoughts? I've researched until my brain is mush and really need some help with fully understanding how to get these listeners working. Thanks in advance!</p>",1,sql-server-2012|listener|connection-string|high-availability
29906749,The DELETE statement conflicted with the REFERENCE constraint. Even though the correct mapping is used,"<p>I have this code in a .net application:</p>

<pre><code>public GradeMapper()
        {
            ToTable(""Grades"");

            // Primary key
            HasKey(c =&gt; c.GradeId);

            // Properties

            //Relations
            HasOptional(g =&gt; g.DeterminateTableProp).WithMany().Map(m =&gt; m.MapKey(""DeterminateTableId"")).WillCascadeOnDelete(false);
        }
</code></pre>

<p>In my database I have this:</p>

<p><img src=""https://i.stack.imgur.com/rucbD.jpg"" alt=""Database contents""></p>

<p>I'm using a JavaFX application to make adjustments to the database.
I want to delete a determinatetable, but not the grade where it belongs to.</p>

<p>This is the code I use to delete it:</p>

<pre><code>public void deleteDeterminateTableById(int id){
        em.getTransaction().begin();
        em.remove(findDeterminateTableById(id));
        em.getTransaction().commit();
    }
</code></pre>

<p>But now I get this error:</p>

<pre><code>Caused by: Exception [EclipseLink-4002] (Eclipse Persistence Services - 2.6.0.v20141202-3914740): org.eclipse.persistence.exceptions.DatabaseException
Internal Exception: com.microsoft.sqlserver.jdbc.SQLServerException: The DELETE statement conflicted with the REFERENCE constraint ""FK_dbo.Grades_dbo.DeterminateTable_DeterminateTableId"". The conflict occurred in database ""HOGENT1415_11"", table ""dbo.Grades"", column 'DeterminateTableId'.
Error Code: 547
Call: DELETE FROM DeterminateTable WHERE (DETERMINATETABLEID = ?)
    bind =&gt; [1 parameter bound]
Query: DeleteObjectQuery(domain.DeterminateTable@ee66dbe)
</code></pre>

<p>So what is wrong with my mapping? I want the foreign key in the Grade table to be set to null when the determinate table is deleted.</p>",0,java|sql-server|asp.net-mvc-4
29966572,How to use a checkbox to change values in an SQL database in asp.net,"<p>I currently have system which has a web front end and a back office system. User can book properties online or call our office to book a property. In the admin system on the web front, I have two check boxes to determine if the property is available on the front end or the back office system. This is controlled using a Check box. The code for the check box is as follows;</p>

<pre><code>&lt;asp:CheckBox ID=""CheckBoxAvailableToWeb"" runat=""server"" TextAlign=""Left"" Text=""Available for web bookings""
                                    Checked=""true"" /&gt;
</code></pre>

<p>I have an field in an SQL Database called ""isAvailableToWeb"" which has a Boolean result. What I want to achieve is if the check box is checked, the value of the ""isAvailableToWeb"" field is set to ""True"" or set to ""False"" if un-checked.</p>

<p>I have tried to complete this function using the following code;</p>

<pre><code> Protected Sub CheckBoxAvailableToWeb_CheckedChanged(sender As Object, e As EventArgs, ByVal beachhutid As Long)
    Using dbContext = New bbhasDBEntities
        Dim item
        item = (From i In dbContext.tblBeachHuts Where i.beachHutId = beachhutid Select i).First()
        If CheckBoxAvailableToWeb.Checked = True Then

            item.AvailableToWeb = True
        Else
            item.AvailableToWeb = False
        End If

        dbContext.tblBeachHuts.Attach(item)
        Call dbContext.SaveChanges()
    End Using
End Sub
</code></pre>

<p>This code doesn't throw up any errors but doesn't also make the change that I would like to see.</p>

<p>I have a button on this page that saves the information so I would also like to know if it would be better, once the code is working, to put it in that Sub.</p>",0,sql|asp.net|vb.net|checkbox
29754352,Using SQL Failover Partner with pyodbc,"<p>Is pyodbc capable of using a failover partner?  ODBC says it's supported so I'm not sure why what I have is not working:</p>

<pre><code>db = pyodbc.connect(driver='{SQL Server}', database=DATABASE, server=PRIMARY, failover_partner=SECONDARY)
</code></pre>

<p>My database is SQL Server 2008.  The only other thing I can do at this point is use a try/except to handle the connection creation but I'd vastly prefer doing this the way I understand SQL is intended to work.</p>",1,python|sql|sql-server|odbc|pyodbc
30072709,Propel / mssql : last insert ID,"<p>We use Symfony2, Propel and triggers with a mssql server. The problem is the following:
* from a form, we insert a new object in the DB
* then a trigger is used to log the insertion into a table
* then from the propel object we get the inserted ID => it is false.</p>

<p>After further analysis, propel gets the last inserted ID in the DB using the PHP function PDO::lastInsertId which returns the ID of the row inserted into the log table.</p>

<p>I think that Propel should use SELECT SCOPE_IDENTITY() instead, this will return the object ID as the trigger is ran into another context.</p>

<p>The question is: how to tell to propel to use this function? In the Propel bundle, there is a MssqlPropelPDO class whose implementation is:</p>

<pre><code>public function lastInsertId($seqname = null)
{
    $result = self::query('SELECT SCOPE_IDENTITY()');

    return (int) $result-&gt;fetchColumn();
}
</code></pre>

<p>But this class isn't used from my code, instead this is DebugPDO (I saw into into the BasePeer class).</p>",0,sql-server|symfony|propel
29759497,Dynamic SQL Pivot Query with Union All,"<p>I have a static pivot query that tracks historical pricing (see below); it is union all of one table of current data, one table of historical data, and one related table. </p>

<p>I would like to convert it to a dynamic SQL pivot query so that I don't manually have to update the column heading dates all of the time, but I am having problems doing so. The data comes out of an accounting system (Microsoft Dynamics) running on SQL Server, and due to system limitations, I am unable to use ansi nulls/ paddings/ warnings and also unable to use quoted identifiers. Is there another way to create a dynamic sql pivot query?</p>

<p>Here is my current query. I want to replace the month-end dates with dynamic sql. I have view access to the data only.</p>

<pre><code>SELECT ACTDESCR AS ""ACCT NAME"", concat(right(actnumbr_2,2), actnumbr_3) as PLU, [3/31/2015], [2/28/2015], [1/31/2015], [12/31/2015], [11/30/2014], [10/31/2014], [9/30/2014], [8/31/2014], [7/31/2014], [6/30/2014], [5/31/2014], [4/30/2014], [3/31/2014], [2/28/2014], [1/31/2014]
FROM
(SELECT A.ACTDESCR, EOMONTH(DATEFROMPARTS(B.YEAR1,B.PERIODID,1),0) AS DATE1, A.actnumbr_2, a.actnumbr_3, B.PERDBLNC, A.ACTNUMBR_1
FROM TEST.dbo.table1 AS A   

LEFT OUTER JOIN TEST.dbo.TABLE2 AS b
ON (a.ACTINDX = b.ACTINDX)

UNION ALL

SELECT A.ACTDESCR, EOMONTH(DATEFROMPARTS(C.YEAR1,C.PERIODID,1),0) AS DATE1, A.actnumbr_2, a.actnumbr_3, C.PERDBLNC, A.ACTNUMBR_1
FROM TEST.dbo.TABLE1 AS A

LEFT OUTER JOIN TEST.dbo.TABLE3 AS C
ON (a.ACTINDX = C.ACTINDX)
) AS ST

PIVOT
(
SUM(PERDBLNC)
FOR DATE1 IN ([3/31/2015], [2/28/2015], [1/31/2015], [12/31/2015], [11/30/2014], [10/31/2014], [9/30/2014], [8/31/2014], [7/31/2014], [6/30/2014], [5/31/2014], [4/30/2014], [3/31/2014], [2/28/2014], [1/31/2014])

) AS PVT

WHERE ACTNUMBR_1 = ?
</code></pre>",0,sql-server|pivot|dynamic-sql|microsoft-dynamics
29965575,Error while trying to connect Android to MySQL database using JDBC,"<p>I wrote a simple application in Android which consists of a button that,when clicked,tries to connect to a MySQL database using JDBC.
Now,i tried to enter the URL and credentials of a database located on the internet,and I was able to connect to it.</p>

<h2> </h2>

<p>When i try to connect to the MySQL database i installed on my PC,it throws an SQLException regarding (i think) the JDBC string.
I used the root credentials for the access,in this way:</p>

<h2>jdbc:mysql://localhost:3306/db_name</h2>

<p>I also tried to run the connection in a Java Application,and it runs fine...it has some sort of problem in Android.
There's the code of my application:</p>

<pre><code>       package com.example.testconnessionemysql;

       import java.sql.Connection;
       import java.sql.DriverManager;
       import java.sql.ResultSet;
       import java.sql.SQLException;






       import android.app.Activity;
       import android.app.ProgressDialog;
       import android.os.AsyncTask;
       import android.os.Bundle;
       import android.view.Menu;
       import android.view.MenuItem;
       import android.view.View;
       import android.view.View.OnClickListener;
       import android.widget.Button;
       import android.widget.Toast;

        public class MainActivity extends Activity implements               OnClickListener{
         Button bottone;
         @Override
         protected void onCreate(Bundle savedInstanceState) {
         super.onCreate(savedInstanceState);
         setContentView(R.layout.activity_main);
         bottone = (Button)findViewById(R.id.button1);
         bottone.setOnClickListener(this);





}




          class ConnectAsync extends AsyncTask&lt;String, Void, String&gt; {

          @Override
          protected String doInBackground(String... urls) {

          String url = ""jdbc:mysql://localhost:3306/prova"";
          String user = ""root"";
          String password = ""my_psw"";


          Connection connection = null;
          try {
            Class.forName(""com.mysql.jdbc.Driver"");
            connection = DriverManager.getConnection(url,user,password);
           } catch (ClassNotFoundException e) {
            System.out.println(""Driver non caricato"");
            e.printStackTrace();
        } catch (SQLException e) {
            e.printStackTrace();
            System.out.println(""Errore con url e credenziali!"");

        }

        if(connection!= null)
        {System.out.println(""Connessione riuscita!"");}
        return null;}

         }



        public void connectToDB(View view)
        {
         ConnectAsync task = new ConnectAsync();
       task.execute();







               }



              @Override
              public void onClick(View v) {
               connectToDB(v);

             }



                }
</code></pre>

<p>I also put the logcat here:</p>

<pre><code>04-30 06:25:17.670: W/EGL_emulation(1965): eglSurfaceAttrib not     implemented
04-30 06:25:22.150: W/System.err(1965): com.mysql.jdbc.exceptions.jdbc4.CommunicationsException: Communications link failure
04-30 06:25:22.150: W/System.err(1965): The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.
04-30 06:25:22.150: W/System.err(1965):     at java.lang.reflect.Constructor.constructNative(Native Method)
04-30 06:25:22.150: W/System.err(1965):     at java.lang.reflect.Constructor.newInstance(Constructor.java:423)
04-30 06:25:22.150: W/System.err(1965):     at com.mysql.jdbc.Util.handleNewInstance(Util.java:389)
04-30 06:25:22.150: W/System.err(1965):     at com.mysql.jdbc.SQLError.createCommunicationsException(SQLError.java:1038)
04-30 06:25:22.150: W/System.err(1965):     at com.mysql.jdbc.MysqlIO.&lt;init&gt;(MysqlIO.java:338)
04-30 06:25:22.150: W/System.err(1965):     at com.mysql.jdbc.ConnectionImpl.coreConnect(ConnectionImpl.java:2237)
04-30 06:25:22.150: W/System.err(1965):     at com.mysql.jdbc.ConnectionImpl.connectOneTryOnly(ConnectionImpl.java:2270)
04-30 06:25:22.150: W/System.err(1965):     at com.mysql.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:2069)
04-30 06:25:22.150: W/System.err(1965):     at com.mysql.jdbc.ConnectionImpl.&lt;init&gt;(ConnectionImpl.java:794)
04-30 06:25:22.150: W/System.err(1965):     at com.mysql.jdbc.JDBC4Connection.&lt;init&gt;(JDBC4Connection.java:44)
04-30 06:25:22.150: W/System.err(1965):     at java.lang.reflect.Constructor.constructNative(Native Method)
04-30 06:25:22.150: W/System.err(1965):     at java.lang.reflect.Constructor.newInstance(Constructor.java:423)
04-30 06:25:22.150: W/System.err(1965):     at com.mysql.jdbc.Util.handleNewInstance(Util.java:389)
04-30 06:25:22.150: W/System.err(1965):     at com.mysql.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:399)
04-30 06:25:22.150: W/System.err(1965):     at com.mysql.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:325)
04-30 06:25:22.150: W/System.err(1965):     at java.sql.DriverManager.getConnection(DriverManager.java:179)
04-30 06:25:22.150: W/System.err(1965):     at java.sql.DriverManager.getConnection(DriverManager.java:213)
04-30 06:25:22.150: W/System.err(1965):     at com.example.testconnessionemysql.MainActivity$ConnectAsync.doInBackground(MainActivity.java:55)
04-30 06:25:22.150: W/System.err(1965):     at com.example.testconnessionemysql.MainActivity$ConnectAsync.doInBackground(MainActivity.java:1)
04-30 06:25:22.150: W/System.err(1965):     at android.os.AsyncTask$2.call(AsyncTask.java:288)
04-30 06:25:22.150: W/System.err(1965):     at java.util.concurrent.FutureTask.run(FutureTask.java:237)
04-30 06:25:22.150: W/System.err(1965):     at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:231)
04-30 06:25:22.150: W/System.err(1965):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1112)
04-30 06:25:22.150: W/System.err(1965):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:587)
04-30 06:25:22.150: W/System.err(1965):     at java.lang.Thread.run(Thread.java:841)
04-30 06:25:22.150: W/System.err(1965): Caused by: java.net.SocketException: socket failed: EACCES (Permission denied)
04-30 06:25:22.150: W/System.err(1965):     at libcore.io.IoBridge.socket(IoBridge.java:576)
04-30 06:25:22.150: W/System.err(1965):     at java.net.PlainSocketImpl.create(PlainSocketImpl.java:201)
04-30 06:25:22.150: W/System.err(1965):     at java.net.Socket.checkOpenAndCreate(Socket.java:664)
04-30 06:25:22.150: W/System.err(1965):     at java.net.Socket.setTcpNoDelay(Socket.java:530)
04-30 06:25:22.150: W/System.err(1965):     at com.mysql.jdbc.StandardSocketFactory.configureSocket(StandardSocketFactory.java:134)
04-30 06:25:22.150: W/System.err(1965):     at com.mysql.jdbc.StandardSocketFactory.connect(StandardSocketFactory.java:205)
04-30 06:25:22.150: W/System.err(1965):     at com.mysql.jdbc.MysqlIO.&lt;init&gt;(MysqlIO.java:297)
04-30 06:25:22.150: W/System.err(1965):     ... 20 more
04-30 06:25:22.150: W/System.err(1965): Caused by: libcore.io.ErrnoException: socket failed: EACCES (Permission denied)
04-30 06:25:22.150: W/System.err(1965):     at libcore.io.Posix.socket(Native Method)
04-30 06:25:22.150: W/System.err(1965):     at libcore.io.BlockGuardOs.socket(BlockGuardOs.java:181)
04-30 06:25:22.150: W/System.err(1965):     at libcore.io.IoBridge.socket(IoBridge.java:561)
04-30 06:25:22.150: W/System.err(1965):     ... 26 more
04-30 06:25:22.150: I/System.out(1965): Errore con url e credenziali!
</code></pre>

<p>As you can see from the logcat,it catches an SQLException and prints out the message I wrote in the code,so I think there's a problem with the database connectivity.
I use MYSQL Workbench to handle this database,i also granted the root user the privilege to access from every IP address,and i also edited the my.ini MySQL configuration file in this way:</p>

<pre><code>[mysqld]
...

bind-address    = *
#skip-networking
...
</code></pre>

<p>I use MySQL Server 5.6,and I used mysql-connector-java-5.1.35-bin.jar as JDBC driver.
As I previously said,I was able to connect to another MySQL database on the internet using the same code without errors...I just can't find what's going on with my database.</p>

<p>I know that JDBC database connection in Android isn't the best solution,but I wanted to practice this way before moving to something more efficient (like JSON and web services).
Thanks in advance!</p>",0,android|mysql|jdbc|connection
30176530,Creating a trigger to adjust product stock - APEX ORACLE,"<p>I'm trying to create a trigger on APEX ORACLE so that when a purchase goes through the <strong>orderline</strong> table, the quantity that is set when the customer buys the products is taken off the stock in the <strong>products table</strong>.</p>

<pre><code>CREATE or Replace TRIGGER updatestock
AFTER DELETE OR UPDATE OF QUANTITY.ORDERLINE ON ORDERLINE
FOR EACH ROW
BEGIN
   SET PRODUCT_STOCK.PRODUCTS = PRODUCT_STOCK.PRODUCTS - QUANTITY.ORDERLINE
   WHERE PRODUCT_ID.ORDERLINE = PRODUCT_ID.PRODUCTS
END;
</code></pre>

<p>Basically I want the trigger to notice the quantity in the orderline and minus it from the product stock. However, I get the following error:</p>

<p><strong>ORA-01748: only simple column names allowed here</strong></p>

<p>Could anyone point me in the right direction?</p>

<p>SQL:</p>

<pre><code>DROP TABLE ADMIN CASCADE CONSTRAINTS ;
DROP TABLE USERS CASCADE CONSTRAINTS ;
DROP TABLE STALLS CASCADE CONSTRAINTS ;
DROP TABLE PRODUCTS CASCADE CONSTRAINTS ;
DROP TABLE STALLHOLDER CASCADE CONSTRAINTS ;
DROP TABLE CUSTOMERORDER CASCADE CONSTRAINTS;
DROP TABLE ORDERLINE CASCADE CONSTRAINTS;
DROP TABLE COLLECTION CASCADE CONSTRAINTS;
drop sequence ADMIN_ID_SEQ;
drop sequence USER_ID_SEQ;
drop sequence STALL_ID_SEQ;
drop sequence PRODUCT_ID_SEQ;
drop sequence STALLHOLDER_ID_SEQ;
drop sequence CUSTOMERORDER_ID_SEQ;
drop sequence ORDERLINE_ID_SEQ;
drop sequence COLLECTION_ID_SEQ;
create sequence ADMIN_ID_SEQ start with 1;
create sequence USER_ID_SEQ start with 1;
create sequence STALL_ID_SEQ start with 1;
create sequence PRODUCT_ID_SEQ start with 1;
create sequence STALLHOLDER_ID_SEQ start with 1;
create sequence CUSTOMERORDER_ID_SEQ start with 1;
create sequence COLLECTION_ID_SEQ start with 1;
create sequence ORDERLINE_ID_SEQ start with 1;

CREATE table COLLECTION (
    COLLECTION_ID NUMBER(20) NOT NULL PRIMARY KEY,
    STATUS        VARCHAR(10) NOT NULL,
    TIME          NUMBER(4) NOT NULL);

CREATE table CUSTOMERORDER (
    ORDER_ID      NUMBER(15) NOT NULL PRIMARY KEY,
    ORDER_DATE    NUMBER(8) NOT NULL,
    STATUS        VARCHAR2(10) NOT NULL,
    COLLECTION_ID NUMBER(20) NOT NULL);

CREATE TABLE STALLS (
    STALL_ID      NUMBER(15) NOT NULL PRIMARY KEY,
    STALL_NAME    VARCHAR(25) NOT NULL,
    STALL_DESC    VARCHAR(100),
    STALL_TYPE    VARCHAR(25) NOT NULL,
    STALLHOLDER_ID  NUMBER(25) NOT NULL);

CREATE TABLE PRODUCTS (
    PRODUCT_ID    NUMBER(15) NOT NULL PRIMARY KEY,
    PRODUCT_NAME  VARCHAR(25) NOT NULL,
    PRODUCT_TYPE  VARCHAR(15) NOT NULL,
    PRODUCT_PRICE NUMBER(6,2) NOT NULL,
    PRODUCT_STOCK NUMBER(3) NOT NULL,    
    STALL_ID      NUMBER(15) NOT NULL); 

CREATE table ORDERLINE (
    ORDERLINE_ID  NUMBER(15) NOT NULL PRIMARY KEY,
    QUANTITY      NUMBER(2) NOT NULL,
    TOTALPRICE    DECIMAL(19,4) NOT NULL,
    ORDER_ID      NUMBER(15) NOT NULL,
    PRODUCT_ID    NUMBER(15) NOT NULL);

CREATE table USERS (
    USER_ID      NUMBER(15) NOT NULL PRIMARY KEY,
    USERNAME    VARCHAR2(25) NOT NULL,
    PASSWORD    VARCHAR2(25) NOT NULL,
    NAME        VARCHAR2(25) NOT NULL,
    SURNAME     VARCHAR2(25) NOT NULL,
    ADDRESS     VARCHAR2(100) NOT NULL,
    CONTACTNO    NUMBER(11) NOT NULL);  

CREATE table STALLHOLDER (
    STALLHOLDER_ID     NUMBER(25) NOT NULL PRIMARY KEY,
    USERNAME           VARCHAR2(25) NOT NULL,
    PASSWORD           VARCHAR2(25) NOT NULL,
    NAME               VARCHAR2(25) NOT NULL,
    SURNAME            VARCHAR2(25) NOT NULL,
    CONTACTNO          NUMBER(11) NOT NULL);

CREATE table ADMIN (
    ADMIN_ID      NUMBER(15) NOT NULL PRIMARY KEY,
    USERNAME    VARCHAR2(25) NOT NULL,
    PASSWORD    VARCHAR2(25) NOT NULL);  

INSERT INTO ADMIN VALUES (ADMIN_ID_SEQ.nextval, 'Test', 'Test');
INSERT INTO ADMIN VALUES (ADMIN_ID_SEQ.nextval, 'Admin', 'Admin');

INSERT INTO STALLHOLDER VALUES (STALLHOLDER_ID_SEQ.nextval, 'Stallholder1', 'Stallholder1', 'Stall 1', 'Stall 1', '0');
INSERT INTO STALLHOLDER VALUES (STALLHOLDER_ID_SEQ.nextval, 'Stallholder2', 'Stallholder2', 'Stall 2', 'Stall 2', '0');
INSERT INTO STALLHOLDER VALUES (STALLHOLDER_ID_SEQ.nextval, 'Stallholder3', 'Stallholder3', 'Stall 3', 'Stall 3', '0');
INSERT INTO STALLHOLDER VALUES (STALLHOLDER_ID_SEQ.nextval, 'Stallholder4', 'Stallholder4', 'Stall 4', 'Stall 4', '0');
INSERT INTO STALLHOLDER VALUES (STALLHOLDER_ID_SEQ.nextval, 'Stallholder5', 'Stallholder5', 'Stall 5', 'Stall 5', '0');
INSERT INTO STALLHOLDER VALUES (STALLHOLDER_ID_SEQ.nextval, 'Stallholder6', 'Stallholder6', 'Stall 6', 'Stall 6', '0');

INSERT INTO USERS VALUES (USER_ID_SEQ.nextval, 'Test', 'Test', 'Test', 'Test', 'Test', '0');
INSERT INTO USERS VALUES (USER_ID_SEQ.nextval, 'Test2', 'Test2', 'Test2', 'Test2', 'Test2', '0');
INSERT INTO USERS VALUES (USER_ID_SEQ.nextval, 'Test3', 'Test3', 'Test3', 'Test3', 'Test3', '0');
INSERT INTO USERS VALUES (USER_ID_SEQ.nextval, 'Test4', 'Test4', 'Test4', 'Test4', 'Test4', '0');

INSERT INTO STALLS VALUES (STALL_ID_SEQ.nextval, 'Meat Store', '', 'Meat', '1');
INSERT INTO STALLS VALUES (STALL_ID_SEQ.nextval, 'Meat Store 2', '', 'Meat', '2');
INSERT INTO STALLS VALUES (STALL_ID_SEQ.nextval, 'Confectionary Store', '', 'Confectionary', '3');
INSERT INTO STALLS VALUES (STALL_ID_SEQ.nextval, 'Confectionary Store 2', '', 'Confectionary', '4');
INSERT INTO STALLS VALUES (STALL_ID_SEQ.nextval, 'Clothing Store', '', 'Clothing', '5');
INSERT INTO STALLS VALUES (STALL_ID_SEQ.nextval, 'Phone Store', '', 'Clothing', '6');

INSERT INTO PRODUCTS VALUES (PRODUCT_ID_SEQ.nextval, 'Steak', 'Meat', '5.99', '15', '0', '1');
INSERT INTO PRODUCTS VALUES (PRODUCT_ID_SEQ.nextval, 'Steak', 'Meat', '9.99', '10','0', '1');
INSERT INTO PRODUCTS VALUES (PRODUCT_ID_SEQ.nextval, 'Steak', 'Meat', '12.99', '10','0', '1');
INSERT INTO PRODUCTS VALUES (PRODUCT_ID_SEQ.nextval, 'Pork', 'Meat', '3.99', '20','0', '1');
INSERT INTO PRODUCTS VALUES (PRODUCT_ID_SEQ.nextval, 'Pork', 'Meat', '5.99', '20','0', '1');
INSERT INTO PRODUCTS VALUES (PRODUCT_ID_SEQ.nextval, 'Pork', 'Meat', '8.99', '15','0', '1');
INSERT INTO PRODUCTS VALUES (PRODUCT_ID_SEQ.nextval, 'Bacon', 'Meat', '1.99', '20','0', '1');
INSERT INTO PRODUCTS VALUES (PRODUCT_ID_SEQ.nextval, 'Bacon', 'Meat', '2.99', '20','0', '1');
INSERT INTO PRODUCTS VALUES (PRODUCT_ID_SEQ.nextval, 'Bacon', 'Meat', '3.99', '20','0', '1');
INSERT INTO PRODUCTS VALUES (PRODUCT_ID_SEQ.nextval, 'Steak', 'Meat', '5.99', '15','0', '2');
INSERT INTO PRODUCTS VALUES (PRODUCT_ID_SEQ.nextval, 'Steak', 'Meat', '9.99', '20','0', '2');
INSERT INTO PRODUCTS VALUES (PRODUCT_ID_SEQ.nextval, 'Steak', 'Meat', '12.99', '20','0', '2');
INSERT INTO PRODUCTS VALUES (PRODUCT_ID_SEQ.nextval, 'Pork', 'Meat', '3.99', '15','0', '2');
INSERT INTO PRODUCTS VALUES (PRODUCT_ID_SEQ.nextval, 'Pork', 'Meat', '5.99', '15','0', '2');
INSERT INTO PRODUCTS VALUES (PRODUCT_ID_SEQ.nextval, 'Pork', 'Meat', '8.99', '15','0', '2');
INSERT INTO PRODUCTS VALUES (PRODUCT_ID_SEQ.nextval, 'Bacon', 'Meat', '1.99', '20','0', '2');
INSERT INTO PRODUCTS VALUES (PRODUCT_ID_SEQ.nextval, 'Bacon', 'Meat', '2.99', '20','0', '2');
INSERT INTO PRODUCTS VALUES (PRODUCT_ID_SEQ.nextval, 'Bacon', 'Meat', '3.99', '20','0', '2');
INSERT INTO PRODUCTS VALUES (PRODUCT_ID_SEQ.nextval, 'Haribo', 'Sweets', '1.50', '50','0', '3');
INSERT INTO PRODUCTS VALUES (PRODUCT_ID_SEQ.nextval, 'Haribo', 'Sweets', '1.00', '50','0', '3');
INSERT INTO PRODUCTS VALUES (PRODUCT_ID_SEQ.nextval, 'PicknMix100g', 'Sweets', '2.00', '999','0', '3');
INSERT INTO PRODUCTS VALUES (PRODUCT_ID_SEQ.nextval, 'PicknMix200g', 'Sweets', '3.50', '999','0', '3');
INSERT INTO PRODUCTS VALUES (PRODUCT_ID_SEQ.nextval, 'ToxicWaste', 'Sweets','1.50','50','0','3');
INSERT INTO PRODUCTS VALUES (PRODUCT_ID_SEQ.nextval, 'Haribo', 'Sweets', '1.50', '100','0', '4');
INSERT INTO PRODUCTS VALUES (PRODUCT_ID_SEQ.nextval, 'Haribo', 'Sweets', '1.00', '100','0', '4');
INSERT INTO PRODUCTS VALUES (PRODUCT_ID_SEQ.nextval, 'PicknMix100g', 'Sweets', '2.00', '999','0', '4');
INSERT INTO PRODUCTS VALUES (PRODUCT_ID_SEQ.nextval, 'PicknMix200g', 'Sweets', '3.50', '999','0', '4');
INSERT INTO PRODUCTS VALUES (PRODUCT_ID_SEQ.nextval, 'ToxicWaste', 'Sweets', '1.50', '50','0', '4');
INSERT INTO PRODUCTS VALUES (PRODUCT_ID_SEQ.nextval, 'T-Shirts', 'Clothing', '10.00', '20','0', '5');
INSERT INTO PRODUCTS VALUES (PRODUCT_ID_SEQ.nextval, 'Shorts', 'Clothing', '15.00', '20','0', '5');
INSERT INTO PRODUCTS VALUES (PRODUCT_ID_SEQ.nextval, 'Jeans', 'Clothing', '20.00', '20','0', '5');
INSERT INTO PRODUCTS VALUES (PRODUCT_ID_SEQ.nextval, 'Hoodies', 'Clothing', '20.00', '20','0', '5');
INSERT INTO PRODUCTS VALUES (PRODUCT_ID_SEQ.nextval, 'Vests', 'Clothing', '10.00', '20','0', '5');

ALTER TABLE STALLS ADD CONSTRAINT FK_STALLHOLDER_ID FOREIGN KEY (STALLHOLDER_ID) REFERENCES STALLHOLDER(STALLHOLDER_ID);
ALTER TABLE ORDERLINE ADD CONSTRAINT FK_ORDER_ID FOREIGN KEY (ORDER_ID) REFERENCES CUSTOMERORDER(ORDER_ID);
ALTER TABLE ORDERLINE ADD CONSTRAINT FK_PRODUCT_ID FOREIGN KEY (PRODUCT_ID) REFERENCES PRODUCTS(PRODUCT_ID);
ALTER TABLE CUSTOMERORDER ADD CONSTRAINT FK_COLLECTION_ID FOREIGN KEY (COLLECTION_ID) REFERENCES COLLECTION(COLLECTION_ID);
ALTER TABLE PRODUCTS ADD CONSTRAINT FK_STALL_ID FOREIGN KEY (STALL_ID) REFERENCES STALLS(STALL_ID);
</code></pre>

<p>​</p>",0,sql|oracle|triggers|oracle-apex
29894573,Get current database transaction id using jdbc/hibernate?,"<p>I've looked around on Google for this but couldn't find anything relevant. Basically, I want to get hold of long running transactions.   </p>

<p>For now, I go through <code>information_schema.INNODB_TRX</code> or have a look at the output of <code>show engine innodb status</code> to find the <code>trx_id</code> and then turn on <code>general_logs</code> to see what all queries are running.  </p>

<p>Is there a way, I can get hold of this <code>transaction_id</code> in my code using <code>jdbc</code> or <code>hibernate</code> so that I can log it in my server logs?</p>",5,java|mysql|hibernate|jdbc|transactions
29937202,sql server 2008 Pivot View,"<pre><code>create view Vw_sub

as

DECLARE
 @cols AS NVARCHAR(MAX),
 @query  AS NVARCHAR(MAX)
select

 @cols = STUFF((SELECT ',' + QUOTENAME(subjectname) 
                    from Vw_Subtem where ClassID=1 and SchoolId=4 and SectionId=1
                    group by subjectname, id
                    order by id
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')


set @query = 'SELECT ' + @cols + ' from 
             (
                select  subjectname
                from Vw_Subtem
            ) x
            pivot 
            (
                max(subjectname)
                for subjectname in (' + @cols + ')
            ) p '

execute(@query)
go
</code></pre>

<p><strong>I have a Err""Incorrect syntax near the keyword 'DECLARE'."" At the time create View Plz Give me A solution How to Create View Of this</strong></p>",-1,sql-server-2008
29971906,Grouping by date in groupconcat after concatenation,"<p>I've got a list of stores in a store table, I've got a storecomment table as well which contains multiple comments for each store. They are linked via the storeID foreign key. </p>

<p>This is a subquery for a much larger query to return multiple pieces of information into a single row sorted by each store. The aim of this sub query is to return all of the comments for that store into a single column per store in the format of yyyy-mm-dd - COMMENT - Name and ordered with the newest comment at the top. I can get the string working, however it always fails to order.</p>

<pre><code>LEFT JOIN (SELECT group_concat(storecomment.CommentDate, ' - ', storecomment.Comment, ' - ', users.Name, '\n' SEPARATOR '') as storecomments, StoreID from storecomment
                       inner join users on storecomment.CommentUserID = users.UserID 
                       ORDER BY CommentDate DESC
                       group by StoreID) 
                       as storecomments on store.StoreID = storecomments.StoreID
</code></pre>

<p>This mostly works, however the ordering for comments fails and it comes out into the order they were entered.</p>

<p>I've also tried ordering by the first part of the concatinated string such as:</p>

<pre><code>LEFT JOIN (SELECT group_concat(storecomment.CommentDate, ' - ', storecomment.Comment, ' - ', users.Name, '\n' SEPARATOR '') as storecomments, StoreID from storecomment
                       inner join users on storecomment.CommentUserID = users.UserID
                       group by StoreID
                       Order by UNIX_TIMESTAMP(SUBSTRING(storecomments,9)) DESC)
                       as storecomments on store.StoreID = storecomments.StoreID
</code></pre>

<p>And finally I tried converting the datetime to a unix timestamp and ordering that way, but it still fails to order:</p>

<pre><code>LEFT JOIN (SELECT group_concat(storecomment.CommentDate, ' - ', storecomment.Comment, ' - ', users.Name, '\n' SEPARATOR '') as storecomments, StoreID from storecomment
                        inner join users on storecomment.CommentUserID = users.UserID
                        group by StoreID
                        Order by UNIX_TIMESTAMP(STR_TO_DATE(storecomment.CommentDate, '%Y-%m-%d %h:%i%p')) DESC
                        as storecomments on store.StoreID = storecomments.StoreID
</code></pre>

<p>I'm sure there is an easy way to sort this out, but I just can't see it. Does anyone have any suggestions? </p>",0,mysql|group-concat
30012285,Query select record value as % of total records value for each group by value,"<p>I have a table like the one below</p>

<pre><code>product....group....sales
1..........A........1000
2..........A........2000
3..........B........3000
</code></pre>

<p>I would like to calculate the % of each group in total sales</p>

<pre><code>A....50%
B....50%
</code></pre>

<p>Thanks in advance for any help!!!</p>",0,sql|ms-access
29866595,How to compare multiple table columns with multiple values?,"<p>I have a table with <strong>N</strong> columns like this</p>

<hr>

<blockquote>
  <p>column 1 | column 2 | column 3 | ...column <strong>N</strong></p>
</blockquote>

<hr>

<p>I have <strong>n</strong> values like this</p>

<hr>

<blockquote>
  <p>value 1 , value 2 , value 3 , ...value <strong>n</strong></p>
</blockquote>

<hr>

<p>I wanted to compare these <strong>n</strong> values with my table's <strong>N</strong> columns. One way I can do it is:</p>

<pre><code>Select * from table where

column 1 IN (value 1 , value 2 , value 3 , ...value n)
||
column 2 IN (value 1 , value 2 , value 3 , ...value n)
||
column 3 IN (value 1 , value 2 , value 3 , ...value n)
||
.
.
.
column n IN (value1 , value1 , value1 , ...value n)
</code></pre>

<p>Is this the most <strong><em>fastest</em></strong> way to do it?</p>",0,mysql|performance|select|where
29852856,Import and automatically update table from external website to sql,"<p>I am creating a football player search system and would like to implement a live stats into my database. I have received permission from opta sport to user their data for my project. </p>

<p>the data I would like to extract on a weekly basis is here : </p>

<p><a href=""http://www.whoscored.com/Regions/252/Tournaments/2/Seasons/4311/Stages/9155/PlayerStatistics/England-Premier-League-2014-2015"" rel=""nofollow"">http://www.whoscored.com/Regions/252/Tournaments/2/Seasons/4311/Stages/9155/PlayerStatistics/England-Premier-League-2014-2015</a></p>

<p>and looks as so:</p>

<pre><code>R| Name | ..........Apps|   Mins|   Goals|  Assists |Yel|   Red|    SpG|    PS%|    AerialsWon| MotM

1|  Eden Hazard |  ...32 |      2841|   .....13| ..........8|    2| ....... -|  .2.1 |  86.9|   0.4 ..............|      9  
</code></pre>

<p>please ignore the '....' they are just in place to keep the information look how it should in here.</p>

<p><strong>My problems are:</strong></p>

<p>Issue 1: I do not have access to the sites database.</p>

<p>Issue 2: I do not know how to extract the data directly into my sql server.</p>

<p>Any assistance will be greatly appreciated .</p>",2,mysql|sql|database
30067185,Trying to connect to Sql Server using MAMP OS X,"<p>I need help please.
I am trying to make a connection to a Sql Server Database using Mamp on my Mac.</p>

<p>MS SQL Server Express 2012</p>

<p>I have followed this tutorial <a href=""http://www.ziqijin.com/installing-the-mssql-module-for-mac-os-x/"" rel=""nofollow"">http://www.ziqijin.com/installing-the-mssql-module-for-mac-os-x/</a> and I am successfully displaying <strong>mssql</strong> and <strong>pdo_dblib</strong> in my phpinfo() page. </p>

<p>Heres a screen shot of my phpinfo() page.
<a href=""http://southerncolour.com.au/screenshot.png"" rel=""nofollow"">http://southerncolour.com.au/screenshot.png</a></p>

<p>The PHP code I am using to connect is:</p>

<p><div class=""snippet"" data-lang=""js"" data-hide=""false"">
<div class=""snippet-code"">
<pre class=""snippet-code-html lang-html prettyprint-override""><code>try {
        $hostname = ""scpbm01.xxx.com.au"";
        $port = ""1433"";
        $dbname = ""sclive"";
        $username = ""NAVUser"";
        $pw = ""xxxx"";
     
        $dbh = new PDO (""dblib:host=$hostname:$port;dbname="",'$username','$pw');
     
      } catch (PDOException $e) {
        echo ""Failed to get DB handle: "" . $e-&gt;getMessage() . ""\n"";
        exit;
      }</code></pre>
</div>
</div>
</p>

<p>When I run this code, I get the following error message.</p>

<p><strong>Failed to get DB handle: SQLSTATE[01002] Adaptive Server connection failed (severity 9)</strong></p>

<p>Can anyone please help??</p>

<p>I have been trying for 2 days with no luck.</p>

<p>Cheers Dave</p>",2,php|sql-server|macos|mamp
29756806,How to create a trigger to populate a table from another table in a different database,"<p>Basically what I'm trying to do is create a dynamic trigger where if a table from database 1 has a new record inputed. if it falls in the category of data that I need for database 2, it automatically populates the table in database 2 without me needed to manually update.</p>

<p>Right now I am going into the table in database 1 sorting for the category I need and copying the data I need into the table in database 2.</p>

<p>I tried to make this process easier by doing a select query for the columns that I need from database 1 to database 2, which works fine however it overwrites what I have already and I have to basically recreate everytime.</p>

<p>So after all that rambling I guess exactly what I need to know. Is there a way to create a trigger that if a new line item is inputed in database 1 with the tag matching the type of material I need to transfer to database 2. Also on top of that I only need to transfer 2 columns from database 1 to database 2.</p>

<p>I would try to post a sample code, however I have no idea where to start on this.</p>",0,sql-server|database
29896720,Fetch multiple rows into a variable,"<p>I am attempting to fetch multiple unique account ID's (transactions.ID) and store in Variable v_Trxn. The problem is that the query count returns incorrect. Expected result is 300485 rows. </p>

<pre><code>DECLARE
l_Partition transactions.Partitionkey%TYPE;
v_Trxn transactions.ID%TYPE;
l_Count number;
CURSOR v_Trxn_cur IS
SELECT ID
FROM transactions
WHERE Partitionkey &gt; l_Partition;

BEGIN

SELECT dl_common.Get_Partitionkey(aInstitutionId =&gt; DL_COMMON.Get_InstitutionId , aDate =&gt; add_months(sysdate,-4)) INTO l_Partition FROM Dual;

OPEN v_Trxn_Cur;
LOOP
FETCH v_Trxn_Cur INTO v_Trxn;
EXIT WHEN v_Trxn_Cur%NOTFOUND;
END LOOP;


SELECT COUNT(UNIQUE(ID)) INTO l_Count FROM transactions WHERE ID In v_Trxn;
DBMS_OUTPUT.PUT_LINE(l_Count || ' Number of Unique Sernos');
CLOSE v_Trxn_Cur;
End;
</code></pre>

<p>Output: <code>1 Number of Unique Sernos</code></p>

<p>If I put the partitionkey directly into the WHERE clause I get the expected number of rows.</p>

<pre><code>SELECT 
dl_common.Get_Partitionkey(aInstitutionId =&gt; DL_COMMON.Get_InstitutionId,
                                  aDate          =&gt; add_months(sysdate, -4)) PARTITION
FROM Dual;
</code></pre>

<p>Returns: <code>PARTITION 2914365</code></p>

<pre><code>SELECT 
COUNT(UNIQUE(ID)) C_COUNT 
FROM transactions C 
WHERE C.Partitionkey &gt; 2914365
</code></pre>

<p>Returns: <code>C_COUNT   300485</code></p>

<p>The expected number of rows is fetched. </p>

<p>Please explain what I am doing wrong. </p>",1,sql|oracle|plsql
29810571,How to echo row (datetime) with other format?,"<p><strong>Part of php code (mysqli)</strong></p>

<pre><code>["" .$row[""comment_datetime""] . ""] 
</code></pre>

<p>the rest of the php will not put here because anyone can create own example (query, sql connect, etc ...)</p>

<p><strong>The echo output:</strong></p>

<p>[YYYY-MM-DD HH:MM:SS]</p>

<p><strong>P.S: The question don't is a duplicate because, i trying echo this on row->&lt;-mysqli</strong></p>

<p><strong>Thanks Aiken, the code has been converted.</strong></p>",0,php|mysqli|phpmyadmin
30196290,Why use Hive on Spark instead of Spark-SQL?,"<p>I'm new to the Data Science field and I don't understand why would someone want to connect Hive to Spark instead of just using Sqark-SQL.</p>

<p>What benefits are there for using Hive on Spark rather than Spark-SQL (other than being able to use Hive code already in production)? </p>

<p>Thanks</p>",1,apache-spark|hive|bigdata|apache-spark-sql
29990805,sqlite select AS behavior,"<p>I got a little problem with the AS in a select statement, it kinda change the type of my column from INTEGER to TEXT. </p>

<pre><code>sqlite&gt; drop table t;
sqlite&gt; create table t (x integer);
sqlite&gt; insert into t values (0);
sqlite&gt; insert into t values (1);
sqlite&gt; insert into t values (2);
sqlite&gt; insert into t values (3);
sqlite&gt; insert into t values (1010);
sqlite&gt;
sqlite&gt; .mode column t
sqlite&gt; .headers on
sqlite&gt; select printf('%d',x) from t order by x desc;
printf('%d',x)
--------------
1010
3
2
1
0
</code></pre>

<p>The sort is OK now renaming the Col to get a better header.</p>

<pre><code>sqlite&gt; select printf('%d',x) as x from t order by x desc;
x
----------
3
2
1010
1
0
</code></pre>

<p>The sort is no good anymore, like if doing AS make nx become a TEXT ?</p>

<p>Quoting don't help</p>

<pre><code>sqlite&gt; select printf('%d',x) as 'x' from t order by x desc;
x
----------
3
2
1010
1
0
</code></pre>

<p>Unless you stick something in the AS like this</p>

<pre><code>sqlite&gt; select printf('%d',x) as 'x ' from t order by x desc;
x
----------
1010
3
2
1
0
</code></pre>

<p>Is that the expected behavior ?</p>

<p>Thanx for any advises
Cheers,
Phi</p>",0,sqlite|select
29903198,Update MySQL database table schema,"<p>I want to update a MySQL database schema (with MySQL code) but I am unfortunately not sure of the state of the tables, as they are distributed..</p>

<p>Let's say I some 'clients' have a table called ""user"" with a schema like</p>

<pre><code>'name' VARCHAR(64) NOT NULL
'password' VARCHAR(64) NOT NULL
</code></pre>

<p>I want to add an 'email' column, but it's possible that they already have an email column (depending on their installation version).</p>

<p>How can I run a command that ensures that there is a ""email"" column and does nothing if it's already there? Keep in mind I would be doing this for many tables that are more complex.</p>

<p>I know I could be creating temp tables and re-populating (and will if it's the only solution) but I figure there might be some kind of CREATE or UPDATE table command that has ""oh you already have that column, skip"" logic.</p>",3,mysql|database
29811073,How to filter a column using multi value parameter list in SSRS,"<p>I am new to SSRS. What I thought should be very simple took me 1 day and I am not able to fix it. All I need is the following</p>

<pre><code>Select * from table1 where len(username) &lt;= 6
Select * from table1 where len(username) &gt;= 7
</code></pre>

<p>I want to display a drop menu with two options Short Username and Long Username.
When a username click the short username the first query result is showed and when the user click Long username the second query result is showed.</p>

<p>What I did so far is I added a parameter list with two values i.e Short parameter list = 6 and Long parameter list = 7. I then added two filters. In the first the expression= len(NameColumn.value)  operator= &lt;= value = @parameter. In the second the expression= len(NameColumn.value) operator= >= value = @parameter. Can you please what can I do to achieve it.</p>",2,sql-server|reporting-services|ssrs-2008|ssrs-2008-r2|ssrs-2012
29799888,Move empty copy of db from windows to linux,"<p>I have a PostgreSQL db on a windows 7 machine. I need to create a copy of it on a Linux Mint machine.</p>

<p>Is there a way to create a template (or something?) from my existing db on the windows machine, then use it to create the same db on the Linux machine (with no data).</p>

<p>When I do this, will the primary keys for each table restart at 1 in the new db or do I have to manually do that?</p>",0,linux|windows|postgresql
30144877,"SQLite rewalking the WITH table, how efficient does it do it?","<p>I have the following query </p>

<pre><code>WITH temptable AS
  (SELECT listid,
          isplayer,
          name,
          nametagname,
          OWNER,
          target,
          helditem,
          distance
   FROM SuspectListEntries indexed BY SuspectListEntriesByListID
   WHERE listid =
       (SELECT suspectList
        FROM BlocksBrokenByExplosion
        WHERE BlocksBrokenByExplosion.id=76142)
   ORDER BY distance ASC)
SELECT *
FROM
  (SELECT isplayer,
          name,
          nametagname,
          OWNER,
          target,
          helditem,
          distance
   FROM temptable
   LEFT JOIN
     (SELECT count(*)/7 AS cnt,
                           0 AS bonus
      FROM temptable) counter ON 0 = counter.bonus LIMIT 0,
                                                         7)
</code></pre>

<p>According to the query plan it walks the temptable twice, rebuilding everything as far as I can deduce from the query plan</p>

<pre><code>""3"",""0"",""0"",""SEARCH TABLE SuspectListEntries USING INDEX SuspectListEntriesByListID (listid=?)""
""3"",""0"",""0"",""EXECUTE SCALAR SUBQUERY 4""
""4"",""0"",""0"",""SEARCH TABLE BlocksBrokenByExplosion USING INTEGER PRIMARY KEY (rowid=?)""
""3"",""0"",""0"",""USE TEMP B-TREE FOR ORDER BY""
""2"",""0"",""0"",""SCAN SUBQUERY 3""
""1"",""0"",""0"",""SEARCH TABLE SuspectListEntries USING INDEX SuspectListEntriesByListID (listid=?)""
""1"",""0"",""0"",""EXECUTE SCALAR SUBQUERY 5""
""5"",""0"",""0"",""SEARCH TABLE BlocksBrokenByExplosion USING INTEGER PRIMARY KEY (rowid=?)""
""1"",""1"",""1"",""SCAN SUBQUERY 2 AS counter""
""1"",""0"",""0"",""USE TEMP B-TREE FOR ORDER BY""
""0"",""0"",""0"",""SCAN SUBQUERY 1""
</code></pre>

<p>It walks the table twice because of my pagination method. It still does it within 0ms with a 100.000 records, so speed is not per se an issue for this question.</p>

<ol>
<li>I was just wondering, how optimized is the rewalking of a temporary view by sqlite? </li>
<li>Does sqlite actually rebuild the temp view as is kinda implied by the query planner?</li>
<li>Or is in the background the results of the temp view kept in memory and is walked over that and is the query planner merely showing what it would do if it didn't have the results already?</li>
</ol>",0,sqlite
30082589,SSH directly into MySQL server,"<p>i got a remote webserver running with a mysql database.
Right now im using SSH to do any serverside management, and i access the MySQL often. I wondered if its possible for me to make a script that would ssh into the server and if run with ""-sql"" (subject to change) on the command line it would instead go into mysql.</p>

<p>What i made so far:</p>

<pre><code>#!/bin/bash
if [ ""$1"" == ""-l"" ]; then
    ssh user@192.168.0.101 //local address for privacy;
    mysql -u root -p;
else
    ssh user@192.168.0.101
fi
</code></pre>

<p>This results in an SSH session and when it ends my computer will try and create a mysql connection on the local machine.</p>

<pre><code>#!/bin/bash
if [ ""$1"" == ""-l"" ]; then
    ssh user@192.168.0.101 'mysql -u root -p';
else
    ssh user@192.168.0.101
fi
</code></pre>

<p>This results in a password request and then nothing. I'm assuming its because using ssh with a command expects a response and then shuts down the connection.</p>

<p>Is there any way to do this, i realise that it's not of any significant importance, but it is fun to play around with</p>

<p>Thanks in advance</p>",0,mysql|linux|bash|ssh
30101018,OrientDB embeddedmap query,"<p>Let's say I have a Vertex class Data in OrientDB. Data has a property data which is of the type EMBEDDEDMAP.</p>

<p>I can create a new Vertex of this type and assign an object to the property data with the following command:</p>

<pre><code>CREATE VERTEX Data SET data = {'key1':'val1', 'key2':'val2'}
</code></pre>

<p>Let's say now that I want to query the database and get records that holds exactly this structure in the data property.</p>

<p>Ie, something in the lines of:</p>

<pre><code>SELECT FROM Data WHERE data = {""key1"":""val1"",""key2"":""val2""}
</code></pre>

<p>This doesn't work however (Note also that the structure in data is arbitrary and can have nested structures: {""key2"":{""key2"":""val2""}} etc.)</p>

<p>I know that this query is possible for an embeddedmap type:</p>

<pre><code>SELECT FROM Data WHERE ""val1"" IN data.key1 AND ""val2"" IN data.key2
</code></pre>

<p>But for arbitrary data structures it would be bothersome to parse such a query, this also made me find out another thing:</p>

<p>Let's say I create two vertices:</p>

<pre><code>CREATE VERTEX Data SET data = {""key1"":[""one"", ""two""]} 
CREATE VERTEX Data SET data = {""key1"":[""one""]} 
</code></pre>

<p>I now want to select only the first of them, for instance with:</p>

<pre><code>SELECT FROM Data WHERE [""one"", ""two""] IN data.key1
</code></pre>

<p>This query however returns both records:</p>

<pre><code>@rid    @version    @class  data
#13:7   1           Data    {""key1"":[""one"",""two""]}
#13:8   1           Data    {""key1"":[""one""]}
</code></pre>

<p>I'm guessing I have to do:</p>

<pre><code>SELECT FROM Data WHERE ""one"" IN data.key1 AND ""two"" IN data.key1
</code></pre>

<p>However, this also seems quite cumbersome for nested lists.</p>

<p><strong>Question: How could I query on a known, arbitrary data structure (embeddedmap)</strong></p>

<p>NOTE: I'm not asking about specific values in the structure, but the whole structure.</p>",1,sql|orientdb
29748652,SQL - count rows where one column matches another (pairs),"<p>I have a voting system on a website where every user can vote for a pair of users (female and male) to win.</p>

<p>The votes are stored in a table like the one below.</p>

<pre><code>voter_id |  voted_for | cell
90       |  30        | f
90       |  68        | m
42       |  30        | f
42       |  68        | m
111      |  74        | f
111      |  20        | m
45       |  120       | f
16       |  90        | f
16       |  135       | m
122      |  30        | f
122      |  68        | m
45       |  116       | m
46       |  30        | m
46       |  121       | f
</code></pre>

<p>Now, I want to count how many users voted for every pair.
E.g. '3 votes for pair 30&amp;68', '1 vote for pair 74&amp;20', '1 vote for 120&amp;116' and so on...</p>

<p>I have a SQL query which counts every user mentioned in voted_for but this doesn't include the pair-thing. It would give me 4 votes for user 30 but user 30 although is in the 30&amp;121 pair. </p>

<pre><code>SELECT voted_for, count(*) AS count
FROM votes
GROUP BY voted_for
ORDER BY count desc
</code></pre>",1,sql|sqlite|join|count
30066753,PouchDB structure,"<p>i am new with <a href=""http://en.wikipedia.org/wiki/NoSQL"" rel=""noreferrer"">nosql</a> concept, so when i start to learn <a href=""http://pouchdb.com/"" rel=""noreferrer"">PouchDB</a>, i found this conversion chart. My confusion is, how <a href=""http://pouchdb.com/"" rel=""noreferrer"">PouchDB</a> handle if lets say i have multiple table, does it  mean that i need to create multiple databases? Because from my understanding in pouchdb a database can store a lot of documents, but a document mean a row in sql or am i misunderstood?</p>

<p><img src=""https://i.stack.imgur.com/j1NnE.png"" alt=""enter image description here""></p>",15,couchdb|pouchdb|nosql
29912918,SQL QUALIFY equivalent HIVE query,"<p>I'm trying to create a <code>HIVE query</code> from an <code>Oracle SQL query</code>. Essentially I want to select the first record, sorted <code>descending</code> by <code>UPDATED_TM, DATETIME, ID_NUM</code>.</p>

<pre><code>SELECT 
  tbl1.NUM AS ID,
  tbl1.UNIT AS UNIT,  
  tbl2.VALUE AS VALUE,
  tbl1.CONTACT AS CONTACT_NAME,
  'FILE' AS SOURCE,
  CURDATE() AS DATE
FROM
  DB1.TBL1 tbl1
  LEFT JOIN DB1.TBL2 tbl2 ON tbl1.USR_ID = tbl2.USR_ID
WHERE
  tbl1.UNIT IS NOT NULL
  AND tbl1.TYPE = 'Generic'
QUALIFY 
  ROW_NUMBER() OVER (PARTITION BY tbl1.ROW_ID ORDER BY tbl1.UPDATED_TM DESC, tbl1.DATETIME DESC, tbl1.ID_NUM DESC) = 1
</code></pre>

<p>And my attempt at an equivalent <code>Hive query</code> (but also sql-compatible):</p>

<pre><code>SELECT 
  tbl1.NUM AS ID,
  tbl1.UNIT AS UNIT,  
  tbl2.VALUE AS VALUE,
  tbl1.CONTACT AS CONTACT_NAME,
  'FILE' AS SOURCE,
  CURDATE() AS DATE
FROM (
  SELECT 
    USR_ID, TYPE, NUM, UNIT, ROW_NUMBER() OVER (PARTITION BY tbl1.ROW_ID ORDER BY tbl1.UPDATED_TM DESC, tbl1.DATETIME DESC, tbl1.ID_NUM DESC) AS RNUM
  FROM 
    DB1.TBL1
  ) tbl1
  LEFT JOIN DB1.TBL2 tbl2 ON tbl1.USR_ID = tbl2.USR_ID
WHERE
  tbl1.RNUM = 1
  AND tbl1.UNIT IS NOT NULL
  AND tbl1.TYPE = 'Generic'
</code></pre>

<p>Does that seem correct? Is there any way I can optimize the query? The tables I'm working with are quite large and I would like to make this as efficient as possible.</p>

<p>Thanks.</p>",2,sql|hive|oracle-sqldeveloper|hiveql|row-number
29794829,Dispalying Column value depend on the particular condition otherwise displaying emply column value,"<p>I have the following table</p>

<pre><code>Id  col1 status Action

1    c    R     close

2    c    S     close

3    e    R     close

4    1    N     close

5    2    N    close

6    4    N     close
</code></pre>

<p>I want to display all the record with the following condition</p>

<p>1) Action column value will only when the status is N. Otherwise it will be empty</p>

<p>Required output </p>

<pre><code>Id  col1 status Action

1    c    R   

2    c    S     

3    e    R     

4    1    N     close

5    2    N     close

6    4    N     close
</code></pre>

<p>I am using SQL SERVER 2008 R2</p>

<p>Any reply will be appreciated.</p>",0,sql-server-2008
29845914,Will the Android device still run at the next startup if once happens a database locked,"<p>my friends:
  I am working on a Android App.In a cloud test, I found that some devices happened an error——""database is locked"".Considering that i have not met the error,so i wonder that once the error happens on a device, will the device run nomally at the next startup.My worry is the database will be locked forever if  the application won't clear cache or uninstalls.
Thinks for your attention.</p>",-1,android-sqlite|locked
29947015,What is wrong with this INSERT MAX+1 query?,"<p>I'm having problem with this query:</p>

<p><code>INSERT INTO invoices(invuid, linenumber) VALUES (?, SELECT(SELECT max(linenumber)+1 FROM invoices WHERE invuid=?))</code></p>

<p>It keeps saying: <code>""General error: 1093 You can't specify target table 'invoices' for update""</code></p>",1,mysql|insert|syntax-error
30065001,2 Many to Many relationship - extract data with join,"<p>Please check the schema in the link below.</p>

<p><a href=""http://s11.postimg.org/dydr5ru3n/stack.png"" rel=""nofollow"">http://s11.postimg.org/dydr5ru3n/stack.png</a></p>

<p>I want to select all properties and also the agent and the owner of each property. The problem is that both agent's and owner's details comes from the same table and there is a conflict.</p>

<p>What solution should i follow? </p>

<p>Note: Unfortunately I cannot change the db schema.</p>",0,mysql|sql|join
29762367,Day wise aggregation considering client's timezone from millions of rows,"<p>Suppose I've a table where visitors'(website visitor) information is stored. Suppose, the table structure consists of the following fields:</p>

<blockquote>
  <ol>
  <li>ID  </li>
  <li>visitor_id </li>
  <li>visit_time (stored as milliseconds in UTC since 
      '1970-01-01 00:00:00')</li>
  </ol>
</blockquote>

<p>Millions of rows are in this table and it's still growing. </p>

<p>In that case, If I want to see a report <strong>(day vs visitors)</strong> from any timezone then one solution is :</p>

<p><strong>Solution #1:</strong></p>

<ol>
<li>Get the timezone of the report viewer (i.e. client)</li>
<li>Aggregate the data from this table considering the client's timezone</li>
<li>Show the result day wise</li>
</ol>

<p>But In that case performance will degrade. Another solution may be the following:</p>

<p><strong>Solution #2:</strong></p>

<ul>
<li>Using Pre-aggregated tables / summary tables where client's timezone is ignored</li>
</ul>

<p>But in either case there is a <code>trade off between performance and correctness</code>.</p>

<p><strong>Solution #1</strong> ensures correctness and <strong>Solution #2</strong> ensures better performance.</p>

<p>I want to know what is the best practice in this particular scenario?</p>",5,mysql|bigdata|web-analytics
29890270,How to build a SQL query in Laravel 5 using join and whereNotIn in a controller?,"<p>I need to build the following Query in Laravel Controller.
Query: </p>

<pre><code>select * from table2 where id not in (select table2.id from table2 inner join table1 on table2.id = table1.id)
</code></pre>

<p>I done this:</p>

<pre><code>$cond = DB::table('table2')
-&gt;whereNotIn('id', function($query){
     $query-&gt;select(DB::raw('table2.id'))
     -&gt;from('table2 inner join table1 on table2.id = table1.id');
})-&gt;get();
</code></pre>

<p>Please, help me.</p>

<p>Thanks in advance</p>",3,mysql|laravel
29979413,SQL Server Report Builder - How to grey out a parameter with multiple sub-reports?,"<p>I have a main report which has three sub-reports. I am trying to grey out one of the parameter option when a certain report is selected. The reason I want to do that is because one of the sub report does not use this parameter. 
Here's the code I am using now. The parameter displaying the query result is @device. </p>

<pre><code>    --When user select report 2, the parameter displays the device list from table2.
    IF @selectReport = 2
    BEGIN
       SELECT DISTINCT type
       FROM table2
    END

    --When user select report 3, the parameter displays the device list from table3.
    IF @selectReport = 3
    BEGIN
       SELECT DISTINCT type
       FROM table3
    END

    --When user select report 1. I want to grey out the parameter, but I could not do it. 
    --So I created the table contains NULL value. 
    --So, when the user select the report 1, the parameter will show only null value.

    IF @selectReport = 1
    BEGIN
       SELECT DISTINCT type
       FROM nullValueTable1
    END
</code></pre>

<p>I want it to be grey out when the report 1 is selected instead of show NULL on drop down list. Any idea???</p>",0,sql|reporting-services
30131413,Different behaviour of postgresql and firebird recordsets,"<p>This question is related to one I asked earlier <a href=""https://stackoverflow.com/q/30126619/6164"">here</a>. </p>

<p>A query on a firebird database retrieved a single row recordset because
the <strong>Where</strong> clause included the primary key.
However on subsequent Update pretty much every row in the table was updated.
I had been expecting just the one row to be updated.
This was the query:</p>



<pre class=""lang-vb prettyprint-override""><code>sQuery = ""select memo from clients where clientID = 10021 ""
</code></pre>

<p>What is going on seems to be that the select query needed to include
the primary key column in the recordset in order to restrict the update to just one record.</p>

<pre class=""lang-vb prettyprint-override""><code>sQuery = ""select memo, clientID from clients where clientID = 10021 ""
</code></pre>

<p>However in postgresql, the first query works in the way the second query works in firebird.</p>

<p>Can I rely on this behaviour in postgresql or should I rewrite existing queries to include
the primary key column in recordsets that will subsequently be updated?</p>

<p>Is there any way to make firebird queries behave in the way postgresql does?</p>

<p>Although I can now see the logic of the firebird behaviour it is not what
I am used to coming from an MSAccess/DAO background.</p>

<p>Really I just want to know what's going on and which is the more 'normal' behaviour to be expected from ADO recordsets?</p>

<p>This is the full code using firebird.</p>

<pre class=""lang-vb prettyprint-override""><code>'FIREBIRD
'vb6 and ms ado 2.8
'windows 7 home edition 64 bit
'Firebird version is 2.5.4.26856 (x64).
'Firebird ODBC driver 2.0.3.154

    Dim cn As New ADODB.Connection
    Dim rs As New ADODB.Recordset

    Dim cs As String
    Dim dbPath As String

    dbPath = ""c:\Parkes\Parkes.fdb""
    cs = ""DRIVER={Firebird/Interbase(r) Driver}; DBNAME=localhost:"" &amp; dbPath &amp; ""; UID=SYSDBA; PWD=masterkey;""
    cn.ConnectionString = cs
    cn.Open

    Dim sQuery As String

    sQuery = ""select memo from clients where clientID = 10021 ""
    rs.Open sQuery, cn, adOpenStatic, adLockOptimistic

    If rs.BOF &lt;&gt; True Or rs.EOF &lt;&gt; True Then
    'putting msgbox rs.recordcount here confirms only 1 record in recordset
        rs.Movefirst
        rs.Fields(""memo"") = ""blah""
        rs.Update

    End If

    Set rs = Nothing
    Set cn = Nothing
</code></pre>

<p>This is the same code using a postgresql database;</p>

<pre class=""lang-vb prettyprint-override""><code>'POSTGRESQL
'vb6 and ms ado 2.8
'windows 7 home edition 64 bit
Postgresql version is 9.4 64 bit
psql ODBC driver 9.3.4

    Dim cn As New ADODB.Connection
    Dim rs As New ADODB.Recordset

    Dim cs As String
    Dim dbPath As String

    dbPath = ""c:\Parkes\Parkes.fdb""
   cs = ""Driver={PostgreSQL ANSI};SERVER=localhost;Port=5432;DATABASE=Parkes;UID=postgres;PWD=masterkey;CONNSETTINGS=SET Datestyle TO 'DMY'%3b;BOOLSASCHAR=0;TEXTASLONGVARCHAR=1;TrueIsMinus1=1;""

    cn.ConnectionString = cs
    cn.Open

    Dim sQuery As String

    sQuery = ""select memo from clients where clientID = 10021 ""
    rs.Open sQuery, cn, adOpenStatic, adLockOptimistic

    If rs.BOF &lt;&gt; True Or rs.EOF &lt;&gt; True Then
    'putting msgbox rs.recordcount here confirms only 1 record in recordset
        rs.Movefirst
        rs.Fields(""memo"") = ""blah""
        rs.Update

    End If

    Set rs = Nothing
    Set cn = Nothing
</code></pre>",2,postgresql|vb6|ado|firebird
30156073,get number of occurrences between two columns same table,"<p>I have a problem on how to fetch the number of occurrences of a value in between two columns in MySQL.</p>

<pre><code>id1 col1 col2
2    5      3
3    3      4
4    2      1
5    1      3
6    null   2
</code></pre>

<p>How am I able to get the number of occurences between the two columns like the following?</p>

<pre><code>value     occurrence
3                3
1                2
2                2
4                1
5                1
</code></pre>",1,mysql|sql|database|select|count
29820130,Pull Manager Name From LDAP Query [ SQL View Created from LDAP Query ],"<p>I've setup this view:</p>

<pre><code>SELECT     
displayname AS [Full Name], manager, department, company, 
physicaldeliveryofficename, mail AS [E-Mail Address], telephonenumber
FROM         
OPENQUERY(ADSI, 
'SELECT 
sAMAccountName, givenName, company, 
physicaldeliveryofficename, sn, displayname, mail, telephonenumber,department, useraccountcontrol, manager 
FROM 
''LDAP://DC=blah,DC=local''
WHERE 
objectClass = ''User'' and objectCategory = ''Person''') AS derivedtbl_1
WHERE     
(useraccountcontrol &amp; 2 = 0)
</code></pre>

<p>pulling employee data from ActiveDirectory using SQL Server however the manager field comes with all the mappings: CN, OU, DC and looks like this:</p>

<p>CN=blah blah,OU= blah ,OU=blah TGP,DC= blah,DC=local</p>

<p>whereas all I really want is their full name (CN.)</p>

<p>I'd like two things:</p>

<ol>
<li><p>To pull just the CN from the view.</p></li>
<li><p>Get the manager's email.</p></li>
</ol>

<p>The view uses the following fields:</p>

<p>displayname, manager, department, company, physicaldeliveryofficename, mail</p>

<p>However I'd like the end result to have the additional field Manager Email at the end of the it to complete the full dataset.</p>

<p>As mentioned the view with all of the information has been successfully created and therefore this can be done on the SQL side but I'm struggling to find a method to achieve what I want.</p>

<p>Thanks in advance!</p>

<p>EDIT: Added View Code</p>",1,sql|sql-server|active-directory|ldap
29850547,Registering SQL Dependency again from onchange event,"<p>i like to know is it right approach to registering SQL Dependency again from onchange event ?</p>

<p>one guy review my code and told me <code>registering everything again and again after each notification. As I can recall this will create a queue each time</code></p>

<p>so i comment this code in onchange event </p>

<pre><code>void OnDataChange(object sender, SqlNotificationEventArgs e)
        {
            BBALogger.Write(""PartIndexer Service OnDataChange called start"", BBALogger.MsgType.Info);

            if (e.Source == SqlNotificationSource.Timeout)
            {
                BBALogger.Write(""PartIndexer Service SqlNotificationSource.Timeout error"", BBALogger.MsgType.Error);
                Environment.Exit(1);
            }
            else if (e.Source != SqlNotificationSource.Data)
            {
                BBALogger.Write(""PartIndexer Service SqlNotificationSource.Data"", BBALogger.MsgType.Error);
                Environment.Exit(1);
            }
            else if (e.Type == SqlNotificationType.Change)
            {
                BBALogger.Write(""PartIndexer Service Data changed detected"", BBALogger.MsgType.Info);
            }
            else
            {
                BBALogger.Write(string.Format(""Ignored change notification {0}/{1} ({2})"", e.Type, e.Info, e.Source), BBALogger.MsgType.Warnings);
            }

            CallWebService();
            //((SqlDependency)sender).OnChange -= OnDataChange;
            //RegisterNotification();
        }
</code></pre>

<p>just see i comment this line </p>

<pre><code>    //((SqlDependency)sender).OnChange -= OnDataChange;
    //RegisterNotification();
</code></pre>

<p>but after commenting i found onchange event is firing first time and it is not firing from second time.</p>

<p>guide me with right approach. here is my partial code</p>

<pre><code>void OnDataChange(object sender, SqlNotificationEventArgs e)
{
    BBALogger.Write(""PartIndexer Service OnDataChange called start"", BBALogger.MsgType.Info);

    if (e.Source == SqlNotificationSource.Timeout)
    {
    BBALogger.Write(""PartIndexer Service SqlNotificationSource.Timeout error"", BBALogger.MsgType.Error);
    Environment.Exit(1);
    }
    else if (e.Source != SqlNotificationSource.Data)
    {
    BBALogger.Write(""PartIndexer Service SqlNotificationSource.Data"", BBALogger.MsgType.Error);
    Environment.Exit(1);
    }
    else if (e.Type == SqlNotificationType.Change)
    {
    BBALogger.Write(""PartIndexer Service Data changed detected"", BBALogger.MsgType.Info);
    }
    else
    {
    BBALogger.Write(string.Format(""Ignored change notification {0}/{1} ({2})"", e.Type, e.Info, e.Source), BBALogger.MsgType.Warnings);
    }

    CallWebService();
    //((SqlDependency)sender).OnChange -= OnDataChange;
    //RegisterNotification();
}


private void RegisterNotification()
    {
        string tmpdata = """";
        BBALogger.Write(""PartIndexer Service RegisterNotification called start"", BBALogger.MsgType.Info);

        System.Data.SqlClient.SqlDependency.Stop(connectionString);
        System.Data.SqlClient.SqlDependency.Start(connectionString);

        try
        {
        using (SqlConnection conn = new SqlConnection(connectionString))
        {
            conn.Open();
            SqlCommand cmd = conn.CreateCommand();
            cmd.CommandText = ""SELECT ActivityDate FROM [dbo].tablename"";
            dep = new SqlDependency(cmd);
            dep.OnChange += new OnChangeEventHandler(OnDataChange);
            SqlDataReader dr = cmd.ExecuteReader();
            {
            if (dr.HasRows)
            {
                dr.Read();
                tmpdata = dr[0].ToString();
            }
            }
            dr.Dispose();
            cmd.Dispose();
        }
        }
        catch (Exception ex)
        {
        BBALogger.Write(""PartIndexer Service RegisterNotification Error ""+ex.Message.ToString(), BBALogger.MsgType.Error);
        }
        finally
        {
        BBALogger.Write(""PartIndexer Service RegisterNotification called end"", BBALogger.MsgType.Info);

        }

}
</code></pre>

<p>i use Environment.Exit(1); to shutdown win service as a result it should restart automatically. thanks
thanks</p>",1,c#|sqldependency
30210394,How to resolve this error--dbWriteTable(),"<p>I successfully connected to MYSQL DB and tried to write my result back to the database: <code>dbWriteTable(con,""predicted min"",forecast$min)</code> where forecast$min is just a vector of doubles. </p>

<p>I got this error message:</p>

<blockquote>
  <p>Error in (function (classes, fdef, mtable)  : 
    unable to find an inherited method for function ‘dbWriteTable’ for signature ‘""MySQLConnection"", ""character"", ""numeric""’</p>
</blockquote>

<p>I guess I need a dataframe object for my third parameter, so then I tried this: <code>dbWriteTable(con,""predicted min"",data.frame(min=forecast0.1$min))</code></p>

<p>But got this error: </p>

<blockquote>
  <p>Error in .local(conn, statement, ...) : 
    could not run statement: You have an error in your SQL syntax; check the manual that corresponds to your MariaDB server version for the right syntax to use near '( <code>row_names</code> text,
      <code>min</code> double 
  )' at line 2 </p>
</blockquote>

<p>I'm using SQLyog. I don't know if that's related to this problem. Any suggestions? Thanks in advance.</p>

<p>Sophie</p>",3,mysql|r
29931759,java.sql.SQLException: No suitable driver found when loading DataFrame into Spark SQL,"<p>I'm hitting very strange problem when trying to load JDBC DataFrame into Spark SQL. </p>

<p>I've tried several Spark clusters - YARN, standalone cluster and pseudo distributed mode on my laptop. It's reproducible on both Spark 1.3.0 and 1.3.1. The problem occurs in both <code>spark-shell</code> and when executing the code with <code>spark-submit</code>. I've tried MySQL &amp; MS SQL JDBC drivers without success.</p>

<p>Consider following sample:</p>

<pre class=""lang-scala prettyprint-override""><code>val driver = ""com.mysql.jdbc.Driver""
val url = ""jdbc:mysql://localhost:3306/test""

val t1 = {
  sqlContext.load(""jdbc"", Map(
    ""url"" -&gt; url,
    ""driver"" -&gt; driver,
    ""dbtable"" -&gt; ""t1"",
    ""partitionColumn"" -&gt; ""id"",
    ""lowerBound"" -&gt; ""0"",
    ""upperBound"" -&gt; ""100"",
    ""numPartitions"" -&gt; ""50""
  ))
}
</code></pre>

<p>So far so good, the schema gets resolved properly:</p>

<pre><code>t1: org.apache.spark.sql.DataFrame = [id: int, name: string]
</code></pre>

<p>But when I evaluate DataFrame: </p>

<pre><code>t1.take(1)
</code></pre>

<p>Following exception occurs:</p>

<pre><code>15/04/29 01:56:44 WARN TaskSetManager: Lost task 0.0 in stage 0.0 (TID 0, 192.168.1.42): java.sql.SQLException: No suitable driver found for jdbc:mysql://&lt;hostname&gt;:3306/test
    at java.sql.DriverManager.getConnection(DriverManager.java:689)
    at java.sql.DriverManager.getConnection(DriverManager.java:270)
    at org.apache.spark.sql.jdbc.JDBCRDD$$anonfun$getConnector$1.apply(JDBCRDD.scala:158)
    at org.apache.spark.sql.jdbc.JDBCRDD$$anonfun$getConnector$1.apply(JDBCRDD.scala:150)
    at org.apache.spark.sql.jdbc.JDBCRDD$$anon$1.&lt;init&gt;(JDBCRDD.scala:317)
    at org.apache.spark.sql.jdbc.JDBCRDD.compute(JDBCRDD.scala:309)
    at org.apache.spark.rdd.RDD.computeOrReadCheckpoint(RDD.scala:277)
    at org.apache.spark.rdd.RDD.iterator(RDD.scala:244)
    at org.apache.spark.rdd.MapPartitionsRDD.compute(MapPartitionsRDD.scala:35)
    at org.apache.spark.rdd.RDD.computeOrReadCheckpoint(RDD.scala:277)
    at org.apache.spark.rdd.RDD.iterator(RDD.scala:244)
    at org.apache.spark.scheduler.ResultTask.runTask(ResultTask.scala:61)
    at org.apache.spark.scheduler.Task.run(Task.scala:64)
    at org.apache.spark.executor.Executor$TaskRunner.run(Executor.scala:203)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
    at java.lang.Thread.run(Thread.java:745)
</code></pre>

<p>When I try to open JDBC connection on executor:</p>

<pre class=""lang-scala prettyprint-override""><code>import java.sql.DriverManager

sc.parallelize(0 until 2, 2).map { i =&gt;
  Class.forName(driver)
  val conn = DriverManager.getConnection(url)
  conn.close()
  i
}.collect()
</code></pre>

<p>it works perfectly:</p>

<pre><code>res1: Array[Int] = Array(0, 1)
</code></pre>

<p>When I run the same code on local Spark, it works perfectly too:</p>

<pre><code>scala&gt; t1.take(1)
...
res0: Array[org.apache.spark.sql.Row] = Array([1,one])
</code></pre>

<p>I'm using Spark pre-built with Hadoop 2.4 support.</p>

<p>The easiest way to reproduce the problem is to start Spark in pseudo distributed mode with <code>start-all.sh</code> script and run following command:</p>

<pre><code>/path/to/spark-shell --master spark://&lt;hostname&gt;:7077 --jars /path/to/mysql-connector-java-5.1.35.jar --driver-class-path /path/to/mysql-connector-java-5.1.35.jar
</code></pre>

<p>Is there a way to work this around? It looks like a severe problem, so it's strange that googling doesn't help here.</p>",12,scala|jdbc|apache-spark|apache-spark-sql
29939742,Zend MultiSelect box options are not showing,"<p>I'm programing a discount creation for a web site and I'm having a problem with multiSelect box options. I tried to get values through hard coding, e.g.:</p>

<pre><code>   $elements['apply_to'] = new \Zend_Form_Element_Multiselect('apply_to');
    $elements['apply_to']-&gt;setMultiOptions(
        array(
            'iframe' =&gt; $translate-&gt;_('apply_to_iframe'),
            'iframer' =&gt; $translate-&gt;_('apply_to_iframer'),
            'unregistered' =&gt; $translate-&gt;_('apply_to_unregistered'),
            'person' =&gt; $translate-&gt;_('apply_to_person'),
            'agency' =&gt; $translate-&gt;_('apply_to_agency')
        )
    );

    $elements['apply_to']-&gt;setLabel('apply_to')
        -&gt;setView($view)
        -&gt;setRequired(true)
        -&gt;addFilter('StripTags')
        -&gt;addFilter('StringTrim')
        -&gt;addValidator(new \Zend_Validate_NotEmpty(\Zend_Validate_NotEmpty::PHP))
        -&gt;setAttribs(array(
            'translate' =&gt; $translate
        ))
        -&gt;setDecorators(
            array(
                array('ViewScript',
                    array(
                        'viewScript' =&gt; 'Components/Forms/Elements/Multiselect.phtml'
                    )
                )
            )
        );
</code></pre>

<p>And geting values from db model:</p>

<pre><code>$elements['apply_to'] = new \Desk\Components\Forms\Elements\Multiselect('apply_to');
    $elements['apply_to']-&gt;setMultiOptions(\Desk\Models\Discounts::getApplyTo($translate));
    $elements['apply_to']-&gt;setLabel('apply_to')
        -&gt;setView($view)
        -&gt;setAttribs(array(
            'translate' =&gt; $translate
        ))
        -&gt;setDecorators(
            array(
                array('ViewScript',
                    array(
                        'viewScript' =&gt; 'Components/Forms/Elements/Multiselect.phtml'
                    )
                )
            )
        );
</code></pre>

<p>where getApplyTo is:</p>

<pre><code>public static function getApplyTo($translate, $not_deleted = false){
    $db = new \Db\Users();
    if ($not_deleted) {
        $rows = $db-&gt;fetchAll(array('deleted IS NULL'));
    } else {
        $rows = $db-&gt;fetchAll();
    }
    $return = array();

    if (count($rows) &gt; 0) {
        $rows = $rows-&gt;toArray();
        foreach ($rows as $row) {
            $return[ $row['user_type'] ] = $row['user_type'];
        }
    }
    return $return;
}
</code></pre>

<p>But none of the examples work. Can anyone help me?</p>",1,php|mysql|zend-framework
30012744,Time stamping form form submits into MySQL,"<p>I have got everything I need in terms of inputting my data into my data from a form but struggling to get it to timestamp or looking for the best methods.</p>

<p>submit form:</p>

<pre><code>&lt;form action=""actions/newDocAdd.php"" method=""post""&gt;
    &lt;input type=""text"" name=""doc_title"" id=""doc_title"" required=""required"" placeholder=""Document Title""/&gt;&lt;br /&gt;
    &lt;input type=""text"" name=""doc_content"" id=""doc_content"" placeholder=""Document Content""/&gt;&lt;br/&gt;
    &lt;br&gt;&lt;br&gt; 
    &lt;input type=""submit"" value=""Create Document"" name=""submit""/&gt;&lt;br /&gt;
&lt;/form&gt;

&lt;?php

if(isset($_POST[""submit""])){
$hostname='localhost';
$username='******';
$password='******';

try {

$dbh = new PDO(""mysql:host=$hostname;dbname=******"",$username,$password);

$dbh-&gt;setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION); // &lt;== add this line

$sql = ""INSERT INTO doc_list (doc_title, doc_content) VALUES ('"".$_POST[""doc_title""].""','"".$_POST[""doc_content""].""')"";

if ($dbh-&gt;query($sql)) {
    header ('Location: ../docList.php');
}
else{
}

$dbh = null;
}
catch(PDOException $e)
{
echo $e-&gt;getMessage();
}

}
?&gt;
</code></pre>

<p>I have a field inside the DB which is set to DATETIME named 'doc_create' but just need some idea at which point it timestamp the entry and where?</p>",1,php|sql|forms|submit
30132792,Empty result in association parent-children when there are not children,"<p>I have the following schema:</p>

<p><strong>hours table</strong>: this table has ""constant"" data, it never changes because only will store the schedule-able hours</p>

<pre><code>hour (int)
----
8
9
10
</code></pre>

<p><strong>appointments table</strong></p>

<pre><code>hour (int)  |  date (text)
--------------------------
10          | 25/08/2015
</code></pre>

<p>In my application I want to show only available hours to set a new appointment based in hour-date filter. For example, I can say that for the days:</p>

<ul>
<li><code>25/08/2015</code>: available hours are <code>8</code> and <code>9</code> because <code>10</code> is already taken</li>
<li><code>26/08/2015</code>: available hours are <code>8</code>, <code>9</code> and <code>10</code> because there are not appointments at that date.</li>
</ul>

<p>At the beginning I was using this query:</p>

<pre><code>select h.hour 
from hours h, appointment a 
where h.hour != a.hour and a.date = 'the-date';
</code></pre>

<p>This query only works if there are appointments in the given dates, but for the rest of dates without appointments it returns empty result. I can achieve this task via application, but I am trying to exhaust all db's possibilities.</p>",0,sqlite|android-sqlite
30172985,Query aliased association,"<p>How can I query an aliased association in Rails? </p>

<p>I have the following models: </p>

<pre><code>class TaxableEntity &lt; ActiveRecord::Base
  belongs_to :accountant, class_name: User, foreign_key: :accountant_id
  has_many :invoices
end

class User &lt; ActiveRecord::Base
  has_many :taxable_entities, foreign_key: :accountant_id
  enum role: [:account_holder, :accountant, :admin]
end
</code></pre>

<p>I'm trying to do this query:</p>

<pre><code>TaxableEntity.joins(:accountant).where(accountant: { deactivated: true })
</code></pre>

<p>And I'm getting this error:</p>

<pre><code>PG::UndefinedTable: ERROR:  missing FROM-clause entry for table ""accountant""
       LINE 1: ..."".""id"" = ""taxable_entities"".""accountant_id"" WHERE ""accountan...
                                                                    ^
       : SELECT ""taxable_entities"".* FROM ""taxable_entities"" INNER JOIN ""users"" ON ""users"".""id"" = ""taxable_entities"".""accountant_id"" WHERE ""accountant"".""deactivated"" = 't'
</code></pre>

<p>I've also tried changing <code>accountant</code> to <code>user</code> and I get a similar error. </p>",0,sql|ruby-on-rails|activerecord
30176714,Build a Query to get the informations from a specific user,"<p>I'm building a Chat with three Tables.</p>

<p>Conversation, Conversation_reply and user</p>

<p><strong>Conversation Columns</strong></p>

<ol>
<li>id</li>
<li>user_one</li>
<li>user_two</li>
</ol>

<p><strong>Conversation_reply Columns</strong></p>

<ol>
<li>id</li>
<li>user_id</li>
<li>conversation.id</li>
<li>reply</li>
</ol>

<p><strong>User Columns</strong></p>

<ol>
<li>id</li>
<li>username</li>
</ol>

<p>I would like to build a list with the name from the users that are chating with a specific user.</p>

<p>Example, my ID is 711, and I am talking with three persons, I would like to get the username from those three persons.</p>

<p>I'm having some issues building this Query because the user_one and user_two are relative, the ID from the receiver sometimes can be inserted as user_one, or user_two. It depends on which user starts chatting first.</p>

<p>How can I build a Query to do that?</p>

<p>Thanks.</p>",0,sql
29922262,Understanding explain plan through xmltype,"<p>I had a performance issue caused by a wrong xpath ('@' missing in attribute predicate) in a query like this:</p>

<p>select extractvalue(field, '//item[attr=""value""]') from table where field1 = :1;</p>

<p>I expected an exception but seems that Oracle accept this particular xpath,
has a meaning?</p>

<p>I tried to perform an explain plan against that query but the result is pretty strange, someone can help me to understand it?</p>

<p>I used this code to reproduce the environment</p>

<pre><code>SELECT * FROM V$VERSION;
/*
Oracle Database 11g Release 11.2.0.3.0 - 64bit Production
PL/SQL Release 11.2.0.3.0 - Production
""CORE   11.2.0.3.0  Production""
TNS for Linux: Version 11.2.0.3.0 - Production
NLSRTL Version 11.2.0.3.0 - Production
*/

create table TMP_TEST_XML(
  id number,
 content_xml xmltype 
);
/
create unique index IDX_TMP_TEST_XML on TMP_TEST_XML(id);
/
declare
  xml xmltype := xmltype('&lt;root&gt;
    &lt;a key=""A""&gt;Aaa&lt;/a&gt;
    &lt;b key=""B""&gt;Bbb&lt;/b&gt;
    &lt;c key=""C""&gt;Ccc&lt;/c&gt;
    &lt;d key=""D""&gt;Ddd&lt;/d&gt;
    &lt;e key=""E""&gt;Eee&lt;/e&gt;
    &lt;f key=""F""&gt;Fff&lt;/f&gt;
    &lt;g key=""G""&gt;Ggg&lt;/g&gt;
    &lt;h key=""H""&gt;Hhh&lt;/h&gt;
    &lt;i key=""I""&gt;Iii&lt;/i&gt;
    &lt;l key=""L""&gt;Lll&lt;/l&gt;
&lt;/root&gt;');
begin

  for idx in 1..10000 
  loop
    insert into TMP_TEST_XML values (idx, xml);
  end loop;

  commit;

end;
/
--explain plan xpath without '@' (wrong)
EXPLAIN PLAN SET statement_id = 'planXml1' FOR
select extractvalue(content_xml, '/root/g[key=""G""]') from TMP_TEST_XML where id between 120 and 130;
/    
select plan_table_output
from table(dbms_xplan.display('plan_table',null,'advanced'));
/
/*
------------------------------------------------------------------------------------------------
| Id  | Operation                   | Name             | Rows  | Bytes | Cost (%CPU)| Time     |
------------------------------------------------------------------------------------------------
|   0 | SELECT STATEMENT            |                  |    24 | 48360 |     4   (0)| 00:00:01 |
|   1 |  SORT AGGREGATE             |                  |     1 |     4 |            |          |
|   2 |   NESTED LOOPS SEMI         |                  |   667K|  2606K|   223K  (1)| 00:44:37 |
|   3 |    XPATH EVALUATION         |                  |       |       |            |          |
|*  4 |    XPATH EVALUATION         |                  |       |       |            |          |
|   5 |  TABLE ACCESS BY INDEX ROWID| TMP_TEST_XML     |    24 | 48360 |     4   (0)| 00:00:01 |
|*  6 |   INDEX RANGE SCAN          | IDX_TMP_TEST_XML |    43 |       |     2   (0)| 00:00:01 |
------------------------------------------------------------------------------------------------
*/
/
-- explain plan xpath with '@' (correct)
EXPLAIN PLAN SET statement_id = 'planXml1' FOR
select extractvalue(content_xml, '/root/g[@key=""G""]') from TMP_TEST_XML where id between 120 and 130;
/
select plan_table_output
from table(dbms_xplan.display('plan_table',null,'advanced'));
/
/*
------------------------------------------------------------------------------------------------
| Id  | Operation                   | Name             | Rows  | Bytes | Cost (%CPU)| Time     |
------------------------------------------------------------------------------------------------
|   0 | SELECT STATEMENT            |                  |    24 | 48360 |     4   (0)| 00:00:01 |
|   1 |  SORT AGGREGATE             |                  |     1 |     4 |            |          |
|*  2 |   XPATH EVALUATION          |                  |       |       |            |          |
|   3 |  TABLE ACCESS BY INDEX ROWID| TMP_TEST_XML     |    24 | 48360 |     4   (0)| 00:00:01 |
|*  4 |   INDEX RANGE SCAN          | IDX_TMP_TEST_XML |    43 |       |     2   (0)| 00:00:01 |
------------------------------------------------------------------------------------------------
*/
</code></pre>

<p>In the first explain there is a 'nested loops' (row 2) with cardinality 667K that disappeared in the second one.
Inserting more records in the same table and performing a new explain plain (without '@') that value is always 667K.</p>

<p>What does it represent that value?</p>",5,oracle|xpath|xmltype|sql-execution-plan
29940021,Modeling and publishing a follower-based feed with Meteor,"<p>I'm working on a simple app where a User can <em>follow</em> other users. Users can <em>star</em> posts. And a user's feed is composed of posts that have been starred by users they follow. Pretty simple actually. However, this all gets complicated in Mongo and Meteor...</p>

<p>There are basically two way of modeling this that I can think of:</p>

<ol>
<li><p>A user has a property, <code>following</code>, which is an array of userIds that the user follows. Also, a post has a property, <code>starrers</code>, which is an array of userIds that have starred this post. The good thing about this method is that publications are relatively simple:</p>

<pre><code>Meteor.publish 'feed', (limit) -&gt;
  Posts.find({starrers: {$in: Meteor.users.findOne(@userId).following}}, {sort: {date: -1}, limit:limit})
</code></pre>

<p>We aren't reactively listening to who the user is following, but thats not too bad for now. The main problem with this approach is that (1) the individual documents will become large and inefficient if 1000000 people star a post. Another problem is that (2) it would be pain to keep track of information like when a user started following another user or when a user starred a post.</p></li>
<li><p>The other way of doing this is having two more collections, <code>Stars</code> and <code>Follows</code>. If a user stars a post, then we create a document with properties <code>userId</code> and <code>postId</code>. If a user follows another user, then we create a document with properties <code>userId</code> and <code>followId</code>. This gives us the advantage of smaller document sizes for <code>Users</code> and <code>Posts</code>, but complicated things when it comes to querying, especially because Mongo doesn't handle joins!</p></li>
</ol>

<p>Now, I did some research and people seem to agree that the second choice is the right way to go. Now the problem I'm having is efficiently querying and publishing. Based on the <a href=""https://book.discovermeteor.com/chapter/advanced-publications"" rel=""nofollow"">Discover Meteor chapter about Advanced Publications</a>, I created a publication that publishes the posts that are starred by user's followers -- sorted, and limited.</p>

<pre><code># a helper to handle stopping observeChanges
observer = (sub, func) -&gt;
  handle = null
  sub.onStop -&gt; 
    handle?.stop?()
  () -&gt;
    handle?.stop?()
    handle = func()


Meteor.publish 'feed', (limit) -&gt;
  sub = this
  userId = @userId

  followIds = null
  eventIds = null

  publishFollows = observer sub, () -&gt;
    followIds = {}
    Follows.find({userId:userId}).observeChanges 
      added: (id, doc) -&gt;
        followIds[id] = doc.followId
        sub.added('follows', id, doc)
        publishStars()   
      removed: (id) -&gt;
        delete followIds[id]
        sub.removed('follows', id)
        publishStars()

  publishStars = observer sub, () -&gt;
    eventIds = {}
    Stars.find({userId: {$in: _.keys(followIds)}).observeChanges 
      added: (id, doc) -&gt;
        eventIds[id] = null
        sub.added('stars', id, doc)
        publishEvents()
      removed: (id) -&gt;
        delete eventIds[id]
        sub.removed('stars', id)
        publishEvents()

  publishEvents = observer sub, () -&gt;
    Events.find({_id: {$in: _.keys(eventIds)}}, {sort: {name:1, date:-1}, limit:limit}).observeChanges 
      added: (id, doc) -&gt;
        sub.added('events', id, doc)
      changed: (id, fields) -&gt;
        sub.changed('events', id, fields)
      removed: (id) -&gt;
        sub.removed('events', id)
</code></pre>

<p>While this works, it seems very limited at scale. Particularly, we have to compile a list of every starred post by every follower. The size of this list will grow very quickly. Then we do a huge <code>$in</code> query against all posts.</p>

<p>Another annoyance is querying for the feed on the client after we subscribe:</p>

<pre><code>Meteor.subscribe(""feed"", 20)
posts = null
Tracker.autorun -&gt;
  followers = _.pluck(Follows.find({userId: Meteor.userId()}).fetch(), ""followId"")
  starredPostIds = _.pluck(Stars.find({userId: {$in: followers}}).fetch(), ""postId"")
  posts = Posts.find({_id: {$in: starredPostIds}}, {sort: {date: -1}, limit: 20}).fetch()
</code></pre>

<p>Its like we're doing all this work twice. First we do all the work on the server to publish the feed. Then we need to go through the exact same logic again on the client to get those posts...</p>

<p>My question here is a matter of design over everything. <strong>How can I efficiently design this feed based on followers staring posts?</strong> What collection / collection schemas should I use? How should I create the appropriate publication? How can I query for the feed on the client?</p>",3,meteor|meteor-publications|database|nosql
29971178,"EER Notation{Mandatory,Or}","<p>I was working on a project and found a detail that confused me very much in EER diagram. I tried to google it, but have not find the solution. Please, can somebody explain me what does the words ""{mandatory, Or} "" mean in this diagram?
(I cannot attach image because of low reputation) Here is the link with image:
<a href=""http://c2n.me/3h0OGj3"" rel=""nofollow"">http://c2n.me/3h0OGj3</a></p>",0,sql|database
30009955,Symfony 2 Edit Action not populating form fields,"<p>I'm attempting to create an edit action for a user address entity but whenever you load the page it doesn't seem to load the associated data.  below is the code for my controller and view.</p>

<p>Profile Controller:</p>

<pre><code>public function addressEditAction($id) {
        $user = $this-&gt;getUser();
        if (!is_object($user) || $user instanceof UserInterface) {
            throw new AccessDeniedException('This user does not have access to this section.');
        }

        if ($this-&gt;container-&gt;get('security.context')-&gt;isGranted('IS_AUTHENTICATED_FULLY')) {
            $em = $this-&gt;getDoctrine()-&gt;getEntityManager();
            $address = $em-&gt;getRepository('SCWDesignsBundle:UserAddresses')-&gt;getAddressById($user-&gt;getId(), $id);
            if (!$address) {
                throw new NotFoundHttpException(sprintf('Could not find address id: ""%s""', $id));
            }

            $form = $this-&gt;createForm(new UserAddressesFormType(), $address);

            $request = $this-&gt;getRequest();
            if ($request-&gt;getMethod() == 'POST') {
                $form-&gt;bind($request);
                if ($form-&gt;isValid()) {
                    $utilites = new Utilities;
                    $address-&gt;setPhone($utilites-&gt;stripPhoneNumbers($address-&gt;getPhone()));
                    $em-&gt;persist($address);
                    $em-&gt;flush();

                    return $this-&gt;redirect($this-&gt;generateUrl('fos_user_profile_show'));
                }
            }
        }

        return $this-&gt;render('SCWDesignsBundle:Profile\Address:new.html.twig', array(
            'active_page' =&gt; 'profile',
            'form' =&gt; $form-&gt;createView()
        ));  
    }
</code></pre>

<p>View:</p>

<pre><code>{% trans_default_domain 'SCWDesignsBundle' %}

{% block modal_block %}
&lt;div class=""item-box""&gt;
    &lt;h2&gt;Address Details&lt;/h2&gt;

    {% include 'SCWDesignsBundle:Default:form_errors.html.twig' %}

    &lt;form action=""{{ path('scw_designs_address_add') }}"" {{ form_enctype(form) }} method=""POST"" class=""scw_designs_address_new clearfix""&gt;
        &lt;div class=""address-new""&gt;
            &lt;div class=""form-item""&gt;
                &lt;div class=""form-label""&gt;
                    &lt;label for=""first-name""&gt;{{ 'profile.first_name'|trans }}: &lt;span class=""required""&gt;*&lt;/span&gt;&lt;/label&gt;
                &lt;/div&gt;
                &lt;div class=""form-field""&gt;
                    {{ form_widget(form.first_name) }}
                &lt;/div&gt;          
            &lt;/div&gt;

            &lt;div class=""form-item""&gt;
                &lt;div class=""form-label""&gt;
                    &lt;label for=""last-name""&gt;{{ 'profile.last_name'|trans }}: &lt;span class=""required""&gt;*&lt;/span&gt;&lt;/label&gt;
                &lt;/div&gt;
                &lt;div class=""form-field""&gt;
                    {{ form_widget(form.last_name) }}
                &lt;/div&gt;
            &lt;/div&gt;

            &lt;div class=""form-item""&gt;
                &lt;div class=""form-label""&gt;
                    &lt;label for=""address""&gt;{{ 'profile.address'|trans }}: &lt;span class=""required""&gt;*&lt;/span&gt;&lt;/label&gt;
                &lt;/div&gt;
                &lt;div class=""form-field""&gt;
                    {{ form_widget(form.address_one) }}
                    {{ form_widget(form.address_two) }}
                &lt;/div&gt;              
            &lt;/div&gt;

            &lt;div class=""form-item""&gt;
                &lt;div class=""form-label""&gt;
                    &lt;label for=""city""&gt;{{ 'profile.city'|trans }}: &lt;span class=""required""&gt;*&lt;/span&gt;&lt;/label&gt;
                &lt;/div&gt;
                &lt;div class=""form-field""&gt;
                    {{ form_widget(form.city) }}
                &lt;/div&gt;
            &lt;/div&gt;

            &lt;div class=""form-item""&gt;
                &lt;div class=""form-label""&gt;
                    &lt;label for=""country""&gt;{{ 'profile.country'|trans }}: &lt;span class=""required""&gt;*&lt;/span&gt;&lt;/label&gt;
                &lt;/div&gt;
                &lt;div class=""form-field""&gt;
                    {{ form_widget(form.country) }}
                &lt;/div&gt;
            &lt;/div&gt;

            &lt;div class=""form-item""&gt;
                &lt;div class=""form-label""&gt;
                    &lt;label for=""state""&gt;{{ 'profile.state'|trans }}: &lt;span class=""required""&gt;*&lt;/span&gt;&lt;/label&gt;
                &lt;/div&gt;
                &lt;div class=""form-field""&gt;
                    {{ form_widget(form.state) }}
                &lt;/div&gt;
            &lt;/div&gt;

            &lt;div class=""form-item""&gt;
                &lt;div class=""form-label""&gt;
                    &lt;label for=""zipcode""&gt;{{ 'profile.zipcode'|trans }}: &lt;span class=""required""&gt;*&lt;/span&gt;&lt;/label&gt;
                &lt;/div&gt;
                &lt;div class=""form-field""&gt;
                    {{ form_widget(form.zipcode, { 'attr': { 'class': 'zipcodeUS' }}) }}
                &lt;/div&gt;
            &lt;/div&gt;

            &lt;div class=""form-item""&gt;
                &lt;div class=""form-label""&gt;
                    &lt;label for=""phone""&gt;{{ 'profile.phone'|trans }}: &lt;span class=""required""&gt;*&lt;/span&gt;&lt;/label&gt;
                &lt;/div&gt;
                &lt;div class=""form-field""&gt;
                    {{ form_widget(form.phone, { 'attr': { 'class': 'phoneUS' }}) }}
                &lt;/div&gt;
            &lt;/div&gt;
        &lt;/div&gt;

        &lt;div class=""modal-button-wrapper""&gt;
            {{ form_widget(form._token) }}
            &lt;button type=""submit"" class=""btn-submit primary-button""&gt;Save Changes&lt;/button&gt;
        &lt;/div&gt;
    &lt;/form&gt;
&lt;/div&gt;
{% endblock %}
</code></pre>

<p>In the profilecontroller you can see me call a method from the entities respository, here's the var_dump of the array $address:</p>

<p>$address:</p>

<pre><code>array (size=1)
  0 =&gt; 
  array (size=11)
    'id' =&gt; string '4' (length=1)
    'firstName' =&gt; string 'Bruce' (length=5)
    'lastName' =&gt; string 'Wayne' (length=5)
    'addressOne' =&gt; string '123 Gotham Lane' (length=15)
    'addressTwo' =&gt; null
    'city' =&gt; string 'Gotham' (length=6)
    'country' =&gt; string 'USA' (length=3)
    'zipcode' =&gt; string '51478' (length=5)
    'phone' =&gt; string '3344796239' (length=10)
    'code' =&gt; string 'NH' (length=2)
    'state' =&gt; string 'New Hampshire' (length=13)
</code></pre>

<p>So as you can see I've gotten the proper data from the database, I've followed the instructions on binding the data to the form object, it just simply doesn't persist into the view.  I've tried multiple things but can't seem to get it working.  Any advice/help would be greatly appreciated.</p>

<p>Thanks,</p>

<p>Shawn</p>",0,php|mysql|symfony|doctrine|twig
30115675,postgres psql error trying to pass parameters in sql script,"<p>In postgresql, I'm <code>psql</code> with the <code>-v</code> for variable input that I can call within a sql file.</p>

<p>For example from bash script, it looks like this:</p>

<pre><code>""$PSQL_HOME""/psql -h $HOST_NM     \
                      -p $PORT    \
                      -U postgres \
                      -v v1=$1    \
                      -f Test.sql
...
..
</code></pre>

<p>From the sql file, it looks like this:</p>

<pre><code>GRANT ALL ON TABLE mytable TO mra_dev_:v1;
GRANT ALL ON TABLE mytable TO mra_dev_:v1_load;
</code></pre>

<p>The first statement works, but the 2nd statement fails:</p>

<pre><code>psql:Test.sql:472: ERROR: syntax error at or near "":""
LINE 1: GRANT ALL ON TABLE mytable TO mra_dev_:v1_load
                                              ^
</code></pre>

<p>How do I get around this? Somekind of escape or concat feature I can use for this?</p>",1,postgresql|postgresql-9.3
29846448,Check if all three columns are either not null or null,"<p>I have a table with 4 columns:</p>

<pre class=""lang-sql prettyprint-override""><code>create table dbo.Table ( 
  Id int not null,
  A int null,
  B int null,   
  C nvarchar (4000) null
)
</code></pre>

<p>How can I make sure that <code>A</code>, <code>B</code> and <code>C</code> are all three <code>null</code> or all three <code>not null</code>?</p>",8,sql|sql-server|null|sql-server-2012|check-constraints
30169971,Enforcing a unique constraint on a column encrypted with cell level encryption,"<p>I want to enforce a unique constraint on a column which must be encrypted in MSSQL 2005 using Cell Level Encyption (CLE).</p>

<pre><code>CREATE MASTER KEY ENCRYPTION BY PASSWORD = 'itsaSECRET!!!3£3£3£!!!'
CREATE CERTIFICATE ERCERT WITH SUBJECT = 'A cert for use by procs'

CREATE SYMMETRIC KEY ERKEY 
WITH ALGORITHM = AES_256
ENCRYPTION BY CERTIFICATE ERCERT

-- This illustrates the point. 
-- The results differ
DECLARE @TempTable TABLE
(
    [Email] [varbinary](254) UNIQUE NOT NULL
)

OPEN SYMMETRIC KEY ERKEY DECRYPTION BY CERTIFICATE ERCERT 
    insert into @TempTable(Email) VALUES(EncryptByKey(Key_GUID('ERKEY'), N'duplicate'))
    insert into @TempTable(Email) VALUES(EncryptByKey(Key_GUID('ERKEY'), N'duplicate'))
    insert into @TempTable(Email) VALUES(EncryptByKey(Key_GUID('ERKEY'), N'duplicate'))
CLOSE SYMMETRIC KEY ERKEY   

select * from @TempTable
</code></pre>

<p>The output makes it obvious why the constraint has 'not' been enforced. (Please excuse the awesomeness of my ascii-art.)</p>

<pre><code>    Email
   -------
1 | 0x00703529AF46D24BA863A3534260374E01000000328909B51BA44A49510F24DF31C46F2E30977626D96617E2BD13D9115EB578852EEBAE326B8F3E2D422230478A29767C
2 | 0x00703529AF46D24BA863A3534260374E01000000773E06E1B53F2C57F97C54370FECBB45BC8A154FEA5CEEB9B6BB1133305282328AAFAD65B9BDC595F0006474190F6482
3 | 0x00703529AF46D24BA863A3534260374E01000000C9EDB1C83B52E60598038D832D34D75867AB0ABB23F9044B7EBC76832F22C432A867078D10974DC3717D6086D3031BDB
</code></pre>

<p>But, how do I work around this?</p>",1,sql-server|encryption|constraints
30126528,How do I add c# class library/ class dll in SQL CLR project?,"<p>How do I add c# class library/ class dll  in SQL CLR project ?. </p>

<p>I add the class library dll/ class dll but got error in SQL server 2012 during assembly creation</p>

<blockquote>
  <p>Assembly  references assembly 'system.runtime.serialization,
  version=4.0.0.0, culture=neutral, which is not present in the current
  database. SQL Server attempted to locate and automatically load the
  referenced assembly from the same location where referring assembly
  came from, but that operation has failed (reason: 2(The system cannot
  find the file specified.)). Please load the referenced assembly into
  the current database and retry your request.</p>
</blockquote>",1,c#|sqlclr
30020099,com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: Table 'bus' already exists,"<p>I am trying to make my code to work smoothly but  after the first insert and when the table exist I am always getting the this error <code>com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: Table 'bus' already exists</code>  also after the creation of the fisr table and inserting the data this error occures?!  I want just  to check whether the table exists if not create the tabe and insert the data if yes just update the data.</p>

<p>Database class:</p>

<pre><code>package org.busTracker.serverSide;

import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Statement;

public class Database {

    public void connection() {
        try {
            Class.forName(""com.mysql.jdbc.Driver"");
            System.out.println(""jar works :) "");

        } catch (ClassNotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }

    public void insertData(String mac, int route, float latitude,
            float longitude) {

        connection();
        String host = ""jdbc:mysql://localhost/busTracker"";
        String user = ""root"";
        String password = """";

        try {
            Connection con = DriverManager.getConnection(host, user, password);

            // Create a statement
            Statement stt = con.createStatement();

            // Check whether table exists.
            boolean rest = stt.execute(""SHOW TABLES like 'bus' "");

            if (rest) {

                PreparedStatement prep = con
                        .prepareStatement(""REPLACE INTO bus(mac, route, latitude, longitude)""
                                + ""VALUES( ?, ?, ? , ? )"");
                prep.setString(1, mac);
                prep.setInt(2, route);
                prep.setFloat(3, latitude);
                prep.setFloat(4, longitude);
                prep.executeQuery();

            } else {

                // Create bus table
                stt.execute(""CREATE TABLE bus""
                        + ""(id INT(11) NOT NULL AUTO_INCREMENT PRIMARY KEY,""
                        + ""mac VARCHAR(30) NOT NULL UNIQUE,""
                        + ""route int(11) NOT NULL,""
                        + ""latitude FLOAT(10,6) NOT NULL,""
                        + ""longitude FLOAT(10,6) NOT NULL,""
                        + ""created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP)"");

                PreparedStatement prep = con
                        .prepareStatement(""REPLACE INTO bus(mac, route, latitude, longitude)""
                                + ""VALUES( ?, ?, ? , ? )"");
                prep.setString(1, mac);
                prep.setInt(2, route);
                prep.setFloat(3, latitude);
                prep.setFloat(4, longitude);
                prep.executeQuery();

            }

        } catch (SQLException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }

}
</code></pre>",2,java|sql
29756388,Joining in the row with max value via a jointable,"<p>Usually when I need to join the row with some max value from another column I do something like:</p>

<pre><code>SELECT *
FROM a
INNER JOIN b ON (a.aid = b.aid)
LEFT JOIN b nullb ON (a.aid = nullb.aid AND nullb.value &gt; b.value)
WHERE nullb.bid IS NULL;
</code></pre>

<p>I'm not sure if this is the most efficent way but it is a solution without subqueries which i avoid whenever possible.</p>

<p>Today I needed to join in the max value from another table that joins in via a jointable and could not figure out a way to do it.</p>

<p>I tried something like this: (which failed miserably)</p>

<pre><code>SELECT *
FROM a
INNER JOIN atob ON (a.aid = atob.aid)
INNER JOIN b ON (atob.bid = b.bid)
LEFT JOIN atob nullatob ON (a.aid = nullatob.aid)
LEFT JOIN b nullb ON (nullatob.bid = nullb.bid AND nullb.value &gt; b.value)
WHERE nullb.bid IS NULL;
</code></pre>

<p>I set up an sqlfiddle at: <a href=""http://sqlfiddle.com/#!9/86f18/6"" rel=""nofollow"">http://sqlfiddle.com/#!9/86f18/6</a> with the problem set up.</p>

<p>Anyone got a clever way to join in the max value from another table via a jointable without using subqueries or is that pretty much impossible?</p>",0,mysql|join|jointable
29760044,Mysql replace string when needed query,"<p>I have a table called: <code>k01cv_sh404sef_urls</code>
Inside this table we have the following rows:</p>

<pre><code>id, cpt, rank, oldurl, newurl and dateadd
</code></pre>

<p>The row ""oldurl"" contains entry's such as:</p>

<pre><code>English/network
English/hardware-and-software
corporate-social-responsibility
</code></pre>

<p>I'd like to have a query that removes the English/ part from all the items in the ""oldurl"" row so that the english/network would be just network, English/hardware-and-software would be hardware-and-software, etc.</p>

<p>The result would be that the row ""oldurl"" contains entry's such as:</p>

<pre><code>network
hardware-and-software
corporate-social-responsibility
</code></pre>",0,mysql|string|replace
29810208,Using Table As Input to Query for Substrings,"<p>I've got a LARGE table of words in PostgreSQL that have an operation mapped to a number that it should perform if the word matches. For example:</p>

<pre><code>  words_table
words | operation
-----------------
fox   |    1
brown |    2
cow   |    1
moo   |    3
...
</code></pre>

<p>I want to be able to provide a string and see what <code>operations</code> in the table are a substring of the input, ignoring case. For example, both the input strings:</p>

<pre><code>How brown are your cows and foxes?
Howbrownareyourcowsandfoxes?
</code></pre>

<p>Would return <code>1, 2</code>. This is an unusual problem for me because I want to use the table of words as the ""input"" of the data. I realize that this operation will result in a full table scan and that I would need to do a union/distinct of the <code>operations</code>, but I have no idea how to start my query/subquery (I'd imagine I have to use a CONTAINS/LIKE subquery somewhere) to have the table be the input to check for substrings.</p>

<p>Any assistance formulating the SQL statement or strategies would be appreciated.</p>",1,sql|postgresql
29962628,select distinct sum of item that can exists in several tables,"<p>Let's say that i have 3 tables: Articles1,Articles2,Articles3.</p>

<p>It's possible that same articlegroup exists in two of theese tables.
I only want to sum amount by each articlegroup existing in Articles1 and does not exists in the other tables.</p>

<p><strong>Tables:</strong></p>

<p>Articles1</p>

<pre><code>| Id    |    ArticleName    |    Amount |
-----------------------------------------
  '1'         'Apple'              '2'
  '2'         'Orange'             '2'
  '3'         'Banana'             '3'
</code></pre>

<p>Articles2</p>

<pre><code>| Id    |    ArticleName    |    Amount |
-----------------------------------------
  '1'         'Apple'              '2'
  '2'         'Orange'             '2'
</code></pre>

<p>Articles3</p>

<pre><code>| Id    |    ArticleName    |    Amount |
-----------------------------------------
  '1'         'Apple'              '2'
  '2'         'Orange'             '2'
</code></pre>

<p><strong>My code:</strong></p>

<pre><code>SELECT SUM(a1.Amount) 
FROM Articles1 a1
LEFT OUTER JOIN Articles2 a2
   ON a1.Id = a2.Id
LEFT OUTER JOIN Articles3 a3
   ON a1.Id = a3.Id
WHERE a1.Id &lt;&gt; a2.Id OR a1.Id &lt;&gt; a3.Id
GROUP BY a1.ArticleName
</code></pre>

<p><a href=""http://sqlfiddle.com/#!9/929c7/2"" rel=""nofollow"">Fiddle</a></p>",0,sqlite
29975477,How to create a table with related images,"<p>I have a table with thousands of images, like so</p>

<pre><code>image (image_id, title, caption, filename, inserted_date)
</code></pre>

<p>I want to be able to display related images to the user. So, for example, <code>image_id</code> <code>59</code> has 3 related <code>image_id</code> <code>(61, 589, 56)</code>. <code>image_id</code> <code>61</code>, by default, has 2 related <code>image_id</code> <code>(589, 56)</code>. If I add an <code>image_id</code> to <code>61</code> (let's say 25), then <code>image_id 59</code> now has 4 related images (<code>61</code>, <code>589</code>, <code>56</code> ad <code>25</code>).</p>

<p>I have no idea how to do the table for related images. Any ideas?
Thanks</p>",0,mysql
30072478,MySQLWorkbench recreating indexes with every table change,"<p>Why does MySQLWorkbench suggest I drop and recreate indexes with every table change?</p>

<p>Do the indexes need to be recreated with every table change, even if I add new (non-indexed) fields?</p>",1,mysql|mysql-workbench
30079956,Convert TSQL XML field to multiple columns,"<p>I have the following dataset:</p>

<pre><code>Index      | xml
A          | &lt;book&gt;&lt;name&gt;A book 1&lt;/name&gt;&lt;book&gt;
B          | &lt;book&gt;&lt;name&gt;B book 1&lt;/name&gt;&lt;book&gt;&lt;book&gt;&lt;name&gt;B book 2&lt;/name&gt;&lt;book&gt;
</code></pre>

<p>And have been working with this code:</p>

<pre><code>SELECT  [Index],
      CAST([BookResults].query('data(/Book/Name)') AS VARCHAR(max)) AS BookName,
 FROM [BookCache]
</code></pre>

<p>What I need in the end is this table:
Index     | BookName</p>

<pre><code>A         | A Book 1 
B         | B Book 1 
B         | B Book 2
</code></pre>

<p>What I seem to be getting with this query is: </p>

<pre><code>A         | A Book 1 
B         | B Book 1 B Book 2
</code></pre>

<p>Where am I going wrong? How do I separate out the fields?</p>",1,xml|tsql
30082416,Does sqlite have to be installed or can it be imported in code,<p>I want to write a small program that stores simple data. However the computer that this program will operate on is very secure. Installing anything on this system is out of the question. I was wondering if sqlite can be added as a library to a C application or any language not necessarily C. I assumed C/C++ would be easiest being compiled. I know it might not make much since because how can I run my application on this system but not install sqlite but this is the restraints that I am in. Any advice or resources will be very greatful.</p>,0,c++|database|sqlite
30136203,Table Inheritence is Slow with large table?,"<p>I am using MySQL. I have a statistics table with some columns. I intend to use single table inheritance e.g. have <code>InternetStatistics</code> inherit statistics. Will this cause query to be slow for large tables? Eventually, we are querying two tables?</p>",-1,mysql
30210028,Can't extract the data from xml values in oracle sql,"<p>I have the following 2 xml value which is similar and which is stored in the request_xml column and which is clob data type:</p>

<pre><code>&lt;?xml version='1.0' encoding='utf-8'?&gt;
&lt;S:Envelope xmlns:S=""http://schemas.xmlsoap.org/soap/envelope/""&gt;
   &lt;S:Body&gt;
      &lt;ns5:updateRechargeTicket xmlns:ns5=""http://service.soap.CDRator.com"" xmlns:ns2=""http://core.result.service.soap.CDRator.com/xsd"" xmlns=""http://core.data.soap.CDRator.com/xsd"" xmlns:ns4=""http://data.soap.CDRator.com/xsd"" xmlns:ns3=""http://payment.result.service.soap.CDRator.com/xsd""&gt;
         &lt;ns5:contextUser&gt;
            &lt;ns4:brandKey&gt;FNC&lt;/ns4:brandKey&gt;
         &lt;/ns5:contextUser&gt;
         &lt;ns5:rechargeTicket&gt;
            &lt;id xmlns:xsi=""http://www.w3.org/2001/XMLSchema-instance"" xsi:nil=""true""/&gt;
            &lt;billingGroupId&gt;200907111603122893&lt;/billingGroupId&gt;
            &lt;code&gt;TIME_DIRECTDEBIT&lt;/code&gt;
            &lt;dateCreated xmlns:xsi=""http://www.w3.org/2001/XMLSchema-instance"" xsi:nil=""true"" /&gt;
            &lt;dayOfMonth&gt;1&lt;/dayOfMonth&gt;
            &lt;nextRechargeDate&gt;2015-06-01+02:00&lt;/nextRechargeDate&gt;
            &lt;rechargeAmount&gt;20&lt;/rechargeAmount&gt;
         &lt;/ns5:rechargeTicket&gt;
      &lt;/ns5:updateRechargeTicket&gt;
   &lt;/S:Body&gt;
&lt;/S:Envelope&gt;


&lt;?xml version='1.0' encoding='utf-8'?&gt;&lt;S:Envelope xmlns:S=""http://schemas.xmlsoap.org/soap/envelope/""&gt;&lt;S:Body&gt;&lt;ns5:addDirectDebitPayment xmlns:ns5=""http://service.soap.CDRator.com"" xmlns:ns2=""http://core.result.service.soap.CDRator.com/xsd"" xmlns=""http://core.data.soap.CDRator.com/xsd"" xmlns:ns4=""http://data.soap.CDRator.com/xsd"" xmlns:ns3=""http://payment.result.service.soap.CDRator.com/xsd""&gt;&lt;ns5:contextUser&gt;&lt;ns4:brandKey&gt;FNC&lt;/ns4:brandKey&gt;&lt;/ns5:contextUser&gt;&lt;ns5:billingGroupId&gt;201008141448491784&lt;/ns5:billingGroupId&gt;&lt;ns5:amount&gt;10.0&lt;/ns5:amount&gt;&lt;/ns5:addDirectDebitPayment&gt;&lt;/S:Body&gt;&lt;/S:Envelope&gt;
</code></pre>

<p>I want to use only 1 select query to extract the BillingGroupId from this 2 xml values. Is it possible or do i want to use separate select query to extarct BillingGroupId for this 2 xml values?
I want to extract the <code>billingGroupID</code> value from this xml value but its not returning anything. I am doing a small mistake in my select query which i am not able to identify. </p>

<p>Here is my query :</p>

<pre><code>SELECT xt_billingGroupId.BILLING_GROUP_ID
FROM TEMP_SOAP_MONITORING_TOPUP sm
CROSS JOIN XMLTable(XMLNAMESPACES (
      'http://schemas.xmlsoap.org/soap/envelope/' AS ""soapenv"",
      'http://service.soap.CDRator.com' as ""ns"",
      'http://core.data.soap.CDRator.com/xsd' as ""ax2130"",
      'http://webshop.result.service.soap.CDRator.com/xsd' as ""ax2147"",
      'http://core.signup.data.soap.CDRator.com/xsd' as ""ns3"",
      'http://service.soap.CDRator.com' as ""ns5"",
      'http://core.result.service.soap.CDRator.com/xsd' as ""ax232""
    ),
    'for $i in //ns5:billingGroupId return $i'
    passing XMLType(sm.REQUEST_XML)
    columns ""BILLING_GROUP_ID"" VARCHAR2(100) path '/') xt_billingGroupId    
CROSS JOIN XMLTable(XMLNAMESPACES (
      'http://core.result.service.soap.CDRator.com/xsd' as ""ax232""
    )
</code></pre>",1,sql|oracle|xml-parsing|clob
29865841,Paypal IPN Script not inserting into database,"<p>I send a Paypal IPN from their <a href=""https://developer.paypal.com/developer/ipnSimulator"" rel=""nofollow"">Simulator</a> to my PHP script on an external host. My script code is as follows:</p>

<pre><code>&lt;?php
    error_reporting(-1);
    ini_set('display_errors', 'On');

// STEP 1: read POST data

// Reading POSTed data directly from $_POST causes serialization issues with array data in the POST.
// Instead, read raw POST data from the input stream. 
$raw_post_data = file_get_contents('php://input');
$raw_post_array = explode('&amp;', $raw_post_data);
$myPost = array();
foreach ($raw_post_array as $keyval) {
  $keyval = explode ('=', $keyval);
  if (count($keyval) == 2)
     $myPost[$keyval[0]] = urldecode($keyval[1]);
}
// read the IPN message sent from PayPal and prepend 'cmd=_notify-validate'
$req = 'cmd=_notify-validate';
if(function_exists('get_magic_quotes_gpc')) {
   $get_magic_quotes_exists = true;
} 
foreach ($myPost as $key =&gt; $value) {        
   if($get_magic_quotes_exists == true &amp;&amp; get_magic_quotes_gpc() == 1) { 
        $value = urlencode(stripslashes($value)); 
   } else {
        $value = urlencode($value);
   }
   $req .= ""&amp;$key=$value"";
}


// STEP 2: POST IPN data back to PayPal to validate

$ch = curl_init('https://www.paypal.com/cgi-bin/webscr');
curl_setopt($ch, CURLOPT_HTTP_VERSION, CURL_HTTP_VERSION_1_1);
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_RETURNTRANSFER,1);
curl_setopt($ch, CURLOPT_POSTFIELDS, $req);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 1);
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 2);
curl_setopt($ch, CURLOPT_FORBID_REUSE, 1);
curl_setopt($ch, CURLOPT_HTTPHEADER, array('Connection: Close'));

// In wamp-like environments that do not come bundled with root authority certificates,
// please download 'cacert.pem' from ""http://curl.haxx.se/docs/caextract.html"" and set 
// the directory path of the certificate as shown below:
// curl_setopt($ch, CURLOPT_CAINFO, dirname(__FILE__) . '/cacert.pem');
if( !($res = curl_exec($ch)) ) {
    // error_log(""Got "" . curl_error($ch) . "" when processing IPN data"");
    curl_close($ch);
    exit;
}
curl_close($ch);


// STEP 3: Inspect IPN validation result and act accordingly

if (strcmp ($res, ""VERIFIED"") == 0) {
    // The IPN is verified, process it:
    // check whether the payment_status is Completed
    // check that txn_id has not been previously processed
    // check that receiver_email is your Primary PayPal email
    // check that payment_amount/payment_currency are correct
    // process the notification

    // assign posted variables to local variables
    $item_name = $_POST['item_name1'];
    $item_number = $_POST['item_number1'];
    $payment_status = $_POST['payment_status'];
    $payment_amount = $_POST['mc_gross1'];
    $payment_currency = $_POST['mc_currency'];
    $txn_id = $_POST['txn_id'];
    $receiver_email = $_POST['receiver_email'];
    $payer_email = $_POST['payer_email'];

    // IPN message values depend upon the type of notification sent.
    // To loop through the &amp;_POST array and print the NV pairs to the screen:
    foreach($_POST as $key =&gt; $value) {
      echo $key."" = "". $value.""&lt;br&gt;"";
    }

    // connect to db
    mysql_connect('HOST','USER','PASS');
    mysql_select_db('DBNAME');

    // query
    mysql_query(""INSERT INTO ipnlogs (item_name) VALUES ('$item_name')"");
} else if (strcmp ($res, ""INVALID"") == 0) {
    // IPN invalid, log for manual investigation
    echo ""The response from IPN was: &lt;b&gt;"" .$res .""&lt;/b&gt;"";
}
/*mysql_connect('HOST','USER','PASS');
$result = mysql_query('SHOW TABLES FROM DBNAME ');
while ($row = mysql_fetch_row($result)) {
    echo ""Table: {$row[0]}\n"";
}*/
?&gt;
</code></pre>

<p>There are no issues connecting to the database, and then database table exists and successfully inserted a test query - <code>INSERT INTO ipnlogs (item_name) VALUES ('test item')</code>.</p>

<p>I'd also like to note that the commented out code at the end successfully printed <code>Table: ipnlogs \n</code></p>",-1,php|mysql|post|paypal
30020039,How to repeat a pattern in an MS Access query,"<p>I have a MS Access database and in it are two tables called [Pattern] and [Element].</p>

<p>The following example's show the tables and their respective datatype.</p>

<p>Table 1: [Pattern]</p>

<pre><code>patternID - key
pStart - short date
pEnd - short date
</code></pre>

<p>Table 2: [Element]</p>

<pre><code>elementID - key
patternID
text -text(2)
</code></pre>

<p>I want to create a query where it will repeat the pattern contained within the text field of the element table. For example</p>

<p>for patternID = 1 there are 4 elementID entries with the text values 1,2,3,4</p>

<p>How do I get a query to repeat 1,2,3,4,1,2,3,4 for as long as the difference between the two dates, pStart and pEnd in the pattern table?</p>

<p>Hopefully this makes sense, thanks in advance. I usually work in Excel so Access is new to me.</p>",0,sql|ms-access
30121616,Array Aggregator function for Django using Postgresql,"<p>I am trying to use <code>array_agg()</code> function of <code>postgresql</code> in <code>django 1.8</code>, but could not bump into a solution as of now. What I have come across is <a href=""http://ivan-klass.blogspot.in/2013/02/postgresql-arrayagg-function-in-django.html"" rel=""nofollow"">this</a>. But the function is broken. Also no luck with using <code>raw query</code>, because we need to always include the <code>primary key</code> of the table and the field I want to use <code>array_agg()</code> is not the primary key. I am stuck. Any help will be appreciated.</p>",3,django|postgresql
30132388,mysql error 1136 'column count doesn't match value count at row 1',"<p>I've tried to add a new column called ""bidUpIncrement2"" into ""HotelMetrics.reporte 06-05"" table in MySQL buy i can't. 
This is what i wanna try: </p>

<p>INSERT INTO HotelMetrics.<code>reporte 06-05</code> (bidUpIncrement2)
VALUES ('0,05',
'0,05',
'0,05')</p>

<p>I've already create the column with Alter Table (data type float(19,2)). </p>

<p>The error that appears is ""Error Code: 1136. Column count doesn't match value count at row 1"". 
I wolud thanks any kind of help.</p>",-1,mysql
29757672,How can I debug processing of hibernate.hbm2ddl.import_files value combined with hsqldb?,"<p>In a Java project I'm working on I've got the following setup for our unit tests:</p>

<ul>
<li>I'm using Spring Test MVC, <code>@RunWith(SpringJUnit4ClassRunner.class)</code> and <code>@WebAppConfiguration</code> to run the unit tests, and I create a <code>MockMvc</code> instance using <code>webAppContextSetup(webApplicationContext)</code> to test the application.</li>
<li>I've got a Hibernate config to set up an in-memory HSQLDB, all tables are created based on the @Entity classes.</li>
<li>In the Hibernate config, I'm setting the <code>hibernate.hbm2ddl.import_files</code> property to load a file <code>import.sql</code> with SQL statements to populate the (in-memory) database.</li>
</ul>

<p>Now, I've confirmed all these above work:</p>

<ul>
<li>Tests can successfully insert/retrieve from the in-memory DB.</li>
<li>The SQL statements in the <code>import.sql</code> are executed, as various tests confirm.</li>
</ul>

<p>Now the <strong>problem</strong>: Errors occurring with statements I add in <code>import.sql</code> don't seem to be reported anywhere, neither is any indication given that an error occurred at all. Instead, subsequent statements are simply not executed. (I've confirmed this through testing.)</p>

<p>Is there any way or place these errors <em>are</em> reported that I'm apparently unaware of? Is there an additional Hibernate property for this?</p>

<p>Excerpt from hibernate test config:</p>

<pre><code>    &lt;bean id=""sessionFactory"" name=""mySessionFactory"" class=""org.springframework.orm.hibernate4.LocalSessionFactoryBean""&gt;
        &lt;property name=""dataSource"" ref=""myDataSource"" /&gt;
        &lt;property name=""hibernateProperties""&gt;
            &lt;props&gt;
                &lt;prop key=""hibernate.archive.autodetection""&gt;class,hbm&lt;/prop&gt;
                &lt;prop key=""hibernate.dialect""&gt;org.hibernate.dialect.HSQLDialect&lt;/prop&gt;
                &lt;prop key=""hibernate.show_sql""&gt;true&lt;/prop&gt;
                &lt;prop key=""hibernate.connection.driver_class""&gt;org.hsqldb.jdbcDriver&lt;/prop&gt;
                &lt;prop key=""hibernate.connection.username""&gt;sa&lt;/prop&gt;
                &lt;prop key=""hibernate.connection.password""&gt;&lt;/prop&gt;
                &lt;prop key=""hibernate.connection.url""&gt;jdbc:hsqldb:mem:myschema&lt;/prop&gt;
                &lt;prop key=""hibernate.hbm2ddl.auto""&gt;create&lt;/prop&gt;
                &lt;prop key=""hibernate.hbm2ddl.import_files""&gt;configuration/test/import.sql&lt;/prop&gt;
                &lt;prop key=""hibernate.hbm2ddl.import_files_sql_extractor""&gt;org.hibernate.tool.hbm2ddl.MultipleLinesSqlCommandExtractor&lt;/prop&gt;
                &lt;!-- when using type=""yes_no"" for booleans, the line below allow booleans in HQL expressions: --&gt;
                &lt;prop key=""hibernate.query.substitutions""&gt;true 'Y', false 'N'&lt;/prop&gt;
            &lt;/props&gt;
        &lt;/property&gt;
    &lt;/bean&gt;
</code></pre>",6,java|spring|hibernate|hsqldb|spring-test-mvc
29946384,Mysql - Money transfer: Transfer data from one field to another in the same table,"<p>I need to simulate a money transfer from one account to another. The table looks like this:</p>

<pre><code>CREATE TABLE new_table
(ID int NOT NULL AUTO_INCREMENT,
 Name varchar(50) NOT NULL,
 Password varchar(50) NOT NULL,
 Dollars double,
 PRIMARY KEY (ID)
);
</code></pre>

<p>I can't figure out a statement in MySql to transfer data from one cell/field (dollars) to another. It has to add the transferred amount to the cell and withdraw the same amount from the cell the transfer is made from. </p>",0,mysql|sql
30078663,SQL Server Integrated Security from an Azure Web Site,"<p>When running an ASP.Net website on IIS I can specify the Active Directory (AD) username that the website runs in the context of in the App Pool settings. I can then create a connection string with <code>Integrated Security = true</code> to access my database. It's then possible to secure DB resources based on that AD user.</p>

<p>Is this possible in Windows Azure when connecting a Web Site to a VM hosting an SQL database?</p>

<ul>
<li><p>Firstly it does not seem possible to specify the virtual network of the Web Site so I am not sure how to specify the connection string. I'm hoping I don't need to expose the SQL Server's port (1433) to the outside world so only the website can make access to it.</p></li>
<li><p>Secondly, I can't see how to specify the user context of the Website so that this can be passed to the SQL Server. I am aware that Azure has an Active Directory but I don't see any options in the Azure Portal to run a Web Site as a specific user.</p></li>
</ul>",2,sql-server|azure-sql-database|connection-string|azure-web-sites|azure-active-directory
29801181,Create a new table in SQuirreL SQL through the GUI?,"<p>Is it possible to create a new table in SQuirreL SQL through the GUI?</p>

<p>I can't seem to find a way to do it on the UI. This is one of the most basic piece of functionality that a db visual tool should have so I would be very surprised if you cannot do this and have to create tables via scripts.</p>

<p>Any help would be great.
Thanks. </p>",3,mysql|sql|squirrel-sql
29810183,Sqlalchemy - Updating row with a filter produces List Index Error,"<p>I hope this is my last question pertaining to this pet project of mine.</p>

<p>I'm trying to update table Clocktimes (column = time_out) with the current time. I want to select by a UUID that I create with UUID4. When I run the code, I get ListIndex out of range error, on a function in query.py (a part of Sqlalchemy). I've listed that rather short function below my code.</p>

<p>My code:</p>

<pre><code>out = session.query(). \
        filter(Clocktime.p_uuid == p_uuid). \
        update(Clocktime.time_out == datetime.datetime.now())
    session.add(out)
    session.commit()
</code></pre>

<p>Sqlalchemy code throwing error:</p>

<pre><code>def _entity_zero(self):
    return self._entities[0]
</code></pre>

<p>The Sqlalchemy code is pretty complex so I haven't looked through it yet, but my theory is that it doesn't like my filter for some reason. Anyway, I can't figure it out - do any of you have any idea?</p>",6,python|sqlite|sqlalchemy
29856627,SharePoint 2010 SSAS SSRS transition 2 servers from one FARM to another 1 server FARM,"<p>We have an Enterprise server BI Farm consisting of three(3) Servers. FARM2 on SQL2 instance</p>

<p>1) Central Admin Server
 2) PowerPivot SSAS Server
 3) SSRS Reporting Server.</p>

<p>We would like to combine all of these servers (omitting the CA) into a One server Farm FARM1  currently FARM1 does not have SSAS or SSRS BI services installed. Thus there is another external database already in place for FARM1 - SQL1.</p>

<p>These three servers FARM2 and the SQL2 instance will be decommisioned but we do not want to lose the reports, subscriptions and artifacts in FARM2 or currently in SQL2 during transition.</p>

<p>What would be the easiest way to do this with the least amount of risk? 
All are SharePoint 2010 Enterprise and SQL2012 on OS SERVER2010</p>

<p>Are there powershell scripts availble to accomplish this? If so what are they?</p>

<p>What is the procedure for this merge? Please include backup and recovery.</p>

<p>Thanks in advance!</p>",1,sql-server|powershell|sharepoint|reporting-services|sharepoint-2010
29874967,Order by number of times a tuple appears- msql,"<p>Example of table</p>

<pre><code>Name FriendName
A     C,
A     D,
B     Z,
E     B,
E     F,
E     G,
</code></pre>

<p>I want to display the table such as that the name with the most friends should show first with all its respective tuples. Like the output I want is:</p>

<pre><code>E     B,
E     F,
E     G,
A     C,
A     D,
B     Z,
</code></pre>

<p>When I use Group By name Order By Count(*) it only shows one tuple wrt name and not all the tuples 
like <code>E B, A C, B Z</code></p>",0,mysql|group-by|sql-order-by
29902597,How add a customer to an order when getting the customer details from a form,"<p>I am having trouble adding a customer and their order to an order table once they have checked out.</p>

<p>Here is my SQL for creating the four tables I am using:</p>

<pre><code>CREATE TABLE IF NOT EXISTS Product(
    ID int NOT NULL AUTO_INCREMENT,
    Name varchar(255) NOT NULL,
    Description text(65535) NOT NULL,
    Quantity int NOT NULL,
    Photo varchar(255),
    Price float NOT NULL,
    Category varchar(50),
    PRIMARY KEY (ID)
) ENGINE=innoDB;

CREATE TABLE IF NOT EXISTS Customer(
    ID int NOT NULL AUTO_INCREMENT,
    FirstName varchar(255) NOT NULL,
    LastName varchar(255) NOT NULL,
    Email varchar(255) NOT NULL,
    PhoneNumber varchar(11) NOT NULL,
    Address varchar(50),
    Town varchar(50),
    County varchar(50),
    PostCode varchar(50),
    PRIMARY KEY (ID)
) ENGINE=innoDB;

CREATE TABLE IF NOT EXISTS OrderTable(
  ID int NOT NULL AUTO_INCREMENT,
  Date date NOT NULL,
  PRIMARY KEY (ID),
  TotalPrice float NOT NULL,
  Customer_ID int NOT NULL,
  CONSTRAINT fk_Order_1
    FOREIGN KEY (Customer_ID)
    REFERENCES coursework_db.Customer (ID)
) ENGINE=innoDB;

CREATE TABLE IF NOT EXISTS OrderItem(
  ID int NOT NULL AUTO_INCREMENT,
  PRIMARY KEY (ID),
  Product_ID int NOT NULL,
  Order_ID int NOT NULL,
  Quantity int NOT NULL,
  TotalPrice float NOT NULL,
  CONSTRAINT fk_OrderItem_1
    FOREIGN KEY (Product_ID)
    REFERENCES coursework_db.Product(ID),
  CONSTRAINT fk_OrderItem_2
    FOREIGN KEY (Order_ID)
    REFERENCES coursework_db.OrderTable(ID)
) ENGINE=innoDB;
</code></pre>

<p>The problem I am having is how to select the customer from the table once they have been added to the database to use as a foreign key in the <code>OrderTable</code> table.</p>

<p>At the moment I have the details of the customer stored in local storage which can easily be accessed, but once the customer is added to the database they will get an ID. This is the only way I could think to select a unique customer.</p>",0,mysql
29963896,Group By to get min transaction,"<p>Currently I have a list of transactions as below:</p>

<pre><code>Front Office ID    Transaction ID    TradeDate    SettlementDate
10000              1234              2015-03-03   2015-03-04
10000              1235              2015-03-03   2015-06-17
10001              1232              2015-03-13   2015-03-18
10001              1231              2015-03-13   2015-06-17
</code></pre>

<p>What I need to do is find transaction ID's per Front Office ID which has the shortest number of days between trade date and settlement.</p>

<p>I know how to get the date difference, but I'm confused as to how to get this to work in a group by:</p>

<pre><code>MIN(DATEDIFF(DD,FX.TradeDate,FX.SettleDate))
</code></pre>

<p>Any help or pointers in the right direction greatly received.</p>

<p>Thanks.</p>",0,sql-server-2008|tsql|group-by
30110500,"When executing more than one stored procedures manually in sql, does it run them sequentially?","<p>From top to bottom?</p>

<p>example:</p>

<pre><code>exec storedprocedure1
exec storedprocedure2
exec storedprocedure3
</code></pre>

<p>If I hightlight all three and execute, does it run #1 first, then #2, #3?</p>",0,sql
29777894,Why are my sqlite calls on separate threads at the same time?,"<p>I have a class at <a href=""https://github.com/AaronBratcher/ALBNoSQLDB"" rel=""nofollow noreferrer"">https://github.com/AaronBratcher/ALBNoSQLDB</a> that I am trying to make sure is thread safe. Sqlite requires that calls be made by only 1 thread at a time.</p>

<p>I have a queue called _dbQueue</p>

<pre><code>private let _dbQueue = dispatch_queue_create(""com.AaronLBratcher.ALBNoSQLDBQueue"", nil)
</code></pre>

<p>and I open the db synchronously on this queue</p>

<pre><code>    ...
    var openDBSuccessful = true

    //create task closure
    let openFile:() = {
        openDBSuccessful = self.openDBFile(dbFilePath)
        }()

    dispatch_sync(_dbQueue) {
        openFile
    }
    ...
</code></pre>

<p>I also run commands and queries synchronously on the same queue</p>

<pre><code>private func sqlExecute(sql:String)-&gt;Bool {
    var successful = true

    //create task closure
    let command:() = {
        successful = self.runCommand(sql)
        }()

    dispatch_sync(_dbQueue) {
        command
    }

    return successful
}

func sqlSelect(sql:String)-&gt;[DBRow]? { // DBRow is an array of AnyObject
    var recordset:[DBRow]?

    let query:() = {
        recordset = self.runSelect(sql)
        }()

    dispatch_sync(_dbQueue) {
        query
    }

    return recordset
}
</code></pre>

<p>When doing some testing however, I got this. Two separate threads running sqlite at the same time. How do I keep this from happening?</p>

<p><img src=""https://i.stack.imgur.com/NnPGf.png"" alt=""exception error shown with stack""></p>",2,sqlite|swift|thread-safety
29797314,How to connect mysql workbench on localhost:800,"<p>I have two local servers in my windows 8.1 , AppServer And wampServer , the Appserver is normally accessible by typing  localhost in the browser. The wamp server is accessible by localhost:800 . so i have two databases , one from Appserver ,  and the other from wamp .</p>

<p>Now i have MySQL workbench , and i want to connect to the wampserver database , but when attempting to connect using hostname : localhost , it shows me just the appServer database . there is any solution to use localhost:800 ?</p>",0,mysql|workbench
29934241,SailsJS manually populate records using Model.query,"<p>lets say i have this example as my app
<a href=""http://sailsjs.org/#!/documentation/concepts/ORM/Associations/OnetoMany.html"" rel=""nofollow"">http://sailsjs.org/#!/documentation/concepts/ORM/Associations/OnetoMany.html</a></p>

<p>For some big reasons(complicated) I cannot use Model.populate() and I'm stuck in using Model.query()</p>

<p>Does anyone know how to get the result as <code>User.find().populate('pets')</code> Using <code>Model.query()</code> Please</p>

<p>Thank you</p>",3,sql|node.js|sails.js|waterline
30156945,ruby sequel and postgreSQL - too many clients (connections),"<p>I'm using the sequel gem inside a DB class that is used across my app (rack app) and it's instantiated only once.</p>

<p>The DB class initialises sequel once and has some methods I call, mainly read-only:</p>

<pre><code>def initialize
  @psql ||= Sequel.connect('postgres://localhost/mydb')
end

def query_example
  @psql[:users].order(:time)
end
</code></pre>

<p>The app is basically an API. Something like:</p>

<pre><code>class API &lt; Grape::API
format :json

before do
  @db = Db.new
end

get '/' do
  @db.query_example
end
</code></pre>

<p>This works until I reach 100 connections in postgreSQL. I assume sequel is using some sort of connection pool but somehow is not freeing up the connections? I can see the 100 'selects' in the pg_stat_activity table with a status of 'idle'. However every new request fails with the following error:</p>

<p><strong>Sequel::DatabaseConnectionError: PG::ConnectionBad: FATAL:  sorry, too many clients already</strong></p>

<pre><code>/Users/lopezj2/.rvm/gems/ruby-2.1.2/gems/sequel-4.22.0/lib/sequel/adapters/postgres.rb:236:in `initialize'
/Users/lopezj2/.rvm/gems/ruby-2.1.2/gems/sequel-4.22.0/lib/sequel/adapters/postgres.rb:236:in `new'
/Users/lopezj2/.rvm/gems/ruby-2.1.2/gems/sequel-4.22.0/lib/sequel/adapters/postgres.rb:236:in `connect'
/Users/lopezj2/.rvm/gems/ruby-2.1.2/gems/sequel-4.22.0/lib/sequel/connection_pool.rb:101:in `make_new'
</code></pre>

<p>It looks like Sequel is trying to create a new connection in the pool, however, the app is not particularly chatty. </p>",0,ruby|postgresql|sequel|grape-api
29783165,"SQL Statement INSERT, on duplicate columns UPDATE","<p>I have an SQL Table that contains a list of items that users can have linked to their profile. The SQL table looks something like this:</p>

<pre><code>Item_Activity_ID       Item_ID      User_ID     Status    Date-Added    

     1                  1           1             1         2015-06-08
     2                  2           2             1         2015-06-08
     3                  1           1             0         2015-06-09
</code></pre>

<p>The entry shows that someone with the user with id of 1 added item id 1 twice, and the only thing that was changed was the date and status. I want to make it so that when given an INSERT statement such as:</p>

<pre><code>INSERT INTO items (Item_ID, User_ID, Status, Date_Added) VALUES ('$x', '$y', 1, CURDATE()) IF EXISTS SOME Item_ID = $x AND User_ID = $y UPDATE items SET Status = 1, Date_Added = CURDATE() WHERE Item_ID = $x AND User_ID = $y
</code></pre>

<p>Item_Activity_ID is an auto_incremented primary key index. How can I accomplish this in one query? Two users can have the same item, but where should never be repeat entries of the same user id and item id. </p>",1,php|mysql|sql
29890058,sp_add_jobstep in SQL Server,"<p>I have written this in SQL:</p>

<pre><code>EXEC sp_add_jobstep
    @job_name = N'Every 5 minutes log backup ',
    @step_name = N'set T-sql command',
    @subsystem = N'TSQL',
    @command=N'DECLARE @fileName NVARCHAR(256) BACKUP LOG MM TO DISK =''F:\BackUp\Log\M-''' +dbo.UDF_Gregorian_To_Persian_WithDash(cast(GETDATE() as date))+'''-'''+ REPLACE(cast(isnull(convert(char(5), GETDATE(), 108),'''''')  as nvarchar),''':''','''''') + '''.TRN''',
    @retry_attempts = 1,
    @retry_interval = 1 ;
GO
</code></pre>

<p>but SQL says</p>

<blockquote>
  <p>""Incorrect syntaxt near +"" !</p>
</blockquote>

<p>Please help me!</p>",1,sql|sql-server
30101746,How to write triggers in Magento?,"<p>I need to write the triggers in Magento module. The trigger codes works fine in MySQL but if the same is written in Magento Installer scripts it doesn't work. 
Can someone let me know how we can use trigger in Magento. </p>

<p>Trigger code:</p>

<pre><code>DELIMITER ;;
CREATE TRIGGER `insert_user_trigger` BEFORE INSERT ON `sitealluser` FOR EACH ROW
BEGIN
    SET NEW.designs_created_at = NOW();
END;;
DELIMITER ;
</code></pre>",1,php|mysql|magento|triggers
29942824,Undefined property: stdClass::$account_id error in my code,"<p>I have encountered the following error </p>

<blockquote>
  <p>Undefined property: stdClass::$account_id (View:
  C:\xampp\htdocs\laravel\awsconfig\app\views\search.blade.php)</p>
</blockquote>

<p>here is the code which is causing this error :</p>

<pre><code>$resource_types = array();
$resource_types['AWS::EC2::Instance'] = 'EC2Instance';
$resource_types['AWS::EC2::NetworkInterface'] = 'EC2NetworkInterface';
$resource_types['AWS::EC2::VPC'] = 'VPC';
$resource_types['AWS::EC2::Volume'] = 'Volume';
$resource_types['AWS::EC2::SecurityGroup'] = 'EC2SecurityGroup';
$resource_types['AWS::EC2::Subnet'] = 'Subnet';
$resource_types['AWS::EC2::RouteTable'] = 'RouteTable';
$resource_types['AWS::EC2::EIP'] = 'EIP';
$resource_types['AWS::EC2::NetworkAcl'] = 'NetworkAcl';
$resource_types['AWS::EC2::InternetGateway'] = 'InternetGateway';


 $accounts = DB::table('aws_account')-&gt;get();
 $account_list = array();




foreach(glob('../app/views/*.json') as $filename)
{
    //echo $filename;
    $data = file_get_contents($filename);

    if($data!=null)

    {


            $decoded=json_decode($data,true);  


            if(isset($decoded[""Message""])) 
            { 
            //echo ""found message&lt;br&gt;"";
                $message= json_decode($decoded[""Message""]);
if(isset($message-&gt;configurationItem))
{
//  echo""found cfi&lt;br&gt;"";    
            $insert_array = array();
                $cfi = $message-&gt;configurationItem;
                switch ($cfi-&gt;configurationItemStatus)
                {

                    case ""ResourceDiscovered"":
                //echo""found Resource Discovered&lt;br&gt;"";  
                        if (array_key_exists($cfi-&gt;resourceType,$resource_types))

                        {
                            //var_dump($cfi-&gt;resourceType);
                            $resource = new $resource_types[$cfi-&gt;resourceType];

                            foreach ($cfi-&gt;configuration as $key =&gt; $value)
                            {
                                if (in_array($key,$resource-&gt;fields))
                                {
                                    $insert_array[from_camel_case($key)] = $value;
                                }
                            }




                            $resource-&gt;populate($insert_array);
                            if (!$resource-&gt;checkExists())
                            {
                                $resource-&gt;save();

                                    if(isset($cfi-&gt;configuration-&gt;tags))
                                    {
                                       foreach ($cfi-&gt;configuration-&gt;tags as $t )

                                        {

                                        $tag= new Tag;
                                    $tag-&gt;resource_type = ""instance"";

                                    $tag-&gt;resource_id = $resource-&gt;id;
                                    $tag-&gt;key = $t-&gt;key;
                                    $tag-&gt;value = $t-&gt;value;

                                    $tag-&gt;save();


                                        if(isset($cfi-&gt;awsAccountId))
                                    {
                                     foreach ($accounts as $a)

                                     {
                                       $account_list[] = $a-&gt;account_id;
                                     }


                                    if (!in_array($account_id,$account_list))
                                    {



                                    $account_id = new Account;
                                    $account_id-&gt;aws_account_id = $cfi-&gt;awsAccountId;

                                    $account_list[] = $account_id;
                                     $account_id-&gt;save();

                                        }        






                                }
                                }
}




                            }

                        }

                        else
                        {
                            echo ""Creating "".$cfi[""resourceType""]."" not yet supported&lt;br&gt;"";
                        }





                    break;
</code></pre>

<p>I know it will be something silly I appreciate all help as always thanks </p>",2,php|mysql|laravel-4
30202014,Dynamically creating buttons in html with mysql row value,"<p>I am drawing all my information from my sql database and displaying it in a table in html. I want to be able to click on a button at the end of each row, or somewhere on the row, and display another set of things relating to the uniqueID in that row. However at the moment, the value does not change for each dynamically created button.</p>

<pre><code>$sql = ""SELECT * FROM Hybrid"";
$result = mysqli_query($link, $sql);

if ($result-&gt;num_rows &gt; 0) {
    echo ""&lt;table&gt;&lt;tr&gt;&lt;th&gt;ID&lt;/th&gt;&lt;th&gt;Timestamp&lt;/th&gt;&lt;th&gt;Rate&lt;/th&gt;&lt;th&gt;Fiat&lt;/th&gt;&lt;th&gt;BTC&lt;/th&gt;&lt;th&gt;BTCadd&lt;/th&gt;&lt;th&gt;Contact&lt;/th&gt;&lt;th&gt;PaymentMethod&lt;/th&gt;&lt;th&gt;Bank&lt;/th&gt;&lt;th&gt;localprofile&lt;/th&gt;&lt;th&gt;BTname&lt;/th&gt;&lt;th&gt;uniqID&lt;/th&gt;&lt;th&gt;Confirm2&lt;/th&gt;&lt;th&gt;Paymentmade&lt;/th&gt;&lt;th&gt;Paymenttime&lt;/th&gt;&lt;/tr&gt;"";
    // output data of each row
    while ($row = $result-&gt; fetch_assoc()) {
        echo ""&lt;tr&gt;&lt;td&gt;"".$row[""ID""].
        ""&lt;/td&gt;&lt;td&gt;"".date('d-m H:i', strtotime($row[""Timestamp""])).
        ""&lt;/td&gt;&lt;td&gt;"".$row[""Rate""].
        ""&lt;/td&gt;&lt;td&gt;"".$row[""Fiat""].
        ""&lt;/td&gt;&lt;td&gt;"".$row[""BTC""].
        ""&lt;/td&gt;&lt;td&gt;"".$row[""BTCadd""].
        ""&lt;/td&gt;&lt;td&gt;"".$row[""Contact""].
        ""&lt;/td&gt;&lt;td&gt;"".$row[""PaymentMethod""].
        ""&lt;/td&gt;&lt;td&gt;"".$row[""Bank""].
        ""&lt;/td&gt;&lt;td&gt;"".$row[""localprofile""].
        ""&lt;/td&gt;&lt;td&gt;"".$row[""BTname""].
        ""&lt;/td&gt;&lt;td&gt;"".$row[""uniqID""].
        ""&lt;/td&gt;&lt;td&gt;"".$row[""Confirm2""].
        ""&lt;/td&gt;&lt;td&gt;"".$row[""Paymentmade""].
        ""&lt;/td&gt;&lt;td&gt;"".date('d-m H:i', $row[""Paymenttime""]).
        ""&lt;/td&gt;&lt;td&gt;"".
        ""&lt;button id='view' type='button' value='$row[uniqID]' onclick='dropdown();' &gt;View&lt;/button&gt;"".
        ""&lt;/td&gt;&lt;/tr&gt;"";
    }
    echo ""&lt;/table&gt;"";
}
</code></pre>

<p>This bit is the button:</p>

<pre><code> &lt;td&gt;"" . ""&lt;button id='view' type='button' value='$row[uniqID]' onclick='dropdown();' &gt;View&lt;/button&gt;"" . ""&lt;/td&gt;
</code></pre>

<p>and $row['uniqID'] displays all the different uniqIDs on my table in html, however, when I try this in javascript:</p>

<pre><code>&lt;script&gt;
    var id = document.getElementById(""view"").value;

    function dropdown() {
        alert(id);
    };
&lt;/script&gt;
</code></pre>

<p>It only alerts the first <code>$row['uniqID']</code> regardless of which button I press, instead of the one corresponding to the row.</p>

<p>I need the value of the button to correspond to the uniqueID for that row, so I can use it in the button function, maybe there is another way?</p>

<p>I am stuck as to how to do this, I thought it might be something to do with the 'infamous javascript loop issue' but I am not sure if it applies, or if it does quite how to fix it?</p>",2,javascript|php|html|mysql|dynamic
29982906,How can I migrate flask-sqlalchemy multiple databases?,"<p>I know multiple databases work on flask-sqlalchemy with <code>__bind_key__</code>. 
But I don't know how to migrate those databases on alembic(flask-migrate).
Here's env.py:</p>

<pre><code>from flask import current_app
config.set_main_option('sqlalchemy.url', current_app.config.get('SQLALCHEMY_BINDS')['bind_master'])

target_metadata = {
    'bind_master': current_app.extensions['migrate'].db.metadata,
    'bind_slave': current_app.extensions['migrate'].db.metadata,
}
</code></pre>

<p>How can I set <code>slave</code> db on target_metadata? flask-migrate doesn't care about bind databases.
Thanks.</p>",2,python|flask|sqlalchemy|flask-sqlalchemy|flask-migrate
30078773,Converting a number to feet & inches,"<p>I want to take a number from a table ( using sql server 2008 ) such as 720 and convert it to feet and inches  with this: </p>

<pre><code>Format(Val(Length) \ 12, ""00' "") &amp; Format(Val(Length) Mod 12, ""00\"""""")
</code></pre>

<p>This should be in a sql statement.</p>

<p>I'm having trouble getting the syntax correct. Any help please?</p>",0,sql|sql-server-2008
29868370,Looping results to insert new div with complexities,"<p>How can I loop results to insert new div with complexities for each result?</p>

<p>I have the following database table with following columns:</p>

<pre><code>ID | UserID | Title | Introduction | Content | Images | Background | Date | Pinned
</code></pre>

<p>I have the following PHP code:</p>

<pre><code>if($latest = $con-&gt;query(""SELECT * FROM Posts WHERE Pinned='0' LIMIT 4"")) {
    if($latest-&gt;num_rows &gt; 0) {
                                            //&lt;-- result loop here 
    } else {
        echo '&lt;h1 class=""alert fade""&gt;No Posts&lt;/h1&gt;';
    }

    $latest-&gt;close();
};
</code></pre>

<p>I would like to format the output as follows:</p>

<pre><code>&lt;div class=""post standard"" style=""background-image:url([1]);""&gt;
    &lt;a href=""view.php?id=[2]""&gt;
        &lt;div class=""shader""&gt;&lt;/div&gt;
            &lt;div class=""info""&gt;
                &lt;h1&gt;[3]&lt;/h1&gt;
                &lt;p&gt;[4] - [5]&lt;/p&gt;
            &lt;/div&gt;
&lt;/div&gt;

[1] - Background
[2] - ID
[3] - Title
[4] - UserID
[5] - Date
</code></pre>

<p>How would I accomplish this?</p>",1,php|html|mysql|mysqli
29892127,order week number and resp. data in mysql starting with 51 and ending with week 12,"<p>I have got this query which shows snowdepth by weeknumber. There is no other date(ish) registration in the table other than wk, 1,2 3, etc. </p>

<pre><code>SELECT 
  res_id,
  wk,
  ROUND(templo, 0) AS templo,
  ROUND(temphi, 0) AS temphi,
  ROUND(snow_valley, 0) AS snow_valley,
  ROUND(snow_mountain, 0) AS snow_mountain 
FROM
  sv_cond_vw_wk 
GROUP BY res_id,
  wk 
HAVING (res_id = 6) 
  AND (wk = 51 
    OR wk = 52 
    OR wk = 52 
    OR wk &lt; 13)
</code></pre>

<p>It outpuths week 51 and 52 after week 12 but I would like to have it before week number 1:
51,52,1,2,3,4</p>",0,mysql
29918628,How to build such query in MySQL,"<p>I need advice of MySQL genius.</p>

<p>Table1 '<code>objects</code>':</p>

<pre><code>ID (int,key,autoincrement) | hash(text) | name(text)
</code></pre>

<p>Table2 '<code>logs</code>': </p>

<pre><code>ID (int,key,autoincrement) | hash(text) | type(int) | time(text) | sum(int)
</code></pre>

<p>Table1 '<code>objects</code>' links with Table2 '<code>logs</code>' by column '<code>hash</code>'. That column contains MD5 values.</p>

<p>I need to get data with <code>type=1 or type=2</code> in such way for every object:</p>

<pre><code>Name | sum all rows for this name and type=1 | sum all rows for this name and type=2
</code></pre>

<p>Tried queries like this </p>

<pre><code>SELECT name, SUM(sum) as tsum 
FROM objects RIGHT JOIN logs using(hash) 
WHERE (type='1' OR type='2') 
GROUP BY type
</code></pre>

<p>But it forms data in format</p>

<pre><code>Name | sum all rows for this name and type=1
Name | sum all rows for this name and type=2
</code></pre>",0,mysql
29962772,MySQL select different values as different columns in a same table?,"<p>I use a table <code>Votes</code> to store the likes/dislikes for user posts (<code>Posts</code>). Now I want to select the number of a post likes and dislikes. Currently the query is as below:</p>

<pre><code>SELECT p.*, count(v1.id) AS Likes, count(v2.id) AS Dislikes FROM Posts p
LEFT JOIN Votes v1 ON v1.post_id=p.id AND v1.status=1
LEFT JOIN Votes v2 ON v2.post_id=p.id AND v2.status=2
WHERE p.id=123
</code></pre>

<p>Is there a better approach that the two cases can be combined into one?</p>",0,mysql|select
29988710,Data migration with insert/update conditions and multiple databases,"<p>So I have two DB's, one used for draft one used for live stuff.</p>

<pre><code>// Connect to the draft database
$connDraft = mysqli_connect('###.###.##.##','user','pass') OR die(""There was a problem connecting to the draft database."");
// Select database
mysqli_select_db($connDraft, ""draftDB"") OR die(""There was a problem selecting the draft database."");

// Connect to the live database
$connLive = mysqli_connect('###.###.##.##','user','pass') OR die(""There was a problem connecting to the live database."");
// Select database
mysqli_select_db($connLive, ""liveDB"") OR die(""There was a problem selecting the live database."");
</code></pre>

<p>The table structure will be the same, as will the table names and everything. I simply need to:</p>

<p>if entry_id exists in live, update otherwise insert a new record.</p>

<p><strong>A</strong> - Copying from table to table i'd use</p>

<pre><code>INSERT INTO table2
SELECT * FROM table1;
</code></pre>

<p><strong>B</strong> - Insert vs update i'd use</p>

<pre><code>INSERT ... ON DUPLICATE KEY UPDATE
</code></pre>

<p><strong>C</strong> - And moving from 1 DB to another, i'd use <strong>???</strong></p>

<pre><code>INSERT INTO liveDB.TableA
SELECT * FROM draftDB.TableB
</code></pre>

<p>My confusion is how to use <strong>A</strong> &amp; <strong>B</strong> in tandem. I'm having difficulty finding a sample online. Also, is <strong>C</strong> is a proper way to accomplish this.</p>

<p>A sample table structure would be...</p>

<p>entry_id, title, status, date_created, data_edited</p>",1,php|mysqli|insert-update
30100605,retrieving sql data in XML,"<p>I have spring-security.xml file. In that I'm writing sql query to select records from database. Now I need to pass those records to servlet . Is it possible to do ? How ? Or any alternative ways to do it ?? </p>

<p>This is my spring-security.xml</p>

<pre><code> &lt;authentication-manager&gt;  
   &lt;authentication-provider&gt;  
   &lt;jdbc-user-service data-source-ref=""dataSource""
          users-by-username-query=
            ""select user_login_name,user_password,user_id,role_type_id from sox_audit.sox_users where user_login_name=?""
          authorities-by-username-query=
            ""select username, role from user_roles where username =?  ""/&gt;

    &lt;!--  &lt;user-service&gt;  
  &lt;user name=""Sriram"" password=""12345"" authorities=""ROLE_USER"" /&gt;  
  &lt;user name=""Vignesh"" password=""12345"" authorities=""ROLE_ADMIN"" /&gt; 
  &lt;user name=""Yogesh"" password=""12345"" authorities=""PARTNER_CUSTOMER"" /&gt; 
     &lt;/user-service&gt;   --&gt;

   &lt;/authentication-provider&gt;  
 &lt;/authentication-manager&gt;  
</code></pre>",1,mysql|xml|spring-mvc|servlets|spring-security
30129145,SQL: Searching X table and returning rows from Y based on X data,"<ol>
<li>Search <code>goals</code> for rows where userid = 1.</li>
<li>Using returned rows, search <code>checkin</code> where <code>biometricid</code>'s match, along with the <code>userid</code>, and filter out rows that are older than the goal date.</li>
</ol>

<p><em>Note: Both the userid and biometricid are foreign tables.</em></p>

<p>How may I do this with one query?</p>

<pre><code>checkin
id  | userid    | date                  | biometricid   | value
1   | 1         | 2015-01-10 00:00:00   | 1             | 9
2   | 1         | 2000-05-11 00:00:00   | 1             | 7
3   | 2         | 2015-01-10 00:00:00   | 1             | 9
4   | 1         | 2015-01-10 00:00:00   | 2             | 1
5   | 1         | 2017-01-11 00:00:00   | 1             | 4

goals
id  | userid | date                 | biometricid   | value 
1   | 1      | 2000-01-05 00:00:00  | 1             | 3
2   | 1      | 2015-01-01 00:00:00  | 2             | 2
3   | 2      | 2015-01-01 00:00:00  | 1             | 2

desired result
id  | date                  | biometricid   | value 
1   | 2015-01-10 00:00:00   | 1             | 9
2   | 2017-01-11 00:00:00   | 1             | 4
</code></pre>",0,mysql|sql
30176233,mySQL moving rows from 2 tables to other tables,"<p>hello i can't seem to figure out why this sql statement doesn't work?</p>

<p>i am trying to move rows from table1 and table2 into table3 and table4. i thought the easiest approach to this was by selecting the rows with inner join and then making 2 INSERT INTO. </p>

<pre><code>BEGIN;
INSERT INTO table3 (id, content, createdBy, createdDate, endTime, startTime) 
VALUES (table1.id, table1.content, table1.createdBy, table1.createdDate, table1.endTime, table1.startTime);
INSERT INTO table4 (table3_Id, sometableid) 
VALUES (table2.table3_Id, table2.sometableid);
SELECT table1.id, 
table1.content, 
table1.createdBy, 
table1.createdDate, 
table1.endTime, 
table1.startTime, 
table2.table2_id, 
table2.sometableid
FROM table1 
INNER JOIN table2 
ON table1.id = table2.table1_id
WHERE table1.endTime &lt; NOW()
COMMIT;
</code></pre>

<p>when i run this sql it outputs #1054 - Unknown column 'table1.id' in 'field list'</p>

<p>if anyone has any good ideas, or can point me in the right direction it would be greatly appreciated!</p>",0,mysql|sql|insert|inner-join
30180826,Fix Query Display Row With The Last ID With SQL Server 2000,"<p>I have row table like this :</p>

<pre><code>ID      EQ  TI      LE  VAL     NO
==================================
1504    TX  410413  Y   2065000 1
1504    TX  410413  Y   2065000 2
1504    TX  410413  Y   2065000 3
1504    TX  410413  Y   730000  4
1504    TX  410413  C   2606900 5
1504    TX  410413  Y   4120900 6
1504    TX  410413  Y   4120900 7
1504    TX  410413  Y   2065000 8
1504    TX  410413  Y   2065000 9
1503    TX  410413  Y   2065000 1
1503    TX  410413  Y   2065000 2
1503    TX  410413  Y   2065000 3
1503     TX 410413  Y   2065000 4
1503    TX  410413  C   2606900 5
1503    TX  410413  Y   4120900 6
1503    TX  410413  Y   4120900 7
1503    TX  410413  Y   2065000 8
1503    TX  410413  Y   2065000 9
</code></pre>

<p>What i want to ask is, how to display rows only with the latest id (1504). The situation is i dont know the latest id so, query like select * from ... where id LIKE '1504' is not i want to use.</p>

<p>Please give me any advice query how to solve this.</p>",0,sql-server-2000
29791374,Insert multiple rows in SQLite (WIndows phone 7 & 8),"<p>I am  creating  a table  named  ""Task"" with four  columns by taking  a  new class</p>

<pre><code> public sealed class Task
{

    [PrimaryKey, AutoIncrement]
    public int Id { get; set; }

    public string FirstName { get; set; }

    public string LastName { get; set; }

    public DateTime CreationDate { get; set; }

}
</code></pre>

<p>To  insert  single  row..i  followed  this..it  working  perfectly  </p>

<pre><code>private void Insert_Click(object sender, RoutedEventArgs e)    
    {
        using (var db = new SQLiteConnection(DB_PATH))
        {

            db.RunInTransaction(() =&gt;
            {
                db.Insert(new Task() { Id = 1, FirstName = ""Ken"", LastName = d1[2], CreationDate = DateTime.Now });

          });

        }
    }
</code></pre>

<p>..but  in  my  requirement ..i  have  to  insert  multiple rows  at  a  time..i tried  the  following. </p>

<pre><code>private void Insert_Click(object sender, RoutedEventArgs e)    //perfectly  working
    {
        using (var db = new SQLiteConnection(DB_PATH))
        {

            db.RunInTransaction(() =&gt;
            {
                db.Insert(new Task() { Id = 1, FirstName = ""Ken"", LastName = d1[2], CreationDate = DateTime.Now });
                 db.Insert(new Task() { Id = 2, FirstName = ""Justin"", LastName = ""Bieber"", CreationDate = DateTime.Now });

                db.Insert(new Task() { Id = 3, FirstName = ""king"", LastName = ""john"", CreationDate = DateTime.Now });
            });

        }
    }
</code></pre>

<p>when  i   followed  this,no  error  popped..but   only    first  row  is  inserting..  no  sign  of  second  row  details..
please  help me  in this  regard..</p>",0,c#|database|sqlite|windows-phone-7|windows-phone-8
29795928,ignore null objects of eager loaded data- laravel,"<p>I have folowing JSON returned by ORM </p>

<pre><code>[
{
""id"": 3,
""name"": ""Card Department"",
""name_burmese"": ""Card Department"",
""is_active"": ""1"",
""created_at"": ""2014-11-23 07:02:07"",
""updated_at"": ""2014-11-23 07:02:07"",
""orm_bank_contact"": []
},
{
""id"": 1,
""name"": ""Loan Department"",
""name_burmese"": ""Loan Department"",
""is_active"": ""1"",
""created_at"": ""2014-11-23 07:01:16"",
""updated_at"": ""2015-02-24 09:05:35"",
""orm_bank_contact"": []
},
{
""id"": 4,
""name"": ""Remittance Department"",
""name_burmese"": ""Remittance Department"",
""is_active"": ""0"",
""created_at"": ""2015-02-24 09:43:25"",
""updated_at"": ""2015-04-17 12:26:07"",
""orm_bank_contact"": []
},
{
""id"": 2,
""name"": ""Deposit Department"",
""name_burmese"": ""Deposit Department"",
""is_active"": ""1"",
""created_at"": ""2014-11-23 07:01:34"",
""updated_at"": ""2015-04-20 14:04:27"",
""orm_bank_contact"": [
{
""id"": 27,
""bank_department"": 2,
""mobile"": ""9843139168"",
""phone"": ""9843139168"",
""email"": ""shresthabeenu@gmail.com"",
""contact_person"": ""Binu Shrestha"",
""address"": ""No. 416, Mahabandoola Road, Kyauktada Township, Yangon, Myanmar"",
""is_active"": ""1"",
""created_at"": ""2015-04-15 08:50:16"",
""updated_at"": ""2015-04-15 08:50:16"",
""bank_id"": 13
}
]
}
]
</code></pre>

<p>but i just need </p>

<pre><code>[

{
""id"": 2,
""name"": ""Deposit Department"",
""name_burmese"": ""Deposit Department"",
""is_active"": ""1"",
""created_at"": ""2014-11-23 07:01:34"",
""updated_at"": ""2015-04-20 14:04:27"",
""orm_bank_contact"": [
{
""id"": 27,
""bank_department"": 2,
""mobile"": ""9843139168"",
""phone"": ""9843139168"",
""email"": ""shresthabeenu@gmail.com"",
""contact_person"": ""Binu Shrestha"",
""address"": ""No. 416, Mahabandoola Road, Kyauktada Township, Yangon, Myanmar"",
""is_active"": ""1"",
""created_at"": ""2015-04-15 08:50:16"",
""updated_at"": ""2015-04-15 08:50:16"",
""bank_id"": 13
}
]
}
]
</code></pre>

<p>I need to fetch record with child on eager loaded objects</p>

<p>I tried below</p>

<pre><code>$bank_contact = BankDepartment::with(array('OrmBankContact' =&gt; function($query) use($bank_id){
            $query-&gt;where('bank_id', ""="", $bank_id)-&gt;where('bank_department','&gt;',0);}))

            -&gt;get();
</code></pre>

<p>But no luck.. what is the proper way?</p>",1,php|sql|laravel|orm|eager-loading
29841625,pass a variable to predefined function sybase/sql,"<p>i'm new in sql language, and i would appreciate your help. I want to pass a variable (i.e. a column) to a predefined function like ""convert"" or ""hextobigint"".</p>

<pre><code>select hextobigint('14c9d0742dc') 
</code></pre>

<p>returns 1428563641052</p>

<p>meanwhile the below code doesn't gets executed ()</p>

<pre><code>begin 
declare @st varchar(16); 
set @st=dc.table.START_TIME;
select hextobigint('dc.table.START_TIME') FROM dc.table; 
end
</code></pre>

<p>Error </p>

<blockquote>
  <p>Correlation name ""table"" not found.</p>
</blockquote>

<p>Also for the function returns the correct value:</p>

<pre><code>select convert (bigint,0x14c9d0742dc)
</code></pre>

<p>but </p>

<pre><code>select convert (bigint,14c9d0742dc)
</code></pre>

<p>doesn't </p>

<blockquote>
  <p>Syntac error 'c9d0742dc' on line 1.</p>
</blockquote>

<p>also </p>

<pre><code>select convert(bigint,dc.table.START_TIME) FROM dc.table
</code></pre>

<p>returns only null because the format of the column is like ""14c9d0742dc"".</p>

<p>The scope is to pass variable (column) to these functions ""hextobigint"" and ""convert"". Could you please help?</p>",1,sql|sybase|sybase-iq
29880443,Using PHP to redirect when SQL query comes up empty,"<p>I am using this PHP script to return search input values with corresponding URL values on a MySQL database/table. The idea is to append them to a redirect to automatically jump to that page.  </p>

<pre><code>&lt;?php
$searchResults = $_POST['search'];
$dbhost = 'localhost';
$dbuser = 'admin';
$dbpass = 'pwd';
$conn = mysql_connect($dbhost, $dbuser, $dbpass);
if(! $conn )
{
  die('Could not connect: ' . mysql_error());
}
$sql = ""SELECT url
    FROM Table_1
    WHERE input = '"" .$searchResults.""'"";

mysql_select_db('database_1');
$retval = mysql_query( $sql, $conn );
if(! $retval )
{
  die('Could not get data: ' . mysql_error());
}
while($row = mysql_fetch_array($retval, MYSQL_ASSOC))
{
    $redirect = $row['url'];
    header('Location:'.$redirect);  
} 
</code></pre>

<p>To catch any input that does not match a value on Table_1 added this If statement.  It will take any non relevant or misspelled inputs and redirect them to xyz.html</p>

<pre><code>if (mysql_num_rows($retval) &lt; 1)  {

header('Location: xyz.html');

}
</code></pre>

<p><strong>Is this incorrect?</strong>  It seems to be working but I assume there must be a cleaner way of doing this/ it may be <strong>bad practice.</strong></p>",4,php|mysql|sql
30153289,How to create stored procedures in DreamFactory API,"<p>I have added MySQL tables in the DreamFactory schema (Local Database) and trying to add a stored procedure. I see URLs for listing the existing stored procedures and calling them, but how to create them or add them into Local Database of DreamFactory? </p>",1,mysql|api|rest|restful-url
30007316,How to skip irregular header information of a Flat File in SSIS?,"<p>I have a file like as seen below: Just Ex:</p>

<pre><code>kwqif h;wehf uhfeqi f ef
fekjfnkenfekfh  ijferihfq eiuh qfe iwhuq fbweq
fjqlbflkjqfh iufhquwhfe hued liuwfe
jewbkfb flkeb l jdqj jvfqjwv yjwfvjyvdfe
enjkfne khef kurehf2 kuh fkuwh lwefglu 
gjghjgyuhhh jhkvv   vytvgyvyv   vygvyvv
gldw    nbb ouyyu   buyuy   bjbuy   
ID  Name    Address
1   Andrew  UK
2   John    US
3   Kate    AUS
</code></pre>

<p>I want to dynamically skip header information and load flatfile to DB
Like below:</p>

<pre><code>    ID  Name    Address
    1   Andrew  UK
    2   John    US
    3   Kate    AUS
</code></pre>

<p>The header information may vary (not fixed no. of rows) from file to file.</p>

<p>Any help..Thanks in advance.</p>",0,sql-server-2008|ssis|business-intelligence|flat-file
30048435,Keep session in koa on multiple servers,"<p>I have multiple koa servers with a load balancer, using passport login. I would like to keep the session across all servers. </p>

<p>My first attempt was to set the session storage to be in mysql database, but this caused the server to call mysql on each request, thus causing performance issues.  </p>

<p>I would like to keep the session object in the RAM of each server, and if the user gets redirected to another server by the load balancer and the server doesn't recognize the cookie, I would like it to fallback to a database and load the data into its RAM too.<br>
Is there a way to do this?  </p>

<p>Thanks.</p>",4,javascript|mysql|node.js|session|koa
30130933,Using sqlalchemy to define relationships in MySQL,"<p>I am in the process of working with sqlalchemy and MySQL to build a database. I am currently having trouble defining a specific relationship between two tables.</p>

<pre><code>class Experiment_Type(Base):
    __tablename__='experiment_types'

    id = Column(Integer, primary_key=True)
    type = Column(String(100))


class Experiments(Base):
    __tablename__ = 'experiments'

    id = Column(Integer, primary_key=True)
    type = Column(String(100))
    sub_id = Column(Integer, ForeignKey('experiment_types.id'))

    experiments = relationship('Experiments',
    primaryjoin=""and_(Experiment_Type.id == Experiments.sub_id,
    'Experiments.type' == 'Experiment_Type.type')"",
    backref=backref('link'))
</code></pre>

<p>What I want to do is have values of sub_id in experiments match the id in experiment_types based on type (if an entry in experiment_types of type = 'type1' has id = 1, then an entry in experiments with type = 'type1' should have a sub_id = 1). I am not even sure if this is the best way to approach defining the relationship in this situation
so any advice is welcome.</p>

<p>The current error message is this:</p>

<p>sqlalchemy.exc.ArgumentError: Could not locate any relevant foreign key columns for primary join condition '0 = 1' on relationship Experiments.experiments.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or are annotated in the join condition with the foreign() annotation.</p>",1,python|mysql|sqlalchemy
30196463,PHP query for school schedule,"<p>Good day everybody, 
I'm here to ask for advices concerning schedule I've been working on. 
The schedule should register each subject in each hour of each day from monday to friday. The problem I encouter is in the number of queries, because it needs to be different query for each hour of each day and that would give me 45 different queries(the difference will be in the variable for <code>$day</code> and <code>$hour</code>). <br>
Of course I could make 45 different queries but that seems like insanity to me so I wonder, there has to be a way how to make the process simplier. I'm pretty sure, that the sollution is hidden in the <code>for</code> or <code>while</code> loops, but than again, I would need to change the variables in the process. <br>
Now my table and most of my php looks like this (yes I'm missing the the part, where I extract the results to each row, that will be added later): </p>

<p><div class=""snippet"" data-lang=""js"" data-hide=""false"">
<div class=""snippet-code"">
<pre class=""snippet-code-css lang-css prettyprint-override""><code>.table{
    border: 1px solid red;
    margin-left: auto;
    margin-right:auto;
}
.table tr{
    border: 1px solid blue;
}
.table td{
    border: 1px solid green;
}</code></pre>
<pre class=""snippet-code-html lang-html prettyprint-override""><code>&lt;?php

//authentication check
if (isset($_SESSION['authenticated'])) {
    echo "" User id: "" . $ID;
    require_once ('./functions/database.php');

    $mon = 'monday';
    $tue = 'tuesday';
    $wen = 'wensday';
    $thu = 'thursday';
    $fri = 'friday';

    $hourOne = '1.hour';
    $hourTwo = '2.hour';
    $hourThree = '3.hour';
    $hourFour = '4.hour';
    $hourFive = '5.hour';
    $hourSix = '6.hour';
    $hourSeven = '7.hour';
    $hourEight = '8.houra';
    $hournine = '9.hour';

    $query1 = ""select subject from student_subjects natural join subjects
               where id_student = '$ID' AND day = '$mon' AND hour ='$hourOne';"";
    $result = mysqli_query($conn, $query);



    echo ""&lt;section&gt;"";
    echo ""&lt;table class='table'&gt;
        &lt;tr&gt;
            &lt;td&gt;Den&lt;/td&gt;
            &lt;td&gt;1.hour&lt;/td&gt;
            &lt;td&gt;2.hour&lt;/td&gt;
            &lt;td&gt;3.hour&lt;/td&gt;
            &lt;td&gt;4.hour&lt;/td&gt;
            &lt;td&gt;5.hour&lt;/td&gt;
            &lt;td&gt;6.hour&lt;/td&gt;
            &lt;td&gt;7.hour&lt;/td&gt;
            &lt;td&gt;8.hour&lt;/td&gt;
            &lt;td&gt;9.hour&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
            &lt;td&gt;monday&lt;/td&gt;
            &lt;td&gt;/*hodina*/&lt;/td&gt;
            &lt;td&gt;/*hodina*/&lt;/td&gt;
            &lt;td&gt;/*hodina*/&lt;/td&gt;
            &lt;td&gt;/*hodina*/&lt;/td&gt;
            &lt;td&gt;/*hodina*/&lt;/td&gt;
            &lt;td&gt;/*hodina*/&lt;/td&gt;
            &lt;td&gt;/*hodina*/&lt;/td&gt;
            &lt;td&gt;/*hodina*/&lt;/td&gt;
            &lt;td&gt;/*hodina*/&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
            &lt;td&gt;tuesday&lt;/td&gt;
            &lt;td&gt;/*hodina*/&lt;/td&gt;
            &lt;td&gt;/*hodina*/&lt;/td&gt;
            &lt;td&gt;/*hodina*/&lt;/td&gt;
            &lt;td&gt;/*hodina*/&lt;/td&gt;
            &lt;td&gt;/*hodina*/&lt;/td&gt;
            &lt;td&gt;/*hodina*/&lt;/td&gt;
            &lt;td&gt;/*hodina*/&lt;/td&gt;
            &lt;td&gt;/*hodina*/&lt;/td&gt;
            &lt;td&gt;/*hodina*/&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
            &lt;td&gt;wensday&lt;/td&gt;
            &lt;td&gt;/*hodina*/&lt;/td&gt;
            &lt;td&gt;/*hodina*/&lt;/td&gt;
            &lt;td&gt;/*hodina*/&lt;/td&gt;
            &lt;td&gt;/*hodina*/&lt;/td&gt;
            &lt;td&gt;/*hodina*/&lt;/td&gt;
            &lt;td&gt;/*hodina*/&lt;/td&gt;
            &lt;td&gt;/*hodina*/&lt;/td&gt;
            &lt;td&gt;/*hodina*/&lt;/td&gt;
            &lt;td&gt;/*hodina*/&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
            &lt;td&gt;thursday&lt;/td&gt;
            &lt;td&gt;/*hodina*/&lt;/td&gt;
            &lt;td&gt;/*hodina*/&lt;/td&gt;
            &lt;td&gt;/*hodina*/&lt;/td&gt;
            &lt;td&gt;/*hodina*/&lt;/td&gt;
            &lt;td&gt;/*hodina*/&lt;/td&gt;
            &lt;td&gt;/*hodina*/&lt;/td&gt;
            &lt;td&gt;/*hodina*/&lt;/td&gt;
            &lt;td&gt;/*hodina*/&lt;/td&gt;
            &lt;td&gt;/*hodina*/&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
            &lt;td&gt;friday&lt;/td&gt;
            &lt;td&gt;/*hodina*/&lt;/td&gt;
            &lt;td&gt;/*hodina*/&lt;/td&gt;
            &lt;td&gt;/*hodina*/&lt;/td&gt;
            &lt;td&gt;/*hodina*/&lt;/td&gt;
            &lt;td&gt;/*hodina*/&lt;/td&gt;
            &lt;td&gt;/*hodina*/&lt;/td&gt;
            &lt;td&gt;/*hodina*/&lt;/td&gt;
            &lt;td&gt;/*hodina*/&lt;/td&gt;
            &lt;td&gt;/*hodina*/&lt;/td&gt;
        &lt;/tr&gt;
    &lt;/table&gt;"";
    echo ""&lt;/section&gt;"";
} else {
    echo "" To see your schedule, you need to login first"";
}
?&gt;</code></pre>
</div>
</div>
</p>

<p>(hodina = hour)<br>
Thank you in advance for any advice.</p>",1,php|mysql|database
29967293,flask postgresql connection pool using uwsgi to run behind nginx,"<p>I'm relatively new to web servers and web applications. </p>

<p>We have a basic python application implemented on flask which was deployed on the server using uwsgi to run behind nginx server. Currently our app has to create a postgreSQL db connection on every requests which takes more than ideal time. What I need is a persistent connection pool which will be created only once and reused on each request.</p>

<p>I tried to create a connection pool using pssycopg2 built-in functionality</p>

<pre><code># create pool with min number of connections of 1, max of 10
a = psycopg2.pool.SimpleConnectionPool(1,10,database='YOURDB', otherstuff...)
</code></pre>

<p>But Couldn't get a global persistent connection pool to be used, when processing a request, may be because of UWSGI.
I looked up connection pooling with flask UWSGI but couldn't find sufficient information to create connection pools</p>

<p><strong>Question 1: How or what is the best way to implement connection pooling in such an environment mentioned above (flask + UWSGI + NGINX)?</strong></p>

<p><strong>Question 2: If I implement an ORM like SQL-Alchemy. Will that be able to provide efficient connection pooling in the above case or will UWSGI block its capabilities to provide a connection pool?</strong></p>",0,postgresql|nginx|flask|connection-pooling|uwsgi
30004373,How to set password or authentication for .mdf(service based database) file in vs2010?,"<p>I am developing a stand alone windows application in c#
I am using service based database.</p>

<p>Can anyone tell me how to protect .mdf database from copying or attaching to sql server management studio without password from Client's machine ??</p>

<p>Is there any way to set Sql authentication for .mdf file ?</p>",2,c#|sql-server-express|mdf
30082845,character encoding issue with the BCP and ó,"<p>I have a file that needs to go to Poland.  In my data I have an <code>ó</code>.  When I output the data to a table the <code>ó</code> is still there as the field is <code>NVARCHAR</code>.  When I cut and paste from the table into Excel or Notepad++ the <code>ó</code> stays</p>

<p>When I use the BCP utility to export the data, the <code>ó</code> is changed to a <code>¢</code> if I open the resulting text file in Excel or Notepad++.  If I change the encoding sometimes the character becomes a <code>˘</code>.</p>

<p>I have tried the following command line switches, one at a time.
<code>-n</code>
<code>-N</code>
<code>-w</code></p>",3,sql-server|unicode|character-encoding|bcp
29913612,Upgrading from Django 1.6 (with south) to 1.8 doesn't modify 'last_login' on the user table,"<p>I have upgraded from Django 1.6.5 (with south migrations) to Django 1.8. I have followed the instructions here:
<a href=""https://docs.djangoproject.com/en/1.8/topics/migrations/#upgrading-from-south"" rel=""nofollow noreferrer"">https://docs.djangoproject.com/en/1.8/topics/migrations/#upgrading-from-south</a></p>

<p>So, I remove South, delete my previous migrations and run <code>python manage.py makemigrations</code> which makes a new migration file. Then I run <code>python manage.py migrate --fake-initial</code> to fake the initial migration. Then I run <code>python manage.py migrate</code>.</p>

<p>It all runs fine with no errors.</p>

<p>I have a custom user model which inherits <code>AbstractBaseUser</code>. In Django 1.8 it seems there is a change to the <code>last_login</code> field where it is now able to accept a <code>null</code> value (<a href=""https://docs.djangoproject.com/fr/1.8/ref/contrib/auth/#django.contrib.auth.models.User.last_login"" rel=""nofollow noreferrer"">https://docs.djangoproject.com/fr/1.8/ref/contrib/auth/#django.contrib.auth.models.User.last_login</a>).</p>

<p>The problem I have, is that the migration does not change the <code>last_login</code> field in the database table to accept null values. As a result, when I try and save I get a <code>IntegrityError</code> saying <code>(1048, ""Column 'last_login' cannot be null"")</code>.</p>

<p>How can I fix this? Do I need to manually change the field in the database, or is there a way to fix it with migrations?</p>

<p><strong>Edit</strong>
When I run <code>python manage.py migrate --fake-initial</code> the output is this:
Running migrations:</p>

<pre><code>  Rendering model states... DONE
  Applying contenttypes.0001_initial... FAKED
  Applying contenttypes.0002_remove_content_type_name... OK
  Applying auth.0001_initial... FAKED
  Applying auth.0002_alter_permission_name_max_length... OK
  Applying auth.0003_alter_user_email_max_length... OK
  Applying auth.0004_alter_user_username_opts... OK
  Applying auth.0005_alter_user_last_login_null... OK
  Applying auth.0006_require_contenttypes_0002... OK
  Applying core.0001_initial... FAKED
  Applying admin.0001_initial... FAKED
  Applying sessions.0001_initial... FAKED
</code></pre>

<p>However, when I look in the database I still see <code>user_last_login</code> as not-null.</p>",25,python|mysql|django|django-south|django-1.8
29802887,drop everything to the right of a hyphen in sql,<p>I am using Oracle SQL developer 2012. My data looks like <code>'valueA-valueB'</code>. I want to strip the content after <code>-</code> and populate with rest.</p>,-1,sql|oracle
29846530,Transforming migration ruby code to raw SQL,"<p>I have the migration that looks like this:</p>

<pre><code>class RemoveAdministrationResponseExportsInvalidRecords &lt; ActiveRecord::Migration
  def change
    AdministrationResponseExport.find_each do |are|
      are.destroy if SurveyResultSet.where(id: are.survey_result_set_id).empty?
    end
  end
end
</code></pre>

<p>How can I write this in raw SQL?</p>",0,sql|ruby-on-rails|ruby|ruby-on-rails-4
29868450,How do I use the value of a cell when I know the id of a row?,"<p>I have an <code>int</code> value <code>h</code>, and I want to search in the database (column <code>id</code>) for the <code>h</code> value. When I get the row, I want just a particular cell that represents the price, and I want to use it later in the code. So if a player has money and wants to buy the thing with the <code>h</code> id, the value of the thing is subtracted from the sum of money.</p>

<p>So how do I get the price and use it? I know what I did here isn't good.</p>

<pre><code>void TitluCasuta(int h)
{
  deschideconexiunea();
  string s = ""SELECT Titlu FROM TitluriProprietate WHERE id=h"";
  cmd = new SqlCeCommand(s, con);
  cmd.ExecuteNonQuery();
}
</code></pre>",0,c#|mysql|database|winforms
30081758,what is max database size limit while using AMR tool?,<p>what is the max size of database used for AMR tool that we used to identify table/procedure that we can move in In-Memory OLTP?</p>,0,sql-server-2014|in-memory-database
30105456,mysql query not working - it's not selecting the table information,"<p>I have a query that is working in all my other php files but it will not work here. Can someone please look at what I have and let me know why the query is not selecting the fields?</p>

<p>Please keep in mind that $res is my database connection that's open, and all the table fields are spelled correctly to the table. I have tried not having those single quotes that are sideways and as you can see in the code I have tried it with them. I have also tried not having ' ' and have tried it with them. I can remark out the lines and the code works, but put them back live and the code stops working with no error given.</p>

<p>I don't know if this helps, but my PHP version is 5.3.3-40.el6_6</p>

<pre><code> $result2 = mysqli_query($res, ""SELECT pre_sponsor_sponsor, slid FROM `pres` WHERE `pre_sponsor` = '$spospo' AND `slid` = '$slid' AND `pre_id` &lt;= '$pre_id' LIMIT 1"");
 $row2 = mysqli_fetch_array($result2)
 $spospo = $row2[pre_sponsor_sponsor];
 $slid = $row2[slid];
</code></pre>",0,mysqli
30184426,How do i add a summation column to my table on Rails 4,"<p>I have an already existing table ""registers"" with columns; <code>:full_name, :amount_paid, :user_id, :course_id</code>.
I also have the course table with columns: <code>:title, :price</code>.</p>

<p>I want to add a column to my registers table that calculate the balance from the <code>register.course.price</code> and the register.</p>

<p>so I tried <br /></p>

<p><code>rails g migration add_balance_to_registers balance:""register.course.price - register.amount_paid""</code><br/></p>

<p>but when I try <br /></p>

<pre><code>rake db:migrate
</code></pre>

<p>I get an error</p>",1,mysql|ruby-on-rails
30089671,"Using Django F expressions or ""extra"" SQL to increment value of field based on other related objects","<p>So, I'm wondering if there is a way to avoid doing the work in Python and use the DB to do the work with the following models:</p>

<pre><code>class Draft(models.Model):
    # identity fields
    current_version = models.OneToOneField('app.models.DraftVersion')

class DraftVersion(models.Model):
    # fields which change from version to version
    objects = DraftVersionManager()
    draft = models.ForeignKey(Draft)
    version = models.PositiveSmallIntegerField(default=1)

    class Meta:
        unique_together = ('draft', 'version')


class DraftVersionManager(models.Manager):
    def get_next_version_number(self, draft):
        try:
            return self.filter(draft=draft).order_by('-version')[0].version + 1
        except IndexError:
            return 1
</code></pre>

<p>So.. Is it possible to do the logic in get_next_version_number inside the db instead of in Python? As shown here for a much simpler example?<a href=""https://docs.djangoproject.com/en/1.7/ref/models/queries/#f-expressions"" rel=""nofollow"">https://docs.djangoproject.com/en/1.7/ref/models/queries/#f-expressions</a> </p>",1,python|django|postgresql
30191565,get list of changesets for a specific Team Project from tfs and store them in oracle database,"<p>I need to know if there is some web service for TFS which we can consume from inside oracle pl/sql and fetch the list of changesets and store them in database.</p>

<p><a href=""https://social.msdn.microsoft.com/Forums/vstudio/en-US/7ad1d963-a172-47e5-a1eb-bd77c1c58731/programmatically-get-list-of-changesets-for-a-specific-team-project?forum=tfsversioncontrol"" rel=""nofollow"">https://social.msdn.microsoft.com/Forums/vstudio/en-US/7ad1d963-a172-47e5-a1eb-bd77c1c58731/programmatically-get-list-of-changesets-for-a-specific-team-project?forum=tfsversioncontrol</a> </p>

<p>Above mentioned URL can give you idea of what I am looking for but point is I will be doing everything in pl/sql only to get this job done.</p>

<p>TFS URL is like tfs.xxx.com</p>",0,oracle|web-services|plsql|tfs|changeset
29753499,Working around 1 MB max_allowed_packet when reading MEDIUMBLOB in PDO MySQL,"<p>I'm using PDO to retrieve a 5 MB value in a <code>MEDIUMBLOB</code> column of a table in a MySQL database. A <code>MEDIUMBLOB</code> can store up to 16 MB, but PDO cuts it off at 1 MB because of <code>max_allowed_packet</code>. I tried <code>bindColumn</code> as mentioned in <a href=""http://php.net/manual/en/pdo.lobs.php"" rel=""nofollow noreferrer"">Large Objects</a>, but PDO's MySQL driver produces a string, not a stream (<a href=""https://bugs.php.net/bug.php?id=40913"" rel=""nofollow noreferrer"">bug 40913</a>, reported as ""still present in PHP-5.6.5""). In effect, it treats <code>PDO::PARAM_LOB</code> as a synonym for <code>PDO::PARAM_STR</code>. Answers to <a href=""https://stackoverflow.com/questions/1579990/blob-download-truncated-at-1-mb-script-works-for-files-less-than-1-mb"">BLOB Download Truncated at 1 MB...</a> recommend increasing <code>max_allowed_packet</code> variable in <code>my.cnf</code> on the server, but I lack permission to make changes to <code>my.cnf</code>, which could affect other users of the server. I know it's possible to work around this because phpMyAdmin can download such a large <code>BLOB</code> from the same server.</p>

<p>The table is defined thus:</p>

<pre><code>CREATE TABLE IF NOT EXISTS cache_items (
  `cache_id` INTEGER UNSIGNED PRIMARY KEY AUTO_INCREMENT,
  `name` VARBINARY(63),
  `value` MEDIUMBLOB NOT NULL,
  `created` TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  `expires` DATETIME NOT NULL,
  UNIQUE (`name`),
  INDEX (`expires`)
) ENGINE=INNODB;
</code></pre>

<p>The PHP code:</p>

<pre><code>&lt;?php
require_once(""dbsettings.php"");
$db = new PDO($pdo_dsn, $pdo_username, $pdo_password, $pdo_options);
$name = 'hello';
$read_stmt = $db-&gt;prepare(""
SELECT `value` FROM `cache_items`
WHERE `name` = :n AND `expires` &gt; CURRENT_TIMESTAMP
ORDER BY `cache_id` DESC LIMIT 1
"");
$read_stmt-&gt;execute([':n' =&gt; $name]);
$read_stmt-&gt;bindColumn(1, $value_fp, PDO::PARAM_LOB);
$ok = $read_stmt-&gt;fetch(PDO::FETCH_BOUND);
echo gettype($bodyfp);  // string, not resource, because of bug 40913
echo strlen($bodyfp);   // 1048576, not 5xxxxxx, because of max_allowed_packet
</code></pre>

<p>So how should a program retrieve a large <code>BLOB</code>? Or would it be more practical to store each <code>value</code> in a file in a directory and then have a periodic task that removes any file from the directory that does not correspond to an unexpired entry in <code>cache_items</code>?</p>",0,php|mysql|pdo
29763926,Transact SQL Server Error 105,"<p>Hey guys  I am creating a store procedure but I am getting this error: 
<code>105 Unclosed quotation mark after the character string 'Guadalajara,Jal'.</code>, and i have looked through several websites, sadly I haven found an answer.
Here is my code:</p>

<pre><code>    Alter Procedure Insertar
(
    @Vuelos nvarchar(6),
    @Aero nvarchar(20),
    @Sal nvarchar(40),
    @Ori varchar(50),
    @Des varchar(50),
    @Lle nvarchar(40),
    @Per nvarchar(1),
    @Nom nvarchar(25),
    @Nodo nvarchar(13)
)
AS
    BEGIN
        Set XACT_ABORT ON
        Begin DISTRIBUTED TRANSACTION
            BEGIN TRY
                Insert into Reservaciones values
                (
                  @Vuelos,@Aero,@Sal,@Ori,@Des,@Lle,@Per,@Nom,GETDATE()
                )

                DECLARE @cmd as sysname;
                SET @cmd ='Insert into ['+@Nodo+'].'+'['+@Aero+'].[dbo].[Reservaciones] values'+
                '('''+@Vuelos+''','''+@Aero+''','''+@Sal+''','''+@Ori+''','''+@Des+''','''+@Lle+''','+@Per+','''+@Nom+''',GETDATE())'
                EXEC(@cmd)

                SET @cmd='Update ['+@Nodo+'].['+@Aero+'].[dbo].[Vuelos] Set Dis-='+@Per+' where Vuelo='+@Vuelos;
                EXEC(@cmd)
            END TRY
            BEGIN CATCH
                PRINT ERROR_NUMBER()
                PRINT ERROR_MESSAGE()
                ROLLBACK
            END CATCH
            IF @@TRANCOUNT &gt; 0
                commit
    END
</code></pre>

<p>and this is what I input into the stored procedure</p>

<pre><code>EXEC Insertar 'AM 500','Mexicana','2015-05-13 19:00:00.0','Guadalajara,Jalisco,Mexico','San Diego,California,Estados Unidos','2015-05-13 21:21:00.0',3,'gus','Gustavo\Nodo1';
</code></pre>

<p>To be more specific the issue is that sql is cutting half of whats in variable <code>@Ori</code> however I have debug and in that variable and it is complete, I have checked and yes that variable does have enough space for the text.</p>

<p>I appreciate any kind of help you guys can provide me.</p>",0,sql-server|transactions|distributed-transactions
30129585,"PLS-00103: Encountered the symbol ""THEN"" when expecting one of the following","<p>i am trying to run this code but it gives me an error in ""THEN"", i have checked all the code line by line and it appears that the error is in the if statement but i double checked it.</p>

<p>i am trying to compare the time of the accident so i can be able to send the ambulance to the the accident which happened first. i would appreciate your help</p>

<pre><code>`create or replace function get_loc return location is
max NUMBER;
CURSOR accident_records IS
SELECT * FROM NEW_ACCIDENT;
accidentRec NEW_ACCIDENT_TYPE := NEW_ACCIDENT_TYPE (NULL,NULL,NULL,NULL);
ac_loc LOCATION := LOCATION (NULL,NULL);
type New_accident_rec_type is record
(
id number,
loc location,
TIME NUMBER,
SITUATION varchar2(60)
);
new_accident_rec New_accident_rec_type;
BEGIN
max:=0;
OPEN accident_records;
LOOP FETCH accident_records INTO new_accident_rec;
EXIT WHEN accident_records%NOTFOUND;
IF new_accident_rec.situation='not handled' then
IF new_accident_rec.time&gt;max THEN
max:=new_accident_rec.time;
accidentRec.time:=new_accident_rec.time;
ac_loc:=new_accident_rec.loc;
END IF;
IF new_accident_rec.time&lt;max THEN
ac_loc:=NULL;
END IF;
END IF;
END LOOP;
CLOSE accident_records;
dbms_output.put_line ('The time of Accident is: '||accidentRec.time || 'The location of the accident is: ' ||ac_loc);
RETURN ac_loc;
END;`
</code></pre>",-1,oracle|plsql|pls-00103
30142109,Bookshelf.js - How to get a column from join table?,"<p>I have a User model and a Course model, and they have a many-to-many relationship, so basically users can join multiple courses and courses have many users (students). I have a join table and I'm trying to add additional information to the join table. Basically, users have a monthly quota of questions they can ask per course. So i've added a quota column to the User_Course join table. I'm having trouble accessing the quota column. Below is the relevant code to give an idea.</p>

<pre><code>var User = DB.Model.extend({
    Courses: function() {
        return this.belongsToMany('Course', 'User_Course', 'userId', 'courseId');
    },
});

var Course = DB.Model.extend({
    Users: function() {
        return this.belongsToMany('User', 'User_Course', 'courseId', 'userId');
    }
})
</code></pre>

<p>And User_Course is my join table that has the additional quota column:</p>

<pre><code>**User_Course:**
userId: int
courseId: int
quota: int
</code></pre>

<p>I want to be able to decrement my quota value. I'm able to update it using updatePivot, but I'm unable to simply get the value thats in quota. Here is the code I'm using to update the value:</p>

<pre><code>var userPromise = new User.User({userId: userId}).fetch({withRelated: ['Courses']});
userPromise.then(function(_user) {
    _user.related('enrolledCourses').updatePivot({courseId:courseId, quota:1}).then(function() {
        return;
    })

})
</code></pre>

<p>As you can see, I'm updating the quota value to 1 every time here. I'd like to programmatically determine what the current quota value is, and then decrement it.</p>",3,mysql|node.js|bookshelf.js
30034103,mysql REGEXP to match a string ending in 2 digits that are preceded only by non-digits,"<p>I have struggled quite a bit with this.</p>

<p>In MySQL I would like to query a column for strings that end with a double-digit number. I don't care what else comes before, as long as the last characters are <strong>two digits preceded by at least one non-digit</strong></p>

<p>For instance, these strings should match:</p>

<pre><code>""Nov. 12th, 60""

""34 Bar 56""

""Foo-BAR-01""

""33-44-55""

""-------88""

""99""
</code></pre>

<p>When I do this:</p>

<pre><code>SELECT &lt;string&gt; REGEXP &lt;pattern&gt;
</code></pre>

<p>Now, the <code>&lt;pattern&gt;</code> bit is what I need help on.</p>

<p>Thanks.</p>",1,mysql|sql|regex|select
29769276,How to get the Selected rows based on Multiple Column Values,"<pre><code>Name           Value

Base            0  
Type            0  
Serialized      1  
C4              0  
c5              0
</code></pre>

<p>I am getting the Above values by having following query.</p>

<pre><code>Select T2.Name,Convert(Bit,T2.Value) from  [Table1] T1
join [Table2] T2 with(nolock) on T1.Id = T2. Id
where T1.SID= 'DDXRS' 
</code></pre>

<p>But I need the rows whose Name is either Base,Type or Seralized? I tried creating temp Table but could not get to the result.</p>",0,sql|sql-server-2008|join
29988633,database nomenclature for abstracting an instance of a class of data,"<pre><code>TABLE                   FIELDS
users                   user_id

items                   item_id

item_instance           item_inst_id
                        item_inst_qty
                        user_id
                        item_id
</code></pre>

<p>The first table has all the users, and the second table has all the items.</p>

<p>The third table records the quantity of a specific item which a user has. It is not recording data about the item itself, but rather the data about the relationship between the item and user.</p>

<p>My question is what is the third type of table generally referred to as? The most accurate abstraction I could think of is ""instance,"" as taken from OOP, because each data record represents an occurrance of a particular class of data, which in this case is the ""item"" class. Also, ""case"" was another possiblity.</p>

<p>In database programing, is there a generally accepted term for a table which has records that tie two tables together in this manner? Or is the naming convention usually up to the programmer? If the latter, what is your take?</p>",1,mysql|naming-conventions
30006896,get the count and the price of category column then group by category,"<p>I have a table </p>

<p>equipment : (id,quantity,cost_per_unit,category)</p>

<p>suppose the table containing</p>

<pre><code>   id | quantity   |cost_per_unit| category
   ---+------------+-------------+----------
   1  |   10       |     10      | dumples
   2  |   7        |     15      | dumples
   3  |   5        |     5       | fitness
</code></pre>

<p>I'm trying to get the category of equipment and the count of this category and the price of all pieces of this category
the output would be like :</p>

<pre><code> category | count | price
 ---------+-------+------------------------
 dumples  | 17    | 205 // ( 10*10 + 7*15 )
 fitness  | 5     | 25
</code></pre>

<p>any help would be greatly appreciated</p>",1,mysql
