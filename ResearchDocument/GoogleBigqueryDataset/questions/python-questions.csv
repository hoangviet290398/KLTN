_id,title,content,total_like,tags
29761266,Should Image.fromarray(pixels) and np.array(img) leave the data unchanged?,"<p>I am trying to generate PNGs using the Image.fromarray() function from PIL but not getting the expected images.</p>

<pre><code>arr=np.random.randint(0,256,5*5)
arr.resize((5,5))
print arr
</code></pre>

<p>gives</p>

<pre><code>[[255 217 249 221  88]
 [ 28 207  85 219  85]
 [ 90 145 155 152  98]
 [196 121 228 101  92]
 [ 50 159  66 130   8]]
</code></pre>

<p>then</p>

<pre><code>img=Image.fromarray(arr,'L')
new_arr=np.array(img)
</code></pre>

<p>I would expect new_arr to be the same as arr but</p>

<pre><code>print new_arr
[[122   0   0   0   0]
 [  0   0   0  61   0]
 [  0   0   0   0   0]
 [  0 168   0   0   0]
 [  0   0   0   0 221]]
</code></pre>",1,python|numpy|python-imaging-library
29985319,How to create a shared counter in Celery?,"<p>Is there a way to have a shared counter (shared between workers) in Celery? I am also open to other ideas on how to solve my problem, but would like to stick to Celery. Here is my problem:</p>

<p>I have a task that is dependent on an index passed to it. These tasks could pass or fail, but I need to target a number of passed tasks. If a job fails it should kick off a new job with the next available index.</p>

<p>I can of course do this through a function that tracks the active jobs and initiates the new jobs, but if there was something built in that'd be great.</p>",1,python|celery|celery-task
30047328,How to override Pyqt combobox ItemText method so it returns default python string instead of QString?,"<p>When ever I do</p>

<pre><code>resos = [_ui.ComboBox.itemText(i) for i in range(_ui.ComboBox.count())]
</code></pre>

<p>it is giving me list of </p>

<pre><code>[PyQt4.QtCore.QString(u'1280x720 from 1.316'),
PyQt4.QtCore.QString(u'1920x1080 from 1.316'),]  
</code></pre>

<p>how would it be possible to override ComboBox's itemText method so that it only returns python string ? instead of doing string conversion in the list comprehension above !</p>",1,python|list|combobox|pyqt|pyqt4
30175518,IPython qtconsole custom banner,"<p>I'm trying to set a custom banner for the IPython qtconsole (v3.0.0). In my profile configuration, I set <code>c.IPythonWidget.banner = u'Custom Banner'</code>, and then launch <code>ipython qtconsole --profile=myprof</code>. What I get is my custom banner pre-pended to the regular banner:</p>

<pre><code>Custom BannerPython 2.7.5 (default, Mar  9 2014, 22:15:05) 
Type ""copyright"", ""credits"" or ""license"" for more information.

IPython 3.0.0 -- An enhanced Interactive Python.
?         -&gt; Introduction and overview of IPython's features.
%quickref -&gt; Quick reference.
help      -&gt; Python's own help system.
object?   -&gt; Details about 'object', use 'object??' for extra details.
%guiref   -&gt; A brief reference about the graphical user interface.

IPython profile: myprof

In [1]: 
</code></pre>

<p>How can I get ONLY my banner to print, e.g.</p>

<pre><code>Custom Banner

IPython profile: myprof

In [1]: 
</code></pre>

<p>Thanks.</p>",2,python|ipython|jupyter
30017991,check if an object supports the buffer protocol python,"<p>I am looking for the Python equivalent of the Python C-API PyObject_CheckBuffer.</p>

<p>I.e. I would like to check if an object supports the buffer protocol, but from Python.</p>",12,python
30116107,Django-axes not working with custom login view,"<p>I have followed the below links before asking this question as it seems like a duplicate, but of no use. So I'm asking again.</p>

<p><a href=""https://stackoverflow.com/questions/25760023/django-login-with-django-axes"">Django login with django-axes</a></p>

<p><a href=""https://stackoverflow.com/questions/10889799/django-axes-not-capturing-failed-login-attempt-but-captures-admin-failed-attemp"">django-axes not capturing failed login attempt, but captures admin failed attempts fine</a></p>

<p>The django-axes works fine with the admin site, but it is unable to capture the failed attempts from the user custom login view. My custom view at <strong>'/project/app/views.py'</strong> is as follows:</p>

<pre><code>from axes.decorators import watch_login
@watch_login
def user_login(request):
     if request.method == 'POST':
         username = request.POST.get('username')
         password = request.POST.get('password')
         ......
</code></pre>

<p>and in <strong>settings.py</strong>, the middleware class I'm using is </p>

<blockquote>
  <p>'axes.middleware.FailedLoginMiddleware'</p>
</blockquote>

<p>and the other django-axes configuration is as follows:</p>

<blockquote>
  <p>AXES_LOGIN_FAILURE_LIMIT = 3
  AXES_COOLOFF_TIME = 30
  AXES_LOCKOUT_TEMPLATE = '/templates/app/login.html'</p>
</blockquote>

<p>and my <strong>urls.py</strong> is as follows:</p>

<pre><code>from axes.decorators import watch_login

urlpatterns = patterns('',
url(r'^login/$', watch_login(user_login), {'template_name': 'app/login.html'}),
</code></pre>

<p>when I try to access the admin page or the user page, I'm getting the following error:</p>

<blockquote>
  <p>NameError at /admin/</p>
  
  <p>name 'user_login' is not defined</p>
</blockquote>

<p>I even tried changing the middleware class from <strong>'axes.middleware.FailedLoginMiddleware'</strong> to <strong>'axes.middleware.FailedAdminLoginMiddleware'</strong> as suggested in this <a href=""https://stackoverflow.com/questions/10889799/django-axes-not-capturing-failed-login-attempt-but-captures-admin-failed-attemp"">link</a>, but now nothing seems to work as it showing the error</p>

<blockquote>
  <p>A server error occurred.  Please contact the administrator.</p>
</blockquote>

<p>I think I made the question clear.</p>

<p>Any help is appreciated.
Thanks</p>",0,python|django|django-urls|django-authentication
30076583,How to use swig with compiled dll and header file only,"<p>I have read some docs from <a href=""http://www.swig.org/Doc1.3/SWIGPlus.html"" rel=""nofollow"">SWIG documentation</a> (related to c++ code), but can't figure out if it is possible to genereate Python extension module in case I have <em>compiled dll</em> (no source code provided) and <em>header file</em> with all functions declared in dll.
<br>If someone has the same problem and solve it, could you provide some useful example?
<br>Thanks in advance.</p>",4,python|c++|dll|wrapper|swig
29794052,"How could one disable new account creation with django-allauth, but still allow existing users to sign in?","<p>We've been running a site for a while which uses <a href=""https://github.com/pennersr/django-allauth"" rel=""noreferrer""><code>django-allauth</code></a> for authentication using any of:</p>

<ul>
<li>Traditional email-based sign-up</li>
<li>Google login</li>
<li>Twitter login</li>
<li>Facebook login</li>
</ul>

<p>... but now we want to stop anyone creating a new account, while still allowing people who've previously created an account using any of those methods to be able to log in. Is there a setting that will let us do this? It's not clear to me that any of <a href=""http://django-allauth.readthedocs.org/en/latest/configuration.html"" rel=""noreferrer"">these documented settings</a> would allow us to configure that.</p>

<p>The current settings relating to django-allauth are:</p>

<pre><code>INSTALLED_APPS = (
    'django.contrib.auth',
    ...
    'allauth',
    'allauth.account',
    'allauth.socialaccount',
    'allauth.socialaccount.providers.google',
    'allauth.socialaccount.providers.facebook',
    'allauth.socialaccount.providers.twitter',
    ...
)

AUTHENTICATION_BACKENDS = (
    # Needed to login by username in Django admin, regardless of `allauth`
    ""django.contrib.auth.backends.ModelBackend"",
    # `allauth` specific authentication methods, such as login by e-mail
    ""allauth.account.auth_backends.AuthenticationBackend"",
)

SOCIALACCOUNT_PROVIDERS = {
    'google': {'SCOPE': ['https://www.googleapis.com/auth/userinfo.profile'],
               'AUTH_PARAMS': {'access_type': 'online'}},
    'facebook': {'SCOPE': ['email',]},
}

LOGIN_REDIRECT_URL = '/'

ACCOUNT_EMAIL_VERIFICATION = ""mandatory""
ACCOUNT_EMAIL_REQUIRED = True
ACCOUNT_USERNAME_REQUIRED = True
SOCIALACCOUNT_AUTO_SIGNUP = True
</code></pre>",10,python|django|authentication|django-allauth
29930110,"Calculating the averages for each KEY in a Pairwise (K,V) RDD in Spark with Python","<p>I want to share this particular Apache Spark with Python solution because documentation for it is quite poor.</p>

<p>I wanted to calculate the average value of K/V pairs (stored in a Pairwise RDD), by KEY. Here is what the sample data looks like:</p>

<pre><code>&gt;&gt;&gt; rdd1.take(10) # Show a small sample.
[(u'2013-10-09', 7.60117302052786),
(u'2013-10-10', 9.322709163346612),
(u'2013-10-10', 28.264462809917358),
(u'2013-10-07', 9.664429530201343),
(u'2013-10-07', 12.461538461538463),
(u'2013-10-09', 20.76923076923077),
(u'2013-10-08', 11.842105263157894),
(u'2013-10-13', 32.32514177693762),
(u'2013-10-13', 26.249999999999996),
(u'2013-10-13', 10.693069306930692)]
</code></pre>

<p>Now the following code sequence is a <strong>less than optimal</strong> way to do it, but it does work. It is what I was doing before I figured out a better solution. It's not terrible but -- as you'll see in the answer section -- there is a more concise, efficient way.</p>

<pre><code>&gt;&gt;&gt; import operator
&gt;&gt;&gt; countsByKey = sc.broadcast(rdd1.countByKey()) # SAMPLE OUTPUT of countsByKey.value: {u'2013-09-09': 215, u'2013-09-08': 69, ... snip ...}
&gt;&gt;&gt; rdd1 = rdd1.reduceByKey(operator.add) # Calculate the numerators (i.e. the SUMs).
&gt;&gt;&gt; rdd1 = rdd1.map(lambda x: (x[0], x[1]/countsByKey.value[x[0]])) # Divide each SUM by it's denominator (i.e. COUNT)
&gt;&gt;&gt; print(rdd1.collect())
  [(u'2013-10-09', 11.235365503035176),
   (u'2013-10-07', 23.39500642456595),
   ... snip ...
  ]
</code></pre>",29,python|apache-spark|aggregate|average|rdd
29768601,Ipython notebook on remote server doesnot display folders in current directories in the browser,"<p>I have installed Ipython based on <a href=""http://calebmadrigal.com/ipython-notebook-vps/"" rel=""nofollow noreferrer"">tutorial</a> in my Digital Ocean server.</p>

<p>However, when I try to access via browser, it displays the current directory files as specified in the ipython_notebook_config.py file. It does not show any folders in that directory.</p>

<p>Is there any way, I could view the sub-folders as it helps to create projects neat and in different folders within the structure.</p>

<p>I know a similar <a href=""https://stackoverflow.com/questions/11021853/multiple-directories-and-or-subdirectories-in-ipython-notebook-session"">question</a> was raised earlier. I guess it had already implemented in the current version.</p>

<p>I'm running Ubuntu 14.04, python 2.7, ipython 1.2.1</p>",1,python|ipython|ipython-notebook
29924114,Can't use GeoMipMap in Panda3D,"<p>I'm on to a very new 3D video Game project using Panda3D, and i try to understand the basics of terrain loading, that's why i tried the Panda3D tutorial ( <a href=""https://www.panda3d.org/manual/index.php/Geometrical_MipMapping"" rel=""nofollow"">https://www.panda3d.org/manual/index.php/Geometrical_MipMapping</a>), telling to type this in Python : </p>

<pre><code>terrain = GeoMipTerrain(""mySimpleTerrain"")
terrain.setHeightfield(""yourHeightField.png"")
#terrain.setBruteforce(True)
terrain.getRoot().reparentTo(render)
terrain.generate()
</code></pre>

<p>which i did, though i have a : </p>

<pre><code>Name Error : Name "" GeoMipTerrain "" is not defined 
</code></pre>

<p>It is said in the Panda3D manual that GeoMipMap is included in Panda3D since 1.5.1 so i should be juste fine, they just don't say if we must import a specific module or what. That's why i tried to look what module or thing was necessary to load before requesting such a command, but i found no result, that's why i require your help. </p>",0,python|video|panda3d
29852919,Different PyCharm and IDLE Python versions,"<p>I have installed Python 2.7.9 64 and 32 bit versions. I have also installed PyCharm for better easing with the learning (I just recently started learning Python).
The problem is that Pycharm and IDLE show different Python versions when usng <em>sys.version</em>, even though they use the same path for the .exe.
How can I solve this? Thank you!</p>",1,python|pycharm|versions
29972074,"Try to init a Repo using the G cloud, for an existing project","<p>There is an existing project I am a developer on with ID: placingliterature</p>

<p>I am attempting to run the command gcloud init placingliterature</p>

<p>I ran g auth and logged in properly.</p>

<p>I tried with or without the gitRepo already existing</p>

<p>I get this error:</p>

<p>C:\Program Files\Google\Cloud SDK>gcloud init placingliterature
Initialized gcloud directory in [C:\Program Files\Google\Cloud SDK\placingliterature.gcloud].
Cloning [<a href=""https://source.developers.google.com/p/placingliterature/r/default]"" rel=""nofollow"">https://source.developers.google.com/p/placingliterature/r/default]</a> into [default].
Cloning into 'C:\Program Files\Google\Cloud SDK\placingliterature\default'...
Failed to erase credential: Element not found
fatal: Authentication failed for '<a href=""https://source.developers.google.com/p/placingliterature/r/default/"" rel=""nofollow"">https://source.developers.google.com/p/placingliterature/r/default/</a>'
ERROR: Command '['git', 'clone', '<a href=""https://source.developers.google.com/p/placingliterature/r/default"" rel=""nofollow"">https://source.developers.google.com/p/placingliterature/r/default</a>', 'C:\Program File
s\Google\Cloud SDK\placingliterature\default', '--config', 'credential.helper=gcloud.cmd']' returned non-zero exit s
tatus 128
ERROR: Unable to initialize project [placingliterature], cleaning up [C:\Program Files\Google\Cloud SDK\placingliteratur
e].
ERROR: (gcloud.init) Unable to initialize project [placingliterature].</p>

<p>Anyone know why this is happening?</p>",0,git|command-line|gcloud|google-cloud-python|gcloud-python
30094179,wxPython - checking for empty text dialogs,"<p>I have some python code, using wxpython, that will do the following:</p>

<ol>
<li>ask the user for a number using a wxpython dialog box</li>
<li>check if that number is currently in use, if it is the box appears asking for a number again</li>
<li>Once an unused number has been entered, a new dialog will appear asking for a name. If in use, it will ask again</li>
<li>Both the new number and name are stored for later use</li>
</ol>

<p>The code looks something like this:</p>

<pre><code>while True:
            codeNumberPrompt = wx.TextEntryDialog(self, ""New code #: "", ""Add New Code"", str(len(self.codes)), style=wx.OK)
            codeNumberPrompt.ShowModal()
            self.codeNumber = codeNumberPrompt.GetValue()

            #check if number is in use
            if int(self.codeNumber) not in self.numbersInUse:
                #new code name input
                while True:
                    codeNamePrompt = wx.TextEntryDialog(self, ""New code name: "", ""Add New Code"", style=wx.OK)
                    codeNamePrompt.ShowModal()
                    self.codeName = codeNamePrompt.GetValue()

                    #check if name is in use
                    if self.codeName.lower() not in self.namesInUse:
                        break

                    wx.MessageBox('Code name is currently in use', 'Warning', wx.OK | wx.ICON_INFORMATION)
                break
            else:
                wx.MessageBox('Code number is currently in use', 'Warning', wx.OK | wx.ICON_INFORMATION)
</code></pre>

<p>My first question, is there a better/cleaner way to do this?</p>

<p>My second question (where I get stuck): I need to be able to handle some exception cases. For example:</p>

<ul>
<li>if the user X's out of the first dialog, I dont want the second dialog box to show up and I want to proceed as if nothing happened (i.e. doesnt try to store the number or name values)</li>
<li>if the user leaves the number or name dialog entry blank, I want to ask them for that info again</li>
</ul>

<p>I cant seem to find out how wxpython handles the X button in dialog boxes. Currently, if the user leaves a default value in the first (number) box, and then X's, the second box (name) will still show up</p>",0,python|textbox|dialog|wxpython
29772684,Python Writing 'N' bytes data to Binary file,"<p>I have following data in Excel sheet, 
1st column is number of bytes, 2nd column is its data (dat is in decimal,hex,ip address format) </p>

<p>Question is how to write these into binary file, like 
 in 1 bytes data,write 0x01,then 2 bytes data, write 0xAABB,then 
 in 4 bytes data,write 10080000(dec)..etc even ip address in 4 bytes,write 
10.65.84.8</p>

<p><strong>Questions:</strong>
<strong>1)is it required to convert all data to one format (ie decimal or hex) ?
2) are there inbuilt functions which gives write(num_of_bytes, value) ?</strong></p>

<p>File.xls</p>

<h2>Number of bytes   Data</h2>

<pre><code>1             0x01 (hex)
2             0xAABB
4             10080000
2             100
4             18181818 (decimal)
4             10.65.84.8(ip address)
</code></pre>

<p>i am new to python and have done following to read data from Excel(cvs) sheet</p>

<pre><code>def open_file():
    book = xlrd.open_workbook('file.csv') 
    # get the first worksheet
    first_sheet = book.sheet_by_index(0)

    # read a cell
    cell = first_sheet.cell(0,0)
    num_rows = first_sheet.nrows 
    num_cols = first_sheet.ncols 

    for m in range(0, num_rows):
        for n in range(0, num_cols):
            cell = first_sheet.cell(m,n)
            print 'cell value %d',cell.value
</code></pre>",1,python|excel|struct|binary
29885695,Writing out comma separated values in a single cell in spreadsheet,"<p>I am cataloging attribute fields for each feature class in the input list, below, and then I am writing the output to a spreadsheet for the occurance of the attribute in one or more of the feature classes. </p>

<pre><code>import arcpy,collections,re  
arcpy.env.overwriteOutput = True  
input = [list of feature classes]  
outfile= # path to csv file   
f=open(outfile,'w')   
f.write('ATTRIBUTE,FEATURE CLASS\n\n')  
mydict = collections.defaultdict(list)  
for fc in input:  
    cmp=[]  
    lstflds=arcpy.ListFields(fc)  
    for fld in lstflds:  
        cmp.append(fld.name)  
    for item in cmp:  
        mydict[item].append(fc)  
for keys, vals in mydict.items():  
    #remove these characters  
    char_removal = [""["",""'"","","",""]""]  
    new_char = '[' + re.escape(''.join(char_removal)) + ']'  
    v=re.sub(new_char,'', str(vals))  
    line=','.join([keys,v])+'\n'  
    print line  
    f.write(line)  
f.close()  
</code></pre>

<p>This code gets me 90% of the way to the intended solution. I still cannot get the feature classes(values) to separate by a comma within the same cell(being comma delimited it shifts each value over to the next column as I mentioned). In this particular code the ""v"" on line 20(feature class names) are output to the spreadsheet, separated by a space("" "") in the same cell. Not a huge deal because the replace "" "" with "","" can be done very quickly in the spreadsheet itself but it would be nice to work this into the code to improve reusability.</p>",0,python|csv
29911202,Priority Queue using a Max-Heap Data Structure,"<p>I am implementing a priority queue using a max-heap data structure in Python. I'm using several names that have numbers associated with them as their priority (9 being the highest and 1 being the lowest). The issue I am facing is that when I dequeue an item from the priority queue, it does not dequeue the item with highest priority. I assume this means there is a problem with my enqueue and it is not inserting the items into the correct position in the heap based on their priority. If anyone could help me fix this, it would be greatly appreciated.</p>

<p>My priority queue code:</p>

<pre><code>from Heap import Heap

class priorityQ(object):
    def __init__(self):
        self.PQ = Heap()

    def enqueue(self, priority, item):
        self.PQ.insert((priority, item))

    def dequeue(self):
        if self.PQ.size() == 0:
            raise ValueError(""Empty Queue"")
        return self.PQ.delete_max()

    def first(self):
        return self.PQ.get_max()

    def size(self):
        return self.PQ.size()

def main():
    myHeap = priorityQ()
    print(myHeap.size())
    myHeap.enqueue(8, ""Kaneda"")
    myHeap.enqueue(6, ""Masaru"")
    myHeap.enqueue(9, ""Akira"")
    myHeap.enqueue(4, "" Kei"")
    myHeap.enqueue(5, ""Takashi"")
    myHeap.enqueue(2, ""Shikishima"")
    myHeap.enqueue(3, ""Kiyoko"")
    myHeap.enqueue(1, ""Yamagata"")
    myHeap.enqueue(7, ""Tetsuo"")
    print(myHeap.first())
    print(myHeap.size())
    myHeap.dequeue()
    print(myHeap.first())
    print(myHeap.size())
    myHeap.dequeue()
    print(myHeap.first())
    print(myHeap.size())
    myHeap.dequeue()
    print(myHeap.first())
    print(myHeap.size())
    myHeap.dequeue()
    print(myHeap.first())
    print(myHeap.size())
    myHeap.dequeue()
    print(myHeap.first())
    print(myHeap.size())
    myHeap.dequeue()
    print(myHeap.first())
    print(myHeap.size())
    myHeap.dequeue()
    print(myHeap.first())
    print(myHeap.size())
    myHeap.dequeue()
    print(myHeap.first())
    print(myHeap.size())
    myHeap.dequeue()
    print(myHeap.first())
    print(myHeap.size())
</code></pre>

<p>Output after I run the code and call main:</p>

<pre><code>0
(9, 'Akira')
9
(7, 'Tetsuo')
8
(5, 'Takashi')
7
(4, 'Kei')
6
(3, 'Kiyoko')
5
(2, 'Shikishima')
4
(1, 'Yamagata')
3
(1, 'Yamagata')
2
(1, 'Yamagata')
1
None
0
</code></pre>

<p>Max-heap code (provided by textbook):</p>

<pre><code># Heap.py
class Heap(object):

    #------------------------------------------------------------

    def __init__(self, items=None):

        '''post: a heap is created with specified items'''

        self.heap = [None]
        if items is None:
            self.heap_size = 0
        else:
            self.heap += items
            self.heap_size = len(items)
            self._build_heap()

    #------------------------------------------------------------

    def size(self):

        '''post: returns number of items in the heap'''

        return self.heap_size

    #------------------------------------------------------------

    def _heapify(self, position):

        '''pre: items from 0 to position - 1 satisfy the heap property
        post: heap property is satisfied for the entire heap'''

        item = self.heap[position]
        while position * 2 &lt;= self.heap_size:
            child = position * 2
            # if right child, determine maximum of two children
            if (child != self.heap_size and 
                self.heap[child+1] &gt; self.heap[child]):
                child += 1
            if self.heap[child] &gt; item:
                self.heap[position] = self.heap[child]
                position = child
            else:
                break
        self.heap[position] = item

    #------------------------------------------------------------

    def delete_max(self):

        '''pre: heap property is satisfied
        post: maximum element in heap is removed and returned'''

        if self.heap_size &gt; 0:
            max_item = self.heap[1]
            self.heap[1] = self.heap[self.heap_size]
            self.heap_size -= 1
            self.heap.pop()
            if self.heap_size &gt; 0:
                self._heapify(1)
            return max_item

    def get_max(self):
        if self.heap_size &gt; 0:
            max_item = self.heap[1]
            self.heap[1] = self.heap[self.heap_size]
            if self.heap_size &gt; 0:
                self._heapify(1)
            return max_item

    #------------------------------------------------------------

    def insert(self, item):

        '''pre: heap property is satisfied
        post: item is inserted in proper location in heap'''

        self.heap_size += 1
        # extend the length of the list
        self.heap.append(None)
        position = self.heap_size
        parent = position // 2
        while parent &gt; 0 and self.heap[parent] &lt; item:
            # move item down
            self.heap[position] = self.heap[parent]
            position = parent
            parent = position // 2
        # put new item in correct spot
        self.heap[position] = item

    #------------------------------------------------------------

    def _build_heap(self):

        '''pre: self.heap has values in 1 to self.heap_size 
        post: heap property is satisfied for entire heap'''

        # 1 through self.heap_size
        for i in range(self.heap_size // 2, 0, -1): # stops at 1
            self._heapify(i)

    #------------------------------------------------------------

    def heapsort(self):

        '''pre: heap property is satisfied
        post: items are sorted in self.heap[1:self.sorted_size]'''

        sorted_size = self.heap_size
        for i in range(0, sorted_size - 1):
            # Since delete_max calls pop to remove an item, we need 
            # to append a dummy value to avoid an illegal index.
            self.heap.append(None)
            item = self.delete_max()
            self.heap[sorted_size - i] = item
</code></pre>",0,python|insert|heap|priority-queue|max-heap
29985322,Error while loading excel file with Openpyxl,"<p>I am trying yo load an excel file using Openpyxl in Python. </p>

<pre><code>   from openpyxl import load_workbook 
    wb2 = load_workbook('Book1.xlsx')
    print wb2.get_sheet_names()
</code></pre>

<p>It just these three lines. and it throws the following error:</p>

<pre><code>Traceback (most recent call last):
  File ""C:/Python27/excel1.py"", line 5, in &lt;module&gt;
    wb2 = load_workbook('Book1.xlsx')
  File ""C:\Python27\Lib\site-packages\openpyxl\reader\excel.py"", line 141, in load_workbook
    archive = ZipFile(f, 'r', ZIP_DEFLATED)
  File ""C:\Python27\Lib\zipfile.py"", line 793, in __init__
    self._RealGetContents()
  File ""C:\Python27\Lib\zipfile.py"", line 835, in _RealGetContents
    raise BadZipfile, ""File is not a zip file""
BadZipfile: File is not a zip file
</code></pre>

<p>This is exactly like their Documentation. <a href=""https://openpyxl.readthedocs.org/en/latest/tutorial.html"" rel=""nofollow"">https://openpyxl.readthedocs.org/en/latest/tutorial.html</a>
Is their any better package to do this.</p>",1,python|excel|openpyxl
30083872,How to pass arrays into Scipy Interpolate RectBivariateSpline?,"<p>I am creating a Scipy Interpolate RectBivariateSpline as follows:</p>

<pre><code>import numpy as np
from scipy.interpolate import RectBivariateSpline

x = np.array([1,2,3,4])
y = np.array([1,2,3,4,5])
vals = np.array([
    [4,1,4,4,2],
    [4,2,3,2,6],
    [3,7,4,3,5],
    [2,4,5,3,4]
])

rect_B_spline = RectBivariateSpline(x, y, vals)
</code></pre>

<p>I then try to pass-in an array of x and y points:</p>

<pre><code>a = np.array([3.2, 3.8, 2.2])
b = np.array([2.4, 4.3, 3.3])

print(rect_B_spline(a, b))
</code></pre>

<p>To which I get an error as follows:</p>

<pre><code>Traceback (most recent call last):
  File ""path/file"", line 18, in &lt;module&gt;
    print(rect_B_spline(a, b))
  File ""/path/scipy/interpolate/fitpack2.py"", line 728, in __call__
    raise ValueError(""Error code returned by bispev: %s"" % ier)
ValueError: Error code returned by bispev: 10
</code></pre>

<p>This error is remedied when I pass in the grid=False parameter to the method.</p>

<p>My impression from the <a href=""http://docs.scipy.org/doc/scipy/reference/generated/scipy.interpolate.RectBivariateSpline.__call__.html#scipy.interpolate.RectBivariateSpline.__call__"" rel=""noreferrer"">documentation</a> was that if the input grid coordinates form a regular grid, then the grid parameter should be True. Is there something I am missing?</p>",6,python|numpy|scipy|interpolation
29882079,cache-control headers on openshift,<p>How can I setup cache-control headers on openshift apache server? I using python 2.7 cartridge (with wsgi and django) and I can't find how can modify apache settings. Thanks for any help!</p>,0,python|apache|openshift|wsgi
30145635,Cleaning raw price data from an API that's received in dictionary format (Python),"<p>Using the <a href=""https://github.com/veox/python2-krakenex"" rel=""nofollow"">Krakenex</a> Python module, I am pulling in prices from the Kraken <a href=""https://www.kraken.com/help/api#get-ticker-info"" rel=""nofollow"">API</a> and it arrives in the following format:</p>

<pre><code>{u'result': {u'XXBTZEUR': {u'a': [u'214.79000', u'3'], u'c': [u'214.79416', u'2.27789000'], u'b': [u'214.15262', u'7'], u'h': [u'217.36000', u'217.36000'], u'l': [u'210.99999', u'210.99999'], u'o': u'214.01000', u'p': [u'213.77705', u'213.51830'], u't': [1360, 1499], u'v': [u'872.87753147', u'1036.51819483']}}, u'error': []}
</code></pre>

<p>(this is the output of 'ticker' in the code below)</p>

<p>With dictionary manipulation I can get the last closing price, in this case 214.79416:</p>

<pre><code>last_close_raw = ticker[""result""][""XXBTZEUR""][""c""]
last_close = last_close_raw[0]
</code></pre>

<p>This seems to work until I feed the closing prices into a list, at which point the u' reappears. This is the full code:</p>

<pre><code>from time import strftime
import krakenex

k = krakenex.API()

x = []
y = []

count = 0

while count &lt;= 9:

    ticker = k.query_public('Ticker', {'pair': 'XXBTZEUR'})

    last_close_raw = ticker[""result""][""XXBTZEUR""][""c""]
    last_close = last_close_raw[0]

    timenow = strftime(""%H:%M:%S"")

    print ""%s ----&gt; %s\n----------(%s)"" % (timenow, last_close, count)

    x.append(count)
    y.append(last_close)

    count += 1

print ""x = "", x
print ""y = "", y
</code></pre>

<p>This is the output:</p>

<pre><code>23:07:03 ----&gt; 214.79416
----------(0)
23:07:05 ----&gt; 214.79416
----------(1)
23:07:06 ----&gt; 214.79416
----------(2)
23:07:07 ----&gt; 214.79416
----------(3)
23:07:07 ----&gt; 214.79416
----------(4)
23:07:08 ----&gt; 214.79416
----------(5)
23:07:09 ----&gt; 214.79416
----------(6)
23:07:10 ----&gt; 214.79416
----------(7)
23:07:11 ----&gt; 214.79416
----------(8)
23:07:12 ----&gt; 214.79416
----------(9)
x =  [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
y =  [u'214.79416', u'214.79416', u'214.79416', u'214.79416', u'214.79416', u'214.79416', u'214.79416', u'214.79416', u'214.79416', u'214.79416']
</code></pre>

<p>Why does a list bring back the u'? I have even tried removing the first two characters from each price but this removes the first two digits, not the u'. Thoughts?</p>",2,python|api|dictionary|bitcoin|ticker
30165465,Not able to timeout using python eventlet library (eventlet.timeout.Timeout),"<p>I am looping over a list and performing some action on each member of the list.
If a member takes too much time (1 sec in this case), I intend to pass it. However the block inside the <code>try</code> statement is always being processed and is <strong>never timing out</strong>. I don't understand why.</p>

<pre><code>    from eventlet import *        

    for rule in data:

        #Timeout block
        t=Timeout(1)
        try:
            f = expr2bdd(expr(rule))
            solutions = satisfy_all(f, count=True)
            each_rule[""solution""]=solutions
        except:
            pass
        finally:
            t.cancel()
</code></pre>",1,python|python-3.x|timeout|try-catch|eventlet
29801968,Running Hadoop jar using Luigi python,"<p>I need to run a Hadoop jar job using <a href=""https://github.com/spotify/luigi"" rel=""nofollow"">Luigi</a> from python. I searched and found examples of writing mapper and reducer in Luigi but nothing to directly run a Hadoop jar. </p>

<p>I need to run a Hadoop jar compiled directly. How can I do it? </p>",4,python|hadoop|pipeline|luigi
29954045,Tailable cursor in pymongo seems to have stopped working,"<p>I have successfully been using tailable cursors in Pymongo for 2 years without a hitch, but all of a sudden, today, my identical code is throwing an ""unexpected keyword"" error:</p>

<p><img src=""https://i.stack.imgur.com/onFq6.png"" alt=""enter image description here""></p>

<p>I upgraded to 3.0 Mongo a few weeks ago and it was still working fine, but perhaps a new pymongo version now does it differently as I just installed a new version (3.0.1) today? Previously it was pymongo 2.6.3. My code:</p>

<pre><code>cursor = refreq.find(tailable = True, await_data = True)
while cursor.alive:
    xxx
</code></pre>

<p>So basically anytime something is inserted into refreq collection I want to know about it, without polling. Used to work fine. Pymongo version 3.0.1 recently installed (today). </p>

<p>Tried to put in an empty dict too </p>

<pre><code>cursor = refreq.find({}, tailable = True, await_data = True)
</code></pre>

<p>but still gives the identical error. Has something changed?</p>

<p>Here is the full thread code, for reference:</p>

<pre><code>def handleRefRequests(db, refqueue):
    """""" handles reference data requests. It's threaded. Needs the database id. 
    will create a capped collection and constantly poll it for new requests""""""
    print(""Dropping the reference requests collection"")
    db.drop_collection(""bbrefrequests"")
    print(""Recreating the reference requests collection"")
    db.create_collection(""bbrefrequests"", capped = True, size = 100 * 1000000) # x * megabytes
    refreq = db.bbrefrequests
    # insert a dummy record otherwise exits immediately
    refreq.insert({""tickers"":""test"", ""fields"":""test"", ""overfields"":""test"", ""overvalues"":""test"", ""done"": False})
    cursor = refreq.find({}, tailable = True, await_data = True)
    while cursor.alive:
        try:
            post = cursor.next()
            if (""tickers"" in post) and (""fields"" in post) and (""done"" in post): # making sure request is well formed
                if post[""tickers""] != ""test"":
                    refqueue.put(post)
        except StopIteration:
            time.sleep(0.1)
        if not runThreads:
            print(""Exiting handleRefRequests thread"")
            break
</code></pre>",1,python|mongodb|pymongo
30104748,pip unexpectedly not installing latest version of git package with branch/commit pinning,"<p>I have a requirements.txt file with the following line (among others):</p>

<pre><code>git+https://github.com/lead-ratings/sexmachine.git@master#egg=SexMachine
</code></pre>

<p>When I do</p>

<pre><code>pip install -r requirements.txt
</code></pre>

<p>I see</p>

<pre><code>Requirement already satisfied (use --upgrade to upgrade): SexMachine from git+https://github.com/lead-ratings/sexmachine.git@master#egg=SexMachine in /home/myuser/virtual_env/lib/python2.7/site-packages (from -r requirements.txt (line 38))
</code></pre>

<p>And the package is not updated to the master version. Actually, it keeps some former version from PyPI I had listed in <code>requirements.txt</code> before.</p>

<p>It doesn't work either if I specify a commit in the pinning or use the <code>--no-cache-dir</code> flag. I'm using pip 6.1.1.</p>

<p>If I use the <code>--upgrade</code> flag then it works. But then what is the point of the pinning? Why does it say ""Requirement already satisfied"" if it really isn't?</p>",7,python|git|pip
29883518,Does asyncio.wait return only after all done_callbacks were called?,"<p>Imagine the following code:</p>

<pre><code>import asyncio

loop = asyncio.get_event_loop()

@asyncio.coroutine
def coro():
    yield from asyncio.sleep(1)

def done_callback(future):
    print(""Callback called"")

@asyncio.coroutine
def run():
    future = asyncio.async(coro(), loop=loop)
    future.add_done_callback(done_callback)
    yield from asyncio.wait([future])
    print(""Wait returned"")

loop.run_until_complete(run())
</code></pre>

<p>Output is:</p>

<pre><code>$ python3 /tmp/d.py 
Callback called
Wait returned
</code></pre>

<p>So <code>done_callback</code> was called before <code>wait</code> returned.</p>

<p>Is this guaranteed behavior? I did not find anything in documentation about this.</p>

<p>Is this possible situation when <code>done_callback</code> called after <code>wait</code> returned?</p>",2,python|python-3.x|python-asyncio
30084399,Python - Group duplicates in a list of lists by index,"<p>I've seen a lot of questions about removing duplicates from a list and counting them. But I'm trying to find the best way to group them - for a list of lists. </p>

<p>Given this example I want to group by the third field:</p>

<pre><code>[[1, ""text"", ""name1"", ""text""],
 [2, ""text"", ""name2"", ""text""],
 [3, ""text"", ""name2"", ""text""],
 [4, ""text"", ""name1"", ""text""]]
</code></pre>

<p>I'd like to get this:</p>

<pre><code>[[[1, ""text"", ""name1"", ""text""],
  [4, ""text"", ""name1"", ""text""]],
 [[2, ""text"", ""name2"", ""text""],
  [3, ""text"", ""name2"", ""text""]]]
</code></pre>

<p>I can think of the naive way by looping through and just keeping track of what is found (O(n^2)). But I would assume there's a better way.</p>",3,python|list
30009948,How to reorder indexed rows based on a list in Pandas data frame,"<p>I have a data frame that looks like this:</p>

<pre><code>company  Amazon  Apple  Yahoo
name
A             0    130      0
C           173      0      0
Z             0      0    150
</code></pre>

<p>It was created using this code:</p>

<pre><code>import pandas as pd
df = pd.DataFrame({'name' : ['A', 'Z','C'],
                   'company' : ['Apple', 'Yahoo','Amazon'],
                   'height' : [130, 150,173]})

df = df.pivot(index=""name"", columns=""company"", values=""height"").fillna(0)
</code></pre>

<p>What I want to do is to sort the row (with index <code>name</code>) according to a predefined list <code>[""Z"", ""C"", ""A""]</code>.  Resulting in this :</p>

<pre><code>company  Amazon  Apple  Yahoo
name
Z             0      0    150
C           173      0      0
A             0    130      0
</code></pre>

<p>How can I achieve that?</p>",57,python|pandas
29997635,Selecting Multiple Selectors for increased specificity in Selenium Using Python,"<pre><code>&lt;input class=""radio-field"" type=""radio"" checked=""checked"" value=""0"" name=""value(WoundCareDone)""&gt;
</code></pre>

<p>Hey guys I just have a tiny question.</p>

<p>I want to select the xpath of name. It would go like this //input[@name=""value(WoundCareDone)""] right?</p>

<p>so how I want to include the value 0 in the xpath because only using the above xpath yields 2 results. how do we include value=""0"" in the xpath?</p>",1,python|selenium|xpath
30038852,pexpect: unable to run command on multi-hopped node using namespace,"<p>I had posted this problem earlier <a href=""https://stackoverflow.com/questions/29794260/python-fabric-multi-hop-ssh-to-run-cmd-on-remote-host-using"">https://stackoverflow.com/questions/29794260/python-fabric-multi-hop-ssh-to-run-cmd-on-remote-host-using</a> and since I was unable to find a fix I adopted pexpect to implement. However I am unable to achieve the intent of running command on the end machine:</p>

<pre><code>TestMachine -- connected---Node1--(namespace ssh)--Node2(run cmd on Node2)
</code></pre>

<p>Here is the piece of code which I am running:</p>

<pre><code>#!/usr/bin/env python
import pexpect
import sys
h1='8.8.8.2'
un='root'
### This below worked correctly as expected ###
child = pexpect.spawn(""ssh root@node1"")
child.expect('password:')
child.sendline('abc123')
child.expect('#')
child.sendline(""ls"")
child.expect('#')
print child.before
child.sendline('ssh root@node2')
child.expect('password:')
child.sendline('abc123')
child.expect('#')
child.sendline(""ifconfig eth2"")
child.expect('#')
print child.before
child.sendline('ip netns exec dhcp_ns_1 ssh test@20.20.20.2') #Node2 access
child.expect('password:')
child.sendline('abc123')
child.expect('')
child.sendline(""ifconfig eth0"")
child.expect('$')
print child.before
</code></pre>

<p>The script does not error out, however it does not seem to access Node2 as no output on print is seen. Any help much appreciated</p>",0,python|pexpect
30049253,Modifying diagonals in multidimensional numpy arrays,"<p>I have a multidimensional numpy array of shape (7, 3, 7, 3) and I would like to modify the generalized diagonal in which axis 0 and axis 2 coincide. This generalized diagonal would be defined as those elements of the array whose 0th and 2nd index coincide, and would have shape (3, 3, 7).</p>

<p>Doing:</p>

<pre><code>arr.diagonal(axis1=0, axis2=2)
</code></pre>

<p>I can access to the elements of the diagonal, but I cannot modify them 'in place', at least in version 1.8.2 of numpy. </p>

<p><a href=""http://docs.scipy.org/doc/numpy/reference/generated/numpy.diagonal.html"" rel=""nofollow"">Numpy documentation</a> explains that with version 1.10 this might be possible. However, since I depend on other people using the same code, updating to numpy 1.10 is not an option. Documentation also suggests using .copy() in order to have a portable solution, but .copy() will make a copy of the array, but this is of no help if I want to modify the diagonals of the original array.</p>

<p>Alternatively, I have tried indexing the diagonal elements directly [with input taken from numpy.indices((7, 3, 7, 3))], but with no success.</p>

<p>How could I access the elements of the generalized diagonal to modify the original array in numpy 1.8.2?</p>",2,python|arrays|numpy|multidimensional-array|diagonal
29887159,Python/tkinter: elapsed time in label/updating a label constantly?,"<p>So im trying to write code to display the playback time of an audio file, by constantly looping and updating the label text from pyglet's elapsed time method. I can get the time to appear, but it does not update. was wondering how to update the label on the GUI to show the elapsed time? The loop for time is near the bottom, i provided all the code just in case though.</p>

<pre><code>from tkinter import *
from tkinter.filedialog import askopenfilename
import pyglet
import pyglet.media as media
from threading import Thread
from tkinter import colorchooser


#make player and it's methods global
global player
player = pyglet.media.Player();

app = Tk()
app.title(""Music PYlayer"")
app.geometry(""600x200"")
have_avbin = True 



#opens file 
def openFile():
    global f
    f =  filedialog.askopenfilename(filetypes = ((""Mp3 files"", ""*.mp3""),(""Wav files"", ""*.wav""),(""All files"",""*.*"")))

def aColor():
     mycolor = colorchooser.askcolor()
     color_name = mycolor[1] #  #to pick up the color name in HTML notation, i.e. the 2nd element of the tuple returned by the colorchooser
     app.configure(background=color_name)


#Creates menu bar for opening MP3s, and closing the program
menu = Menu(app)
file = Menu(menu)
file.add_command(label='Open', command=  openFile) # replace 'print' with the name of your open function
file.add_command(label='Background color', command = aColor)
file.add_command(label='Exit', command=app.destroy) # closes the tkinter window, ending the app
menu.add_cascade(label='File', menu=file)
app.config(menu=menu)

#Run each app library mainloop in different python thread to prevent freezing
def playMusic():
    global player_thread
    player_thread = Thread(target=real_playMusic)
    player_thread.start()

def stopMusic():
    global player_thread
    player_thread = Thread(target=real_stopMusic)
    player_thread.start()

#Play open file function attached to button
def real_playMusic():
    src=pyglet.media.load(f, streaming=False)
    global player
    player = pyglet.media.Player();
    player.queue(src)
    player.play()
    pyglet.app.run()

#Stop the music function
def real_stopMusic():
     player.pause()




#Play button creation
btnPlay = Button(app, text =""Play"", command = playMusic)
btnPlay.place(x=75,y=100)


#Pause button creation
btnPause = Button(app)
btnPause.configure(text = ""Stop"", command = stopMusic)
btnPause.place(x=475,y=100)



#Time readout for track
def ReadOut():
    time2 = player.time
    i=0
    if i &lt;= 0:
        nowPlaying=Label(app, text=time2)
        nowPlaying.grid()
        app.update_idletasks()





ReadOut()
app.mainloop() # keep at the end
</code></pre>",0,python|loops|audio|tkinter|label
29867175,Nested options with argparse,"<p>I'd like to have my python script take variable number of arguments depending on a particular choice. For example:</p>

<p><code>python run.py foo</code></p>

<p><code>python run.py bar X Y</code></p>

<p>where choosing the option <code>bar</code> requires two additional arguments, say integer inputs, but <code>foo</code> requires no additional arguments.</p>

<pre><code>import argparse

argparser = argparse.ArgumentParser()
# Allow user to choose test to run
argparser.add_argument(""test"", choices=['foo', 'bar'], help=""You may choose foo or bar."")
...
</code></pre>

<p>But how can I specify additional arguments required by <code>bar</code>? P.S. I'm working with Python 2.7, so if a solution requires Python 3, it won't be much help in my case.</p>",2,python|python-2.7|argparse
30117684,How can I optimize DAL web2py query?,"<pre><code>result = db((db.company.location.belongs(locations)) &amp;
            (db.company.emp_id.belongs(employee_ids)) &amp;
            (db.company.type.belongs(types))).select()
</code></pre>

<p><code>locations</code> is list of location ids</p>

<p><code>employee_ids</code> is list of employee ids</p>

<p><code>types = ['General', 'office', 'e-commerce']</code></p>

<p>This query return 60,000 records and takes 1 minute to complete. How can I optimize it or split it?</p>",0,python|mysql|web2py|database-abstraction
29871461,Return existing primary key ID upon constraint failure in sqlite3,"<p>I have <code>UNIQUE</code> constraint on two columns of a table in SQLite.</p>

<p>If I insert a record with a duplicate on these two columns into the table, I will get an exception (<code>sqlite3.IntegrityError</code>).</p>

<p>Is it possible to retrieve the primary key ID of this record upon such a violation, without doing an additional <code>SELECT</code>?</p>",0,python|python-3.x|sqlite|unique-constraint
30106783,Django - Get query parameter list,"<p>I've an endpoint </p>

<pre><code>http://127.0.0.1:8000/auction/?status=['omn','aad']
</code></pre>

<p>I need to get the status list, hence I do the following</p>

<pre><code>print (request.GET.getlist('status'))
</code></pre>

<p>It returns me </p>

<pre><code>[u""['omn','aad']""]
</code></pre>

<p>which is a list of string of list.</p>

<p>I then use ast.literal_eval to convert string of list to list. Is there a direct method to get the list of status?</p>",6,python|django
29930201,how to get full list of keys from a collection in mongodb,"<p>How do I get a list of all the keys used in a mongodb collection?</p>

<p>I'm trying to create a csv file in python using the following:</p>

<pre><code>userAgentProp_list = []
# userAgentProp is a set of user ids
# userColl is a mongodb collection
for user in userAgentProp:
    userAgentProp_list.append(userColl.find_one({""_id"":user}))

with open('userWtihAgentProp.csv','w+') as f:
    w = csv.DictWriter(f,userAgentProp_list[0].keys())
    w.writeheader()
    for user in userAgentProp_list:
        # del row['_id']
        w.writerow(user)
</code></pre>

<p>but I keep getting an error:</p>

<pre><code>ValueError: dict contains fields not in fieldnames
</code></pre>

<p>I think this is because <code>userAgentProp_list[0]</code> doesn't have all the same fields as the other documents in the collection.</p>

<p>How can I get a list of the all the keys used in the collection?</p>",3,python|mongodb|pymongo
30137950,Passing result of mrjob step to next step as parameter,"<p>I am writing a multi-step mrjob. The first step does some pre-processing and ends with the following reducer:</p>

<pre><code>def some_reducer(self, key, values):
    values = (int (value) for value in values)
    if key == 'iwantthiskey':
        //I want to pass sum(values) as a parameter to the next step
</code></pre>

<p>I've tried going through the documentation and experimented with adding passthrough options or adding values to self.jobconf(), but I couldn't figure it out.
Any help would be appreciated.</p>",2,python|mapreduce|mrjob
29879404,Web.py not serving static files,"<p>Running on the devel server, I can render 0.0.0.0:8080/index.html without CSS fine, but no static files load.  0.0.0.0:8080/static results in ""Not found"" and 0.0.0.0:8080/static/style.css gets a 404.   </p>

<p>All I've googled quotes or links to <a href=""http://webpy.org/cookbook/staticfiles"" rel=""nofollow"">http://webpy.org/cookbook/staticfiles</a>, which I feel like I've followed to point.  </p>

<p>filetree</p>

<pre><code>code.py
/web
    ...
/static
    style.css
    /images
        ...
/pages
    index.html
</code></pre>

<p>code.py</p>

<pre><code>import web

render = web.template.render('/home/keith/code/webpy/skeleton/pages/')

urls = (
    '/', 'index',)

class index:
    def GET(self):
        return render.index()

if __name__ == ""__main__"":
    app = web.application(urls, globals())
    app.run()
</code></pre>

<p>/pages/index.html</p>

<pre><code>...
&lt;link rel=""stylesheet"" type=""text/css"" href=""static/style.css"" /&gt;
...
</code></pre>

<p>Would appreciate any help!  </p>",0,python|web.py
30139978,Using lambda function to multiply columns of a pandas dataframe by a different value for each column,"<p>I have the following code:</p>

<pre><code>    data_keys = data.keys()
    for i in range(1,len(data_keys)):
        multiplier = specie_name_and_initial_values_dict[data_keys[i]]
        data[data_keys[i]]=map(lambda x: multiplier*x, data[data_keys[i]])
    return data
</code></pre>

<p>data_keys is a list of keys derived from a pandas dataframe i.e. </p>

<pre><code>Index([u'Time', u'Cyp26_G_R1', u'Cyp26_G_rep1'], dtype='object')
</code></pre>

<p>data is a pandas data frame, i.e.:</p>

<pre><code>    Time  Cyp26_G_R1  Cyp26_G_rep1
0      0         0.0          14.0
1    300         0.0          10.0
2    600         1.0           1.5
3    900         2.0           2.0
4   1200         2.5           1.0    
5   1500         4.0           0.9
6   1800         2.0           2.0
7   2100         2.5           2.5
8   2400         5.0           2.5
9   2700         6.5           0.5
10  3000         6.0           0.4
11  3300         5.5           0.5
12  3600         1.5           1.5    
</code></pre>

<p>and specie_name_and_initial_values_dict is a dictionary with 35 keys, one value in each key and two of those keys have the same name as the column headers in the  data frame above (not 'Time'). </p>

<p>I'm trying to multiply the two data columns of my data frame by each of the two values that I get from the 'specie_name_and_initial_values_dict[data_keys[i]]' within the loop. </p>

<p>I cannot paste my current output because stack overflow doesn't like the format but what is currently happening is the multiplication is not occurring and the numbers are iteratively being spliced i.e. first element = 240.8856716, second = 240.8856716240.8856716 and this continues.</p>

<p>This is obviously not what I want. Does anybody know a way to do this? </p>",0,python|pandas|lambda
30007109,Error: AttributeError: file <maya console> line 65: 'OptionsWindow' object has no attribute 'int_offset' #,"<p>I'm getting this error for line 65 of my Python code in Maya within the pasteTheseKeys method:</p>

<pre><code>self.offsetVal = mc.intFieldGrp(self.int_offset, q=True, value1=True)
</code></pre>

<p>pasteTheseKeys is called when the ""Paste Keys"" button is pressed. That relationship is defined in the commonButtons method.</p>

<p>The complete code:</p>

<pre><code># Animation Copy Tool
# Bakari Holmes 5/2/2015
# This is designed to copy and existing animation
# from one rig to another and make the process easier
# with a simple UI
# !!!Make sure you select keyframes in the graph editor to have them displayed before pasting!!!

import maya.cmds as mc
import functools
import maya.mel as mm
import pprint

""""""OptionsWindow is a class definition of the basic window class.
   The class is adding a set of controls to create a template
   that resembles Maya's built-in tool option windows.""""""

class OptionsWindow(object):
    #@classmethod
    def showUI(cls):
        win = cls()
        win.create()
        return win
    def __init__(self):
        self.window = ""Animation Copy Tool""
        self.title = ""Animation Copier""
        self.size = (546,350)
    def create(self):
        if mc.window(self.window,exists=True): 
            mc.deleteUI(self.window,window=True)

        self.window = mc.window(self.window, title=self.title,widthHeight=self.size,menuBar=True)
        self.mainForm = mc.formLayout(nd=100)
        self.commandMenu()
        self.commonButtons()
        self.optionsBorder = mc.tabLayout(scrollable=True,height=1)
        mc.formLayout(self.mainForm,e=True,attachForm=([self.optionsBorder,""top"",0],[self.optionsBorder,""left"",2],[self.optionsBorder,""right"",2]),attachControl=([self.optionsBorder,""bottom"",5,self.applyBtn]))
        self.optionsForm=mc.formLayout(nd=100)
        mc.tabLayout(self.optionsBorder,edit=True,tabLabel=(self.optionsForm,""Test""))
        self.displayOptions()
        self.tx_src = mc.textFieldGrp(label=""Source Object"", editable=False, text=sel[0])
        self.int_offset = mc.intFieldGrp(label=""Frame Offset Amount"", value1=0)
        mc.showWindow()

    def commandMenu(self):
        self.editMenu = mc.menu(label=""Edit"")
        self.editMenuSave = mc.menuItem(label=""Save Settings"",command=self.editMenuSaveCmd)
        self.editMenuReset = mc.menuItem(label=""Reset Settings"",command=self.editMenuResetCmd)
        self.helpMenu = mc.menu(label=""Help"")
        self.helpMenuItem = mc.menuItem(label=""Help on %s""%(self.title),command=self.helpMenuCmd)
    def helpMenuCmd(self,*args):
        mc.launch(web=""http://maya-python.com"")
    def editMenuSaveCmd(self,*args):pass
    def editMenuResetCmd(self,*args):pass

    def applyBtnCmd(self,*args):pass
    def closeBtnCmd(self,*args):
        mc.deleteUI(self.window,window=True)

    #paste operation
    def pasteTheseKeys(self):
        self.offsetVal = mc.intFieldGrp(self.int_offset, q=True, value1=True)
        self.selObj_pasteKeys = mc.ls(sl=True)

        for objectQuant in selObj_pasteKeys:
            print objectQuant
            self.ct = mc.currentTime(query = True)
            self.t = self.ct + self.offsetVal
            mc.currentTime(self.t)
            # mc.selectKey(selObj_pasteKeys[objectQuant])
            mc.pasteKey(time=(self.t, self.t), f=(1.0,1.0), option=""merge"", copies=1, to=0, fo=0, vo=0)

    def commonButtons(self):
        self.commonBtnSize=(self.size[0]-18/3,26)
        self.acctionBtn=mc.button(label=""Paste Keys"", command = self.pasteTheseKeys(), height=self.commonBtnSize[1])

        self.closeBtn = mc.button(label=""Close"",height=self.commonBtnSize[1],command=self.closeBtnCmd)


        mc.formLayout(self.mainForm, e=True, attachForm=([self.acctionBtn,""left"",5],
                                                     [self.acctionBtn,""bottom"",5],
                                                     [self.closeBtn,""bottom"",5],
                                                     [self.closeBtn,""right"",5]),
                                         attachPosition=([self.acctionBtn,""right"",1,33],
                                                         [self.closeBtn,""left"",0,67]),
                                         #attachControl=([self.applyBtn,""left"",4,self.acctionBtn],
                                                      #  [self.applyBtn,""right"",4,self.closeBtn]),
                                         attachNone=([self.acctionBtn,""top""],
                                                     [self.closeBtn,""top""]))
    def displayOptions(self):pass

#########################    
# end of class definition
#########################

def keys_as_dictionary(channel):
    """"""return a dictionay of times:values for &lt;channel&gt;""""""
    keys = mc.keyframe(channel, q=True, tc=True) or []
    values = mc.keyframe(channel, q=True, vc=True) or []
    return dict(zip(keys, values))

def channels(object):
    """"""return a dictionary of &lt;plug&gt;:&lt;channel_dict&gt; for each animated plug selected""""""
    keys = mc.keyframe(object, sl=True, n=True, q=True)
    result = {}

    for k in keys:
        plugs = mc.listConnections(k, p=True)[0]
        result[plugs]= keys_as_dictionary(k)
    return result



copyAnim=""copyAnim""

#store selected object info
sel = mc.ls(selection=True)
print sel

if (len(sel) != 1):
    mm.eval(""warning Must select one animated object;"")

else:
    mc.copyKey()
    win = OptionsWindow()
    win.create()

    pprint.pprint(channels(sel))
</code></pre>

<p>I've been combing through the other entries here on Attribute errors and instance attributes vs. class attributes but am still quite confused as to why I'm getting this error.</p>",0,python|maya|attributeerror
30034163,Arranging size of a frame in tkinter,"<p>I am making a simple toolbox for my app. I have used the class method, which inherits <code>Frame</code> as its super class. In my main file I import this class.</p>

<p>It will be a main window which all widgets will be in it. But there is a problem, here is the source code:</p>

<pre><code>from tkinter import *

class ToolBox(Frame):
    def __init__(self, master=None,
                 width=100, height=300):
        Frame.__init__(self, master,
                       width=100, height=300)
        self.pack()
        Button(self, text=""B"").grid(row=0, sticky=(N,E,W,S))
        Button(self, text=""B"").grid(row=0, column=1, sticky=(N,E,W,S))
        Button(self, text=""B"").grid(row=1, column=0,sticky=(N,E,W,S))
        Button(self, text=""B"").grid(row=1, column=1, sticky=(N,E,W,S))
        Button(self, text=""B"").grid(row=2, column=0, sticky=(N,E,W,S))
        Button(self, text=""B"").grid(row=2, column=1, sticky=(N,E,W,S))
</code></pre>

<p>I import this in here:</p>

<pre><code>from tkinter import *
import toolbox as tl

root = Tk()

frame = Frame(root, width=400, height=400)
frame.pack()
tl.ToolBox(frame).pack()

root.mainloop()
</code></pre>

<p>Main window, which is the <code>root</code> who has the <code>frame</code>, must be 400 in widht and height. But it appears in dimensions of my toolbox. I want the toolbox to be in the main window. How can I solve this?</p>",0,python-3.x|tkinter
30116141,python selenium webdriver open new window handle wait,"<p>When I click a button open new window 
How do I know window open finished?</p>

<p>In wait frame can I use below</p>

<pre><code>wait.until(EC.frame_to_be_available_and_switch_to_it(driver.find_element_by_name('newframe')))
</code></pre>

<p>in new window?</p>",0,python|selenium-webdriver
29753592,Pyenv shim not created when installing package using setup.py,"<p>When I install a package into a pyenv environment by using <code>./setup.py install</code>, the package's script is not added to pyenv's shim directory.  As a result, the script is not in my PATH and cannot be executed normally.</p>

<p>My package is using setuptools.  My package's <code>setup.py</code> specifies a script that should be installed.</p>

<pre><code>SCRIPTS = [
    'bin/olio_msg_send_test_messages',
]
setup(
    ...
    scripts=SCRIPTS,
    ...
)
</code></pre>

<p>When I install the package using:</p>

<pre><code>./setup.py build
./setup.py install
</code></pre>

<p>Then the script gets installed into the package's directory:</p>

<pre><code>...
Installing olio_msg_send_test_messages script to /home/wayne/.pyenv/versions/2.6.9/bin
...
</code></pre>

<p>And the file is indeed there:</p>

<pre><code>$ ls -l /home/wayne/.pyenv/versions/2.6.9/bin/olio_msg_send_test_messages 
-rwxrwxr-x 1 wayne wayne 240 Apr 20 09:30 /home/wayne/.pyenv/versions/2.6.9/bin/olio_msg_send_test_messages
</code></pre>

<p>However, no shim is added to <a href=""https://github.com/yyuu/pyenv"" rel=""noreferrer"">pyenv</a>'s shims directory:</p>

<pre><code>$ ls -l ~/.pyenv/shims/olio_msg_send_test_messages 
ls: cannot access /home/wayne/.pyenv/shims/olio_msg_send_test_messages: No such file or directory
</code></pre>

<p>Therefore the script is not in my PATH and cannot be executed by typing its name.</p>

<p>What do I need to do so that the pyenv shim gets created when I install the package via <code>./setup.py install</code>?</p>

<hr>

<p>Versions:</p>

<ul>
<li>pyenv 20141118</li>
<li>python 2.6.7</li>
</ul>",6,python|setuptools|pyenv
29763360,Accurate color blending in Matplotlib-Venn,"<p>With the following code:</p>

<pre><code>from matplotlib import pyplot as plt
from matplotlib_venn import venn2
from collections import OrderedDict

named_sets = {'x1': set(['foo','foo','bar',""pax""]), ""x3"" : set(['foo','qux','bar',""zoo""])}
od = OrderedDict(sorted(named_sets.iteritems()))

circlenm = ()
circlels = []
for k,v in od.iteritems():
    circlenm = circlenm + (k,)
    circlels.append(v)


c = venn2(subsets = circlels,set_labels = circlenm)
c.get_patch_by_id('10').set_color('red')
c.get_patch_by_id('01').set_color('blue')
c.get_patch_by_id('10').set_edgecolor('none')
c.get_patch_by_id('01').set_edgecolor('none')
c.get_patch_by_id('10').set_alpha(0.4)
c.get_patch_by_id('01').set_alpha(0.4)
plt.show()
</code></pre>

<p>I can get the following figure:</p>

<p><img src=""https://i.stack.imgur.com/TPoCz.png"" alt=""enter image description here""></p>

<p>Here I'd like to blend circles of 'blue' with 'red'.
Notice that the result of the blending is <strong>brown</strong>.</p>

<p>But the actual value supposed to be <strong>light magenta</strong> (figure below is created using default <code>matplotlib_venn.venn3</code>):</p>

<p><img src=""https://i.stack.imgur.com/Egzdw.jpg"" alt=""enter image description here""></p>

<p>How can I achieve that correctly?</p>",3,python|matplotlib|venn-diagram|matplotlib-venn
30197943,'numpy.ndarray' object has no attribute 'remove',"<p>I have an array of arrays and I'm trying to find the lowest non-zero value among them all.</p>

<pre><code>minima = []
for array in K: #where K is my array of arrays (all floats)
    if 0.0 in array:
        array.remove(0.0)
    minima.append(min(array))

print min(minima)
</code></pre>

<p>This yields 
</p>

<pre><code>AttributeError: 'numpy.ndarray' object has no attribute 'remove'
</code></pre>

<p>I thought <code>array.remove()</code> was the way to remove an element. What am I doing wrong?</p>",8,python|numpy|multidimensional-array|floating-point
29957444,java.lang.IncompatibleClassChangeError When submitting spark example code for hbase,"<p>i'm trying to submit the python code of hbase in spark exmaples folder. can anyone help to give me a solution in details, thanks a lot!</p>

<h3>Environment</h3>

<p>OS:  <code>Win7</code><br>
Spark:  <code>Pre-build-1.3.0-bin-cdh4</code>  </p>

<h3>Example File</h3>

<pre><code>|SPARK_HOME|
----examples
--------src
------------main
----------------python
--------------------hbase_inputformat.py
</code></pre>

<h3>Stack Trace</h3>

<p>but there is always an error of java.lang.IncompatibleClassChangeError, here is the trace:   </p>

<pre><code> File ""D:\spark-1.3.0-bin-cdh4\python\lib\py4j-0.8.2.1-src.zip\py4j\java_gateway.py"", line 538, in __call__
  File ""D:\spark-1.3.0-bin-cdh4\python\lib\py4j-0.8.2.1-src.zip\py4j\protocol.py"", line 300, in get_return_value
py4j.protocol.Py4JJavaError: An error occurred while calling z:org.apache.spark.api.python.PythonRDD.newAPIHadoopRDD.
: java.lang.IncompatibleClassChangeError: Implementing class
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClass(ClassLoader.java:760)
    at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)
    at java.net.URLClassLoader.defineClass(URLClassLoader.java:455)
    at java.net.URLClassLoader.access$100(URLClassLoader.java:73)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:367)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:361)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:360)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:424)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:357)
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Class.java:260)
    at org.apache.spark.mapreduce.SparkHadoopMapReduceUtil$class.firstAvailableClass(SparkHadoopMapReduceUtil.scala:74)
    at org.apache.spark.mapreduce.SparkHadoopMapReduceUtil$class.newJobContext(SparkHadoopMapReduceUtil.scala:28)
    at org.apache.spark.rdd.NewHadoopRDD.newJobContext(NewHadoopRDD.scala:66)
    at org.apache.spark.rdd.NewHadoopRDD.getPartitions(NewHadoopRDD.scala:94)
    at org.apache.spark.rdd.RDD$$anonfun$partitions$2.apply(RDD.scala:219)
    at org.apache.spark.rdd.RDD$$anonfun$partitions$2.apply(RDD.scala:217)
    at scala.Option.getOrElse(Option.scala:120)
    at org.apache.spark.rdd.RDD.partitions(RDD.scala:217)
    at org.apache.spark.rdd.MapPartitionsRDD.getPartitions(MapPartitionsRDD.scala:32)
    at org.apache.spark.rdd.RDD$$anonfun$partitions$2.apply(RDD.scala:219)
    at org.apache.spark.rdd.RDD$$anonfun$partitions$2.apply(RDD.scala:217)
    at scala.Option.getOrElse(Option.scala:120)
    at org.apache.spark.rdd.RDD.partitions(RDD.scala:217)
    at org.apache.spark.rdd.RDD.take(RDD.scala:1156)
    at org.apache.spark.api.python.SerDeUtil$.pairRDDToPython(SerDeUtil.scala:205)
    at org.apache.spark.api.python.PythonRDD$.newAPIHadoopRDD(PythonRDD.scala:483)
    at org.apache.spark.api.python.PythonRDD.newAPIHadoopRDD(PythonRDD.scala)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:483)
    at py4j.reflection.MethodInvoker.invoke(MethodInvoker.java:231)
    at py4j.reflection.ReflectionEngine.invoke(ReflectionEngine.java:379)
    at py4j.Gateway.invoke(Gateway.java:259)
    at py4j.commands.AbstractCommand.invokeMethod(AbstractCommand.java:133)
    at py4j.commands.CallCommand.execute(CallCommand.java:79)
    at py4j.GatewayConnection.run(GatewayConnection.java:207)
    at java.lang.Thread.run(Thread.java:745)
</code></pre>",1,python|apache-spark|hbase
30074756,How to set parent process' shell env from child process,"<p>The child process has a value which must be passed onto the parent process. I am using python's <code>subprocess.Popen</code> to do that, but child process's <code>TEMP_VAR</code> is not visible from the parent's shell?</p>

<pre><code>import subprocess
import sys

temp = """"""variable_val""""""
subprocess.Popen('export TEMP_VAR=' + temp + '&amp;&amp; echo $TEMP_VAR', shell=True)
//prints variable_val
subprocess.Popen('echo $TEMP_VAR', shell=True)
//prints empty string
</code></pre>

<p>Is there a way to do this interprocess communication without using <code>queues</code> (or) Popen's - <code>stdout/stdin</code> keyword args.</p>",1,python|shell|subprocess|inter-process-communicat
30096501,Django Grappelli Autocomplete issue,"<p>I am using the following code. I tried everything as per docs, but can't find any way. Am I missing something. The models.py contains the following code.</p>

<pre class=""lang-python prettyprint-override""><code>from django.db import models
from datetime import datetime
from django.contrib import admin


class Category(models.Model):
    category_name = models.CharField(max_length=200)
    category_id = models.CharField(max_length=200)

    class Meta:
        app_label = 'ebay'

    def __unicode__(self):
        return u'%s' % (self.category_id)


class MyCategory(Category):
    @staticmethod
    def autocomplete_search_fields():
        return (""category_name__icontains"", ""category_id__icontains"")

    class Meta:
        proxy = True


class Listing(models.Model):
    ebay_id = models.CharField(max_length=200,null=True)
    amazon_id = models.CharField(max_length=200)
    category = models.ForeignKey(MyCategory)

    class Meta:
        app_label = 'ebay'

    def __unicode__(self):
        return u'%s' % (self.ebay_id)

class ListingOptions(admin.ModelAdmin):
    # define the raw_id_fields
    raw_id_fields = ('category',)
    # define the autocomplete_lookup_fields
    autocomplete_lookup_fields = {
        'fk': ['category'],
    }
</code></pre>

<p>I am using Django version 1.8.1</p>",1,python|django|django-grappelli
30116780,How many connections will open in mongodb in python?,"<p>I am working with mongodb and python, for accessing the database I am doing  this:</p>

<pre><code>#pymongo connection settings
from pymongo import Connection
connection = Connection('localhost', 27017)
db = connection['MyDB']
</code></pre>

<p>I am inserting documents like this:</p>

<pre><code>db_data = db.mycollection.insert({'name': 'Mulagala', 'age': 24})
</code></pre>

<p>and finding like this:</p>

<pre><code>db_data = db.mycollection.find()
</code></pre>

<p>When I am creating multiple users or getting <code>mycollection</code> details for multiple times how many conections will open in mongodb. Do I need to close any open connection before returning result?</p>",1,python|mongodb
29921007,python crosstab function in a loop,"<p>I am working in python for quiet a time, but stuck at simple problem.I have to run crosstab functions for different variables with same ID variable(masteruserid)</p>

<pre><code>pd.crosstab(data['MasterUserId'],visittime_cat)
pd.crosstab(data['MasterUserId'],week_cat)
</code></pre>

<p>Now I want to do the same about 7-8 times. Instead of calling the crosstab function recurvisely, I want to put inside a loop and generate a crosstab dataset for each iteration. I tried this, but was not successful</p>

<pre><code>def cross_tab(id_col,field):
    col_names=['visittime_cat','week_cat','var3','var4']
    for i in col_names:
        'crosstab_{ }'.format(i)=pd.crosstab(id_col,i)
</code></pre>

<p>I want to generate datasets such as crosstab_visittime_cat,crosstab_week_cat or as crosstab_1, crosstab_2 and so on.</p>",1,python|pandas|crosstab
30105531,"Why doesn't python log exceptions to syslog (but then, it does?)","<p>The <a href=""https://docs.python.org/2/library/logging.handlers.html#logging.handlers.SysLogHandler.emit"" rel=""nofollow"">documentation</a> for the <code>emit()</code> function of Python 2.x <a href=""https://docs.python.org/2/library/logging.handlers.html#sysloghandler"" rel=""nofollow"">SysLogHandler</a> says:</p>

<blockquote>
  <p>The record is formatted, and then sent to the syslog server. If
  exception information is present, it is not sent to the server.</p>
</blockquote>

<p>...why? The <a href=""https://hg.python.org/cpython/file/2.7/Lib/logging/handlers.py#l637"" rel=""nofollow"">source</a> doesn't <a href=""https://hg.python.org/cpython/file/e8783c581928/Lib/logging/__init__.py#l654"" rel=""nofollow"">tell</a> me much. Did I miss something?</p>

<p>However, when I try the following code:</p>

<pre><code>import logging
from logging.handlers import SysLogHandler

rootlogger = logging.getLogger()
rootlogger.setLevel(logging.DEBUG)
syslogh = SysLogHandler('/dev/log')
rootlogger.addHandler(syslogh)
# to see what's happening too
consoleh = logging.StreamHandler()
rootlogger.addHandler(consoleh)

# this appears in the log
rootlogger.info('foobar')
try:
    a = 42
    a / 0
except ZeroDivisionError as e:
    rootlogger.exception('myException!: {}'.format(e))
</code></pre>

<p>It does write the following to syslog:</p>

<blockquote>
  <p>May  7 16:25:59 localhost foobar<br>
  May  7 16:25:54 localhost myException!: integer division or modulo by
  zero#012Traceback (most recent call last):#012  File ""syslogonly.py"",
  line 16, in #012    a / 0#012ZeroDivisionError: integer
  division or modulo by zero</p>
</blockquote>

<p>I am using rsyslog 8.4.2 on a Debian wheezy system.</p>

<p>Also, I am aware there are issues with multiline, but is this related? </p>",2,python|logging|syslog|rsyslog
30100846,Navigate an NLTK tree (follow-up),"<p>I've asked the question how I can properly navigate through an NTLK tree.</p>

<blockquote>
  <p>How do I properly navigate through an NLTK tree (or ParentedTree)? I would like to identify a certain leaf with the parent node ""VBZ"", then I would like to move from there further up the tree and to the left to identify the NP node.</p>
</blockquote>

<p><a href=""https://stackoverflow.com/questions/30057440/how-to-properly-navigate-an-nltk-parse-tree"">Original question</a></p>

<p>And provided the following illustration:</p>

<p><img src=""https://i.stack.imgur.com/a1ANO.png"" alt=""NLTK tree""></p>

<p>I got the following (very helpful) answer from Tommy (thank you!):</p>

<pre><code>from nltk.tree import *

np_trees = []

def traverse(t):
    try:
        t.label()
    except AttributeError:
        return

    if t.label() == ""VBZ"":
        current = t
         while current.parent() is not None:

            while current.left_sibling() is not None:

                 if current.left_sibling().label() == ""NP"":
                    np_trees.append(current.left_sibling())

                current = current.left_sibling()

            current = current.parent()

    for child in t:
         traverse(child)

 tree = ParentedTree.fromstring(""(S (NP (NNP)) (VP (VBZ) (NP (NNP))))"")
 traverse(tree)
 print np_trees # [ParentedTree('NP', [ParentedTree('NNP', [])])]
</code></pre>

<p><strong>But how can I include the condition that I only extract those NP nodes that have an NNP child node?</strong></p>

<p>Any help would be much appreciated again. </p>

<p>(Generally, if there is any expert on NLTK trees among you, I would love to chat with you and pay a few coffees in exchange for a bit of insight.)</p>",0,python|tree|nlp|nltk
30197175,PyVisa-py backend,"<p>I have an error appeared on installing pyvisa-py pn on raspberry pi2, which is </p>

<blockquote>
  <p>ImportError: cannot import name rname</p>
</blockquote>

<p>after I run command </p>

<pre><code>rm = visa.ResourceManager('@py')
</code></pre>

<p>Here is the message given by interrupter:</p>

<pre><code>Traceback (most recent call last):
File """", line 1, in 
File ""/usr/local/lib/python2.7/dist-packages/pyvisa/highlevel.py"", line 1477, in new
visa_library = open_visa_library(visa_library)
File ""/usr/local/lib/python2.7/dist-packages/pyvisa/highlevel.py"", line 1446, in open_visa_library
cls = get_wrapper_class(wrapper)
File ""/usr/local/lib/python2.7/dist-packages/pyvisa/highlevel.py"", line 1426, in get_wrapper_class
pkg = import(pkgname)
File ""/usr/local/lib/python2.7/dist-packages/pyvisa-py/init.py"", line 26, in 
from .highlevel import PyVisaLibrary
File ""/usr/local/lib/python2.7/dist-packages/pyvisa-py/highlevel.py"", line 20, in 
from pyvisa import constants, errors, highlevel, rname
ImportError: cannot import name rname
</code></pre>

<p>Also, Here is the here's what python -m visa info returns :</p>

<pre><code>Machine Details:
Platform ID: Linux-3.18.11-v7+-armv7l-with-debian-7.8
Processor: 
Python:
Implementation: CPython
Executable: /usr/bin/python
Version: 2.7.3
Compiler: GCC 4.6.3
Bits: 32bit
Build: Mar 18 2014 05:13:23 (#default)
Unicode: UCS4
PyVISA Version: 1.6.3
Backends:
ni:
Version: 1.6.3 (bundled with PyVISA)
Binary library: Not found
py:
Could not instantiate backend
-&gt; cannot import name rname
sim:
Does not provide debug info
</code></pre>

<p>Could anyone help me solve it? Thanks a lot</p>",0,python|linux|raspberry-pi2
29986410,Python 3.x - toggling fullscreen in tkinter,"<p>So far, I have a command that makes my window fullscreen. Now, predictably, I want to be able to exit fullscreen also.</p>

<p>This is the code I have:</p>

<pre><code>def toggFullscreen(self, win):

    def exitFullscreen(event=None):
        win.withdraw()
        win.deiconify()
        win.overrideredirect(False)
        win.geometry('1024x700')

    w = win.winfo_screenwidth()
    h = win.winfo_screenheight()
    win.overrideredirect(True)
    win.geometry('%dx%d+0+0' % (w, h))
    win.focus_set()
    win.bind('&lt;Escape&gt;', exitFullscreen)
</code></pre>

<p>But the issue is that I can't get the window frame to reappear. I thought that doing <code>win.overrideredirect(False)</code> would work, but it didnt.</p>",2,python|tkinter|toggle|fullscreen
29755110,Twitter Streaming: Get trends on Twitter on the basis of countries,"<p>I am using <code>tweepy</code> to get twitter tweets. I want to get the current trends based on the country of my choice. My code is as follows:</p>

<pre><code>import tweepy
file = open(""data.txt"", 'r')
authentication = tweepy.OAuthHandler('consumer_key', 'consumer_secret')
authentication.set_access_token('access_token', 'access_secret')
api = tweepy.API(authentication)
trends = api.trends_available()
for trend in trends:
    print trend
</code></pre>

<p>The code above gives me a list of countries. I want to use the list to check the current trends in the country. How do I extract the trending <code>hashtags</code> for these countries?</p>

<p>I came across <a href=""https://stackoverflow.com/questions/27071890/how-to-get-historic-trending-hashtags-on-twitter-by-date-and-or-by-location"">this</a> question but it has no answers.</p>",1,python|twitter|tweepy|twitter-streaming-api
29814958,What does %c character formatting do in Python and it's use?,"<p>Going through string formatting operations but can't exactly wrap my head about %c operation and its use.</p>

<p>Learn Python the Hard Way, gave the following example but it makes little sense without the proper context.</p>

<pre><code>""%c"" % 34 == '""'     
</code></pre>

<p>Here is the link to if anyone wants to check it out:
<a href=""http://learnpythonthehardway.org/book/ex37.html"" rel=""nofollow"">http://learnpythonthehardway.org/book/ex37.html</a></p>",0,python|string
29829422,Legends in Matplotlib Basemap,"<p>I'm plotting multiple points in Basemap and would like to have a legend to signify the category that each color represents. However, since I have multiple points in each category, the legend pulls each of those points, giving me multiple entries of the same category in the legend. Is there a way to just show one overall color-category listing?</p>

<pre><code>m = Basemap(llcrnrlon=30.,llcrnrlat=20.,urcrnrlon=-160.,urcrnrlat=63.,projection='lcc',resolution='c',lat_1=20.,lat_2=40.,lon_0=90.,lat_0=50.)

X,Y = m(lon,lat)    
m.drawcountries()
m.drawmapboundary(fill_color='lightblue')
m.drawparallels(np.arange(0.,90.,5.),color='gray',dashes=[1,3],labels=[1,0,0,0])
m.drawmeridians(np.arange(0.,360.,15.),color='gray',dashes=[1,3],labels=[0,0,0,1])
m.fillcontinents(color='beige',lake_color='lightblue')
plt.title('MERRA-Observation Correlations')

for j in range(len(corr)):
    if j == 0 or j == 1 or j ==2:
        m.plot(X[j],Y[j],'o',color='orange',markersize=np.absolute(corr[j])*17.5,label='Prairie')
    if j == 3 or j ==4 or j == 5:
        m.plot(X[j],Y[j],'o',color='violet',markersize=np.absolute(corr[j])*17.5,label='Tundra')
    if j ==6 or j == 7 or j == 8:
        m.plot(X[j],Y[j],'o',color='purple',markersize=np.absolute(corr[j])*17.5,label='Taiga')
    plt.legend()
</code></pre>

<p>NOTE: I've placed plt.legend both inside and outside the loop with the same results. </p>

<p><img src=""https://i.stack.imgur.com/bsXZG.png"" alt=""enter image description here""></p>",1,python|matplotlib|matplotlib-basemap
29982556,"from . import models works, but import models doesn't","<p>I'm working on a webproject and using Django. In my <code>views.py</code> file I want to access the database for which I want to import my <code>models</code>.</p>

<p>Here's my directory structure:  </p>

<pre><code> project  
  __init__.py  
  settings.py  
  urls.py  
  wsgi.py  
 app  
  admin.py  
  __init__.py  
  models.py  
  tests.py  
  views.py  
 manage.py
</code></pre>

<p>In my <code>views.py</code> I'm doing <code>import models</code>, but I'm getting an <code>importError</code>. Although <code>from . import models</code> works. </p>

<p>Why?</p>

<p>But the following works without any error:</p>

<pre><code> __init__.py
 mod1.py
 mod2.py
</code></pre>

<p>mod1.py</p>

<pre><code>import mod2

print(mod2.foo())
</code></pre>

<p>mod2.py</p>

<pre><code>def foo():
    return ""Hello""
</code></pre>",2,python|django|python-3.x|import
29933510,How to find a specific string in a .txt file Python,"<p>I have a large textfile on my computer (location: /home/Seth/documents/bruteforce/passwords.txt) and I'm trying to find a specific string in the file. The list has one word per line and 215,000 lines/words. Does anyone know of simple Python script I can use to find a specific string?</p>

<p>Here's the code I have so far,</p>

<pre><code>f = open(""home/seth/documents/bruteforce/passwords.txt"", ""r"")
for line in f.readlines():
    line = str(line.lower())
    print str(line)
    if str(line) == ""abe"":
        print ""success!""
    else:
        print str(line)
</code></pre>

<p>I keep running the script, but it never finds the word in the file (and I know for sure the word is in the file).</p>

<p>Is there something wrong with my code? Is there a simpler method than the one I'm trying to use? </p>

<p>Your help is greatly appreciated.</p>

<p>Ps: I'm using Python 2.7 on a Debian Linux laptop.</p>",0,python|text-files
29780634,Dataframe how to keep only unique rows and plot curve,"<p>I have following data frame where I am trying to actually plot a curve but the problem is that it has multiple corresponding values for each value in both precision and recall. </p>

<pre><code>       precision  recall
1       0.000000       0
7       0.000000       0
23      0.000000       0
28      0.000000       0
34      0.000000       0
35      0.000000       0
40      0.000000       0
50      0.000000       0
60      0.000000       0
17859   0.133333  0.009050
13159   0.066667  0.012195
9232    0.133333  0.012500
6131    0.066667  0.013333
7900    0.066667  0.014085
11671   0.066667  0.014925
20317   0.066667  0.014925
</code></pre>

<p>I want to keep the unique rows considering above data set keeping unique in my interpretation of unique would be:</p>

<pre><code>       precision  recall
1       0.000000       0
17859   0.133333  0.009050
13159   0.066667  0.012195
9232    0.133333  0.012500
6131    0.066667  0.013333
7900    0.066667  0.014085
20317   0.066667  0.014925
</code></pre>

<p>How can I convert my original data frame to obtain above unique rows?</p>

<p>I tried grouping approach:</p>

<pre><code>grouped = df.groupby(cols_to_consider)
index = [gp_keys[0] for gp_keys in grouped.groups.values()]
unique_df = df.reindex(index)
</code></pre>

<p>But didn't work.</p>",0,python|pandas|dataframe
30059515,Using mongoengine in Django. Cannot save instance of Document into database,"<p>I am trying to create new Document and save it to the database. The database in Mongo was created automatically, but no entries are saved. What I am trying to do in my code is the following: </p>

<pre><code>lesson = Lesson()
lesson.group = Group(group_name='KP-32')
lesson.teacher = Teacher(teacher_name='Vasia')
lesson.room = Room(room_number=32, building_number=323)
lesson.subject = Subject(subject_code=03321, subject_name='Math', hours=33)
lesson.save()
ls = []
for lesson in Lesson.objects:
    ls.append(lesson)
</code></pre>

<p>But as soon as I try to display ls, I receive in my view (displaying ls) only:
id  subject     teacher     group   room (names of references???) and nothing is stored into the db.
Hope to hear some solution for my problem and thanks in advance.</p>

<p><strong>Settings</strong></p>

<pre><code>DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.dummy',
    }
}
mongoengine.connect('jack', host='127.0.0.1', port=27017)

AUTHENTICATION_BACKENDS = (
    'mongoengine.django.auth.MongoEngineBackend',
)
SESSION_ENGINE = 'mongoengine.django.sessions'
</code></pre>

<p><strong>Models</strong>    </p>

<pre><code>from mongoengine import *

    class Room(EmbeddedDocument):
        room_number = IntField(default=0)
        building_number = IntField(default=0)
        capacity = IntField(default=0, required=False)

        def __unicode__(self):
            return smart_unicode(""Room #%d"" % self.room_number)


    class Teacher(EmbeddedDocument):
        teacher_name = StringField(max_length=60)
        phone = StringField(max_length=15, required=False)
        email = StringField(required=False)

        def __unicode__(self):
            return smart_unicode(self.teacher_name)


    class Subject(EmbeddedDocument):
        subject_code = IntField()
        subject_name = StringField(max_length=60)
        hours = IntField(required=False)

        def __unicode__(self):
            return smart_unicode(self.subject_name)


    class Group(EmbeddedDocument):
        group_name = StringField(max_length=20)
        specialization = StringField(max_length=60, required=False)
        student_count = IntField(required=False)

        def __unicode__(self):
            return smart_unicode(self.group_name)


    class Lesson(Document):
        subject = EmbeddedDocumentField(Subject)
        teacher = EmbeddedDocumentField(Teacher)
        group = EmbeddedDocumentField(Group)
        room = EmbeddedDocumentField(Room)
        attendance = IntField()

        def __unicode__(self):
            return smart_unicode(""Lesson #%d"" % self.id)
</code></pre>",1,python|django|mongodb|mongoengine
30063087,"ipython parallel client.map dramatically slower than python ""map""?","<p>I'm trying to understand why my load balanced view map statement takes 22 secs to execute on 2 cores rather than just 10 ms on one core using built-in map.  I understand that parallel work has an overhead associated with it, but that can't explain the extra 22 seconds.  What am I doing wrong? </p>

<p>I am running Python 2.7 on an Intel Core2Duo Mac. OS X.10.   </p>

<pre><code>In [4]: from IPython.parallel import Client

In [5]: rc = Client()

In [6]: lview = rc.load_balanced_view()

In [7]: lview.block = True

In [8]: %timeit map(lambda x:x**10, range(3000))
100 loops, best of 3: 9.91 ms per loop

In [9]: %timeit lview.map(lambda x:x**10, range(3000))
1 loops, best of 3: 22.8 s per loop
</code></pre>",0,python|parallel-processing|ipython
29988393,How to create egg file using pydev plugin in eclipse?,"<p>I have used pydev with eclipse and implemented a small python project with some external source folders. now I want to execute my code on the server. in java I used to just export my project to JAR file. </p>

<p>can you please advice me how to do so in python.</p>

<p>thanks</p>",1,python|eclipse|pydev|egg
30015692,Graphviz: edge to record label in Python (gv),"<p>I'm having a hard time generating the following edge:</p>

<pre><code>...
h1 -&gt; ""h2"":f2;
</code></pre>

<p>as shown in this example: <a href=""http://www.graphviz.org/content/datastruct"" rel=""nofollow"">datastruct</a> </p>

<p>Consider the following Python code:</p>

<pre><code>#!/usr/bin/env python

import sys
import gv

gh = gv.digraph('g')

gv.setv(gh, 'rankdir', ""LR"")

node = gv.protonode(gh)
gv.setv(node, 'shape', 'record')

n1 = gv.node(gh, ""h1"")

n2 = gv.node(gh, ""h2"")
gv.setv(n2, ""label"", ""&lt;f1&gt; s1 | &lt;f2&gt; s2"")

e = gv.edge(n1, n2)

gv.write(gh, ""out.dot"")
</code></pre>

<p>Which after execution gives the following output:</p>

<pre><code>digraph g {
    node [label=""\N""];
    graph [rankdir=LR];
    h1 [shape=record];
    h2 [label=""&lt;f1&gt; s1 | &lt;f2&gt; s2"", shape=record];
    h1 -&gt; h2;
}
</code></pre>

<p>Which leaves me with the question how to obtain the edge shown above so it points to the correct record entry.</p>

<p>Thanks in advance.</p>",2,python|graphviz
30136501,Python: joining two lists,"<p>How to combine two lists by alternatively taking elements. For example: given the two lists ['a','b','c'] and [1, 2, 3, 4], the function should return [a, 1, b, 2, c, 3, 4]</p>",0,python|list|python-2.7
30100830,Tox and django_toolbar: ImportError,"<p>When trying to use Tox to better streamline testing across multiple environments, I'm runing into the following error when testing for Python 3.4:</p>

<p><code>ImportError: No module named 'debug_toolbar'</code></p>

<p>However, <code>django-debug-toolbar==1.3.0</code> is listed in my <code>requirements.txt</code> file, and my <code>tox.ini</code> file looks as follows:</p>

<pre><code>[tox]
envlist = py27,py34
skipsdist = True

[testenv]
deps = -r{toxinidir}/requirements.txt
setenv =
    PYTHONPATH = {toxinidir}:{toxinidir}
commands = python manage.py test
</code></pre>

<p>It seems as if it is not properly installing the requirements.. Oddly enough, the py27 environment does not throw this error, and is able to perform the tests just fine.</p>

<p>What could be causing this?</p>

<p>EDIT: for reference, here's my current setup. When I run tox the first time (i.e. without .tox), it works fine, but any times after that it fails. The <code>.tox</code> directory does seem to get build up correctly; all dependencies are installed in <code>.tox/py34/lib/python3.4/site-packages</code>. Compared to earlier, I now also uninstalled <code>django</code>, and indeed that is now the first dependency that fails.</p>

<pre><code>(venv)joost@thorin:myproject/ (master) % rm -rf .tox
(venv)joost@thorin:myproject/ (master) % cat tox.ini
[tox]
envlist = py27,py34
skipsdist = True

[testenv]
deps = -r{toxinidir}/requirements.txt
commands = python manage.py test


(venv)joost@thorin:myproject/ (master) % tox
py27 create: /Users/Joost/myproject/.tox/py27
py27 installdeps: -r/Users/Joost/myproject/requirements.txt
py27 runtests: PYTHONHASHSEED='4248725049'
py27 runtests: commands[0] | python manage.py test
Creating test database for alias 'default'...
................
----------------------------------------------------------------------
Ran 16 tests in 0.093s

OK
Destroying test database for alias 'default'...
py34 create: /Users/Joost/myproject/.tox/py34
py34 installdeps: -r/Users/Joost/myproject/requirements.txt
py34 runtests: PYTHONHASHSEED='4248725049'
py34 runtests: commands[0] | python manage.py test
Creating test database for alias 'default'...
................
----------------------------------------------------------------------
Ran 16 tests in 0.093s

OK
Destroying test database for alias 'default'...
____________________________________________________________________ summary _____________________________________________________________________
  py27: commands succeeded
  py34: commands succeeded
  congratulations :)


(venv)joost@thorin:myproject/ (master) % tox
py27 runtests: PYTHONHASHSEED='3259360769'
py27 runtests: commands[0] | python manage.py test
Creating test database for alias 'default'...
................
----------------------------------------------------------------------
Ran 16 tests in 0.088s

OK
Destroying test database for alias 'default'...
py34 runtests: PYTHONHASHSEED='3259360769'
py34 runtests: commands[0] | python manage.py test
Traceback (most recent call last):
  File ""manage.py"", line 8, in &lt;module&gt;
    from django.core.management import execute_from_command_line
ImportError: No module named 'django'
ERROR: InvocationError: '/Users/Joost/myproject/.tox/py34/bin/python manage.py test'
____________________________________________________________________ summary _____________________________________________________________________
  py27: commands succeeded
ERROR:   py34: commands failed
(venv)joost@thorin:myproject/ (master) % 
</code></pre>",1,python|django|tox
29924997,PyQt5 Could not connect to display,"<p>to learn python I decided to make a small GUI that will interact with a web API. So without much thinking I created a virtual machine with Vagrant (ubuntu/trusty64) and installed PyQt5.
I made a small script to create a window (here it is)</p>

<pre><code>import sys
from PyQt5 import QtWidgets

app = QtWidgets.QApplication(sys.argv)

main_window = QtWidgets.QMainWindow()
main_window.show()

sys.exit(app.exec_())
</code></pre>

<p>When I executed my script I ended up with this error </p>

<blockquote>
  <p>QXcbConnection: Could not connect to display</p>
</blockquote>

<p>So I guess the problem comes from the fact that I'm using a virtual-machine without a display. Isn't there a way to make it use my Windows display just to render my program? Or do I need to install a VM with virtualbox?</p>

<p>Thanks for your time.</p>",0,python|vagrant|virtual-machine|pyqt5
30086936,What is the difference between the types <type 'numpy.string_'> and <type 'str'>?,<p>Is there a difference between the types <code>&lt;type 'numpy.string_'&gt;</code> and <code>&lt;type 'str'&gt;</code>?</p>,14,python|string|numpy|types
29878768,numerical value for an expression in sympy,"<p>sympy is giving me the following expression:</p>

<pre><code>2.8*x**2 - 4.0*x*Integral(1.0*x**2*sqrt(-x**2 + 1), (x, -1.0, 0.0)) + 1.33333333333333*x + 0.133333333333333
</code></pre>

<p>i want sympy to give me numerical values for the coefficients. how can i do this? .evalf and N() didn't work.</p>

<p>this is my code</p>

<pre><code>from numpy import *
from sympy import *
from matplotlib.pyplot import *

x = Symbol ('x')

#The function we are required to approximate
f1 = -1.0*x
f2 = 1.0*x


phi_0=1.0
phi_1 = 2.0*x
phi_2 = 4.0*x*x-1

w = 1.0*sqrt(1.0-x*x)

#compute the coefficient

c_0 = integrate(f1*phi_0*w, (x, -1.0, 0.0))+integrate(f2*phi_0, (x, 0.0, 1.0)) 
c_1 = integrate(f1*phi_1*w, (x, -1.0, 0.0))+integrate(f2*phi_1, (x, 0.0, 1.0)) 
c_2 = integrate(f1*phi_2*w, (x, -1.0, 0.0))+integrate(f2*phi_2, (x, 0.0, 1.0)) 

fapprox2 = c_0*phi_0+c_1*phi_1+c_2 *phi_2
</code></pre>",2,python|python-2.7|numpy|scipy|sympy
30175530,"Git P4 under Cygwin: Submit fails with ""Patch does not apply""","<p>I'm attempting to use git-p4 under Cygwin.  The ""clone"" and ""rebase"" parts of the workflow appear to be working correctly, but I am unable to ""submit"".  I'm guessing it may have something to do with a line-ending convention. I've looked at <a href=""https://stackoverflow.com/questions/15953609/git-p4-submit-fails"">this git-p4 issue</a> and its linked items, but manipulations of line-ending and whitespace configuration are so far unsuccessful. Items of note in my configuration:</p>

<p>(1) I'm using the bash shell function trick to get paths to work correctly:</p>

<pre><code>$ type p4
p4 is a function
p4 () 
{ 
    P4=`which p4`;
    PWD=$(cygpath -wa .) ""${P4}"" ""$@""
}
</code></pre>

<p>(2) I've tried all settings for git's <code>autocrlf</code> value -- result is failure regardless of (true,false,input). Currently attempting ""false"" as that makes the most sense when diff-ing against the depot.</p>

<p>(3) I've also played with the p4 clientspec's lineend values; currently attempting ""unix"", b/c of Cygwin and the P4 sandbox server running under OSX.</p>

<p>The test is simple.  The repo contains one file, foo1.  The depot version looks like (output using <code>od -c</code>):</p>

<pre><code>0000000   f   o   o   1  \n  \n
0000006
</code></pre>

<p>The locally-git-committed version looks like:</p>

<pre><code>0000000   f   o   o   1       i   s       t   h   e       o   n   e   !
0000020  \n  \n
0000022
</code></pre>

<p>I've added some additional diagnostic output to the <code>applyCommit()</code> method in git-p4. That in conjunction with running submit using --verbose:</p>

<pre><code> $ git p4 submit --verbose
 Reading pipe: git name-rev HEAD
 Reading pipe: ['git', 'config', 'git-p4.allowSubmit']
 Reading pipe: git rev-parse --symbolic --remotes
 Reading pipe: git rev-parse p4/master
 Reading pipe: git cat-file commit ce414288d1b5d52dbad20c1a29f1875cfff7c281
 Reading pipe: git cat-file commit HEAD~0
 Reading pipe: git cat-file commit HEAD~1
 Reading pipe: ['git', 'config', 'git-p4.conflict']
 Origin branch is remotes/p4/master
 Reading pipe: ['git', 'config', '--bool', 'git-p4.useclientspec']
 Opening pipe: ['p4', '-G', 'where', '//depot/foo/...']
 Perforce checkout for depot path //depot/foo/ located at c:\git\foo\
 Synchronizing p4 checkout...
 ... - file(s) up-to-date.
 Opening pipe: p4 -G opened ...
 Reading pipe: ['git', 'rev-list', '--no-merges', 'remotes/p4/master..master']
 Reading pipe: ['git', 'config', '--bool', 'git-p4.skipUserNameCheck']
 Reading pipe: ['git', 'config', 'git-p4.detectRenames']
 Reading pipe: ['git', 'config', 'git-p4.detectCopies']
 Reading pipe: ['git', 'config', '--bool', 'git-p4.detectCopiesHarder']
 Reading pipe: ['git', 'show', '-s', '--format=format:%h %s', '2303176ae8c575313616ae2c4a35358258742598']
 Applying 2303176 updating foo1
 Opening pipe: p4 -G users
 Reading pipe: ['git', 'log', '--max-count=1', '--format=%ae', '2303176ae8c575313616ae2c4a35358258742598']
 Reading pipe: git diff-tree -r  ""2303176ae8c575313616ae2c4a35358258742598^"" ""2303176ae8c575313616ae2c4a35358258742598""
 //depot/foo/foo1#1 - opened for edit
 Sanity: git diff-tree --full-index -p ""2303176ae8c575313616ae2c4a35358258742598"" | git apply --verbose --check -
 Checking patch foo1...
 error: while searching for:
 foo1


 error: patch failed: foo1:1
 error: foo1: patch does not apply
 Unfortunately applying the change failed!
 Reading pipe: ['git', 'config', '--bool', 'git-p4.attemptRCSCleanup']
 //depot/foo/foo1#1 - was edit, reverted
</code></pre>

<p>Note the ""Sanity:"" diagnostic line. This is the value of <code>tryPatchCmd</code> that fails within the <code>applyCommit()</code> method. If I execute the first part of the statement at the bash command line, I see:</p>

<pre><code> 2303176ae8c575313616ae2c4a35358258742598
 diff --git a/foo1 b/foo1
 index 630baf44b0874b3319c2814399f0b03106912183..4c23e4512b3347ec31068e464b64cbd99851cc9a 100644
 --- a/foo1
 +++ b/foo1
 @@ -1,2 +1,2 @@
 -foo1
 +foo1 is the one!
</code></pre>

<p>Piping this to the second part of the command results in no error.  I am perplexed as to why the command fails when executed using <code>os.system()</code> in the Python script but succeeds otherwise.  Thoughts?</p>",2,python|git|cygwin|git-p4
30027934,Pre-select parent item in many2one popup,"<p>Let's start with a basic One2many relation, a class <strong>Parent</strong> and a class <strong>Child</strong>.</p>

<p>Models :</p>

<pre><code>class Parent(models.Model):
    _name = 'module.parent'
    child_ids = fields.One2many('module.child', 'parent_id')

class Child(models.Model):
    _name = 'module.child'
    parent_id = fields.Many2one('module.parent')
</code></pre>

<p>Views :</p>

<pre><code>    &lt;record model=""ir.ui.view"" id=""parent_form_view""&gt;
        &lt;field name=""name""&gt;parent.form&lt;/field&gt;
        &lt;field name=""model""&gt;module.parent&lt;/field&gt;
        &lt;field name=""arch"" type=""xml""&gt;
            &lt;form string=""Parent Form""&gt;
                &lt;sheet&gt;
                   &lt;field name=""child_ids"" /&gt;
                &lt;/sheet&gt;
            &lt;/form&gt;
        &lt;/field&gt;
    &lt;/record&gt;

    &lt;record model=""ir.ui.view"" id=""child_form_view""&gt;
        &lt;field name=""name""&gt;child.form&lt;/field&gt;
        &lt;field name=""model""&gt;module.child&lt;/field&gt;
        &lt;field name=""arch"" type=""xml""&gt;
            &lt;form string=""Child Form""&gt;
                &lt;sheet&gt;
                   &lt;field name=""parent_id"" /&gt;
                &lt;/sheet&gt;
            &lt;/form&gt;
        &lt;/field&gt;
    &lt;/record&gt;
</code></pre>

<p>When I open a <strong>Parent</strong> form and try to create a new <strong>Child</strong> from the one2many popup, the <code>parent_id</code> field is not selected with the current open <strong>Parent</strong> from the window view !
I have to retrieve it in the <code>parent_id</code> selection field to re-select it.</p>

<p>Is there a way to do this autoselection ?</p>",0,python|openerp|odoo|many-to-one|openerp-8
30088630,Find page for a specific item in paginate() SQLAlchemy,"<p>I am usign Flask-SQLAlchemys <code>paginate()</code>. Now I need to find what is the page for a specific comment id.</p>

<p>For example, this will work, if I have all comments in the same page:</p>

<pre><code>new_dict['url'] = '/comments#comment_' + str(comment.id)
</code></pre>

<p>However in my case I need this structure:</p>

<pre><code>/comments?page=1#comment_73
</code></pre>

<p>How can I find what is the page?</p>",0,python|flask|pagination|sqlalchemy|flask-sqlalchemy
30118944,How to run bash script with commands in tests in vagrant?,"<p>Running commands or script lines with simple tests, like <code>-e</code>, in <code>vagrant</code> using the <code>ssh</code> subcommand works fine (e.g. </p>

<pre><code>vagrant ssh -c 'if ! [ -e file.deb ] ; then wget http://a.b/file.deb; fi'
</code></pre>

<p>as soon as string comparison and command execution <code>bash</code> quoting gets involved, complexity immediately rises to the sky. I tried </p>

<ul>
<li>escaping strings, but that doesn't seem to work in general (complexity of escaping of escaping of escaping ... in <code>bash</code> is just inacceptable)</li>
<li><p>writing everything in a script file with <code>cat &lt;&lt;EOF &gt; file [code]EOF</code> idiom, e.g.</p>

<pre><code>vagrant ssh -c 'cat &lt;&lt;EOF &gt; fetch.sh \
#!/bin/bash \
if [ ""$(md5sum file.deb | cut -d \"" \"" -f 1)"" != ""d757d51819f8f945ae7715b532ab8d2e"" ] ; then wget http://a/b/file.deb; fi \
EOF'
vagrant ssh -c 'bash ./fetch.sh'
</code></pre>

<p>causes <code>./fetch.sh: line 1: syntax error near unexpected token `if'
</code></p></li>
<li>the failure of the <code>cat EOF</code> idiom implies failure of any sort of script created in <code>vagrant</code> (<code>python</code>, <code>groovy</code>, etc. would suffer from the same incapacity of <code>bash</code> to provide usable string quoting/be usable at all)</li>
</ul>

<p>Is there any way to execute script code with complex statements in tests inside a <code>vagrant</code> box? Do I seriously need to transfer the script via the localhost interface (using FTP or something similar)?</p>",1,python|linux|bash|vagrant
29803935,How may I create list of lists in Python to store list of texts?,"<p>I am trying to open a bunch of files from a directory and trying to put the results in list of lists that is to say,</p>

<p>that is to say, 
I have a list of file names of a directory, I want to read each one of them. 
After reading each one of them, I want to put the results of each file in a list. 
These lists would again be inserted to create a list of lists.</p>

<p>to do this I am trying to write it as follows:</p>

<pre><code>list_of_files = glob.glob('C:\Python27\*.*')
    print list_of_files
    list1=[]
    list2=[]
    list_N=[list1,list2]
    for i,j in zip(list_of_files,list_N):
        print i,j
        x1=open(i,""r"").read()
        x2=j.append(x1)
    all_sent=list_N
    print all_sent
</code></pre>

<p>Am I doing anything wrong? If any one may kindly suggest?
Is there any smarter way to do it? I am using Python2.7 on Windows 7 Professional edition. 
You have many list of lists question in Python I have generally
reviewed them. I am posting as I did not match. Apology for
cross posting. If you may direct me to a previous post, I 
would surely delete my post. </p>",0,python|python-2.7
29985859,python: scipy.spatial: draw a convex polygon and calculate the area,"<p>I am using python. Now I have some coordinates (earth plane coordinates) and I want to draw a convex polygon based on these coordinates. Besides, I need to save the polygon into a GeoJSON format and calculate the polygon area. </p>

<p>I heard that scipy.spatial can do this but I have no idea how to do that, besides, how to extract the polygon coordinates and calculate the area on earth?</p>

<p>Thanks </p>",3,python|scipy|area|convex-hull
30168126,user registration in django rest framework,"<p>I am creating a server side for android application in DRF which will require user registration and login\logout endpoints. also obviously different permissions when a user logged in.</p>

<p>I followed the rest framework tutorial here - <a href=""http://www.django-rest-framework.org/tutorial/1-serialization/"" rel=""nofollow noreferrer"">http://www.django-rest-framework.org/tutorial/1-serialization/</a> and this example really seeme to cover it all beside the user registration (creation).</p>

<p>In the tutorial they do it from the command line (and they create a superuser). I think the tutorial example is really good for my needs besides not having the registration endpoint.</p>

<p><strong>My question are:</strong></p>

<ul>
<li>what is the difference between a regular user and a superuser?</li>
<li>How should I create a registration endpoint for users? I saw this example <a href=""https://stackoverflow.com/questions/30085996/djangorestframework-registering-a-user-difference-between-userserializer-save"">DjangoRestFramework - registering a user: difference between UserSerializer.save() and User.objects.create_user()?</a> but I am not sure if it will work nicely because in the tutorial they create a superuser. </li>
</ul>

<p>If it matters, my user model in actually a UserProfile model which includes the user model and added a phone_number...</p>

<p>Thanks a lot!</p>",0,android|python|django|rest|django-rest-framework
29829043,Custom button PyQT4,"<p>I'm having trouble displaying a button that I create from a class in PyQt4, using Python 2.7. My project has 80 buttons that all require a drag and drop function. I've created a button class that allows this, but I'm unsure as to how to display it within <code>Ui_Form</code>. </p>

<p>I don't think I can use a layout manager as I want a background image so I assume I need to create the button from the Button class using the <code>Form</code> argument from <code>Ui_Form</code>'s <code>setupUi</code> function, but I'm insure as to how. </p>

<p>Below is an example of the script with only two buttons (and a screenshot)- one called from my class and one just as QT Designer left it. The button <code>btn_a1</code> should be visible to the left of <code>btn_a2</code>, but it isn't (due to not knowing how to properly call it). I've removed the code for the labels and functionality of the buttons to help with ease of use.</p>

<pre><code>import sys
from PyQt4 import QtCore, QtGui

class Ui_Form(QtGui.QWidget):
    def __init__(self):
        QtGui.QWidget.__init__(self)
        self.setupUi(self)

    def setupUi(self, Form):
        Form.setObjectName(""Form"")
        Form.resize(591, 591)
        self.Background = QtGui.QLabel(Form)
        self.Background.setGeometry(QtCore.QRect(0, 0, 631, 591))
        self.Background.setPixmap(QtGui.QPixmap(""Python/LP_Proj/LP_Background.png""))
        self.Background.setObjectName(""Background"")

        self.btn_a1 = Button(Form)

        self.btn_a2 = QtGui.QPushButton(Form)
        self.btn_a2.setGeometry(QtCore.QRect(90, 40, 41, 41))
        self.btn_a2.setObjectName(""btn_a2"")

        self.retranslateUi(Form)
        QtCore.QMetaObject.connectSlotsByName(Form)

    def retranslateUi(self, Form):
        Form.setWindowTitle(QtGui.QApplication.translate(""Form"", ""Launchpad Control"", None, QtGui.QApplication.UnicodeUTF8))

class Button(QtGui.QPushButton):
    def __init__(self, Form):
        super(Button, self).__init__()
        self.setAcceptDrops(True)

        self.setGeometry(QtCore.QRect(30, 40, 41, 41))
        self.setObjectName(""btn_a1"")

if __name__=='__main__':
    app = QtGui.QApplication(sys.argv)
    ex = Ui_Form()
    ex.show()
    sys.exit(app.exec_())
</code></pre>

<p><img src=""https://i.stack.imgur.com/2vs2t.png"" alt=""Example of button""></p>",0,python|qt|pyqt|qt4|pyqt4
29990224,How to get a string from the tkinter filedialog in Python 3?,"<p>I'm attempting to use the tkinter <code>filedialog</code> to get the user's choice of a file in my Python 3.4 program.</p>

<p>Previously, I was trying to use the Gtk FileChooserDialog, but I keep running into wall after wall getting it to work (<a href=""https://stackoverflow.com/questions/29980352/how-to-hide-a-gtk-filechooserdialog-in-python-3-4"">here's my question about that</a>.) So, I (<em>attempted to</em>) switched over to tkinter and use the filedialog.</p>

<p>Here's the code I'm using for the GUI:</p>

<pre><code>import tkinter
from tkinter import filedialog

root = tkinter.Tk()
root.withdraw()

path = filedialog.askopenfile()

print(type(path)) # &lt;- Not actually in the code, but I've included it to show the type
</code></pre>

<p>It works perfectly, except for the fact that it returns an <code>&lt;class '_io.TextIOWrapper'&gt;</code> object instead of a string, like I expected/need it to.</p>

<p>Calling <code>str()</code> on that doesn't work, and neither does using the <code>io</code> module function <code>getvalue()</code>.</p>

<p>Does anyone know how I could get the chosen file path as a string from the <code>filedialog.askopenfile()</code> function?</p>",1,python|user-interface|tkinter
30049285,"REQUESTS: Return file object from url (as with open('','rb') )","<p>I want to download a file straight into memory using <code>requests</code> in order to pass it directly to <code>PyPDF2</code> reader avoiding writing it to disk, but I can't figure out how to pass it as a <code>file object</code>. Here's what I've tried:</p>

<pre><code>import requests as req
from PyPDF2 import PdfFileReader

r_file = req.get('http://www.location.come/somefile.pdf')
rs_file = req.get('http://www.location.come/somefile.pdf', stream=True)

with open('/location/somefile.pdf', 'wb') as f:
    for chunk in r_file.iter_content():
        f.write(chunk)

local_file = open('/location/somefile.pdf', 'rb')

#Works:
pdf = PdfFileReader(local_file)

#As expected, these don't work:
pdf = PdfFileReader(rs_file)
pdf = PdfFileReader(r_file)
pdf = PdfFileReader(rs_file.content)
pdf = PdfFileReader(r_file.content)
pdf = PdfFileReader(rs_file.raw)
pdf = PdfFileReader(r_file.raw)
</code></pre>",10,python|file|download|python-requests|pypdf
30108923,"In matplotlib, what's the difference between title() and suptitle()?","<p>I created 3 subplots using <code>subplot()</code>. Now I'd like to add titles for each subplot. Which one of <code>title()</code> and <code>suptitle()</code> shall I use?</p>

<p>In general, what is the difference between them? Thanks!</p>",8,python|matplotlib
29830627,How to install scikit-image? (Windows - Python 3.4),"<p>I am working on a program that can identify objects, part of a much larger project for school. I have managed to convert these objects into white blobs on a black background, and need a way of detecting blobs (more than just one at a time) and storing a list of blob locations.</p>

<p>Originally I was going to try and write a function that would do this, but I realized that there are many modules that already can, and scikit-image appeared the best for it, and I did consider SimpleCV as well. However, I am having trouble installing either of them.</p>

<p>When I run the command</p>

<pre><code>pip install scikit-image
</code></pre>

<p>It starts installing, but then I recieve an error:</p>

<pre><code>    Command ""C:\Python34\python.exe -c ""import setuptools, tokenize;__file__='C:
\\Users\\USERNAME\\AppData\\Local\\Temp\\pip-build-6gpq3qdv\\scikit-image\\setup.
py';exec(compile(getattr(tokenize, 'open', open)(__file__).read().replace('\r\n'
, '\n'), __file__, 'exec'))"" install --record C:\Users\USERNAME\AppData\Local\Tem
p\pip-3kmnznpy-record\install-record.txt --single-version-externally-managed --c
ompile"" failed with error code 1 in C:\Users\USERNAME\AppData\Local\Temp\pip-buil
d-6gpq3qdv\scikit-image
</code></pre>

<p>I did try to install SimpleCV, however that requires OpenCV which is not compatible with Python 3.4 (I have to use 3.4 since it is part of a school project and my friends who are also working on it with 3.4 and it needs to be compatible)</p>

<p>Anybody know of why this is not working? If not, is there a library that can do the blob detection, installs correctly on Windows and is compatible with 3.4? Thanks.</p>",4,python|image|module|simplecv
29829352,Cannot Import Name (model),"<p>I am getting the error message above, more specifically ""ImportError at /ops_page/create"" ""cannot import name ops_page."" Basically, I have an app titled ""ops_page"" and I cannot seem to get the newly created url, ""/ops_page/create"" which should contain a form corresponding to the model within ""ops_page."" I have looked at similar threads, and have tried deleting .pyc files in the ops_page app as well as the root directory, as well as deleting the sqlite db and re-syncing/migrating. Any idea what the issue might be here?</p>

<p>My base urls.py:</p>

<pre><code>urlpatterns = patterns('',
    .
    .
    url(r'^ops_page/', include('ops_page.urls')),
    .
    .
)
</code></pre>

<p>My ops_page urls.py:</p>

<pre><code>urlpatterns = patterns('',
    url(r'^create/$', 'ops_page.views.create'),
)
</code></pre>

<p>My ops_page models.py:</p>

<pre><code>from django.db import models
from django.conf import settings
import os.path



class OpsPageInfo(models.Model):
        campaign_name = models.CharField(max_length=100, unique=True, blank=True)
        campaign_pic = models.ImageField(upload_to=""images/opspage_pics"")
        description_header = models.CharField(max_length=100, blank=True)
        campaign_description = models.CharField(max_length=600, blank=True)
        goal = models.CharField(max_length=100, blank=True)
        perk_header1 = models.CharField(max_length=100, blank=True)
        perk_description1 = models.CharField(max_length=600, blank=True)


        def __unicode__(self):
                return self.campaign_name
</code></pre>

<p>My ops_page views.py:</p>

<pre><code>from django.shortcuts import render_to_response
from ops_page.models import OpsPageInfo
from django.http import HttpResponse
from forms import OpsPageForm
from django.http import HttpResponseRedirect


def create(request):
    if request.POST:
        form = OpsPageForm(request.POST)
        if form.is_valid():
            form.save()


            return HttpResponseRedirect('/artist_donation/')

    else:
        form = OpsPageForm()

    args = {}
    args.update(csrf(request))

    args['form'] = form

    return render_to_response('create_opspage.html', args)
</code></pre>

<p>My ops_page forms.py:</p>

<pre><code>from django import forms
from models import ops_page


class OpsPageForm(forms.ModelForm):

    class Meta:
        model = ops_page
</code></pre>

<p>The create_opspage.html form:</p>

<pre><code>            {% block content %}
            &lt;form action=""/ops_page/create/"" method=""post""&gt;{% csrf_token %}
                &lt;ul&gt;
                {{ form.as_ul }}
                &lt;/ul&gt;

                &lt;input type=""submit"" name=""submit"" value=""Create Ops Page""&gt;
            &lt;/form&gt;
            {% endblock %}
</code></pre>

<p>And lastly, the traceback for my error:</p>

<pre><code>Environment:


Request Method: GET
Request URL: http://127.0.0.1:8000/ops_page/create

Django Version: 1.7.5
Python Version: 2.7.5
Installed Applications:
('django.contrib.admin',
 'django.contrib.auth',
 'django.contrib.contenttypes',
 'django.contrib.sessions',
 'django.contrib.messages',
 'django.contrib.staticfiles',
 'django.contrib.humanize',
 'band',
 'friend',
 'registration',
 'music',
 'audiofield',
 'user_profile',
 'social.apps.django_app.default',
 'directory',
 'youtube_urls',
 'ops_page')
Installed Middleware:
('django.contrib.sessions.middleware.SessionMiddleware',
 'django.middleware.common.CommonMiddleware',
 'django.middleware.csrf.CsrfViewMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'django.contrib.auth.middleware.SessionAuthenticationMiddleware',
 'django.contrib.messages.middleware.MessageMiddleware',
 'django.middleware.clickjacking.XFrameOptionsMiddleware',
 'audiofield.middleware.threadlocals.ThreadLocals')


Traceback:
File ""/Library/Python/2.7/site-packages/Django-1.7.5-py2.7.egg/django/core/handlers/base.py"" in get_response
  87.                 response = middleware_method(request)
File ""/Library/Python/2.7/site-packages/Django-1.7.5-py2.7.egg/django/middleware/common.py"" in process_request
  73.                     urlresolvers.is_valid_path(""%s/"" % request.path_info, urlconf)):
File ""/Library/Python/2.7/site-packages/Django-1.7.5-py2.7.egg/django/core/urlresolvers.py"" in is_valid_path
  619.         resolve(path, urlconf)
File ""/Library/Python/2.7/site-packages/Django-1.7.5-py2.7.egg/django/core/urlresolvers.py"" in resolve
  494.     return get_resolver(urlconf).resolve(path)
File ""/Library/Python/2.7/site-packages/Django-1.7.5-py2.7.egg/django/core/urlresolvers.py"" in resolve
  345.                     sub_match = pattern.resolve(new_path)
File ""/Library/Python/2.7/site-packages/Django-1.7.5-py2.7.egg/django/core/urlresolvers.py"" in resolve
  345.                     sub_match = pattern.resolve(new_path)
File ""/Library/Python/2.7/site-packages/Django-1.7.5-py2.7.egg/django/core/urlresolvers.py"" in resolve
  224.             return ResolverMatch(self.callback, args, kwargs, self.name)
File ""/Library/Python/2.7/site-packages/Django-1.7.5-py2.7.egg/django/core/urlresolvers.py"" in callback
  231.         self._callback = get_callable(self._callback_str)
File ""/Library/Python/2.7/site-packages/Django-1.7.5-py2.7.egg/django/utils/lru_cache.py"" in wrapper
  101.                     result = user_function(*args, **kwds)
File ""/Library/Python/2.7/site-packages/Django-1.7.5-py2.7.egg/django/core/urlresolvers.py"" in get_callable
  97.             mod = import_module(mod_name)
File ""/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/importlib/__init__.py"" in import_module
  37.     __import__(name)
File ""/Users/sethjones/Desktop/atmos_v6/ops_page/views.py"" in &lt;module&gt;
  4. from forms import OpsPageForm
File ""/Users/sethjones/Desktop/atmos_v6/ops_page/forms.py"" in &lt;module&gt;
  2. from models import ops_page

Exception Type: ImportError at /ops_page/create
Exception Value: cannot import name ops_page
</code></pre>

<p>I am relatively new to django, so it could be an error in my syntax or I didn't map things correctly. Any help would be greatly appreciated. Thank you. </p>",1,python|django|url|importerror
29838808,"SQL query in python script, how to get quotes around a parameter?","<p>I need to rewrite the php script that handles a POST request and queries a SQLite3 database into python. The Query now looks like this</p>

<pre><code>cursor.execute(""SELECT * from ""+requestedProgram+"" WHERE start LIKE ? ORDER BY start"", (requestedDate,))
</code></pre>

<p>the first part until the <em>WHERE</em> condition works (it is not elegant but unfortunately it seems that table names cannot be parametrized). </p>

<p>However, I need to put quotes around the requestedDate string in order to make <em>LIKE</em> work. How do I get quotes around the parameter/variable?</p>

<p>On another note: does the <em>ORDER BY</em> statement even do anything considering the nature of the cursor?</p>",1,python|sql|sqlite
29926524,Django many-to-many return list of releated objects,"<p>I have a many to many relationship between model Stuff and model Thing.  When Stuff is converted to a string I would like to return a list of things that make it up.</p>

<pre><code>class Thing(models.Model):
    name = models.CharField(max_length=50)

class Stuff(models.Model):
    things = models.ManyToManyField(Thing)

    def __str__(self):
        # Return comma delimited list of things that are related to self
</code></pre>

<p>I've seen a lot of many to many problems that are solved by using <code>stuff.thing.all()</code>.  If I use <code>.get()</code> on thing how do I filter for Stuff's id?</p>",0,python|django|django-models
30196503,2D plots are not sitting flush against 3D-axis walls in python mplot3D,"<p>I'm attempting to plot 2D data onto a 3D axis.
I have the 3D shape working using <code>ax.plot_surface</code> but I'm unable to get the 2D data to sit flush against the axis walls using <code>ax.plot</code>.</p>

<p>Here is a stripped down example code showing the issue I'm having with the 2D data:</p>

<pre><code>import matplotlib.pyplot as plt
from mpl_toolkits.mplot3d import Axes3D

# Generate Example Data
x = [0.04,0,-0.04]
y = [0.04,0,-0.04]
z = [0.04,0,-0.04]

# Start plotting environment
fig = plt.figure()
ax = fig.add_subplot(111, projection='3d')

# Plot 3 lines positioned against the axes ""walls""
ax.plot(x,y,-0.08,zdir='z',c='r')
ax.plot(x,z, 0.08,zdir='y',c='g')
ax.plot(y,z,-0.08,zdir='x',c='b')

# Label each axis
ax.set_xlabel('x')
ax.set_ylabel('y')
ax.set_zlabel('z')

# Set each axis limits
ax.set_xlim([-0.08,0.08])
ax.set_ylim([-0.08,0.08]) 
ax.set_zlim([-0.08,0.08]) 

# Equally stretch all axes
ax.set_aspect(""equal"")

# Set plot size for saving to disk
plt.gcf().set_size_inches(11.7,8.3) 

# Save figure in .eps and .png format
plt.savefig('test.eps', format='eps')
plt.savefig('test.png', format='png', dpi=300)

# Display figure
plt.show()
</code></pre>

<p>This gives the following result from which you might be able to see that the ends of the data lines don't sit on the axis lines (ie. don't line up with 0.04 and -0.04): <img src=""https://i.stack.imgur.com/qkApe.png"" alt=""Figure showing offset of data to axis walls""></p>

<p>By interactively exploring the plot I determined that changing the 0.08's in the <code>ax.plot</code> calls, to a magnitude of 0.083 (while keeping the relevant signs) allows the plots to fit much flatter to the wall.</p>

<p>My interpretation of this is that the plot isn't enforcing my axis limits which appears evident on the plot by looking at the spacings where the axes meet, but using <code>ax.get_xlim()</code> etc, shows the values that I set so I'm missing something.</p>

<p>Any ideas on how I can get these plots to sit flush against the walls?</p>

<p>Many Thanks,</p>

<p>Tim</p>

<p><strong>Edit:</strong></p>

<p>I've also attempted to set the axis limits using</p>

<pre><code>ax.set_xlim3d(-0.08,0.08)
ax.set_ylim3d(-0.08,0.08) 
ax.set_zlim3d(-0.08,0.08) 
</code></pre>

<p>and</p>

<pre><code> ax.set_xlim3d([-0.08,0.08])
 ax.set_ylim3d([-0.08,0.08]) 
 ax.set_zlim3d([-0.08,0.08])
</code></pre>

<p>without any luck.</p>

<p>I'm definitely leaning towards attributing this to a padding issue where the axes meet but I'm unable to find any documentation regarding this.
ie. I'm setting the plot position to -0.08 and the axis limit to -0.08 but the plot is adding a little padding at the end to make the limits somewhere between -0.082 and -0.083.</p>

<p>I either want to remove the padding or get the padding value so that I can input it into <code>ax.plot</code> command.</p>

<p><strong>Edit2:</strong></p>

<p>Somebody else who has encountered this issue but hasn't had the issue resolved
<a href=""https://stackoverflow.com/questions/25265705/changing-the-position-of-the-grid-walls-in-an-mplot3d-figure"">Changing the position of the grid walls in an mplot3d figure</a></p>",10,python|python-2.7|matplotlib|mplot3d
29757391,"How to specify an ""upload to"" path in a Form File Field in Django?","<p>I'm not using a Model for this form, I know I can set the upload_to parameter inside a Model File Field, but seems not possible from the Form.</p>

<p>When I set the FileField the file is uploaded to the MEDIA_ROOT I setup on my settings. Although, I would like the file uploaded to /folder. Is it possible directly from the Form File Field or I must move the file manually?</p>",1,python|django|django-forms
29881965,Tkinter window not opening,"<p>I was trying to create a simple moving block using tkinter in Python 3, and everything was working until I imported time. The window now won't open. I've tried removing the import, and it doesn't help. This is my code:</p>

<pre><code>from tkinter import *
import time

canvas_height = 400
canvas_width = 600
canvas_colour = ""grey50""
moveBoolean = ""True""

def move():
    global moveBoolean
    while moveBoolean == ""True"":
        time.sleep(0.005)
        canvas.move(square, 90, 90)
        time.sleep(0.005)
        canvas.move(square, 180, 180)
        time.sleep(0.005)
        canvas.move(square, 50, 100)

window = Tk()

canvas = Canvas(bg=canvas_colour, height=canvas_height, width=canvas_width, highlightthickness=0)
canvas.pack()

square = canvas.create_rectangle(50, 50, 50, 50, width=50, fill=""black"")

move()

window.mainloop()
</code></pre>",1,python|tkinter
29837563,What is the difference between models.ldamodel.LdaModel and models.LdaModel?,"<p>What is the difference between 
<code>gensim.models.ldamodel.LdaModel(...)</code> and <code>gensim.models.LdaModel(...)</code>?</p>

<p>The <a href=""https://radimrehurek.com/gensim/models/ldamodel.html"" rel=""nofollow"">docs</a> use <code>gensim.models.ldamodel.LdaModel(...)</code>.</p>

<p>However, <a href=""https://www.google.com/search?q=%22models.LdaModel%22&amp;oq=%22models.LdaModel%22&amp;aqs=chrome..69i57j0.9506j0j7&amp;sourceid=chrome&amp;es_sm=119&amp;ie=UTF-8#q=%22models.LdaModel(corpus%22&amp;tbas=0"" rel=""nofollow"">many people</a> seem to use <code>gensim.models.LdaModel(...)</code>.</p>",1,python|lda|gensim
29890191,"numpy reshape: incompatible array size, when array grows too big?","<p>I have the following code:  </p>

<pre><code>n=1000  
dset=np.fromfile(f,dtype='uint16',count=np.int64(n*dim_x*dim_y*dim_z*dim_c)
dset=np.reshape(dset,np.int64([n,dim_z,dim_y,dim_x,dim_c]))
</code></pre>

<p>sizes are like</p>

<pre><code>print dim_x,dim_y,dim_z,dim_c
1536 800 7 1
</code></pre>

<p>The code works fine with n=500 , but with n=1000 I get</p>

<blockquote>
  <p>C:\Users\maximih\AppData\Local\WinPython-64bit-2.7.9.4\python->2.7.9.amd64\lib\site-packages\numpy\core\fromnumeric.pyc in reshape(a, >newshape, order)<br>
     219     except AttributeError:<br>
     220         return _wrapit(a, 'reshape', newshape, order=order)<br>
  --> 221     return reshape(newshape, order=order)<br>
     222<br>
     223 </p>
  
  <p>ValueError: total size of new array must be unchanged</p>
</blockquote>

<p>I originally posted this as an issue on github, but closed, because I am unsure.... someone suggested to upgrade numpy but I am allready using '1.9.2'</p>

<p>I suggest that this is an overflow of some np.prod call. This function does indeed overflow , i tested it, thats why I tried to explicitly cast the product as int64....
Any suggestions?</p>

<p>Thanks
Max</p>",2,python-2.7|numpy|casting|reshape
30042611,Getting average of distinct list values,"<p>I have 4k values in list created from first col of this dataset (<a href=""https://gist.github.com/karimkhanp/1692f1f76718c35e939f"" rel=""nofollow"">link</a>):</p>

<pre><code>11 1
19 1
42 2
16 1
63 3
14 1
11 1
83 4
63 3
11 1
13 1
17 1
92 4
11 2
86 2 
</code></pre>

<p>and so on</p>

<p>I want to convert first column in distinct list along with average value of it's corresonding 2nd value.</p>

<p>Approach 1: looping through last line and checking condition if similar value then increment count and add value in 2nd col. At the end divide by count</p>

<p>Apprach 2: convert col1 into list</p>

<p><code>col1 = list(set(col1))</code> which will give distinct values for <code>col1</code> but how do I get average of 2nd col for each distinct value in first col?</p>",0,python|list
30079630,"How to simulate a ""lock timeout"" error with Django on MySQL","<p>What's the easiest way to simulate a ""lock timeout"" DatabaseError with Django using the MySQL backend?</p>

<p>I have a piece of code, that operates over large querysets, and occasionally it throws the exception:</p>

<pre><code> DatabaseError: (1205, 'Lock wait timeout exceeded; try restarting transaction')
</code></pre>

<p>I understand what causes this and how to fix it, but I'm not sure how to test my fix since the error only happens in a production environment where several users are accessing certain tables simultaneously.</p>

<p>I first tried to run <a href=""http://shiningpanda.com/mysql-table-lock-django.html"" rel=""nofollow"">some sample code</a> in a separate process to make Django apply a lock in MySQL, and while it does seem to lock the target table and make all other requests wait, a lock timeout never occurs when I test on my localhost with runserver. I let it run for 20 minutes without a timeout occurring.</p>",0,python|mysql|django|django-orm|database-locking
29971071,XML to Postgres via python/psycopg2,"<p>I have an existing python script that loops through a directory of XML files parsing each file using etree, and inserting data at different points into a Postgres database schema using psycopg2 module.  This hacked together script worked just fine but now the amount of data (number and size of XML files) is growing rapidly, and the number of INSERT statements is just not scaling. The largest table in my final database has grown to about ~50 million records from about 200,000 XML files. So my question is, what is the most efficient way to:</p>

<ol>
<li>Parse data out of XMLs</li>
<li>Assemble row(s)</li>
<li>Insert row(s) to Postgres</li>
</ol>

<p>Would it be faster to write all the data to a CSV in the correct format and then bulk load the final CSV tables to Postgres using COPY_FROM command?  </p>

<p>Otherwise I was thinking about populating some sort of temporary data structure in memory that I could insert into the DB once it reaches a certain size?  I am just having trouble arriving at the specifics of how this would work.  </p>

<p>Thanks for any insight on this topic, and please let me know if more information is needed to answer my question.</p>",2,python|xml|postgresql|csv
30146396,python: finding the value of a random variable for a cdf,"<p>I apologize in advance if this is poorly worded. </p>

<p>If I have a stdDev = 1, mean = 0, <code>scipy.stats.cdf(-1, loc = 0, scale = 1)</code> will give me the probability that a normally distributed random variable will be <code>&lt;= -1</code>, and that is <code>0.15865525393145707</code>. </p>

<p>Given 0.15865..., how do I find the value that gives me -1? </p>

<p>i.e.  <code>value(cdf = 0.15865, loc = 0, scale = 1)</code> </p>

<p>Thanks for the help. </p>",2,python|statistics|scipy|normal-distribution|cdf
29754562,PySpark Broadcast Variable Join,"<p>I am performing a join, and I have my data across over 100 nodes. So I have a small list of key/value that I am joining with another key/value pair. </p>

<p>My list looks like such:</p>

<pre><code>[[1, 0], [2, 0], [3, 0], [4, 0], [5, 0], [6, 0], [7, 0], [8, 0], [9, 0], [10, 0], [11, 0], [16, 0], [18, 0], [19, 0], [20, 0], [21, 0], [22, 0], [23, 0], [24, 0], [25, 0], [26, 0], [27, 0], [28, 0], [29, 0], [36, 0], [37, 0], [38, 0], [39, 0], [40, 0], [41, 0], [42, 0], [44, 0], [46, 0]]
</code></pre>

<p>I have broadcast variable:</p>

<pre><code>numB = sc.broadcast(numValuesKV)
</code></pre>

<p>When I do my join: </p>

<pre><code>numRDD = columnRDD.join(numB.value)
</code></pre>

<p>I get the following error:</p>

<pre><code>AttributeError: 'list' object has no attribute 'map'
</code></pre>",3,python|apache-spark|pyspark
29981393,How to pause and resume Python threading.Timer,"<p>In python, <code>threading.Timer</code> works fine to execute a function after sometime. But there is no pause or resume feature. Is there any other way to do it?</p>

<p>Something like this is required.</p>

<pre><code>from threading import Timer
from time import sleep
def Hello():
    print ""hello""
t=Timer(10, Hello)
t.start()
sleep(3)
### &lt;Pause Timer t&gt;
### &lt;do some work&gt;
### &lt;Resume Timer t&gt;
</code></pre>

<p>It would also be helpful if it is known for how much time the Timer has started or how much time is left. So the above can be done something like this:</p>

<pre><code>### x =  Time passed by Timer t
### t.cancel()
### &lt;do some work&gt;
### t=Timer(10-x, Hello)
### t.start()
</code></pre>

<p><strong>Edit 1:</strong></p>

<p>This is my code after the answer by vitaut:</p>

<pre><code>## My Timer Class ##

from threading import Timer as threadTimer
from time import time, sleep
from random import randint as rint

class MyTimer:

    def __init__(self, key, delete):
        self.startTime = time()
        self.timer = threadTimer(15, delete, args=[key])
        self.timer.start()
    def pause(self):
        self.timer.cancel()
        self.endTime = time()
    def resume(self, delete, key):
        self.timer = threadTimer(15-(self.endTime-self.startTime), delete, args=[key])
        self.timer.start()
    def cancel(self):
        self.timer.cancel()
</code></pre>

<p>I'm using this code for testing:</p>

<pre><code>class MyClass:

    def __init__(self):
        self.dict={}

    def delete(self, key):
        print key, time()-self.dict[key][""stime""]
        self.dict[key][""timer""]=None
        self.dict[key]=None
        del self.dict[key]

    def doSomeWork(self, key):
        for i in xrange(10):
            x=str(rint(0,3))
            if self.dict.has_key(key):
                self.dict[key][""timer""].pause()
                print key,
                sleep(1)
                self.dict[key][""timer""].resume(self.delete, key)
        print

    def createDict(self):
        print ""Pausing Timer for 1 second for "",
        for i in xrange(10):
            self.dict[i]={}
            self.dict[i][""timer""]=MyTimer(key, self.delete)
            self.dict[i][""stime""]=time()

x=MyClass()
x.createDict()
x.doSomeWork()
</code></pre>

<p>The Output:</p>

<pre><code>Pausing Timer for 1 second for  0 1 0 2 1 0 2 1 1 0
3 15.0000641346
4 15.0000319481
5 15.0000360012
6 15.0000460148
7 15.0002529621
8 15.0000050068
9 15.0001029968
0 16.000754118
2 16.0007479191
1 16.0011930466
</code></pre>

<p>Since it's pausing the Timer with key 1 for 4 times each for 1 seconds. So the final time for 1 should be 19+ seconds (Expected). But it's showing 16 only.</p>",1,python|multithreading|timer
29757367,How to install git source in requirements.txt?,"<p>I have this code in requirements.txt But i remember that using this method i install but this time I got error only ...</p>

<pre><code>static3==0.5.1
Twisted==15.0.0
urllib3==1.10.2
w3lib==1.11.0
zope.interface==4.1.2
pip install git+https://github.com/leonardoo/django-dropbox
</code></pre>

<p>I got the error when I do like this...</p>

<pre><code>File ""/app/.heroku/python/lib/python2.7/site-packages/pip-6.0.6-py2.7.egg/pip/_vendor/pkg_resources/__init__.py"", line 2785, in scan_list
remote:            raise ValueError(msg, line, ""at"", line[p:])
remote:        ValueError: ('Expected version spec in', 'pip install git+https://github.com/rajasimon/python-twitter', 'at', ' install git+https://github.com/rajasimon/python-twitter')
</code></pre>",3,python|django|heroku|github|pip
30189429,Django: How to access test database?,"<p>I am working in Django 1.8. I have a Django management command to create materialized views on my database, as follows:</p>

<pre><code>python manage.py create_db_matviews $DB_NAME $DB_USER $DB_PASS
</code></pre>

<p>Now I want to run the management command from inside my tests, so that I can test the command. (My actual database is extremely large, and the management command is extremely slow, so I would like to test it on test data, rather than real data.)</p>

<p>However calling the management command from inside my test file does not work - unsurprisingly since I have no idea what credentials to use: </p>

<pre><code>def setUpModule():
    management.call_command('loaddata', 'frontend/fixtures/mydata.json',
                        verbosity=0)
    # load fixtures, then... 
    management.call_command('create_db_matviews',
                            'default', 'default', 'randomguess', 
                            verbosity=0)
</code></pre>

<p>It fails as follows:</p>

<pre><code>Creating test database for alias 'default' ('test_prescribing')...
... running migrations...  
======================================================================
ERROR: setUpModule (frontend.tests.test_api_views)
----------------------------------------------------------------------
Traceback (most recent call last):
  File ""/Users/.../tests/test_api_views.py"", line 23, in setUpModule
    verbosity=0)
  File ""/Users/.../.virtualenvs/openprescribing/lib/python2.7/site-packages/django/core/management/__init__.py"", line 115, in call_command
    return klass.execute(*args, **defaults)
  File ""/Users/.../.virtualenvs/openprescribing/lib/python2.7/site-packages/django/core/management/base.py"", line 338, in execute
    output = self.handle(*args, **options)
  File ""/Users/.../frontend/management/commands/create_indexes_and_matviews.py"", line 19, in handle
    password=db_pass)
  File ""/Users/.../.virtualenvs/openprescribing/lib/python2.7/site-packages/psycopg2/__init__.py"", line 164, in connect
    conn = _connect(dsn, connection_factory=connection_factory, async=async)
OperationalError: FATAL:  role ""default"" does not exist
</code></pre>

<p>What credentials should I use to get access to the test database? </p>",5,python|django
29919306,Find the column name which has the maximum value for each row,"<p>I have a DataFrame like this one:</p>

<pre><code>In [7]:
frame.head()
Out[7]:
Communications and Search   Business    General Lifestyle
0   0.745763    0.050847    0.118644    0.084746
0   0.333333    0.000000    0.583333    0.083333
0   0.617021    0.042553    0.297872    0.042553
0   0.435897    0.000000    0.410256    0.153846
0   0.358974    0.076923    0.410256    0.153846
</code></pre>

<p>In here, I want to ask how to get column name which has maximum value for each row, the desired output is like this:</p>

<pre><code>In [7]:
    frame.head()
    Out[7]:
    Communications and Search   Business    General Lifestyle   Max
    0   0.745763    0.050847    0.118644    0.084746           Communications 
    0   0.333333    0.000000    0.583333    0.083333           Business  
    0   0.617021    0.042553    0.297872    0.042553           Communications 
    0   0.435897    0.000000    0.410256    0.153846           Communications 
    0   0.358974    0.076923    0.410256    0.153846           Business 
</code></pre>",104,python|pandas|dataframe|max
30036165,"Changing inputs into titles, issue with handling raw spaces","<p>so I'm quite new to programming and I'm trying to learn python as a starter.</p>

<p>I'm trying to make a function that does multiple things (I'm going to use it for limiting inputs on names).</p>

<ul>
<li>Rejects purely numerical inputs</li>
<li>Rejects inputs made purely of spaces</li>
<li>Rejects null inputs</li>
<li><p>Changes the input into a title</p>

<pre><code>def debugstr(inputa):
    inputa = inputa.replace("" "", """")
    try:
        int(inputa)
        inputb = debugstr(input(""Invalid input, please enter Alphabetic strings only: ""))
    except:
        if inputa == """":
            debugstr(input(""Invalid input, please enter Alphabetic strings only: ""))
        else:
            return inputa.title()
</code></pre></li>
</ul>

<p>The issue that I have is that the code will only reject blank inputs on the first try when running the function, if something is rejected once and the user inputs a series of spaces again, then it will just accept it as an input.</p>

<p>Thanks for your time in advance! It's very appreciated :D</p>",0,python
29800157,Can rectangle be used as a parent class (tkinter)?,"<p>when I have free time at work, i'm fooling around with python (2.6), and I thought I'd try and create a <a href=""http://en.wikipedia.org/wiki/Conway%27s_Game_of_Life"" rel=""nofollow"">game of life</a>. For that purpose I want to make a class for the different cells, which would be drawn on the canvas like rectangles, but would have more properties like whether they are alive or dead, etc. </p>

<p>I saw that the canvas module in the tkinter library has a rectangle class, but it says this module is obsolete, and in the tkinter module itself, all i can find is a function pertaining to rectangles</p>

<p>Am I missing something... Is it possible at all to use rectangle as a parent class... (and maybe am I totally wrong in trying to make the cells instances of a class; still as a I'm only beginning to get into programming i'd like to try and make it like that for the experience) </p>",0,python|tkinter
29957997,antlr4 python3 grammar on github,"<p>I'm using the grammar posted here:
<a href=""https://github.com/antlr/grammars-v4/tree/master/python3"" rel=""nofollow"">https://github.com/antlr/grammars-v4/tree/master/python3</a></p>

<p>It sometime returns partial tokens or multiple tokens before emitting the correct token. I'm using the TestRig tool to print the following output.</p>

<p>Is this expected behavior ? Thank you.</p>

<pre><code>@0,0:4='#3.31',&lt;92&gt;,channel=2,1:0]
****[@1,6:7='de',&lt;34&gt;,2:0]
[@2,6:8='def',&lt;1&gt;,2:0]****
[@3,10:23='reverse_string',&lt;35&gt;,2:4]
[@4,24:24='(',&lt;47&gt;,2:18]
[@5,25:30='answer',&lt;35&gt;,2:19]
[@6,31:31=')',&lt;48&gt;,2:25]
[@7,32:32=':',&lt;50&gt;,2:26]
****[@8,38:39='an',&lt;34&gt;,3:4]
[@9,38:42='answe',&lt;94&gt;,3:4]
[@10,38:43='answer',&lt;35&gt;,3:4]****
[@11,45:45='=',&lt;53&gt;,3:11]
[@12,47:51='input',&lt;35&gt;,3:13]
[@13,52:52='(',&lt;47&gt;,3:18]
[@14,53:82=''Enter a three-letter string:'',&lt;36&gt;,3:19]
[@15,83:83=')',&lt;48&gt;,3:49]
*[@16,89:90='re',&lt;34&gt;,4:4]
[@17,89:94='return',&lt;2&gt;,4:4]*
[@18,96:101='answer',&lt;35&gt;,4:11]
....

[@25,114:118='#3.32',&lt;92&gt;,channel=2,6:4]
*[@26,124:125='de',&lt;34&gt;,7:4]
[@27,124:126='def',&lt;1&gt;,7:4]*
...

**[@42,183:184='re',&lt;34&gt;,9:12]
[@43,183:195='return rate *',&lt;94&gt;,9:12]
[@44,183:188='return',&lt;2&gt;,9:12]
[@45,190:193='rate',&lt;35&gt;,9:19]
[@46,195:195='*',&lt;46&gt;,9:24]**
</code></pre>",1,python-3.x|antlr|antlr4
30202165,Django: Asymmetric ManyToMany Relation,"<p>I am new to using <code>django</code> and would appreciate your input to the following problem.</p>

<p>Two models are present, namely <code>A</code> and <code>B</code>. Instances of <code>A</code> must belong to at least one instance of <code>B</code>, while a <code>B</code> could contain any number of instances of <code>A</code>s from 0 to infinite. </p>

<pre><code>class A(models.Model):
  name = models.CharField(max_length = 128)
  created_date = models.DateTimeField(auto_now_add = True)
  modified_date = models.DateTimeField(auto_now = True)

class B(models.Model):
  name = models.CharField(max_length = 128)
  created_date = models.DateTimeField(auto_now_add = True)
  modified_date = models.DateTimeField(auto_now = True)
  A_list = models.ManyToManyField(A)
</code></pre>

<p>Okay. I think, based on the description I have given, <code>ManyToManyField</code> should be used for the two models. The thing is, from what I have read, <code>blank = false</code> must be used to prevent a <code>null</code> assignment for <code>A</code> (since an <code>A</code> must be assigned to at least one <code>B</code>) but a <code>B</code> may not have an assigned <code>A</code> (and thus should not have the <code>blank = false</code> statement. Could anyone asymmetric <code>ManyToMany</code> relation can be implemented in <code>django</code> <code>Model</code>? </p>",0,python|django|database-design
30102742,Why is my query for a structured property failing with BadFilterError?,"<p>I don't  understand how to <a href=""https://cloud.google.com/appengine/docs/python/ndb/queries#filtering_structured_properties"" rel=""nofollow"">filter for structured properties</a></p>

<p>I keep getting there error:</p>

<pre><code>BadFilterError: invalid filter: Cannot query for unindexed property author.email.  
</code></pre>

<p>I'm attempting to create an entity in my test setUp.</p>

<p>I'm using the code from the <a href=""https://github.com/GoogleCloudPlatform/appengine-guestbook-python/tree/part5-templates"" rel=""nofollow"">GAE tutorial</a>.  </p>

<p>Here is the model:  </p>

<pre><code>class Author(ndb.Model):
    """"""Sub model for representing an author.""""""
    identity = ndb.StringProperty(indexed=False)
    email = ndb.StringProperty(indexed=True)


class Greeting(ndb.Model):
    """"""A main model for representing an individual Guestbook entry.""""""
    author = ndb.StructuredProperty(Author)
    content = ndb.StringProperty(indexed=False)
    date = ndb.DateTimeProperty(auto_now_add=True)
</code></pre>

<p>Here is the simple query:</p>

<pre><code>Author.query( Author.email == ""bryan@mail.com"").get()
</code></pre>

<p>Here is my testing code in functional_tests.py:</p>

<pre><code>import sys, os, subprocess, time, unittest, shlex   
sys.path.append(""/usr/local/google_appengine"")    
sys.path.append(""/usr/local/google_appengine/lib/yaml/lib"")    
sys.path.append(""/usr/local/google_appengine/lib/webapp2-2.5.2"")    
sys.path.append(""/usr/local/google_appengine/lib/django-1.5"")    
sys.path.append(""/usr/local/google_appengine/lib/cherrypy"")    
sys.path.append(""/usr/local/google_appengine/lib/concurrent"")    
sys.path.append(""/usr/local/google_appengine/lib/docker"")    
sys.path.append(""/usr/local/google_appengine/lib/requests"")    
sys.path.append(""/usr/local/google_appengine/lib/websocket"")    
sys.path.append(""/usr/local/google_appengine/lib/fancy_urllib"")    
sys.path.append(""/usr/local/google_appengine/lib/antlr3"")    

from selenium import webdriver    
from google.appengine.api import memcache, apiproxy_stub, apiproxy_stub_map   
from google.appengine.ext import db    
from google.appengine.ext import testbed    
from google.appengine.datastore import datastore_stub_util     
from google.appengine.tools.devappserver2 import devappserver2    


class NewVisitorTest(unittest.TestCase):    

    def setUp(self):    
        # Start the dev server  
        cmd = ""/usr/local/bin/dev_appserver.py /Users/Bryan/work/GoogleAppEngine/guestbook/app.yaml --port 8080 --storage_path /tmp/datastore --clear_datastore --skip_sdk_update_check""  
        self.dev_appserver = subprocess.Popen(shlex.split(cmd),   
                                              stdout=subprocess.PIPE)  
        time.sleep(2) # Important, let dev_appserver start up  

        self.testbed = testbed.Testbed()
        self.testbed.setup_env(app_id='dermal')    
        self.testbed.activate()    

        self.testbed.init_user_stub()    
        # Create a consistency policy that will simulate the High Replication consistency model.
        # with a probability of 1, the datastore should be available.
        self.policy = datastore_stub_util.PseudoRandomHRConsistencyPolicy(probability=1)
        # Initialize the datastore stub with this policy.
        self.testbed.init_datastore_v3_stub(datastore_file=""/tmp/datastore/datastore.db"", use_sqlite=True, consistency_policy=self.policy)    
        self.testbed.init_memcache_stub()    
        self.datastore_stub = apiproxy_stub_map.apiproxy.GetStub('datastore_v3')            
        # setup the dev_appserver    
        APP_CONFIGS = ['app.yaml']    

        # setup client to make sure   
        from guestbook import Author, Greeting  
        if not ( Author.query( Author.email == ""bryan@mail.com"").get()):  
            logging.info(""create Admin"")  
            client = Author(  
            email = ""bryan@mail.com"",   
            ).put()
            Assert( Author.query( Author.email == ""bryan@mail.com"").get() )
        self.browser = webdriver.Firefox()    
        self.browser.implicitly_wait(3)    

    def tearDown(self):    
        self.browser.quit()    
        self.testbed.deactivate()    
        self.dev_appserver.terminate()  

    def test_submit_anon_greeting(self):
          self.browser.get('http://localhost:8080')
          self.browser.find_element_by_name('content').send_keys('Anonymous test post')
          self.browser.find_element_by_name('submit').submit()
          Assert.assertEquals(driver.getPageSource().contains('Anonymous test post'))
</code></pre>",0,python|google-app-engine|dev-appserver-2
29757740,Django pass multiple words through a URL conf,"<p>Using django, I would like the name of my item through a variable in my URL conf. Say the name of my product is ""stack overflow"" I would like to be able to go to:</p>

<pre><code>http://127.0.0.1:8000/product/stack+overflow/
</code></pre>

<p>But what I am getting is a ""page not found"" 404 page. It does work when the name is just word, but not with multiple words.</p>

<p>My urls.py</p>

<pre><code>from django.conf.urls import patterns, url

urlpatterns = patterns('',
    url(r'^product/(?P&lt;name&gt;\w+)/$', 'crunch.views.product_by_name', name='preview_by_name'),
)
</code></pre>",1,python|django|django-urls
29773398,Serializing NotificationQuerySet from django-notifications-hq not working,"<p>So, i'm trying to add to my API made with DRF (Django REST Framework) the notifications Model, but i'm getting this error:</p>

<p><code>AttributeError: 'NotificationQuerySet' object has no attribute 'recipient'</code></p>

<p>I'm trying to serialize a django app model, Notification. It's from this app: </p>

<p><a href=""https://github.com/django-notifications/django-notifications"" rel=""nofollow"">https://github.com/django-notifications/django-notifications</a></p>

<p>My ViewSet class is this:</p>

<pre><code>class NotificationsViewSet(viewsets.ViewSet):
    serializer_class = NotificationsSerializer
    def list(self, request):
        queryset = Notification.objects.all()
        return Response(NotificationsSerializer(queryset).data)
</code></pre>

<p>And here my serializer:</p>

<pre><code>class NotificationsSerializer(serializers.ModelSerializer):
    class Meta:
        model = Notification
        fields = ('recipient','description')
        depth = 0
</code></pre>

<p>So, when data pass to serializer, it becomes ""Void"" or without any data. 
Doing something like into the <strong>list method</strong>:</p>

<p><code>print queryset[0]</code>  returns a Notification object normaly. But when passing this queryset to the serializer, seems to be null, and the AttributeError comes.</p>

<p>Also, tried this with the console:</p>

<p><code>notifications = Notification.objects.all()</code></p>

<p>That returns a <strong>NotificationQuerySet</strong> object (iterable). Then I can:</p>

<pre><code>for noti in notifications:
    print noti
</code></pre>

<p>That would output all the <strong>unicode</strong> methods of every notification.
With every Notification instance, i can also access to Model propierties:</p>

<pre><code>for noti in notifications:
    print noti.recipient
</code></pre>

<p>And works very well.</p>

<p>Why is not working when passing this to the serializer? Its weird...</p>",3,python|django|serialization|notifications|django-rest-framework
29773904,Scrapy Mongodb Connection,"<p>I am scraping the data using scrapy.Now i want to store the data in mongo db for that i install <code>pymongo</code> but i am unable to connect to the databse
Here is my code for settings.py</p>

<pre><code>ITEM_PIPELINES = ['tutorial.pipelines.TutorialPipeline',]
MONGODB_SERVER = ""localhost""
MONGODB_PORT = 27017
MONGODB_DB = ""test""
MONGODB_COLLECTION = ""raw_prod""
</code></pre>

<p>Here is the code for pipelines.py</p>

<pre><code>import pymongo
from pymongo import Connection

class TutorialPipeline(object):

    def __init__(self):
        connection = pymongo.Connection(settings['MONGODB_SERVER'], settings['MONGODB_PORT'])
        db = connection[settings['MONGODB_DB']]
        self.collection = db[settings['MONGODB_COLLECTION']]
</code></pre>

<p>I am getting the following error </p>

<blockquote>
  <p>cannot import name Connection</p>
</blockquote>

<p>Where am i going wrong??</p>",2,python|mongodb|scrapy|pymongo
30186868,How does the stats.gaussian_kde method calcute the pdf?,"<p>I am using the <code>scipy.stats.gaussian_kde</code> method from <code>scipy</code> to generate random samples from the data.</p>

<p>It works fine! What I have now found out is that the method also has inbuilt functions to calculate the probability density function of the given set of points (my data).</p>

<p><strong><code>I would like to know how it calculates the pdf provided a set of points.</code></strong></p>

<p>Here is small example:</p>

<pre><code>import numpy as np
import scipy.stats
from scipy import stats

def getDistribution1(data):
    kernel = stats.gaussian_kde(data,bw_method=0.06)
    class rv(stats.rv_continuous):
        def _rvs(self, *x, **y):
            return kernel.resample(int(self._size)) #random variates
        def _cdf(self, x):
            return kernel.integrate_box_1d(0,max(x)) #Integrate pdf between two bounds (-inf to x here!)
        def _pdf(self, x):
            return kernel.evaluate(x)  #Evaluate the estimated pdf on a provided set of points
    return rv(name='kdedist')

test_data = np.random.random(100) # random test data 
distribution_data = getDistribution1(test_data)
pdf_data = distribution_data.pdf(test_data) # the pdf of the data
</code></pre>

<p>In the above piece of code, there exists three methods,</p>

<ol>
<li><code>rvs</code> to generate random samples based on data</li>
<li><code>cdf</code> which is the integral of the pdf from 0 to max(data)</li>
<li><code>pdf</code> which is the pdf of the data</li>
</ol>

<p>The reason I need this pdf is because now <strong>I am trying to calculate weights</strong> for my data based on probability. <strong>So that I can give each of my data point a probability which I can then use as my weights.</strong> </p>

<p>I would also like to know from here how I should proceed to calculate my weights?</p>

<p>P.S. Forgive me for asking the same question in cross validated, there seems to be no response! </p>",1,python|scipy|gaussian|probability-density
30200947,joblib.Parallel for nested list comprehension,"<p>I have a nested list comprehension that looks something like this:</p>

<pre><code>&gt;&gt;&gt; nested = [[1, 2], [3, 4, 5]]
&gt;&gt;&gt; [[sqrt(i) for i in j] for j in nested]
[[1.0, 1.4142135623730951], [1.7320508075688772, 2.0, 2.23606797749979]]
</code></pre>

<p>Is it possible to parellelize this using the <a href=""https://pythonhosted.org/joblib/parallel.html"" rel=""nofollow"">standard joblib approach for embarrassingly parallel for loops</a>? If so, what is the proper syntax for <code>delayed</code>?</p>

<p>As far as I can tell, the docs don't mention or give any example of nested inputs. I've tried a few naive implementations, to no avail:</p>

<pre><code>&gt;&gt;&gt; #this syntax fails:
&gt;&gt;&gt; Parallel(n_jobs = 2) (delayed(sqrt)(i for i in j) for j in nested)
Traceback (most recent call last):
  File ""&lt;stdin&gt;"", line 1, in &lt;module&gt;
  File ""C:\Python27\lib\site-packages\joblib\parallel.py"", line 660, in __call__
    self.retrieve()
  File ""C:\Python27\lib\site-packages\joblib\parallel.py"", line 512, in retrieve
    self._output.append(job.get())
  File ""C:\Python27\lib\multiprocessing\pool.py"", line 558, in get
    raise self._value
pickle.PicklingError: Can't pickle &lt;type 'generator'&gt;: it's not found as __builtin__.generator
&gt;&gt;&gt; #this syntax doesn't fail, but gives the wrong output:
&gt;&gt;&gt; Parallel(n_jobs = 2) (delayed(sqrt)(i) for i in j for j in nested)
[1.7320508075688772, 1.7320508075688772, 2.0, 2.0, 2.23606797749979, 2.23606797749979]
</code></pre>

<p>If this is impossible, I can obviously restructure the list before and after passing it to <code>Parallel</code>. However, my actual list is long and each item is enormous, so doing so isn't ideal.</p>",4,python|syntax|parallel-processing|list-comprehension|joblib
30060616,Python Pandas to_dict function,"<p>Im trying to create a dictionary, but cant get it to work the way I intend.  I feel like Im so close.  I a df of yelp data:</p>

<pre><code>import pandas as pd
file_rev = 'blah.csv'

reviews=pd.read_csv(file_rev, sep=',',header=0, nrows=10000)

cols = ['user_id', 'business_id', 'stars']
cat_rev = reviews[cols]

print cat_rev
</code></pre>

<p>df:</p>

<pre><code>                   user_id             business_id  stars
0   Xqd0DzHaiyRqVH3WRG7hzg  vcNAWiLM4dR7D2nwwJ7nCA      5
1   H1kH6QZV7Le4zqTRNxoZow  vcNAWiLM4dR7D2nwwJ7nCA      2
2   zvJCcrpm2yOZrxKffwGQLA  vcNAWiLM4dR7D2nwwJ7nCA      4
3   KBLW4wJA_fwoWmMhiHRVOA  vcNAWiLM4dR7D2nwwJ7nCA      4
4   zvJCcrpm2yOZrxKffwGQLA  vcNAWiLM4dR7D2nwwJ7nCA      4
5   Qrs3EICADUKNFoUq2iHStA  vcNAWiLM4dR7D2nwwJ7nCA      1
6   jE5xVugujSaskAoh2DRx3Q  vcNAWiLM4dR7D2nwwJ7nCA      5
7   QnhQ8G51XbUpVEyWY2Km-A  vcNAWiLM4dR7D2nwwJ7nCA      5
8   tAB7GJpUuaKF4W-3P0d95A  vcNAWiLM4dR7D2nwwJ7nCA      1
9   GP-h9colXgkT79BW7aDJeg  vcNAWiLM4dR7D2nwwJ7nCA      5
10  uK8tzraOp4M5u3uYrqIBXg  UsFtqoBl7naz8AVUBZMjQQ      5
</code></pre>

<p>I want to be able to create this as a dictionary that looks like:</p>

<pre><code>abc = {user1 : {business1:star_rating, business2:star_rating, 
                businessN:star_rating}, 
       user2: {}  }
</code></pre>

<p>Then to access I would just: 
<code>abc[user1]</code> would give me all the places and stars that user1 reviewed.<br>
<code>abc[user1][place1]</code> would give just corresponding star rating.  </p>

<p>Ive tried the <code>to_dict</code> panda function.  I tried to <code>groupby</code> first, then <code>dict(list(groupby()))</code>, and nothing seems to convert it to how I want.</p>

<p>Also nope, but almost:</p>

<pre><code>ddd = cat_rev.set_index('user_id').to_dict(outtype='list')
</code></pre>",2,python|pandas
29933483,Subsetting a Pandas series,"<p>I have a Pandas series. Basically one specific row of a pandas data frame. </p>

<pre><code>Name: NY.GDP.PCAP.KD.ZG, dtype: int64
NY.GDP.DEFL.ZS_logdiff       0.341671
NY.GDP.DISC.CN               0.078261
NY.GDP.DISC.KN               0.083890
NY.GDP.FRST.RT.ZS            0.296574
NY.GDP.MINR.RT.ZS            0.264811
NY.GDP.MKTP.CD_logdiff       0.522725
NY.GDP.MKTP.CN_logdiff       0.884601
NY.GDP.MKTP.KD_logdiff       0.990679
NY.GDP.MKTP.KD.ZG            0.992603
NY.GDP.MKTP.KN_logdiff      -0.077253
NY.GDP.MKTP.PP.CD_logDiff    0.856861
NY.GDP.MKTP.PP.KD_logdiff    0.990679
NY.GDP.NGAS.RT.ZS           -0.018126
NY.GDP.PCAP.CD_logdiff       0.523433
NY.GDP.PCAP.KD.ZG            1.000000
NY.GDP.PCAP.KN_logdiff       0.999456
NY.GDP.PCAP.PP.CD_logdff     0.857321
NY.GDP.PCAP.PP.KD_logdiff    0.999456
</code></pre>

<p>The first column is index as you would find in a series. Now I want to basically get all these index names in a list such that only those index should come whose absolute value in the right column is less than 0.5. To give a context this series is basically a row corresponding to the variable NY.GDP.PCAP.KD.ZG in a correlation matrix and I want to retain this variable along with those variables which have correlation less than 0.5 with this variable. Rest variables I will drop from the dataframe </p>

<p>Currently I do something like this but it also keeps NaN </p>

<pre><code>print(tourism[columns].corr().ix[14].where(np.absolute(tourism[columns].corr().ix[14]&lt;0.5))) 
</code></pre>

<p>where tourism is the data frame , columns is the set of columns on which I did correlation analysis and 14 is the row in the correlation matrix corresponding to column mentioned above </p>

<p>gives: </p>

<pre><code>NY.GDP.DEFL.ZS_logdiff       0.341671
NY.GDP.DISC.CN               0.078261
NY.GDP.DISC.KN               0.083890
NY.GDP.FRST.RT.ZS            0.296574
NY.GDP.MINR.RT.ZS            0.264811
NY.GDP.MKTP.CD_logdiff            NaN
NY.GDP.MKTP.CN_logdiff            NaN
NY.GDP.MKTP.KD_logdiff            NaN
NY.GDP.MKTP.KD.ZG                 NaN
NY.GDP.MKTP.KN_logdiff      -0.077253
NY.GDP.MKTP.PP.CD_logDiff         NaN
NY.GDP.MKTP.PP.KD_logdiff         NaN
NY.GDP.NGAS.RT.ZS           -0.018126
NY.GDP.PCAP.CD_logdiff            NaN
NY.GDP.PCAP.KD.ZG                 NaN
NY.GDP.PCAP.KN_logdiff            NaN
NY.GDP.PCAP.PP.CD_logdff          NaN
NY.GDP.PCAP.PP.KD_logdiff         NaN
Name: NY.GDP.PCAP.KD.ZG, dtype: float64
</code></pre>",0,python|numpy|pandas|scipy
29932474,"Adding classes, preventing changing indexes from affecting data","<p>I have a class <code>K()</code> that has an <code>__add__()</code> method that works as follows</p>

<pre><code>d_1 = K(dict(a=3, b=5), dict(b=45,c=23))
d_2 = K(dict(a='three',b='two'), dict(b='wa',c='wo'))
&gt;&gt;d = d_1 + d_2
&gt;&gt;d == K({'a': 3, 'b': 5}, {'b': 45, 'c': 23}, {'a': 'three', 'b': 'two'}, {'b': 'wa', 'c': 'wo'})
True
</code></pre>

<p>However, if I change some data</p>

<pre><code>d_1['c'] = 'apples'
d_2['c'] = 'oranges'
</code></pre>

<p>and check again...</p>

<pre><code>&gt;&gt;d == K({'a': 3, 'b': 5}, {'b': 45, 'c': 23}, {'a': 'three', 'b': 'two'}, {'b': 'wa', 'c': 'wo'})
False
</code></pre>

<p>The changing data has affected the original addition method. I've tried using .copy() to create copies of the variables we're adding, and use those- however I haven't had any luck...</p>

<pre><code>def __add__(self, other):
    scopy, ocopy = self.copy(),other.copy()
    slist,olist = [],[]
    for x in scopy.list_of_dictionaries_from_init:
        self_temp.append(x)
    for i in other_copy.list_of_dictionaries_from_init:
         temp.append(i)
    return K(*(self_copy.list_of_dictionaries_from_init + olist))
</code></pre>

<p>This just outright doesn't work</p>

<p>I'm not sure how to make this work with copies</p>",1,python|dictionary|operator-overloading
30192141,BeautifulSoup dont search recursive in already found tag,"<p>I'm working at the moment with wikipedia articles containing lists.</p>

<p>I've got now the article <a href=""http://en.wikipedia.org/wiki/Archdeacons_in_the_Diocese_in_Europe"" rel=""nofollow noreferrer"">List of Archdeacons in the Diocese in Europe</a>. To get the ul (or table) tags I'm using BeautifulSoup (Python 2.7).
I discovered that the content of the article is contained by the 'mw-content-text' tag:</p>

<pre><code>article = soup.find('div', {'id':'mw-content-text'})
lists = article.find_all('ul')
</code></pre>

<p>So that's how I get the lists and It's working for this example. But there are  articles where a list contains other lists and I don't want BS to track  these sublists. How do I say BS that I don't have to look deeper when It found a tag?</p>

<p>The parameter <em>recursive</em> is NOT what I'm looking for because the list might be in a div tag.</p>

<p>P.S.: <a href=""https://stackoverflow.com/questions/27673644/beautifulsoup-counting-tags-without-parsing-deep-inside-them/27673808#27673808"">This</a> user is looking for the same solution but gets not the right answer: ""Is there a way to make BS not search recursively into an already found tag?'""</p>",1,python|html|python-2.7|beautifulsoup|html-parsing
29787397,How to run this script continuously in Heroku,"<p>I need to run this script in heroku to update my database. The data is retrieve from my facebook post. </p>

<p>I am not sure how to use the Heroku scheduler, what can I do?</p>

<pre><code>from facepy import GraphAPI
import json
#import psycopg2
#import mysql.connector

my_token = ....
graph = GraphAPI(my_token)

# Get my latest posts
my_posts = graph.get(""me?fields=posts.limit(1){message}"", page=False, retry=1, limit=1)

with open('content.json', 'w') as outfile:
  json.dump(my_posts, outfile, indent = 4)

with open('content.json') as data_file:    
    da = json.load(data_file)

a =  da[""posts""][""data""][0][""message""]
#fecha = da[""posts""][""data""][0][""created_time""]
b=a[0:4]

if b == 'Temp':
    temp = a[5:7]
    hum = a[13:15]
    id = a[20:23]
    print temp
    print hum
    print indent

else:
    print 'error'
</code></pre>

<p>Thanks </p>",0,python|heroku|scheduled-tasks|job-scheduling
30129405,How to export to excel datetime in Django 1.7,"<p>Iam using Django 1.7, Python 3.4 and PostgreSQL 9.1.
I need to export to Excel some queryset. As a starting point I use this guide: <a href=""http://reliablybroken.com/b/2009/09/outputting-excel-with-django/"" rel=""nofollow"">outputting-excel-with-django</a></p>

<p>In my model I have a field as a <strong>Datetime</strong>, and in utils.py I added already a style:     <code>(datetime.datetime, xlwt.easyxf(num_format_str='DD/MM/YYYY HH:MM:SS')),</code></p>

<p>But when I try to export my data I get a Type Error: <code>can't subtract offset-naive and offset-aware datetimes</code></p>

<p>Anyone can help me with this?
Thanks</p>",3,python|django|excel|datetime|python-3.x
29903389,Does randomSplit return a copy or a reference to the original rdd?,"<p>Suppose I have something like the code below</p>

<pre><code>for idx in xrange(0, 10):
    train_test_split = training.randomSplit(weights=[0.75, 0.25])
    train_cv = train_test_split[0]
    test_cv = train_test_split[1]
    # scale train_cv and test_cv
</code></pre>

<p>by scaling <code>train_cv</code> and <code>test_cv</code>, will the original data be affected?</p>",3,python|apache-spark
29892546,Asus Xtion Pro Live and PyOpenni RGB,"<p>I am using PyOpenni in python to read data sensor from an Asus Xtion Live Pro.
All works like a charm if I try to read depth data:</p>

<pre><code>depth = DepthGenerator()
depth.create(context)
depth.set_resolution_preset(DefResolution.RES_VGA)
depth.fps = 30
context.start_generating_all()

while True:
     context.wait_one_update_all(depth)
     print depth.get_raw_depth_map_8()
</code></pre>

<p>This works fine even at 20-30 frame per second, but the problem is when I try to get the RGBImage with the same method:</p>

<pre><code>image = ImageGenerator()
image.create(context)
image.set_resolution_preset(DefResolution.RES_VGA)
image.fps = 30
context.start_generating_all()

while True:
     context.wait_one_update_all(image)
     print image.get_raw_image_map)
</code></pre>

<p>The program waits a lot stopped in the instruction </p>

<pre><code> context.wait_one_update_all(image)
</code></pre>

<p>So I can get only, more or less, 2-3 frame per second.</p>

<p>Does anyone know why?</p>",0,python|kinect|openni|asus-xtion
30056214,How do you create a singleton celery task that runs indefinitely upon starting a Django application?,"<p>Right now I have a <code>@sharedtask</code> that follows the following code exactly:
<a href=""http://docs.celeryproject.org/en/latest/tutorials/task-cookbook.html#id1"" rel=""nofollow"">http://docs.celeryproject.org/en/latest/tutorials/task-cookbook.html#id1</a></p>

<p>And the following scheduler settings:</p>

<pre><code>CELERYBEAT_SCHEDULE = {
    'indefinite-task': {
        'task': 'app.tasks.indefinite_task',
        'schedule': timedelta(seconds=1),
    },
}
</code></pre>

<p>But my two of my workers seem to be running the task more than once, presumably because of a worker having concurrent threads? How can I ensure that the task is only run once by a single thread on a single worker?</p>

<p>Example of what I am seeing in the shell:</p>

<pre><code>11:00:43 worker.1 | [2015-05-05 15:00:43,444: DEBUG/Worker-1] app.tasks.indefinite_task[b8b0445c-91e6-4652-bd75-4c609149161f]: Acquiring lock
11:00:43 worker.1 | [2015-05-05 15:00:43,444: DEBUG/Worker-2] app.tasks.indefinite_task[b8b0445c-91e6-4652-bd75-4c609149161f]: Acquiring lock
</code></pre>

<p>Edit: I'm using a <code>Procfile</code> with heroku.</p>",2,python|django|celery|django-celery|celerybeat
29832234,VBA shell script set environment variable before execution,"<p>I'm trying to run a VBA module that uses a shell script to run an ipython notebook (using runipy) before going on to do other things, but my ipython notebook script requires inputs, which are setup using environment variables.</p>

<p>Here's the VBA I have so far:</p>

<pre><code>rundate = Range(""b1"").Value
shellScript = ""runipy C:\argstest.ipynb""

Dim wsh As Object
Set wsh = VBA.CreateObject(""WScript.Shell"")
Dim waitOnReturn As Boolean: waitOnReturn = True
Dim windowStyle As Integer: windowStyle = 1

Set wshSystemEnv = wsh.Environment(""SYSTEM"")
wshSystemEnv(""CURRWK"") = rundate
</code></pre>

<p>If I then run:</p>

<pre><code>MsgBox (wshSystemEnv(""CURRWK""))
</code></pre>

<p>The result is correct:</p>

<pre><code>2015-04-17
</code></pre>

<p>However, if I continue on and exec my shellscript, it isn't recognizing this variable</p>

<pre><code>Set WshShellExec = wsh.exec(shellScript)
Range(""a1"").Value = WshShellExec.StdErr.ReadAll
</code></pre>

<p>shows me that when python runs it gets a key error:</p>

<pre><code>KeyError: 'CURRWK'
</code></pre>

<p>If I remove the VBA and run this straight from the command line, I would do it like this:</p>

<pre><code>set CURRWK=2015-04-17
runipy C:\Python27\Programs\ipython\ACT\argstest.ipynb
</code></pre>

<p>How do I get the shell created in the VBA to create the new environment variable so the python script can see it when it executes?</p>

<p>Thanks! </p>",1,python|vba|shell|ipython
30106966,Smartcard PKCS11 AES Key Gen Failure,"<p>I am attempting to create an AES 256 key on an ACOS5-64 smartcard and OMNIKEY 3121 card reader, using PKCS11 in python (using the PyKCS11 library).  So far, all the ""standard"" operations seem to work with regards to asymmetric crypto.  I have run plenty of code samples and pkcs11-tool commands, to initialize the token, set/change PINs, create RSA keypairs, etc.  So, the drivers are all functional (pcscd, CCID, PKCS11 middleware).</p>

<p>The following code is causing a problem:</p>

<pre><code>from PyKCS11 import *
import getpass
libacospkcs = '/usr/lib/libacospkcs11.so'

def createTokenAES256(lbl):
   pkcs11 = PyKCS11Lib()
   pkcs11.load(libacospkcs)
   theOnlySlot = pkcs11.getSlotList()[0]
   session = pkcs11.openSession(theOnlySlot, CKF_SERIAL_SESSION | CKF_RW_SESSION)
   PIN = getpass.getpass('Enter User PIN to login:')
   session.login(PIN)

   t = pkcs11.getTokenInfo(theOnlySlot)
   print t.label
   print t.model
   print t.serialNumber

   template = (
      (CKA_CLASS, CKO_SECRET_KEY),
      (CKA_KEY_TYPE, CKK_AES),
      (CKA_VALUE_LEN, 32),
      (CKA_LABEL, ""A""),
      (CKA_PRIVATE, True),
      (CKA_SENSITIVE, True),
      (CKA_ENCRYPT, True),
      (CKA_DECRYPT, True),
      (CKA_TOKEN, True),
      (CKA_WRAP, True),
      (CKA_UNWRAP, True),
      (CKA_EXTRACTABLE, False))
   ckattr = session._template2ckattrlist(template)
   m = LowLevel.CK_MECHANISM()
   m.mechanism = LowLevel.CKM_AES_KEY_GEN

   key = LowLevel.CK_OBJECT_HANDLE()
   returnValue = pkcs11.lib.C_GenerateKey( session.session, m, ckattr, key)

   if returnValue != CKR_OK:
      raise PyKCS11Error(returnValue)

# Now run the method to create the key
createTokenAES256('TestAESKey')
</code></pre>

<p>However, I get an error when running it:</p>

<pre><code>~/projects/smartcard $ python testpkcs11again.py 
Enter User PIN to login:
Token #A                        
ACOS5-64        
30A740C8704A
Traceback (most recent call last):
  File ""testcreateaes.py"", line 43, in &lt;module&gt;
    createTokenAES256('TestAESKey')
  File ""testcreateaes.py"", line 40, in createTokenAES256
    raise PyKCS11Error(returnValue)
PyKCS11.PyKCS11Error: CKR_ATTRIBUTE_VALUE_INVALID (0x00000013)
</code></pre>

<p>The thing is that if I switch the CKA_TOKEN line to False, then it ""works"".  Of course, by setting that to false, it makes the key a session object instead of a token object (i.e. after I logout, the key is wiped).  Using pkcs11-tool with --list-objects, the key is not there.  I can use the ACSCMU (GUI tool for token admin), I can create an AES key in the ""Secret Key Manager"" and it does create a persistent key.  But I have no way to see what the ACSCMU is doing to make it persistent (it may not be using PKCS11 at all).</p>

<p>If I had to guess the problem, I'd guess that it has to do with the session.  If CKA_TOKEN=True is invalid, then it seems the token is not actually in RW mode (as suggested by the CKF_RW_SESSION in the 9th line).  So far, I'm not sure what else to try or how to debug this.</p>",4,python|aes|smartcard|pkcs#11
30090355,Writing multiple files from one pandas dataframe,"<p>I have a CSV file that I'm trying to extract and break down into parts. It 10 columns. My current script (a line of which is shown below) asks user for input of two columns (say columns A and C) and gets data from the third (column F) and writes columns A and F to a new CSV file. </p>

<pre><code>df1 = data.columnF[(data['columnA'] == data_name) &amp; (data['columnC'] == study_name)]
</code></pre>

<p>Current output looks something like this:</p>

<pre><code>name1,study1
name1,study2
name1,study2
name5,study9
name6,study6
name6,study0
</code></pre>

<p>Instead, I want the output to be multiple text files (by skipping the step of writing everything to CSV file and then breaking it into chunks). </p>

<pre><code>File 'name1.txt' should have
study1
study2 (only once, without repetition) 
</code></pre>

<p>Similarly, </p>

<pre><code>name5.txt &gt; study9
name6.txt &gt; study6
            study0
</code></pre>

<p>How can I do that?</p>",1,python|python-2.7|csv|pandas|dataframe
29848369,Python Raw socket - IP_HDRINCL option,"<p>According to the manual page of raw sockets,</p>

<blockquote>
  <p>The  IPv4 layer generates an IP header when sending a packet unless the
         IP_HDRINCL socket option is enabled on the socket.  When it is enabled,
         the  packet  must contain an IP header.  For receiving the IP header is
         always included in the packet.</p>
</blockquote>

<p>I'm using python to test the IP_HDRINCL socket option, so i have generated an IP Header but after enabling the option, unfortunately the sendto() method doesn't seems to be worked, i got the following error</p>

<blockquote>
  <p>Traceback (most recent call last):
      File ""./test.py"", line 35, in 
      s.sendto(pkt, (dip , 0 ))
      socket.error: [Errno 1] Operation not permitted</p>
</blockquote>

<p>just keep in mind that i'm running the program with the uid 0 (root)</p>

<p>Note:</p>

<p>I don't want to use raw socket along with the PACKET FAMILY, i still want to make use of the TCP/IP stack implemented in the kernel</p>

<p>Here is the sample i created:</p>

<pre><code>#!/usr/bin/env python
import socket
import struct
def IP():
    version = 4
    ihl = 5
    DF = 0
    Tlen = 0
    ID = 0
    Flag = 0
    Fragment = 0
    TTL = 64
    Proto = socket.IPPROTO_TCP
    ip_checksum = 0
    SIP = socket.inet_aton(""172.16.122.2"")
    DIP = socket.inet_aton(""172.16.122.1"")
    ver_ihl = (version &lt;&lt; 4) + ihl
    f_f = (Flag &lt;&lt; 13) + Fragment
    ip_hdr =  struct.pack(""!BBHHHBBH4s4s"", ver_ihl,DF,Tlen,ID,f_f,TTL,Proto,ip_checksum,SIP,DIP)
    return ip_hdr
s = socket.socket(socket.AF_INET, socket.SOCK_RAW, socket.IPPROTO_TCP)

# the error occurs only when the IP_HDRINCL is enabled 

s.setsockopt(socket.IPPROTO_IP, socket.IP_HDRINCL, 1)
dip = ""172.16.122.1""
pkt = IP() + ""Hello""
s.sendto(pkt, (dip , 0 ))
</code></pre>",3,python|sockets
29983059,"Matplotlib Window Size, Title, etc","<p>I'm new in python and matplotlib. I have a project and I need to create a graphic in a Tkinter GUI a graphic using matplotlib. I found and used this code:</p>

<pre><code>import numpy as np
import matplotlib.pyplot as plt

N = 5
menMeans = (20, 35, 30, 35, 27)
menStd =   (2, 3, 4, 1, 2)

ind = np.arange(N)  # the x locations for the groups
width = 0.35       # the width of the bars

fig, ax = plt.subplots()
rects1 = ax.bar(ind, menMeans, width, color='r', yerr=menStd)

womenMeans = (25, 32, 34, 20, 25)
womenStd =   (3, 5, 2, 3, 3)
rects2 = ax.bar(ind+width, womenMeans, width, color='y', yerr=womenStd)


ax.set_ylabel('Scores')
ax.set_title('Scores by group and gender')
ax.set_xticks(ind+width)
ax.set_xticklabels( ('G1', 'G2', 'G3', 'G4', 'G5') )

ax.legend( (rects1[0], rects2[0]), ('Men', 'Women') )

def autolabel(rects):
    # attach some text labels
    for rect in rects:
        height = rect.get_height()
        ax.text(rect.get_x()+rect.get_width()/2., 1.05*height, '%d'%int(height),
                ha='center', va='bottom')

autolabel(rects1)
autolabel(rects2)

plt.show()
</code></pre>

<p>But I can't find the way to change the size of the window that appears when I use this code. 
I have already try with this:</p>

<pre><code>figure(num=None, figsize=(8, 6), dpi=80, facecolor='w', edgecolor='k')
</code></pre>

<p>But this only creates another window! Help please!</p>",3,python|matplotlib|figure
29795900,Python Webdriver my script won't find the button inside the iFrame,"<p>I am trying to verify if a button is present on a webpage after I have successfully logged in.  I am using Webdriver with Python.  The button is in an iFrame.
This is my first webdriver python program using the a page object model framework.  Not bad so far i think.</p>

<p>The program successfully logs in but it won't find the iFrame.
I need some help please.</p>

<p>I receive the following error: </p>

<pre><code>Error
Traceback (most recent call last):
File ""C:\Users\riaz.ladhani\PycharmProjects\Selenium Webdriver\TestCore  01\LoginPage_TestCase.py"", line 16, in test_login_valid_user
login_page.isAdministration_present()
File ""C:\Users\riaz.ladhani\PycharmProjects\Selenium Webdriver\TestCore  01\page.py"", line 44, in isAdministration_present
content_frame = self.driver.find_element(*MainPageLocators.contentFrame)
File ""C:\Python27\lib\site-packages\selenium\webdriver\remote\webdriver.py"",  line 664, in find_element
{'using': by, 'value': value})['value']
File ""C:\Python27\lib\site-packages\selenium\webdriver\remote\webdriver.py"",  line 175, in execute
self.error_handler.check_response(response)
File ""C:\Python27\lib\site-packages\selenium\webdriver\remote\errorhandler.py"", line 166, in check_response
raise exception_class(message, screen, stacktrace)
NoSuchElementException: Message: Unable to locate element:  {""method"":""id"",""selector"":""testcore""}
</code></pre>

<p>My full code snipped it as follows:</p>

<pre><code>    # This class is where all my locators will be defined
from selenium.webdriver.common.by import By

class MainPageLocators(object):
    GO_BUTTON = (By.ID, 'submit')
    usernameTxtBox = (By.ID, 'unid')
    passwordTxtBox = (By.ID, 'pwid')
    submitButton = (By.ID, 'button')
    AdministrationButton = (By.CSS_SELECTOR, 'div.gwt-HTML.firepath-matching-node')
    AdministrationButtonXpath = (By.XPATH, '/body/div[2]/div[2]/div/div[2]/div/div[2]/div/div[7]/div/div')
    AdministrationButtonCSS = (By.CSS_SELECTOR, '/body/div[2]/div[2]/div/div[2]/div/div[2]/div/div[7]/div/div')
    contentFrame = (By.ID, 'testcore')


from element import BasePageElement
from locators import MainPageLocators

# This class is the base page class
class BasePage(object):

def __init__(self, driver):
    self.driver = driver

# This class is the LoginPage.  All the methods for the login page are defined here
class LoginPage(BasePage):

def click_go_button(self):
    element = self.driver.find_element(*MainPageLocators.GO_BUTTON)
    element.click()

def userLogin_valid(self):
    userName_textbox = self.driver.find_element(*MainPageLocators.usernameTxtBox)
    userName_textbox.clear()
    userName_textbox.send_keys(""user1"")
    password_textbox =  self.driver.find_element(*MainPageLocators.passwordTxtBox)
    password_textbox.clear()
    password_textbox.send_keys(""Pass1"")
    submitButton = self.driver.find_element(*MainPageLocators.submitButton)
    submitButton.click()

# Is the Administration button present on the dashboard page
def isAdministration_present(self):

    content_frame = self.driver.find_element(*MainPageLocators.contentFrame)
    self.driver.switch_to.frame(content_frame)
    administrationButtonCSS = self.driver.find_element(*MainPageLocators.AdministrationButtonCSS)



    # This class is the TestCase test class for the Login page where all the test cases is defined 
    import unittest
    from selenium import webdriver
    import page

    class LoginPage_TestCase(unittest.TestCase):

def setUp(self):
    self.driver = webdriver.Firefox()
    self.driver.get(""http://mypc:8080/testcore01"")

def test_login_valid_user(self):
    login_page = page.LoginPage(self.driver)
    login_page.userLogin_valid()
    login_page.isAdministration_present()
</code></pre>

<p>When i inspect the element in Firefox the HTML is as follows:</p>

<pre><code>    &lt;body style=""margin: 0px;""&gt;
    &lt;iframe id=""__gwt_historyFrame"" style=""position: absolute; width: 0;   height: 0; border: 0;"" tabindex=""-1"" src=""javascript:''""/&gt;
    &lt;iframe id=""testCore"" src=""javascript:''"" style=""position: absolute; width: 0px; height: 0px; border: medium none;"" tabindex=""-1""/&gt;
   &lt;div style=""position: absolute; z-index: -32767; top: -20cm; width: 10cm; height: 10cm; visibility: hidden;"" aria-hidden=""true""/&gt;
   &lt;div class=""gwt-TabLayoutPanelTab GEGQEWXCK"" style=""background-color: rgb(254, 255, 238);""&gt;
   &lt;div class=""gwt-TabLayoutPanelTabInner""&gt;
   &lt;div class=""gwt-HTML""&gt;Administration&lt;/div&gt;
</code></pre>",0,python|selenium|selenium-webdriver
29854784,Python Authomatic with local user/pass database?,"<p>I'm considering bringing authentication into my project (I currently use Auth0) and came across Authomatic which looks cool and promising.</p>

<p>A little background: I have a bare (no framework) WSGI app and I'd like to support both database logins and social logins.  I see Authomatic has good support for social/OAuth(2) providers, so I'm guessing it has everything I need (presumably generating secure cookies/tokens to authenticate the session) except a local provider.</p>

<p>So the parts I would need to add would be:
 1. a WSGI adapter
 2. a local/database provider e.g., like <a href=""https://github.com/jaredhanson/passport-local/tree/master/examples/express3-mongoose"" rel=""nofollow"">https://github.com/jaredhanson/passport-local/tree/master/examples/express3-mongoose</a></p>

<p>I'm guessing it's not too hard to add a local/database provider but I wanted to check: 1. Is this is a good idea, am I thinking about it correctly?  and 2. Has anyone done this already?</p>

<p>Many thanks!</p>",4,python|authentication|wsgi
29874529,Execute python script while open terminal,<p>I want this: Execute python script while I open terminal (I am using <code>iTerm</code> and <code>fish-shell</code>).</p>,-6,python|shell|python-2.7|terminal|fish
29948626,"Scapy layer for MPEG2-TS, with conditionalField for adaptation","<p>I try to create a MPEG2-TS layer for scapy.</p>

<p>I need to ""add"" and parse additional fields based on the adaptation field.</p>

<p>Here is my code:</p>

<pre><code>_adapt_type = {
0x0 : 'Reserved',
0x1 : 'Payload only',
0x2 : 'Adaptation only',
0x3 : 'Adaptation and payload',
}

class MPEG2_TS(Packet):
    name = ""MPEG2-TS""
    fields_desc=[

            ByteEnumField('sync_byte', 0x47, _sync_type),
            BitField('trans_err',0x0, 1),
            # Transport Error Indicator (TEI) if set to 1 decoder ignore packet

            BitField('start_ind',0x0, 1),
            BitField('trans_pri',0x0, 1),
            XBitField('pid', 0xA, 13),
            BitEnumField('trans_scramb', 0x0, 2, _scramble_type),
            BitEnumField('adapt_ctrl', 0x0, 2, _adapt_type),
            BitField('cont_count', 0x0, 4),
            ]
</code></pre>

<p>I need to parse additional data if the adapt_ctrl is set to:</p>

<pre><code>0x1 : 'Payload only',
0x2 : 'Adaptation only',
0x3 : 'Adaptation and payload'
</code></pre>

<p>How can I create a condition to be able to parse it base on the result of this field ?
If the ""Payload Only"" bit is set, there is no adaptation fields after the header, thus we didn't need to parse it.
If the ""Adaptation and payload"" is set, I need to parse the adaptation fields using the following structure:</p>

<pre><code>_adapt_fields = [

            # Number of bytes in the adaptation field immediately following this byte
            ByteField('ada_len', 0x0),

            # Set to 1 if current TS packet is in a discontinuity state with respect to either the continuity counter or the program clock reference
            BitField('dis', 0x0, 1),

            # Set to 1 if the PES packet in this TS packet starts a video/audio sequence
            BitField('ran_acc', 0x0, 1),

            # 1 = higher priority
            BitField('ES_str_pri', 0x0, 1),

            # Set to 1 if adaptation field contains a PCR field
            BitField('PCR_fla', 0x0, 1),                

            # Set to 1 if adaptation field contains an OPCR field
            BitField('OPCR_fla', 0x0, 1),

            # Set to 1 if adaptation field contains a splice countdown field
            BitField('spl_fla', 0x0, 1),

            # Set to 1 if adaptation field contains private data bytes
            BitField('trs_pri_dat_fla', 0x0, 1),

            # Set to 1 if adaptation field contains an extension
            BitField('ada_ext_fla', 0x0, 1),                

            # variable Depends on flags
            # BitField('ada_ext_fla', 0x0, 1),              
            # PCR   33+6+9      Program clock reference, stored in 6 octets in big-endian as 33 bits base, 6 bits padding, 9 bits extension.
            # OPCR  33+6+9      Original Program clock reference. Helps when one TS is copied into another
            # Splice countdown  8       Indicates how many TS packets from this one a splicing point occurs (may be negative)
            # Stuffing bytes    variable        
            ]
</code></pre>

<p>I tried with some ConditionalField but without luck till now.
Thanks for help.</p>",1,python|scapy
29950985,Is cProfile betraying me?,"<p>I wanted to know why my <code>pyzmq</code> and <code>protobuf</code> based messaging ping-pong is much slower than expected, so I used <code>cProfile</code> to inspect the script you find at the end of this post.</p>

<pre><code>protoc --python_out=. rpc.proto
python -m cProfile -o rpc.pstats ./test_rpc.py
</code></pre>

<p>returns</p>

<pre><code>3.604 sec for 10000 messages, 360.41us/m, 2774 m/s
</code></pre>

<p>and</p>

<pre><code>python -m pstats rpc.pstats 
rpc.pstats% sort tottime
rpc.pstats% stats 10
</code></pre>

<p>gives me (just for the client process):</p>

<pre><code>         619163 function calls (618374 primitive calls) in 3.779 seconds

   Ordered by: internal time
   List reduced from 580 to 30 due to restriction &lt;30&gt;

   ncalls  tottime  percall  cumtime  percall filename:lineno(function)
    10002    2.658    0.000    2.658    0.000 {method 'recv' of 'zmq.backend.cython.socket.Socket' objects}
    10002    0.088    0.000    0.088    0.000 {method 'send' of 'zmq.backend.cython.socket.Socket' objects}
    10001    0.060    0.000    3.654    0.000 ./test_rpc.py:36(rpc_set)
    10002    0.058    0.000    3.457    0.000 ./test_rpc.py:32(zmq_reply)
    80016    0.056    0.000    0.056    0.000 {method 'write' of 'cStringIO.StringO' objects}
    10002    0.056    0.000    0.424    0.000 /usr/lib/python2.7/site-packages/google/protobuf/internal/python_message.py:781(InternalSerialize)
    30004    0.054    0.000    0.137    0.000 /usr/lib/python2.7/site-packages/google/protobuf/internal/python_message.py:453(setter)
    20002    0.051    0.000    0.058    0.000 /usr/lib/python2.7/site-packages/google/protobuf/internal/type_checkers.py:113(CheckValue)
    10002    0.050    0.000    0.055    0.000 /usr/lib/python2.7/site-packages/google/protobuf/internal/python_message.py:839(IsInitialized)
    10002    0.050    0.000    0.148    0.000 /usr/lib/python2.7/site-packages/google/protobuf/internal/python_message.py:577(ListFields)

...
</code></pre>

<p>The strange thing about this is: <code>recv()</code>/<code>send()</code> from <code>pyzmq</code> seem to consume about <strong>2700 ms</strong> while <code>protobuf</code> only consumes about <strong>250 ms</strong>.</p>

<p>But that's not true!</p>

<p>If I leave away the <code>protobuf</code> part, the same process only consumes about <strong>1350 ms</strong> (-65%) on the same system. (I didn't add the <code>pyzmq</code>-only script but you can just send a couple of bytes instead of the serialized data)</p>

<p>These extra 65% are attributed by nearly 100% to <code>pyzmq</code> which are actually consumed by <code>protobuf</code>.</p>

<p><strong>Question:</strong> What's going on here? How can I profile my script in a way that points me to <code>protobuf</code> rather than <code>pyzmq</code> in this case?</p>

<p>In order to reproduce the date you have to have <code>protobuf-python</code> and <code>python-zmq</code> installed. Here are the script used for this experiment:</p>

<p>test_rpc.py:</p>

<pre><code>import sys
import time
import threading
import subprocess
import zmq

import rpc_pb2  # must be generated first

if '--server' in sys.argv:
    print('zmq_protobuf_rpc_server')
    context = zmq.Context()
    socket = context.socket(zmq.REP)
    socket.bind(""tcp://*:5556"")

    request = rpc_pb2.rpc_request()
    reply = rpc_pb2.rpc_reply()

    while True:

        request.ParseFromString(socket.recv())
        if request.type == rpc_pb2.rpc_request.SET:
            value = request.value
        elif request.type == rpc_pb2.rpc_request.GET:
            reply.value = ""value""
        socket.send(reply.SerializeToString())
        if request.type == rpc_pb2.rpc_request.QUIT:
            break

else:
    def zmq_reply(req_msg, rep_msg, socket):
        socket.send(req_msg.SerializeToString())
        rep_msg.ParseFromString(socket.recv())

    def rpc_set(req_msg, rep_msg, socket, name, value):
        req_msg.type = rpc_pb2.rpc_request.SET
        req_msg.name = name
        req_msg.value = value
        zmq_reply(req_msg, rep_msg, socket)

    def rpc_get(req_msg, rep_msg, socket, name):
        req_msg.type = rpc_pb2.rpc_request.GET
        req_msg.name = name
        zmq_reply(req_msg, rep_msg, socket)
        return rep_msg.value

    print('zmq_protobuf_rpc')
    p = subprocess.Popen([sys.executable, '-u', __file__, '--server'])
    context = zmq.Context()
    socket = context.socket(zmq.REQ)
    socket.connect(""tcp://127.0.0.1:5556"")  # IPC would be a bit faster

    request = rpc_pb2.rpc_request()
    reply = rpc_pb2.rpc_reply()

    # wait for the server to be responsive
    rpc_set(request, reply, socket, 'hello', 'hello')

    N = 10000

    t = time.time()
    for i in range(N):
        rpc_set(request, reply, socket, 'name', str(i))
    t = time.time() - t
    print(""%.3f sec for %d messages, %.2fus/m, %d m/s"" 
          % (t, N, t / N * 1000000, N/t))

    request.type = rpc_pb2.rpc_request.QUIT
    zmq_reply(request, reply, socket)

    p.wait()
</code></pre>

<p>rpc.proto:</p>

<pre><code>package rpc;

message rpc_request {
    enum RpcType {GET = 0; SET = 1; QUIT = 2; }
    required RpcType type = 1;
    required string name = 2;
    optional string value = 3; }

message rpc_reply {
    optional string value = 3; }
</code></pre>",2,python|profiling|protocol-buffers|pyzmq|cprofile
29990202,ObjectListView wxPython: how to show a wx.Color,"<p>I am using wxPython ObjectListView and it is very easy to use. Now I need to render a wx.Color as a column but I haven't found a way in the documentation. Basically I have list of items each of them have the following attributes: name, surname and hair color. Hair color is a RGB color and I would like to show it as a column in my ObjectListView.</p>

<p>Is there a way to do it ?
Many thanks</p>",0,python|wxpython|objectlistview-python
29997777,How do I create an apparmor profile for an application that runs using Python's twisted library?,"<p>I'm trying to create an apparmor profile for a networking application with access to ssh and runs using Python's twisted library. I have tried using aa-genprof to generate a profile. In another bash, I ran my applications with a few test cases. However, no rules are being generated. How do I go about generating the profile?</p>",5,python|security|twisted|apparmor
30003836,"Python, how do I drop the first octet in reverse zone? fun with strings","<p>I need to create a reverse DNS entry for IPv4. </p>

<p>The ip address is 108.61.190.64</p>

<p>But the reverse DNS entry is = each octet in reverse order with the last octet dropped</p>

<p>i.e.</p>

<pre><code>$ORIGIN 190.61.108.IN-ADDR.ARPA.
</code></pre>

<p>or </p>

<pre><code>12.34.56.78 -&gt;  78.56.34.12
</code></pre>

<p>Is there a Python tool for this task?
[::-1] does a complete reverse and not just rearranging the octets.</p>

<p>P.S. I have the same reverse issue for IPv6 but no octet is to be dropped.</p>",0,python|dns|ip|reverse
30008038,How to use logging unicode in python 2.6?,"<p>I have a simple logging handler:</p>

<pre><code>log = logging.getLogger()
ch = logging.StreamHandler(sys.stdout)
log.setLevel(logging.INFO)
formatter = logging.Formatter('%(levelname)s - %(message)s')
ch.setFormatter(formatter)
log.addHandler(ch)
</code></pre>

<p>command:</p>

<pre><code>log.error(unicode(''))
</code></pre>

<p>result:</p>

<pre><code>UnicodeDecodeError
</code></pre>

<p>How to logging unicode message ? </p>",0,python
29754352,Using SQL Failover Partner with pyodbc,"<p>Is pyodbc capable of using a failover partner?  ODBC says it's supported so I'm not sure why what I have is not working:</p>

<pre><code>db = pyodbc.connect(driver='{SQL Server}', database=DATABASE, server=PRIMARY, failover_partner=SECONDARY)
</code></pre>

<p>My database is SQL Server 2008.  The only other thing I can do at this point is use a try/except to handle the connection creation but I'd vastly prefer doing this the way I understand SQL is intended to work.</p>",1,python|sql|sql-server|odbc|pyodbc
29857609,Scrapy - Issue with xpath on an xml crawl,"<p>I'm trying to make a simple spider to grab some xml and spit it out in a new format for an experiment. However it seems there is extra code contained within the xml which is spat out. The format I want is like this (no extra code or value tag) along the lines of this: <code>&lt;body&gt;Don't forget me this weekend!&lt;/body&gt;</code></p>

<p>I think I am using xpath wrong but I'm not sure what I'm doing wrong.</p>

<p>Spider</p>

<pre><code>from scrapy.contrib.spiders import XMLFeedSpider
from crawler.items import CrawlerItem

class SiteSpider(XMLFeedSpider):
    name = 'site'
    allowed_domains = ['www.w3schools.com']
    start_urls = ['http://www.w3schools.com/xml/note.xml']
    itertag = 'note'

    def parse_node(self, response):
        xxs = XmlXPathSelector(response)
        to = xxs.select('//to')
        who = xxs.select('//from')
        heading = xxs.select('//heading')   
        body = xxs.select('//body')           
        return item
</code></pre>

<p>Input </p>

<pre><code>&lt;note&gt;
&lt;to&gt;Tove&lt;/to&gt;
&lt;from&gt;Jani&lt;/from&gt;
&lt;heading&gt;Reminder&lt;/heading&gt;
&lt;body&gt;Don't forget me this weekend!&lt;/body&gt;
&lt;/note&gt;
</code></pre>

<p>Curreont (wrong) Output</p>

<pre><code>&lt;?xml version=""1.0"" encoding=""UTF-8""?&gt;
&lt;items&gt;
   &lt;item&gt;
      &lt;body&gt;
         &lt;value&gt;&amp;lt;body&amp;gt;Don't forget me this weekend!&amp;lt;/body&amp;gt;&lt;/value&gt;
      &lt;/body&gt;
      &lt;to&gt;
         &lt;value&gt;&amp;lt;to&amp;gt;Tove&amp;lt;/to&amp;gt;&lt;/value&gt;
      &lt;/to&gt;
      &lt;who&gt;
         &lt;value&gt;&amp;lt;from&amp;gt;Jani&amp;lt;/from&amp;gt;&lt;/value&gt;
      &lt;/who&gt;
      &lt;heading&gt;
         &lt;value&gt;&amp;lt;heading&amp;gt;Reminder&amp;lt;/heading&amp;gt;&lt;/value&gt;
      &lt;/heading&gt;
   &lt;/item&gt;
&lt;/items&gt;
</code></pre>",1,python|xml|xpath|scrapy|scrapy-spider
30046902,The ``/`` character is not allowed in object names,"<p>I am working with a structure within the HDF5 file that has names with '/' in them. When I load said file, I get this warning:</p>

<pre><code>developIn[1]import pandas as pd

   develop  In [2]  store = pd.HDFStore('data/XXX-20150423-071618.h5')       

   develop  In [3]  store
/home/XXX/virt/env/develop/lib/python2.7/site-packages/tables/group.
py:1156: UserWarning: problems loading leaf ``/log``::

  the ``/`` character is not allowed in object names: 'XXX/align/aft_port_end/extend_pressure'

The leaf will become an ``UnImplemented`` node.
  % (self._g_join(childname), exc))
</code></pre>

<p>We <em>could</em> change those but it would be a major PITA and would involve hacking existing critical files.  So, while possible we would like not to do that.</p>

<p>Is there any way we can have '/' in names or is it just not supported?</p>

<pre><code>&gt;&gt;&gt; pd.show_versions()

INSTALLED VERSIONS
------------------
commit: None
python: 2.7.5.final.0
python-bits: 64
OS: Linux
OS-release: 3.10.0-229.1.2.el7.x86_64
machine: x86_64
processor: x86_64
byteorder: little
LC_ALL: None
LANG: en_GB.UTF-8

pandas: 0.16.0
nose: 1.3.6
Cython: 0.22
numpy: 1.9.2
scipy: 0.15.1
statsmodels: None
IPython: 3.0.0
sphinx: 1.2.3
patsy: None
dateutil: 2.4.2
pytz: 2015.2
bottleneck: None
tables: 3.1.1
numexpr: 2.2.2
matplotlib: 1.4.3
openpyxl: None
xlrd: None
xlwt: None
xlsxwriter: None
lxml: None
bs4: None
html5lib: None
httplib2: None
apiclient: None
sqlalchemy: 0.9.7
pymysql: None
psycopg2: None
</code></pre>",2,python|pandas|scipy
30148532,wxpython boxsizer addmany spacer,"<p>How can I add a spacer between two items in a boxsizer, while using Add Many?
I tried key words like Spacer, AddSpacer and things like that but unfortunately, it didn't work. </p>",0,python|wxpython|boxsizer
29876917,How to check string is laid out in correct format (Python),"<p>I am coding a program which needs to import log files.
The user must input the name of the file in the correct order of 'DD-HH.MM' (day, hour, minute). Is there any way to validate that the users input is in the correct order?</p>

<p>Thanks in advance</p>",0,python|string|comparison
30071948,How to re-match a group that did not capture anything?,"<p>I'm trying to parse a string in which a certain section can either be enclosed between <code>""</code> or <code>'</code> or not be enclosed at all.  However, I'm struggling finding a <strong>syntax that works when no quotation marks are there at all</strong>.</p>

<p>See the following (simplified) example:</p>

<pre><code>&gt;&gt;&gt; print re.match(r'\w(?P&lt;quote&gt;(\'|""))?\w', 'f""oo').group('quote')
""

&gt;&gt;&gt; print re.match(r'\w(?P&lt;quote&gt;(\'|""))?\w', 'foo').group('quote')
None

&gt;&gt;&gt; print re.match(r'\w(?P&lt;quote&gt;(\'|""))?\w(?P=quote)', 'f""o""o').group('quote')
""

&gt;&gt;&gt; print re.match(r'\w(?P&lt;quote&gt;(\'|""))?\w(?P=quote)', 'foo').group('quote')
Traceback (most recent call last):
  File ""&lt;string&gt;"", line 1, in &lt;module&gt;
  File ""&lt;string&gt;"", line 1, in &lt;module&gt;
AttributeError: 'NoneType' object has no attribute 'group'
'NoneType' object has no attribute 'group'
</code></pre>

<p><strong>The desired result for the last attempt should be <code>None</code> as the second command in the example.</strong></p>",0,python|regex
29754675,reStructuredText in Sphinx: display number when referencing a section,"<p>To reference a section using reStructuredText in Sphinx, I can do:</p>

<pre><code>.. _my-reference-label:

Section to cross-reference
--------------------------

This is the text of the section.

It refers to the section itself, see :ref:`my-reference-label`.
</code></pre>

<p>as explained <a href=""https://stackoverflow.com/a/19543591/1391441"">here</a>.</p>

<p>This results in the section being referenced <strong>by title</strong>, that is I get the line:</p>

<blockquote>
  <p>It refers to the section itself, see <em><a href=""http://section-to-cross-reference"" rel=""nofollow noreferrer"">Section to cross-reference</a></em>.</p>
</blockquote>

<p>(where <em>Section to cross-reference</em> links to the beginning of the corresponding section)</p>

<p>I'd like to get instead:</p>

<blockquote>
  <p>It refers to the section itself, see <em><a href=""http://section-to-cross-reference"" rel=""nofollow noreferrer"">2.1</a></em>.</p>
</blockquote>

<p>where <em>2.1</em> is the section's number.</p>

<p>Is there a way to accomplish this using reStructuredText in Sphinx?</p>",2,python-sphinx|restructuredtext
29905184,Django how to get haystack working with django-hvad,"<p>I'm working on a multilingual application where I need to implement a search engine, I opted for haystack.</p>

<p>This is the model I want to index</p>

<pre><code>class Post(TranslatableModel):
    category = models.ForeignKey(
        Category,
        related_name='posts',
        verbose_name=_(u'Categora')
    )
    slug = AutoSlugField(
        populate_from='title'
    )
    featured_picture = ThumbnailerImageField(
        upload_to='blog/posts/featured-pictures',
        verbose_name=_(u'Imagen destacada'),
        help_text=_(u'Tamao: 850 x 423px. Ser recordada si no.')
    )
    box_bg = models.CharField(
        max_length=20,
        verbose_name=_(u'Color de fondo de la caja'),
        choices=SERVICE_BOX_COLORS,
        # Could be an image
        null=True, blank=True
    )
    box_image_bg = ThumbnailerImageField(
        upload_to='blog/posts/background-images',
        verbose_name=_(u'Imagen de fondo de la caja'),
        null=True, blank=True,
        help_text=_(u'Tamao: 500 x 500px. Ser recordada si no.')
    )

    translations = TranslatedFields(
        title=models.CharField(
            max_length=100,
            verbose_name=_(u'Ttulo')
        ),
        content=RichTextField(
            verbose_name=_(u'Contenido')
        ),
        meta_description=models.TextField(
            verbose_name=_(u'Meta description (SEO)'),
            help_text=_(u'Mximo 160 caracteres.'),
            max_length=160
        )
    )
</code></pre>

<p>I don't know in haystack how to deal with hvad translation fields</p>",1,python|django|django-haystack|django-hvad
29934111,Getting data from response meta or getting data from item loader. Which is better?,"<p>I have written a spider where I am sending some data from parent function to child function via meta. In child function I am parsing these items. But if some data is not found in <code>response.meta.get('name')</code> I am writing some xpath in child function. </p>

<p>Which is the better way in these two?</p>

<p>1) </p>

<pre><code>item.add_value('name', response.meta.get('name'))
if not item.get_output_value('name'):
    item.add_xpath('name', 'xpath')
</code></pre>

<p>2) </p>

<pre><code>if response.meta.get('name', ''):
    item.add_value('name', response.meta.get('name'))
else:
    item.add_xpath('name', 'xpath')
</code></pre>",0,python|xpath|web-scraping|scrapy
29974564,Python script with date input,"<p>So I have a script that takes data every 30 seconds for an indefinite amount of time. It saves the data to a text file that is easily read by another program that I can run on another desktop. </p>

<p>Ideally what I would want is a simple user interface where I can input a data, or just a simple string by using a text box or even a drop down menu. Here's the part of my code where the date would go:</p>

<pre><code>today = datetime.date.today()

date = str(today)

test = open('[B20] ' + date + ""-Temp_Press_Data.txt"")

test = test.read()
</code></pre>

<p>Right now, it just grabs today's date and makes the graph from today's data collected so far. But I can also do this if I wanted to graph the data from yesterday:</p>

<pre><code>today = '2015-04-29'

date = str(today)

test = open('[B20] ' + date + ""-Temp_Press_Data.txt"")

test = test.read()
</code></pre>

<p>What's the best way to go about this. Any help would be appreciated. Thanks.</p>",2,python|date|input
30007478,python ipaddress()reverse_pointer equivalent for 3.4,"<p>I am trying to get the reverse IPv6 arpa from a valid IPv6 address but the feature I would like to use is only available in Python3.5 and FreeBSD ports is still on Python3.4</p>

<pre><code>In [1]: import ipaddress
In [3]: ipaddress.ip_address(""2001:db8::1"").reverse_pointer

AttributeError: 'IPv6Address' object has no attribute 'reverse_pointer'
</code></pre>

<p>What is the Python3.4 equivalent to get the reverse IPv6 arpa?</p>

<p><a href=""https://docs.python.org/dev/library/ipaddress.html"" rel=""nofollow"">ipaddress 3.5 manual page</a></p>",1,python|dns|ip|ipv6
30043709,Python: sorting a list of tuples on alpha case-insensitive order,"<p>I have a list of tuples (""twoples"")</p>

<pre><code>[('aaa',2), ('BBB',7), ('ccc',0)]
</code></pre>

<p>I need to print it in that order, but</p>

<pre><code>&gt;&gt;&gt; sorted([('aaa',2), ('BBB',7), ('ccc',0)])
</code></pre>

<p>gives</p>

<pre><code>[('BBB', 7), ('aaa', 2), ('ccc', 0)]

list.sort(key=str.tolower)
</code></pre>

<p>doesn't work (obviously), because</p>

<pre><code>AttributeError: type object 'str' has no attribute 'tolower'
</code></pre>

<p>I don't want to change the strings in the list.</p>

<p>Another answer gave</p>

<pre><code>list.sort(key=lambda (a, b): (a.lower(), b))
</code></pre>

<p>but that must be a Python 2 thing, because</p>

<pre><code>SyntaxError: invalid syntax
</code></pre>

<p>... at the first (</p>

<p>itemgetter() doesn't help, because there's only one 'key' allowed</p>",3,python|list|sorting
30125515,Filtering out redundant repeated data from a pandas dataframe,"<p>I have a dataframe that looks a like this;</p>

<pre><code>index, othercols, FPN
ts1, otherStuff, val1
ts2, otherStuff, val2
ts3, otherStuff, val3
ts4, otherStuff, val4
....
tsn, otherStuff, valn
</code></pre>

<p>Because of the external data source a lot of these values will be repeated- so in million row dataframe there will be several pieces up to 10,000s entries long all just repeating the same data for concurrent timestamps. For my purposes at least this repetition is not necessary, so I want to remove all the repeated rows apart from the beginning and end of each section like so;</p>

<pre><code>1, 0
2, 0
3, 0
4, 5
5, 0
6, 0
</code></pre>

<p>becomes</p>

<pre><code>1, 0 
3, 0
4, 5
5, 0
6, 0
</code></pre>

<p>I have managed to do this, but it's slower than I would like (takes 2 mins for a single 60mb file; mostly in the apply part as seen below) and I'm thinking that there must be a better way of doing it</p>

<p>Here's my cobbled together solution, is there a neater/faster way of doing this?;</p>

<pre><code>data=df['FPN']

shft_up=(copy.deepcopy(data)).tolist()
shft_dn=(copy.deepcopy(data)).tolist()

del shft_up[0]
shft_up=shft_up+[None]

del shft_dn[-1]
shft_dn=[None]+shft_dn

df['shft_up']=shft_up
df['shft_dn']=shft_dn

def is_rep(row):
    if row['shft_dn']==row['FPN'] and row['shft_up']==row['FPN']:
        return 1
    else:
        return 0  

df['mask_col']=df.apply(lambda row:is_rep(row),axis=1,reduce=False)

df=(df[df['mask_col']==0]).drop(['shft_up','shft_dn','mask_col'],axis=1)
</code></pre>",3,python|pandas
29932707,UnboundLocalError: local variable 'X' referenced before assignment Python for simbols fixer,"<p>I have to do a simbols fixer in python for LateX
So I made this code and I dont know why it shows </p>

<blockquote>
<pre><code>Traceback (most recent call last):
  File ""C:\Users\Stark's ProBook\Desktop\prueba.py"", line 92, in &lt;module&gt;
    BracketFind()
  File ""C:\Users\Stark's ProBook\Desktop\prueba.py"", line 30, in BracketFind
    for h in archivo:
UnboundLocalError: local variable 'archivo' referenced before assignment
</code></pre>
</blockquote>

<p>this is my code is for Python 2.7</p>

<pre><code># -*- coding: cp1252 -*-

archivo = open(""test.txt"", ""r"")
texto = archivo.readlines()
archivo = """".join(texto)
Opening = 0
Closes = 0
print archivo      

def Count():
    return contador('{')-contador('}')

def contador(simbolo):
    conta = 0
    for h in archivo:
        if simbolo == h:
            conta= conta+1
    return conta

def Insert(string, index):
    return string[:index] + '.' + string[index:]

def Remove(string, index):
    return string[:index-1] + '.' + string[index+1:]

def BracketFind():

    Opening = 0
    Closes = 0
    for h in archivo:
        if '{' == h:
            Opening = Opening+1
        elif '}' ==h:
            Closes = Closes+1

    print ""Abiertas ({) ""+ str(Opening) + "" Cerradas (}) ""+str(Closes)
    Position = -1
    StartReplacing = False
    OpenPosition = -1
    while True:
        Position = -1
        StartReplacing = False
        OpenPosition = -1
        if Count() == 0:
            print ""Revision exitosa!!, No existe ninguna { sin cerrar "" +""Si tienes problemas de compilacion no es por esta razn. "" + ""Revisa tu codigo en busca de otro error""
            return True
        if contador('{') == 0 and contador('}')&gt;0:
            break
        if contador('{') &gt; 0 and contador('}') == 0:
            break
        for Character in archivo:
            Position = Position+1
            if Character == '{':
                OpenPosition = Position
                StartReplacing = True
            if StartReplacing:
                if Character == '}':
                    try:
                        archivo = Remove(archivo,OpenPosition)
                        archivo = Insert(archivo,OpenPosition)
                        archivo = Remove(archivo,Position)
                        archivo = Insert(archivo,Position)
                    except:
                        break
    iPos = -1
    iCount = -1
    iTarget = 0
    iType = 0

    if '{' in archivo:
        iTarget = archivo.rfind('{')
        print iTarget
        iType = 1
    elif '}' in archivo:
            iTarget = archivo.rfind('}')
            iType = 2
    if iTarget == -1:
        return True
    if iType == 1:
        print ""La llave que abre ("" , iTarget , "") quizas es inecesaria o parece no estar cerrada""
    elif iType == 2:
            print ""La llave que cierra ("" , iTarget , "") quizas es inecesaria o parece no estar cerrada""
    for Character in archivo:
        iPos = iPos+1
        if Character == '{' or Character == '}':
            iCount = iCount+1
            if(iCount == iTarget):
               print ""La llave "",iCount , ""Parece tener error""
    return True

print Count()
BracketFind()
</code></pre>

<p>Do You have an idea about what is causing this?
I dont understand why is showing this if at the begin of the execution it prints 'archivo' </p>",2,python
29967612,WebSockets best practice for connecting an external application to push data,"<p>I am trying to understand how to use websockets correctly and seem to be missing some fundamental part of the puzzle.</p>

<p>Say I have a website with 3 different pages:</p>

<ul>
<li>newsfeed1.html </li>
<li>newsfeed2.html </li>
<li>newsfeed3.html</li>
</ul>

<p>When a user goes to one of those pages they get a feed specific to the page, ie newsfeed1.html = sport, newsfeed2.html = world news etc.</p>

<p>There is a CoreApplication.py that does all the handling of getting data and parsing etc.</p>

<p>Then there is a WebSocketServer.py, using say Autobahn.</p>

<p>All the examples I have looked at, and that is alot, only seem to react to a message from the client (browser) within the WebSocketServer.py, think chat echo examples. So a client browser sends a chat message and it is echoed back or broadcast to all connected client browsers.</p>

<p>What I am trying to figure out is given the following two components:</p>

<ul>
<li><p>CoreApplication.py</p></li>
<li><p>WebSocketServer.py</p></li>
</ul>

<p>How to best make CoreApplication.py communicate with WebSocketServer.py for the purpose of sending messages to connected users.</p>

<p>Normally should CoreApplication.py simply send command messages to the WebSocketServer.py as a client. For example like this:</p>

<p>CoreApplication.py -> Connects to WebServerSocket.py as a normal client -> sends a Json command message (like broadcast message X to all users || send message Y to specific remote client) -> WebSocketServer.py determines how to process the incoming message dependant on which client is connected to which feed and sends to according remote client browsers.</p>

<p>OR, should CoreApplication.py connect programatically with WebSocketServer.py? As I cannot seem to find any examples of being able to do this for example with Autobahn or other simple web sockets as once the WebSocketServer is instantiated it seems to run in a loop and does not accept external sendMessage requests?</p>

<p>So to sum up the question: What is the best practice? To simply make CoreApplication.py interact with WebSocketServer.py as a client (with special command data) or for CoreApplication.py to use an already running instance of  WebSocketServer.py (both of which are on the same machine) through some more direct method to directly sendMessages without having to make a full websocket connection first to the WebSocketServer.py server?</p>",2,python|websocket
29948375,Matplotlib Basemap not working Windows 8.1,"<p>I want to plot some GPS-data using python 2.7 using matplotlibs basemap.</p>

<p>I download the binary windows installer and it executes and run without any problems. However, when I try to import and run in python I get:</p>

<pre><code>from mpl_toolkits.basemap import basemap
ImportError: No module named basemap
</code></pre>

<p>I tried the</p>

<pre><code>python setup.py 
</code></pre>

<p>and </p>

<pre><code>pip install basemap-1.0.8-cp27-none-win_amd64
</code></pre>

<p>in prompt which seems to be succesful. 
GEOS, which is a dependency should be involved in the Basemap installer but I installed OSGeo4w64 separately to make sure geos_c and <strong>init</strong> is in place. </p>

<p>I hope someone can help me out. This feels like it is well above my level.</p>

<p>I have ofcourse looked through other threads on this page, but none of them seem to offer a solution.</p>

<p>Best regards</p>",0,python|matplotlib-basemap
30202348,Formatting time on a plot in Python,"<p>I have the following code and was wondering how I could format the time to read in a 12 hr format. e.g. 0:00, 3:30, 10:00 etc. as of now the y axis reads 00:00:00, 00:01:00, 00:02:00 and so on. The data in the csv was formatted like this, 0:00, 1:00,2:00 etc.</p>

<p>How could I go about formatting the y axis to the format I need to?</p>

<p>Here is the code I have:</p>

<pre><code>import pandas as pd
import matplotlib.pyplot as plt
import datetime

data = pd.read_csv('data.csv', sep=',', header=None)

ints = data[data[1]=='INT']
exts = data[data[1]=='EXT']

int_times = [datetime.datetime.time(datetime.datetime.strptime(t, '%H:%M')) 
             for t in ints[4]]
ext_times = [datetime.datetime.time(datetime.datetime.strptime(t, '%H:%M')) 
             for t in exts[4]]
int_dist = [d for d in ints[3]]
ext_dist = [d for d in exts[3]]

axis_times = ['0:00','01:00', '02:00', '03:00', '04:00', '05:00','06:00',
              '07:00','08:00','09:00','10:00','11:00','12:00']

fig, ax = plt.subplots()
ax.scatter(int_dist, int_times, c='red', s=50)
ax.scatter(ext_dist, ext_times, c='blue', s=50)

plt.yticks( axis_times, size='small')

plt.legend(['INT', 'EXT'], loc=4)
plt.xlabel('Distance')
plt.ylabel('Time')

plt.show()
</code></pre>

<p>Here is an image of what the graph shows: 
<img src=""https://i.stack.imgur.com/rxeeN.jpg"" alt=""enter image description here""></p>",1,python|datetime|pandas|matplotlib
29961898,How to track anonymous users with Flask,"<p>My app implements a shopping cart in which anonymous users can fill their cart with products. User Login is required only before payment. How can this be implemented?</p>

<p>The main challenge is that flask must keep track of the user (even if anonymous) and their orders. My current approach is to leverage the <code>AnonymousUserMixin</code> object that is assigned to <code>current_user</code>. The assumption is that <code>current_user</code> will not change throughout the session. However, I noticed that a new <code>AnonymousUserMixin</code> object is assigned to <code>current_user</code>, for example, upon every browser page refresh. Notice that this does not happen if a user is authenticated.</p>

<p>Any suggestions on how to circumvent this?</p>",6,python|flask|flask-login|anonymous-users
30036300,Tkinter label go at the bottom of the frame,"<p>I have kind of a problem with my little Python application using Tkinter and the pack layout management. I don't understand why the labels go at the bottom of the frame.</p>

<p>Here is the code:</p>

<pre><code>class App:

def __init__(self, master):

    frame = Frame(master)
    frame.pack()

    photo = PhotoImage(file=""icone.gif"")
    self.label = Label(image=photo)
    self.label.image = photo # keep a reference!
    self.label.pack()

    self.labelNet = Label(master, text='NetID:')
    self.labelNet.pack()

    self.netID = Entry(frame,width=20)
    self.netID.pack()

    self.password = Label(master, text='Password:')
    self.password.pack()

    self.password = Entry(frame, show=""*"",  width=20)
    self.password.pack()

    self.install = Button(frame, text=""Activer"", command=self.install)
    self.install.pack()

    self.uninstall = Button(frame, text=""Dsactiver"", command=self.uninstall)
    self.uninstall.pack()
</code></pre>

<p>called by:</p>

<pre><code>root = Tk()
root.title(""Title"")
root.geometry(""200x280"")
app = App(root)
root.mainloop()
</code></pre>

<p>The result:</p>

<p>Do you have any idea what the problem could be ?</p>

<p>Thanks !</p>",0,python|tkinter|label|tk|pack
30052990,How to use OpenStreetMap background on Matplotlib Basemap,"<p>This should be simple, but when I look for it I just find web packages. I need something better than as oriented on <a href=""https://stevendkay.wordpress.com/2010/02/24/plotting-points-on-an-openstreetmap-export/"" rel=""noreferrer"">This Blog</a>. Maybe using <code>.oms</code> file or shapefiles. Some way to give bbox and get the OpenStreetMap background on <code>Basemap</code> map.</p>

<p>I found some questions like this on Stack, but the answers directs to, or download the <code>.png</code> file on OpenStreetMap website, or to use some web package.</p>",8,python-2.7|gis|openstreetmap|matplotlib-basemap
29824155,Python fill matrix with specific values,"<p>I have 2D matrix and I want to fill it with 0 and 1. And I have a list include some value. </p>

<p>For example:</p>

<pre><code>values = [1, 3, 5, 8]
</code></pre>

<p>and I want to create this matrix</p>

<pre><code>matrix = [[0, 1, 0],
          [1, 0, 1],
          [0, 0, 1]]
</code></pre>

<p>I made this with two nested for loop witf if statement. Values is random integers from 0 to 100. And my matrix will be 10*10. Is there any way to create this more elegant?</p>",3,python|matrix
29855047,defining half of the module in one package and other half in another in python,"<p>I want to do this. </p>

<p>In package 1 </p>

<pre><code>xyz
  __init__.py 
  abc 
     __init__.py
</code></pre>

<p>In package 2 </p>

<pre><code>xyz 
   efg
      __init__.py 
</code></pre>

<p>to get an overall view with both combined. This is possible to do in java even though the classes are in separate jars. Is this something I can do in Python even if I have 2 separate eggs for it? </p>",0,python|python-2.7|pip
30163728,How to prevent IPython from activate to the cell below after running a cell?,"<p>After running a code in given cell, <code>IPython</code> goes down to the next cell below and activate it.</p>

<p>How to set IPython so that it ""stays"" in the same cell after code is run?</p>",0,ipython
30167692,iPython Set Up Missing Steps?,"<p>The documentation for iPython can be found here:</p>

<p><a href=""http://ipython.org/ipython-doc/stable/index.html"" rel=""nofollow"">http://ipython.org/ipython-doc/stable/index.html</a></p>

<p>They have the section labeled ""Installation"" which says all you need to do is run <code>pip install ipython</code>. Okay, I did that.</p>

<p>Then the next section skips to using ipython.</p>

<p>Okay, so it must be installed, right? Enter <code>python</code> to enter your interactive prompt and... nothing looks different... but just try using its features! <code>?</code>! Nope, that's a <code>SyntaxError</code>, just like normal.</p>",-1,python|ipython
29973059,How to stratify data using Orange?,"<p>Looking for some help from the Orange experts out there.</p>

<p>I have a data set of about 6 million lines.  For simplicity's sake, we'll consider only two columns.  One is of positive decimal numbers and is imported as a continuous value.  The other is of discrete values (either 0 or 1) where there is a ratio of 30:1 for 1's to 0's.</p>

<p>I am using a classification tree (which I label as 'learner') to get the classifier.  I'm then trying to do a cross-validation on my data set while adjusting for the overwhelming 30:1 sample bias.  I've tried several variations to do this but continue to get the same result regardless of whether I stratify the data or not.</p>

<p>Below is my code and I've commented out the various lines I've tried (using both True and False values for stratification):</p>

<pre><code>import Orange
import os
import time
import operator

start = time.time()
print ""Starting""
print """"

mydata = Orange.data.Table(""testData.csv"")

# This is used only for the test_with_indices method below
indicesCV = Orange.data.sample.SubsetIndicesCV(mydata)

# I only want the highest level classifier so max_depth=1
learner = Orange.classification.tree.TreeLearner(max_depth=1)

# These are the lines I've tried:
#res = Orange.evaluation.testing.cross_validation([learner], mydata, folds=5, stratified=True)
#res = Orange.evaluation.testing.proportion_test([learner], mydata, 0.8, 100, store_classifiers=1)
res = Orange.evaluation.testing.proportion_test([learner], mydata, learning_proportion=0.8, times=10, stratification=True, store_classifiers=1)
#res = Orange.evaluation.testing.test_with_indices([learner], mydata, indicesCV)

f = open('results.txt', 'a')
divString = ""\n##### RESULTS ("" + time.strftime(""%Y-%m-%d %H:%M:%S"") + "") #####""
f.write(divString)
f.write(""\nAccuracy:     %.2f"" %  Orange.evaluation.scoring.CA(res)[0])
f.write(""\nPrecision:    %.2f"" % Orange.evaluation.scoring.Precision(res)[0])
f.write(""\nRecall:       %.2f"" % Orange.evaluation.scoring.Recall(res)[0])
f.write(""\nF1:           %.2f\n"" % Orange.evaluation.scoring.F1(res)[0])

tree = learner(mydata)

f.write(tree.to_string(leaf_str=""%V (%M out of %N)""))
print tree.to_string(leaf_str=""%V (%M out of %N)"")

end = time.time()
print ""Ending""
timeStr = ""Execution time: "" + str((end - start) / 60) + "" minutes""
f.write(timeStr)

f.close()
</code></pre>

<p>Note:  There may seem like there are syntax errors (stratified vs. stratification) but the program runs as-is without exceptions.  Also, I know the documentation shows stuff like stratified=StratifiedIfPossible but for some reason, only boolean values work for me.</p>",0,python|decision-tree|orange
30008056,Python 2 / Pillow - issue calculating resized image height & width,"<p>I'm building a blog-style website using Django that allows people to upload images for their posts. I wrote some code to resize user uploaded images. It takes the uploaded image and saves two copies, 1 scaled down large image and 1 thumbnail. </p>

<p>The code works perfectly on my personal computer I'm using for development (Python 3, Django 1.8), but it doesn't work in production on my server (Python 2, Django 1.8). On the server, it appears the image resize math is giving a value of 0 for either the width or height. I've tried various methods of rounding, etc but nothing seems to fix the issue.</p>

<p>Here's the section of my views.py that handles the image:</p>

<pre><code>    (card_image_resize, card_image_thumb_resize, card_image_orientation) = image_resize(card_image.userimg.path)
    (w, h) = card_image_resize.size
    card_image_resize.save(card_image.userimg.path)
    card_image_thumb_resize.save(card_image.userimg_thumb.path)
    card_image.orientation = card_image_orientation
    card_image.save()
</code></pre>

<p>And here's the image resize code:</p>

<pre><code>def image_resize(path):
    image = Image.open(path)

    (w, h) = image.size
    if w &gt; h:
        orientation = 'l'
    elif w &lt; h:
        orientation = 'p'
    else:
        orientation = 's'

#calculate new large image dimensions
    if w &gt;= 1000 or h &gt;= 1000:
        if w &gt; h:
            w_new = 1000
            h_new = (h/w) * 1000
        elif h &gt; w:
            h_new = 1000
            w_new = (w/h) * 1000
        elif h == w:
            h_new = 1000
            w_new = 1000
    else:
        if w &gt; h:
            w_new = 400
            h_new = (h/w) * 400
        elif h &gt; w:
            h_new = 400
            w_new = (w/h) * 400
        elif h == w:
            h_new = 400
            w_new = 400

#calculate thumbnail dimensions
    if w &gt;= 1000 or h &gt;= 1000:
        if w &gt; h:
            wthumb_new = 400
            hthumb_new = (h/w) * 400
        elif h &gt; w:
            hthumb_new = 400
            wthumb_new = (w/h) * 400
        elif h == w:
            hthumb_new = 400
            wthumb_new = 400

    w_new = int(w_new)
    h_new = int(h_new)
    try:
        wthumb_new = int(wthumb_new)
        hthumb_new = int(hthumb_new)
        image_thumb = image.resize((wthumb_new, hthumb_new), Image.ANTIALIAS)
        image = image.resize((w_new, h_new), Image.ANTIALIAS)
    except:
        image_thumb = image.resize((w, h), Image.ANTIALIAS)

    image = image.resize((w_new, h_new), Image.ANTIALIAS)

    return image, image_thumb, orientation
</code></pre>

<p>The part that's causing the issue (I assume) is the section the calculates the ratio calculation for height or width: w_new = (w/h) * 1000. When I run this in development, I'm getting the error Exception Value:  tile cannot extend outside image. Looking at the image size values, it's clear that the w_new / h_new calculation is returning zero: </p>

<blockquote>
  <p>card_image_resize:     PIL.Image.Image image mode=RGB <strong>size=1000x0</strong> at
  0x7FADB1A0E320</p>
</blockquote>

<p>The error occurs upon saving</p>

<pre><code>card_image.save()
</code></pre>

<p>My question is why and how do I get around this? It seems like a pretty straightforward formula to maintain the image size ratio. Even stranger that it works with Python 3 but not Python 2.</p>

<p>I'm admittedly not an expert at this, so I'm open to a more efficient way of resizing the image. However, I'd still be interested to learn why that formula returns a value of zero.</p>",0,python|django|python-imaging-library|pillow
30039947,Parse XML namespace with Element Tree findall,"<p>How can I use a query element tree <code>findall('Email')</code> given the following xml?</p>



<pre><code>&lt;DocuSignEnvelopeInformation xmlns:xsd=""http://www.w3.org/2001/XMLSchema"" xmlns:xsi=""http://www.w3.org/2001/XMLSchema-instance"" xmlns=""http://www.docusign.net/API/3.0""&gt;
    &lt;EnvelopeStatus&gt;
        &lt;RecipientStatus&gt;
                &lt;Type&gt;Signer&lt;/Type&gt;
                &lt;Email&gt;joe@gmail.com&lt;/Email&gt;
                &lt;UserName&gt;Joe Shmoe&lt;/UserName&gt;
                &lt;RoutingOrder&gt;1&lt;/RoutingOrder&gt;
                &lt;Sent&gt;2015-05-04T09:58:01.947&lt;/Sent&gt;
                &lt;Delivered&gt;2015-05-04T09:58:14.403&lt;/Delivered&gt;
                &lt;Signed&gt;2015-05-04T09:58:29.473&lt;/Signed&gt;
        &lt;/RecipientStatus&gt;
    &lt;/EnvelopeStatus&gt;
&lt;/DocuSignEnvelopeInformation&gt;
</code></pre>

<p>I have a feeling it has to do with the namespace but I'm not sure. I looked at the <a href=""https://docs.python.org/3/library/xml.etree.elementtree.html"" rel=""nofollow"">docs</a> and had no luck. </p>

<pre><code>tree = &lt;xml.etree.ElementTree.ElementTree object at 0x7f27a47c4fd0&gt;
root = tree.getroot()
root
&lt;Element '{http://www.docusign.net/API/3.0}DocuSignEnvelopeInformation' at 0x7f27a47b8a48&gt;

root.findall('Email')
[]
</code></pre>",1,python|xml|docusignapi
29842464,Adding Single-sign-on to GMail API authorization,"<p>I have successfully created a python web-app on Google App Engine that interacts with the Gmail API. What I would like to get now, is that when that the permissions are given, my app also creates a user account to which the user can login with their Google Account. This would prevent the user to having to type in another password for my app.</p>

<p>To summarize, current workflow is:
1. User creates account by typing in email and password
2. User authorizes GMail access</p>

<p>What I would like to get is:
1. User connects Google Account and therewith gets an account and authenticates GMail access</p>

<p>What would be the best way to do this?</p>

<p>My current code for the google API looks something like below. Straight from the Google example here: <a href=""https://developers.google.com/api-client-library/python/guide/google_app_engine"" rel=""nofollow"">https://developers.google.com/api-client-library/python/guide/google_app_engine</a></p>

<pre><code>from apiclient.discovery import build
from google.appengine.ext import webapp
from oauth2client.appengine import OAuth2Decorator

decorator = OAuth2Decorator(
  client_id='your_client_id',
  client_secret='your_client_secret',
  scope='https://www.googleapis.com/auth/calendar')

service = build('calendar', 'v3')

class MainHandler(webapp.RequestHandler):

  @decorator.oauth_required
  def get(self):
    # Get the authorized Http object created by the decorator.
    http = decorator.http()
    # Call the service using the authorized Http object.
    request = service.events().list(calendarId='primary')
    response = request.execute(http=http)
</code></pre>",0,python-2.7|google-app-engine|single-sign-on|gmail-api
29877876,Find max values in a dict containing lists,"<p>The dict got the keys <code>years</code> and for each year it's a list of all the temperatures in all 12 months of that year. My goal is to print out a table starting with what year it is and then a new line for each month and the temp that month.</p>

<p><strong>The main thing is to mark the highest temp of all years with <code>(ATH)</code> and mark the highest temp in each year with <code>(YearHighest)</code>.</strong></p>

<pre><code>My current code:
temp_dict= {
    ""2010"": [2, 3, 4, 5, 7, 3, 20, 29, 34, 2, 10, 1],
    ""2011"": [2, 7, 4, 5, 9, 3, 20, 9, 34, 2, 10, 10]
}

for key in temp_dict:
    print(""Year"",key,"":"")
    x=0
    for temps in temp_dict[key]:
        x=x+1
        print(""Month ""+str(x)+"":%3d""%temps)
    print()
</code></pre>

<p>I'm not sure how to make the max function, I was thinking something like this but I can't get it to work:</p>

<pre><code>for key in temp_dict:
    ATH = temp_dict[key]
    YearHigh = temp_dict[key][0]
        for temps in temp_dict[key]:
            if temps &gt;= temp_dict[key][0]:
                 YearHigh = temps
    if YearHigh &gt;= ATH:
         ATH = YearHigh
</code></pre>

<p><strong>How I want my output to look like:</strong></p>

<pre><code>Year 2011 :
Month1:  2
Month2:  7
Month3:  4
Month4:  5
Month5:  9
Month6:  3
Month7: 20
Month8:  9
Month9: 34 (YearHighest)(ATH)
Month10:  2
Month11: 10
Month12: 10

Year 2010 :
Month1:  2
Month2:  3
Month3:  4
Month4:  5
Month5:  7
Month6:  3
Month7: 20
Month8: 29
Month9: 34 (YearHighest)(ATH)
Month10:  2
Month11: 10
Month12:  1
</code></pre>",1,python|list|python-3.x|for-loop|dictionary
29953752,Can't find the contents of a 'div' using BeautifulSoup,"<p>I'm trying to scrape some information about MLB players from the MLB website. 
However, using urllib2 and BeautifulSoup, I can't find the contents under the 'div'. But I can clearly see the contents on Chrome.</p>

<p>An example is that, going to page (<a href=""http://mlb.mlb.com/team/player.jsp?player_id=150378"" rel=""nofollow"">http://mlb.mlb.com/team/player.jsp?player_id=150378</a>). The Status info on the upper right side shows 'Released'. But I can't find this string/content using BS4.</p>

<p>Here's my code:</p>

<pre><code>base_url = 'http://mlb.mlb.com/team/player.jsp?player_id=150378'
request = urllib2.Request(base_url)
response = urllib2.urlopen(request)
soup = BeautifulSoup(response)
player_status = soup.findAll('div',id='player_status')
print player_status
</code></pre>

<p>I was expecting it to have a string like 'Status: Released',
but the result only shows</p>

<pre><code>[&lt;div id=""player_status""&gt;&lt;/div&gt;]
</code></pre>

<p>I have never encountered this problem before. Can someone help me with this?
Thanks!!</p>",2,python|web-scraping|beautifulsoup
30075234,OPENSHIFT Cron job just stop working,"<p>I have an hourly cron job which has been running in Openshift free gear for almost a year and has been no problem.  But the past 2 days, cron job stops running automatically.  I have been googling around and still cannot find what went wrong.  Here are what I have checked/done to date</p>

<ul>
<li>the service I use to keep the site alive is still up and running as normal.  So it is not a case of being idle.</li>
<li>force restart the app.  Cron job still not started automatically as it used to.</li>
<li>fake changes to cron script file and push to Openshift.  Still not fixed this.</li>
<li><p>log files looks ok</p>

<p>Mon May  4 13:01:07 EDT 2015: START hourly cron run</p>

<p>Mon May  4 13:01:29 EDT 2015: END hourly cron run - status=0</p></li>
</ul>

<p>Any advice or pointer as to why it just stop working when there is no change to the app.  Thank you.</p>",0,python|django|openshift
29882870,How to position BoxLayout to top of screen,"<p>I have a ActionBar that is nested inside a BoxLayout widget. I'd like the ActionBar to appear at the very top of the screen. Currently, I'm only able to get it to appear at the very bottom. Here is a screenshot:</p>

<p><img src=""https://i.stack.imgur.com/6J7Om.jpg"" alt=""enter image description here""></p>

<p>Here is my main.py:</p>

<pre><code>from kivy.app import App
from kivy.uix.boxlayout import BoxLayout

class ShowActionBar(BoxLayout):
    pass

class MyTestApp(App):
    pass

if __name__ == ""__main__"":
    MyTestApp().run()
</code></pre>

<p>And here is my .kv file:</p>

<pre><code>ShowActionBar:

&lt;ShowActionBar&gt;:
    orientation: ""vertical""
    BoxLayout:
        pos_hint: {'top': 1}
        orientation: ""vertical""
        ActionBar:
            ActionView:
                use_seperator: True
                ActionPrevious:
                    title: ""My Title""
                    with_previous: False
                ActionOverflow:
                    ActionButton:
                        text: ""Settings""
                ActionButton:
                    text: ""Log Out""
</code></pre>

<p>As you can see, I've tried playing with various values for the pos_hint, but it does not appear to affect the position of the ActionBar. I suspect I'm missing something simple. What do I need to do to get the ActionBar to appear at the very top of the window?</p>",1,android|python|kivy
30189492,ValueError: [u'path'] error when trying to install pysftp in python,"<p>I'm trying to install <a href=""https://pypi.python.org/pypi/pysftp"" rel=""nofollow"">pysftp-0.2.8</a> on my 64 bit Windows 7 system, I use 32 bit python 2.7. I also have Microsoft Visual Studio 2012 Express installed.  When I run</p>

<pre><code>python setup.py install 
</code></pre>

<p>from command line, I get:</p>

<pre><code>raise ValueError(str(list(result.keys())))

ValueError: [u'path']
</code></pre>

<p>I have tried setting </p>

<pre><code>Visual Studio 2012 (VS11): SET VS90COMNTOOLS=%VS110COMNTOOLS%
</code></pre>

<p>in command line, but it didn't help.</p>",0,python|windows|installation
30012495,Reading Google Trends time series data with Python,"<p>I'm trying to read the following URL into Python:</p>

<pre><code>http://www.google.com/trends/fetchComponent?q=nepal&amp;cid=TIMESERIES_GRAPH_0&amp;export=3
</code></pre>

<p>with the code:</p>

<pre><code>trend_url = 'http://www.google.com/trends/fetchComponent?q=nepal&amp;cid=TIMESERIES_GRAPH_0&amp;export=3'        
response = urllib2.urlopen(trend_url)
the_page = response.read()
</code></pre>

<p>The resulting value of the_page, for reasons that I don't understand, is an error page.</p>

<p><strong>UPDATE:</strong> I think that the problem is related to some authentication issue: when I try to open the link in the browser's incognito window, it also returns an error page.</p>",1,python|google-trends
30205003,Using SBT to manage projects that contain both Scala and Python,"<p>In a current project, I've built Python code for interacting with a specific datasource; now, I'm working on building a Scala version.</p>

<p>I've rearranged things so that all of the Python code lives in <code>src/main/python</code> within the SBT project for my Scala code, but this got me thinking: Is there any nice way to integrate the project management between the two?  To set up SBT so that I can run my Python <code>distutils</code> installation/sdist generation or sphinx document generation as SBT tasks?</p>

<p>Or, more generally: Is there a standard method for running arbitrary system tasks by way of SBT?</p>",9,python|scala|sbt
30178254,"Predicting out future values using OLS regression (Python, StatsModels, Pandas)","<p>I'm currently trying to implement a MLR in Python and am not sure how I go about applying the coefficients I've found to future values.</p>

<pre><code>import pandas as pd
import statsmodels.formula.api as sm
import statsmodels.api as sm2

TV = [230.1, 44.5, 17.2, 151.5, 180.8]
Radio = [37.8,39.3,45.9,41.3,10.8]
Newspaper = [69.2,45.1,69.3,58.5,58.4]
Sales = [22.1, 10.4, 9.3, 18.5,12.9]
df = pd.DataFrame({'TV': TV, 
                   'Radio': Radio, 
                   'Newspaper': Newspaper, 
                   'Sales': Sales})

Y = df.Sales
X = df[['TV','Radio','Newspaper']]
X = sm2.add_constant(X)
model = sm.OLS(Y, X).fit()
&gt;&gt;&gt; model.params
const       -0.141990
TV           0.070544
Radio        0.239617
Newspaper   -0.040178
dtype: float64
</code></pre>

<p>So let's say I want to predict out ""sales"" for the following DataFrame:</p>

<pre><code>EDIT

TV     Radio    Newspaper    Sales
230.1  37,8       69.2       22.4
44.5   39.3       45.1       10.1
...    ...        ...        ...
25      15        15
30      20        22
35      22        36
</code></pre>

<p>I've been trying a method I found here but I can't seem to get it working: <a href=""https://stackoverflow.com/questions/9943848/forecasting-using-pandas-ols"">Forecasting using Pandas OLS</a></p>

<p>Thank you!</p>",2,python|pandas|statsmodels
29996094,How to to find a value within two delimiter with Python 2.7,"<p>I have a file with many lines like this:</p>

<p>...</p>

<pre><code>Model Path/IOSU/SIQER/Instruments/Sca/Breaking element/voltageZ/Out
Model/BDP/Simulator Replica/KO30_V/Value 
</code></pre>

<p>...</p>

<p>I need to find out the next last value within the delimiter ""/"". Ex for these two lines it should be: ""voltageZ"" and ""KO30_V"".</p>

<p>Ex:  </p>

<pre><code>with open('tt.txt') as fp:
    for line in fp:
        temp = #remove all after the last '/' 
        temp = #remove all before the next last '/'  
        print temp
</code></pre>

<p>This should print out:</p>

<pre><code>voltageZ
KO30_V
</code></pre>

<p>How to do this? Could I use split for this? I'm using Python 2.7</p>

<p>Thx!</p>",0,python-2.7|split
30143740,A foreign key in the view details,"<p>I have a django app where you want to display all images tracked to a particular gallery, but I get the error: 'GalleryDetailsView1' object has no attribute 'gallery'</p>

<p><strong>Model</strong></p>

<pre><code>class Gallery(models.Model):
    title = models.CharField(max_length=200)
    description = models.TextField()
    image = ThumbnailerImageField(upload_to='paint/%Y/%m/%d')

    class Meta:
        verbose_name = ""Gallery""
        verbose_name_plural = "" Galleries""

    def __unicode__(self):
        return self.title


class Paint(models.Model):
    AVAILABLE = ""Available""
    NOT_AVAILABLE = ""Not available""
    STATUS_PAINT = (
        (AVAILABLE, u""Dostpny""),
        (NOT_AVAILABLE, u""Nie dostpny"")
    )
    title = models.CharField(max_length=200)
    gallery = models.ForeignKey(Gallery, related_name='paint_set')
    paint = ThumbnailerImageField(upload_to='paint/%Y/%m/%d')
    price = models.CharField(max_length=50, blank=True, null=True)
    status = models.CharField(choices=STATUS_PAINT, default=AVAILABLE, max_length=50)
</code></pre>

<p><strong>views</strong></p>

<pre><code>class GalleryList(generic.ListView):
    model = Gallery
    context_object_name = ""list""
    template_name = ""www/gallery_list.html""


class GalleryDetailsView1(generic.DetailView):
    context_object_name = ""images1""
    template_name = ""www/gallery_details1.html""

    def get_queryset(self):
        return Gallery.objects.get(pk=self.kwargs['pk']).paint_set.all()
</code></pre>

<p><strong>template: gallery_details1</strong></p>

<pre><code>{% extends ""base.html"" %}
{% load thumbnail %}

{% block content %}


{% for i in images1 %}

{{ i.title }}
&lt;hr&gt;
{% endfor %}


{% endblock %}

{% block content_bottom %}{% endblock content_bottom %}
</code></pre>",0,python|django|templates|views|django-queryset
29756220,Django ajax response contains cloudflare script,"<p>I am learning Django by developing a web application. I have added the site to <a href=""https://www.cloudflare.com/overview"" rel=""nofollow"">cloudflare</a> CDN's free service. After a long learning curve i am able to send request to Django application using ajax, but strangely the response contains the script from cloudflare embedded as part of it.</p>

<p>Example ajax response:</p>

<pre><code>&lt;html&gt;&lt;body&gt;No arguments passed&lt;script type=""text/javascript""&gt;
//&lt;![CDATA[
try{if (!window.CloudFlare) {var CloudFlare=[{verbose:0,p:0,byc:0,owlid:""cf"",bag2:1,mirage2:0,oracle:0,paths:{cloudflare:""/cdn-cgi/nexp/dok3v=1613a3a185/""},atok:""b4c8a1a8481c9535dc367c9b4c8c52ab"",petok:""e3070e55a3a1fceb44356d479cfa086f3dd56bbe-1429555139-1800"",zone:""mydjango.in"",rocket:""0"",apps:{}}];CloudFlare.push({""apps"":{""ape"":""0c86dff90b5e1a63e6c69c775ca3d309""}});!function(a,b){a=document.createElement(""script""),b=document.getElementsByTagName(""script"")[0],a.async=!0,a.src=""//ajax.cloudflare.com/cdn-cgi/nexp/dok3v=7e13c32551/cloudflare.min.js"",b.parentNode.insertBefore(a,b)}()}}catch(e){};
//]]&gt;
&lt;/script&gt;
&lt;/body&gt;&lt;/html&gt;
</code></pre>

<p>The <code>views.py</code> code to return the response:</p>

<pre><code>def send_response(request):
    inpval = request.GET.get('inputval','')
    if not inpval:
        html = ""&lt;html&gt;&lt;body&gt;No arguments passed&lt;/body&gt;&lt;/html&gt;""
    else:
        html = ""&lt;html&gt;&lt;body&gt; %s &lt;/body&gt;&lt;/html&gt;"" % inpval
    return HttpResponse(html)
</code></pre>

<p>Can anyone help me understand how to remove this extra script from cloudflare?</p>",0,ajax|django|python-2.7|cloudflare
29783040,python pip instal apns 0.2.1,"<p>I'm trying to use <a href=""https://pypi.python.org/pypi/apns-client/0.2.1"" rel=""nofollow"">apns-client 0.2.1</a> but I only get an error message.</p>

<pre><code>22:56:01 $ pip install apnsclient==0.2.1
Collecting apnsclient==0.2.1
Could not find a version that satisfies the requirement apnsclient==0.2.1 (from versions: 0.1)
No matching distribution found for apnsclient==0.2.1
</code></pre>

<p>How can I install 0.2.1 version and then save it in requirements.txt? I need it in this way because my hosting use this file too.</p>",0,python|pip
29787589,animation.FuncAnimation Python Gui,"<p>I am writing a <code>GUI Python</code> code which should be run every 15 minutes, however when it runs it took more than that (15 minutes +running time). The function I am using is,</p>

<pre><code>animation.FuncAnimation(f,animate,interval=900000)
</code></pre>

<p>is there anyway to make the interval variable?</p>

<p>using time.sleep is not good option as this will lead to freezing the GUI screen, I am using <code>Tkinter</code> which is thread unsafe</p>

<p>Thanks in Advance,</p>",-1,python
30102965,Incorrect and inconsistent user counts using Google Core Reporting API and bigquery when using variable/dimension filtering,"<p>Background: I have app and web data, some of my apps (new iOS versions) use GA dimensions and the rest (Android and web) use GA custom variables.</p>

<p>So firstly, I'm currently trying to replicate this query in BigQuery in the Query Explorer to get simple user counts over a defined date for my web users only:</p>

<pre><code>select count(distinct fullvisitorid, 10000000) as users
 from table_date_range([12345678.ga_sessions_],    
 timestamp('2015-02-01'), timestamp('2015-03-01')) 
  where hits.customvariables.customvarvalue like '%web%'
</code></pre>

<p>I get around 5.34m users. This corresponds to what I see in Google Analytics. I am confident this figure is correct.</p>

<p>If I go into the Query Explorer and apply no filters (so I include my app and web users) I get 5.70m users. Again, this corresponds to Google Analytics and we're confident this figure is correct, web makes up the majority of our traffic.</p>

<p>If I run another query in Query Explorer but this time apply the filter:</p>

<pre><code>ga:customVarValue1=@web
</code></pre>

<p>I get 8.73m users. So I have more users after applying the filter than without... obviously this isn't correct and has something to do with how the Query Explorer is applying the filter post aggregation.</p>

<p>Note: When I run this query in BigQuery:</p>

<pre><code>select sum(users)
from (
   select count(distinct fullvisitorid, 1000000) as users,
    hits.customvariables.customvarvalue as platform
   from table_date_range([12345678.ga_sessions_],    
    timestamp('2015-02-01'), timestamp('2015-03-01')) 
   group each by 2)
    where platform like '%web%'
</code></pre>

<p>I get 8.73m users. Almost the exact same number as I get when applying the filter in Query Explorer, the difference I get of around 1% can be explained by the sampling. I've tested it on multiple dates so I'm sure this is what's happening. Applying the filter post aggregation instead of pre (as in my first BigQuery query) leads to a higher number of users because we had two web releases in this timeframe. So all users are being counted once for every version of web they used.</p>

<p>To add:
One of the developers on my team wrote some Python script back in February which replicated the first BigQuery code written above (a simple user count where the variable=web) but instead hits the Core Reporting API and requests an unsampled report. Until March 5th 2015 the number of users we got using BigQuery versus the Python script were almost identical (difference of 1% due to sampling). Then on March 5th they began to diverge, even for historical user counts, and instead our Python script started producing counts similar to the Query Explorer (filters being applied post aggregation instead of pre).</p>

<p>My question(s) are:
1. What changed on March 5th?
2. How do we replicate in Query explorer the first BigQuery code above? Are we applying the variable filter correctly?
3. How do we replicate the BigQuery code in our Python script which hits the Core reporting API?</p>

<p>Lastly:
When in Query Explorer I ask for user counts over a given date and instead use a dimension filter:</p>

<pre><code>ga:dimension2=@ios
</code></pre>

<p>I get around 50% LESS than I get in BigQuery when running:</p>

<pre><code>select count(distinct fullvisitorid, 10000000) as users
 from table_date_range([12345678.ga_sessions_],    
 timestamp('2015-02-01'), timestamp('2015-03-01')) 
  where hits.customdimensions.value like '%ios%'
</code></pre>

<p>If the filter was being applied post aggregation as it is when filtering using variables then I would get a higher user count, not less. I seriously cannot explain what the Query Explorer is doing in order to give me substantially lower counts when filtering on dimensions.</p>

<p>Please halp</p>",1,python|google-analytics|google-api|google-bigquery
30182006,carriage lines and splitting cell values in pandas DataFrame,"<p>my data is in a pandas DataFrame with each row, structured like this:</p>

<pre><code>&gt; df={'date1': '0 \r Created February 21, 2015', 'amt': '$50,815 raised by 498 donors'}
</code></pre>

<p>I want it to look like this </p>

<pre><code>&gt;df={'month': 'February', 'day': 21, 'year': '2015, 'cur': '$', 'raised': '50815', 'num_donor': '498'} 
</code></pre>

<p><code>df.date1</code>, many of my cells contain carriage returns, sometimes several in a row (at the beginning and end of strings). Is there any way to remove them from the entire DataFrame?</p>

<p>In some cases, this works: </p>

<pre><code>&gt; df['date1'] = df['date1'].map(lambda x: str(x).lstrip('\r Created').rstrip('...'))
</code></pre>

<p>but this does not always work (code from diff columns). for example, none of the following will remove \r or ','</p>

<pre><code>&gt; df['raised2'][0] = ,50,815,\r 

&gt; df['raised2'] = df['raised2'].map(lambda x: str(x).lstrip('\r').rstrip('\r'))

&gt; rm_carriage = lambda x: re.findall(""^/\r*(.*?)/\r*$"", str(x))

&gt; df.applymap(carriage_function)
</code></pre>

<p>This gets me the Month but the same logic will not get my the day or year</p>

<pre><code>&gt; df['month'] = df['date1'].map(lambda x: x.split()[0])

&gt; df['day'] = df['date1'].map(lambda x: x.split()[1])   #IndexError
</code></pre>",1,python|pandas
29998417,"Create parser with subcommands in argparse, customize positional argument(s)","<p>I'm very new to this module so please bear with me. I have the following code:</p>

<h1>reader.py</h1>

<pre><code>import argparse

parent_parser = argparse.ArgumentParser(description=""Read text files."")
parent_parser.add_argument('filename', help='TXT file', type=file, nargs='+')
parent_parser.add_argument('--verbose', '-v', action='store_true', 
        help=""Verbosity on"")

child_parser = parent_parser.add_subparsers(title=""subcommand"",
        help=""Subcommand help"")
new_file_command = child_parser.add_parser('new', help=""New text file"")
edit_file_command = child_parser.add_parser('edit', help=""Edit existing text file"")

args = parent_parser.parse_args()
</code></pre>

<p>What I'm trying to achieve might not be the standard way of how parsers and unix command line utilities work. If that is true, please correct me as I'd like to have standardized app.</p>

<p>This is what I'm trying to achieve:</p>

<ul>
<li>if you run bare script with positional argument(s) like this: <code>python reader.py some.txt</code> I'd like to be able to just parse it and pass it to function that reads the text file, of course I want to accept optional arg <code>verbose</code> as well</li>
<li>if you run subcommand 'new' (<code>new_file_command</code>), I do not want to have positional argument <code>filename</code> to be required, instead I want to pass a string and create new text file like this: <code>python reader.py new another.txt</code></li>
<li>if you run subcommand 'edit' (<code>edit_file_command</code>) I want to pass existing file in path and check for it (like you use <code>type=int</code> in <code>add_argument</code>) and then maybe pass it to function that opens editor, something like this: <code>python reader.py edit some.txt</code></li>
</ul>

<p>Again, I'm not sure if this is how command line apps/scripts are supposed to behave. I read the docs and looked at examples but it's still isn't clear to me how sub parsers work. I tried looking at Click module but that seems to me even more complicated.</p>

<p>Any help appreciated. Thanks!</p>",1,python|command-line-arguments|argparse
29861229,"TypeError: must be string or buffer, not instance","<p>I am using django-jsignature in my django project. After making the post request, the form returns ""type 'instance'"". I'm trying to save this as an image, but I get the above error. </p>

<p>Even better would be to save the form data as a vector image as suggested in the docs.</p>

<p>My function:</p>

<pre><code>def signature(request):
    form = SignatureForm(request.POST or None)
    if form.is_valid():
        signature = form.cleaned_data.get('signature')
        if signature:
            # as an image
            signature_picture = draw_signature(signature)
            signature_file_path = draw_signature(signature, as_file=True)
            with open(signature_file_path), 'wb') as f:
                f.write(signature_picture)
</code></pre>

<p>(signature_file_path == '/tmp/tmpB71Wft.PNG')</p>",1,javascript|python|django
30199393,How can pickled byte data be unpickled?,"<p>How can pickled data be written and read back from a BytesIO object?</p>

<p>I tried:</p>

<pre><code>import io
import cPickle as pickle

s1 = ""foo""
bytes_io = io.BytesIO()
pickle.dump(s1, bytes_io, pickle.HIGHEST_PROTOCOL)
s2 = pickle.load(bytes_io)
</code></pre>

<p>which gives for the pickle.load line:</p>

<pre><code>Traceback (most recent call last):
  File ""&lt;stdin&gt;"", line 1, in &lt;module&gt;
EOFError
</code></pre>",4,python|pickle
29813848,Can't upload image in django use MEDIA_ROOT and MEDIA_URL,"<p>hello i want to make upload image in admin django but when i use media_root and media url image can not upload. this is model.py</p>

<pre><code>class Product(models.Model):
    category        = models.ForeignKey('Category')
    userprofile     = models.ForeignKey('UserProfile')
    title           = models.CharField(max_length=50)
    price           = models.IntegerField()
    image           = models.ImageField(upload_to=settings.MEDIA_ROOT)
    description     = models.TextField()
    created_date    = models.DateTimeField(auto_now_add=True)

    def __str__(self):
        return self.title;
</code></pre>

<p>setting.py</p>

<pre><code>MEDIA_ROOT  = '/static/images/upload/'
MEDIA_URL   = '/upload/'
</code></pre>

<p>view.py</p>

<pre><code>def home(request):
    posts = Product.objects.filter(created_date__isnull=False)
    return render(request, 'kerajinan/product_list.html', {
        'posts'         : posts,
        'categories'    : Category.objects.all(),
    })
</code></pre>

<p>and this is tamplate product.html</p>

<pre><code>&lt;img src=""{{post.image.url}}"" alt="""" /&gt;
</code></pre>

<p>can you help me solve this problem?</p>",1,python|django|django-models
29921407,4 dimensional array of zeros in python,"<p>I want to make an 4 dimensional array of zeros in python. 
I know how to do this for a square array but I want the lists to have different lengths.</p>

<p>Right now I use this:</p>

<pre><code>numpy.zeros((200,)*4)
</code></pre>

<p>Which gives them all length 200 but I would like to have lengths <code>200,20,100,20</code> because now I have a lot of zeros in my array that I don't use</p>",9,python|arrays|numpy
29774995,Django- Using Parameters To Display Entry,"<p>My database is setup something like.</p>

<pre><code>class comments(models.Model):
    min = models.FloatField()
    max = models.FloatField()
    comment = models.CharField(max_length=255)
</code></pre>

<p>In my view, I grab a float value from the user. I want to take that value use the Min/Max as parameters and if that float value is between the Min/Max, display the comment that's associated to it. At times there might be more then 1 match, however for now I cant even figure out how to do the first step.  </p>",0,python|django
30180457,Please provide an example of the .format() function where the index field is left blank,<p>Alright I am a bit confused. what I'm learning to program from says that the index fields for the .format() method can be left blank and if this is the case that the parameters are just filled in to the slots in a left to right fashion. I have tried to find answers to this question but haven't found any and I would greatly appreciate it if someone could clear this up for me with some easily understandable examples and explanations of how you would use the .format() method without index values.</p>,1,python-3.x
29820852,How to open a text file as a character matrix in python?,"<p>I have a .fa file which contains a list of secuences of nucleotids. It is something like this</p>

<blockquote>
  <p>AGCTAGAGAGACTAGACTAGA</p>
  
  <p>GATCAGTACATGATCTAGGAT</p>
  
  <p>GATAGTACATGGGGGATAGAC</p>
</blockquote>

<p>I need to somehow open the file in python and make a 2-dim array which contains as rows the lines of the .fa file and in each column a letter of the file. Thanks for any help!!!!</p>",0,python|arrays|statistics
29955091,Cleverbot api not working (python 2 to python 3),"<p>I'm trying to convert an module that interact with Cleverbot. It's on python 2, but I would like it to be working with python 3. But I encounter an error :</p>

<p><code>parsed = [ item.split('\r') for item in self.resp.split('\r\r\r\r\r\r')[:-1]]
TypeError: 'str' does not support the buffer interface</code></p>

<p>I don't know how to resolve it ! Please help !</p>

<p>Here is the entire code :</p>

<pre><code>""""""Python library allowing interaction with the Cleverbot API.""""""
import hashlib
import urllib.request, urllib.parse, urllib.error
from urllib.request import *


class Cleverbot:



 """"""
    Wrapper over the Cleverbot API.

""""""
HOST = ""www.cleverbot.com""
PROTOCOL = ""http://""
RESOURCE = ""/webservicemin""
API_URL = PROTOCOL + HOST + RESOURCE

headers = {
    'User-Agent': 'Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 6.0)',
    'Accept': 'text/html,application/xhtml+xml,'
              'application/xml;q=0.9,*/*;q=0.8',
    'Accept-Charset': 'ISO-8859-1,utf-8;q=0.7,*;q=0.7',
    'Accept-Language': 'en-us,en;q=0.8,en-us;q=0.5,en;q=0.3',
    'Cache-Control': 'no-cache',
    'Host': HOST,
    'Referer': PROTOCOL + HOST + '/',
    'Pragma': 'no-cache'
}

def __init__(self):
    """""" The data that will get passed to Cleverbot's web API """"""
    self.data = {
        'stimulus': '',
        'start': 'y',  # Never modified
        'sessionid': '',
        'vText8': '',
        'vText7': '',
        'vText6': '',
        'vText5': '',
        'vText4': '',
        'vText3': '',
        'vText2': '',
        'icognoid': 'wsf',  # Never modified
        'icognocheck': '',
        'fno': 0,  # Never modified
        'prevref': '',
        'emotionaloutput': '',  # Never modified
        'emotionalhistory': '',  # Never modified
        'asbotname': '',  # Never modified
        'ttsvoice': '',  # Never modified
        'typing': '',  # Never modified
        'lineref': '',
        'sub': 'Say',  # Never modified
        'islearning': 1,  # Never modified
        'cleanslate': False,  # Never modified
    }

    # the log of our conversation with Cleverbot
    self.conversation = []
    self.resp = str()

def ask(self, question):
    """"""Asks Cleverbot a question.

    Maintains message history.

    Args:
        q (str): The question to ask

    Returns:
        Cleverbot's answer
    """"""
    # Set the current question
    self.data['stimulus'] = question

    # Connect to Cleverbot's API and remember the response
    try:
        self.resp = self._send()
    except urllib.error.HTTPError:
        # request failed. returning empty string
        return str()

    # Add the current question to the conversation log
    self.conversation.append(question)

    parsed = self._parse()

    # Set data as appropriate
    if self.data['sessionid'] != '':
        self.data['sessionid'] = parsed['conversation_id']

    # Add Cleverbot's reply to the conversation log
    self.conversation.append(parsed['answer'])

    return parsed['answer']

def _send(self):
    """"""POST the user's question and all required information to the 
    Cleverbot API

    Cleverbot tries to prevent unauthorized access to its API by
    obfuscating how it generates the 'icognocheck' token, so we have
    to URLencode the data twice: once to generate the token, and
    twice to add the token to the data we're sending to Cleverbot.
    """"""
    # Set data as appropriate
    if self.conversation:
        linecount = 1
        for line in reversed(self.conversation):
            linecount += 1
            self.data['vText' + str(linecount)] = line
            if linecount == 8:
                break

    # Generate the token
    enc_data = urllib.parse.urlencode(self.data)
    digest_txt = enc_data[9:35]
    token = hashlib.md5(digest_txt.encode('utf-8')).hexdigest()
    self.data['icognocheck'] = token

    # Add the token to the data
    enc_data = urllib.parse.urlencode(self.data)
    binary_data = enc_data.encode('utf-8') 
    req = urllib.request.Request(self.API_URL, binary_data, self.headers)

    # POST the data to Cleverbot's API
    conn = urllib.request.urlopen(req)
    resp = conn.read()

    # Return Cleverbot's response
    return resp

def _parse(self):

    """"""Parses Cleverbot's response""""""
    parsed = [ item.split('\r') for item in self.resp.split('\r\r\r\r\r\r')[:-1]]

    return {
        'answer': parsed[0][0],
        'conversation_id': parsed[0][1],
        'conversation_log_id': parsed[0][2],
        'unknown': parsed[1][-1]
    }

quest=input(""Question: "")

cb = Cleverbot()
quest=cb.ask(quest)
print(quest)
</code></pre>",0,python
29911852,Python duplicate a python-igraph,"<p>I have a python-igraph and need to make two copies of it and change each of the copies without changing the other one. Right now I am doing it like this:</p>

<pre><code>copy1 = fullGraph
copy2 = fullGraph
</code></pre>

<p>But it seems that this is not the correct way of doing it since whatever I change in copy1, the same thing happen to copy2 (like deleting an edge). I was wondering what is the best way to make a copy of the main graph.</p>

<p>Thanks</p>",2,python|reference|duplicates|igraph
29996592,how to mock function call used by imported pypi library in python,"<p>I have the following code that I'm trying to test:</p>

<p>great_report.py</p>

<pre><code>from retry import retry

@retry((ReportNotReadyException), tries=3, delay=10, backoff=3)
def get_link(self):
    report_link = _get_report_link_from_3rd_party(params)
    if report_link:
        return report_link
    else:
        stats.count(""report_not_ready"", 1)
        raise ReportNotReadyException
</code></pre>

<p>I've got my testing function which mocks _get_report_link_from_3rd_party which tests everything but I don't want this function to actually pause execution during when I run tests..</p>

<pre><code>@mock.patch('repo.great_report._get_report_link_from_3rd_party', return_value=None)
test_get_link_raises_exception(self, mock_get_report_link):
    self.assertRaises(ReportNotReadyException, get_link)
</code></pre>

<p>I tried mocking the retry parameters but am running into issues where get_link keeps retrying over and over which causes long build times instead of just raising the exception and continuing. How can I mock the parameters for the @retry call in my test?</p>",0,python|unit-testing|mocking
29983298,sre_constants.error: unexpected end of regular expression,"<p>I am new to Python's Regular Expression module and I am trying to find any occurrence of the following:</p>

<pre><code>PWSCF        :    18.81s CPU        38.94s WALL
</code></pre>

<p>I tried using the following Regular Expression</p>

<pre><code>pat=re.compile(""PWSCF\s+:\s+([\d\.\]+)\s\s+\CPU"")
</code></pre>

<p>I ended up with the following error message:</p>

<pre><code>File ""/opt/python/lib/python2.7/re.py"", line 242, 
in _compile raise error, v # invalid expression 
sre_constants.error: unexpected end of regular expression
</code></pre>",0,python|regex
29924479,Changing the second result of a function call with mock,"<p>I have a loop that looks like this:</p>

<pre><code>for i in range(len(some_list)):
    response = requests.post(some_url, some_params)
    if response.status_code != HTTPOk:
       # do something
</code></pre>

<p>What I would like to do is change response of requests.post in the second iteration of the loop. From within my test, I know I can do something like:</p>

<pre><code>mock_response = mock.Mock()
mock_response.status_code = 404
with mock.patch(mymodule.requests.post, return_value=mock_response):
   mymodule.some_function()
</code></pre>

<p>But that only seems to work for one status_code. I looked at <a href=""http://www.voidspace.org.uk/python/mock/mock.html#mock.Mock.side_effect"" rel=""noreferrer"">side_effect</a>, and it looks like I can iterate through the loop like so:</p>

<pre><code>mock_response.side_effect = [
    mock.Mock(status_code=400), mock.Mock(status_code=200)
]
with mock.patch(mymodule.requests.post, return_value=mock_response):
   mymodule.some_function()
</code></pre>

<p>However, it looks like it doesn't actually get the ""right"" status code. What's the best way of changing the behavior in side_effect or return_value to properly get the behavior I want? I think side_effect is what I want, but I'm not sure what the best way is to mock the responses.</p>",7,python|mocking|pytest|python-mock
30046209,End a Python function after a certain time?,"<p>For example, I have this function:</p>

<pre><code>some_global_varible = """"
def bob(some_argument, some_more):
    import time
    for x in range(10):
        print(""Working"")
        time.sleep(1)
    return ""I finished and this is my result""
</code></pre>

<p>How can I run this function for certain amount of time, and if it's not finish in the time end it. But also if it finish get the output of the return (if the is one, because maybe there is none and it simply end).</p>

<p>Also this won't be run in Unix, because I had see some example for Unix that don't work in Windows. Also if you could change the global variable form inside the function it would be perfect, but that as a extra.</p>

<p>First the rest and if it possible (If it not possible to detect an end without the return it doesn't matter, I can include a return just fro that. Like: return ""This is just for ending"")</p>

<p><strong>EDIT:</strong>
The ""bob"" funtion is an example for a function that takes 10 seconds, but the plan is to use it on other functions, that can take an undefined amount of time. And that function can't be edited to add simply something to stop it at some time seconds.</p>

<p>A better example could be ""pep"" as it wouldn't end by itself.</p>

<pre><code>def pep():
    import time
    while True:
        print(""Working"")
        time.sleep(1)
</code></pre>",1,python|timer|timeout
29810183,Sqlalchemy - Updating row with a filter produces List Index Error,"<p>I hope this is my last question pertaining to this pet project of mine.</p>

<p>I'm trying to update table Clocktimes (column = time_out) with the current time. I want to select by a UUID that I create with UUID4. When I run the code, I get ListIndex out of range error, on a function in query.py (a part of Sqlalchemy). I've listed that rather short function below my code.</p>

<p>My code:</p>

<pre><code>out = session.query(). \
        filter(Clocktime.p_uuid == p_uuid). \
        update(Clocktime.time_out == datetime.datetime.now())
    session.add(out)
    session.commit()
</code></pre>

<p>Sqlalchemy code throwing error:</p>

<pre><code>def _entity_zero(self):
    return self._entities[0]
</code></pre>

<p>The Sqlalchemy code is pretty complex so I haven't looked through it yet, but my theory is that it doesn't like my filter for some reason. Anyway, I can't figure it out - do any of you have any idea?</p>",6,python|sqlite|sqlalchemy
29987461,"Searching for floats in web-page, then creating a graph using these floats","<p>the errorI'm trying to write a code which will scan a web-page, find needed data, pack it as a list of floats and depict a graph using these floats. Consider the following code:</p>

<pre><code>import matplotlib.pyplot as pyplot
from urllib.request import *
import re
import struct

x = []
temp = []
y = []

data = urlopen('http://www.banki.ru/products/currency/usd/').read()

temp = re.findall(b'&lt;td&gt;(\d\d,\d+)&lt;/td&gt;', data) #searching for specific floats. Without 'b'' I get error.
del temp[-1]                                    #deleting the last element b/c it is invalid for my task

for num in range(0,len(y)):                     #data for Y-axis
    x.append(num)

for i in temp:                                  #Trying to 'unpack' byte-objects into dloats and then use them to create a graph
    num = struct.unpack('f',i)
    y.append(float(num[0]))

pyplot.plot(y,x)
pyplot.show()
</code></pre>

<p>And I get the following error: </p>

<pre><code>Traceback (most recent call last):
  File ""C:/Users/*/PycharmProjects/untitled/test.py"", line 19, in &lt;module&gt;
    num = struct.unpack('f',i)
struct.error: unpack requires a bytes object of length 4
</code></pre>

<p>I understand the error. The questions is, how to transform a list with byte-objects to floats?</p>

<p>---------------UPDATE---------------------
got this done.</p>

<pre><code>import matplotlib.pyplot as pyplot
from urllib.request import *
import re
import struct

x = []
temp = []
y = []

data = urlopen('http://www.banki.ru/products/currency/usd/').read()

temp = re.findall(b'&lt;td&gt;(\d\d,\d+)&lt;/td&gt;', data)
del temp[-1]

for item in range(len(temp)):
    tm = temp[item].decode('utf8')
    tmn = tm.replace(',','.')
    y.append(float(tmn))

for num in range(0,len(y)):
    x.append(num)

pyplot.plot(x,y)
pyplot.show()
</code></pre>",1,python
29852342,Grouping and summarizing data into a new pandas dataframe,"<p>I have a dataframe that looks like the below (my actual dataframe is around 200k rows).  Each row is a unique user's distance from the origin point and the time since they logged in last.</p>

<pre><code>+------------+------------------+
| time_since | dist_from_origin |
+------------+------------------+
|          1 | 0.12             |
|          0 | 71.15            |
|          4 | 74.48            |
|          2 | 19.69            |
|          3 | 0.12             |
|          0 | 132.92           |
|          1 | 174.45           |
|          4 | 0.12             |
|          3 | 81.07            |
|          2 | 65.43            |
|          1 | 162.58           |
|          0 | 0.12             |
|          3 | 0.12             |
|          4 | 20.68            |
|          3 | 109.93           |
|          2 | 100.87           |
|          0 | 131.50           |
|          0 | 132.74           |
|          4 | 181.35           |
|          3 | 150.55           |
+------------+------------------+
</code></pre>

<p>I would like to create a new dataframe which summarizes the data like the example below.  Where column 1 is the number of days inactive, column two is the count of users (rows?) in the group and each following column is a count of the distances that fit into that particular criteria.</p>

<pre><code>+---------------+-----------+-----+-------------+--------------+---------------+----------------+----------------+
| days inactive | num users | &lt;=5 | &gt;5 and &lt;=25 | &gt;25 and &lt;=50 | &gt;50 and &lt;=100 | &gt;100 and &lt;=150 | &gt;150 and &lt;=225 |
+---------------+-----------+-----+-------------+--------------+---------------+----------------+----------------+
|             0 |         5 |   1 |           0 |            0 |             1 |              3 |              0 |
|             1 |         3 |   1 |           0 |            0 |             0 |              0 |              2 |
|             2 |         3 |   0 |           1 |            0 |             1 |              1 |              0 |
|             3 |         5 |   2 |           0 |            0 |             1 |              1 |              1 |
|             4 |         4 |   1 |           1 |            0 |             1 |              0 |              1 |
+---------------+-----------+-----+-------------+--------------+---------------+----------------+----------------+
</code></pre>

<p>I tried to accomplish the summary dataframe by looping through the groups in a groupby object, where the object was grouped by <code>time since</code> but I had some difficulty creating the summaries for each group and appending to a new data frame.</p>

<p>For example. I am hitting errors with one of the first steps: counting the rows in each group:</p>

<pre><code>grouped = df.groupby(df['time_since'])

for group in grouped:
    print group['time_since'].count()


---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
&lt;ipython-input-28-2182867bdacc&gt; in &lt;module&gt;()
      1 for group in grouped:
----&gt; 2     print group['time_since'].count()

TypeError: tuple indices must be integers, not str
</code></pre>

<p>I was thinking another option would be to create boolean masks for each of my cases and then summarize each mask.</p>

<p>What I'm asking is, what is the simplest way to go from my original dataframe to the summary dataframe?</p>",1,python|pandas
30088390,how to load python script in interactive shell,<p>I am trying <code>sudo python get_gps.py -c</code> and expecting it to load the script and then present the interactive shell to debug the script live as opposed to typing it in manually.</p>,2,python
30117132,cython.parallel cannot see the difference in speed,"<p>I tried to use cython.parallel prange. I can only see two cores 50% being used. How can I make use of all the cores. i.e. send the loops to the cores simultaneously sharing the arrays, volume and mc_vol?</p>

<p>EDIT: I also edited purely sequential for-loop which is about 30 seconds faster than than cython.parallel prange version. Both of them are using one core only. Is there are way to parallelize this.  </p>

<pre><code>cimport cython
from cython.parallel import prange, parallel, threadid
from libc.stdio cimport sprintf
from libc.stdlib cimport malloc, free
cimport numpy as np

@cython.boundscheck(False)
@cython.wraparound(False)
cpdef MC_Surface(np.ndarray[np.int_t,ndim=3] volume, np.ndarray[np.float32_t,ndim=3] mc_vol):
     cdef int vol_len=len(volume)-1
     cdef int k, j, i
     cdef char* pattern # a string pointer - allocate later
     Perm_area = {
            ""00000000"": 0.000000,
            ...
            ""00011101"": 1.515500
        }

         try:
         pattern = &lt;char*&gt;malloc(sizeof(char)*260)
         for k in range(vol_len):
             for j in range(vol_len):
                for i in range(vol_len):
                    sprintf(pattern, ""%i%i%i%i%i%i%i%i"",
                            volume[i, j, k],
                            volume[i, j + 1, k],
                            volume[i + 1, j, k],
                            volume[i + 1, j + 1, k],
                            volume[i, j, k + 1],
                            volume[i, j + 1, k + 1],
                            volume[i + 1, j, k + 1],
                            volume[i + 1, j + 1, k + 1]);

                    mc_vol[i, j, k] = Perm_area[pattern]
                # if Perm_area[pattern] &gt; 0:
            #    print pattern, 'Area: ', Perm_area[pattern]
            #total_area += Perm_area[pattern]
    finally:
        free(pattern)
return mc_vol
</code></pre>

<p>EDIT following DavidW's suggestion, but prange is considerably slower:</p>

<pre><code> cpdef MC_Surface(np.ndarray[np.int_t,ndim=3] volume, np.ndarray[np.float32_t,ndim=3] mc_vol):
     cdef int vol_len=len(volume)-1
     cdef int k, j, i
     cdef char* pattern # a string pointer - allocate later
     Perm_area = {
            ""00000000"": 0.000000,
            ...
            ""00011101"": 1.515500
        }

        with nogil,parallel():
           try:
             pattern = &lt;char*&gt;malloc(sizeof(char)*260)
             for k in prange(vol_len):
                 for j in range(vol_len):
                    for i in range(vol_len):
                        sprintf(pattern, ""%i%i%i%i%i%i%i%i"",
                                volume[i, j, k],
                                volume[i, j + 1, k],
                                volume[i + 1, j, k],
                                volume[i + 1, j + 1, k],
                                volume[i, j, k + 1],
                                volume[i, j + 1, k + 1],
                                volume[i + 1, j, k + 1],
                                volume[i + 1, j + 1, k + 1]);
                        with gil:
                            mc_vol[i, j, k] = Perm_area[pattern]
                            # if Perm_area[pattern] &gt; 0:
                            #    print pattern, 'Area: ', Perm_area[pattern]
                            #    total_area += Perm_area[pattern]
           finally:
               free(pattern)

        return mc_vol
</code></pre>

<p>My setup file looks like:</p>

<pre><code>setup(
    name='SurfaceArea',
    ext_modules=[
        Extension('c_marchSurf', ['c_marchSurf.pyx'], include_dirs=[numpy.get_include()],
                  extra_compile_args=['-fopenmp'], extra_link_args=['-fopenmp'], language=""c++"")
    ],
    cmdclass={'build_ext': build_ext}, requires=['Cython', 'numpy', 'matplotlib', 'pathos', 'scipy', 'cython.parallel']
)
</code></pre>",0,python|for-loop|parallel-processing|cython
29965176,Alternative to npz files?,"<p>I use arrays stored in Python .npz format. I have a lot of these files, which all share the same common structure: filename <code>my_file_var1_var2_var3.npz</code> contains the following items (all arrays are 32bit Floats):</p>

<ul>
<li>a 2D array (N=11, Ns=2000)</li>
<li>a 2D array (12, N )</li>
<li>a 2D array ( 300, N )</li>
<li>a 2D array ( 300, Ns )</li>
<li>a float</li>
<li>an integer</li>
</ul>

<p>It's quite annoying to have in excess of 1000 files, and each of them ends up taking some 4Mb. I was thinking that it would be good to shift them to a container, like HDF5/Pytables or similar. The different arrays are just arrays, there's not preferential ordering or anything (they are effectively matrices or stacks of vectors that will be operated on). All the arrays for each filename are required together simultaneously. </p>

<p>Are there any recommendations on what formats would be better to retrieve the arrays associated with <code>var1</code>, <code>var2</code> and <code>var3</code>, that is portable and efficient with storage</p>",2,python|arrays|hdf
30080498,Build docker image from rhel6.5 image,"<p>I'm trying to build a python3-based container and install some requirements. But the build of python3 fails
Here my Dockerfile</p>

<pre><code>FROM rhel6.5
ADD ./* /app/
WORKDIR /app/Python
CMD [""./configure""]
CMD [""make""]
CMD [""altinstall""]
WORKDIR /app
CMD [""python"", ""-m"", ""pip"",  ""install"" , ""-r"" , ""requirement.txt""]
</code></pre>

<p>After the build when i run </p>

<p><code>sudo docker run myimage python -v</code>  gives 2.6 
when, I run the bash and trying to compile python again</p>

<pre><code>sudo docker run -i myimage /bin/bash
./configure
</code></pre>

<p>I got </p>

<pre><code>./configure
checking build system type... x86_64-unknown-linux-gnu
checking host system type... x86_64-unknown-linux-gnu
checking for --enable-universalsdk... no
checking for --with-universal-archs... no
checking MACHDEP... linux
checking for --without-gcc... no
checking for gcc... no
checking for cc... no
checking for cl.exe... no
configure: error: in `/app':
configure: error: no acceptable C compiler found in $PATH
See `config.log' for more details
</code></pre>

<p>Finally </p>

<pre><code>yum install gcc
</code></pre>

<p>Also fails</p>

<pre><code>Loaded plugins: product-id, subscription-manager
Setting up Install Process
No package gcc available.
Error: Nothing to do
</code></pre>",0,python|docker
30064100,How to upgrade Django app from 1.6.11 to 1.8 when makemigrations crashes?,"<p>I'm following the instructions to upgrade a Django app from Django 1.6.11 to 1.8.1. I've deleted all the migrations save for the <strong>init</strong>.py. I then run:</p>

<pre><code>manage.py makemigrations
</code></pre>

<p>and it crashes with the following traceback:</p>

<pre><code>Traceback (most recent call last):
File ""manage.py"", line 12, in &lt;module&gt;
  execute_from_command_line(sys.argv)
File ""/Users/dwatson/Environments/website/lib/python2.7/site-packages/django/core/management/__init__.py"", line 338, in execute_from_command_line
  utility.execute()
File ""/Users/dwatson/Environments/website/lib/python2.7/site-packages/django/core/management/__init__.py"", line 330, in execute
  self.fetch_command(subcommand).run_from_argv(self.argv)
File ""/Users/dwatson/Environments/website/lib/python2.7/site-packages/django/core/management/base.py"", line 390, in run_from_argv
  self.execute(*args, **cmd_options)
File ""/Users/dwatson/Environments/website/lib/python2.7/site-packages/django/core/management/base.py"", line 441, in execute
  output = self.handle(*args, **options)
File ""/Users/dwatson/Environments/website/lib/python2.7/site-packages/django/core/management/commands/makemigrations.py"", line 143, in handle
  self.write_migration_files(changes)
File ""/Users/dwatson/Environments/website/lib/python2.7/site-packages/django/core/management/commands/makemigrations.py"", line 171, in write_migration_files
  migration_string = writer.as_string()
File ""/Users/dwatson/Environments/website/lib/python2.7/site-packages/django/db/migrations/writer.py"", line 166, in as_string
  operation_string, operation_imports = OperationWriter(operation).serialize()
File ""/Users/dwatson/Environments/website/lib/python2.7/site-packages/django/db/migrations/writer.py"", line 124, in serialize
  _write(arg_name, arg_value)
File ""/Users/dwatson/Environments/website/lib/python2.7/site-packages/django/db/migrations/writer.py"", line 75, in _write
  arg_string, arg_imports = MigrationWriter.serialize(item)
File ""/Users/dwatson/Environments/website/lib/python2.7/site-packages/django/db/migrations/writer.py"", line 303, in serialize
  item_string, item_imports = cls.serialize(item)
File ""/Users/dwatson/Environments/website/lib/python2.7/site-packages/django/db/migrations/writer.py"", line 377, in serialize
  return cls.serialize_deconstructed(path, args, kwargs)
File ""/Users/dwatson/Environments/website/lib/python2.7/site-packages/django/db/migrations/writer.py"", line 268, in serialize_deconstructed
  arg_string, arg_imports = cls.serialize(arg)
File ""/Users/dwatson/Environments/website/lib/python2.7/site-packages/django/db/migrations/writer.py"", line 465, in serialize
  ""topics/migrations/#migration-serializing"" % (value, get_docs_version())
ValueError: Cannot serialize: &lt;bound method AccountManager.gen_num of &lt;coreapi.models.AccountManager object at 0x103925450&gt;&gt;
There are some values Django cannot serialize into migration files.
For more, see https://docs.djangoproject.com/en/1.8/topics/migrations/#migration-serializing
</code></pre>

<p>This function is a method defined in the AccountManager class, which derives from models.Manager:</p>

<pre><code>def gen_num(self):
    max_digits = 9
    candidate = random.randint(0, 10**max_digits)
    return candidate
</code></pre>

<p>I've inspected the return candidate line and as expected, it's an int.</p>

<p>I assume that this method is being introspected because it is set as the default for the associated field:</p>

<pre><code>num = models.PositiveIntegerField(
    _('Num'), help_text=_('Number, automatically-generated'),
    unique=True, blank=True, null=True, default=AccountManager().gen_num
)
</code></pre>",0,python|django|migration
30182344,How to iterate through the synset list generated from wordnet using python 3.4.2,"<p>I am using wordnet to find the synonyms for a particular word as shown below</p>

<pre><code>synonyms = wn.synsets('good','a')
</code></pre>

<p>where wn is wordnet. This returns a list of synsets like </p>

<pre><code>Synset('good.a.01')    
Synset('full.s.06')    
Synset('good.a.03')    
Synset('estimable.s.02')    
Synset('beneficial.s.01')
</code></pre>

<p>etc...</p>

<p>How to iterate through each synset and get the name and the pos tag of each synset?</p>",1,python-3.x|nlp|wordnet|sentiment-analysis
30125373,IPython notebook to slides: Reveal is not defined,"<p>I'm using nbconvert to make a reveal.js slideshow from my notebook. Specifically, I'm running: <code>ipython nbconvert --to slides analysis.ipynb</code>. This creates ""analysis.slides.html"", and I put ""reveal.js"" in the same folder. That is, I have:</p>

<ul>
<li>reveal.js
<ul>
<li>...</li>
</ul></li>
<li>analysis.ipynb</li>
<li>analysis.slides.html</li>
</ul>

<p>However, when opening ""analysis.slides.html"" in the browser JavaScript console, I get the following:</p>

<pre><code>analysis.slides.html:1992 Uncaught ReferenceError: Reveal is not defined
analysis.slides.html:2032 Uncaught ReferenceError: Reveal is not defined
require.min.js:8 Uncaught Error: Mismatched anonymous define() module: function () {
        root.Reveal = factory();
        return root.Reveal;
    }
http://requirejs.org/docs/errors.html#mismatch
</code></pre>

<p>I don't get a 404 error for the line which loads reveal.js - <code>&lt;script src=""reveal.js/js/reveal.js""&gt;&lt;/script&gt;</code> - so any ideas why I might be seeing the errors I am?</p>

<p>Thanks!</p>",4,javascript|ipython-notebook|reveal.js
30164330,Sum values in tuple (values in dict),"<p>I have a dictionary <code>data</code> that looks like that with sample values:</p>

<pre><code>defaultdict(&lt;type 'list'&gt;, 
{(None, 2014): [(5, 1), (10, 2)], 
(u'Middle', 2014): [(6, 2), (11, 3)],
(u'SouthWest', 2015): [(7,3), (12, 4)]})
</code></pre>

<p>I get this from <code>collections.defaultdict(list)</code> because my keys have to be lists.</p>

<p>My goal is to get a new dictionary that will contain the sum values for every tuple with respect to their position in the tuple.</p>

<p>By running</p>

<pre><code>out = {k:(sum(tup[0] for tup in v),sum(tup[1] for tup in v)) for k,v in data.items()}
</code></pre>

<p>I get </p>

<pre><code>{(None, 2014): (15, 3),  (u'Middle', 2014): (17, 5), (u'SouthWest', 2015): (19, 7)}
</code></pre>

<p>However, I don't know in advance how many items will be in every tuple, so using the <code>sum(tup[0] for tup in v)</code> with hard-coded indices is not an option. I know, however, how many integers will be in the tuple. This value is an integer and I get this along with the <code>data</code> dict. All tuples are always of the same length (in this example, of length 2).</p>

<p>How do I tell Python that I want the <code>out</code> dict to contain tuple of the size that matches the length I have to use?</p>",1,python|python-2.7|dictionary|tuples
